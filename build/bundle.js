var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t,e,n){t.$$.on_destroy.push(u(e,n))}function l(t,e,n,r){if(t){const i=h(t,e,n,r);return t[0](i)}}function h(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}function f(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if("object"==typeof e.dirty){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}const d="undefined"!=typeof window;let p=d?()=>window.performance.now():()=>Date.now(),m=d?t=>requestAnimationFrame(t):t;const g=new Set;function v(t){g.forEach(e=>{e.c(t)||(g.delete(e),e.f())}),0!==g.size&&m(v)}function y(t){let e;return 0===g.size&&m(v),{promise:new Promise(n=>{g.add(e={c:t,f:n})}),abort(){g.delete(e)}}}function b(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function _(t){t.parentNode.removeChild(t)}function E(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function x(){return S(" ")}function I(){return S("")}function k(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function A(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t){return""===t?void 0:+t}function N(t,e){e=""+e,t.data!==e&&(t.data=e)}function M(t,e){(null!=e||t.value)&&(t.value=e)}function P(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function D(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function R(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}let O,B,U=0,F={};function j(t,e,n,r,i,o,a,s=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);c+=100*t+`%{${a(r,1-r)}}\n`}const l=c+`100% {${a(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${s}`;if(!F[h]){if(!O){const t=T("style");document.head.appendChild(t),O=t.sheet}F[h]=!0,O.insertRule(`@keyframes ${h} ${l}`,O.cssRules.length)}const f=t.style.animation||"";return t.style.animation=`${f?`${f}, `:""}${h} ${r}ms linear ${i}ms 1 both`,U+=1,h}function q(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--U&&m(()=>{if(U)return;let t=O.cssRules.length;for(;t--;)O.deleteRule(t);F={}})}function V(t){B=t}function $(){if(!B)throw new Error("Function called outside component initialization");return B}function z(t){$().$$.on_mount.push(t)}function H(t){$().$$.on_destroy.push(t)}function G(){const t=$();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=R(e,n);r.slice().forEach(e=>{e.call(t,i)})}}}const W=[],K=[],Z=[],Q=[],Y=Promise.resolve();let J=!1;function X(t){Z.push(t)}const tt=new Set;function et(){do{for(;W.length;){const t=W.shift();V(t),nt(t.$$)}for(;K.length;)K.pop()();for(let t=0;t<Z.length;t+=1){const e=Z[t];tt.has(e)||(tt.add(e),e())}Z.length=0}while(W.length);for(;Q.length;)Q.pop()();J=!1,tt.clear()}function nt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(X)}}let rt;function it(){return rt||(rt=Promise.resolve(),rt.then(()=>{rt=null})),rt}function ot(t,e,n){t.dispatchEvent(R(`${e?"intro":"outro"}${n}`))}const at=new Set;let st;function ut(){st={r:0,c:[],p:st}}function ct(){st.r||o(st.c),st=st.p}function lt(t,e){t&&t.i&&(at.delete(t),t.i(e))}function ht(t,e,n,r){if(t&&t.o){if(at.has(t))return;at.add(t),st.c.push(()=>{at.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const ft={duration:0};function dt(n,r,i){let o,s,u=r(n,i),c=!1,l=0;function h(){o&&q(n,o)}function f(){const{delay:r=0,duration:i=300,easing:a=e,tick:f=t,css:d}=u||ft;d&&(o=j(n,0,1,i,r,a,d,l++)),f(0,1);const m=p()+r,g=m+i;s&&s.abort(),c=!0,X(()=>ot(n,!0,"start")),s=y(t=>{if(c){if(t>=g)return f(1,0),ot(n,!0,"end"),h(),c=!1;if(t>=m){const e=a((t-m)/i);f(e,1-e)}}return c})}let d=!1;return{start(){d||(q(n),a(u)?(u=u(),it().then(f)):f())},invalidate(){d=!1},end(){c&&(h(),c=!1)}}}function pt(n,r,i,s){let u=r(n,i),c=s?0:1,l=null,h=null,f=null;function d(){f&&q(n,f)}function m(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(r){const{delay:i=0,duration:a=300,easing:s=e,tick:g=t,css:v}=u||ft,b={start:p()+i,b:r};r||(b.group=st,st.r+=1),l?h=b:(v&&(d(),f=j(n,c,r,a,i,s,v)),r&&g(0,1),l=m(b,a),X(()=>ot(n,r,"start")),y(t=>{if(h&&t>h.start&&(l=m(h,a),h=null,ot(n,l.b,"start"),v&&(d(),f=j(n,c,l.b,l.duration,0,s,u.css))),l)if(t>=l.end)g(c=l.b,1-c),ot(n,l.b,"end"),h||(l.b?d():--l.group.r||o(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;c=l.a+l.d*s(e/l.duration),g(c,1-c)}return!(!l&&!h)}))}return{run(t){a(u)?it().then(()=>{u=u(),g(t)}):g(t)},end(){d(),l=h=null}}}function mt(t){t&&t.c()}function gt(t,e,n){const{fragment:i,on_mount:s,on_destroy:u,after_update:c}=t.$$;i&&i.m(e,n),X(()=>{const e=s.map(r).filter(a);u?u.push(...e):o(e),t.$$.on_mount=[]}),c.forEach(X)}function vt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){-1===t.$$.dirty[0]&&(W.push(t),J||(J=!0,Y.then(et)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function bt(e,n,r,a,s,u,c=[-1]){const l=B;V(e);const h=n.props||{},f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:c};let d=!1;f.ctx=r?r(e,h,(t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=i)&&(f.bound[t]&&f.bound[t](i),d&&yt(e,t)),n}):[],f.update(),d=!0,o(f.before_update),f.fragment=!!a&&a(f.ctx),n.target&&(n.hydrate?f.fragment&&f.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):f.fragment&&f.fragment.c(),n.intro&&lt(e.$$.fragment),gt(e,n.target,n.anchor),et()),V(l)}class wt{$destroy(){vt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}class _t extends wt{constructor(t){super(),bt(this,t,null,null,s,{})}}var Et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Tt(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function St(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function xt(t,e){return t(e={exports:{}},e.exports),e.exports}var It=xt((function(t){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,b,w;!function(_){var E,T,S="object"==typeof Et?Et:"object"==typeof self?self:"object"==typeof this?this:{};function x(t,e){return t!==S&&("function"==typeof Object.create?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(n,r){return t[n]=e?e(n,r):r}}E=x(S,x(t.exports)),T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},e=function(t,e){function n(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},i=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},o=function(t,e){return function(n,r){e(n,r,t)}},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},l=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},h=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},f=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t},d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},p=function(t){return this instanceof p?(this.v=t,this):new p(t)},m=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof p?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}},g=function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:p(t[r](e)),done:"return"===r}:i?i(e):e}:i}},v=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=l(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}},y=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},b=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},w=function(t){return t&&t.__esModule?t:{default:t}},E("__extends",e),E("__assign",n),E("__rest",r),E("__decorate",i),E("__param",o),E("__metadata",a),E("__awaiter",s),E("__generator",u),E("__exportStar",c),E("__values",l),E("__read",h),E("__spread",f),E("__spreadArrays",d),E("__await",p),E("__asyncGenerator",m),E("__asyncDelegator",g),E("__asyncValues",v),E("__makeTemplateObject",y),E("__importStar",b),E("__importDefault",w)}()}));St(It);var kt=xt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(t,e){if(!t)throw i(e)},i=function(t){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},s=function(t){try{return a.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=u(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var h=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,f.prototype.create),i}return It.__extends(e,t),e}(Error),f=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?d(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new h(i,s),c=0,l=Object.keys(r);c<l.length;c++){var f=l[c];"_"!==f.slice(-1)&&(f in u&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),u[f]=r[f])}return u},t}();function d(t,e){return t.replace(p,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var p=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function m(t){return JSON.parse(t)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(s(o[0])||""),n=m(s(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var v=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=b),void 0===r.error&&(r.error=b),void 0===r.complete&&(r.complete=b);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function b(){}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function w(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=n,e.Deferred=c,e.ErrorFactory=f,e.FirebaseError=h,e.Sha1=v,e.assert=r,e.assertionError=i,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=a,e.base64Decode=s,e.base64Encode=function(t){var e=o(t);return a.encodeByteArray(e,!0)},e.contains=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new y(t,e);return n.subscribe.bind(n)},e.decode=g,e.deepCopy=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){return u(void 0,t)},e.deepExtend=u,e.errorPrefix=w,e.getUA=l,e.isAdmin=function(t){var e=g(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return l().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(Et.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return l().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=g(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=g(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var a=o-55296;i++,r(i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(w(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(w(t,e,r)+"must be a valid context object.")}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */,e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(w(t,e,r)+"must be a valid firebase namespace.")}}));St(kt);kt.CONSTANTS,kt.Deferred,kt.ErrorFactory,kt.FirebaseError,kt.Sha1,kt.assert,kt.assertionError,kt.async,kt.base64,kt.base64Decode,kt.base64Encode,kt.contains,kt.createSubscribe,kt.decode,kt.deepCopy,kt.deepExtend,kt.errorPrefix,kt.getUA,kt.isAdmin,kt.isBrowser,kt.isBrowserExtension,kt.isElectron,kt.isEmpty,kt.isIE,kt.isMobileCordova,kt.isNode,kt.isNodeSdk,kt.isReactNative,kt.isUWP,kt.isValidFormat,kt.isValidTimestamp,kt.issuedAtTime,kt.jsonEval,kt.map,kt.querystring,kt.querystringDecode,kt.safeGet,kt.stringLength,kt.stringToByteArray,kt.stringify,kt.validateArgCount,kt.validateCallback,kt.validateContextObject,kt.validateNamespace;var At=xt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),r=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new kt.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=It.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=It.__values(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=It.__read(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return It.__awaiter(this,void 0,void 0,(function(){var t;return It.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var i=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new r(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=n,e.ComponentContainer=i,e.Provider=r}));St(At);At.Component,At.ComponentContainer,At.Provider;var Ct=xt((function(t,e){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function n(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Object.defineProperty(e,"__esModule",{value:!0});var r,i=[];(r=e.LogLevel||(e.LogLevel={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";var o=e.LogLevel.INFO,a=function(t,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(!(r<t.logLevel)){var a=(new Date).toISOString();switch(r){case e.LogLevel.DEBUG:case e.LogLevel.VERBOSE:console.log.apply(console,n(["["+a+"]  "+t.name+":"],i));break;case e.LogLevel.INFO:console.info.apply(console,n(["["+a+"]  "+t.name+":"],i));break;case e.LogLevel.WARN:console.warn.apply(console,n(["["+a+"]  "+t.name+":"],i));break;case e.LogLevel.ERROR:console.error.apply(console,n(["["+a+"]  "+t.name+":"],i));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+r+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in e.LogLevel))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.DEBUG],t))},t.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.VERBOSE],t))},t.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.INFO],t))},t.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.WARN],t))},t.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.ERROR],t))},t}();e.Logger=s,e.setLogLevel=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){i.forEach((function(e){e.logLevel=t}))}}));St(Ct);Ct.LogLevel,Ct.Logger,Ct.setLogLevel;var Nt=xt((function(t,e){
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var n;Object.defineProperty(e,"__esModule",{value:!0});var r,i=((n={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",n["bad-app-name"]="Illegal App name: '{$appName}",n["duplicate-app"]="Firebase App named '{$appName}' already exists",n["app-deleted"]="Firebase App named '{$appName}' already deleted",n["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",n),o=new kt.ErrorFactory("app","Firebase",i),a="@firebase/app",s=((r={})[a]="fire-core",r["@firebase/analytics"]="fire-analytics",r["@firebase/auth"]="fire-auth",r["@firebase/database"]="fire-rtdb",r["@firebase/functions"]="fire-fn",r["@firebase/installations"]="fire-iid",r["@firebase/messaging"]="fire-fcm",r["@firebase/performance"]="fire-perf",r["@firebase/remote-config"]="fire-rc",r["@firebase/storage"]="fire-gcs",r["@firebase/firestore"]="fire-fst",r["fire-js"]="fire-js",r["firebase-wrapper"]="fire-js-all",r),u=new Ct.Logger("@firebase/app"),c=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=kt.deepCopy(t),this.container=new At.ComponentContainer(e.name),this._addComponent(new At.Component("app",(function(){return o}),"PUBLIC"));try{for(var a=It.__values(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){u.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw o.create("app-deleted",{appName:this.name_})},t}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var l=
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function t(){var e=
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var a=i;void 0===a.name&&(a.name="[DEFAULT]");var s=a.name;if("string"!=typeof s||!s)throw o.create("bad-app-name",{appName:String(s)});if(kt.contains(e,s))throw o.create("duplicate-app",{appName:s});var u=new t(n,a,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=s[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){var l=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&l.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&c&&l.push("and"),c&&l.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void u.warn(l.join(" "))}a(new At.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},apps:null,SDK_VERSION:"7.8.0",INTERNAL:{registerComponent:a,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!kt.contains(e,t))throw o.create("no-app",{appName:t});return e[t]}function a(a){var s,c,l=a.name;if(n.has(l))return u.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?r[l]:null;if(n.set(l,a),"PUBLIC"===a.type){var h=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[l])throw o.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==a.serviceProps&&kt.deepExtend(h,a.serviceProps),r[l]=h,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,l);return n.apply(this,a.multipleInstances?t:[])}}try{for(var f=It.__values(Object.keys(e)),d=f.next();!d.done;d=f.next()){var p=d.value;e[p]._addComponent(a)}}catch(t){s={error:t}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}return"PUBLIC"===a.type?r[l]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r)}(c);return e.INTERNAL=It.__assign(It.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){kt.deepExtend(e,t)},createSubscribe:kt.createSubscribe,ErrorFactory:kt.ErrorFactory,deepExtend:kt.deepExtend}),e}(),h=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e,n=t.getComponent();return"VERSION"===(null===(e=n)||void 0===e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if(kt.isBrowser()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var d=l.initializeApp;l.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return kt.isNode()&&u.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),d.apply(void 0,t)};var p=l;!function(t,e){t.INTERNAL.registerComponent(new At.Component("platform-logger",(function(t){return new h(t)}),"PRIVATE")),t.registerVersion(a,"0.5.3",e),t.registerVersion("fire-js","")}(p),e.default=p,e.firebase=p}));St(Nt);Nt.firebase;var Mt,Pt=(Mt=Nt)&&"object"==typeof Mt&&"default"in Mt?Mt.default:Mt;
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Pt.registerVersion("firebase","7.8.0","app");var Lt=Pt;(function(){var t,e=Nt.default,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:void 0!==Et&&null!=Et?Et:this;function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.o=function(t){var e=this.f();t.La(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.La(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.La=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).La(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).La(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self;function u(t){return"string"==typeof t}function c(t){return"boolean"==typeof t}var l=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(){}function d(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){return null===t}function m(t){return"array"==d(t)}function g(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==d(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function E(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function T(t,e,n){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:E).apply(null,arguments)}function S(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var x=Date.now||function(){return+new Date};function I(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.gd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function k(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function A(t){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function C(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");A.call(this,n+t[r])}function N(t,e){throw new C("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function P(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}I(A,Error),A.prototype.name="CustomError",I(C,A),C.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var D=new M((function(){return new O}),(function(t){t.reset()}));function R(){var t=Ht,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function O(){this.next=this.b=this.a=null}function B(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;N("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}L.prototype.add=function(t,e){var n=D.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},O.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},O.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(u(t))return u(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},F=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=u(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=u(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function V(t,e){return 0<=U(t,e)}function $(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function z(t,e){!function(t,e){for(var n=u(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function H(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function K(t){for(var e in t)return!1;return!0}function Z(t){var e,n={};for(e in t)n[e]=t[e];return n}var Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Q.length;o++)n=Q[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function J(t,e){this.a=t===et&&e||"",this.b=tt}function X(t){return t instanceof J&&t.constructor===J&&t.b===tt?t.a:(N("expected object of type Const, got '"+t+"'"),"type_error:Const")}J.prototype.qa=!0,J.prototype.pa=function(){return this.a},J.prototype.toString=function(){return"Const{"+this.a+"}"};var tt={},et={},nt=new J(et,"");function rt(){this.a="",this.b=ut}function it(t){return t instanceof rt&&t.constructor===rt&&t.b===ut?t.a:(N("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function ot(t,e){var n=X(t);if(!st.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ct(t=n.replace(at,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof J?X(t):encodeURIComponent(String(t))})))}rt.prototype.qa=!0,rt.prototype.pa=function(){return this.a.toString()},rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var at=/%{(\w+)}/g,st=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ut={};function ct(t){var e=new rt;return e.a=t,e}var lt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ht=/&/g,ft=/</g,dt=/>/g,pt=/"/g,mt=/'/g,gt=/\x00/g,vt=/[\x00&<>"']/;function yt(t,e){return-1!=t.indexOf(e)}function bt(t,e){return t<e?-1:t>e?1:0}function wt(){this.a="",this.b=It}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===It?t.a:(N("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}wt.prototype.qa=!0,wt.prototype.pa=function(){return this.a.toString()},wt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Tt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function St(t){return t instanceof wt?t:(t="object"==typeof t&&t.qa?t.pa():String(t),Tt.test(t)||(t="about:invalid#zClosurez"),kt(t))}var xt,It={};function kt(t){var e=new wt;return e.a=t,e}kt("about:blank");t:{var At=s.navigator;if(At){var Ct=At.userAgent;if(Ct){xt=Ct;break t}}xt=""}function Mt(t){return yt(xt,t)}function Pt(){this.a="",this.b=Dt}function Lt(t){return t instanceof Pt&&t.constructor===Pt&&t.b===Dt?t.a:(N("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}Pt.prototype.qa=!0,Pt.prototype.pa=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function Rt(t){var e=new Pt;return e.a=t,e}Rt("<!DOCTYPE html>");var Ot,Bt,Ut=Rt("");function Ft(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function jt(t){return vt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ht,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ft,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(dt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(pt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(mt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(gt,"&#0;"))),t}function qt(t){s.setTimeout((function(){throw t}),0)}function Vt(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Mt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=ct(X(nt));B(t,"HTMLIFrameElement"),t.src=it(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Lt(Ut)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=T((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!Mt("Trident")&&!Mt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){s.setTimeout(t,0)}}function $t(t,e){Bt||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);Bt=function(){t.then(Gt)}}else Bt=function(){var t=Gt;!v(s.setImmediate)||s.Window&&s.Window.prototype&&!Mt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Ot||(Ot=Vt()),Ot(t)):s.setImmediate(t)}}(),zt||(Bt(),zt=!0),Ht.add(t,e)}Rt("<br>");var zt=!1,Ht=new L;function Gt(){for(var t;t=R();){try{t.a.call(t.b)}catch(t){qt(t)}P(D,t)}zt=!1}function Wt(t,e){if(this.a=Kt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){ae(n,Zt,t)}),(function(t){if(!(t instanceof de))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ae(n,Qt,t)}))}catch(t){ae(this,Qt,t)}}var Kt=0,Zt=2,Qt=3;function Yt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Yt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Jt=new M((function(){return new Yt}),(function(t){t.reset()}));function Xt(t,e,n){var r=Jt.get();return r.g=t,r.b=e,r.f=n,r}function te(t){if(t instanceof Wt)return t;var e=new Wt(f);return ae(e,Zt,t),e}function ee(t){return new Wt((function(e,n){n(t)}))}function ne(t,e,n){se(t,e,n,null)||$t(S(e,t))}function re(t){return new Wt((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ne(t[o],S(i,o,!0),S(i,o,!1));else e(r)}))}function ie(t,e){t.b||t.a!=Zt&&t.a!=Qt||ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function oe(t,e,n,r){var i=Xt(null,null,null);return i.a=new Wt((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof de?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,ie(t,i),i.a}function ae(t,e,n){t.a==Kt&&(t===n&&(e=Qt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,se(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,ue(t),e!=Qt||n instanceof de||function(t,e){t.g=!0,$t((function(){t.g&&fe.call(null,e)}))}(t,n)))}function se(t,e,n,r){if(t instanceof Wt)return ie(t,Xt(e||f,n||null,r)),!0;if(k(t))return t.then(e,n,r),!0;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function ue(t){t.h||(t.h=!0,$t(t.Zb,t))}function ce(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function le(t,e,n,r){if(n==Qt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,he(e,n,r);else try{e.c?e.g.call(e.f):he(e,n,r)}catch(t){fe.call(null,t)}P(Jt,e)}function he(t,e,n){e==Zt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Wt.prototype.then=function(t,e,n){return oe(this,v(t)?t:null,v(e)?e:null,n)},Wt.prototype.$goog_Thenable=!0,(t=Wt.prototype).ka=function(t,e){return(t=Xt(t,t,e)).c=!0,ie(this,t),this},t.s=function(t,e){return oe(this,null,t,e)},t.cancel=function(t){this.a==Kt&&$t((function(){!function t(e,n){if(e.a==Kt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==Kt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):ce(r),le(r,o,Qt,n)))}e.c=null}else ae(e,Qt,n)}(this,new de(t))}),this)},t.Oc=function(t){this.a=Kt,ae(this,Zt,t)},t.Pc=function(t){this.a=Kt,ae(this,Qt,t)},t.Zb=function(){for(var t;t=ce(this);)le(this,t,this.a,this.i);this.h=!1};var fe=qt;function de(t){A.call(this,t)}function pe(){this.va=this.va,this.la=this.la}I(de,A),de.prototype.name="cancel";function me(t){if(!t.va&&(t.va=!0,t.za(),0))t[b]||(t[b]=++w)}function ge(t){return ge[" "](t),t}pe.prototype.va=!1,pe.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},ge[" "]=f;var ve,ye,be=Mt("Opera"),we=Mt("Trident")||Mt("MSIE"),_e=Mt("Edge"),Ee=_e||we,Te=Mt("Gecko")&&!(yt(xt.toLowerCase(),"webkit")&&!Mt("Edge"))&&!(Mt("Trident")||Mt("MSIE"))&&!Mt("Edge"),Se=yt(xt.toLowerCase(),"webkit")&&!Mt("Edge");function xe(){var t=s.document;return t?t.documentMode:void 0}t:{var Ie="",ke=(ye=xt,Te?/rv:([^\);]+)(\)|;)/.exec(ye):_e?/Edge\/([\d\.]+)/.exec(ye):we?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ye):Se?/WebKit\/(\S+)/.exec(ye):be?/(?:Version)[ \/]?(\S+)/.exec(ye):void 0);if(ke&&(Ie=ke?ke[1]:""),we){var Ae=xe();if(null!=Ae&&Ae>parseFloat(Ie)){ve=String(Ae);break t}}ve=Ie}var Ce,Ne={};function Me(t){return function(t,e){var n=Ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=lt(String(ve)).split("."),r=lt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=bt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||bt(0==a[2].length,0==s[2].length)||bt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}Ce=s.document&&we?xe():void 0;var Pe=Object.freeze||function(t){return t},Le=!we||9<=Number(Ce),De=we&&!Me("9"),Re=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",f,e),s.removeEventListener("test",f,e)}catch(t){}return t}();function Oe(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function Be(t,e){if(Oe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Te){t:{try{ge(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=u(t.pointerType)?t.pointerType:Ue[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Oe.prototype.preventDefault=function(){this.Mb=!1},I(Be,Oe);var Ue=Pe({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,De)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Be.prototype.f=function(){return this.a};var Fe="closure_listenable_"+(1e6*Math.random()|0),je=0;function qe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Pa=i,this.key=++je,this.ta=this.Ka=!1}function Ve(t){t.ta=!0,t.listener=null,t.proxy=null,t.src=null,t.Pa=null}function $e(t){this.src=t,this.a={},this.b=0}function ze(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(Ve(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function He(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ta&&o.listener==e&&o.capture==!!n&&o.Pa==r)return i}return-1}$e.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=He(t,e,r,i);return-1<a?(e=t[a],n||(e.Ka=!1)):((e=new qe(e,this.src,o,!!r,i)).Ka=n,t.push(e)),e};var Ge="closure_lm_"+(1e6*Math.random()|0),We={};function Ke(t,e,n,r,i){if(r&&r.once)Qe(t,e,n,r,i);else if(m(e))for(var o=0;o<e.length;o++)Ke(t,e[o],n,r,i);else n=an(n),t&&t[Fe]?un(t,e,n,y(r)?!!r.capture:!!r,i):Ze(t,e,n,!1,r,i)}function Ze(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i,s=rn(t);if(s||(t[Ge]=s=new $e(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=nn,e=Le?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Re||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Qe(t,e,n,r,i){if(m(e))for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);else n=an(n),t&&t[Fe]?cn(t,e,n,y(r)?!!r.capture:!!r,i):Ze(t,e,n,!0,r,i)}function Ye(t,e,n,r,i){if(m(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=an(n),t&&t[Fe]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=He(o=t.a[e],n,r,i))&&(Ve(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=rn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=He(e,n,r,i)),(n=-1<t?e[t]:null)&&Je(n))}function Je(t){if("number"!=typeof t&&t&&!t.ta){var e=t.src;if(e&&e[Fe])ze(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rn(e))?(ze(n,t),0==n.b&&(n.src=null,e[Ge]=null)):Ve(t)}}}function Xe(t){return t in We?We[t]:We[t]="on"+t}function tn(t,e,n,r){var i=!0;if((t=rn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ta&&(o=en(o,r),i=i&&!1!==o)}return i}function en(t,e){var n=t.listener,r=t.Pa||t.src;return t.Ka&&Je(t),n.call(r,e)}function nn(t,e){if(t.ta)return!0;if(!Le){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=tn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=tn(r[i],t,!1,e),n=n&&o}return n}return en(t,new Be(e,this))}function rn(t){return(t=t[Ge])instanceof $e?t:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function an(t){return v(t)?t:(t[on]||(t[on]=function(e){return t.handleEvent(e)}),t[on])}function sn(){pe.call(this),this.u=new $e(this),this.Sb=this,this.Xa=null}function un(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function cn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function ln(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&ze(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function hn(t,e,n){if(v(t))n&&(t=T(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=T(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function fn(t){var e=null;return new Wt((function(n,r){-1==(e=hn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw s.clearTimeout(e),t}))}function dn(t){if(t.U&&"function"==typeof t.U)return t.U();if(u(t))return t.split("");if(g(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function pn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(g(t)||u(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function mn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];vn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)vn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function vn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(sn,pe),sn.prototype[Fe]=!0,sn.prototype.addEventListener=function(t,e,n,r){Ke(this,t,e,n,r)},sn.prototype.removeEventListener=function(t,e,n,r){Ye(this,t,e,n,r)},sn.prototype.dispatchEvent=function(t){var e,n=this.Xa;if(n)for(e=[];n;n=n.Xa)e.push(n);n=this.Sb;var r=t.type||t;if(u(t))t=new Oe(t,n);else if(t instanceof Oe)t.target=t.target||n;else{var i=t;Y(t=new Oe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=ln(a,r,!0,t)&&i}if(i=ln(a=t.b=n,r,!0,t)&&i,i=ln(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=ln(a=t.b=e[o],r,!1,t)&&i;return i},sn.prototype.za=function(){if(sn.qb.za.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ve(n[r]);delete e.a[t],e.b--}}this.Xa=null},(t=mn.prototype).U=function(){gn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return gn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return vn(this.b,t)?this.b[t]:e},t.set=function(t,e){vn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof bn?(this.h=void 0!==e?e:t.h,wn(this,t.f),this.i=t.i,this.b=t.b,_n(this,t.l),this.c=t.c,En(this,qn(t.a)),this.g=t.g):t&&(n=String(t).match(yn))?(this.h=!!e,wn(this,n[1]||"",!0),this.i=kn(n[2]||""),this.b=kn(n[3]||"",!0),_n(this,n[4]),this.c=kn(n[5]||"",!0),En(this,n[6]||"",!0),this.g=kn(n[7]||"")):(this.h=!!e,this.a=new Rn(null,this.h))}function wn(t,e,n){t.f=n?kn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function _n(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function En(t,e,n){e instanceof Rn?(t.a=e,function(t,e){e&&!t.f&&(On(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Un(this,e),jn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=An(e,Ln)),t.a=new Rn(e,t.h))}function Tn(t,e,n){t.a.set(e,n)}function Sn(t,e){return t.a.get(e)}function xn(t){return t instanceof bn?new bn(t):new bn(t,void 0)}function In(t,e){var n=new bn(null,void 0);return wn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function An(t,e,n){return u(t)?(t=encodeURI(t).replace(e,Cn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Cn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}bn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(An(e,Nn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(An(e,Nn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(An(n,"/"==n.charAt(0)?Pn:Mn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",An(n,Dn)),t.join("")},bn.prototype.resolve=function(t){var e=new bn(this),n=!!t.f;n?wn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)_n(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(yt(i,"./")||yt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?En(e,qn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Nn=/[#\/\?@]/g,Mn=/[#\?:]/g,Pn=/[#\?]/g,Ln=/[#\?@]/g,Dn=/#/g;function Rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function On(t){t.a||(t.a=new mn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Bn(t){var e=pn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Rn(null,void 0);t=dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];m(o)?jn(n,i,o):n.add(i,o)}return n}function Un(t,e){On(t),e=Vn(t,e),vn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,vn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&gn(t)))}function Fn(t,e){return On(t),e=Vn(t,e),vn(t.a.b,e)}function jn(t,e,n){Un(t,e),0<n.length&&(t.c=null,t.a.set(Vn(t,e),G(n)),t.b+=n.length)}function qn(t){var e=new Rn;return e.c=t.c,t.a&&(e.a=new mn(t.a),e.b=t.b),e}function Vn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=Rn.prototype).add=function(t,e){On(this),this.c=null,t=Vn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){On(this),this.a.forEach((function(n,r){F(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){On(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.U=function(t){On(this);var e=[];if(u(t))Fn(this,t)&&(e=H(e,this.a.get(Vn(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},t.set=function(t,e){return On(this),this.c=null,Fn(this,t=Vn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var $n=!we||9<=Number(Ce);function zn(t){var e=document;return u(t)?e.getElementById(t):t}function Hn(t,e){W(e,(function(e,n){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Gn.hasOwnProperty(n)?t.setAttribute(Gn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var Gn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wn(t,e,n){function r(n){n&&e.appendChild(u(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!g(o)||y(o)&&0<o.nodeType?r(o):F(Kn(o)?G(o):o,r)}}function Kn(t){if(t&&"number"==typeof t.length){if(y(t))return"function"==typeof t.item||"string"==typeof t.item;if(v(t))return"function"==typeof t.item}return!1}function Zn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(m(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),Xn(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Xn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,t,e),e.join("")}function Qn(){}var Yn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Xn(t,e){e.push('"',t.replace(Jn,(function(t){var e=Yn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Yn[t]=e),e})),'"')}function tr(){var t=br();return we&&!!Ce&&11==Ce||/Edge\/\d+/.test(t)}function er(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function nr(t,e){e=e||s.window;var n="about:blank";t&&(n=_t(St(t)).toString()),e.location.href=n}function rr(t){return!!((t=(t||br()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ir(t){t=t||s.window;try{t.close()}catch(t){}}function or(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(e.target=r,yt(n,"crios/")&&(e.target="_blank")),gr(br())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof wt?n:St(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((Mt("iPhone")&&!Mt("iPod")&&!Mt("iPad")||Mt("iPad")||Mt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(B(a=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof wt||e instanceof wt||(e="object"==typeof e&&e.qa?e.pa():String(e),Tt.test(e)||(e="about:invalid#zClosurez"),e=kt(e)),a.href=_t(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=_t(e).toString(),a&&(Ee&&yt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Rt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">'),a.document.write(Lt(t)),a.document.close())):(a=r.open(_t(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ur(){var t=null;return new Wt((function(e){"complete"==s.document.readyState?e():(t=function(){e()},Qe(window,"load",t))})).s((function(e){throw Ye(window,"load",t),e}))}function cr(t){return t=t||br(),!("file:"!==Sr()&&"ionic:"!==Sr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function hr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function fr(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function dr(){var t=fr();return"ReactNative"===t||"Node"===t}var pr="Firefox",mr="Chrome";function gr(t){var e=t.toLowerCase();return yt(e,"opera/")||yt(e,"opr/")||yt(e,"opios/")?"Opera":yt(e,"iemobile")?"IEMobile":yt(e,"msie")||yt(e,"trident/")?"IE":yt(e,"edge/")?"Edge":yt(e,"firefox/")?pr:yt(e,"silk/")?"Silk":yt(e,"blackberry")?"Blackberry":yt(e,"webos")?"Webos":!yt(e,"safari/")||yt(e,"chrome/")||yt(e,"crios/")||yt(e,"android")?!yt(e,"chrome/")&&!yt(e,"crios/")||yt(e,"edge/")?yt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":mr:"Safari"}var vr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function yr(t,e){e=e||[];var n,r=[],i={};for(n in vr)i[vr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=fr())?r=gr(i=br()):"Worker"===r&&(r=gr(i=br())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function br(){return s.navigator&&s.navigator.userAgent||""}function wr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function _r(){try{var t=s.localStorage,e=Cr();if(t)return t.setItem(e,"1"),t.removeItem(e),!tr()||!!s.indexedDB}catch(t){return hr()&&!!s.indexedDB}return!1}function Er(){return(Tr()||"chrome-extension:"===Sr()||cr())&&!dr()&&_r()&&!hr()}function Tr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){return s.location&&s.location.protocol||null}function xr(t){return!rr(t=t||br())&&gr(t)!=pr}function Ir(t){return void 0===t?null:Zn(t)}function kr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ar(t){if(null!==t)return JSON.parse(t)}function Cr(t){return t||Math.floor(1e9*Math.random()).toString()}function Nr(t){return"Safari"!=gr(t=t||br())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Mr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=br(),e=fr(),this.b=rr(t)||"ReactNative"===e}function Lr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Rr(){return!(!wr("fireauth.oauthhelper",s)&&!wr("fireauth.iframe",s))}Pr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Tr()&&"chrome-extension:"!==Sr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Or,Br={};function Ur(t){Br[t]||(Br[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Fr={};Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:2}),Or=2==Fr.abcd}catch(ye){Or=!1}function jr(t,e,n){Or?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function Vr(t){var e={};return qr(e,t),e}function $r(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,$r(t[n]));return e}function zr(t){var e={},n=t[Gr],r=t[Wr];if(!(t=t[Kr])||t!=Hr&&!n)throw Error("Invalid provider user info!");e[Qr]=r||null,e[Zr]=n||null,jr(this,Jr,t),jr(this,Yr,$r(e))}var Hr="EMAIL_SIGNIN",Gr="email",Wr="newEmail",Kr="requestType",Zr="email",Qr="fromEmail",Yr="data",Jr="operation";function Xr(t,e){this.code=ei+t,this.message=e||ni[t]||""}function ti(t){var e=t&&t.code;return e?new Xr(e.substring(ei.length),t.message):null}I(Xr,Error),Xr.prototype.A=function(){return{code:this.code,message:this.message}},Xr.prototype.toJSON=function(){return this.A()};var ei="auth/",ni={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ri(t){var e=Sn(t=xn(t),ii)||null,n=Sn(t,oi)||null,r=Sn(t,ui)||null;if(r=r&&li[r]||null,!e||!n||!r)throw new Xr("argument-error",ii+", "+oi+"and "+ui+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:Sn(t,ai)||null,languageCode:Sn(t,si)||null,tenantId:Sn(t,ci)||null})}var ii="apiKey",oi="oobCode",ai="continueUrl",si="languageCode",ui="mode",ci="tenantId",li={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Hr,verifyEmail:"VERIFY_EMAIL"};function hi(t){try{return new ri(t)}catch(t){return null}}function fi(t){var e=t[vi];if(void 0===e)throw new Xr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Xr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[di];if(n&&"object"==typeof n){e=n[wi];var r=n[yi];if(n=n[bi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Xr("argument-error",yi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Xr("argument-error",bi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Xr("argument-error",wi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Xr("missing-android-pkg-name")}}else if(void 0!==n)throw new Xr("argument-error",di+" property must be a non null object when specified.");if(this.f=null,(e=t[gi])&&"object"==typeof e){if("string"==typeof(e=e[_i])&&e.length)this.f=e;else if(void 0!==e)throw new Xr("argument-error",_i+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Xr("argument-error",gi+" property must be a non null object when specified.");if(void 0!==(e=t[mi])&&"boolean"!=typeof e)throw new Xr("argument-error",mi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Xr("argument-error",pi+" property must be a non empty string when specified.");this.i=t||null}var di="android",pi="dynamicLinkDomain",mi="handleCodeInApp",gi="iOS",vi="url",yi="installApp",bi="minimumVersion",wi="packageName",_i="bundleId";function Ei(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ti=null,Si=null;function xi(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Si[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ti){Ti={},Si={};for(var t=0;65>t;t++)Ti[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Si[Ti[t]]=t,62<=t&&(Si["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Ii(t){this.f=t.sub,this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function ki(t){return(t=Ai(t))&&t.sub&&t.iss&&t.aud&&t.exp?new Ii(t):null}function Ai(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(xi(t))}catch(t){}return null}Ii.prototype.R=function(){return this.c},Ii.prototype.g=function(){return this.b};var Ci,Ni={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Mi(t){for(var e in Ni)if(Ni[e].id===t)return{firebaseEndpoint:(t=Ni[e]).cb,secureTokenEndpoint:t.ib};return null}Ci=Mi("__EID__")?"__EID__":void 0;var Pi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Li=["client_id","response_type","scope","redirect_uri","state"],Di={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Li},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Li},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Li},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Pi},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Ri(t){for(var e in Di)if(Di[e].Fa==t)return Di[e];return null}function Oi(t){var e={};e["facebook.com"]=qi,e["google.com"]=$i,e["github.com"]=Vi,e["twitter.com"]=zi;var n=t&&t[Ui];try{if(n)return e[n]?new e[n](t):new ji(t);if(void 0!==t[Bi])return new Fi(t)}catch(t){}return null}var Bi="idToken",Ui="providerId";function Fi(t){var e=t[Ui];if(!e&&t[Bi]){var n=ki(t[Bi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),jr(this,"providerId",e),jr(this,"isNewUser",n)}function ji(t){Fi.call(this,t),jr(this,"profile",$r((t=Ar(t.rawUserInfo||"{}"))||{}))}function qi(t){if(ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vi(t){if(ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function $i(t){if(ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function Hi(t){var e=xn(t),n=Sn(e,"link"),r=Sn(xn(n),"link");return e=Sn(e,"deep_link_id"),Sn(xn(e),"link")||e||r||n||t}function Gi(){}function Wi(t,e){return t.then((function(t){if(t[Ra]){var n=ki(t[Ra]);if(!n||e!=n.f)throw new Xr("user-mismatch");return t}throw new Xr("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==ei+"user-not-found"?new Xr("user-mismatch"):t}))}function Ki(t,e){if(!e)throw new Xr("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function Zi(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Qi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Ki(t.providerId,t.pendingToken)}catch(t){}return null}function Yi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Xr("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function Ji(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Xi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Yi(t.providerId,e,t.signInMethod)}catch(t){}}return null}function to(t,e){this.Fc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(Ri(t)||{}).Ea||null,this.bb=null}function eo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Xr("argument-error",'SAML provider IDs must be prefixed with "saml."');to.call(this,t,[])}function no(t){to.call(this,t,Li),this.a=[]}function ro(){no.call(this,"facebook.com")}function io(t){if(!t)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new ro).credential({accessToken:e})}function oo(){no.call(this,"github.com")}function ao(t){if(!t)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new oo).credential({accessToken:e})}function so(){no.call(this,"google.com"),this.ya("profile")}function uo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new so).credential({idToken:n,accessToken:e})}function co(){to.call(this,"twitter.com",Pi)}function lo(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Xr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Yi("twitter.com",n,"twitter.com")}function ho(t,e,n){this.a=t,this.c=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===po.EMAIL_LINK_SIGN_IN_METHOD?po.EMAIL_LINK_SIGN_IN_METHOD:po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function fo(t){return t&&t.email&&t.password?new ho(t.email,t.password,t.signInMethod):null}function po(){qr(this,{providerId:"password",isOAuthProvider:!1})}function mo(t,e){if(!(e=go(e)))throw new Xr("argument-error","Invalid email link!");return new ho(t,e.code,po.EMAIL_LINK_SIGN_IN_METHOD)}function go(t){return(t=hi(t=Hi(t)))&&t.operation===Hr?t:null}function vo(t){if(!(t.Va&&t.Ua||t.Ha&&t.ba))throw new Xr("internal-error");this.a=t,jr(this,"providerId","phone"),jr(this,"signInMethod","phone")}function yo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return F(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new vo(e)}return null}function bo(t){return t.a.Ha&&t.a.ba?{temporaryProof:t.a.Ha,phoneNumber:t.a.ba}:{sessionInfo:t.a.Va,code:t.a.Ua}}function wo(t){try{this.a=t||e.auth()}catch(t){throw new Xr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function _o(t,e){if(!t)throw new Xr("missing-verification-id");if(!e)throw new Xr("missing-verification-code");return new vo({Va:t,Ua:e})}function Eo(t){if(t.temporaryProof&&t.phoneNumber)return new vo({Ha:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return uo(o,n);case"facebook.com":return io(n);case"github.com":return ao(n);case"twitter.com":return lo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Ki(e,a):new Yi(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new no(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function To(t){if(!t.isOAuthProvider)throw new Xr("invalid-oauth-provider")}function So(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Xr("invalid-auth-event");if(this.g&&this.a)throw new Xr("invalid-auth-event");if(this.g&&!this.f)throw new Xr("invalid-auth-event")}function xo(t){return(t=t||{}).type?new So(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&ti(t.error),t.postBody,t.tenantId):null}function Io(){this.b=null,this.a=[]}I(ji,Fi),I(qi,ji),I(Vi,ji),I($i,ji),I(zi,ji),Ki.prototype.na=function(t){return Xa(t,Zi(this))},Ki.prototype.b=function(t,e){var n=Zi(this);return n.idToken=e,ts(t,n)},Ki.prototype.f=function(t,e){return Wi(es(t,Zi(this)),e)},Ki.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Yi.prototype.na=function(t){return Xa(t,Ji(this))},Yi.prototype.b=function(t,e){var n=Ji(this);return n.idToken=e,ts(t,n)},Yi.prototype.f=function(t,e){return Wi(es(t,Ji(this)),e)},Yi.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},to.prototype.Ga=function(t){return this.zb=Z(t),this},I(eo,to),I(no,to),no.prototype.ya=function(t){return V(this.a,t)||this.a.push(t),this},no.prototype.Hb=function(){return G(this.a)},no.prototype.credential=function(t,e){var n;if(!(n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Xr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Yi(this.providerId,n,this.providerId)},I(ro,no),jr(ro,"PROVIDER_ID","facebook.com"),jr(ro,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(oo,no),jr(oo,"PROVIDER_ID","github.com"),jr(oo,"GITHUB_SIGN_IN_METHOD","github.com"),I(so,no),jr(so,"PROVIDER_ID","google.com"),jr(so,"GOOGLE_SIGN_IN_METHOD","google.com"),I(co,to),jr(co,"PROVIDER_ID","twitter.com"),jr(co,"TWITTER_SIGN_IN_METHOD","twitter.com"),ho.prototype.na=function(t){return this.signInMethod==po.EMAIL_LINK_SIGN_IN_METHOD?Ns(t,cs,{email:this.a,oobCode:this.c}):Ns(t,Is,{email:this.a,password:this.c})},ho.prototype.b=function(t,e){return this.signInMethod==po.EMAIL_LINK_SIGN_IN_METHOD?Ns(t,ls,{idToken:e,email:this.a,oobCode:this.c}):Ns(t,ws,{idToken:e,email:this.a,password:this.c})},ho.prototype.f=function(t,e){return Wi(this.na(t),e)},ho.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},qr(po,{PROVIDER_ID:"password"}),qr(po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),vo.prototype.na=function(t){return t.Wa(bo(this))},vo.prototype.b=function(t,e){var n=bo(this);return n.idToken=e,Ns(t,As,n)},vo.prototype.f=function(t,e){var n=bo(this);return n.operation="REAUTH",Wi(t=Ns(t,Cs,n),e)},vo.prototype.A=function(){var t={providerId:"phone"};return this.a.Va&&(t.verificationId=this.a.Va),this.a.Ua&&(t.verificationCode=this.a.Ua),this.a.Ha&&(t.temporaryProof=this.a.Ha),this.a.ba&&(t.phoneNumber=this.a.ba),t},wo.prototype.Wa=function(t,e){var n=this.a.b;return te(e.verify()).then((function(r){if(!u(r))throw new Xr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Ns(t,ys,e)}(n,{phoneNumber:t,recaptchaToken:r}).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new Xr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},qr(wo,{PROVIDER_ID:"phone"}),qr(wo,{PHONE_SIGN_IN_METHOD:"phone"}),So.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},So.prototype.R=function(){return this.h},So.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var ko,Ao=null;function Co(t){var e="unauthorized-domain",n=void 0,r=xn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Xr.call(this,e,n)}function No(t,e,n){Xr.call(this,t,n),(t=e||{}).Ab&&jr(this,"email",t.Ab),t.ba&&jr(this,"phoneNumber",t.ba),t.credential&&jr(this,"credential",t.credential),t.Qb&&jr(this,"tenantId",t.Qb)}function Mo(t){if(t.code){var e=t.code||"";0==e.indexOf(ei)&&(e=e.substring(ei.length));var n={credential:Eo(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new Xr(e,t.message||void 0);return new No(e,n,t.message)}return null}function Po(){}function Lo(t){return t.c||(t.c=t.b())}function Do(){}function Ro(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Oo(){}function Bo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=T(this.fc,this),this.a.onerror=T(this.Ib,this),this.a.onprogress=T(this.gc,this),this.a.ontimeout=T(this.kc,this)}function Uo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Fo(t,e,n){this.reset(t,e,n,void 0,void 0)}function jo(t){this.f=t,this.b=this.c=this.a=null}function qo(t,e){this.name=t,this.value=e}I(Co,Xr),I(No,Xr),No.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&Y(t,e),t},No.prototype.toJSON=function(){return this.A()},Po.prototype.c=null,I(Do,Po),Do.prototype.a=function(){var t=Ro(this);return t?new ActiveXObject(t):new XMLHttpRequest},Do.prototype.b=function(){var t={};return Ro(this)&&(t[0]=!0,t[1]=!0),t},ko=new Do,I(Oo,Po),Oo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Bo;throw Error("Unsupported browser")},Oo.prototype.b=function(){return{}},(t=Bo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Uo(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Uo(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Uo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Fo.prototype.a=null,Fo.prototype.reset=function(t,e,n,r,i){delete this.a},qo.prototype.toString=function(){return this.name};var Vo=new qo("SEVERE",1e3),$o=new qo("WARNING",900),zo=new qo("CONFIG",700),Ho=new qo("FINE",500);jo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(N("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new Fo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Go={},Wo=null;function Ko(t){var e;if(Wo||(Wo=new jo(""),Go[""]=Wo,Wo.c=zo),!(e=Go[t])){e=new jo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Ko(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Go[t]=e}return e}function Zo(t,e){t&&t.log(Ho,e,void 0)}function Qo(t){this.f=t}function Yo(t){sn.call(this),this.o=t,this.readyState=Jo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Ko("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}I(Qo,Po),Qo.prototype.a=function(){return new Yo(this.f)},Qo.prototype.b=function(t){return function(){return t}}({}),I(Yo,sn);var Jo=0;function Xo(t){t.c.read().then(t.ec.bind(t)).catch(t.Oa.bind(t))}function ta(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ea(t)}function ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function na(t){sn.call(this),this.headers=new mn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=ra,this.v=this.P=!1}(t=Yo.prototype).open=function(t,e){if(this.readyState!=Jo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ea(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ta(this,!1)),this.readyState=Jo},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ea(this)),this.a&&(this.readyState=3,ea(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Xo(this)):t.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ta(this,!0):ea(this),3==this.readyState&&Xo(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,ta(this,!0))},t.hc=function(t){this.a&&(this.response=t,ta(this,!0))},t.Oa=function(t){var e=this.h;e&&e.log($o,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ta(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log($o,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log($o,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},I(na,sn);var ra="";na.prototype.b=Ko("goog.net.XhrIo");var ia=/^https?$/i,oa=["POST","PUT"];function aa(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.O=n,t.I=!1,t.c=!0,t.a=t.B?t.B.a():ko.a(),t.w=t.B?Lo(t.B):Lo(ko),t.a.onreadystatechange=T(t.Lb,t);try{Zo(t.b,ma(t,"Opening Xhr")),t.J=!0,t.a.open(n,String(e),!0),t.J=!1}catch(e){return Zo(t.b,ma(t,"Error opening Xhr: "+e.message)),void ua(t,e)}e=r||"";var o=new mn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(g(t)||u(t))F(t,e,void 0);else for(var n=pn(t),r=dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=sa,n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:u(t)?t.charAt(e):t[e]}(o.X()),r=s.FormData&&e instanceof s.FormData,!V(oa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{fa(t),0<t.g&&(t.v=function(t){return we&&Me(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Zo(t.b,ma(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=T(t.Ia,t)):t.o=hn(t.Ia,t.g,t)),Zo(t.b,ma(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Zo(t.b,ma(t,"Send error: "+e.message)),ua(t,e)}}function sa(t){return"content-type"==t.toLowerCase()}function ua(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ca(t),ha(t)}function ca(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function la(t){if(t.c&&void 0!==a)if(t.w[1]&&4==da(t)&&2==pa(t))Zo(t.b,ma(t,"Local request error detected and ignored"));else if(t.i&&4==da(t))hn(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==da(t)){Zo(t.b,ma(t,"Request complete")),t.c=!1;try{var e,n=pa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(yn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ia.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<da(t)?t.a.statusText:""}catch(e){Zo(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+pa(t)+"]",ca(t)}}finally{ha(t)}}}function ha(t,e){if(t.a){fa(t);var n=t.a,r=t.w[0]?f:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Vo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function fa(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(s.clearTimeout(t.o),t.o=null)}function da(t){return t.a?t.a.readyState:0}function pa(t){try{return 2<da(t)?t.a.status:-1}catch(t){return-1}}function ma(t,e){return e+" ["+t.O+" "+t.l+" "+pa(t)+"]"}function ga(t){var e=ka;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function va(t,e,n){t.a=!0,t.c=n,t.f=!e,_a(t)}function ya(t){if(t.a){if(!t.u)throw new Ea(t);t.u=!1}}function ba(t,e,n,r){t.g.push([e,n,r]),t.a&&_a(t)}function wa(t){return q(t.g,(function(t){return v(t[1])}))}function _a(t){if(t.h&&t.a&&wa(t)){var e=t.h,n=xa[e];n&&(s.clearTimeout(n.a),delete xa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(k(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,wa(t)||(n=!0)}}t.c=e,r&&(u=T(t.m,t,!0),r=T(t.m,t,!1),e instanceof ga?(ba(e,u,r),e.w=!0):e.then(u,r)),n&&(e=new Sa(e),xa[e.a]=e,t.h=e.a)}function Ea(){A.call(this)}function Ta(){A.call(this)}function Sa(t){this.a=s.setTimeout(T(this.c,this),0),this.b=t}(t=na.prototype).Ia=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Zo(this.b,ma(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Zo(this.b,ma(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ha(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ha(this,!0)),na.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?la(this):this.yc())},t.yc=function(){la(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ra:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Vo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Zo(this.b,"Can not get response: "+t.message),null}},ga.prototype.cancel=function(t){if(this.a)this.c instanceof ga&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new Ta(this),ya(this),va(this,!1,t))}},ga.prototype.m=function(t,e){this.i=!1,va(this,t,e)},ga.prototype.then=function(t,e,n){var r,i,o=new Wt((function(t,e){r=t,i=e}));return ba(this,r,(function(t){t instanceof Ta?o.cancel():i(t)})),o.then(t,e,n)},ga.prototype.$goog_Thenable=!0,I(Ea,A),Ea.prototype.message="Deferred has already fired",Ea.prototype.name="AlreadyCalledError",I(Ta,A),Ta.prototype.message="Deferred was canceled",Ta.prototype.name="CanceledError",Sa.prototype.c=function(){throw delete xa[this.a],this.b};var xa={};function Ia(t){var e,n=document,r=it(t).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},a=new ga(o);return e=window.setTimeout((function(){Aa(i,!0);var t=new Ma(Na,"Timeout reached for loading script "+r);ya(a),va(a,!1,t)}),5e3),o.Ia=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Aa(i,!1,e),ya(a),va(a,!0,null))},i.onerror=function(){Aa(i,!0,e);var t=new Ma(Ca,"Error while loading script "+r);ya(a),va(a,!1,t)},Y(o={},{type:"text/javascript",charset:"UTF-8"}),Hn(i,o),function(t,e){B(t,"HTMLScriptElement"),t.src=it(e),null===h&&(h=(e=(e=s.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function ka(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&Aa(t,!0,this.Ia)}}function Aa(t,e,n){null!=n&&s.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ca=0,Na=1;function Ma(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),A.call(this,n),this.code=t}function Pa(t){this.f=t}function La(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||Oa,this.g=Z(t.secureTokenHeaders||Ba),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||Ua,this.a=Z(t.firebaseHeaders||Fa),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==fr(),!(r=s.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!hr())throw new Xr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new Qo(self):dr()?this.f=new Pa(r):this.f=new Oo,this.b=null}I(Ma,A),I(Pa,Po),Pa.prototype.a=function(){return new this.f},Pa.prototype.b=function(){return{}};var Da,Ra="idToken",Oa=new Pr(3e4,6e4),Ba={"Content-Type":"application/x-www-form-urlencoded"},Ua=new Pr(3e4,6e4),Fa={"Content-Type":"application/json"};function ja(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function qa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Va(t,e,n,r,i,o,a){(function(){var t=br();return!((t=gr(t)!=mr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!we||!Ce||9<Ce)})()||hr()?t=T(t.o,t):(Da||(Da=new Wt((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[za]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ba(t,null,e,void 0)}(Ia(ot($a,{onload:za})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=T(t.m,t)),t(e,n,r,i,o,a)}La.prototype.R=function(){return this.b},La.prototype.o=function(t,e,n,r,i,o){if(hr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new Xr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new na(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}un(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Zo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),cn(a,"ready",(function(){u&&clearTimeout(u),me(this)})),cn(a,"timeout",(function(){u&&clearTimeout(u),me(this),e&&e(null)})),aa(a,t,n,r,i)};var $a=new J(et,"https://apis.google.com/js/client.js?onload=%{onload}"),za="__fcb"+Math.floor(1e6*Math.random()).toString();function Ha(t){if(!u(t=t.email)||!sr.test(t))throw new Xr("invalid-email")}function Ga(t){"email"in t&&Ha(t)}function Wa(t){if(!t[Ra])throw new Xr("internal-error")}function Ka(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Xr("internal-error")}else{if(!t.sessionInfo)throw new Xr("missing-verification-id");if(!t.code)throw new Xr("missing-verification-code")}}La.prototype.m=function(t,e,n,r,i){var o=this;Da.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},La.prototype.ob=function(){return Ns(this,_s,{})},La.prototype.rb=function(t,e){return Ns(this,bs,{idToken:t,email:e})},La.prototype.sb=function(t,e){return Ns(this,ws,{idToken:t,password:e})};var Za={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Qa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Xr("internal-error")}function Ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Fn(t=new Rn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ja(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Mo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Mo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Mo(t)):t.errorMessage&&(e=Ms(t.errorMessage)),e)throw e;if(!t[Ra])throw new Xr("internal-error")}function Xa(t,e){return e.returnIdpCredential=!0,Ns(t,Es,e)}function ts(t,e){return e.returnIdpCredential=!0,Ns(t,Ss,e)}function es(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ns(t,Ts,e)}function ns(t){if(!t.oobCode)throw new Xr("invalid-action-code")}(t=La.prototype).tb=function(t,e){var n={idToken:t},r=[];return W(Za,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ns(this,bs,n)},t.kb=function(t,e){return Y(t={requestType:"PASSWORD_RESET",email:t},e),Ns(this,ps,t)},t.lb=function(t,e){return Y(t={requestType:"EMAIL_SIGNIN",email:t},e),Ns(this,fs,t)},t.jb=function(t,e){return Y(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ns(this,ds,t)},t.Wa=function(t){return Ns(this,ks,t)},t.ab=function(t,e){return Ns(this,vs,{oobCode:t,newPassword:e})},t.Ma=function(t){return Ns(this,is,{oobCode:t})},t.Ya=function(t){return Ns(this,rs,{oobCode:t})};var rs={endpoint:"setAccountInfo",D:ns,fa:"email",F:!0},is={endpoint:"resetPassword",D:ns,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Xr("internal-error")},F:!0},os={endpoint:"signupNewUser",D:function(t){if(Ha(t),!t.password)throw new Xr("weak-password")},K:Wa,T:!0,F:!0},as={endpoint:"createAuthUri",F:!0},ss={endpoint:"deleteAccount",V:["idToken"]},us={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!m(t.deleteProvider))throw new Xr("internal-error")}},cs={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Ha,K:Wa,T:!0,F:!0},ls={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Ha,K:Wa,T:!0},hs={endpoint:"getAccountInfo"},fs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Xr("internal-error");Ha(t)},fa:"email",F:!0},ds={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Xr("internal-error")},fa:"email",F:!0},ps={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Xr("internal-error");Ha(t)},fa:"email",F:!0},ms={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},gs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new Xr("internal-error")}},vs={endpoint:"resetPassword",D:ns,fa:"email",F:!0},ys={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},bs={endpoint:"setAccountInfo",V:["idToken"],D:Ga,T:!0},ws={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(Ga(t),!t.password)throw new Xr("weak-password")},K:Wa,T:!0},_s={endpoint:"signupNewUser",K:Wa,T:!0,F:!0},Es={endpoint:"verifyAssertion",D:Qa,Ra:Ya,K:Ja,T:!0,F:!0},Ts={endpoint:"verifyAssertion",D:Qa,Ra:Ya,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Xr("user-not-found");if(t.errorMessage)throw Ms(t.errorMessage);if(!t[Ra])throw new Xr("internal-error")},T:!0,F:!0},Ss={endpoint:"verifyAssertion",D:function(t){if(Qa(t),!t.idToken)throw new Xr("internal-error")},Ra:Ya,K:Ja,T:!0},xs={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Xr("invalid-custom-token")},K:Wa,T:!0,F:!0},Is={endpoint:"verifyPassword",D:function(t){if(Ha(t),!t.password)throw new Xr("wrong-password")},K:Wa,T:!0,F:!0},ks={endpoint:"verifyPhoneNumber",D:Ka,K:Wa,F:!0},As={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Xr("internal-error");Ka(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Mo(t);Wa(t)}},Cs={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ka,K:Wa,F:!0};function Ns(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.V))return ee(new Xr("internal-error"));var r,i=e.Kb||"POST";return te(n).then(e.D).then((function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o){var a=xn(t.h+e);Tn(a,"key",t.c),o&&Tn(a,"cb",x().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Tn(a,u,r[u]);return new Wt((function(e,o){Va(t,a.toString(),(function(t){t?t.error?o(Ps(t,i||{})):e(t):o(new Xr("network-request-failed"))}),n,s?void 0:Zn(kr(r)),t.a,t.i.get())}))}(t,e.endpoint,i,n,e.Yb,e.wb||!1)})).then((function(t){return r=t,e.Ra?e.Ra(n,r):r})).then(e.K).then((function(){if(!e.fa)return r;if(!(e.fa in r))throw new Xr("internal-error");return r[e.fa]}))}function Ms(t){return Ps({error:{errors:[{message:t}],code:400,message:t}})}function Ps(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Xr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Xr(r[i],e);return!e&&t&&(e=Ir(t)),new Xr("internal-error",e)}function Ls(t){this.b=t,this.a=null,this.gb=function(t){return(Bs||(Bs=new Wt((function(t,e){function n(){Mr(),wr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Mr(),e(Error("Network Error"))},timeout:Rs.get()})}if(wr("gapi.iframes.Iframe"))t();else if(wr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){wr("gapi.load")?n():e(Error("Network Error"))},te(Ia(r=ot(Ds,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw Bs=null,t})))).then((function(){return new Wt((function(e,n){wr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Os.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Ds=new J(et,"https://apis.google.com/js/api.js?onload=%{onload}"),Rs=new Pr(3e4,6e4),Os=new Pr(5e3,15e3),Bs=null;function Us(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=In(this.i,"/__/auth/iframe"),Tn(this.a,"apiKey",this.g),Tn(this.a,"appName",this.h),this.b=null,this.c=[]}function Fs(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function js(t){try{return e.app(t).auth().Ca()}catch(t){return[]}}function qs(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Vs(t){var e=er();return function(t){return Ns(t,ms,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=xn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=xn(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:ar.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Co(er())}))}function $s(t){return t.l?t.l:(t.l=ur().then((function(){if(!t.o){var e=t.c,n=t.h,r=js(t.b),i=new Us(t.u,t.f,t.b);i.f=e,i.b=n,i.c=G(r||[]),t.o=i.toString()}t.i=new Ls(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.gb.then((function(){t.a.register("authEvent",e,wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=xo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",te(n)}return n.status="ERROR",te(n)}))}(t)})),t.l)}function zs(t){return t.m||(t.v=t.c?yr(t.c,js(t.b)):null,t.m=new La(t.f,Mi(t.h),t.v)),t.m}function Hs(t,e,n,r,i,o,a,s,u,c,l){return(t=new Fs(t,e,n,r,i)).l=o,t.g=a,t.i=s,t.b=Z(u||null),t.f=c,t.nb(l).toString()}function Gs(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Xr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ws(t){this.b=t,this.a={},this.f=T(this.c,this)}Us.prototype.toString=function(){return this.f?Tn(this.a,"v",this.f):Un(this.a.a,"v"),this.b?Tn(this.a,"eid",this.b):Un(this.a.a,"eid"),this.c.length?Tn(this.a,"fw",this.c.join(",")):Un(this.a.a,"fw"),this.a.toString()},Fs.prototype.nb=function(t){return this.h=t,this},Fs.prototype.toString=function(){var t=In(this.o,"/__/auth/handler");if(Tn(t,"apiKey",this.m),Tn(t,"appName",this.c),Tn(t,"authType",this.u),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().ha()}catch(t){r=null}for(var i in n.bb=r,Tn(t,"providerId",this.a.providerId),r=kr((n=this.a).zb))r[i]=r[i].toString();i=n.Fc,r=Z(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.eb&&n.bb&&!r[n.eb]&&(r[n.eb]=n.bb),K(r)||Tn(t,"customParameters",Ir(r))}if("function"==typeof this.a.Hb&&((n=this.a.Hb()).length&&Tn(t,"scopes",n.join(","))),this.l?Tn(t,"redirectUrl",this.l):Un(t.a,"redirectUrl"),this.g?Tn(t,"eventId",this.g):Un(t.a,"eventId"),this.i?Tn(t,"v",this.i):Un(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Sn(t,s)&&Tn(t,s,this.b[s]);return this.h?Tn(t,"tid",this.h):Un(t.a,"tid"),this.f?Tn(t,"eid",this.f):Un(t.a,"eid"),(s=js(this.c)).length&&Tn(t,"fw",s.join(",")),t.toString()},(t=qs.prototype).Fb=function(t,e,n){var r=new Xr("popup-closed-by-user"),i=new Xr("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){(function(t){var e={type:"webStorageSupport"};return $s(t).then((function(){return function(t,e){return t.gb.then((function(){return new Wt((function(n){t.a.send(e.type,e,n,wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&ir(t),e(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(t){return new Wt((function(e){return function n(){fn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return fn(n).then((function(){e(r)}))}))},t.Ob=function(){var t=br();return!xr(t)&&!Nr(t)},t.Jb=function(){return!1},t.Db=function(t,e,n,r,i,o,a,s){if(!t)return ee(new Xr("popup-blocked"));if(a&&!xr())return this.ia().s((function(e){ir(t),i(e)})),r(),te();this.a||(this.a=Vs(zs(this)));var u=this;return this.a.then((function(){var e=u.ia().s((function(e){throw ir(t),i(e),e}));return r(),e})).then((function(){(To(n),a)||nr(Hs(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Eb=function(t,e,n,r){this.a||(this.a=Vs(zs(this)));var i=this;return this.a.then((function(){To(e),nr(Hs(i.u,i.f,i.b,t,e,er(),n,i.c,void 0,i.h,r))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ia=function(){var t=this;return $s(this).then((function(){return t.i.gb})).s((function(){throw t.a=null,new Xr("network-request-failed")}))},t.Rb=function(){return!0},t.Aa=function(t){this.g.push(t)},t.Na=function(t){z(this.g,(function(e){return e==t}))},(t=Gs.prototype).get=function(t){return te(this.a.getItem(t)).then((function(t){return t&&Ar(t)}))},t.set=function(t,e){return te(this.a.setItem(t,Ir(e)))},t.S=function(t){return te(this.a.removeItem(t))},t.$=function(){},t.ea=function(){};var Ks,Zs=[];function Qs(t,e,n){K(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ys(t){this.a=t}function Js(t){this.c=t,this.b=!1,this.a=[]}function Xs(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return ee(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Wt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return tu(t,c),e})).s((function(e){throw tu(t,c),e}))}function tu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(t.a,(function(t){return t==e}))}}function eu(){if(!iu())throw new Xr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;hr()&&self?(this.l=function(){var t=hr()?self:null;if(F(Zs,(function(n){n.b==t&&(e=n)})),!e){var e=new Ws(t);Zs.push(e)}return e}(),Qs(this.l,"keyChanged",(function(e,n){return cu(t).then((function(e){return 0<e.length&&F(t.a,(function(t){t(e)})),{keyProcessed:V(e,n.key)}}))})),Qs(this.l,"ping",(function(){return te(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?te().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):te(null)}().then((function(e){(t.h=e)&&(t.g=new Js(new Ys(e)),Xs(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&V(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function nu(t){return new Wt((function(e,n){var r=t.u.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Wt((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return nu(t)})).then((function(t){e(t)})).s((function(t){n(t)}))}}))}function ru(t){return t.m||(t.m=nu(t)),t.m}function iu(){try{return!!s.indexedDB}catch(t){return!1}}function ou(t){return t.objectStore("firebaseLocalStorage")}function au(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function su(t){return new Wt((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function uu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Xs(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):te()}function cu(t){return ru(t).then((function(t){var e=ou(au(t,!1));return e.getAll?su(e.getAll()):new Wt((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function lu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function hu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=te().then((function(){if(iu()){var t=Cr(),r="__sak"+t;return Ks||(Ks=new eu),(n=Ks).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.$((function(t){F(e.a,(function(e){e(t)}))})),t}))}function fu(){this.a={},this.type="inMemory"}function du(){if(!function(){var t="Node"==fr();if(!(t=pu()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new Xr("internal-error","The LocalStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=pu()||e.INTERNAL.node.localStorage,this.type="localStorage"}function pu(){try{var t=s.localStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function mu(){this.type="nullStorage"}function gu(){if(!function(){var t="Node"==fr();if(!(t=vu()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new Xr("internal-error","The SessionStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=vu()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function vu(){try{var t=s.sessionStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function yu(){var t={};t.Browser=_u,t.Node=Eu,t.ReactNative=Tu,t.Worker=Su,this.a=t[fr()]}Ws.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];F(r,(function(e){i.push(te().then((function(){return e(t.origin,t.data.data)})))})),re(i).then((function(r){var i=[];F(r,(function(t){i.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})})),F(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Ys.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Js.prototype.close=function(){for(;0<this.a.length;)tu(this,this.a[0]);this.b=!0},(t=eu.prototype).set=function(t,e){var n,r=!1,i=this;return ru(this).then((function(e){return su((e=ou(au(n=e,!0))).get(t))})).then((function(o){var a=ou(au(n,!0));return o?(o.value=e,su(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,su(a.add(o)))})).then((function(){return i.c[t]=e,uu(i,t)})).ka((function(){r&&i.b--}))},t.get=function(t){return ru(this).then((function(e){return su(ou(au(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.S=function(t){var e=!1,n=this;return ru(this).then((function(r){return e=!0,n.b++,su(ou(au(r,!0)).delete(t))})).then((function(){return delete n.c[t],uu(n,t)})).ka((function(){e&&n.b--}))},t.$=function(t){0==this.a.length&&function(t){lu(t),function e(){t.f=setTimeout((function(){t.i=cu(t).then((function(e){0<e.length&&F(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ea=function(t){z(this.a,(function(e){return e==t})),0==this.a.length&&lu(this)},(t=hu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.S=function(t){return this.b.then((function(e){return e.S(t)}))},t.$=function(t){this.a.push(t)},t.ea=function(t){z(this.a,(function(e){return e==t}))},(t=fu.prototype).get=function(t){return te(this.a[t])},t.set=function(t,e){return this.a[t]=e,te()},t.S=function(t){return delete this.a[t],te()},t.$=function(){},t.ea=function(){},(t=du.prototype).get=function(t){var e=this;return te().then((function(){return Ar(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return te().then((function(){var r=Ir(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return te().then((function(){e.a.removeItem(t)}))},t.$=function(t){s.window&&Ke(s.window,"storage",t)},t.ea=function(t){s.window&&Ye(s.window,"storage",t)},(t=mu.prototype).get=function(){return te(null)},t.set=function(){return te()},t.S=function(){return te()},t.$=function(){},t.ea=function(){},(t=gu.prototype).get=function(t){var e=this;return te().then((function(){return Ar(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return te().then((function(){var r=Ir(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return te().then((function(){e.a.removeItem(t)}))},t.$=function(){},t.ea=function(){};var bu,wu,_u={C:du,Ta:gu},Eu={C:du,Ta:gu},Tu={C:Gs,Ta:mu},Su={C:du,Ta:mu},xu={ad:"local",NONE:"none",cd:"session"};function Iu(){var t=!(Nr(br())||!lr()),e=xr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},bu||(bu=new yu),t=bu;try{this.g=!tr()&&Rr()||!s.indexedDB?new t.a.C:new hu(hr()?new fu:new t.a.C)}catch(t){this.g=new fu,this.h=!0}try{this.i=new t.a.Ta}catch(t){this.i=new fu}this.u=new fu,this.f=T(this.Pb,this),this.b={}}function ku(){return wu||(wu=new Iu),wu}function Au(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Cu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Nu(t,e,n){return n=Cu(e,n),"local"==e.C&&(t.b[n]=null),Au(t,e.C).S(n)}function Mu(t){t.c&&(clearInterval(t.c),t.c=null)}function Pu(t){this.a=t,this.b=ku()}(t=Iu.prototype).get=function(t,e){return Au(this,t.C).get(Cu(t,e))},t.set=function(t,e,n){var r=Cu(t,n),i=this,o=Au(this,t.C);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.C&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=Cu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),K(this.a)&&(Au(this,"local").$(this.f),this.h||(tr()||!Rr())&&s.indexedDB||!this.l||function(t){Mu(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Be({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Cu(t,e),this.a[t]&&(z(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),K(this.a)&&(Au(this,"local").ea(this.f),Mu(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Au(this,"local").ea(this.f):Mu(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.$a(e))},we&&Ce&&10==Ce&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else F(t,T(this.$a,this))},t.$a=function(t){this.a[t]&&F(this.a[t],(function(t){t()}))};var Lu,Du={name:"authEvent",C:"local"};function Ru(){this.a=ku()}function Ou(t,e){this.b=Bu,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0!==Lu||(Lu=s.Int32Array?new Int32Array(zu):zu),this.reset()}I(Ou,(function(){this.b=-1}));for(var Bu=64,Uu=Bu-1,Fu=[],ju=0;ju<Uu;ju++)Fu[ju]=0;var qu=H(128,Fu);function Vu(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Lu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function $u(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(u(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Vu(t),i=0);else{if(!g(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Vu(t),i=0)}}t.c=i,t.g+=n}Ou.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):G(this.h)};var zu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Hu(){Ou.call(this,8,Gu)}I(Hu,Ou);var Gu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Wu(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new Ru,this.g=new Pu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ku(t){return new Xr("invalid-cordova-configuration",t)}function Zu(t){var e=new Hu;$u(e,t),t=[];var n=8*e.g;56>e.c?$u(e,qu,56-e.c):$u(e,qu,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Vu(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return j(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Qu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Yu(t){return t.f||(t.f=t.ia().then((function(){return new Wt((function(e){t.Aa((function n(r){return e(r),t.Na(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ju(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Hi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ar(Sn(o=xn(i),"firebaseError")||null))?ti(o):null)?new So(r.c,r.b,null,null,o,null,r.R()):new So(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Qu(t,i)}))}var n=new So("unknown",null,null,null,new Xr("no-auth-event")),r=!1,i=fn(500).then((function(){return Ju(t).then((function(){r||Qu(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(wr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ao||(Ao=new Io),function(t){var e=Ao;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=wr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ju(t){var e=null;return function(t){return t.b.get(Du,t.a).then((function(t){return xo(t)}))}(t.g).then((function(n){return e=n,Nu((n=t.g).b,Du,n.a)})).then((function(){return e}))}function Xu(t){this.a=t,this.b=ku()}(t=Wu.prototype).ia=function(){return this.Da?this.Da:this.Da=(cr(void 0)?ur().then((function(){return new Wt((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ee(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof wr("universalLinks.subscribe",s))throw Ku("cordova-universal-links-plugin-fix is not installed");if(void 0===wr("BuildInfo.packageName",s))throw Ku("cordova-plugin-buildinfo is not installed");if("function"!=typeof wr("cordova.plugins.browsertab.openUrl",s))throw Ku("cordova-plugin-browsertab is not installed");if("function"!=typeof wr("cordova.InAppBrowser.open",s))throw Ku("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Xr("cordova-not-ready")}))},t.Fb=function(t,e){return e(new Xr("operation-not-supported-in-this-environment")),te()},t.Db=function(){return ee(new Xr("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(t,e,n,r){if(this.c)return ee(new Xr("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=te().then((function(){return To(e),Yu(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new So(e,r,null,o,new Xr("no-auth-event"),null,i),u=wr("BuildInfo.packageName",s);if("string"!=typeof u)throw new Xr("invalid-cordova-configuration");var c=wr("BuildInfo.displayName",s),l={};if(br().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!br().toLowerCase().match(/android/))return ee(new Xr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Zu(o),l.sessionId=o;var h=Hs(t.u,t.i,t.l,e,n,null,r,t.m,l,t.o,i);return t.ia().then((function(){var e=t.h;return t.v.a.set(Du,a.A(),e)})).then((function(){var e=wr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new Xr("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=wr("cordova.plugins.browsertab.openUrl",s)))throw new Xr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=wr("cordova.InAppBrowser.open",s)))throw new Xr("invalid-cordova-configuration");e=br(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Wt((function(t,e){u=function(){var e=wr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),c=function(){a||(a=fn(2e3).then((function(){e(new Xr("redirect-cancelled-by-user"))})))},l=function(){Lr()&&c()},o.addEventListener("resume",c,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(t){return Ju(i).then((function(){throw t}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Na(u),i.c=null}))},t.Aa=function(t){this.b.push(t),Yu(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new So("unknown",null,null,null,new Xr("no-auth-event")),t(e))}))},t.Na=function(t){z(this.b,(function(e){return e==t}))};var tc={name:"pendingRedirect",C:"session"};function ec(t){return Nu(t.b,tc,t.a)}function nc(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=T(this.o,this),this.b=new gc,this.w=new _c,this.g=new Xu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=rc(this.B,this.u,this.m,Ci)}function rc(t,n,r,i){var o=e.SDK_VERSION||null;return cr()?new Wu(t,n,r,o,i):new qs(t,n,r,o,i)}function ic(t){t.f||(t.f=!0,t.a.Aa(t.l));var e=t.a;return t.a.ia().s((function(n){throw t.a==e&&t.reset(),n}))}function oc(t){t.a.Ob()&&ic(t).s((function(e){var n=new So("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));hc(e)&&t.o(n)})),t.a.Jb()||vc(t.b)}function ac(t,e){V(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(tc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?ec(t.g).then((function(){ic(t).s((function(e){var n=new So("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));hc(e)&&t.o(n)}))})):oc(t)})).s((function(){oc(t)}))}function sc(t,e){z(t.h,(function(t){return t==e}))}nc.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=rc(this.B,this.u,this.m),this.i={}},nc.prototype.o=function(t){if(!t)throw new Xr("invalid-auth-event");if(6e5<=x()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=x())),e=!0;break}}return vc(this.b),e};var uc=new Pr(2e3,1e4),cc=new Pr(3e4,6e4);function lc(t,e,n,r,i,o,a){return t.a.Db(e,n,r,(function(){t.f||(t.f=!0,t.a.Aa(t.l))}),(function(){t.reset()}),i,o,a)}function hc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function fc(t,e,n,r,i){var o;return function(t){return t.b.set(tc,"pending",t.a)}(t.g).then((function(){return t.a.Eb(e,n,r,i).s((function(e){if(hc(e))throw new Xr("operation-not-supported-in-this-environment");return o=e,ec(t.g).then((function(){throw o}))})).then((function(){return t.a.Rb()?new Wt((function(){})):ec(t.g).then((function(){return t.oa()})).then((function(){})).s((function(){}))}))}))}function dc(t,e,n,r,i){return t.a.Fb(r,(function(t){e.ja(n,null,t,i)}),uc.get())}nc.prototype.oa=function(){return this.b.oa()};var pc={};function mc(t,e,n){var r=e+":"+n;return pc[r]||(pc[r]=new nc(t,e,n)),pc[r]}function gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function vc(t){t.g||(t.g=!0,wc(t,!1,null,null))}function yc(t){t.g&&!t.i&&wc(t,!1,null,null)}function bc(t,e){if(t.b=function(){return te(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function wc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ee(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):bc(t,n):bc(t,{user:null}),t.f=[],t.c=[]}function _c(){}function Ec(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function Tc(t,e){this.a=e,jr(this,"verificationId",t)}function Sc(t,e,n,r){return new wo(t).Wa(e,n).then((function(t){return new Tc(t,r)}))}function xc(t){var e=Ai(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Xr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Ic(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function kc(t){this.f=t,this.b=this.a=null,this.c=0}function Ac(t,e){var n=e[Ra],r=e.refreshToken;e=Cc(e.expiresIn),t.b=n,t.c=e,t.a=r}function Cc(t){return x()+1e3*parseInt(t,10)}function Nc(t,e){return function(t,e){return new Wt((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Va(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Ps(t)):t.access_token&&t.refresh_token?n(t):r(new Xr("internal-error")):r(new Xr("network-request-failed"))}),"POST",Bn(e).toString(),t.g,t.u.get()):r(new Xr("internal-error"))}))}(t.f,e).then((function(e){return t.b=e.access_token,t.c=Cc(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Mc(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function Pc(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Lc(t,e){for(var n in Oe.call(this,t),e)this[n]=e[n]}function Dc(t,n,r){this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=e.SDK_VERSION?yr(e.SDK_VERSION):null,this.a=new La(this.l,Mi(Ci),t),this.b=new kc(this.a),qc(this,n[Ra]),Ac(this.b,n),jr(this,"refreshToken",this.b.a),zc(this,r||{}),sn.call(this),this.J=!1,this.o&&Er()&&(this.i=mc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new Ic((function(){return t.G(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-x()-3e5;return 0<e?e:0}))}(this),this.W=T(this.Ja,this);var i=this;this.ga=null,this.xa=function(t){i.ua(t.g)},this.Z=null,this.P=[],this.wa=function(t){Oc(i,t.c)},this.Y=null}function Rc(t,e){t.Z&&Ye(t.Z,"languageCodeChanged",t.xa),(t.Z=e)&&Ke(e,"languageCodeChanged",t.xa)}function Oc(t,n){t.P=n,qa(t.a,e.SDK_VERSION?yr(e.SDK_VERSION,t.P):null)}function Bc(t,e){t.Y&&Ye(t.Y,"frameworkChanged",t.wa),(t.Y=e)&&Ke(e,"frameworkChanged",t.wa)}function Uc(t){try{return e.app(t.m).auth()}catch(e){throw new Xr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Fc(t){t.B||t.w.b||(t.w.start(),Ye(t,"tokenChanged",t.W),Ke(t,"tokenChanged",t.W))}function jc(t){Ye(t,"tokenChanged",t.W),t.w.stop()}function qc(t,e){t.ma=e,jr(t,"_lat",e)}function Vc(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return re(e).then((function(){return t}))}function $c(t){t.i&&!t.J&&(t.J=!0,ac(t.i,t))}function zc(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Mc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Hc(){}function Gc(t){return te().then((function(){if(t.B)throw new Xr("app-deleted")}))}function Wc(t){return j(t.providerData,(function(t){return t.providerId}))}function Kc(t,e){e&&(Zc(t,e.providerId),t.providerData.push(e))}function Zc(t,e){z(t.providerData,(function(t){return t.providerId==e}))}function Qc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function Yc(t,e){t!=e&&(qr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?jr(t,"metadata",function(t){return new Mc(t.a,t.b)}(e.metadata)):jr(t,"metadata",new Mc),F(e.providerData,(function(e){Kc(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),jr(t,"refreshToken",t.b.a))}function Jc(t){return t.G().then((function(e){var n=t.isAnonymous;return function(t,e){return Ns(t.a,hs,{idToken:e}).then(T(t.zc,t))}(t,e).then((function(){return n||Qc(t,"isAnonymous",!1),e}))}))}function Xc(t,e){e[Ra]&&t.ma!=e[Ra]&&(Ac(t.b,e),t.dispatchEvent(new Lc("tokenChanged")),qc(t,e[Ra]),Qc(t,"refreshToken",t.b.a))}function tl(t,e){return Jc(t).then((function(){if(V(Wc(t),e))return Vc(t).then((function(){throw new Xr("provider-already-linked")}))}))}function el(t,e,n){return Vr({user:t,credential:Eo(e),additionalUserInfo:e=Oi(e),operationType:n})}function nl(t,e){return Xc(t,e),t.reload().then((function(){return t}))}function rl(t,n,r,i,o){if(!Er())return ee(new Xr("operation-not-supported-in-this-environment"));if(t.h&&!o)return ee(t.h);var a=Ri(r.providerId),s=Cr(t.uid+":::"),u=null;(!xr()||lr())&&t.o&&r.isOAuthProvider&&(u=Hs(t.o,t.l,t.m,n,r,null,s,e.SDK_VERSION||null,null,null,t.tenantId));var c=or(u,a&&a.sa,a&&a.ra);return i=i().then((function(){if(ol(t),!o)return t.G().then((function(){}))})).then((function(){return lc(t.i,c,n,r,s,!!u,t.tenantId)})).then((function(){return new Wt((function(e,r){t.ja(n,null,new Xr("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=s,t.c=dc(t.i,t,n,c,s)}))})).then((function(t){return c&&ir(c),t?Vr(t):null})).s((function(t){throw c&&ir(c),t})),al(t,i,o)}function il(t,e,n,r,i){if(!Er())return ee(new Xr("operation-not-supported-in-this-environment"));if(t.h&&!i)return ee(t.h);var o=null,a=Cr(t.uid+":::");return r=r().then((function(){if(ol(t),!i)return t.G().then((function(){}))})).then((function(){return t.ca=a,Vc(t)})).then((function(e){return t.da&&(e=(e=t.da).b.set(cl,t.A(),e.a)),e})).then((function(){return fc(t.i,e,n,a,t.tenantId)})).s((function(e){if(o=e,t.da)return ll(t.da);throw o})).then((function(){if(o)throw o})),al(t,r,i)}function ol(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new Xr("internal-error");throw new Xr("auth-domain-config-required")}}function al(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),ee(t.h)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Lc("userInvalidated")),t.h=e),e}))}(t,e,n);return t.I.push(r),r.ka((function(){$(t.I,r)})),r}function sl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Ra]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-x())/1e3;var r=new Dc(e,n,t);return t.providerData&&F(t.providerData,(function(t){t&&Kc(r,Vr(t))})),t.redirectEventId&&(r.ca=t.redirectEventId),r}function ul(t){this.a=t,this.b=ku()}gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(wc(this,!0,null,t.a),te()):e.Ba(n,r)?function(t,e,n){n=n.Ba(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.R(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){wc(t,s,e,null)})).s((function(e){wc(t,s,null,e)}))}(this,t,e):ee(new Xr("invalid-auth-event")):(wc(this,!1,null,null),te())}else ee(new Xr("invalid-auth-event"))},gc.prototype.oa=function(){var t=this;return new Wt((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Xr("timeout");t.a&&t.a.cancel(),t.a=fn(cc.get()).then((function(){t.b||(t.g=!0,wc(t,!0,null,e))}))}(t))}))},_c.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),te()):e.Ba(n,r)?function(t,e){var n=t.b,r=t.c;e.Ba(r,n)(t.g,t.f,t.R(),t.i).then((function(t){e.ja(r,t,null,n)})).s((function(t){e.ja(r,null,t,n)}))}(t,e):ee(new Xr("invalid-auth-event"))}else ee(new Xr("invalid-auth-event"))},Tc.prototype.confirm=function(t){return t=_o(this.verificationId,t),this.a(t)},Ic.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=fn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=s.document,e=null;return Lr()||!t?te():new Wt((function(n){e=function(){Lr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},Ic.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},kc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},kc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ee(new Xr("user-token-expired")):t||!this.b||x()>this.c-3e4?this.a?Nc(this,{grant_type:"refresh_token",refresh_token:this.a}):te(null):te({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Mc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(Lc,Oe),I(Dc,sn),Dc.prototype.ua=function(t){this.ga=t,ja(this.a,t)},Dc.prototype.ha=function(){return this.ga},Dc.prototype.Ca=function(){return G(this.P)},Dc.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},jr(Dc.prototype,"providerId","firebase"),(t=Dc.prototype).reload=function(){var t=this;return al(this,Gc(this).then((function(){return Jc(t).then((function(){return Vc(t)})).then(Hc)})))},t.dc=function(t){return this.G(t).then((function(t){return new xc(t)}))},t.G=function(t){var e=this;return al(this,Gc(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new Xr("internal-error");return t.accessToken!=e.ma&&(qc(e,t.accessToken),e.dispatchEvent(new Lc("tokenChanged"))),Qc(e,"refreshToken",t.refreshToken),t.accessToken})))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new Xr("internal-error");zc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?j(t,(function(t){return new Pc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Kc(this,e[n]);Qc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(t){return Ur("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(t)},t.hb=function(t){var e=this,n=null;return al(this,t.f(this.a,this.uid).then((function(t){return Xc(e,t),n=el(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.rc=function(t){return Ur("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(t)},t.fb=function(t){var e=this,n=null;return al(this,tl(this,t.providerId).then((function(){return e.G()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=el(e,t,"link"),nl(e,t)})).then((function(){return n})))},t.sc=function(t,e){var n=this;return al(this,tl(this,"phone").then((function(){return Sc(Uc(n),t,e,T(n.fb,n))})))},t.Bc=function(t,e){var n=this;return al(this,te().then((function(){return Sc(Uc(n),t,e,T(n.hb,n))})),!0)},t.rb=function(t){var e=this;return al(this,this.G().then((function(n){return e.a.rb(n,t)})).then((function(t){return Xc(e,t),e.reload()})))},t.Sc=function(t){var e=this;return al(this,this.G().then((function(n){return t.b(e.a,n)})).then((function(t){return Xc(e,t),e.reload()})))},t.sb=function(t){var e=this;return al(this,this.G().then((function(n){return e.a.sb(n,t)})).then((function(t){return Xc(e,t),e.reload()})))},t.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Gc(this);var e=this;return al(this,this.G().then((function(n){return e.a.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Xc(e,t),Qc(e,"displayName",t.displayName||null),Qc(e,"photoURL",t.photoUrl||null),F(e.providerData,(function(t){"password"===t.providerId&&(jr(t,"displayName",e.displayName),jr(t,"photoURL",e.photoURL))})),Vc(e)})).then(Hc))},t.Qc=function(t){var e=this;return al(this,Jc(this).then((function(n){return V(Wc(e),t)?function(t,e,n){return Ns(t,us,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return F(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),F(Wc(e),(function(t){n[t]||Zc(e,t)})),n[wo.PROVIDER_ID]||jr(e,"phoneNumber",null),Vc(e)})):Vc(e).then((function(){throw new Xr("no-such-provider")}))})))},t.delete=function(){var t=this;return al(this,this.G().then((function(e){return Ns(t.a,ss,{idToken:e})})).then((function(){t.dispatchEvent(new Lc("userDeleted"))}))).then((function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Rc(t,null),Bc(t,null),t.I=[],t.B=!0,jc(t),jr(t,"refreshToken",null),t.i&&sc(t.i,t)}))},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},t.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?T(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?T(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?T(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?T(this.Cb,this):null},t.tc=function(t){var e=this;return rl(this,"linkViaPopup",t,(function(){return tl(e,t.providerId).then((function(){return Vc(e)}))}),!1)},t.Cc=function(t){return rl(this,"reauthViaPopup",t,(function(){return te()}),!0)},t.uc=function(t){var e=this;return il(this,"linkViaRedirect",t,(function(){return tl(e,t.providerId)}),!1)},t.Dc=function(t){return il(this,"reauthViaRedirect",t,(function(){return te()}),!0)},t.Bb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return al(this,this.G().then((function(n){return ts(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=el(i,t,"link"),nl(i,t)})).then((function(){return o})))},t.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return al(this,te().then((function(){return Wi(es(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=el(i,t,"reauthenticate"),Xc(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.jb=function(t){var e=this,n=null;return al(this,this.G().then((function(e){return n=e,void 0===t||K(t)?{}:Ei(new fi(t))})).then((function(t){return e.a.jb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.toJSON=function(){return this.A()},t.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Y(t,this.metadata.A()),F(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),t};var cl={name:"redirectUser",C:"session"};function ll(t){return Nu(t.b,cl,t.a)}function hl(t){this.a=t,this.b=ku(),this.c=null,this.f=function(t){var e=pl("local"),n=pl("session"),r=pl("none");return function(t,e,n){var r=Cu(e,n),i=Au(t,e.C);return t.get(e,n).then((function(o){var a=null;try{a=Ar(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(dl,t.a).then((function(t){return t?pl(t):e}))}))}))})).then((function(e){return t.c=e,fl(t,e.C)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(pl("local"),this.a,T(this.g,this))}function fl(t,e){var n,r=[];for(n in xu)xu[n]!==e&&r.push(Nu(t.b,pl(xu[n]),t.a));return r.push(Nu(t.b,dl,t.a)),function(t){return new Wt((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)ne(t[s],S(o,s),a);else e(i)}))}(r)}hl.prototype.g=function(){var t=this,e=pl("local");yl(this,(function(){return te().then((function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null})).then((function(n){if(n)return fl(t,"local").then((function(){t.c=e}))}))}))};var dl={name:"persistence",C:"session"};function pl(t){return{name:"authUser",C:t}}function ml(t,e){return yl(t,(function(){return t.b.set(t.c,e.A(),t.a)}))}function gl(t){return yl(t,(function(){return Nu(t.b,t.c,t.a)}))}function vl(t,e){return yl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),sl(t||{})}))}))}function yl(t,e){return t.f=t.f.then(e,e),t.f}function bl(t){if(this.l=!1,jr(this,"settings",new Ec),jr(this,"app",t),!kl(this).options||!kl(this).options.apiKey)throw new Xr("invalid-api-key");t=e.SDK_VERSION?yr(e.SDK_VERSION):null,this.b=new La(kl(this).options&&kl(this).options.apiKey,Mi(Ci),t),this.O=[],this.m=[],this.J=[],this.Ub=e.INTERNAL.createSubscribe(T(this.oc,this)),this.W=void 0,this.Vb=e.INTERNAL.createSubscribe(T(this.pc,this)),xl(this,null),this.h=new hl(kl(this).options.apiKey+":"+kl(this).name),this.w=new ul(kl(this).options.apiKey+":"+kl(this).name),this.Y=Ml(this,function(t){var e=kl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(cl,t.a).then((function(t){return t&&e&&(t.authDomain=e),sl(t||{})}))}(t.w,kl(t).options.authDomain).then((function(e){return(t.B=e)&&(e.da=t.w),ll(t.w)}));return Ml(t,e)}(t).then((function(){return vl(t.h,e)})).then((function(e){return e?(e.da=t.w,t.B&&(t.B.ca||null)==(e.ca||null)?e:e.reload().then((function(){return ml(t.h,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:gl(t.h)}))):null})).then((function(e){xl(t,e||null)}));return Ml(t,n)}(this)),this.i=Ml(this,function(t){return t.Y.then((function(){return Tl(t)})).s((function(){})).then((function(){if(!t.l)return t.ma()})).s((function(){})).then((function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(pl("local"),e.a,t.ma)}}))}(this)),this.ga=!1,this.ma=T(this.Nc,this),this.ub=T(this.aa,this),this.wa=T(this.bc,this),this.xa=T(this.mc,this),this.Ja=T(this.nc,this),this.a=null,function(t){var e=kl(t).options.authDomain,n=kl(t).options.apiKey;e&&Er()&&(t.Tb=t.Y.then((function(){if(!t.l){if(t.a=mc(e,n,kl(t).name),ac(t.a,t),Al(t)&&$c(Al(t)),t.B){$c(t.B);var r=t.B;r.ua(t.ha()),Rc(r,t),Oc(r=t.B,t.I),Bc(r,t),t.B=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=T(this.delete,this),this.INTERNAL.logFramework=T(this.vc,this),this.o=0,sn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.ua(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function wl(t){Oe.call(this,"languageCodeChanged"),this.g=t}function _l(t){Oe.call(this,"frameworkChanged"),this.c=t}function El(t){return t.Tb||ee(new Xr("auth-domain-config-required"))}function Tl(t){if(!Er())return ee(new Xr("operation-not-supported-in-this-environment"));var e=El(t).then((function(){return t.a.oa()})).then((function(t){return t?Vr(t):null}));return Ml(t,e)}function Sl(t,e){var n={};return n.apiKey=kl(t).options.apiKey,n.authDomain=kl(t).options.authDomain,n.appName=kl(t).name,t.Y.then((function(){return function(t,e,n,r){var i=new Dc(t,e);return n&&(i.da=n),r&&Oc(i,r),i.reload().then((function(){return i}))}(n,e,t.w,t.Ca())})).then((function(e){return Al(t)&&e.uid==Al(t).uid?(Yc(Al(t),e),t.aa(e)):(xl(t,e),$c(e),t.aa(e))})).then((function(){Nl(t)}))}function xl(t,e){Al(t)&&(function(t,e){z(t.O,(function(t){return t==e}))}(Al(t),t.ub),Ye(Al(t),"tokenChanged",t.wa),Ye(Al(t),"userDeleted",t.xa),Ye(Al(t),"userInvalidated",t.Ja),jc(Al(t))),e&&(e.O.push(t.ub),Ke(e,"tokenChanged",t.wa),Ke(e,"userDeleted",t.xa),Ke(e,"userInvalidated",t.Ja),0<t.o&&Fc(e)),jr(t,"currentUser",e),e&&(e.ua(t.ha()),Rc(e,t),Oc(e,t.I),Bc(e,t))}function Il(t,e){var n=null,r=null;return Ml(t,e.then((function(e){return n=Eo(e),r=Oi(e),Sl(t,e)})).then((function(){return Vr({user:Al(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function kl(t){return t.app}function Al(t){return t.currentUser}function Cl(t){return Al(t)&&Al(t)._lat||null}function Nl(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Cl(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](Cl(t))}}function Ml(t,e){return t.O.push(e),e.ka((function(){$(t.O,e)})),e}function Pl(){}function Ll(){this.a={},this.b=1e12}hl.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Xr("invalid-persistence-type"),n=new Xr("unsupported-persistence-type");t:{for(r in xu)if(xu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(fr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(t),yl(this,(function(){return t!=n.c.C?n.b.get(n.c,n.a).then((function(r){return e=r,fl(n,t)})).then((function(){if(n.c=pl(t),e)return n.b.set(n.c,e,n.a)})):te()}))},I(bl,sn),I(wl,Oe),I(_l,Oe),(t=bl.prototype).mb=function(t){return Ml(this,t=this.h.mb(t))},t.ua=function(t){this.Z===t||this.l||(this.Z=t,ja(this.b,this.Z),this.dispatchEvent(new wl(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var t=s.navigator;this.ua(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.I.push(t),qa(this.b,e.SDK_VERSION?yr(e.SDK_VERSION,this.I):null),this.dispatchEvent(new _l(this.I))},t.Ca=function(){return G(this.I)},t.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:kl(this).options.apiKey,authDomain:kl(this).options.authDomain,appName:kl(this).name,currentUser:Al(this)&&Al(this).A()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?T(this.ac,this):null},t.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Xa(i.b,t).then((function(t){return o=Eo(t),a=Oi(t),t}));return Ml(this,t=i.Y.then((function(){return s})).then((function(t){return Sl(i,t)})).then((function(){return Vr({user:Al(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},t.Lc=function(t){if(!Er())return ee(new Xr("operation-not-supported-in-this-environment"));var n=this,r=Ri(t.providerId),i=Cr(),o=null;(!xr()||lr())&&kl(this).options.authDomain&&t.isOAuthProvider&&(o=Hs(kl(this).options.authDomain,kl(this).options.apiKey,kl(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null,null,null,this.R()));var a=or(o,r&&r.sa,r&&r.ra);return Ml(this,r=El(this).then((function(e){return lc(e,a,"signInViaPopup",t,i,!!o,n.R())})).then((function(){return new Wt((function(t,e){n.ja("signInViaPopup",null,new Xr("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=dc(n.a,n,"signInViaPopup",a,i)}))})).then((function(t){return a&&ir(a),t?Vr(t):null})).s((function(t){throw a&&ir(a),t})))},t.Mc=function(t){if(!Er())return ee(new Xr("operation-not-supported-in-this-environment"));var e=this;return Ml(this,El(this).then((function(){return function(t){return yl(t,(function(){return t.b.set(dl,t.c.C,t.a)}))}(e.h)})).then((function(){return fc(e.a,"signInViaRedirect",t,void 0,e.R())})))},t.oa=function(){var t=this;return Tl(this).then((function(e){return t.a&&yc(t.a.b),e})).s((function(e){throw t.a&&yc(t.a.b),e}))},t.Rc=function(t){if(!t)return ee(new Xr("null-user"));if(this.P!=t.tenantId)return ee(new Xr("tenant-id-mismatch"));var e=this,n={};n.apiKey=kl(this).options.apiKey,n.authDomain=kl(this).options.authDomain,n.appName=kl(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[Ra]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-x())/1e3,e=new Dc(e,o),n&&(e.da=n),r&&Oc(e,r),Yc(e,t),e}(t,n,e.w,e.Ca());return Ml(this,this.i.then((function(){if(kl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Al(e)&&t.uid==Al(e).uid?(Yc(Al(e),t),e.aa(t)):(xl(e,r),$c(r),e.aa(r))})).then((function(){Nl(e)})))},t.pb=function(){var t=this;return Ml(this,this.i.then((function(){return t.a&&yc(t.a.b),Al(t)?(xl(t,null),gl(t.h).then((function(){Nl(t)}))):te()})))},t.Nc=function(){var t=this;return vl(this.h,kl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Al(t)&&e){n=Al(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Yc(Al(t),e),Al(t).G();(Al(t)||e)&&(xl(t,e),e&&($c(e),e.da=t.w),t.a&&ac(t.a,t),Nl(t))}}))},t.aa=function(t){return ml(this.h,t)},t.bc=function(){Nl(this),this.aa(Al(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Al(e))}))},t.pc=function(t){var e=this;!function(t,e){t.J.push(e),Ml(t,t.i.then((function(){!t.l&&V(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Cl(t)))})))}(this,(function(){t.next(Al(e))}))},t.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){v(t)?t(Al(r)):v(t.next)&&t.next(Al(r))})),this.Ub(t,e,n)},t.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),v(t)?t(Al(r)):v(t.next)&&t.next(Al(r))})),this.Vb(t,e,n)},t.cc=function(t){var e=this;return Ml(this,this.i.then((function(){return Al(e)?Al(e).G(t).then((function(t){return{accessToken:t}})):null})))},t.Hc=function(t){var e=this;return this.i.then((function(){return Il(e,Ns(e.b,xs,{token:t}))})).then((function(t){var n=t.user;return Qc(n,"isAnonymous",!1),e.aa(n),t}))},t.Ic=function(t,e){var n=this;return this.i.then((function(){return Il(n,Ns(n.b,Is,{email:t,password:e}))}))},t.Xb=function(t,e){var n=this;return this.i.then((function(){return Il(n,Ns(n.b,os,{email:t,password:e}))}))},t.Sa=function(t){var e=this;return this.i.then((function(){return Il(e,t.na(e.b))}))},t.Gc=function(t){return Ur("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(t)},t.ob=function(){var t=this;return this.i.then((function(){var e=Al(t);if(e&&e.isAnonymous){var n=Vr({providerId:null,isNewUser:!1});return Vr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Il(t,t.b.ob()).then((function(e){var n=e.user;return Qc(n,"isAnonymous",!0),t.aa(n),e}))}))},t.getUid=function(){return Al(this)&&Al(this).uid||null},t.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&Al(this)&&Fc(Al(this))},t.Ec=function(t){var e=this;F(this.m,(function(n){n==t&&e.o--})),0>this.o&&(this.o=0),0==this.o&&Al(this)&&jc(Al(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Ml(this,this.i.then((function(){e.l||V(e.m,t)&&t(Cl(e))})))},t.removeAuthTokenListener=function(t){z(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(pl("local"),t.a,this.ma),this.a&&(sc(this.a,this),yc(this.a.b)),Promise.resolve()},t.$b=function(t){return Ml(this,function(t,e){return Ns(t,as,{identifier:e,continueUri:Tr()?er():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.qc=function(t){return!!go(t)},t.lb=function(t,e){var n=this;return Ml(this,te().then((function(){var t=new fi(e);if(!t.c)throw new Xr("argument-error",mi+" must be true when sending sign in link to email");return Ei(t)})).then((function(e){return n.b.lb(t,e)})).then((function(){})))},t.Uc=function(t){return this.Ma(t).then((function(t){return t.data.email}))},t.ab=function(t,e){return Ml(this,this.b.ab(t,e).then((function(){})))},t.Ma=function(t){return Ml(this,this.b.Ma(t).then((function(t){return new zr(t)})))},t.Ya=function(t){return Ml(this,this.b.Ya(t).then((function(){})))},t.kb=function(t,e){var n=this;return Ml(this,te().then((function(){return void 0===e||K(e)?{}:Ei(new fi(e))})).then((function(e){return n.b.kb(t,e)})).then((function(){})))},t.Kc=function(t,e){return Ml(this,Sc(this,t,e,T(this.Sa,this)))},t.Jc=function(t,e){var n=this;return Ml(this,te().then((function(){var r=e||er(),i=mo(t,r);if(!(r=go(r)))throw new Xr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Xr("tenant-id-mismatch");return n.Sa(i)})))},Pl.prototype.render=function(){},Pl.prototype.reset=function(){},Pl.prototype.getResponse=function(){},Pl.prototype.execute=function(){};var Dl=null;function Rl(t,e){return(e=Ol(e))&&t.a[e]||null}function Ol(t){return(t=void 0===t?1e12:t)?t.toString():null}function Bl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=zn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ke(this.f,"click",this.i)}function Ul(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Fl(){}Ll.prototype.render=function(t,e){return this.a[this.b.toString()]=new Bl(t,e),this.b++},Ll.prototype.reset=function(t){var e=Rl(this,t);t=Ol(t),e&&t&&(e.delete(),delete this.a[t])},Ll.prototype.getResponse=function(t){return(t=Rl(this,t))?t.getResponse():null},Ll.prototype.execute=function(t){(t=Rl(this,t))&&t.execute()},Bl.prototype.getResponse=function(){return Ul(this),this.b},Bl.prototype.execute=function(){Ul(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Bl.prototype.delete=function(){Ul(this),this.g=!0,clearTimeout(this.a),this.a=null,Ye(this.f,"click",this.i)},Fl.prototype.g=function(){return Dl||(Dl=new Ll),te(Dl)},Fl.prototype.c=function(){};var jl=null;function ql(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Vl=new J(et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),$l=new Pr(3e4,6e4);ql.prototype.g=function(t){var e=this;return new Wt((function(n,r){var i=setTimeout((function(){r(new Xr("network-request-failed"))}),$l.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new Xr("internal-error"));delete s[e.a]},te(Ia(ot(Vl,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new Xr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},ql.prototype.c=function(){this.b--};var zl=null;function Hl(t,e,n,r,i,o,a){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a?(jl||(jl=new Fl),a=jl):(zl||(zl=new ql),a=zl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Kl])throw new Xr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Zl],!s.document)throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!zn(e)||!this.i&&zn(e).hasChildNodes())throw new Xr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new La(t,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Gl];this.a[Gl]=function(t){if(Ql(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=wr(c,s);"function"==typeof e&&e(t)}};var l=this.a[Wl];this.a[Wl]=function(){if(Ql(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=wr(l,s);"function"==typeof t&&t()}}}var Gl="callback",Wl="expired-callback",Kl="sitekey",Zl="size";function Ql(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Yl(t,e){return t.h.push(e),e.ka((function(){$(t.h,e)})),e}function Jl(t){if(t.B)throw new Xr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Xl(t,n,r){var i=!1;try{this.b=r||e.app()}catch(t){throw new Xr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Xr("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ca()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=e.SDK_VERSION?yr(e.SDK_VERSION,a):null,Hl.call(this,r,t,n,(function(){try{var t=o.b.auth().ha()}catch(e){t=null}return t}),a,Mi(Ci),i)}function th(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Xr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],0>i||i>=eh.length)throw new Xr("internal-error","Argument validator received an unsupported number of arguments.");n=eh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new Xr("argument-error",t+" failed: "+r)}(t=Hl.prototype).Da=function(){var t=this;return this.f?this.f:this.f=Yl(this,te().then((function(){if(Tr()&&!hr())return ur();throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.v())})).then((function(e){return t.g=e,Ns(t.o,gs,{})})).then((function(e){t.a[Kl]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){Jl(this);var t=this;return Yl(this,this.Da().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=zn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!$n&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',jt(a.name),'"'),a.type){o.push(' type="',jt(a.type),'"');var s={};Y(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(u(a)?o.className=a:m(a)?o.className=a.join(" "):Hn(o,a)),2<r.length&&Wn(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Jl(this);var t=this;return Yl(this,this.render().then((function(e){return new Wt((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){z(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Jl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Jl(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=zn(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Xl,Hl);var eh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function nh(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:u}}function rh(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:c}}function ih(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:y}}function oh(t,e){return{name:t||"",M:"a function",optional:!!e,N:v}}function ah(t,e){return{name:t||"",M:"null",optional:!!e,N:p}}function sh(t){return{name:t?t+"Credential":"credential",M:t?"a valid "+t+" credential":"a valid credential",optional:!1,N:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.na||!n)}}}function uh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&u(t.type)&&v(t.verify))}}}function ch(t,e,n,r){return{name:n||"",M:t.M+" or "+e.M,optional:!!r,N:function(n){return t.N(n)||e.N(n)}}}function lh(t,e){for(var n in e){var r=e[n].name;t[r]=dh(r,t[n],e[n].j)}}function hh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:S((function(t){return this[t]}),n),set:S((function(t,e,n,r){th(t,[n],[r],!0),this[e]=r}),r,n,e[n].Za),enumerable:!0})}}function fh(t,e,n,r){t[e]=dh(e,n,r)}function dh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return th(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}lh(bl.prototype,{Ya:{name:"applyActionCode",j:[nh("code")]},Ma:{name:"checkActionCode",j:[nh("code")]},ab:{name:"confirmPasswordReset",j:[nh("code"),nh("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[nh("email"),nh("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[nh("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[nh("emailLink")]},wc:{name:"onAuthStateChanged",j:[ch(ih(),oh(),"nextOrObserver"),oh("opt_error",!0),oh("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[ch(ih(),oh(),"nextOrObserver"),oh("opt_error",!0),oh("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[nh("email"),ch(ih("opt_actionCodeSettings",!0),ah(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[nh("email"),ih("actionCodeSettings")]},mb:{name:"setPersistence",j:[nh("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[sh()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[sh()]},Hc:{name:"signInWithCustomToken",j:[nh("token")]},Ic:{name:"signInWithEmailAndPassword",j:[nh("email"),nh("password")]},Jc:{name:"signInWithEmailLink",j:[nh("email"),nh("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[nh("phoneNumber"),uh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[ch({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Dc)}},ah(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[nh(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[nh("code")]}}),hh(bl.prototype,{lc:{name:"languageCode",Za:ch(nh(),ah(),"languageCode")},ti:{name:"tenantId",Za:ch(nh(),ah(),"tenantId")}}),bl.Persistence=xu,bl.Persistence.LOCAL="local",bl.Persistence.SESSION="session",bl.Persistence.NONE="none",lh(Dc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[rh("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[rh("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[sh()]},fb:{name:"linkWithCredential",j:[sh()]},sc:{name:"linkWithPhoneNumber",j:[nh("phoneNumber"),uh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[sh()]},hb:{name:"reauthenticateWithCredential",j:[sh()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[nh("phoneNumber"),uh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[ch(ih("opt_actionCodeSettings",!0),ah(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[nh(null,!0)]},Qc:{name:"unlink",j:[nh("provider")]},rb:{name:"updateEmail",j:[nh("email")]},sb:{name:"updatePassword",j:[nh("password")]},Sc:{name:"updatePhoneNumber",j:[sh("phone")]},tb:{name:"updateProfile",j:[ih("profile")]}}),lh(Ll.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),lh(Pl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),lh(Wt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),hh(Ec.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:rh("appVerificationDisabledForTesting")}}),lh(Tc.prototype,{confirm:{name:"confirm",j:[nh("verificationCode")]}}),fh(Gi,"fromJSON",(function(t){t=u(t)?JSON.parse(t):t;for(var e,n=[Xi,fo,yo,Qi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[ch(nh(),ih(),"json")]),fh(po,"credential",(function(t,e){return new ho(t,e)}),[nh("email"),nh("password")]),lh(ho.prototype,{A:{name:"toJSON",j:[nh(null,!0)]}}),lh(ro.prototype,{ya:{name:"addScope",j:[nh("scope")]},Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),fh(ro,"credential",io,[ch(nh(),ih(),"token")]),fh(po,"credentialWithLink",mo,[nh("email"),nh("emailLink")]),lh(oo.prototype,{ya:{name:"addScope",j:[nh("scope")]},Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),fh(oo,"credential",ao,[ch(nh(),ih(),"token")]),lh(so.prototype,{ya:{name:"addScope",j:[nh("scope")]},Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),fh(so,"credential",uo,[ch(nh(),ch(ih(),ah()),"idToken"),ch(nh(),ah(),"accessToken",!0)]),lh(co.prototype,{Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),fh(co,"credential",lo,[ch(nh(),ih(),"token"),nh("secret",!0)]),lh(no.prototype,{ya:{name:"addScope",j:[nh("scope")]},credential:{name:"credential",j:[ch(nh(),ch(ih(),ah()),"optionsOrIdToken"),ch(nh(),ah(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),lh(Yi.prototype,{A:{name:"toJSON",j:[nh(null,!0)]}}),lh(Ki.prototype,{A:{name:"toJSON",j:[nh(null,!0)]}}),fh(wo,"credential",_o,[nh("verificationId"),nh("verificationCode")]),lh(wo.prototype,{Wa:{name:"verifyPhoneNumber",j:[nh("phoneNumber"),uh()]}}),lh(vo.prototype,{A:{name:"toJSON",j:[nh(null,!0)]}}),lh(Xr.prototype,{toJSON:{name:"toJSON",j:[nh(null,!0)]}}),lh(No.prototype,{toJSON:{name:"toJSON",j:[nh(null,!0)]}}),lh(Co.prototype,{toJSON:{name:"toJSON",j:[nh(null,!0)]}}),lh(Xl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),fh(ri,"parseLink",hi,[nh("link")]),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Hr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:bl,AuthCredential:Gi,Error:Xr};fh(t,"EmailAuthProvider",po,[]),fh(t,"FacebookAuthProvider",ro,[]),fh(t,"GithubAuthProvider",oo,[]),fh(t,"GoogleAuthProvider",so,[]),fh(t,"TwitterAuthProvider",co,[]),fh(t,"OAuthProvider",no,[nh("providerId")]),fh(t,"SAMLAuthProvider",eo,[nh("providerId")]),fh(t,"PhoneAuthProvider",wo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof bl)}}]),fh(t,"RecaptchaVerifier",Xl,[ch(nh(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),ih("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof e.app.App)}}]),fh(t,"ActionCodeURL",ri,[]),e.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new bl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),e.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:T((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:T(t.cc,t),addAuthTokenListener:T(t.Wb,t),removeAuthTokenListener:T(t.Ec,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.registerVersion("@firebase/auth","0.13.4"),e.INTERNAL.extendNamespace({User:Dc})}()}).apply(void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Dt=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(Nt),Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ot=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return It.__extends(e,t),e}(Error);
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bt=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return It.__awaiter(this,void 0,void 0,(function(){var t;return It.__generator(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return It.__awaiter(this,void 0,void 0,(function(){var t,e;return It.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ut(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Ft=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Ut(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Ut(t,(function(t){return e.decode(t)})):t},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jt=function(){function t(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new Ft,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new Bt(e,n),this.cancelAllRequests=new Promise((function(t){i.deleteService=function(){return t()}}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+n+"/"+t:"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return It.__awaiter(this,void 0,void 0,(function(){var r,i;return It.__generator(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return It.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return It.__generator(this,(function(h){switch(h.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o=new Headers,[4,this.contextProvider.getContext()];case 1:return(a=h.sent()).authToken&&o.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&o.append("Firebase-Instance-ID-Token",a.instanceIdToken),s=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,o),(f=s,new Promise((function(t,e){setTimeout((function(){e(new Ot("deadline-exceeded","deadline-exceeded"))}),f)}))),this.cancelAllRequests])];case 2:if(!(u=h.sent()))throw new Ot("cancelled","Firebase Functions instance was deleted.");if(c=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!Rt[s])return new Ot("internal","internal");r=Rt[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Ot(r,i,o)}(u.status,u.json,this.serializer))throw c;if(!u.json)throw new Ot("internal","Response is not valid JSON object.");if(void 0===(l=u.json.data)&&(l=u.json.result),void 0===l)throw new Ot("internal","Response is missing data field.");return[2,{data:this.serializer.decode(l)}]}var f}))}))},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qt(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new jt(n,r,i,e)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
!function(t){var e={Functions:jt};t.INTERNAL.registerComponent(new At.Component("functions",qt,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(Dt),Dt.registerVersion("@firebase/functions","0.4.31");var Vt=xt((function(t){(function(){var e,n=n||{},r=this||self;function i(t){return"string"==typeof t}function o(t){return"number"==typeof t}function a(t,e){t=t.split("."),e=e||r;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function s(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function c(t){return"array"==u(t)}function l(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),d=0;function p(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:m).apply(null,arguments)}function v(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var y=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.wb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.ka=function(){if(!this.j&&(this.j=!0,this.G(),0))this[f]||(this[f]=++d)},w.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(i(t))return i(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,o=i(t)?t.split(""):t,a=0;a<r;a++)a in o&&e.call(n,o[a],a,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function S(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function x(t){return/^[\s\xa0]*$/.test(t)}var I,k=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function A(t,e){return-1!=t.indexOf(e)}function C(t,e){return t<e?-1:t>e?1:0}t:{var N=r.navigator;if(N){var M=N.userAgent;if(M){I=M;break t}}I=""}function P(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e,n={};for(e in t)n[e]=t[e];return n}var D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<D.length;o++)n=D[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function O(t){return O[" "](t),t}O[" "]=s;var B,U,F=A(I,"Opera"),j=A(I,"Trident")||A(I,"MSIE"),q=A(I,"Edge"),V=q||j,$=A(I,"Gecko")&&!(A(I.toLowerCase(),"webkit")&&!A(I,"Edge"))&&!(A(I,"Trident")||A(I,"MSIE"))&&!A(I,"Edge"),z=A(I.toLowerCase(),"webkit")&&!A(I,"Edge");function H(){var t=r.document;return t?t.documentMode:void 0}t:{var G="",W=(U=I,$?/rv:([^\);]+)(\)|;)/.exec(U):q?/Edge\/([\d\.]+)/.exec(U):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):z?/WebKit\/(\S+)/.exec(U):F?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(W&&(G=W?W[1]:""),j){var K=H();if(null!=K&&K>parseFloat(G)){B=String(K);break t}}B=G}var Z,Q={};function Y(t){return function(t,e){var n=Q;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=k(String(B)).split("."),r=k(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=C(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||C(0==a[2].length,0==s[2].length)||C(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}Z=r.document&&j?H():void 0;var J=!j||9<=Number(Z),X=j&&!Y("9"),tt=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{r.addEventListener("test",s,e),r.removeEventListener("test",s,e)}catch(t){}return t}();function et(t,e){this.type=t,this.a=this.target=e,this.Ha=!0}function nt(t,e){if(et.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if($){t:{try{O(e.nodeName);var o=!0;break t}catch(t){}o=!1}o||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=i(t.pointerType)?t.pointerType:rt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}et.prototype.b=function(){this.Ha=!1},b(nt,et);var rt={2:"touch",3:"pen",4:"mouse"};nt.prototype.b=function(){nt.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,X)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var it="closure_listenable_"+(1e6*Math.random()|0),ot=0;function at(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ot,this.X=this.Z=!1}function st(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ut(t){this.src=t,this.a={},this.b=0}function ct(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(st(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function lt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ut.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=lt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new at(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),ft={};function dt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(c(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=_t(r),e&&e[it]?e.za(n,r,h(i)?!!i.capture:!!i,o):pt(e,n,r,!0,i,o)}(t,e,n,r,i);if(c(e)){for(var o=0;o<e.length;o++)dt(t,e[o],n,r,i);return null}return n=_t(n),t&&t[it]?t.ya(e,n,h(r)?!!r.capture:!!r,i):pt(t,e,n,!1,r,i)}function pt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i;if(a&&!J)return null;var s=bt(t);if(s||(t[ht]=s=new ut(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=yt,e=J?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function mt(t){if(!o(t)&&t&&!t.X){var e=t.src;if(e&&e[it])ct(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bt(e))?(ct(n,t),0==n.b&&(n.src=null,e[ht]=null)):st(t)}}}function gt(t){return t in ft?ft[t]:ft[t]="on"+t}function vt(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&mt(t),n.call(r,e)}function yt(t,e){return!!t.X||(J?vt(t,new nt(e,this)):vt(t,e=new nt(e||a("window.event"),this)))}function bt(t){return(t=t[ht])instanceof ut?t:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(t){return"function"==u(t)?t:(t[wt]||(t[wt]=function(e){return t.handleEvent(e)}),t[wt])}function Et(){w.call(this),this.c=new ut(this),this.J=this,this.B=null}function Tt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&ct(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ha}b(Et,w),Et.prototype[it]=!0,(e=Et.prototype).addEventListener=function(t,e,n,r){dt(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(c(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=h(i)?!!i.capture:!!i,r=_t(r),e&&e[it]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=lt(a=e.a[n],r,i,o))&&(st(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--)))):e&&(e=bt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=lt(n,r,i,o)),(r=-1<e?n[e]:null)&&mt(r))}(this,t,e,n,r)},e.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(i(t))t=new et(t,n);else if(t instanceof et)t.target=t.target||n;else{var o=t;R(t=new et(r,n),o)}if(o=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.a=e[a];o=Tt(s,r,!0,t)&&o}if(o=Tt(s=t.a=n,r,!0,t)&&o,o=Tt(s,r,!1,t)&&o,e)for(a=0;a<e.length;a++)o=Tt(s=t.a=e[a],r,!1,t)&&o;return o},e.G=function(){if(Et.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)st(n[r]);delete e.a[t],e.b--}}this.B=null},e.ya=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},e.za=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var St=r.JSON.stringify;function xt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function It(){this.b=this.a=null}xt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var kt,At=new xt((function(){return new Nt}),(function(t){t.reset()}));function Ct(){var t=Dt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Nt(){this.next=this.b=this.a=null}function Mt(t){r.setTimeout((function(){throw t}),0)}function Pt(t,e){kt||function(){var t=r.Promise.resolve(void 0);kt=function(){t.then(Rt)}}(),Lt||(kt(),Lt=!0),Dt.add(t,e)}It.prototype.add=function(t,e){var n=At.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Nt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Nt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,Dt=new It;function Rt(){for(var t;t=Ct();){try{t.a.call(t.b)}catch(t){Mt(t)}var e=At;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Ot(t,e){Et.call(this),this.b=t||1,this.a=e||r,this.f=g(this.eb,this),this.g=y()}function Bt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Ut(t,e,n){if("function"==u(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function Ft(t,e,n){w.call(this),this.f=null!=n?g(t,n):t,this.c=e,this.b=g(this.Za,this),this.a=[]}function jt(t){t.U=Ut(t.b,t.c),t.f.apply(null,t.a)}function qt(t){w.call(this),this.b=t,this.a={}}b(Ot,Et),(e=Ot.prototype).ba=!1,e.L=null,e.eb=function(){if(this.ba){var t=y()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Bt(this),this.start()))}},e.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=y())},e.G=function(){Ot.N.G.call(this),Bt(this),delete this.a},b(Ft,w),(e=Ft.prototype).ea=!1,e.U=null,e.Sa=function(t){this.a=arguments,this.U?this.ea=!0:jt(this)},e.G=function(){Ft.N.G.call(this),this.U&&(r.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},e.Za=function(){this.U=null,this.ea&&(this.ea=!1,jt(this))},b(qt,w);var Vt=[];function $t(t,e,n,r){c(n)||(n&&(Vt[0]=n.toString()),n=Vt);for(var i=0;i<n.length;i++){var o=dt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function zt(t){P(t.a,(function(t,e){this.a.hasOwnProperty(e)&&mt(t)}),t),t.a={}}function Ht(){}qt.prototype.G=function(){qt.N.G.call(this),zt(this)},qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=null;function Wt(){return Gt=Gt||new Et}function Kt(t){et.call(this,"serverreachability",t)}function Zt(t){var e=Wt();e.dispatchEvent(new Kt(e,t))}function Qt(t){et.call(this,"statevent",t)}function Yt(t){var e=Wt();e.dispatchEvent(new Qt(e,t))}function Jt(t){et.call(this,"timingevent",t)}function Xt(t,e){if("function"!=u(t))throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){t()}),e)}b(Kt,et),b(Qt,et),b(Jt,et);var te={NO_ERROR:0,fb:1,mb:2,lb:3,ib:4,kb:5,nb:6,Ka:7,TIMEOUT:8,qb:9},ee={hb:"complete",ub:"success",La:"error",Ka:"abort",sb:"ready",tb:"readystatechange",TIMEOUT:"timeout",ob:"incrementaldata",rb:"progress",jb:"downloadprogress",vb:"uploadprogress"};function ne(){}function re(t){var e;return(e=t.a)||(e=t.a={}),e}function ie(){}ne.prototype.a=null;var oe,ae={OPEN:"a",gb:"b",La:"c",pb:"d"};function se(){et.call(this,"d")}function ue(){et.call(this,"c")}function ce(){}function le(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new qt(this),this.O=he,t=V?125:void 0,this.P=new Ot(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}b(se,et),b(ue,et),b(ce,ne),oe=new ce;var he=45e3,fe={},de={};function pe(t,e,n){t.F=1,t.f=Fe(Pe(e)),t.l=n,t.H=!0,ge(t,null)}function me(t,e,n,r){t.F=1,t.f=Fe(Pe(e)),t.l=null,t.H=n,ge(t,r)}function ge(t,e){t.v=y(),be(t),t.D=Pe(t.f),Ue(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Ft(g(t.Ia,t,t.a),t.J)),$t(t.I,t.a,"readystatechange",t.bb),e=t.h?L(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Zt(1)}function ve(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=ye(t,n);if(i==de){4==e&&(t.c=4,Yt(14),r=!1);break}if(i==fe){t.c=4,Yt(15),r=!1;break}Se(t,i)}4==e&&0==n.length&&(t.c=1,Yt(16),r=!1),t.b=t.b&&r,r||(Te(t),Ee(t))}function ye(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?de:(n=Number(e.substring(n,r)),isNaN(n)?fe:(r+=1)+n>e.length?de:(e=e.substr(r,n),t.A=r+n,e))}function be(t){t.R=y()+t.O,we(t,t.O)}function we(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=Xt(g(t.$a,t),e)}function _e(t){t.i&&(r.clearTimeout(t.i),t.i=null)}function Ee(t){t.g.Ba()||t.m||t.g.ma(t)}function Te(t){_e(t);var e=t.B;e&&"function"==typeof e.ka&&e.ka(),t.B=null,Bt(t.P),zt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function Se(t,e){try{t.g.Ea(t,e),Zt(4)}catch(t){}}function xe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||i(t))E(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(l(t)||i(t)){n=[];for(var r=t.length,o=0;o<r;o++)n.push(o)}else for(o in n=[],r=0,t)n[r++]=o;o=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(i(t))return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var a=0;a<o;a++)e.call(void 0,r[a],n&&n[a],t)}}function Ie(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ie)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ke(t,e){Ce(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ae(t))}function Ae(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ce(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ce(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ce(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(e=le.prototype).setTimeout=function(t){this.O=t},e.bb=function(t){t=t.target;var e=this.B;e&&3==Mn(t)?e.Sa():this.Ia(t)},e.Ia=function(t){try{if(t==this.a)t:{var e=Mn(this.a),n=this.a.xa(),r=this.a.T();if(!(3>e||3==e&&!V&&!this.a.aa())){this.m||4!=e||7==n||Zt(8==n||0>=r?3:2),_e(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Pn(this.a,"X-HTTP-Initial-Response");if(a&&!x(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,Yt(12),Te(this),Ee(this);break t}this.s=!0,Se(this,s)}this.H?(ve(this,e,o),V&&this.b&&3==e&&($t(this.I,this.P,"tick",this.ab),this.P.start())):Se(this,o),4==e&&Te(this),this.b&&!this.m&&(4==e?this.g.ma(this):(this.b=!1,be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Yt(12)):(this.c=0,Yt(13)),Te(this),Ee(this)}}}catch(t){}},e.ab=function(){if(this.a){var t=Mn(this.a),e=this.a.aa();this.A<e.length&&(_e(this),ve(this,t,e),this.b&&4!=t&&be(this))}},e.cancel=function(){this.m=!0,Te(this)},e.$a=function(){this.i=null;var t=y();0<=t-this.R?(2!=this.F&&(Zt(3),Yt(17)),Te(this),this.c=2,Ee(this)):we(this,this.R-t)},(e=Ie.prototype).C=function(){Ae(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.K=function(){return Ae(this),this.a.concat()},e.get=function(t,e){return Ce(this.b,t)?this.b[t]:e},e.set=function(t,e){Ce(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ne=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Me(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Me){this.a=void 0!==e?e:t.a,Le(this,t.f),this.j=t.j,De(this,t.c),Re(this,t.h),this.g=t.g,e=t.b;var n=new Ke;n.c=e.c,e.a&&(n.a=new Ie(e.a),n.b=e.b),Oe(this,n),this.i=t.i}else t&&(n=String(t).match(Ne))?(this.a=!!e,Le(this,n[1]||"",!0),this.j=je(n[2]||""),De(this,n[3]||"",!0),Re(this,n[4]),this.g=je(n[5]||"",!0),Oe(this,n[6]||"",!0),this.i=je(n[7]||"")):(this.a=!!e,this.b=new Ke(null,this.a))}function Pe(t){return new Me(t)}function Le(t,e,n){t.f=n?je(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function De(t,e,n){t.c=n?je(e,!0):e}function Re(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Oe(t,e,n){e instanceof Ke?(t.b=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qe(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=qe(e,Ge)),t.b=new Ke(e,t.a))}function Be(t,e,n){t.b.set(e,n)}function Ue(t,e,n){c(n)||(n=[String(n)]),Je(t.b,e,n)}function Fe(t){return Be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^y()).toString(36)),t}function je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qe(t,e,n){return i(t)?(t=encodeURI(t).replace(e,Ve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ve(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Me.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qe(e,$e,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(qe(e,$e,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(qe(n,"/"==n.charAt(0)?He:ze,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",qe(n,We)),t.join("")};var $e=/[#\/\?@]/g,ze=/[#\?:]/g,He=/[#\?]/g,Ge=/[#\?@]/g,We=/#/g;function Ke(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new Ie,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qe(t,e){Ze(t),e=Xe(t,e),Ce(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ke(t.a,e))}function Ye(t,e){return Ze(t),e=Xe(t,e),Ce(t.a.b,e)}function Je(t,e,n){Qe(t,e),0<n.length&&(t.c=null,t.a.set(Xe(t,e),S(n)),t.b+=n.length)}function Xe(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function tn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function en(t){var e=t.a.F.a;if(null!=e)Yt(4),e?(Yt(10),zn(t.a,t,!1)):(Yt(11),zn(t.a,t,!0));else{t.b=new le(t,void 0,void 0),t.b.h=t.h,e=Zn(e=t.a,e.Y()?t.f:null,t.i),Yt(4),Ue(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Be(e,n,r),me(t.b,e,!1,t.f)}}function nn(){this.a=this.b=null}function rn(){this.a=new Ie}function on(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[f]||(t[f]=++d)):e.charAt(0)+t}function an(t,e){this.b=t,this.a=e}function sn(t){this.g=t||un,r.PerformanceNavigationTiming?t=0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(r.a&&r.a.Ca&&r.a.Ca()&&r.a.Ca().xb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new rn),this.b=null,this.c=[]}(e=Ke.prototype).add=function(t,e){Ze(this),this.c=null,t=Xe(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.forEach=function(t,e){Ze(this),this.a.forEach((function(n,r){E(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.K=function(){Ze(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.C=function(t){Ze(this);var e=[];if(i(t))Ye(this,t)&&(e=T(e,this.a.get(Xe(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},e.set=function(t,e){return Ze(this),this.c=null,Ye(this,t=Xe(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},(e=tn.prototype).M=null,e.$=function(t){return this.a.$(t)},e.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},e.Ba=function(){return!1},e.Ea=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Pn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Pn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void Wn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Wn(e,2)}else 1==this.M&&(this.g?Yt(6):"11111"==e?(Yt(5),this.g=!0,(!j||10<=Number(Z))&&(this.c=200,this.b.cancel(),Yt(11),zn(this.a,this,!0))):(Yt(7),this.g=!1))},e.ma=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,en(this)):1==this.M&&(this.g?(Yt(11),zn(this.a,this,!0)):(Yt(10),zn(this.a,this,!1)));else{0==this.M?Yt(8):1==this.M&&Yt(9);var t=this.a;t.m=this.c,Wn(t,2)}},e.Y=function(){return this.a.Y()},e.la=function(){return this.a.la()},rn.prototype.add=function(t){this.a.set(on(t),t)},rn.prototype.C=function(){return this.a.C()};var un=10;function cn(t,e){!t.a&&(A(e,"spdy")||A(e,"quic")||A(e,"h2"))&&(t.f=t.g,t.a=new rn,t.b&&(dn(t,t.b),t.b=null))}function ln(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function hn(t){return t.b?1:t.a?t.a.a.c:0}function fn(t,e){return t.b?t=t.b==e:t.a?(e=on(e),t=Ce(t.a.a.b,e)):t=!1,t}function dn(t,e){t.a?t.a.add(e):t.b=e}function pn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=on(e),n=Ce(t.a.a.b,n)),n&&ke(t.a.a,on(e)))}function mn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return E(t.a.C(),(function(t){e=e.concat(t.j)})),e}return S(t.c)}function gn(){}function vn(){this.a=new gn}function yn(t,e,n){var r=n||"";try{xe(t,(function(t,n){var i=t;h(t)&&(i=St(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function bn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}sn.prototype.cancel=function(){this.c=mn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(E(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},gn.prototype.stringify=function(t){return r.JSON.stringify(t,void 0)},gn.prototype.parse=function(t){return r.JSON.parse(t,void 0)};var wn=r.JSON.parse;function _n(t){Et.call(this),this.headers=new Ie,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=En,this.D=this.F=!1}b(_n,Et);var En="",Tn=/^https?$/i,Sn=["POST","PUT"];function xn(t){return"content-type"==t.toLowerCase()}function In(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,kn(t),Cn(t)}function kn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function An(t){if(t.b&&void 0!==n&&(!t.s[1]||4!=Mn(t)||2!=t.T()))if(t.l&&4==Mn(t))Ut(t.Da,0,t);else if(t.dispatchEvent("readystatechange"),4==Mn(t)){t.b=!1;try{var e,i=t.T();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var a;if(a=0===i){var s=String(t.A).match(Ne)[1]||null;if(!s&&r.self&&r.self.location){var u=r.self.location.protocol;s=u.substr(0,u.length-1)}a=!Tn.test(s?s.toLowerCase():"")}e=a}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<Mn(t)?t.a.statusText:""}catch(t){c=""}t.f=c+" ["+t.T()+"]",kn(t)}}finally{Cn(t)}}}function Cn(t,e){if(t.a){Nn(t);var n=t.a,r=t.s[0]?s:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Nn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(r.clearTimeout(t.m),t.m=null)}function Mn(t){return t.a?t.a.readyState:0}function Pn(t,e){return t.a?t.a.getResponseHeader(e):null}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return P(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),i(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var o=""}else o=t.substring(r+1,n);n=(t=[t.substr(0,r),o,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Be(t,e,n),t}function Dn(t){this.f=[],this.F=new nn,this.ga=this.oa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Pa=this.P=0,this.Na=!!a("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.na=!0,this.m=this.qa=this.O=-1,this.S=this.v=this.A=0,this.Ma=a("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Qa=a("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Oa=a("internalChannelParams.forwardChannelMaxRetries",t)||2,this.pa=a("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ja=t&&t.yb||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new sn(t&&t.concurrentRequestLimit),this.ja=new vn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.na=!1),this.fa=void 0}function Rn(t){if(On(t),3==t.u){var e=t.P++,n=Pe(t.B);Be(n,"SID",t.H),Be(n,"RID",e),Be(n,"TYPE","terminate"),jn(t,n),(e=new le(t,e,void 0)).F=2,e.f=Fe(Pe(n)),n=!1,r.navigator&&r.navigator.sendBeacon&&(n=r.navigator.sendBeacon(e.f.toString(),"")),!n&&r.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=y(),be(e)}Kn(t)}function On(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(r.clearTimeout(t.l),t.l=null),Hn(t),t.b.cancel(),t.h&&(o(t.h)&&r.clearTimeout(t.h),t.h=null)}function Bn(t,e){t.f.push(new an(t.Pa++,e)),3==t.u&&Un(t)}function Un(t){ln(t.b)||t.h||(t.h=!0,Pt(t.Ga,t),t.A=0)}function Fn(t,e){var n;n=e?e.W:t.P++;var r=Pe(t.B);Be(r,"SID",t.H),Be(r,"RID",n),Be(r,"AID",t.O),jn(t,r),t.g&&t.i&&Ln(r,t.g,t.i),n=new le(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=qn(t,n,1e3),n.setTimeout(Math.round(.5*t.pa)+Math.round(.5*t.pa*Math.random())),dn(t.b,n),pe(n,r,e)}function jn(t,e){t.c&&xe({},(function(t,n){Be(e,n,t)}))}function qn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?g(t.c.Ra,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{yn(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Vn(t){t.a||t.l||(t.S=1,Pt(t.Fa,t),t.v=0)}function $n(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=Xt(g(t.Fa,t),Gn(t,t.v)),t.v++,!0)}function zn(t,e,n){var r=e.l;r&&cn(t.b,r),t.ia=t.na&&n,t.m=e.c,t.B=Zn(t,null,t.ha),Un(t)}function Hn(t){null!=t.s&&(r.clearTimeout(t.s),t.s=null)}function Gn(t,e){var n=t.Ma+Math.floor(Math.random()*t.Qa);return t.la()||(n*=2),n*e}function Wn(t,e){if(2==e){var n=null;t.c&&(n=null);var i=g(t.cb,t);n||(n=new Me("//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||Le(n,"https"),Fe(n)),function(t,e){var n=new Ht;if(r.Image){var i=new Image;i.onload=v(bn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=v(bn,n,i,"TestLoadImage: error",!1,e),i.onabort=v(bn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=v(bn,n,i,"TestLoadImage: timeout",!1,e),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Yt(2);t.u=0,t.c&&t.c.sa(e),Kn(t),On(t)}function Kn(t){t.u=0,t.m=-1,t.c&&(0==mn(t.b).length&&0==t.f.length||(t.b.c.length=0,S(t.f),t.f.length=0),t.c.ra())}function Zn(t,e,n){var i=function(t){return t instanceof Me?Pe(t):new Me(t,void 0)}(n);if(""!=i.c)e&&De(i,e+"."+i.c),Re(i,i.h);else{var o=r.location;i=function(t,e,n,r){var i=new Me(null,void 0);return t&&Le(i,t),e&&De(i,e),n&&Re(i,n),r&&(i.g=r),i}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,n)}return t.V&&P(t.V,(function(t,e){Be(i,e,t)})),e=t.j,n=t.I,e&&n&&Be(i,e,n),Be(i,"VER",t.va),jn(t,i),i}function Qn(){}function Yn(){if(j&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function Jn(t,e){Et.call(this),this.a=new Dn(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))e=i;else(r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.wa&&(t?t["X-WebChannel-Client-Profile"]=e.wa:t={"X-WebChannel-Client-Profile":e.wa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!x(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!x(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new er(this)}function Xn(t){se.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function tr(){ue.call(this),this.status=1}function er(t){this.a=t}(e=_n.prototype).ca=function(t,e,n,a){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?re(this.H):re(oe),this.a.onreadystatechange=g(this.Da,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void In(this,t)}t=n||"";var s=new Ie(this.headers);a&&xe(a,(function(t,e){s.set(e,t)})),a=function(t){t:{for(var e=xn,n=t.length,r=i(t)?t.split(""):t,o=0;o<n;o++)if(o in r&&e.call(void 0,r[o],o,t)){e=o;break t}e=-1}return 0>e?null:i(t)?t.charAt(e):t[e]}(s.K()),n=r.FormData&&t instanceof r.FormData,!(0<=_(Sn,e))||a||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Nn(this),0<this.o&&((this.D=function(t){return j&&Y(9)&&o(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.Aa,this)):this.m=Ut(this.Aa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){In(this,t)}},e.Aa=function(){void 0!==n&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cn(this))},e.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Cn(this,!0)),_n.N.G.call(this)},e.Da=function(){this.j||(this.w||this.l||this.g?An(this):this.Ya())},e.Ya=function(){An(this)},e.T=function(){try{return 2<Mn(this)?this.a.status:-1}catch(t){return-1}},e.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},e.Ta=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wn(e)}},e.xa=function(){return this.h},e.Wa=function(){return i(this.f)?this.f:String(this.f)},(e=Dn.prototype).va=8,e.u=1,e.Ba=function(){return 0==this.u},e.Ga=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new le(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?R(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var o=e=0;o<this.f.length;o++){var a=this.f[o];if(void 0===(a="__data__"in a.a&&i(a=a.a.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=o;break t}if(4096===e||o===this.f.length-1){e=o+1;break t}}e=1e3}else e=1e3;e=qn(this,n,e),Be(o=Pe(this.B),"RID",t),Be(o,"CVER",22),this.o&&this.j&&Be(o,"X-HTTP-Session-Id",this.j),jn(this,o),this.g&&r&&Ln(o,this.g,r),dn(this.b,n),this.W?(Be(o,"$req",e),Be(o,"SID","null"),n.S=!0,pe(n,o,null)):pe(n,o,e),this.u=2}}else 3==this.u&&(t?Fn(this,t):0==this.f.length||ln(this.b)||Fn(this))},e.Fa=function(){this.l=null,this.a=new le(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Pe(this.oa);Be(t,"RID","rpc"),Be(t,"SID",this.H),Be(t,"CI",this.ia?"0":"1"),Be(t,"AID",this.O),jn(this,t),Be(t,"TYPE","xmlhttp"),this.g&&this.i&&Ln(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),me(this.a,t,!0,this.ga)},e.Ea=function(t,e){if(0!=this.u&&(this.a==t||fn(this.b,t)))if(this.m=t.o,!t.s&&fn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(c(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Hn(this),this.a.cancel(),this.a=null}$n(this),Yt(18)}}else this.qa=e[1],0<this.qa-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=Xt(g(this.Xa,this),6e3));if(1>=hn(this.b)&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else Wn(this,11)}else if((t.s||this.a==t)&&Hn(this),!x(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.va=i),null!=(r=r[5])&&o(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Pn(r,"X-Client-Wire-Protocol"))&&cn(this.b,i),this.j&&(r=Pn(r,"X-HTTP-Session-Id")))&&(this.I=r,Be(this.B,this.j,r)),this.u=3,this.c&&this.c.ua(),r=t,this.oa=Zn(this,this.Y()?this.ga:null,this.ha),r.s?(pn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(_e(r),be(r)),this.a=r):Vn(this),0<this.f.length&&Un(this)}else"stop"!=r[0]&&"close"!=r[0]||Wn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Wn(this,7):Rn(this):"noop"!=r[0]&&this.c&&this.c.ta(r),this.v=0)}},e.Xa=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,$n(this),Yt(19))},e.ma=function(t){var e=null;if(this.a==t){Hn(this),this.a=null;var n=2}else{if(!fn(this.b,t))return;e=t.j,pn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)if(1==n){e=t.l?t.l.length:0,t=y()-t.v;var r=this.A;(n=Wt()).dispatchEvent(new Jt(n,e,t,r)),Un(this)}else Vn(this);else if(3==(r=t.c)||0==r&&0<this.m||!(1==n&&function(t,e){return!(hn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.f=e.j.concat(t.f),!0):!(1==t.u||2==t.u||t.A>=(t.Na?0:t.Oa))&&(t.h=Xt(g(t.Ga,t,e),Gn(t,t.A)),t.A++,!0))}(this,t)||2==n&&$n(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Wn(this,5);break;case 4:Wn(this,10);break;case 3:Wn(this,6);break;default:Wn(this,2)}},e.cb=function(t){Yt(t?2:1)},e.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new _n(this.Ja)).F=this.R,t},e.la=function(){return!!this.c&&!0},e.Y=function(){return this.R},(e=Qn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.Ra=function(){},Yn.prototype.a=function(t,e){return new Jn(t,e)},b(Jn,Et),(e=Jn.prototype).addEventListener=function(t,e,n,r){Jn.N.addEventListener.call(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){Jn.N.removeEventListener.call(this,t,e,n,r)},e.Ua=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Yt(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new tn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Ln(e,t.g,t.i)),(t=t.w).i=n,e=Zn(t.a,null,t.i),Yt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,en(t)):(Ue(e,"MODE","init"),!t.a.o&&t.a.j&&Ue(e,"X-HTTP-Session-Id",t.a.j),t.b=new le(t,void 0,void 0),t.b.h=t.h,me(t.b,e,!1,null),t.M=0)},e.close=function(){Rn(this.a)},e.Va=function(t){if(i(t)){var e={};e.__data__=t,Bn(this.a,e)}else this.h?((e={}).__data__=St(t),Bn(this.a,e)):Bn(this.a,t)},e.G=function(){this.a.c=null,delete this.f,Rn(this.a),delete this.a,Jn.N.G.call(this)},b(Xn,se),b(tr,ue),b(er,Qn),er.prototype.ua=function(){this.a.dispatchEvent("a")},er.prototype.ta=function(t){this.a.dispatchEvent(new Xn(t))},er.prototype.sa=function(t){this.a.dispatchEvent(new tr(t))},er.prototype.ra=function(){this.a.dispatchEvent("b")};var nr=v((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),Yn);Yn.prototype.createWebChannel=Yn.prototype.a,Jn.prototype.send=Jn.prototype.Va,Jn.prototype.open=Jn.prototype.Ua,Jn.prototype.close=Jn.prototype.close,te.NO_ERROR=0,te.TIMEOUT=8,te.HTTP_ERROR=6,ee.COMPLETE="complete",ie.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",Et.prototype.listen=Et.prototype.ya,_n.prototype.listenOnce=_n.prototype.za,_n.prototype.getLastError=_n.prototype.Wa,_n.prototype.getLastErrorCode=_n.prototype.xa,_n.prototype.getStatus=_n.prototype.T,_n.prototype.getResponseJson=_n.prototype.Ta,_n.prototype.getResponseText=_n.prototype.aa,_n.prototype.send=_n.prototype.ca,t.exports={createWebChannelTransport:nr,ErrorCode:te,EventType:ee,WebChannel:ie,XhrIo:_n}}).call(void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),$t=(Vt.createWebChannelTransport,Vt.ErrorCode,Vt.EventType,Vt.WebChannel,Vt.XhrIo,xt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(Nt),i=r.SDK_VERSION,o=new Ct.Logger("@firebase/firestore");
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function a(){return o.logLevel===Ct.LogLevel.DEBUG?n.DEBUG:o.logLevel===Ct.LogLevel.SILENT?n.SILENT:n.ERROR}function s(t){switch(t){case n.DEBUG:o.logLevel=Ct.LogLevel.DEBUG;break;case n.ERROR:o.logLevel=Ct.LogLevel.ERROR;break;case n.SILENT:o.logLevel=Ct.LogLevel.SILENT;break;default:o.error("Firestore ("+i+"): Invalid value passed to `setLogLevel`")}}function u(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(o.logLevel<=Ct.LogLevel.DEBUG){var a=n.map(l);o.debug.apply(o,It.__spreadArrays(["Firestore ("+i+") ["+t+"]: "+e],a))}}function c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(o.logLevel<=Ct.LogLevel.ERROR){var r=e.map(l);o.error.apply(o,It.__spreadArrays(["Firestore ("+i+"): "+t],r))}}function l(t){if("string"==typeof t)return t;var e=d.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function h(t){var e="FIRESTORE ("+i+") INTERNAL ASSERTION FAILED: "+t;throw c(e),new Error(e)}function f(t,e){t||h(e)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(n||(n={}));var d=function(){function t(){}return t.setPlatform=function(e){t.platform&&h("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||h("Platform not set"),t.platform},t}();function p(){return d.getPlatform().emptyByteString}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},g=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return It.__extends(e,t),e}(Error);
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function v(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new g(m.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function b(t,e){return void 0!==t?t:e}function w(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function _(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function E(t){for(var e in f(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function T(t,e){if(0!==e.length)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+$(e.length,"argument")+".")}function S(t,e,n){if(e.length!==n)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires "+$(n,"argument")+", but was called with "+$(e.length,"argument")+".")}function x(t,e,n){if(e.length<n)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires at least "+$(n,"argument")+", but was called with "+$(e.length,"argument")+".")}function I(t,e,n,r){if(e.length<n||e.length>r)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+$(e.length,"argument")+".")}function k(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+$(r,"element")+".")}function A(t,e,n,r){R(t,e,V(n)+" argument",r)}function C(t,e,n,r){void 0!==r&&A(t,e,n,r)}function N(t,e,n,r){R(t,e,n+" option",r)}function M(t,e,n,r){void 0!==r&&N(t,e,n,r)}function P(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+B(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+B(r[o]))}(t,e,n,r,i)}function L(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(B(u))}var c=B(r);throw new g(m.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function D(t,e,n,r){if(!e.some((function(t){return t===r})))throw new g(m.INVALID_ARGUMENT,"Invalid value "+B(r)+" provided to function "+t+"() for its "+V(n)+" argument. Acceptable values: "+e.join(", "))}function R(t,e,n,r){if(!("object"===e?O(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=B(r);throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function O(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function B(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":h("Unknown wrong type: "+typeof t)}function U(t,e,n){if(void 0===n)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+V(e)+" argument, but it was undefined.")}function F(t,e,n){_(e,(function(e,r){if(n.indexOf(e)<0)throw new g(m.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function j(t,e,n,r){var i=B(r);return new g(m.INVALID_ARGUMENT,"Function "+t+"() requires its "+V(n)+" argument to be a "+e+", but it was: "+i)}function q(t,e,n){if(n<=0)throw new g(m.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+V(e)+" argument to be a positive number, but it was: "+n+".")}function V(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function $(t,e){return t+" "+e+(1===t?"":"s")}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var z=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return f(20===e.length,"Invalid auto ID: "+e),e},t}();function H(t,e){return t<e?-1:t>e?1:0}function G(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function W(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function K(){if("undefined"==typeof Uint8Array)throw new g(m.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Z(){if(!d.getPlatform().base64Available)throw new g(m.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Q,Y=function(){function t(t){Z(),this._binaryString=t}return t.fromBase64String=function(e){S("Blob.fromBase64String",arguments,1),A("Blob.fromBase64String","string",1,e),Z();try{var n=d.getPlatform().atob(e);return new t(n)}catch(t){throw new g(m.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(S("Blob.fromUint8Array",arguments,1),K(),!(e instanceof Uint8Array))throw j("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,(function(t){return String.fromCharCode(t)})).join("");return new t(n)},t.prototype.toBase64=function(){return S("Blob.toBase64",arguments,0),Z(),d.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){S("Blob.toUint8Array",arguments,0),K();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._approximateByteSize=function(){return 2*this._binaryString.length},t.prototype._compareTo=function(t){return H(this._binaryString,t._binaryString)},t}(),J=v(Y,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),X=function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},tt=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return H(this.projectId,t.projectId)||H(this.database,t.database)},t}(),et=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),nt=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&h("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&h("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,f(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return f(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return f(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return f(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new g(m.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.EMPTY_PATH=new e([]),e}(nt),it=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return it.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new g(m.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new g(m.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new g(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new g(m.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(nt),at=function(){function t(e){this.path=e,f(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===rt.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return rt.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new rt(e.slice()))},t.fromPathString=function(e){return new t(rt.fromString(e))},t.EMPTY=new t(new rt([])),t}(),st=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction"}(Q||(Q={}));var ut=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new g(m.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),ct=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(t){})):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then((function(){return e.operationInProgress=!0,t().catch((function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw c("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.operationInProgress=!1,t}))}));return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),f(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var i=ut.createAndSchedule(this,t,e,n,(function(t){return r.removeDelayedOperation(t)}));return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&h("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){f(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then((function(){f(t===Q.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==Q.All&&i.timerId===t)break}return e.drain()}))},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);f(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}();function lt(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ft(e)),e=ht(t.get(n),e);return ft(e)}function ht(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ft(t){return t+""}function dt(t){var e=t.length;if(f(e>=2,"Invalid path "+t),2===e)return f(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),rt.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&h('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:h('Invalid encoded resource path: "'+t+'"')}o=a+2}return new rt(r)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var pt=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new g(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new g(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new g(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new g(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?H(this.nanoseconds,t.nanoseconds):H(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),mt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new pt(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new pt(0,0)),t}(),gt=function(){function t(t,e){this.comparator=t,this.root=e||yt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new vt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new vt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new vt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new vt(this.root,t,this.comparator,!0)},t}(),vt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){f(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),yt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw h("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw h("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw h("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),bt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw h("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw h("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw h("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw h("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw h("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new yt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */yt.EMPTY=new bt;
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var wt=function(){function t(t){this.comparator=t,this.data=new gt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach((function(t){n=n.add(t)})),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new _t(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new _t(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),_t=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Et=new gt(at.comparator);function Tt(){return Et}function St(){return Tt()}var xt=new gt(at.comparator);function Mt(){return xt}var Pt=new gt(at.comparator);function Lt(){return Pt}var Dt=new wt(at.comparator);function Rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Dt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ot=new wt(H);function Bt(){return Ot}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ut=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,f(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&f(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;f(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},t.prototype.applyToLocalView=function(t,e){e&&f(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(t)&&(e=s.applyToLocalView(e,e,this.localWriteTime))}for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Rt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&G(this.mutations,t.mutations)&&G(this.baseMutations,t.baseMutations)},t}(),Ft=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){f(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Lt(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),jt=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&h("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++){r(o[i])}return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),qt="SimpleDb",$t=function(){function t(e){this.db=e,12.2===t.getIOSVersion(kt.getUA())&&c("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return f(t.isAvailable(),"IndexedDB not supported in current environment."),u(qt,"Opening database:",e),new jt((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new g(m.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new g(m.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(t){u(qt,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,Je).next((function(){u(qt,"Database upgrade to version "+Je+" complete")}))}})).toPromise()},t.delete=function(t){return u(qt,"Removing database:",t),Wt(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=kt.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},t.getStore=function(t,e){return t.store(e)},t.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return It.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,s,c;return It.__generator(this,(function(l){switch(l.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),o=0,a=function(){var t,a,c,l;return It.__generator(this,(function(h){switch(h.label){case 0:++o,t=Ht.open(s.db,r?"readonly":"readwrite",e),h.label=1;case 1:return h.trys.push([1,3,,4]),(a=n(t).catch((function(e){return t.abort(e),jt.reject(e)})).toPromise()).catch((function(){})),[4,t.completionPromise];case 2:return h.sent(),[2,{value:a}];case 3:return c=h.sent(),l=i&&"FirebaseError"!==c.name&&o<3,u(qt,"Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),zt=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Wt(this.dbCursor.delete())},t}(),Ht=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new st,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=Zt(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(u(qt,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return f(!!e,"Object store not part of transaction: "+t),new Gt(e)},t}(),Gt=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(u(qt,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(u(qt,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Wt(n)},t.prototype.add=function(t){return u(qt,"ADD",this.store.name,t,t),Wt(this.store.add(t))},t.prototype.get=function(t){var e=this;return Wt(this.store.get(t)).next((function(n){return void 0===n&&(n=null),u(qt,"GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return u(qt,"DELETE",this.store.name,t),Wt(this.store.delete(t))},t.prototype.count=function(){return u(qt,"COUNT",this.store.name),Wt(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.deleteAll=function(t,e){u(qt,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(t,e,n){return n.delete()}))},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new jt((function(n,r){e.onerror=function(t){var e=Zt(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.iterateCursor=function(t,e){var n=[];return new jt((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new zt(i),a=e(i.primaryKey,i.value,o);if(a instanceof jt){var s=a.catch((function(t){return o.done(),jt.reject(t)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return jt.waitFor(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(f(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Wt(t){return new jt((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Zt(t.target.error);n(e)}}))}var Kt=!1;function Zt(t){var e=$t.getIOSVersion(kt.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new g("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Kt||(Kt=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qt=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return f(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return te(t).iterate({index:rn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next((function(e){return e.lastStreamToken=Xt(n),ne(t).put(e)}))},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next((function(t){return t.lastStreamToken}))},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next((function(n){return n.lastStreamToken=Xt(e),ne(t).put(n)}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ee(t),a=te(t);return a.add({}).next((function(s){f("number"==typeof s,"Auto-generated key is not a number");for(var u=new Ut(s,e,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new wt((function(t,e){return H(t.canonicalString(),e.canonicalString())})),d=0,p=r;d<p.length;d++){var m=p[d],g=on.key(i.userId,m.key.path,s);h=h.add(m.key.path.popLast()),l.push(a.put(c)),l.push(o.put(g,on.PLACEHOLDER))}return h.forEach((function(e){l.push(i.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),jt.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return te(t).get(e).next((function(t){return t?(f(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null}))},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?jt.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return te(t).iterate({index:rn.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(f(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return te(t).iterate({index:rn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return te(t).loadAll(rn.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.fromDbMutationBatch(t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=on.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ee(t).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=dt(u);if(s===n.userId&&e.path.isEqual(l))return te(t).get(c).next((function(t){if(!t)throw h("Dangling document-mutation reference found: "+r+" which points to "+c);f(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new wt(H),i=[];return e.forEach((function(e){var o=on.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=ee(t).iterate({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=dt(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),jt.waitFor(i).next((function(){return n.lookupMutationBatches(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;f(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),f(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=on.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new wt(H);return ee(t).iterate({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=dt(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(t,s)}))},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(te(t).get(e).next((function(t){if(null===t)throw h("Dangling document-mutation reference found, which points to "+e);f(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))})))})),jt.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Jt(t.simpleDbTransaction,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.removeCachedMutationKeys(e.batchId)})),jt.forEach(r,(function(e){return n.referenceDelegate.removeMutationReference(t,e)}))}))},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return jt.resolve();var r=IDBKeyRange.lowerBound(on.prefixForUser(e.userId)),i=[];return ee(t).iterate({range:r},(function(t,n,r){if(t[0]===e.userId){var o=dt(t[1]);i.push(o)}else r.done()})).next((function(){f(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.canonicalString()})))}))}))},t.prototype.containsKey=function(t,e){return Yt(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return ne(t).get(this.userId).next((function(t){return t||new nn(e.userId,-1,"")}))},t}();function Yt(t,e,n){var r=on.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return ee(t).iterate({range:o,keysOnly:!0},(function(t,n,r){var o=t[0],s=t[1];t[2];o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Jt(t,e,n){var r=t.store(rn.store),i=t.store(on.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){f(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],p=on.key(e,d.key.path,n.batchId);o.push(i.delete(p)),c.push(d.key)}return jt.waitFor(o).next((function(){return c}))}function Xt(t){return t instanceof Uint8Array?(f($t.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function te(t){return qn.getStore(t,rn.store)}function ee(t){return qn.getStore(t,on.store)}function ne(t){return qn.getStore(t,nn.store)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var re;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(re||(re={}));var ie=function(){function t(t,e){this.generatorId=t,f((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},t.prototype.after=function(t){return this.seek(t+2),this.next()},t.prototype.seek=function(t){f((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forTargetCache=function(){return new t(re.QueryCache,2)},t.forSyncEngine=function(){return new t(re.SyncEngine)},t}(),oe=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=ie.forTargetCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next((function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next((function(t){return mt.fromTimestamp(new pt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return ue(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.saveTargetData(t,e).next((function(){return n.retrieveMetadata(t).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(e,r),n.saveMetadata(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.saveTargetData(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return ae(t).delete(e.targetId)})).next((function(){return n.retrieveMetadata(t)})).next((function(e){return f(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.saveMetadata(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ae(t).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return jt.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){var n=this;return ae(t).iterate((function(t,r){var i=n.serializer.fromDbTarget(r);e(i)}))},t.prototype.retrieveMetadata=function(t){return se(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,qn.getStore(n,fn.store)).put(fn.key,e);var n},t.prototype.saveTargetData=function(t,e){return ae(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromTargetData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.retrieveMetadata(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ae(t).iterate({range:i,index:ln.queryTargetsIndexName},(function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=ce(t);return e.forEach((function(e){var a=lt(e.path);i.push(o.put(new hn(n,a))),i.push(r.referenceDelegate.addReference(t,e))})),jt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=ce(t);return jt.forEach(e,(function(e){var o=lt(e.path);return jt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ce(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ce(t),i=Rt();return r.iterate({range:n,keysOnly:!0},(function(t,e,n){var r=dt(t[1]),o=new at(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=lt(e.path),r=IDBKeyRange.bound([n],[W(n)],!1,!0),i=0;return ce(t).iterate({index:hn.documentTargetsIndex,keysOnly:!0,range:r},(function(t,e,n){var r=t[0];t[1];0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.getTargetDataForTarget=function(t,e){var n=this;return ae(t).get(e).next((function(t){return t?n.serializer.fromDbTarget(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ae(t){return qn.getStore(t,ln.store)}function se(t){return $t.getStore(t,fn.store).get(fn.key).next((function(t){return f(null!==t,"Missing metadata row."),t}))}function ue(t){return se(t).next((function(t){return t.highestListenSequenceNumber}))}function ce(t){return qn.getStore(t,hn.store)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var le,he=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new wt(ot.comparator);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach((function(n){n.isPrefixOf(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),fe=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),de=function(t,e){this.version=t,this.transformResults=e};!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t[t.Verify=4]="Verify"}(le||(le={}));var pe,me,ge=function(){function t(t,e){this.updateTime=t,this.exists=e,f(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof je&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof je:(f(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),ve=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&f(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof je?t.version:mt.MIN},t}(),ye=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=le.Set,i}return It.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),f(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new je(this.key,n,{hasCommittedMutations:!0},this.value)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ve.getPostMutationVersion(t);return new je(this.key,r,{hasLocalMutations:!0},this.value)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(ve),be=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=le.Patch,o}return It.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),f(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new Ve(this.key,e.version);var n=this.patchDocument(t);return new je(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ve.getPostMutationVersion(t),i=this.patchDocument(t);return new je(this.key,r,{hasLocalMutations:!0},i)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof je?t.data():Be.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}})),t},e}(ve),we=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=le.Transform,r.precondition=ge.exists(!0),r}return It.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),f(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new Ve(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data(),r);return new je(this.key,i,{hasCommittedMutations:!0},o)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data(),i);return new je(this.key,r.version,{hasLocalMutations:!0},o)},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof je?t.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(e=null==e?Be.EMPTY.set(i.field,a):e.set(i.field,a))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&G(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){return f(t instanceof je,"Unknown MaybeDocument type "+t),f(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.serverTransformResults=function(t,e){var n=[];f(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof je&&(a=t.field(i.field)),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;e instanceof je&&(u=e.field(a.field)),null===u&&n instanceof je&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,t))}return r},e.prototype.transformObject=function(t,e){f(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},e}(ve),_e=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=le.Delete,r}return It.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),f(null==e.transformResults,"Transform results received by DeleteMutation."),new qe(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&f(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new qe(this.key,mt.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ve),Ee=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=le.Verify,r}return It.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){h("VerifyMutation should only be used in Transactions.")},e.prototype.applyToLocalView=function(t,e,n){h("VerifyMutation should only be used in Transactions.")},e.prototype.extractBaseValue=function(t){h("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ve);!function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(pe||(pe={})),function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(me||(me={}));var Te=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(me.Estimate,n);case"previous":return new t(me.Previous,n);case"none":case void 0:return new t(me.Default,n);default:return h("fromSnapshotOptions() called with invalid options.")}},t}(),Se=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return f(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),H(this.typeOrder,t.typeOrder)},t}(),xe=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=pe.NullValue,e.internalValue=null,e}return It.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 4},e.INSTANCE=new e,e}(Se),Ie=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.BooleanValue,n}return It.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?H(this,t):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 4},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Se),ke=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.NumberValue,n}return It.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue,r=t.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(t);var n,r},e.prototype.approximateByteSize=function(){return 8},e}(Se);function Ae(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ae(this.internalValue,t.internalValue)},e}(ke),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ae(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(ke),Me=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.StringValue,n}return It.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?H(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 2*this.internalValue.length},e}(Se),Pe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.TimestampValue,n}return It.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Le?-1:this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 16},e}(Se),Le=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=pe.TimestampValue,r}return It.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===me.Estimate?new Pe(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===me.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Pe?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},e}(Se),De=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.BlobValue,n}return It.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},e}(Se),Re=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=pe.RefValue,r}return It.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:at.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},e}(Se),Oe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.GeoPointValue,n}return It.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 16},e}(Se),Be=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.ObjectValue,n}return It.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal((function(n,r){e[n]=r.value(t)})),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=H(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return H(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(f(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(f(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){f(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach((function(t){n=n instanceof e?n.internalValue.get(t):null})),n},e.prototype.fieldMask=function(){var t=new wt(ot.comparator);return this.internalValue.forEach((function(n,r){var i=new ot([n]);if(r instanceof e){var o=r.fieldMask().fields;o.isEmpty()?t=t.add(i):o.forEach((function(e){t=t.add(i.child(e))}))}else t=t.add(i)})),he.fromSet(t)},e.prototype.approximateByteSize=function(){var t=0;return this.internalValue.inorderTraversal((function(e,n){t+=e.length+n.approximateByteSize()})),t},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new gt(H)),e}(Se),Ue=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.ArrayValue,n}return It.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++){if(n[e].isEqual(t))return!0}return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return H(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.internalValue.reduce((function(t,e){return t+e.approximateByteSize()}),0)},e.prototype.toString=function(){return"["+this.internalValue.map((function(t){return t.toString()})).join(",")+"]"},e}(Se),Fe=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return at.comparator(t.key,e.key)},t}(),je=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,f(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return It.__extends(e,t),e.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);if(void 0===n){var r=this.getProtoField(t);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(e,n)}return n},e.prototype.data=function(){var t=this;if(!this.objectValue){var e=Be.EMPTY;_(this.proto.fields||{},(function(n,r){e=e.set(new ot([n]),t.converter(r))})),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.getProtoField=function(t){f(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):h("Trying to compare documents on fields that don't exist")},e}(Fe),qe=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return It.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Fe),Ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Fe),$e=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){_(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return E(this.inner)},t}(),ze=function(){function t(){this.changes=new $e((function(t){return t.toString()})),this.changesApplied=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return f(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){f(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},t.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?jt.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){f(!this.changesApplied,"Changes have already been applied.")},t}(),He=function(){function t(t,e){this.serializer=t,this.indexManager=e}return t.prototype.addEntry=function(t,e,n){return We(t).put(Ke(e),n)},t.prototype.removeEntry=function(t,e){var n=We(t),r=Ke(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.setMetadata(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return We(t).get(Ke(e)).next((function(t){return n.maybeDecodeDocument(t)}))},t.prototype.getSizedEntry=function(t,e){var n=this;return We(t).get(Ke(e)).next((function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:Ze(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=St();return this.forEachDbEntry(t,e,(function(t,e){var i=n.maybeDecodeDocument(e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.getSizedEntries=function(t,e){var n=this,r=St(),i=new gt(at.comparator);return this.forEachDbEntry(t,e,(function(t,e){var o=n.maybeDecodeDocument(e);o?(r=r.insert(t,o),i=i.insert(t,Ze(e))):(r=r.insert(t,null),i=i.insert(t,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return jt.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return We(t).iterate({range:r},(function(t,e,r){for(var a=at.fromSegments(t);o&&at.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this;f(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Mt(),o=e.path.length+1,a={};if(n.isEqual(mt.MIN)){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=un.collectionReadTimeIndex}return We(t).iterate(a,(function(t,n,a){if(t.length===o){var s=r.serializer.fromDbRemoteDocument(n);e.path.isPrefixOf(s.key.path)?s instanceof je&&e.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.getNewDocumentChanges=function(t,e){var n=this,r=Tt(),i=this.serializer.toDbTimestampKey(e),o=We(t),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:un.readTimeIndex,range:a},(function(t,e){var o=n.serializer.fromDbRemoteDocument(e);r=r.insert(o.key,o),i=e.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},t.prototype.getLastReadTime=function(t){var e=this,n=We(t),r=mt.MIN;return n.iterate({index:un.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.fromDbTimestampKey(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ge(t).get(cn.key).next((function(t){return f(!!t,"Missing document cache metadata"),t}))},t.prototype.setMetadata=function(t,e){return Ge(t).put(cn.key,e)},t.prototype.maybeDecodeDocument=function(t){if(t){var e=this.serializer.fromDbRemoteDocument(t);return e instanceof qe&&e.version.isEqual(mt.forDeletedDoc())?null:e}return null},t.RemoteDocumentChangeBuffer=function(t){function e(e,n){var r=t.call(this)||this;return r.documentCache=e,r.trackRemovals=n,r.documentSizes=new $e((function(t){return t.toString()})),r}return It.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new wt((function(t,e){return H(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.documentSizes.get(o);if(f(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){f(!e.readTime.isEqual(mt.MIN),"Cannot add a document with a read time of zero");var u=e.documentCache.serializer.toDbRemoteDocument(a,e.readTime);i=i.add(o.path.popLast());var c=Ze(u);r+=c-s,n.push(e.documentCache.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=e.documentCache.serializer.toDbRemoteDocument(new qe(o,mt.forDeletedDoc()),e.readTime);n.push(e.documentCache.addEntry(t,o,l))}else n.push(e.documentCache.removeEntry(t,o))})),i.forEach((function(r){n.push(e.documentCache.indexManager.addToCollectionParentIndex(t,r))})),n.push(this.documentCache.updateMetadata(t,r)),jt.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next((function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next((function(t){var e=t.maybeDocuments;return t.sizeMap.forEach((function(t,e){n.documentSizes.set(t,e)})),e}))},e}(ze),t}();function Ge(t){return qn.getStore(t,cn.store)}function We(t){return qn.getStore(t,un.store)}function Ke(t){return t.path.toArray()}function Ze(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw h("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qe=function(){function t(){this.collectionParentIndex=new Ye}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),jt.resolve()},t.prototype.getCollectionParents=function(t,e){return jt.resolve(this.collectionParentIndex.getEntries(e))},t}(),Ye=function(){function t(){this.index={}}return t.prototype.add=function(t){f(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new wt(rt.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new wt(rt.comparator)).toArray()},t}(),Je=9,Xe=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;f(n<r&&n>=0&&r<=Je,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Ht(e);n<1&&r>=1&&(function(t){t.createObjectStore(en.store)}(t),function(t){t.createObjectStore(nn.store,{keyPath:nn.keyPath}),t.createObjectStore(rn.store,{keyPath:rn.keyPath,autoIncrement:!0}).createIndex(rn.userMutationsIndex,rn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(on.store)}(t),pn(t),function(t){t.createObjectStore(un.store)}(t));var a=jt.resolve();return n<3&&r>=3&&(0!==n&&(!function(t){t.deleteObjectStore(hn.store),t.deleteObjectStore(ln.store),t.deleteObjectStore(fn.store)}(t),pn(t)),a=a.next((function(){return function(t){var e=t.store(fn.store),n=new fn(0,0,mt.MIN.toTimestamp(),0);return e.put(fn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(rn.store).loadAll().next((function(n){t.deleteObjectStore(rn.store),t.createObjectStore(rn.store,{keyPath:rn.keyPath,autoIncrement:!0}).createIndex(rn.userMutationsIndex,rn.userMutationsKeyPath,{unique:!0});var r=e.store(rn.store),i=n.map((function(t){return r.put(t)}));return jt.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(mn.store,{keyPath:mn.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(cn.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(un.store);e.createIndex(un.readTimeIndex,un.readTimeIndexPath,{unique:!1}),e.createIndex(un.collectionReadTimeIndex,un.collectionReadTimeIndexPath,{unique:!1})}(e)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(un.store).iterate((function(t,n){e+=Ze(n)})).next((function(){var n=new cn(e);return t.store(cn.store).put(cn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(nn.store),r=t.store(rn.store);return n.loadAll().next((function(n){return jt.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(rn.userMutationsIndex,i).next((function(r){return jt.forEach(r,(function(r){f(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return Jt(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(hn.store),n=t.store(un.store);return ue(t).next((function(t){var r=[];return n.iterate((function(n,i){var o=new rt(n),a=function(t){return[0,lt(t)]}(o);r.push(e.get(a).next((function(n){return n?jt.resolve():function(n){return e.put(new hn(0,lt(n),t))}(o)})))})).next((function(){return jt.waitFor(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(dn.store,{keyPath:dn.keyPath});var n=e.store(dn.store),r=new Ye,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:lt(i)})}};return e.store(un.store).iterate({keysOnly:!0},(function(t,e){var n=new rt(t);return i(n.popLast())})).next((function(){return e.store(on.store).iterate({keysOnly:!0},(function(t,e){t[0];var n=t[1],r=(t[2],dt(n));return i(r.popLast())}))}))},t}();var tn=function(t,e){this.seconds=t,this.nanoseconds=e},en=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();var nn=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),rn=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();var on=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,lt(e)]},t.key=function(t,e,n){return[t,lt(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();var an=function(t,e){this.path=t,this.readTime=e},sn=function(t,e){this.path=t,this.version=e},un=function(){function t(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),cn=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();var ln=function(){function t(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),hn=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,f(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),fn=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),dn=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function pn(t){t.createObjectStore(hn.store,{keyPath:hn.keyPath}).createIndex(hn.documentTargetsIndex,hn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ln.store,{keyPath:ln.keyPath}).createIndex(ln.queryTargetsIndexName,ln.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fn.store)}var mn=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}();var gn,vn=[nn.store,rn.store,on.store,un.store,ln.store,en.store,fn.store,hn.store],yn=It.__spreadArrays(vn,[mn.store]),bn=It.__spreadArrays(yn,[cn.store]),wn=It.__spreadArrays(bn,[dn.store]),_n=function(){function t(){this.collectionParentsCache=new Ye}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(f(e.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.collectionParentsCache.add(e)}));var o={collectionId:r,parent:lt(i)};return En(t).put(o)}return jt.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[W(e),""],!1,!0);return En(t).loadAll(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(dt(o.parent))}return n}))},t}();function En(t){return qn.getStore(t,dn.store)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(gn||(gn={}));var Tn=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=mt.MIN),void 0===o&&(o=mt.MIN),void 0===a&&(a=p()),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.target.isEqual(t.target)},t}(),Sn=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=at.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new qe(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=at.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new Ve(e,n)}return h("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t,e){var n=this.toDbTimestampKey(e),r=t.key.path.popLast().toArray();if(t instanceof je){var i=t.proto?t.proto:this.remoteSerializer.toDocument(t),o=t.hasCommittedMutations;return new un(null,null,i,o,n,r)}if(t instanceof qe){var a=t.key.path.toArray(),s=this.toDbTimestamp(t.version);o=t.hasCommittedMutations;return new un(null,new an(a,s),null,o,n,r)}if(t instanceof Ve){a=t.key.path.toArray();var u=this.toDbTimestamp(t.version);return new un(new sn(a,u),null,null,!0,n,r)}return h("Unexpected MaybeDocument")},t.prototype.toDbTimestampKey=function(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]},t.prototype.fromDbTimestampKey=function(t){var e=new pt(t[0],t[1]);return mt.fromTimestamp(e)},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new tn(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new pt(t.seconds,t.nanoseconds);return mt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.remoteSerializer.toMutation(t)})),i=e.mutations.map((function(t){return n.remoteSerializer.toMutation(t)}));return new rn(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.remoteSerializer.fromMutation(t)})),r=t.mutations.map((function(t){return e.remoteSerializer.fromMutation(t)})),i=pt.fromMillis(t.localWriteTimeMs);return new Ut(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach((function(t){e.push(lt(t.path))})),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Rt(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new at(dt(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):mt.MIN,i=t.resumeToken;return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Tn(e,t.targetId,gn.Listen,t.lastListenSequenceNumber,n,r,i)},t.prototype.toDbTarget=function(t){f(gn.Listen===t.purpose,"Only queries with purpose "+gn.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion),i=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion);return e=t.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.target):this.remoteSerializer.toQueryTarget(t.target),t.resumeToken instanceof Uint8Array?(f($t.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new ln(t.targetId,t.target.canonicalId(),r,n,t.sequenceNumber,i,e)},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.getDocumentInternal(t,e,r)}))},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++){t=i[r].applyToLocalView(e,t)}return t}))},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=St();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++){e=o[i].applyToLocalView(t,e)}r=r.insert(t,e)})),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e)}))},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=Tt();return i.forEach((function(t,e){e||(e=new qe(t,mt.forDeletedDoc())),o=o.insert(t,e)})),o}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new at(e)).next((function(t){var e=Mt();return t instanceof je&&(e=e.insert(t.key,t)),e}))},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e,n){var r=this;f(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=Mt();return this.indexManager.getCollectionParents(t,i).next((function(a){return jt.forEach(a,(function(a){var s=e.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.addMissingBaseDocuments(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof je?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=Rt(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof be&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof je&&(c=c.insert(t,e))})),c}))},t}(),In="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kn=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),An=function(){function t(){this.refsByKey=new wt(Cn.compareByKey),this.refsByTarget=new wt(Cn.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Cn(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.removeRef(new Cn(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.removeReferencesForId=function(t){var e=this,n=at.EMPTY,r=new Cn(n,t),i=new Cn(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(t){e.removeRef(t),o.push(t.key)})),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach((function(e){return t.removeRef(e)}))},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=at.EMPTY,n=new Cn(e,t),r=new Cn(e,t+1),i=Rt();return this.refsByTarget.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Cn(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Cn=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return at.comparator(t.key,e.key)||H(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return H(t.targetOrBatchId,e.targetOrBatchId)||at.comparator(t.key,e.key)},t}(),Nn=function(){function t(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new An,this.targetDataByTarget=new gt(H),this.targetIdByTarget=new $e((function(t){return t.canonicalId()})),this.lastDocumentChangeReadTime=mt.MIN,f(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.localDocuments=new xn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return t.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},t.prototype.handleUserChange=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n,r,i=this;return It.__generator(this,(function(o){switch(o.label){case 0:return e=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,e=i.persistence.getMutationQueue(t),n=new xn(i.remoteDocuments,e,i.persistence.getIndexManager()),e.getAllMutationBatches(r)})).next((function(t){for(var e=[],i=[],a=Rt(),s=0,u=o;s<u.length;s++){var c=u[s];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){c=p[d];i.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++){f=g[m];a=a.add(f.key)}}return n.getDocuments(r,a).next((function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=e,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},t.prototype.localWrite=function(t){var e,n=this,r=pt.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Rt());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=c.extractBaseValue(e.get(c.key));null!=l&&a.push(new be(c.key,l,l.fieldMask(),ge.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,t)}))})).then((function(t){var n=t.applyToLocalDocumentSet(e);return{batchId:t.batchId,changes:n}}))},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.mutationQueue.lookupMutationKeys(n,t).next((function(t){return t?e.localDocuments.getDocuments(n,t):jt.resolve(null)}))}))},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next((function(){return e.applyWriteToRemoteDocuments(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next((function(t){return f(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.mutationQueue.getLastStreamToken(e)}))},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.mutationQueue.setLastStreamToken(n,t)}))},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.targetCache.getLastRemoteSnapshotVersion(e)}))},t.prototype.applyRemoteEvent=function(e){var n=this,r=e.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];w(e.targetChanges,(function(e,a){var u=i.get(e);if(u){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,e).next((function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,e)})));var c=a.resumeToken;if(c.length>0){var l=u.withResumeToken(c,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(e,l),t.shouldPersistTargetData(u,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}}));var c=Tt(),l=Rt();if(e.documentUpdates.forEach((function(t,e){l=l.add(t)})),s.push(a.getEntries(o,l).next((function(t){e.documentUpdates.forEach((function(i,l){var h=t.get(i);l instanceof qe&&l.version.isEqual(mt.MIN)?(a.removeEntry(i,r),c=c.insert(i,l)):null==h||l.version.compareTo(h.version)>0||0===l.version.compareTo(h.version)&&h.hasPendingWrites?(f(!mt.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(l,r),c=c.insert(i,l)):u("LocalStore","Ignoring outdated watch update for ",i,". Current version:",h.version," Watch version:",l.version),e.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(mt.MIN)){var h=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(t){return f(r.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(h)}return jt.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,c)}))})).then((function(t){return n.targetDataByTarget=i,t}))},t.shouldPersistTargetData=function(t,e,n){return f(e.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);f(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return jt.forEach(t,(function(t){return jt.forEach(t.removedKeys,(function(t){return e.persistence.referenceDelegate.removeReference(n,t)}))}))}))},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)}))},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.localDocuments.getDocument(n,t)}))},t.prototype.allocateTarget=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return e.targetCache.getTargetData(n,t).next((function(i){return i?(r=i,jt.resolve(r)):e.targetCache.allocateTargetId(n).next((function(i){return r=new Tn(t,i,gn.Listen,n.currentSequenceNumber),e.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.targetDataByTarget.get(n.targetId)&&(e.targetDataByTarget=e.targetDataByTarget.insert(n.targetId,n),e.targetIdByTarget.set(t,n.targetId)),n}))},t.prototype.getTargetData=function(t,e){var n=this.targetIdByTarget.get(e);return void 0!==n?jt.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(t,e)},t.prototype.releaseTarget=function(t,e){var n=this,r=this.targetDataByTarget.get(t);f(null!==r,"Tried to release nonexistent target: "+t);var i=e?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(t);return e?jt.resolve():jt.forEach(o,(function(t){return n.persistence.referenceDelegate.removeReference(i,t)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(r.target)}))},t.prototype.executeQuery=function(t,e){var n=this,r=mt.MIN,i=Rt();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,t.toTarget()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,t,e?r:mt.MIN,e?i:Rt())})).next((function(t){return{documents:t,remoteKeys:i}}))}))},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.targetCache.getMatchingKeysForTargetId(n,t)}))},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=jt.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(t,r)})).next((function(t){var o=t,a=e.docVersions.get(r);f(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o,e.commitVersion):f(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(t,i)}))},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.collect(n,e.targetDataByTarget)}))},t.prototype.getTarget=function(t){var e=this,n=this.targetDataByTarget.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e.targetCache.getTargetDataForTarget(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.remoteDocuments.getNewDocumentChanges(e,t.lastDocumentChangeReadTime)})).then((function(e){var n=e.changedDocs,r=e.readTime;return t.lastDocumentChangeReadTime=r,n}))},t.prototype.synchronizeLastDocumentChangeReadTime=function(){return It.__awaiter(this,void 0,void 0,(function(){var t,e=this;return It.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.remoteDocuments.getLastReadTime(t)}))];case 1:return t.lastDocumentChangeReadTime=n.sent(),[2]}}))}))},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mn(t){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(e){if(t.code!==m.FAILED_PRECONDITION||t.message!==In)throw t;return u("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pn(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=H(n,i);return 0===a?H(r,o):a}var Ln=function(){function t(t){this.maxElements=t,this.buffer=new wt(Pn),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Pn(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Dn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rn=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),On=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){f(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Rn.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;f(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;u("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Q.LruGarbageCollection,e,(function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then((function(){return t.scheduleGC()})).catch(Mn)}))},t}(),Bn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return jt.resolve(et.INVALID);var r=new Ln(e);return this.delegate.forEachTarget(t,(function(t){return r.addElement(t.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,(function(t){return r.addElement(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Rn.COLLECTION_DISABLED?(u("LruGarbageCollector","Garbage collection skipped; disabled"),jt.resolve(Dn)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(u("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Dn):n.runGarbageCollection(t,e)}))},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var r,i,o,s,c,l,h,f=this,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>f.params.maximumSequenceNumbersToCollect?(u("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.maximumSequenceNumbersToCollect+" from "+e),i=f.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),f.nthSequenceNumber(t,i)})).next((function(n){return r=n,c=Date.now(),f.removeTargets(t,r,e)})).next((function(e){return o=e,l=Date.now(),f.removeOrphanedDocuments(t,r)})).next((function(t){(h=Date.now(),a()<=n.DEBUG)&&u("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-d)+"ms\n\tDetermined least recently used "+i+" in "+(c-s)+"ms\n\tRemoved "+o+" targets in "+(l-c)+"ms\n\tRemoved "+t+" documents in "+(h-l)+"ms\nTotal Duration: "+(h-d)+"ms");return jt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})}))},t}(),Un="IndexedDbPersistence",Fn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",jn=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return It.__extends(e,t),e}(kn),qn=function(){function t(e,n,r,i,o,a,s,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new zn(this,o),this.dbName=n+t.MAIN_DATABASE,this.serializer=new Sn(s),this.document=i.document,this.targetCache=new oe(this.referenceDelegate,this.serializer),this.indexManager=new _n,this.remoteDocumentCache=new He(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new g(m.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof jn)return $t.getStore(t.simpleDbTransaction,e);throw h("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e){return It.__awaiter(this,void 0,void 0,(function(){var n;return It.__generator(this,(function(r){switch(r.label){case 0:if(!t.isAvailable())throw new g(m.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return f(!this.started,"IndexedDbPersistence double-started!"),f(null!==this.window,"Expected 'window' to be defined"),$t.openOrCreate(this.dbName,Je,new Xe(this.serializer)).then((function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()})).then((function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[fn.store],(function(t){return ue(t)}))})).then((function(e){t.listenSequence=new et(e,t.sequenceNumberSyncer)})).then((function(){t._started=!0})).catch((function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)}))},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return It.__awaiter(e,void 0,void 0,(function(){return It.__generator(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener((function(n){return It.__awaiter(e,void 0,void 0,(function(){return It.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget((function(){return It.__awaiter(e,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite-idempotent",wn,(function(e){return $n(e).put(new mn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next((function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget((function(){return t.primaryStateListener(!1)})))}))})).next((function(){return t.canActAsPrimary(e)})).next((function(n){return t.isPrimary&&!n?t.releasePrimaryLeaseIfHeld(e).next((function(){return!1})):!!n&&t.acquireOrExtendPrimaryLease(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return u(Un,"Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.queue.enqueueAndForget((function(){return t.primaryStateListener(e)})),t.isPrimary=e}))},t.prototype.verifyPrimaryLease=function(t){var e=this;return Vn(t).get(en.key).next((function(t){return jt.resolve(e.isLocalClient(t))}))},t.prototype.removeClientMetadata=function(t){return $n(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return It.__awaiter(this,void 0,void 0,(function(){var e=this;return It.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=t.getStore(n,mn.store);return r.loadAll().next((function(t){var n=e.filterActiveClients(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return jt.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Q.ClientMetadataRefresh,4e3,(function(){return t.updateClientMetadataAndTryBecomePrimary().then((function(){return t.maybeGarbageCollectMultiClientState()})).then((function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Vn(t).get(en.key).next((function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new g(m.FAILED_PRECONDITION,Fn);return!1}}return!(!e.networkEnabled||!e.inForeground)||$n(t).loadAll().next((function(t){return void 0===e.filterActiveClients(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&u(Un,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return It.__awaiter(this,void 0,void 0,(function(){var t=this;return It.__generator(this,(function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[en.store,mn.store],(function(e){return t.releasePrimaryLeaseIfHeld(e).next((function(){return t.removeClientMetadata(e)}))}))];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter((function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)}))},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[mn.store],(function(e){return $n(e).loadAll().next((function(e){return t.filterActiveClients(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return It.__awaiter(this,void 0,void 0,(function(){var n;return It.__generator(this,(function(r){switch(r.label){case 0:return t.isAvailable()?(n=e+t.MAIN_DATABASE,[4,$t.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return f(this.started,"Cannot initialize MutationQueue before persistence is started."),Qt.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getTargetCache=function(){return f(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},t.prototype.getRemoteDocumentCache=function(){return f(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return f(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;u(Un,"Starting transaction:",t);var i,o=e.endsWith("idempotent"),a=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,wn,(function(o){return i=new jn(o,r.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.verifyPrimaryLease(o).next((function(t){return!!t||r.canActAsPrimary(o)})).next((function(e){if(!e)throw c("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new g(m.FAILED_PRECONDITION,In);return n(i)})).next((function(t){return r.acquireOrExtendPrimaryLease(o).next((function(){return t}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Vn(t).get(en.key).next((function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new g(m.FAILED_PRECONDITION,Fn)}))},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new en(this.clientId,this.allowTabSynchronization,Date.now());return Vn(t).put(en.key,e)},t.isAvailable=function(){return $t.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Vn(t);return n.get(en.key).next((function(t){return e.isLocalClient(t)?(u(Un,"Releasing primary lease."),n.delete(en.key)):jt.resolve()}))},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e)&&(!(t>n)||(c("Detected an update time that is in the future: "+t+" > "+n),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(f(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(f("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return u(Un,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return c(Un,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){c("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Vn(t){return t.store(en.store)}function $n(t){return t.store(mn.store)}var zn=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new Bn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,(function(t,n){return e(n)}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Hn(t,e)},t.prototype.removeReference=function(t,e){return Hn(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Hn(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?jt.resolve(!0):function(t,e){var n=!1;return ne(t).iterateSerial((function(r){return Yt(t,r,e).next((function(t){return t&&(n=!0),jt.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(t,(function(a,s){if(s<=e){var u=n.isPinned(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),ce(t).delete([0,lt(a.path)])}))}));i.push(u)}})).next((function(){return jt.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Hn(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=ce(t),i=et.INVALID;return r.iterate({index:hn.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==et.INVALID&&e(new at(dt(n)),i),i=s,n=a):i=et.INVALID})).next((function(){i!==et.INVALID&&e(new at(dt(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Hn(t,e){return ce(t).put(function(t,e){return new hn(0,lt(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gn=Number,Wn=Gn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Kn=Gn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Zn=Gn.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Qn(t){return null==t}function Yn(t){return Zn(t)&&t<=Kn&&t>=Wn}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Jn,Xn=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){t+=i[r].canonicalId(),t+=","}Qn(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t=this.path.canonicalString();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Qn(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&(!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)))},t.prototype.isDocumentQuery=function(){return at.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t.First="F",t.Last="L"}(Jn||(Jn={}));var tr=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Jn.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[fr]:this.memoizedOrderBy=[new hr(t),fr];else{f(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:cr.ASCENDING;this.memoizedOrderBy.push(a===cr.ASCENDING?fr:dr)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){f(null==this.getInequalityFilterField()||!(e instanceof rr)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),f(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){f(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.withLimitToFirst=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Jn.First,this.startAt,this.endAt)},t.prototype.withLimitToLast=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Jn.Last,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},t.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},t.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},t.prototype.isEqual=function(t){return this.toTarget().isEqual(t.toTarget())&&this.limitType===t.limitType},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return f(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimitToFirst=function(){return!Qn(this.limit)&&this.limitType===Jn.First},t.prototype.hasLimitToLast=function(){return!Qn(this.limit)&&this.limitType===Jn.Last},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof rr&&n.isInequality())return n.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof rr&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Jn.First)this.memoizedTarget=new Xn(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===cr.DESCENDING?cr.ASCENDING:cr.DESCENDING;t.push(new hr(r.field,i))}var o=this.endAt?new lr(this.endAt.position,!this.endAt.before):null,a=this.startAt?new lr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Xn(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.memoizedTarget},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):at.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){f(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),er=function(){},nr=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return h("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),rr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return It.__extends(e,t),e.create=function(t,n,r){if(t.isKeyField())return n===nr.IN?(f(r instanceof Ue,"Comparing on key with IN, but filter value not an ArrayValue"),f(r.internalValue.every((function(t){return t instanceof Re})),"Comparing on key with IN, but an array value was not a RefValue"),new or(t,r)):(f(r instanceof Re,"Comparing on key, but filter value not a RefValue"),f(n!==nr.ARRAY_CONTAINS&&n!==nr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new ir(t,n,r));if(r.isEqual(xe.INSTANCE)){if(n!==nr.EQUAL)throw new g(m.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Ne.NAN)){if(n!==nr.EQUAL)throw new g(m.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===nr.ARRAY_CONTAINS?new ar(t,r):n===nr.IN?(f(r instanceof Ue,"IN filter has invalid value: "+r.toString()),new sr(t,r)):n===nr.ARRAY_CONTAINS_ANY?(f(r instanceof Ue,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new ur(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case nr.LESS_THAN:return t<0;case nr.LESS_THAN_OR_EQUAL:return t<=0;case nr.EQUAL:return 0===t;case nr.GREATER_THAN:return t>0;case nr.GREATER_THAN_OR_EQUAL:return t>=0;default:return h("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[nr.LESS_THAN,nr.LESS_THAN_OR_EQUAL,nr.GREATER_THAN,nr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(er),ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=at.comparator(t.key,e.key);return this.matchesComparison(n)},e}(rr),or=function(t){function e(e,n){var r=t.call(this,e,nr.IN,n)||this;return r.value=n,r}return It.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some((function(e){return t.key.isEqual(e.key)}))},e}(rr),ar=function(t){function e(e,n){return t.call(this,e,nr.ARRAY_CONTAINS,n)||this}return It.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ue&&e.contains(this.value)},e}(rr),sr=function(t){function e(e,n){var r=t.call(this,e,nr.IN,n)||this;return r.value=n,r}return It.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(rr),ur=function(t){function e(e,n){var r=t.call(this,e,nr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return It.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ue&&n.internalValue.some((function(t){return e.value.contains(t)}))},e}(rr),cr=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),lr=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){f(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())f(o instanceof Re,"Bound has a non-key value where the key path is being used."),n=at.comparator(o.key,e.key);else{var a=e.field(i.field);f(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===cr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},t}(),hr=function(){function t(t,e){this.field=t,void 0===e&&(e=cr.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?je.compareByKey(t,e):je.compareByField(this.field,t,e);switch(this.dir){case cr.ASCENDING:return n;case cr.DESCENDING:return-1*n;default:return h("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),fr=new hr(ot.keyField(),cr.ASCENDING),dr=new hr(ot.keyField(),cr.DESCENDING),pr=function(){function t(){}return t.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},t.prototype.getDocumentsMatchingQuery=function(t,e,r,i){var o=this;return f(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),e.matchesAllDocuments()?this.executeFullCollectionScan(t,e):r.isEqual(mt.MIN)?this.executeFullCollectionScan(t,e):this.localDocumentsView.getDocuments(t,i).next((function(s){var c=o.applyQuery(e,s);return(e.hasLimitToFirst()||e.hasLimitToLast())&&o.needsRefill(e.limitType,c,i,r)?o.executeFullCollectionScan(t,e):(a()<=n.DEBUG&&u("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),e.toString()),o.localDocumentsView.getDocumentsMatchingQuery(t,e,r).next((function(t){return c.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.applyQuery=function(t,e){var n=new wt((function(e,n){return t.docComparator(e,n)}));return e.forEach((function(e,r){r instanceof je&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.needsRefill=function(t,e,n,r){if(n.size!==e.size)return!0;var i=t===Jn.First?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.executeFullCollectionScan=function(t,e){return a()<=n.DEBUG&&u("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.localDocumentsView.getDocumentsMatchingQuery(t,e,mt.MIN)},t}(),mr=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=p(),this.batchesByDocumentKey=new wt(Cn.compareByKey)}return t.prototype.checkEmpty=function(t){return jt.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");f(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return f(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,jt.resolve()},t.prototype.getLastStreamToken=function(t){return jt.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,jt.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){f(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&f(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Ut(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Cn(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return jt.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return jt.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return f(null!=n,"Failed to find local mutation batch."),jt.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),i=r<0?0:r;return jt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return jt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return jt.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Cn(e,0),i=new Cn(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(t){f(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);f(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),jt.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new wt(H);return e.forEach((function(t){var e=new Cn(t,0),i=new Cn(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],(function(e){f(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)}))})),jt.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){f(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;at.isDocumentKey(i)||(i=i.child(""));var o=new Cn(new at(i),0),a=new wt(H);return this.batchesByDocumentKey.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)}),o),jt.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;f(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return jt.forEach(e.mutations,(function(i){var o=new Cn(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)})).next((function(){n.batchesByDocumentKey=r}))},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Cn(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return jt.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&f(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),jt.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return f(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return f(n.batchId===t,"If found batch must match"),n},t}();var gr,vr=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new gt(at.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){f(!n.isEqual(mt.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return jt.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=St();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),jt.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){f(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Mt(),i=new at(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof je&&e.matches(c)&&(r=r.insert(c.key,c))}return jt.resolve(r)},t.prototype.forEachDocumentKey=function(t,e){return jt.forEach(this.docs,(function(t){return e(t)}))},t.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.getLastReadTime=function(t){return jt.resolve(mt.MIN)},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return jt.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return It.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i?n.push(e.documentCache.addEntry(t,i,e.readTime)):e.documentCache.removeEntry(r)})),jt.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(ze),t}(),yr=function(){function t(t){this.persistence=t,this.targets=new $e((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=mt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new An,this.targetCount=0,this.targetIdGenerator=ie.forTargetCache()}return t.prototype.forEachTarget=function(t,e){return this.targets.forEach((function(t,n){return e(n)})),jt.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return jt.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return jt.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,jt.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),jt.resolve()},t.prototype.saveTargetData=function(t){this.targets.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return f(!this.targets.has(e.target),"Adding a target that already exists"),this.saveTargetData(e),this.targetCount+=1,jt.resolve()},t.prototype.updateTargetData=function(t,e){return f(this.targets.has(e.target),"Updating a non-existent target"),this.saveTargetData(e),jt.resolve()},t.prototype.removeTargetData=function(t,e){return f(this.targetCount>0,"Removing a target from an empty cache"),f(this.targets.has(e.target),"Removing a non-existent target from the cache"),this.targets.delete(e.target),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,jt.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),jt.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return jt.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.targets.get(e)||null;return jt.resolve(n)},t.prototype.getTargetDataForTarget=function(t,e){return h("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.addReference(t,e))})),jt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.removeReference(t,e))})),jt.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),jt.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return jt.resolve(n)},t.prototype.containsKey=function(t,e){return jt.resolve(this.references.containsKey(e))},t}(),br=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new et(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new yr(this);this.indexManager=new Qe,this.remoteDocumentCache=new vr(this.indexManager,(function(t){return n.referenceDelegate.documentSize(t)}))}return t.createLruPersistence=function(e,n){return new t(e,(function(t){return new Er(t,n)}))},t.createEagerPersistence=function(e){return new t(e,(function(t){return new _r(t)}))},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new mr(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.targetCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;u("MemoryPersistence","Starting transaction:",t);var i=new wr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(t){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.mutationQueuesContainKey=function(t,e){return jt.or((n=this.mutationQueues,r=[],_(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.containsKey(t,e)}})));var n,r},t}(),wr=function(t){function e(e){var n=t.call(this)||this;return n.currentSequenceNumber=e,n}return It.__extends(e,t),e}(kn),_r=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw h("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),jt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),jt.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),jt.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.orphanedDocuments.add(t)}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jt.forEach(this.orphanedDocuments,(function(r){return e.isReferenced(t,r).next((function(t){t||n.removeEntry(r)}))})).next((function(){return e._orphanedDocuments=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next((function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)}))},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return jt.or([function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return jt.resolve(n.inMemoryPins.containsKey(e))}])},t}(),Er=function(){function t(t,e){this.persistence=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new $e((function(t){return lt(t.path)})),this.garbageCollector=new Bn(this,e)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return jt.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return jt.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(t,r,i).next((function(t){return t?jt.resolve():e(i)}))}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(t,(function(i){return n.isPinned(t,i,e).next((function(t){t||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(t)})).next((function(){return r}))},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),jt.resolve()},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),jt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),jt.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),jt.resolve()},t.prototype.documentSize=function(t){var e=t.key.toString().length;return t instanceof je&&(e+=t.data().approximateByteSize()),e},t.prototype.isPinned=function(t,e,n){var r=this;return jt.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return jt.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getTargetCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return jt.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),Tr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&u("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return e.lastAttemptTime=Date.now(),t()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}(gr||(gr={}));var Sr,xr,Ir=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=gr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Tr(t,e)}return t.prototype.isStarted=function(){return this.state===gr.Starting||this.state===gr.Open||this.state===gr.Backoff},t.prototype.isOpen=function(){return this.state===gr.Open},t.prototype.start=function(){this.state!==gr.Error?(f(this.state===gr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(gr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.inhibitBackoff=function(){f(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=gr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return t.handleIdleCloseTimer()})))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){return this.isOpen()?[2,this.close(gr.Initial)]:[2]}))}))},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(n){switch(n.label){case 0:return f(this.isStarted(),"Only started streams should be closed."),f(t===gr.Error||Qn(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==gr.Error?this.backoff.reset():e&&e.code===m.RESOURCE_EXHAUSTED?(c(e.toString()),c("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===m.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;f(this.state===gr.Initial,"Must be in initial state to auth"),this.state=gr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(e){t.closeCount===n&&t.startStream(e)}),(function(n){e((function(){var e=new g(m.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)}))}))},t.prototype.startStream=function(t){var e=this;f(this.state===gr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen((function(){n((function(){return f(e.state===gr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=gr.Open,e.listener.onOpen()}))})),this.stream.onClose((function(t){n((function(){return e.handleStreamClose(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.performBackoff=function(){var t=this;f(this.state===gr.Error,"Should only perform backoff when in Error state"),this.state=gr.Backoff,this.backoff.backoffAndRun((function(){return It.__awaiter(t,void 0,void 0,(function(){return It.__generator(this,(function(t){return f(this.state===gr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=gr.Initial,this.start(),f(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.handleStreamClose=function(t){return f(this.isStarted(),"Can't handle server close on non-started stream"),u("PersistentStream","close with error: "+t),this.stream=null,this.close(gr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget((function(){return e.closeCount===t?n():(u("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),kr=function(t){function e(e,n,r,i,o){var a=t.call(this,e,Q.ListenStreamConnectionBackoff,Q.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return It.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Ir),Ar=function(t){function e(e,n,r,i,o){var a=t.call(this,e,Q.WriteStreamConnectionBackoff,Q.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=p(),a}return It.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(f(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return f(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){f(this.isOpen(),"Writing handshake requires an opened stream"),f(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;f(this.isOpen(),"Writing mutations requires an opened stream"),f(this.handshakeComplete_,"Handshake must be complete before writing mutations"),f(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map((function(t){return e.serializer.toMutation(t)}))};this.sendRequest(n)},e}(Ir),Cr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new Ar(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new kr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map((function(t){return e.serializer.toMutation(t)}))};return this.invokeRPC("Commit",n).then((function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map((function(t){return e.serializer.toName(t)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Tt();n.forEach((function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);f(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(t,e,r)})).catch((function(t){throw t.code===m.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(t,e,r)})).catch((function(t){throw t.code===m.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t}(),Nr=function(){function t(t){this.datastore=t,this.readVersions=Lt(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n=this;return It.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new g(m.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof qe||t instanceof je?n.recordVersion(t):h("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new _e(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return It.__awaiter(this,void 0,void 0,(function(){var t,e=this;return It.__generator(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Ee(t,e.precondition(t)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof je)e=t.version;else{if(!(t instanceof qe))throw h("Document in a transaction was a "+t.constructor.name);e=mt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new g(m.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?ge.updateTime(e):ge.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(mt.forDeletedDoc()))throw new g(m.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ge.updateTime(e)}return ge.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){f(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(Sr||(Sr={})),function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(xr||(xr={}));
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Mr,Pr=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=Sr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Sr.Unknown),f(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Q.OnlineStateTimeout,1e4,(function(){return t.onlineStateTimer=null,f(t.state===Sr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(Sr.Offline),Promise.resolve()})))},t.prototype.handleWatchStreamFailure=function(t){this.state===Sr.Online?(this.setAndBroadcast(Sr.Unknown),f(0===this.watchStreamFailures,"watchStreamFailures must be 0"),f(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(Sr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===Sr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(c(e),this.shouldWarnClientIsOffline=!1):u("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}();function Lr(t){switch(t){case m.OK:return h("Treated status OK as error");case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0;default:return h("Unknown status code: "+t)}}function Dr(t){if(void 0===t)return c("GRPC error has no .code"),m.UNKNOWN;switch(t){case Mr.OK:return m.OK;case Mr.CANCELLED:return m.CANCELLED;case Mr.UNKNOWN:return m.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return m.INTERNAL;case Mr.UNAVAILABLE:return m.UNAVAILABLE;case Mr.UNAUTHENTICATED:return m.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case Mr.NOT_FOUND:return m.NOT_FOUND;case Mr.ALREADY_EXISTS:return m.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return m.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case Mr.ABORTED:return m.ABORTED;case Mr.OUT_OF_RANGE:return m.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return m.UNIMPLEMENTED;case Mr.DATA_LOSS:return m.DATA_LOSS;default:return h("Unknown status code: "+t)}}function Rr(t){if(void 0===t)return Mr.OK;switch(t){case m.OK:return Mr.OK;case m.CANCELLED:return Mr.CANCELLED;case m.UNKNOWN:return Mr.UNKNOWN;case m.DEADLINE_EXCEEDED:return Mr.DEADLINE_EXCEEDED;case m.RESOURCE_EXHAUSTED:return Mr.RESOURCE_EXHAUSTED;case m.INTERNAL:return Mr.INTERNAL;case m.UNAVAILABLE:return Mr.UNAVAILABLE;case m.UNAUTHENTICATED:return Mr.UNAUTHENTICATED;case m.INVALID_ARGUMENT:return Mr.INVALID_ARGUMENT;case m.NOT_FOUND:return Mr.NOT_FOUND;case m.ALREADY_EXISTS:return Mr.ALREADY_EXISTS;case m.PERMISSION_DENIED:return Mr.PERMISSION_DENIED;case m.FAILED_PRECONDITION:return Mr.FAILED_PRECONDITION;case m.ABORTED:return Mr.ABORTED;case m.OUT_OF_RANGE:return Mr.OUT_OF_RANGE;case m.UNIMPLEMENTED:return Mr.UNIMPLEMENTED;case m.DATA_LOSS:return Mr.DATA_LOSS;default:return h("Unknown status code: "+t)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(Mr||(Mr={}));
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Or,Br,Ur=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||at.comparator(e.key,n.key)}:function(t,e){return at.comparator(t.key,e.key)},this.keyedMap=Mt(),this.sortedSet=new gt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(Or||(Or={})),function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(Br||(Br={}));var Fr,jr=function(){function t(){this.changeMap=new gt(at.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Or.Added&&n.type===Or.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Or.Metadata&&n.type!==Or.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Or.Modified&&n.type===Or.Modified?this.changeMap=this.changeMap.insert(e,{type:Or.Modified,doc:t.doc}):t.type===Or.Modified&&n.type===Or.Added?this.changeMap=this.changeMap.insert(e,{type:Or.Added,doc:t.doc}):t.type===Or.Removed&&n.type===Or.Added?this.changeMap=this.changeMap.remove(e):t.type===Or.Removed&&n.type===Or.Modified?this.changeMap=this.changeMap.insert(e,{type:Or.Removed,doc:n.doc}):t.type===Or.Added&&n.type===Or.Removed?this.changeMap=this.changeMap.insert(e,{type:Or.Modified,doc:t.doc}):h("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal((function(e,n){t.push(n)})),t},t}(),qr=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:Or.Added,doc:t})})),new t(e,n,Ur.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Vr=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=$r.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(mt.MIN,i,Bt(),Tt(),Rt())},t}(),$r=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(p(),n,Rt(),Rt(),Rt())},t}(),zr=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},Hr=function(t,e){this.targetId=t,this.existenceFilter=e};!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(Fr||(Fr={}));var Gr=function(t,e,n,r){void 0===n&&(n=p()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Wr=function(){function t(){this.pendingResponses=0,this.documentChanges=Qr(),this._resumeToken=p(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Rt(),e=Rt(),n=Rt();return this.documentChanges.forEach((function(r,i){switch(i){case Or.Added:t=t.add(r);break;case Or.Modified:e=e.add(r);break;case Or.Removed:n=n.add(r);break;default:h("Encountered invalid change type: "+i)}})),new $r(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Qr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Kr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Tt(),this.pendingDocumentTargetMapping=Zr(),this.pendingTargetResets=new wt(H)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof je?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof qe&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ensureTargetState(n);switch(t.state){case Fr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Fr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Fr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),f(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Fr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Fr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:h("Unknown target watch change state: "+t.state)}}))},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):w(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.targetDataForActiveTarget(e);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new at(i.path);this.removeDocumentFromTarget(e,o,new qe(o,mt.forDeletedDoc()))}else f(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};w(this.targetStates,(function(r,i){var o=e.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new at(o.target.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new qe(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Rt();this.pendingDocumentTargetMapping.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.targetDataForActiveTarget(t);return!n||n.purpose===gn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Vr(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Tt(),this.pendingDocumentTargetMapping=Zr(),this.pendingTargetResets=new wt(H),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Or.Modified:Or.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Or.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Wr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new wt(H),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.targetDataForActiveTarget(t);return e||u("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.targetDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getTargetDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;f(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Wr,this.metadataProvider.getRemoteKeysForTarget(t).forEach((function(n){e.removeDocumentFromTarget(t,n,null)}))},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Zr(){return new gt(at.comparator)}function Qr(){return new gt(at.comparator)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yr=function(){function t(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(t){n.enqueueAndForget((function(){return It.__awaiter(o,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(u("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Pr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return It.__awaiter(this,void 0,void 0,(function(){var t;return It.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Sr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Sr.Offline),[2]}}))}))},t.prototype.disableNetworkInternal=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(u("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},t.prototype.shutdown=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return u("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Sr.Unknown),[2]}}))}))},t.prototype.listen=function(t){y(this.listenTargets,t.targetId)||(this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t))},t.prototype.unlisten=function(t){f(y(this.listenTargets,t),"unlisten called on target no currently watched: "+t),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),E(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Sr.Unknown))},t.prototype.getTargetDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){f(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Kr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!E(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return It.__awaiter(this,void 0,void 0,(function(){var t=this;return It.__generator(this,(function(e){return w(this.listenTargets,(function(e,n){t.sendWatchRequest(n)})),[2]}))}))},t.prototype.onWatchStreamClose=function(t){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(e){return void 0===t&&f(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(Sr.Unknown),[2]}))}))},t.prototype.onWatchStreamChange=function(t,e){return It.__awaiter(this,void 0,void 0,(function(){var n;return It.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Sr.Online),t instanceof Gr&&t.state===Fr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof zr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Hr?this.watchChangeAggregator.handleExistenceFilter(t):(f(t instanceof Gr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(mt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.raiseWatchSnapshot=function(t){var e=this;f(!t.isEqual(mt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return w(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.withResumeToken(r.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(p(),n.snapshotVersion),e.sendUnwatchRequest(t);var r=new Tn(n.target,t,gn.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;f(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return It.__awaiter(e,void 0,void 0,(function(){return It.__generator(this,(function(e){return y(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]}))}))}))})),r},t.prototype.fillWritePipeline=function(){return It.__awaiter(this,void 0,void 0,(function(){var t,e;return It.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){f(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){f(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){return this.writeStream.writeHandshake(),[2]}))}))},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}})).catch(Mn)},t.prototype.onMutationResult=function(t,e){var n=this;f(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Ft.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},t.prototype.onWriteStreamClose=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e=this;return It.__generator(this,(function(n){return void 0===t&&f(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then((function(){e.shouldStartWriteStream()&&e.startWriteStream()}))]):[2]}))}))},t.prototype.handleHandshakeError=function(t){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(e){return Lr(t.code)?(u("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=p(),[2,this.localStore.setLastStreamToken(p()).catch(Mn)]):[2]}))}))},t.prototype.handleWriteError=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n=this;return It.__generator(this,(function(r){return Lr(i=t.code)&&i!==m.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},t.prototype.createTransaction=function(){return new Nr(this.datastore)},t.prototype.restartNetwork=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Sr.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.handleCredentialChange=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(u("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.applyPrimaryState=function(t){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(Sr.Unknown),e.label=4;case 4:return[2]}}))}))},t}(),Jr=function(){function t(t,e){if(S("GeoPoint",arguments,2),A("GeoPoint","number",1,t),A("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new g(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new g(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return H(this._lat,t._lat)||H(this._long,t._long)},t}(),Xr=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new Le(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ti=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ri(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Ue(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&G(e.elements,this.elements)},t}(),ei=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ri(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Ue(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&G(e.elements,this.elements)},t}(),ni=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);if(n instanceof Ce&&this.operand instanceof Ce){var r=n.internalValue+this.operand.internalValue;return new Ce(r)}r=n.internalValue+this.operand.internalValue;return new Ne(r)},t.prototype.applyToRemoteDocument=function(t,e){return f(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof ke?t:new Ce(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function ri(t){return t instanceof Ue?t.internalValue.slice():[]}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ii,oi,ai=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),si=((ii={})[cr.ASCENDING.name]="ASCENDING",ii[cr.DESCENDING.name]="DESCENDING",ii),ui=((oi={})[nr.LESS_THAN.name]="LESS_THAN",oi[nr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",oi[nr.GREATER_THAN.name]="GREATER_THAN",oi[nr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",oi[nr.EQUAL.name]="EQUAL",oi[nr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",oi[nr.IN.name]="IN",oi[nr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",oi),ci=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function li(t,e){f(!Qn(t),e+" is missing")}function hi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):h("can't parse "+t)}var fi=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?m.UNKNOWN:Dr(t.code);return new g(e,t.message||"")},t.prototype.toInt32Value=function(t){return this.options.useProto3Json||Qn(t)?t:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Qn(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);f(!!t,"Cannot deserialize null or undefined timestamp.");var e=hi(t.seconds||"0"),n=t.nanos||0;return new pt(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=ci.exec(t);if(f(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new pt(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(f(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Y.fromBase64String(t)):(f(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Y.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return f(!!t,"Trying to deserialize version that isn't set"),mt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=rt.fromString(t);return f(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return f(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),f(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new at(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?rt.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new rt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new rt(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return f(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof xe)return{nullValue:"NULL_VALUE"};if(t instanceof Ie)return{booleanValue:t.value()};if(t instanceof Ce)return{integerValue:""+t.value()};if(t instanceof Ne){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Me?{stringValue:t.value()}:t instanceof Be?{mapValue:this.toMapValue(t)}:t instanceof Ue?{arrayValue:this.toArrayValue(t)}:t instanceof Pe?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Oe?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof De?{bytesValue:this.toBytes(t.value())}:t instanceof Re?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:h("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return xe.INSTANCE;if("booleanValue"in t)return Ie.of(t.booleanValue);if("integerValue"in t)return new Ce(hi(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Ne.NAN;if("Infinity"===t.doubleValue)return Ne.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Ne.NEGATIVE_INFINITY}return new Ne(t.doubleValue)}if("stringValue"in t)return new Me(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t){li(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Ue(n.map((function(t){return e.fromValue(t)})))}if("timestampValue"in t)return li(t.timestampValue,"timestampValue"),new Pe(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t){li(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new Oe(new Jr(r,i))}if("bytesValue"in t){li(t.bytesValue,"bytesValue");var o=this.fromBlob(t.bytesValue);return new De(o)}if("referenceValue"in t){li(t.referenceValue,"referenceValue");var a=this.fromResourceName(t.referenceValue),s=new tt(a.get(1),a.get(3)),u=new at(this.extractLocalPathFromResourceName(a));return new Re(s,u)}return h("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return f(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),i=this.fromVersion(t.updateTime);return new je(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.fromValue(t)}))},t.prototype.toFields=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.toValue(r)})),n},t.prototype.fromFields=function(t){var e=this,n=t,r=Be.EMPTY;return _(n,(function(t,n){r=r.set(new ot([t]),e.fromValue(n))})),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.toValue(t))})),{values:n}},t.prototype.fromFound=function(t){var e=this;f(!!t.found,"Tried to deserialize a found document from a missing document."),li(t.found.name,"doc.found.name"),li(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new je(n,r,{},void 0,t.found,(function(t){return e.fromValue(t)}))},t.prototype.fromMissing=function(t){f(!!t.missing,"Tried to deserialize a missing document from a found document."),f(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new qe(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):h("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Fr.Added:return"ADD";case Fr.Current:return"CURRENT";case Fr.NoChange:return"NO_CHANGE";case Fr.Removed:return"REMOVE";case Fr.Reset:return"RESET";default:return h("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Hr)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof zr){if(t.newDoc instanceof je){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof qe){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Gr){var n=void 0;return t.cause&&(n={code:Rr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return h("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){li(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Gr(r,i,o,s||null)}else if("documentChange"in t){li(t.documentChange,"documentChange");var u=t.documentChange;li(u.document,"documentChange.name"),li(u.document.name,"documentChange.document.name"),li(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),f=new je(c,l,{},void 0,u.document,(function(t){return n.fromValue(t)})),d=u.targetIds||[],p=u.removedTargetIds||[];e=new zr(d,p,f.key,f)}else if("documentDelete"in t){li(t.documentDelete,"documentDelete");var m=t.documentDelete;li(m.document,"documentDelete.document");c=this.fromName(m.document),l=m.readTime?this.fromVersion(m.readTime):mt.forDeletedDoc(),f=new qe(c,l),p=m.removedTargetIds||[];e=new zr([],p,f.key,f)}else if("documentRemove"in t){li(t.documentRemove,"documentRemove");var g=t.documentRemove;li(g.document,"documentRemove");c=this.fromName(g.document),p=g.removedTargetIds||[];e=new zr([],p,c,null)}else{if(!("filter"in t))return h("Unknown change type "+JSON.stringify(t));li(t.filter,"filter");var v=t.filter;li(v.targetId,"filter.targetId");var y=v.count||0,b=new ai(y),w=v.targetId;e=new Hr(w,b)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Fr.NoChange:"ADD"===t?Fr.Added:"REMOVE"===t?Fr.Removed:"CURRENT"===t?Fr.Current:"RESET"===t?Fr.Reset:h("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return mt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?mt.MIN:e.readTime?this.fromVersion(e.readTime):mt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof ye)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof _e)e={delete:this.toName(t.key)};else if(t instanceof be)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else if(t instanceof we)e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.toFieldTransform(t)}))}};else{if(!(t instanceof Ee))return h("Unknown mutation type "+t.type);e={verify:this.toName(t.key)}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ge.NONE;if(t.update){li(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new be(r,i,o,n)}return new ye(r,i,n)}if(t.delete){r=this.fromName(t.delete);return new _e(r,n)}if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map((function(t){return e.fromFieldTransform(t)}));return f(!0===n.exists,'Transforms only support precondition "exists == true"'),new we(r,a)}if(t.verify){r=this.fromName(t.verify);return new Ee(r,n)}return h("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return f(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:h("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ge.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ge.exists(t.exists):ge.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(mt.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map((function(t){return n.fromValue(t)}))),new de(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(f(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.fromWriteResult(t,e)}))):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof Xr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ti)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof ei)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof ni)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw h("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)f("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=Xr.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ti(r.map((function(t){return e.fromValue(t)})))}else if("removeAllFromArray"in t){r=t.removeAllFromArray.values||[];n=new ei(r.map((function(t){return e.fromValue(t)})))}else if("increment"in t){var i=this.fromValue(t.increment);f(i instanceof ke,"NUMERIC_ADD transform requires a NumberValue"),n=new ni(i)}else h("Unknown transform proto: "+JSON.stringify(t));var o=ot.fromServerFormat(t.fieldPath);return new fe(o,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;f(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return tr.atPath(this.fromQueryPath(n)).toTarget()},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(f(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(f(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){f(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new tr(e,i,s,a,u,Jn.First,c,l).toTarget()},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case gn.Listen:return null;case gn.ExistenceFilterMismatch:return"existence-filter-mismatch";case gn.LimboResolution:return"limbo-document";default:return h("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.target;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof rr?e.toUnaryOrFieldFilter(t):h("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.fromFilter(t)})).reduce((function(t,e){return t.concat(e)})):h("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.toPropertyOrder(t)}))},t.prototype.fromOrder=function(t){var e=this;return t.map((function(t){return e.fromPropertyOrder(t)}))},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.toValue(t)}))}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.fromValue(t)}));return new lr(r,n)},t.prototype.toDirection=function(t){return si[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return cr.ASCENDING;case"DESCENDING":return cr.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return ui[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return nr.EQUAL;case"GREATER_THAN":return nr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return nr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return nr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return nr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return nr.ARRAY_CONTAINS;case"IN":return nr.IN;case"ARRAY_CONTAINS_ANY":return nr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return h("Unspecified operator");default:return h("Unknown operator")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ot.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new hr(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(t){return rr.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(t){if(t.op===nr.EQUAL){if(t.value.isEqual(Ne.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(xe.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return rr.create(e,nr.EQUAL,Ne.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return rr.create(n,nr.EQUAL,xe.INSTANCE);case"OPERATOR_UNSPECIFIED":return h("Unspecified filter");default:return h("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map((function(t){return ot.fromServerFormat(t)}));return he.fromArray(e)},t}(),di=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},pi=function(){function t(t){this.syncEngine=t,this.queries=new $e((function(t){return t.canonicalId()})),this.onlineState=Sr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);(r||(n=!0,r=new di,this.queries.set(e,r)),r.listeners.push(t),f(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return It.__generator(this,(function(o){return e=t.query,n=!1,(r=this.queries.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]}))}))},t.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++){u[s].onViewSnapshot(i)&&(e=!0)}a.viewSnap=i}}e&&this.raiseSnapshotsInSyncEvent()},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){o[i].applyOnlineStateChange(t)&&(e=!0)}})),e&&this.raiseSnapshotsInSyncEvent()},t.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},t.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},t.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(t){t.next()}))},t}(),mi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Sr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(f(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Or.Metadata&&e.push(i)}t=new qr(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},t.prototype.shouldRaiseInitialEvent=function(t,e){if(f(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==Sr.Offline;return this.options.waitForSyncWhenOnline&&n?(f(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===Sr.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){f(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=qr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),gi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}return t.fromSnapshot=function(e,n){for(var r=Rt(),i=Rt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Or.Added:r=r.add(s.doc.key);break;case Or.Removed:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),vi=function(t){this.key=t},yi=function(t){this.key=t},bi=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Rt(),this.mutatedKeys=Rt(),this.documentSet=new Ur(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new jr,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=e instanceof je?e:null;h&&(f(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var d=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),m=!1;l&&h?l.data().isEqual(h.data())?d!==p&&(r.track({type:Or.Metadata,doc:h}),m=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:Or.Modified,doc:h}),m=!0,(u&&n.query.docComparator(h,u)>0||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:Or.Added,doc:h}),m=!0):l&&!h&&(r.track({type:Or.Removed,doc:l}),m=!0,(u||c)&&(s=!0));m&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Or.Removed,doc:l})}return f(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;f(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case Or.Added:return 1;case Or.Modified:case Or.Metadata:return 2;case Or.Removed:return 0;default:return h("Unknown ChangeType: "+t)}};return n(t)-n(e)}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t.type,e.type)||r.query.docComparator(t.doc,e.doc)})),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Br.Synced:Br.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new qr(this.query,t.documentSet,i,o,t.mutatedKeys,s===Br.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===Sr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new jr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.add(t)})),t.modifiedDocuments.forEach((function(t){return f(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")})),t.removedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)})),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Rt(),this.documentSet.forEach((function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))}));var n=[];return e.forEach((function(e){t.limboDocuments.has(e)||n.push(new yi(e))})),this.limboDocuments.forEach((function(t){e.has(t)||n.push(new vi(t))})),n},t.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=Rt();var e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)},t.prototype.computeInitialSnapshot=function(){return qr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Br.Local)},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wi=function(){function t(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new Tr(this.asyncQueue,Q.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun((function(){return It.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return It.__generator(this,(function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.handleTransactionError(t)}))}))})).catch((function(t){n.handleTransactionError(t)})),[2]}))}))}))},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!Qn(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return e.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Lr(e)}return!1},t}(),_i=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ei=function(t){this.key=t,this.receivedDocument=!1},Ti=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new $e((function(t){return t.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new gt(at.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new An,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ie.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Sr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){f(null!==t,"SyncEngine listener cannot be null"),f(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o;return It.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(t.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(t,e,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}}))}))},t.prototype.initializeViewAndComputeSnapshot=function(t,e,n){return It.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,s,u;return It.__generator(this,(function(c){switch(c.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return r=c.sent(),i=new bi(t,r.remoteKeys),o=i.computeDocChanges(r.documents),a=$r.createSynthesizedTargetChangeForCurrentChange(e,n&&this.onlineState!==Sr.Offline),f(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),f(!!s.snapshot,"applyChanges for new view should always return a snapshot"),u=new _i(t,e,i),this.queryViewsByQuery.set(t,u),this.queriesByTarget[e]||(this.queriesByTarget[e]=[]),this.queriesByTarget[e].push(t),[2,s.snapshot]}}))}))},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n;return It.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t.query,!0)];case 1:return e=r.sent(),n=t.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(t.targetId,n.limboChanges),[2,n]}}))}))},t.prototype.unlisten=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return It.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),f(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),(n=this.queriesByTarget[e.targetId]).length>1?(this.queriesByTarget[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.queryViewsByQuery.delete(t),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseTarget(e.targetId,!1).then((function(){r.sharedClientState.clearQueryState(e.targetId),r.remoteStore.unlisten(e.targetId),r.removeAndCleanupTarget(e.targetId)})).catch(Mn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(e.targetId),[4,this.localStore.releaseTarget(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return It.__awaiter(this,void 0,void 0,(function(){var n;return It.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new wi(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n=this;return It.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),_(t.targetChanges,(function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(f(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?r.receivedDocument=!0:e.modifiedDocuments.size>0?f(r.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(f(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Mn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===xr.RemoteStore||!this.isPrimary&&e===xr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(e,r){var i=r.view.applyOnlineStateChange(t);f(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return It.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return It.__generator(this,(function(u){switch(u.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new gt(at.comparator)).insert(r,new qe(r,mt.forDeletedDoc())),o=Rt().add(r),a=new Vr(mt.MIN,{},new wt(H),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(t,!1).then((function(){return s.removeAndCleanupTarget(t,e)})).catch(Mn)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},t.prototype.applyBatchState=function(t,e,n){return It.__awaiter(this,void 0,void 0,(function(){var r;return It.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(u("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):h("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},t.prototype.applySuccessfulWrite=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n;return It.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),e=t.batch.batchId,this.processUserCallback(e,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Mn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.rejectFailedWrite=function(t,e){return It.__awaiter(this,void 0,void 0,(function(){var n;return It.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Mn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.registerPendingWritesCallback=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n;return It.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||u("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}}))}))},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach((function(t){t.resolve()})),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach((function(e){e.forEach((function(e){e.reject(new g(m.CANCELLED,t))}))})),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new gt(H)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(f(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupTarget=function(t,e){var n=this;void 0===e&&(e=null),this.sharedClientState.removeLocalQueryTarget(t),f(this.queriesByTarget[t]&&0!==this.queriesByTarget[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.queriesByTarget[t];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),e&&this.syncEngineListener.onWatchError(o,e)}if(delete this.queriesByTarget[t],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(t);this.limboDocumentRefs.removeReferencesForId(t),a.forEach((function(t){n.limboDocumentRefs.containsKey(t)||n.removeLimboTarget(t)}))}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i instanceof vi)this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i);else if(i instanceof yi){u("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else h("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){u("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=tr.atPath(e.path);this.limboResolutionsByTarget[n]=new Ei(e),this.remoteStore.listen(new Tn(r.toTarget(),n,gn.LimboResolution,et.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return It.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return It.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(t){var n=t.documents;return s.view.computeDocChanges(n,e)})):e})).then((function(t){var i=e&&e.targetChanges[s.targetId],a=s.view.applyChanges(t,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=gi.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},t.prototype.assertSubscribed=function(t){f(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n;return It.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},t.prototype.applyPrimaryState=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u=this;return It.__generator(this,(function(c){switch(c.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),w(this.queriesByTarget,(function(t,e){u.sharedClientState.isLocalQueryTarget(t)?a.push(t):s=s.then((function(){return u.removeAndCleanupTarget(t),u.localStore.releaseTarget(t,!0)})),u.remoteStore.unlisten(t)})),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},t.prototype.resetLimboDocuments=function(){var t=this;w(this.limboResolutionsByTarget,(function(e){t.remoteStore.unlisten(e)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new gt(at.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return It.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,d,p;return It.__generator(this,(function(m){switch(m.label){case 0:e=[],n=[],r=0,i=t,m.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return m.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=m.sent(),u=0,c=s,m.label=4;case 4:return u<c.length?(l=c[u],f(!!(h=this.queryViewsByQuery.get(l)),"No query view found for "+l),[4,this.synchronizeViewAndComputeSnapshot(h)]):[3,7];case 5:(d=m.sent()).snapshot&&n.push(d.snapshot),m.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return f(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return f(!!(p=m.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return a=m.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:m.sent(),m.label=12;case 12:e.push(a),m.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,e]}}))}))},t.prototype.synthesizeTargetToQuery=function(t){return new tr(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,Jn.First,t.startAt,t.endAt)},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return It.__awaiter(this,void 0,void 0,(function(){var r,i;return It.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return u("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Vr.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(t,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(t,n),[3,7];case 6:h("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},t.prototype.applyActiveTargetsChange=function(t,e){return It.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h=this;return It.__generator(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,d.label=1;case 1:return n<r.length?(l=r[n],f(!this.queriesByTarget[l],"Trying to add an already active target"),[4,this.localStore.getTarget(l)]):[3,6];case 2:return f(!!(i=d.sent()),"Query data for active target "+l+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:a=function(t){return It.__generator(this,(function(e){switch(e.label){case 0:return s.queriesByTarget[t]?[4,s.localStore.releaseTarget(t,!1).then((function(){h.remoteStore.unlisten(t),h.removeAndCleanupTarget(t)})).catch(Mn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},s=this,u=0,c=e,d.label=7;case 7:return u<c.length?(l=c[u],[5,a(l)]):[3,10];case 8:d.sent(),d.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];if(e&&e.receivedDocument)return Rt().add(e.key);var n=Rt(),r=this.queriesByTarget[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);f(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},t}(),Si=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}();function xi(t,e){return f(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function Ii(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function ki(t,e){return"firestore_targets_"+t+"_"+e}
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ai="SharedClientState",Ci=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,f(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new g(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(c(Ai,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ni=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,f(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new g(r.error.code,r.error.message)),i?new t(e,r.state,o):(c(Ai,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Bt(),a=0;i&&a<r.activeTargetIds.length;++a)i=Yn(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(c(Ai,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Pi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in Sr&&"string"==typeof n.clientId?new t(n.clientId,Sr[n.onlineState]):(c(Ai,"Failed to parse online state: "+e),null)},t}(),Li=function(){function t(){this.activeTargetIds=Bt()}return t.prototype.addQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Di=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new g(m.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=xi(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.activeClients[this.localClientId]=new Li,this.clientStateKeyRe=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.onlineStateKey=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return It.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return It.__generator(this,(function(d){switch(d.label){case 0:return f(!this.started,"WebStorageSharedClientState already started"),f(null!==this.syncEngine,"syncEngine property must be set before calling start()"),f(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=d.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(xi(this.persistenceKey,r)))&&(o=Mi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,c=this.earlyEvents;u<c.length;u++)l=c[u],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Bt();return _(this.activeClients,(function(e,n){t=t.unionWith(n.activeTargetIds)})),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(ki(this.persistenceKey,t));if(n){var r=Ni.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(ki(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.removeMutationState(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return u(Ai,"READ",t,e),e},t.prototype.setItem=function(t,e){u(Ai,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){u(Ai,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(u(Ai,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void c("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return It.__awaiter(e,void 0,void 0,(function(){var e,n,r,i,o,a;return It.__generator(this,(function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(f(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=et.INVALID;if(null!=t)try{var n=JSON.parse(t);f("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){c(Ai,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==et.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Ci(this.currentUser,t,e,n),i=Ii(this.persistenceKey,this.currentUser,t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=Ii(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:Sr[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=ki(this.persistenceKey,t),i=new Ni(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return f(null!==n,"Cannot parse client state key '"+t+"'"),Mi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);f(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ci.fromWebStorageEntry(new Si(i),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);f(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ni.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return Pi.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(u(Ai,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]}))}))},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach((function(t){return It.__awaiter(n,void 0,void 0,(function(){return It.__generator(this,(function(e){return r.has(t)||o.push(t),[2]}))}))})),r.forEach((function(t){return It.__awaiter(n,void 0,void 0,(function(){return It.__generator(this,(function(e){return i.has(t)||a.push(t),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}();var Ri=function(){function t(){this.localState=new Li,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Li,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Oi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return Rn.withCacheSize(this.cacheSizeBytes)},t}(),Bi=function(){},Ui=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=z.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new st,r=new st,i=!1;return this.credentials.setChangeListener((function(o){i?e.asyncQueue.enqueueAndForget((function(){return e.handleCredentialChange(o)})):(i=!0,e.initializePersistence(t,r,o).then((function(t){return e.initializeRest(o,t)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.enableNetwork()}))},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Oi?this.startIndexedDbPersistence(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()})):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof g?t.code===m.FAILED_PRECONDITION||t.code===m.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code||11===t.code)},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new g(m.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=qn.buildStoragePrefix(this.databaseInfo),i=new fi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return It.__awaiter(n,void 0,void 0,(function(){var n,o;return It.__generator(this,(function(a){switch(a.label){case 0:if(e.synchronizeTabs&&!Di.isAvailable(this.platform))throw new g(m.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new Di(this.asyncQueue,this.platform,r,this.clientId,t):new Ri,[4,qn.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}}))}))}))},t.prototype.startMemoryPersistence=function(){return this.persistence=br.createEagerPersistence(this.clientId),this.sharedClientState=new Ri,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return u("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return It.__awaiter(n,void 0,void 0,(function(){var n,i,o,a,s,u,c=this;return It.__generator(this,(function(l){switch(l.label){case 0:return n=new pr,this.localStore=new Nn(this.persistence,n,t),[4,this.localStore.start()];case 1:return l.sent(),e&&(this.lruScheduler=new On(e,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),a=new Cr(this.asyncQueue,r,this.credentials,o),s=function(t){return c.syncEngine.applyOnlineStateChange(t,xr.RemoteStore)},u=function(t){return c.syncEngine.applyOnlineStateChange(t,xr.SharedClientState)},this.remoteStore=new Yr(this.localStore,a,this.asyncQueue,s,i),this.syncEngine=new Ti(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new pi(this.syncEngine),[4,this.sharedClientState.start()];case 2:return l.sent(),[4,this.remoteStore.start()];case 3:return l.sent(),[4,this.persistence.setPrimaryStateListener((function(t){return It.__awaiter(c,void 0,void 0,(function(){return It.__generator(this,(function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return It.__awaiter(c,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),u("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return It.__awaiter(t,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new st;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.registerPendingWritesCallback(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var i=new mi(t,e,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},t.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.unlisten(t)}))},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.localStore.readDocument(t)})).then((function(t){if(t instanceof je)return t;if(t instanceof qe)return null;throw new g(m.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return It.__awaiter(e,void 0,void 0,(function(){var e,n,r;return It.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return e=i.sent(),n=new bi(t,e.remoteKeys),r=n.computeDocChanges(e.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new st;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.write(t,n)})),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()}))},t.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(t.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new st;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()})),n.promise},t}(),Fi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ji=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];k("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(A("FieldPath","string",n,t[n]),0===t[n].length)throw new g(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ot.keyField().canonicalString()),t}(),qi=new RegExp("[~\\*/\\[\\]]");
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Vi=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},$i=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){f(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(Si.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){f(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),zi=function(){function t(t){var e=this;this.tokenListener=null,this.currentUser=Si.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),t.get().then((function(t){e.auth=t,e.tokenListener&&e.auth.addAuthTokenListener(e.tokenListener)}),(function(){})))}return t.prototype.getToken=function(){var t=this;f(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.tokenCounter!==e)throw new g(m.ABORTED,"getToken aborted due to token change.");return n?(f("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Vi(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){f(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){f(null!=this.tokenListener,"removeChangeListener() called twice"),f(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.auth&&this.auth.getUid();return f(null===t||"string"==typeof t,"Received invalid UID: "+t),new Si(t)},t}(),Hi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Si.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Gi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Hi(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Si.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Wi(t){if(!t)return new $i;switch(t.type){case"gapi":var e=t.client;return f(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Gi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new g(m.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ki(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,["next","error","complete"])}var Zi,Qi=function(){function t(t){this._methodName=t}return t.delete=function(){return T("FieldValue.delete",arguments),Yi.instance},t.serverTimestamp=function(){return T("FieldValue.serverTimestamp",arguments),Ji.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x("FieldValue.arrayUnion",arguments,1),new Xi(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x("FieldValue.arrayRemove",arguments,1),new to(t)},t.increment=function(t){return A("FieldValue.increment","number",1,t),S("FieldValue.increment",arguments,1),new eo(t)},t.prototype.isEqual=function(t){return this===t},t}(),Yi=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return It.__extends(e,t),e.instance=new e,e}(Qi),Ji=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return It.__extends(e,t),e.instance=new e,e}(Qi),Xi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return It.__extends(e,t),e}(Qi),to=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return It.__extends(e,t),e}(Qi),eo=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return It.__extends(e,t),e}(Qi),no=v(Qi,"Use FieldValue.<field>() instead."),ro=/^__.*__$/,io=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new be(t,this.data,this.fieldMask,e)):n.push(new ye(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new we(t,this.fieldTransforms)),n},t}(),oo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new be(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new we(t,this.fieldTransforms)),n},t}();function ao(t){switch(t){case Zi.Set:case Zi.MergeSet:case Zi.Update:return!0;case Zi.Argument:case Zi.ArrayArgument:return!1;default:throw h("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t[t.ArrayArgument=4]="ArrayArgument"}(Zi||(Zi={}));var so=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new g(m.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(0===t.length)throw this.createError("Document fields must not be empty");if(ao(this.dataSource)&&ro.test(t))throw this.createError('Document fields cannot begin and end with "__"')},t}(),uo=function(t,e){this.databaseId=t,this.key=e},co=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new so(Zi.Set,t,ot.EMPTY_PATH);ho("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new io(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new so(Zi.MergeSet,t,ot.EMPTY_PATH);ho("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new wt(ot.comparator),u=0,c=n;u<c.length;u++){var l=c[u],f=void 0;if(l instanceof ji)f=l._internalPath;else{if("string"!=typeof l)throw h("Expected stringOrFieldPath to be a string or a FieldPath");f=po(t,l)}if(!r.contains(f))throw new g(m.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");s=s.add(f)}i=he.fromSet(s),o=r.fieldTransforms.filter((function(t){return i.covers(t.field)}))}else i=he.fromArray(r.fieldMask),o=r.fieldTransforms;return new io(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new so(Zi.Update,t,ot.EMPTY_PATH);ho("Data must be an object, but it was:",r,e);var i=new wt(ot.comparator),o=Be.EMPTY;_(e,(function(e,a){var s=po(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Yi)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=he.fromSet(i);return new oo(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new so(Zi.Update,t,ot.EMPTY_PATH),o=[fo(t,e)],a=[n];if(r.length%2!=0)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(fo(t,r[s])),a.push(r[s+1]);var u=new wt(ot.comparator),c=Be.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Yi)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=he.fromSet(u);return new oo(c,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e,n){void 0===n&&(n=!1);var r=new so(n?Zi.ArrayArgument:Zi.Argument,t,ot.EMPTY_PATH),i=this.parseData(e,r);return f(null!=i,"Parsed data should not be null."),f(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=mo(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(lo(t=this.runPreConverter(t,e)))return ho("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Qi)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement&&e.dataSource!==Zi.ArrayArgument)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new gt(H);return E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_(t,(function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))})),new Be(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=xe.INSTANCE),n.push(s),r++}return new Ue(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!ao(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Yi){if(e.dataSource!==Zi.MergeSet)throw e.dataSource===Zi.Update?(f(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Ji)e.fieldTransforms.push(new fe(e.path,Xr.instance));else if(t instanceof Xi){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ti(n);e.fieldTransforms.push(new fe(e.path,r))}else if(t instanceof to){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ei(n);e.fieldTransforms.push(new fe(e.path,i))}else if(t instanceof eo){var o=this.parseQueryValue("FieldValue.increment",t._operand),a=new ni(o);e.fieldTransforms.push(new fe(e.path,a))}else h("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return xe.INSTANCE;if("number"==typeof t)return Yn(t)?new Ce(t):new Ne(t);if("boolean"==typeof t)return Ie.of(t);if("string"==typeof t)return new Me(t);if(t instanceof Date)return new Pe(pt.fromDate(t));if(t instanceof pt)return new Pe(new pt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Jr)return new Oe(t);if(t instanceof Y)return new De(t);if(t instanceof uo)return new Re(t.databaseId,t.key);throw e.createError("Unsupported field value: "+B(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map((function(e,r){var i=new so(Zi.Argument,t,ot.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))}))},t}();function lo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Jr||t instanceof Y||t instanceof uo||t instanceof Qi)}function ho(t,e,n){if(!lo(n)||!O(n)){var r=B(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function fo(t,e){if(e instanceof ji)return e._internalPath;if("string"==typeof e)return po(t,e);throw new g(m.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function po(t,e){try{return function(t){if(t.search(qi)>=0)throw new g(m.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ji.bind.apply(ji,It.__spreadArrays([void 0],t.split("."))))}catch(e){throw new g(m.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=mo(e);throw new g(m.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function mo(t){return t instanceof Error?t.message:t.toString()}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var go=Rn.COLLECTION_DISABLED,vo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new g(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else N("settings","non-empty string","host",t.host),this.host=t.host,M("settings","boolean","ssl",t.ssl),this.ssl=b(t.ssl,!0);if(F("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),M("settings","object","credentials",t.credentials),this.credentials=t.credentials,M("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?c("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&c("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=b(t.timestampsInSnapshots,!0),M("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Rn.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==go&&t.cacheSizeBytes<Rn.MINIMUM_CACHE_SIZE_BYTES)throw new g(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Rn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}M("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),yo=function(){function t(e,n){var r=this;if(this._firebaseApp=null,this._queue=new ct,this.INTERNAL={delete:function(){return It.__awaiter(r,void 0,void 0,(function(){return It.__generator(this,(function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var i=e;this._firebaseApp=i,this._databaseId=t.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new zi(n)}else{var o=e;if(!o.projectId)throw new g(m.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new tt(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new $i}this._settings=new vo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(S("Firestore.settings",arguments,1),A("Firestore.settings","object",1,t),y(t,"persistence"))throw new g(m.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new vo(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new g(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=Wi(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new g(m.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&c("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=b(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Oi(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=qn.buildStoragePrefix(this.makeDatabaseInfo()),n=new st;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return It.__awaiter(t,void 0,void 0,(function(){var t;return It.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new g(m.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,qn.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.ensureClientConfigured(),Ki(t))return this.onSnapshotsInSyncInternal(t);A("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.onSnapshotsInSyncInternal(e)},t.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new Fi({next:function(){t.next&&t.next()},error:function(t){throw h("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Bi),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new X(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){f(!!this._settings.host,"FirestoreSettings.host is not set"),f(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new Ui(d.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new co((function(e){if(e instanceof _o){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new g(m.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new uo(t,e._key)}return e}))},t.databaseIdFromApp=function(t){var e=t.options;if(!y(e,"projectId"))throw new g(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new g(m.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new tt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new g(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return S("Firestore.collection",arguments,1),A("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new ko(rt.fromString(t),this)},t.prototype.doc=function(t){return S("Firestore.doc",arguments,1),A("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),_o.forPath(rt.fromString(t),this)},t.prototype.collectionGroup=function(t){if(S("Firestore.collectionGroup",arguments,1),A("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new g(m.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new xo(new tr(rt.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return S("Firestore.runTransaction",arguments,1),A("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction((function(n){return t(new bo(e,n))}))},t.prototype.batch=function(){return this.ensureClientConfigured(),new wo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(a()){case n.DEBUG:return"debug";case n.ERROR:return"error";case n.SILENT:return"silent";default:return h("Unknown log level: "+a())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(S("Firestore.setLogLevel",arguments,1),A("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":s(n.DEBUG);break;case"error":s(n.ERROR);break;case"silent":s(n.SILENT);break;default:throw new g(m.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),bo=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;S("Transaction.get",arguments,1);var n=Mo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return h("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof qe)return new To(e._firestore,n._key,null,!1,!1,n._converter);if(r instanceof je)return new To(e._firestore,n._key,r,!1,!1,n._converter);throw h("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){I("Transaction.set",arguments,2,3);var r=Mo("Transaction.set",t,this._firestore);n=Ao("Transaction.set",n);var i=Lo(r._converter,e,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof ji?(x("Transaction.update",arguments,3),r=Mo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(S("Transaction.update",arguments,2),r=Mo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){S("Transaction.delete",arguments,1);var e=Mo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),wo=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){I("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Mo("WriteBatch.set",t,this._firestore);n=Ao("WriteBatch.set",n);var i=Lo(r._converter,e,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,ge.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof e||e instanceof ji?(x("WriteBatch.update",arguments,3),r=Mo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(S("WriteBatch.update",arguments,2),r=Mo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ge.exists(!0))),this},t.prototype.delete=function(t){S("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Mo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new _e(e._key,ge.NONE)),this},t.prototype.commit=function(){return It.__awaiter(this,void 0,void 0,(function(){return It.__generator(this,(function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new g(m.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),_o=function(){function t(t,e,n){this._key=t,this.firestore=e,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n,r){if(e.length%2!=0)throw new g(m.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new at(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ko(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(S("DocumentReference.collection",arguments,1),A("DocumentReference.collection","non-empty string",1,t),!t)throw new g(m.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=rt.fromString(t);return new ko(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)&&this._converter===e._converter},t.prototype.set=function(t,e){I("DocumentReference.set",arguments,1,2),e=Ao("DocumentReference.set",e);var n=Lo(this._converter,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,e.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,ge.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ji?(x("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(S("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ge.exists(!0)))},t.prototype.delete=function(){return S("DocumentReference.delete",arguments,0),this._firestoreClient.write([new _e(this._key,ge.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];I("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Ki(t[i])||(F("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),M("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Ki(t[i])?n=t[i]:(A("DocumentReference.onSnapshot","function",i,t[i]),C("DocumentReference.onSnapshot","function",i+1,t[i+1]),C("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Fi({next:function(t){if(e.next){f(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new To(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(tr.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return I("DocumentReference.get",arguments,0,1),No("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then((function(t){n(new To(e.firestore,e._key,t,!0,t instanceof je&&t.hasLocalMutations,e._converter))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new g(m.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new g(m.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this._key,this.firestore,e)},t}(),Eo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),To=function(){function t(t,e,n,r,i,o){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return t.prototype.data=function(t){if(I("DocumentSnapshot.data",arguments,0,1),t=Co("DocumentSnapshot.data",t),this._document){if(this._converter){var e=new So(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(e,t)}return this.toJSObject(this._document.data(),Te.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},t.prototype.get=function(t,e){if(I("DocumentSnapshot.get",arguments,1,2),e=Co("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(fo("DocumentSnapshot.get",t));if(null!==n)return this.toJSValue(n,Te.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new _o(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Eo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))&&this._converter===e._converter},t.prototype.toJSObject=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.toJSValue(i,e)})),r},t.prototype.toJSValue=function(t,e){if(t instanceof Be)return this.toJSObject(t,e);if(t instanceof Ue)return this.toJSArray(t,e);if(t instanceof Re){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||c("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new _o(n,this._firestore,this._converter)}return t.value(e)},t.prototype.toJSArray=function(t,e){var n=this;return t.internalValue.map((function(t){return n.toJSValue(t,e)}))},t}(),So=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return It.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return f(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},e}(To),xo=function(){function t(t,e,n){this._query=t,this.firestore=e,this._converter=n}return t.prototype.where=function(e,n,r){S("Query.where",arguments,3),U("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];D("Query.where",o,2,n);var a=fo("Query.where",e),s=nr.fromString(n);if(a.isKeyField()){if(s===nr.ARRAY_CONTAINS||s===nr.ARRAY_CONTAINS_ANY)throw new g(m.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===nr.IN){this.validateDisjunctiveFilterElements(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.parseDocumentIdValue(h))}i=new Ue(u)}else i=this.parseDocumentIdValue(r)}else s!==nr.IN&&s!==nr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===nr.IN);var f=rr.create(a,s,i);return this.validateNewFilter(f),new t(this._query.addFilter(f),this.firestore,this._converter)},t.prototype.orderBy=function(e,n){var r;if(I("Query.orderBy",arguments,1,2),C("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=cr.ASCENDING;else{if("desc"!==n)throw new g(m.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=cr.DESCENDING}if(null!==this._query.startAt)throw new g(m.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new g(m.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=fo("Query.orderBy",e),o=new hr(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore,this._converter)},t.prototype.limit=function(e){return S("Query.limit",arguments,1),A("Query.limit","number",1,e),q("Query.limit",1,e),new t(this._query.withLimitToFirst(e),this.firestore,this._converter)},t.prototype.limitToLast=function(e){return S("Query.limitToLast",arguments,1),A("Query.limitToLast","number",1,e),q("Query.limitToLast",1,e),new t(this._query.withLimitToLast(e),this.firestore,this._converter)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore,this._converter)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore,this._converter)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore,this._converter)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore,this._converter)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.withConverter=function(e){return new t(this._query,this.firestore,e)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(U(t,1,e),e instanceof To){if(n.length>0)throw new g(m.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new g(m.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Re(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof Le)throw new g(m.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new g(m.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new lr(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new g(m.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new g(m.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(rt.fromString(a));if(!at.isDocumentKey(s))throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new at(s);i.push(new Re(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,a);i.push(c)}}return new lr(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];I("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Ki(t[i])||(F("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),M("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Ki(t[i])?n=t[i]:(A("Query.onSnapshot","function",i,t[i]),C("Query.onSnapshot","function",i+1,t[i+1]),C("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Fi({next:function(t){e.next&&e.next(new Io(n.firestore,n._query,t,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.validateHasExplicitOrderByForLimitToLast=function(t){if(t.hasLimitToLast()&&0===t.explicitOrderBy.length)throw new g(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return I("Query.get",arguments,0,1),No("Query.get",t),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then((function(t){n(new Io(e.firestore,e._query,t,e._converter))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new g(m.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(rt.fromString(t));if(!at.isDocumentKey(e))throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Re(this.firestore._databaseId,new at(e))}if(t instanceof _o){var n=t;return new Re(this.firestore._databaseId,n._key)}throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+B(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new g(m.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new g(m.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new g(m.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new g(m.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(t){if(t instanceof rr){var e=[nr.ARRAY_CONTAINS,nr.ARRAY_CONTAINS_ANY],n=[nr.IN,nr.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new g(m.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(t.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(e)),null!=s)throw s===t.op?new g(m.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new g(m.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new g(m.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Io=function(){function t(t,e,n,r){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Eo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;I("QuerySnapshot.forEach",arguments,1,2),A("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach((function(r){t.call(e,n.convertToDocumentImpl(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new xo(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(F("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),M("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new g(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(e){var a=new So(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r);return f(e.type===Or.Added,"Invalid event type for first snapshot"),f(!i||n.query.docComparator(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(t){return e||t.type!==Or.Metadata})).map((function(e){var i=new So(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r),o=-1,s=-1;return e.type!==Or.Added&&(f((o=a.indexOf(e.doc.key))>=0,"Index for document not found"),a=a.delete(e.doc.key)),e.type!==Or.Removed&&(s=(a=a.add(e.doc)).indexOf(e.doc.key)),{type:Po(e.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,e,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)&&this._converter===e._converter},t.prototype.convertToDocumentImpl=function(t){return new So(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key),this._converter)},t}();It.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(Io.prototype.docChanges,t,{get:function(){return function(){throw new g(m.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var ko=function(t){function e(e,n,r){var i=t.call(this,tr.atPath(e),n,r)||this;if(i._path=e,e.length%2!=1)throw new g(m.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return i}return It.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new _o(new at(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(I("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=z.newId()),A("CollectionReference.doc","non-empty string",1,t),""===t)throw new g(m.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=rt.fromString(t);return _o.forPath(this._query.path.child(e),this.firestore,this._converter)},e.prototype.add=function(t){S("CollectionReference.add",arguments,1),A("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this._path,this.firestore,t)},e}(xo);function Ao(t,e){if(void 0===e)return{merge:!1};if(F(t,e,["merge","mergeFields"]),M(t,"boolean","merge",e.merge),P(t,"mergeFields","a string or a FieldPath",e.mergeFields,(function(t){return"string"==typeof t||t instanceof ji})),void 0!==e.mergeFields&&void 0!==e.merge)throw new g(m.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Co(t,e){return void 0===e?{}:(F(t,e,["serverTimestamps"]),L(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function No(t,e){C(t,"object",1,e),e&&(F(t,e,["source"]),L(t,0,"source",e.source,["default","server","cache"]))}function Mo(t,e,n){if(e instanceof _o){if(e.firestore!==n)throw new g(m.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw j(t,"DocumentReference",1,e)}function Po(t){switch(t){case Or.Added:return"added";case Or.Modified:case Or.Metadata:return"modified";case Or.Removed:return"removed";default:return h("Unknown change type: "+t)}}function Lo(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var Do=v(yo,"Use firebase.firestore() instead."),Ro=v(bo,"Use firebase.firestore().runTransaction() instead."),Oo=v(wo,"Use firebase.firestore().batch() instead."),Bo=v(_o,"Use firebase.firestore().doc() instead."),Uo=v(To),Fo=v(So),jo=v(xo),qo=v(Io),Vo=v(ko,"Use firebase.firestore().collection() instead."),$o={Firestore:Do,GeoPoint:Jr,Timestamp:pt,Blob:J,Transaction:Ro,WriteBatch:Oo,DocumentReference:Bo,DocumentSnapshot:Uo,Query:jo,QueryDocumentSnapshot:Fo,QuerySnapshot:qo,CollectionReference:Vo,FieldPath:ji,FieldValue:no,setLogLevel:yo.setLogLevel,CACHE_SIZE_UNLIMITED:go};function zo(t){t.INTERNAL.registerComponent(new At.Component("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new yo(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(t){f(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}($o)))}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ho=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),Go=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){u("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++){(0,e[t])(0)}},t.prototype.onNetworkUnavailable=function(){u("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++){(0,e[t])(1)}},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Wo=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){f(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){f(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){f(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){f(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){f(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){f(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),Ko="Connection",Zo={BatchGetDocuments:"batchGet",Commit:"commit"},Qo="gl-js/ fire/"+i,Yo=function(){function t(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Qo},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise((function(o,a){var s=new Vt.XhrIo;s.listenOnce(Vt.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Vt.ErrorCode.NO_ERROR:var e=s.getResponseJson();u(Ko,"XHR received:",JSON.stringify(e)),o(e);break;case Vt.ErrorCode.TIMEOUT:u(Ko,'RPC "'+t+'" timed out'),a(new g(m.DEADLINE_EXCEEDED,"Request time out"));break;case Vt.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(u(Ko,'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=(c=r.status,l=c.toLowerCase().replace("_","-"),Object.values(m).indexOf(l)>=0?l:m.UNKNOWN);a(new g(i,r.message))}else a(new g(m.UNKNOWN,"Server responded with status "+s.getStatus()))}else u(Ko,'RPC "'+t+'" failed'),a(new g(m.UNAVAILABLE,"Connection failed."));break;default:h('RPC "'+t+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{u(Ko,'RPC "'+t+'" completed.')}var c,l}));var c=It.__assign({},e);delete c.database;var l=JSON.stringify(c);u(Ko,"XHR sending: ",i+" "+l);var f={"Content-Type":"text/plain"};r.modifyHeadersForRequest(f,n),s.send(i,"POST",l,f,15)}))},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Vt.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),kt.isReactNative()||kt.isElectron()||kt.isIE()||kt.isUWP()||kt.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");u(Ko,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,c=!1,l=new Wo({sendFn:function(t){c?u(Ko,"Not sending because WebChannel is closed:",t):(s||(u(Ko,"Opening WebChannel transport."),a.open(),s=!0),u(Ko,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),h=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(Vt.WebChannel.EventType.OPEN,(function(){c||u(Ko,"WebChannel transport opened.")})),h(Vt.WebChannel.EventType.CLOSE,(function(){c||(c=!0,u(Ko,"WebChannel transport closed"),l.callOnClose())})),h(Vt.WebChannel.EventType.ERROR,(function(t){c||(c=!0,u(Ko,"WebChannel transport errored:",t),l.callOnClose(new g(m.UNAVAILABLE,"The operation could not be completed")))})),h(Vt.WebChannel.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];f(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){u(Ko,"WebChannel received error:",i);var o=i.status,s=function(t){var e=Mr[t];if(void 0!==e)return Dr(e)}(o),h=i.message;void 0===s&&(s=m.INTERNAL,h="Unknown error status: "+o+" with message "+i.message),c=!0,l.callOnClose(new g(s,h)),a.close()}else u(Ko,"WebChannel received:",n),l.callOnMessage(n)}})),setTimeout((function(){l.callOnOpen()}),0),l},t.prototype.makeUrl=function(t){var e=Zo[t];return f(void 0!==e,"Unknown REST mapping for: "+t),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+e},t}(),Jo=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new Yo(t))},t.prototype.newConnectivityMonitor=function(){return Go.isAvailable()?new Go:new Ho},t.prototype.newSerializer=function(t){return new fi(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
d.setPlatform(new Jo);
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Xo(t){zo(t),t.registerVersion("@firebase/firestore","1.10.0")}Xo(r),e.registerFirestore=Xo})));St($t);$t.registerFirestore;var zt=xt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(Nt),r=function(){function t(t,e){this.code_=T(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return T(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),i="unknown",o="object-not-found",a="quota-exceeded",s="unauthenticated",u="unauthorized",c="retry-limit-exceeded",l="canceled",h="invalid-url",f="invalid-default-bucket",d="no-default-bucket",p="cannot-slice-blob",m="server-file-wrong-size",g="no-download-url",v="invalid-argument",y="invalid-argument-count",b="app-deleted",w="invalid-root-operation",_="invalid-format",E="internal-error";
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function T(t){return"storage/"+t}function S(){return new r(i,"An unknown error occurred, please check the error payload for server response.")}function x(){return new r(l,"User canceled the upload/download.")}function I(){return new r(p,"Cannot slice blob for upload. Please retry the upload.")}function k(){return new r(g,"The given file does not have any download URLs.")}function A(t,e,n){return new r(v,"Invalid argument in `"+e+"` at index "+t+": "+n)}function C(){return new r(b,"The Firebase app was deleted.")}function N(t,e){return new r(_,"String does not match format '"+t+"': "+e)}function M(t){throw new r(E,"Internal error: "+t)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var P={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function L(t){switch(t){case P.RAW:case P.BASE64:case P.BASE64URL:case P.DATA_URL:return;default:throw"Expected one of the event types: ["+P.RAW+", "+P.BASE64+", "+P.BASE64URL+", "+P.DATA_URL+"]."}}var D=function(t,e){this.data=t,this.contentType=e||null};function R(t,e){switch(t){case P.RAW:return new D(O(e));case P.BASE64:case P.BASE64URL:return new D(B(t,e));case P.DATA_URL:return new D((n=new U(e)).base64?B(P.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw N(P.DATA_URL,"Malformed data URL.")}return O(e)}(n.rest),function(t){return new U(t).contentType}(e))}var n;throw S()}function O(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function B(t,e){switch(t){case P.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw N(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case P.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw N(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw N(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var U=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw N(P.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */};var F,j={STATE_CHANGED:"state_changed"},q="running",V="pausing",$="paused",z="success",H="canceling",G="canceled",W="error",K={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Z(t){switch(t){case q:case V:case H:return K.RUNNING;case $:return K.PAUSED;case z:return K.SUCCESS;case G:return K.CANCELED;case W:default:return K.ERROR}}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Q(t){return null!=t}function Y(t){return void 0!==t}function J(t){return"function"==typeof t}function X(t){return"object"==typeof t}function tt(t){return X(t)&&null!==t}function et(t){return"string"==typeof t||t instanceof String}function nt(t){return rt(t)&&Number.isInteger(t)}function rt(t){return"number"==typeof t||t instanceof Number}function it(t){return ot()&&t instanceof Blob}function ot(){return"undefined"!=typeof Blob}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(F||(F={}));
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var at=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=F.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=F.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=F.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw M("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Q(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Q(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw M("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw M("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw M("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Q(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Q(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),st=function(){function t(){}return t.prototype.createXhrIo=function(){return new at},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ut(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ut();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ot())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var lt=function(){function t(t,e){var n=0,r="";it(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(it(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ot()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(ct.apply(null,r))}var i=e.map((function(t){return et(t)?R(P.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),ht=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new r(f,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null;var i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],s=0;s<a.length;s++){var u=a[s],c=u.regex.exec(e);if(c){var l=c[u.indices.bucket],f=c[u.indices.path];f||(f=""),n=new t(l,f),u.postModify(n);break}}if(null==n)throw function(t){return new r(h,"Invalid URL '"+t+"'.")}(e);return n},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ft(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return X(n=e)&&!Array.isArray(n)?e:null}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function dt(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function pt(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mt(t){return"https://firebasestorage.googleapis.com/v0"+t}function gt(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vt(t,e){return e}var yt=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||vt},bt=null;function wt(){if(bt)return bt;var t=[];t.push(new yt("bucket")),t.push(new yt("generation")),t.push(new yt("metageneration")),t.push(new yt("name","fullPath",!0));var e=new yt("name");e.xform=function(t,e){return function(t){return!et(t)||t.length<2?t:pt(t)}(e)},t.push(e);var n=new yt("size");return n.xform=function(t,e){return Q(e)?Number(e):e},t.push(n),t.push(new yt("timeCreated")),t.push(new yt("updated")),t.push(new yt("md5Hash",null,!0)),t.push(new yt("cacheControl",null,!0)),t.push(new yt("contentDisposition",null,!0)),t.push(new yt("contentEncoding",null,!0)),t.push(new yt("contentLanguage",null,!0)),t.push(new yt("contentType",null,!0)),t.push(new yt("metadata","customMetadata",!0)),bt=t}function _t(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new ht(n,r);return e.makeStorageReference(i)}})}(r,t),r}function Et(t,e,n){var r=ft(e);return null===r?null:_t(t,r,n)}function Tt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function St(t){if(!X(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!X(n))throw"Expected object for 'customMetadata' mapping."}else if(tt(n))throw"Mapping for '"+e+"' cannot be an object."}}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xt(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},i=t.bucket();if(null===i)throw new r(d,"No default bucket found. Did you set the 'storageBucket' property when initializing the app?");if(e.prefixes)for(var o=0,a=e.prefixes;o<a.length;o++){var s=a[o].replace(/\/$/,""),u=t.makeStorageReference(new ht(i,s));n.prefixes.push(u)}if(e.items)for(var c=0,l=e.items;c<l.length;c++){var h=l[c];u=t.makeStorageReference(new ht(i,h.name));n.items.push(u)}return n}function kt(t){if(!X(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!nt(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!et(t.pageToken))throw"Expected pageToken to be string."}}var Ct=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mt(t){if(!t)throw S()}function Pt(t,e){return function(n,r){var i=Et(t,r,e);return Mt(null!==i),i}}function Lt(t){return function(e,n){var r=function(t,e){var n=ft(e);return null===n?null:xt(t,n)}(t,n);return Mt(null!==r),r}}function Dt(t,e){return function(n,r){var i=Et(t,r,e);return Mt(null!==i),function(t,e){var n=ft(e);if(null===n)return null;if(!et(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return mt("/b/"+i(n)+"/o/"+i(r))+gt({alt:"media",token:e})}))[0]}(i,r)}}function Rt(t){return function(e,n){var i,o,c;return 401===e.getStatus()?i=new r(s,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(c=t.bucket,i=new r(a,"Quota for bucket '"+c+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(o=t.path,i=new r(u,"User does not have permission to access '"+o+"'.")):i=n,i.setServerResponseProp(n.serverResponseProp()),i}}function Ot(t){var e=Rt(t);return function(n,i){var a,s=e(n,i);return 404===n.getStatus()&&(a=t.path,s=new r(o,"Object '"+a+"' does not exist.")),s.setServerResponseProp(i.serverResponseProp()),s}}function Bt(t,e,n){var r=mt(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Ct(r,"GET",Pt(t,n),i);return o.errorHandler=Ot(e),o}function Ut(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=mt(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime(),u=new Ct(a,"GET",Lt(t),s);return u.urlParams=o,u.errorHandler=Rt(e),u}function Ft(t,e,n){var r=mt(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Ct(r,"GET",Dt(t,n),i);return o.errorHandler=Ot(e),o}function jt(t,e,n,r){var i=mt(e.fullServerUrl()),o=Tt(n,r),a=t.maxOperationRetryTime(),s=new Ct(i,"PATCH",Pt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Ot(e),s}function qt(t,e){var n=mt(e.fullServerUrl()),r=t.maxOperationRetryTime();var i=new Ct(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Ot(e),i}function Vt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var $t=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function zt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Mt(!1)}return Mt(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Ht(t,e,n,i,o,a,s,u){var c=new $t(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw new r(m,"Server recorded incorrect upload file size, please retry the upload.");var l=c.total-c.current,h=l;o>0&&(h=Math.min(h,o));var f=c.current,d=f+h,p={"X-Goog-Upload-Command":h===l?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},g=i.slice(f,d);if(null===g)throw I();var v=e.maxUploadRetryTime(),y=new Ct(n,"POST",(function(t,n){var r,o=zt(t,["active","final"]),s=c.current+h,u=i.size();return r="final"===o?Pt(e,a)(t,n):null,new $t(s,u,"final"===o,r)}),v);return y.headers=p,y.body=g.uploadData(),y.progressCallback=u||null,y.errorHandler=Rt(t),y}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gt=function(t,e,n){if(J(t)||Q(e)||Q(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Wt=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Kt(t,e,n){for(var i=e.length,o=e.length,a=0;a<e.length;a++)if(e[a].optional){i=a;break}var s,u,c,l,h,f;if(!(i<=n.length&&n.length<=o))throw s=i,u=o,c=t,l=n.length,s===u?(h=s,f=1===s?"argument":"arguments"):(h="between "+s+" and "+u,f="arguments"),new r(y,"Invalid argument count in `"+c+"`: Expected "+h+" "+f+", received "+l+".");for(a=0;a<n.length;a++)try{e[a].validator(n[a])}catch(e){throw e instanceof Error?A(a,t,e.message):A(a,t,e)}}var Zt=function(t,e){var n=this;this.validator=function(e){n.optional&&!Y(e)||t(e)},this.optional=!!e};function Qt(t,e){function n(t){if(!et(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new Zt(r,e)}function Yt(){return new Zt((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||ot()&&t instanceof Blob))throw"Expected Blob or File."}))}function Jt(t){return new Zt(St,t)}function Xt(t){return new Zt(kt,t)}function te(){return new Zt((function(t){if(!(rt(t)&&t>=0))throw"Expected a number 0 or greater."}))}function ee(t,e){return new Zt((function(e){if(!(null===e||Q(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function ne(t){return new Zt((function(t){if(!(null===t||J(t)))throw"Expected a Function."}),t)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function re(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ie=function(){function t(t,e,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=q,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(l)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(W))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(l)?a.completeTransitions_():(a.error_=t,a.transition_(W))},this.promise_=new Promise((function(t,e){a.resolve_=t,a.reject_=e,a.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===q&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case q:t(n);break;case H:e.transition_(G);break;case V:e.transition_($)}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Vt(e,r,i),s={name:a.fullPath},u=mt(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Tt(a,n),h=t.maxUploadRetryTime(),f=new Ct(u,"POST",(function(t){var e;zt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Mt(!1)}return Mt(et(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=Rt(e),f}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new Ct(n,"POST",(function(t){var e=zt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Mt(!1)}n||Mt(!1);var i=Number(n);return Mt(!isNaN(i)),new $t(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Rt(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new $t(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=Ht(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(W)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(z)):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=Bt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(z)}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Vt(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Tt(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=lt.getBlob(c,r,l);if(null===h)throw I();var f={name:u.fullPath},d=mt(o),p=t.maxUploadRetryTime(),m=new Ct(d,"POST",Pt(t,n),p);return m.urlParams=f,m.headers=a,m.body=h.uploadData(),m.errorHandler=Rt(e),m}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(z)}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case H:case V:this.state_=t,null!==this.request_&&this.request_.cancel();break;case q:var e=this.state_===$;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case $:this.state_=t,this.notifyObservers_();break;case G:this.error_=x(),this.state_=t,this.notifyObservers_();break;case W:case z:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case V:this.transition_($);break;case H:this.transition_(G);break;case q:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Z(this.state_);return new Wt(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==j.STATE_CHANGED)throw"Expected one of the event types: ["+j.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=ne(!0).validator,s=ee(null,!0).validator;function u(t){try{return void a(t)}catch(t){}try{if(s(t),!(Y(t.next)||Y(t.error)||Y(t.complete)))throw"";return}catch(t){throw o}}var c=[Qt(i),ee(u,!0),ne(!0),ne(!0)];Kt("on",c,arguments);var l=this;function h(t){return function(e,n,i){null!==t&&Kt("on",t,arguments);var o=new Gt(e,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function f(t){if(null===t)throw o;u(t)}var d=[ee(f),ne(!0),ne(!0)],p=!(Y(e)||Y(n)||Y(r));return p?h(d):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Z(this.state_)){case K.SUCCESS:re(this.resolve_.bind(null,this.snapshot))();break;case K.CANCELED:case K.ERROR:re(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Z(this.state_)){case K.RUNNING:case K.PAUSED:t.next&&re(t.next.bind(t,this.snapshot))();break;case K.SUCCESS:t.complete&&re(t.complete.bind(t))();break;case K.CANCELED:case K.ERROR:t.error&&re(t.error.bind(t,this.error_))();break;default:t.error&&re(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){Kt("resume",[],arguments);var t=this.state_===$||this.state_===V;return t&&this.transition_(q),t},t.prototype.pause=function(){Kt("pause",[],arguments);var t=this.state_===q;return t&&this.transition_(V),t},t.prototype.cancel=function(){Kt("cancel",[],arguments);var t=this.state_===q||this.state_===V;return t&&this.transition_(H),t},t}(),oe=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof ht?e:ht.makeFromUrl(e)}return t.prototype.toString=function(){return Kt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return wt()},t.prototype.child=function(t){Kt("child",[Qt()],arguments);var e=dt(this.location.path,t),n=new ht(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new ht(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new ht(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return pt(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),Kt("put",[Yt(),Jt(!0)],arguments),this.throwIfRoot_("put"),new ie(this,this.authWrapper,this.location,this.mappings(),new lt(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=P.RAW),Kt("putString",[Qt(),Qt(L,!0),Jt(!0)],arguments),this.throwIfRoot_("putString");var r=R(e,t),i=Object.assign({},n);return!Q(i.contentType)&&Q(r.contentType)&&(i.contentType=r.contentType),new ie(this,this.authWrapper,this.location,this.mappings(),new lt(r.data,!0),i)},t.prototype.delete=function(){var t=this;return Kt("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=qt(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){Kt("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return It.__awaiter(this,void 0,void 0,(function(){var n,r,i,o;return It.__generator(this,(function(a){switch(a.label){case 0:return n={pageToken:e},[4,this.list(n)];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){Kt("list",[Xt(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=Ut(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return Kt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=Bt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return Kt("updateMetadata",[Jt()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=jt(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return Kt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=Ft(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw k();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new r(w,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),ae=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),se=function(){function t(){this.map=new Map,this.id=-9007199254740991}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},t.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},t}(),ue=function(){function t(e,n,r,i,o,a){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var s=this.app_.options;Q(s)&&(this.bucket_=t.extractBucket_(s))}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=a,this.service_=o,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new se}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:ht.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw C();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new ae(C());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ce=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var i,o=t.resolve_,a=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var u=t.callback_(s,s.getResponseText());Y(u)?o(u):o()}catch(t){a(t)}else null!==s?((i=S()).setServerResponseProp(s.getResponseText()),t.errorCallback_?a(t.errorCallback_(s,i)):a(i)):n.canceled?a(i=t.appDelete_?C():x()):a(i=new r(c,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new le(!1,null,!0)):this.backoffId_=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,s())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,It.__spreadArrays([null,t],e));else{var i,h=s()||o;if(h)c.call.apply(c,It.__spreadArrays([null,t],e));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i)}}var f=!1;function d(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new le(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===F.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new le(a,n))}else{var s=n.getErrorCode()===F.ABORT;e(!1,new le(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),le=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function he(t,e,r){var i=gt(t.urlParams),o=t.url+i,a=Object.assign({},t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,e),function(t){var e=void 0!==n?n.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(a),new ce(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fe=function(){function t(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new ue(t,e,(function(t,e){return new oe(t,e)}),he,this,n),this.app_=t,null!=r)this.bucket_=ht.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new ht(i,""))}this.internals_=new de(this)}return t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(Kt("ref",[Qt(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new oe(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{ht.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}}return Kt("refFromURL",[Qt(e,!1)],arguments),new oe(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){Kt("setMaxUploadRetryTime",[te()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){Kt("setMaxOperationRetryTime",[te()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),de=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}();function pe(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new fe(n,r,new st,e)}function me(t){var e={TaskState:K,TaskEvent:j,StringFormat:P,Storage:fe,Reference:oe};t.INTERNAL.registerComponent(new At.Component("storage",pe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.3.25")}me(n),e.registerStorage=me}));St(zt);zt.registerStorage;Lt.initializeApp({apiKey:"AIzaSyD_45MNWrQTmuTRihzYixmEdng5aEqPZog",authDomain:"avtokartaclub.firebaseapp.com",databaseURL:"https://avtokartaclub.firebaseio.com",projectId:"avtokartaclub",storageBucket:"avtokartaclub.appspot.com",messagingSenderId:"945284768758",appId:"1:945284768758:web:6476f85af52e50c08cddd7"});Lt.auth(),new Lt.auth.GoogleAuthProvider;const Ht=Lt.firestore(),Gt=Lt.storage();function Wt(t){let e;const n=t[6].default,r=l(n,t,t[5],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&32&e&&r.p(h(n,t,t[5],null),f(n,t[5],e,null))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Kt(t){let e,n,r=t[0]&&Wt(t);return{c(){r&&r.c(),e=I()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),lt(r,1)):(r=Wt(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function Zt(t,e,n){let{firebase:r}=e,{perf:i=!1}=e,{analytics:o=!1}=e,a=!1;const s=G();var u,c;r=r||window.firebase,u="firebase",c=r,$().$$.context.set(u,c),z(()=>{if(!r)throw Error("No firebase app was provided. You must provide an initialized Firebase app or make it available globally.");i&&r.performance(),o&&r.analytics(),s("initializeApp",{firebase:r}),n(0,a=!0)});let{$$slots:l={},$$scope:h}=e;return t.$set=t=>{"firebase"in t&&n(1,r=t.firebase),"perf"in t&&n(2,i=t.perf),"analytics"in t&&n(3,o=t.analytics),"$$scope"in t&&n(5,h=t.$$scope)},[a,r,i,o,s,h,l]}class Qt extends wt{constructor(t){super(),bt(this,t,Zt,Kt,s,{firebase:1,perf:2,analytics:3})}}const Yt=[];function Jt(t,e){return{subscribe:Xt(t,e).subscribe}}function Xt(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!Yt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),Yt.push(n,e)}if(t){for(let t=0;t<Yt.length;t+=2)Yt[t][0](Yt[t+1]);Yt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const u=[a,s];return i.push(u),1===i.length&&(r=n(o)||t),a(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}function te(e,n,r){const i=!Array.isArray(e),s=i?[e]:e,c=n.length<2;return Jt(r,e=>{let r=!1;const l=[];let h=0,f=t;const d=()=>{if(h)return;f();const r=n(i?l[0]:l,e);c?e(r):f=a(r)?r:t},p=s.map((t,e)=>u(t,t=>{l[e]=t,h&=~(1<<e),r&&d()},()=>{h|=1<<e}));return r=!0,d(),function(){o(p),f()}})}function ee(){return t="firebase",$().$$.context.get(t);var t}function ne(t){const e=ee();if(!e)throw new Error("Missing Firebase app in context. Are you inside a 'FirebaseApp' component?");if(t){const n=e[t];if(n&&n())return n();throw new Error(`Firebase ${t} not found. You may be missing "import 'firebase/${t}'" `)}return e}const re=t=>({user:1&t}),ie=t=>({user:t[0],auth:t[1].auth}),oe=t=>({user:1&t}),ae=t=>({user:t[0],auth:t[1].auth}),se=t=>({user:1&t}),ue=t=>({user:t[0],auth:t[1].auth}),ce=t=>({user:1&t}),le=t=>({user:t[0],auth:t[1].auth});function he(t){let e;const n=t[6]["signed-out"],r=l(n,t,t[5],ae);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&33&e&&r.p(h(n,t,t[5],ae),f(n,t[5],e,oe))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function fe(t){let e;const n=t[6].default,r=l(n,t,t[5],ue);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&33&e&&r.p(h(n,t,t[5],ue),f(n,t[5],e,se))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function de(t){let e,n,r,i,o;const a=t[6].before,s=l(a,t,t[5],le),u=[fe,he],c=[];function d(t,e){return t[0]?0:1}n=d(t),r=c[n]=u[n](t);const p=t[6].after,m=l(p,t,t[5],ie);return{c(){s&&s.c(),e=x(),r.c(),i=x(),m&&m.c()},m(t,r){s&&s.m(t,r),w(t,e,r),c[n].m(t,r),w(t,i,r),m&&m.m(t,r),o=!0},p(t,[e]){s&&s.p&&33&e&&s.p(h(a,t,t[5],le),f(a,t[5],e,ce));let o=n;n=d(t),n===o?c[n].p(t,e):(ut(),ht(c[o],1,1,()=>{c[o]=null}),ct(),r=c[n],r||(r=c[n]=u[n](t),r.c()),lt(r,1),r.m(i.parentNode,i)),m&&m.p&&33&e&&m.p(h(p,t,t[5],ie),f(p,t[5],e,re))},i(t){o||(lt(s,t),lt(r),lt(m,t),o=!0)},o(t){ht(s,t),ht(r),ht(m,t),o=!1},d(t){s&&s.d(t),t&&_(e),c[n].d(t),t&&_(i),m&&m.d(t)}}}function pe(t,e,n){let r,{persist:i=null}=e,o=function(t={persist:null}){const e=ne("auth");let n=null;const{persist:r}=t;r&&(n=JSON.parse(t.persist.getItem("sveltefire_user")));const i=Xt(n,()=>{const n=e.onAuthStateChanged(e=>{a(e),r&&t.persist.setItem("sveltefire_user",JSON.stringify(e))});return()=>n}),{subscribe:o,set:a}=i;return{subscribe:o,auth:e}}({persist:i});c(t,o,t=>n(0,r=t));const a=G();let s;z(()=>{s=o.subscribe(t=>{a("user",{user:t})})}),H(()=>s());let{$$slots:u={},$$scope:l}=e;return t.$set=t=>{"persist"in t&&n(2,i=t.persist),"$$scope"in t&&n(5,l=t.$$scope)},[r,o,i,s,a,l,u]}class me extends wt{constructor(t){super(),bt(this,t,pe,de,s,{persist:2})}}function ge(t){const e=ne("performance").trace(t);return e.start(),e}async function ve(t){return 2===t.state&&t.stop(),null}function ye(t,e){const n=ne("firestore"),{startWith:r,log:i,traceId:o,maxWait:a,once:s}={maxWait:1e4,...e},u="string"==typeof t?n.doc(t):t,c=o&&ge(o);let l,h,f=void 0!==typeof r,d=!0,p=null;const m=(t,e)=>{f=!1,d=!1,h&&clearTimeout(h),p=e||null,y(t),c&&ve(c)},g=Xt(r,()=>(h=a&&setTimeout(()=>f&&m(null,new Error(`Timeout at ${a}. Using fallback slot.`)),a),l=u.onSnapshot(t=>{const e=t.data()||d&&r||null;i&&(console.groupCollapsed(`Doc ${t.id}`),console.log(`Path: ${u.path}`),console.log("Snapshot:",t),console.groupEnd()),m(e),s&&l()},t=>{console.error(t),m(null,t)}),()=>l())),{subscribe:v,set:y}=g;return{subscribe:v,firestore:n,ref:u,get loading(){return f},get error(){return p}}}function be(t,e,n){const r=ne("firestore"),{startWith:i,log:o,traceId:a,maxWait:s,once:u,idField:c,refField:l}={idField:"id",refField:"ref",maxWait:1e4,...n},h="string"==typeof t?r.collection(t):t,f=e&&e(h),d=a&&ge(a);let p,m,g=void 0!==typeof i,v=null,y={};const b=(t,e)=>{g=!1,m&&clearTimeout(m),v=e||null,y=(t=>t&&t.length?{first:t[0],last:t[t.length-1]}:{})(t),E(t),d&&ve(d)},w=Xt(i,()=>(m=s&&setTimeout(()=>g&&b(null,new Error(`Timeout at ${s}. Using fallback slot.`)),s),p=(f||h).onSnapshot(t=>{const e=t.docs.map(t=>({...t.data(),...c?{[c]:t.id}:null,...l?{[l]:t.ref}:null}));if(o){const n=g?"New Query":"Updated Query";console.groupCollapsed(`${n} ${h.id} | ${e.length} hits`),console.log(`${h.path}`),console.log("Snapshot: ",t),console.groupEnd()}b(e),u&&p()},t=>{console.error(t),b(null,t)}),()=>p())),{subscribe:_,set:E}=w;return{subscribe:_,firestore:r,ref:h,get loading(){return g},get error(){return v},get meta(){return y}}}const we=t=>({data:2&t,ref:1&t,error:1&t}),_e=t=>({data:t[1],ref:t[0].ref,error:t[0].error}),Ee=t=>({data:2&t,ref:1&t,error:1&t}),Te=t=>({data:t[1],ref:t[0].ref,error:t[0].error}),Se=t=>({data:2&t,ref:1&t,error:1&t}),xe=t=>({data:t[1],ref:t[0].ref,error:t[0].error}),Ie=t=>({data:2&t,ref:1&t,error:1&t}),ke=t=>({data:t[1],ref:t[0].ref,error:t[0].error}),Ae=t=>({data:2&t,ref:1&t,error:1&t}),Ce=t=>({data:t[1],ref:t[0].ref,error:t[0].error});function Ne(t){let e;const n=t[12].fallback,r=l(n,t,t[11],Te);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&2051&e&&r.p(h(n,t,t[11],Te),f(n,t[11],e,Ee))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Me(t){let e;const n=t[12].loading,r=l(n,t,t[11],xe);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&2051&e&&r.p(h(n,t,t[11],xe),f(n,t[11],e,Se))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Pe(t){let e;const n=t[12].default,r=l(n,t,t[11],ke);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&2051&e&&r.p(h(n,t,t[11],ke),f(n,t[11],e,Ie))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Le(t){let e,n,r,i,o;const a=t[12].before,s=l(a,t,t[11],Ce),u=[Pe,Me,Ne],c=[];function d(t,e){return t[1]?0:t[0].loading?1:2}n=d(t),r=c[n]=u[n](t);const p=t[12].after,m=l(p,t,t[11],_e);return{c(){s&&s.c(),e=x(),r.c(),i=x(),m&&m.c()},m(t,r){s&&s.m(t,r),w(t,e,r),c[n].m(t,r),w(t,i,r),m&&m.m(t,r),o=!0},p(t,[e]){s&&s.p&&2051&e&&s.p(h(a,t,t[11],Ce),f(a,t[11],e,Ae));let o=n;n=d(t),n===o?c[n].p(t,e):(ut(),ht(c[o],1,1,()=>{c[o]=null}),ct(),r=c[n],r||(r=c[n]=u[n](t),r.c()),lt(r,1),r.m(i.parentNode,i)),m&&m.p&&2051&e&&m.p(h(p,t,t[11],_e),f(p,t[11],e,we))},i(t){o||(lt(s,t),lt(r),lt(m,t),o=!0)},o(t){ht(s,t),ht(r),ht(m,t),o=!1},d(t){s&&s.d(t),t&&_(e),c[n].d(t),t&&_(i),m&&m.d(t)}}}function De(e,n,r){let i,o=t,a=()=>(o(),o=u(m,t=>r(1,i=t)),m);e.$$.on_destroy.push(()=>o());let{path:s}=n,{log:c=!1}=n,{traceId:l=""}=n,{startWith:h}=n,{maxWait:f=1e4}=n,{once:d=!1}=n;const p={startWith:h,traceId:l,log:c,maxWait:f,once:d};let m=ye(s,p);a();const g=G();let v;z(()=>g("ref",{ref:m.ref})),H(()=>v());let{$$slots:y={},$$scope:b}=n;return e.$set=t=>{"path"in t&&r(2,s=t.path),"log"in t&&r(3,c=t.log),"traceId"in t&&r(4,l=t.traceId),"startWith"in t&&r(5,h=t.startWith),"maxWait"in t&&r(6,f=t.maxWait),"once"in t&&r(7,d=t.once),"$$scope"in t&&r(11,b=t.$$scope)},e.$$.update=()=>{261&e.$$.dirty&&(v&&(v(),a(r(0,m=ye(s,p))),g("ref",{ref:m.ref})),r(8,v=m.subscribe(t=>{g("data",{data:t})})))},[m,i,s,c,l,h,f,d,v,p,g,b,y]}class Re extends wt{constructor(t){super(),bt(this,t,De,Le,s,{path:2,log:3,traceId:4,startWith:5,maxWait:6,once:7})}}const Oe=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),Be=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last}),Ue=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),Fe=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last}),je=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),qe=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last}),Ve=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),$e=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last}),ze=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),He=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last});function Ge(t){let e;const n=t[13].fallback,r=l(n,t,t[12],Fe);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&4099&e&&r.p(h(n,t,t[12],Fe),f(n,t[12],e,Ue))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function We(t){let e;const n=t[13].loading,r=l(n,t,t[12],qe);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&4099&e&&r.p(h(n,t,t[12],qe),f(n,t[12],e,je))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Ke(t){let e;const n=t[13].default,r=l(n,t,t[12],$e);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&4099&e&&r.p(h(n,t,t[12],$e),f(n,t[12],e,Ve))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Ze(t){let e,n,r,i,o;const a=t[13].before,s=l(a,t,t[12],He),u=[Ke,We,Ge],c=[];function d(t,e){return t[1]?0:t[0].loading?1:2}n=d(t),r=c[n]=u[n](t);const p=t[13].after,m=l(p,t,t[12],Be);return{c(){s&&s.c(),e=x(),r.c(),i=x(),m&&m.c()},m(t,r){s&&s.m(t,r),w(t,e,r),c[n].m(t,r),w(t,i,r),m&&m.m(t,r),o=!0},p(t,[e]){s&&s.p&&4099&e&&s.p(h(a,t,t[12],He),f(a,t[12],e,ze));let o=n;n=d(t),n===o?c[n].p(t,e):(ut(),ht(c[o],1,1,()=>{c[o]=null}),ct(),r=c[n],r||(r=c[n]=u[n](t),r.c()),lt(r,1),r.m(i.parentNode,i)),m&&m.p&&4099&e&&m.p(h(p,t,t[12],Be),f(p,t[12],e,Oe))},i(t){o||(lt(s,t),lt(r),lt(m,t),o=!0)},o(t){ht(s,t),ht(r),ht(m,t),o=!1},d(t){s&&s.d(t),t&&_(e),c[n].d(t),t&&_(i),m&&m.d(t)}}}function Qe(e,n,r){let i,o=t,a=()=>(o(),o=u(g,t=>r(1,i=t)),g);e.$$.on_destroy.push(()=>o());let{path:s}=n,{query:c=null}=n,{traceId:l=""}=n,{log:h=!1}=n,{startWith:f}=n,{maxWait:d=1e4}=n,{once:p=!1}=n;const m={startWith:f,traceId:l,log:h,maxWait:d,once:p};let g=be(s,c,m);a();const v=G();let y;z(()=>v("ref",{ref:g.ref})),H(()=>y());let{$$slots:b={},$$scope:w}=n;return e.$set=t=>{"path"in t&&r(2,s=t.path),"query"in t&&r(3,c=t.query),"traceId"in t&&r(4,l=t.traceId),"log"in t&&r(5,h=t.log),"startWith"in t&&r(6,f=t.startWith),"maxWait"in t&&r(7,d=t.maxWait),"once"in t&&r(8,p=t.once),"$$scope"in t&&r(12,w=t.$$scope)},e.$$.update=()=>{525&e.$$.dirty&&(y&&(y(),a(r(0,g=be(s,c,m))),v("ref",{ref:g.ref})),r(9,y=g.subscribe(t=>{v("data",{data:t})})))},[g,i,s,c,l,h,f,d,p,y,m,v,w,b]}class Ye extends wt{constructor(t){super(),bt(this,t,Qe,Ze,s,{path:2,query:3,traceId:4,log:5,startWith:6,maxWait:7,once:8})}}function Je(t){let e,n;var r=t[0];function i(t){return{props:{params:t[1]}}}if(r)var o=new r(i(t));return{c(){o&&mt(o.$$.fragment),e=I()},m(t,r){o&&gt(o,t,r),w(t,e,r),n=!0},p(t,[n]){const a={};if(2&n&&(a.params=t[1]),r!==(r=t[0])){if(o){ut();const t=o;ht(t.$$.fragment,1,0,()=>{vt(t,1)}),ct()}r?(mt((o=new r(i(t))).$$.fragment),lt(o.$$.fragment,1),gt(o,e.parentNode,e)):o=null}else r&&o.$set(a)},i(t){n||(o&&lt(o.$$.fragment,t),n=!0)},o(t){o&&ht(o.$$.fragment,t),n=!1},d(t){t&&_(e),o&&vt(o,t)}}}function Xe(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const tn=Jt(Xe(),(function(t){const e=()=>{t(Xe())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));te(tn,t=>t.location),te(tn,t=>t.querystring);function en(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t},0)}function nn(e,n,r){let i,o=t;c(e,tn,t=>r(4,i=t)),e.$$.on_destroy.push(()=>o());let{routes:a={}}=n,{prefix:s=""}=n;class u{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:r}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,o,a=[],s="",u=t.split("/");for(u[0]||u.shift();i=u.shift();)"*"===(n=i[0])?(a.push("wild"),s+="/(.*)"):":"===n?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),s+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(s+=(~r?"?":"")+"\\"+i.substring(o))):s+="/"+i;return{keys:a,pattern:new RegExp("^"+s+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=r}match(t){s&&t.startsWith(s)&&(t=t.substr(s.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let r=0;for(;r<this._keys.length;)n[this._keys[r]]=e[++r]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const l=a instanceof Map?a:Object.entries(a),h=[];for(const[t,e]of l)h.push(new u(t,e));let f=null,d={};const p=G(),m=(t,e)=>{setTimeout(()=>{p(t,e)},0)};return e.$set=t=>{"routes"in t&&r(2,a=t.routes),"prefix"in t&&r(3,s=t.prefix)},e.$$.update=()=>{if(17&e.$$.dirty){r(0,f=null);let t=0;for(;!f&&t<h.length;){const e=h[t].match(i.location);if(e){const n={component:h[t].component,name:h[t].component.name,location:i.location,querystring:i.querystring,userData:h[t].userData};if(!h[t].checkConditions(n)){m("conditionsFailed",n);break}r(0,f=h[t].component),r(1,d=e),m("routeLoaded",n)}t++}}},[f,d,a,s]}class rn extends wt{constructor(t){super(),bt(this,t,nn,Je,s,{routes:2,prefix:3})}}function on(t){const e=t-1;return e*e*e+1}function an(t){return-.5*(Math.cos(Math.PI*t)-1)}function sn(t,{delay:n=0,duration:r=400,easing:i=e}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>`opacity: ${t*o}`}}function un(t,{delay:e=0,duration:n=400,easing:r=on,x:i=0,y:o=0,opacity:a=0}){const s=getComputedStyle(t),u=+s.opacity,c="none"===s.transform?"":s.transform,l=u*(1-a);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${u-l*e}`}}function cn(t,{delay:e=0,duration:n=400,easing:r=on}){const i=getComputedStyle(t),o=+i.opacity,a=parseFloat(i.height),s=parseFloat(i.paddingTop),u=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),l=parseFloat(i.marginBottom),h=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>"overflow: hidden;"+`opacity: ${Math.min(20*t,1)*o};`+`height: ${t*a}px;`+`padding-top: ${t*s}px;`+`padding-bottom: ${t*u}px;`+`margin-top: ${t*c}px;`+`margin-bottom: ${t*l}px;`+`border-top-width: ${t*h}px;`+`border-bottom-width: ${t*f}px;`}}function ln(t,{delay:e=0,duration:n=400,easing:r=on,start:i=0,opacity:o=0}){const a=getComputedStyle(t),s=+a.opacity,u="none"===a.transform?"":a.transform,c=1-i,l=s*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${u} scale(${1-c*e});\n\t\t\topacity: ${s-l*e}\n\t\t`}}function hn(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/close.svg")&&A(n,"src","./icons/close.svg"),A(n,"alt","menu"),A(n,"class","mt-1 mr-1 w-10 h-10 cursor-pointer")},m(t,r){w(t,n,r),i=k(n,"click",e[15])},p:t,d(t){t&&_(n),i()}}}function fn(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/menu.svg")&&A(n,"src","./icons/menu.svg"),A(n,"alt","menu"),A(n,"class","mt-1 mr-1 w-10 h-10 cursor-pointer")},m(t,r){w(t,n,r),i=k(n,"click",e[14])},p:t,d(t){t&&_(n),i()}}}function dn(t){let e,n,r,i,o,a,s,u,c,l,h;const f=new Qt({props:{firebase:Lt,$$slots:{default:[wn]},$$scope:{ctx:t}}});return{c(){e=T("div"),n=T("div"),mt(f.$$.fragment),r=x(),i=T("br"),o=x(),a=T("hr"),s=x(),u=T("ul"),u.innerHTML='<li class="svelte-avm9f7"><a href="#/help">?</a></li> \n            <li class="svelte-avm9f7"><a href="/">Карта</a></li> \n            <li class="svelte-avm9f7"><a href="#/profile">Профиль</a></li> \n            <li class="svelte-avm9f7"><a href="#/about">Информация</a></li> \n            <li class="svelte-avm9f7"><a href="#/addservice">Добавить сервис</a></li> \n            <li class="svelte-avm9f7"><a href="#/cryptowallet">Крипто-кошелёк</a></li> \n            <li class="svelte-avm9f7"><a href="#/partners">Партнерам</a></li> \n            <li class="svelte-avm9f7"><a href="#/ico">ICO</a></li>',A(n,"class","user-auth"),A(u,"class","menu-list mt-4 svelte-avm9f7"),A(e,"class","menu-container svelte-avm9f7")},m(c,d){w(c,e,d),b(e,n),gt(f,n,null),b(e,r),b(e,i),b(e,o),b(e,a),b(e,s),b(e,u),l=!0,h=k(u,"click",t[19])},p(t,e){const n={};8388622&e&&(n.$$scope={dirty:e,ctx:t}),f.$set(n)},i(t){l||(lt(f.$$.fragment,t),X(()=>{c||(c=pt(e,sn,{duration:400},!0)),c.run(1)}),l=!0)},o(t){ht(f.$$.fragment,t),c||(c=pt(e,sn,{duration:400},!1)),c.run(0),l=!1},d(t){t&&_(e),vt(f),t&&c&&c.end(),h()}}}function pn(t){let e;return{c(){e=T("div"),e.innerHTML="<p>загрузка...</p>",A(e,"slot","loading")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function mn(t){let e,n,r,i,o=t[22].balance+"";return{c(){e=T("div"),n=T("p"),r=S("Баланс: "),i=S(o)},m(t,o){w(t,e,o),b(e,n),b(n,r),b(n,i)},p(t,e){4194304&e&&o!==(o=t[22].balance+"")&&N(i,o)},d(t){t&&_(e)}}}function gn(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v;return{c(){e=T("div"),n=T("div"),r=T("p"),r.textContent="Завершите регистрацию:",i=x(),a=T("p"),a.textContent="Придумайте имя пользователя на латинице и введите промокод.",s=x(),u=T("input"),c=x(),l=T("input"),h=x(),f=T("span"),d=S(t[3]),p=x(),m=T("p"),g=T("button"),g.textContent="Завершить",A(r,"class","my-2 font-semibold text-red-600 text-lg"),A(a,"class"," text-sm"),A(u,"class","menu-input mt-2"),A(u,"type","text"),A(u,"placeholder","Имя пользователя"),A(l,"class","menu-input"),A(l,"type","text"),A(l,"placeholder","Промокод"),A(f,"class"," text-sm block"),A(g,"class","p-1 my-2 bg-teal-500 text-white rounded"),A(n,"class","mt-2 p-1 bg-gray-100 text-teal-900"),A(e,"slot","fallback")},m(o,y){w(o,e,y),b(e,n),b(n,r),b(n,i),b(n,a),b(n,s),b(n,u),M(u,t[1]),b(n,c),b(n,l),M(l,t[2]),b(n,h),b(n,f),b(f,d),b(n,p),b(n,m),b(m,g),v=[k(u,"input",t[16]),k(u,"input",t[4]),k(l,"input",t[17]),k(l,"input",t[5]),k(g,"click",t[6])]},p(t,e){2&e&&u.value!==t[1]&&M(u,t[1]),4&e&&l.value!==t[2]&&M(l,t[2]),8&e&&N(d,t[3])},d(t){t&&_(e),o(v)}}}function vn(t){let e,n,r=null!=t[22]&&mn(t);return{c(){e=x(),r&&r.c(),n=x()},m(t,i){w(t,e,i),r&&r.m(t,i),w(t,n,i)},p(t,e){null!=t[22]?r?r.p(t,e):(r=mn(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(t){t&&_(e),r&&r.d(t),t&&_(n)}}}function yn(t){let e;return{c(){e=T("div"),e.innerHTML='<div><span class=" text-orange-500">\n                                Для правильной работы приложения, необходимо авторизоваться.\n                            </span></div>',A(e,"slot","signed-out")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function bn(t){let e,n,r,i,o,a,s,u,c,l,h,f=t[20].displayName+"";const d=new Re({props:{path:`users/${t[20].uid}`,$$slots:{default:[vn,({data:t})=>({22:t}),({data:t})=>t?4194304:0],fallback:[gn,({data:t})=>({22:t}),({data:t})=>t?4194304:0],loading:[pn,({data:t})=>({22:t}),({data:t})=>t?4194304:0]},$$scope:{ctx:t}}});function p(...e){return t[18](t[21],...e)}return{c(){e=T("div"),n=T("p"),r=S(f),i=x(),o=T("div"),mt(d.$$.fragment),a=x(),s=T("div"),u=T("button"),u.textContent="Выйти",c=x(),A(e,"class","user-info"),A(o,"class","account-info"),A(u,"class","p-1 px-3 mt-4 bg-gray-800 text-gray-200 rounded")},m(t,f){w(t,e,f),b(e,n),b(n,r),w(t,i,f),w(t,o,f),gt(d,o,null),w(t,a,f),w(t,s,f),b(s,u),w(t,c,f),l=!0,h=k(u,"click",p)},p(e,n){t=e,(!l||1048576&n)&&f!==(f=t[20].displayName+"")&&N(r,f);const i={};1048576&n&&(i.path=`users/${t[20].uid}`),12582926&n&&(i.$$scope={dirty:n,ctx:t}),d.$set(i)},i(t){l||(lt(d.$$.fragment,t),l=!0)},o(t){ht(d.$$.fragment,t),l=!1},d(t){t&&_(e),t&&_(i),t&&_(o),vt(d),t&&_(a),t&&_(s),t&&_(c),h()}}}function wn(t){let e;const n=new me({props:{$$slots:{default:[bn,({user:t,auth:e})=>({20:t,21:e}),({user:t,auth:e})=>(t?1048576:0)|(e?2097152:0)],"signed-out":[yn,({user:t,auth:e})=>({20:t,21:e}),({user:t,auth:e})=>(t?1048576:0)|(e?2097152:0)]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};9437198&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function _n(t){let e,n,r,i,o,a;function s(t,e){return t[0]?hn:fn}let u=s(t),c=u(t),l=t[0]&&dn(t);return{c(){e=T("div"),n=T("div"),n.innerHTML='<div class="mt-2 -ml-6"><img class="w-12 h-12" src="./icons/main-logo.png" alt="logo"></div> \n        <div class="ml-2 mt-1"><span class=" text-red-600 text-xl font-semibold">Avto</span><span class=" text-green-500 text-xl font-semibold">karta</span><span class=" text-orange-500 text-xl font-semibold">.club</span></div>',r=x(),i=T("div"),c.c(),o=x(),l&&l.c(),A(n,"class","justify-center flex flex-row items-center"),A(i,"class","header-menu absolute top-0 right-0 p-2 text-center"),A(e,"class","header fixed z-10 h-16 top-0 w-full bg-gray-900")},m(t,s){w(t,e,s),b(e,n),b(e,r),b(e,i),c.m(i,null),b(e,o),l&&l.m(e,null),a=!0},p(t,[n]){u===(u=s(t))&&c?c.p(t,n):(c.d(1),c=u(t),c&&(c.c(),c.m(i,null))),t[0]?l?(l.p(t,n),lt(l,1)):(l=dn(t),l.c(),lt(l,1),l.m(e,null)):l&&(ut(),ht(l,1,1,()=>{l=null}),ct())},i(t){a||(lt(l),a=!0)},o(t){ht(l),a=!1},d(t){t&&_(e),c.d(),l&&l.d()}}}function En(t,e,n){let r,i,o=!1,a="",s="",u=!1,c="Имя пользователя не менее 6 символов.";Lt.auth().onAuthStateChanged((function(t){t?i=t:console.log("no user login")}));let l=Lt.functions().httpsCallable("addNewUser");function h(){l({referrer:r,username:a}).then((function(t){console.log("registration",t)})).catch((function(t){console.log(t.code,t.message,t.details)}))}return[o,a,s,c,function(){a.length>=6?(n(3,c="Имя пользователя свободно."),Ht.collection("users").where("username","==",a).get().then((function(t){t.forEach((function(t){n(3,c="Это имя занято, придумайте другое.")}))})).catch((function(t){console.log("Error getting documents: ",t)}))):n(3,c="Имя пользователя не менее 6 символов.")},function(){s.length>=6?(u=!1,Ht.collection("users").where("username","==",s).get().then((function(t){t.forEach((function(t){r=t.id,u=!0}))})).catch((function(t){console.log("Error getting documents: ",t)}))):u=!1},function(){a.length&&s.length>=6?u?(h(),alert("Регистрация занимает несколько минут. Пока идёт регистрация, ознакомьтесь с полезной информацией."),en("/about"),n(0,o=!1)):alert("Неверный промокод!"):alert("Придумайте имя пользователя и введите промокод.")},r,u,i,void 0,void 0,l,h,()=>n(0,o=!0),()=>n(0,o=!1),function(){a=this.value,n(1,a)},function(){s=this.value,n(2,s)},t=>t.signOut(),()=>n(0,o=!1)]}class Tn extends wt{constructor(t){super(),bt(this,t,En,_n,s,{})}}var Sn,xn,In,kn=xt((function(t,e){
/* @preserve
     * Leaflet 1.6.0, a JS library for interactive maps. http://leafletjs.com
     * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
     */
!function(t){var e=Object.freeze;function n(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}}function u(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function c(){return!1}function l(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function f(t){return h(t).split(/\s+/)}function d(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?r(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var _=0;function E(t){var e=+new Date,n=Math.max(0,16-(e-_));return _=e+n,window.setTimeout(t,n)}var T=window.requestAnimationFrame||w("RequestAnimationFrame")||E,S=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function x(t,e,n){if(!n||T!==E)return T.call(window,i(t,e));t.call(e)}function I(t){t&&S.call(window,t)}var k=(Object.freeze||Object)({freeze:e,extend:n,create:r,bind:i,lastId:o,stamp:a,throttle:s,wrapNum:u,falseFn:c,formatNum:l,trim:h,splitWords:f,setOptions:d,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:b,requestFn:T,cancelFn:S,requestAnimFrame:x,cancelAnimFrame:I});function A(){}A.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);for(var a in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(r(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},A.include=function(t){return n(this.prototype,t),this},A.mergeOptions=function(t){return n(this.prototype.options,t),this},A.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var C={on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=f(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=f(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=c,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=c;delete this._events[t]}},fire:function(t,e,r){if(!this.listens(t,r))return this;var i=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=i((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};C.addEventListener=C.on,C.removeEventListener=C.clearAllEventListeners=C.off,C.addOneTimeEventListener=C.once,C.fireEvent=C.fire,C.hasEventListeners=C.listens;var N=A.extend(C);function M(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var P=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof M?t:v(t)?new M(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new M(t.x,t.y):new M(t,e,n)}function R(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function O(t,e){return!t||t instanceof R?t:new R(t,e)}function B(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function U(t,e){return t instanceof B?t:new B(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function j(t,e,n){return t instanceof F?t:v(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new M(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new M(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=P(this.x),this.y=P(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},R.prototype={extend:function(t){return t=D(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof M?D(t):O(t))instanceof R?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=O(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=O(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},B.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof B))return t?this.extend(j(t)||U(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new B(new F(e.lat-r,e.lng-i),new F(n.lat+r,n.lng+i))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof F||"lat"in t?j(t):U(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof B?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=U(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=U(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=U(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=j(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+l(this.lat,t)+", "+l(this.lng,t)+")"},distanceTo:function(t){return $.distance(this,j(t))},wrap:function(){return $.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return U([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var q,V={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new R(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new B(new F(o.lat-r,o.lng-i),new F(a.lat-r,a.lng-i))}},$=n({},V,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),z={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new M(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(q=6378137*Math.PI,new R([-q,-q],[q,q]))};function H(t,e,n,r){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function G(t,e,n,r){return new H(t,e,n,r)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new M((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var W=n({},$,{code:"EPSG:3857",projection:z,transformation:function(){var t=.5/(Math.PI*z.R);return G(t,.5,-t,.5)}()}),K=n({},W,{code:"EPSG:900913"});function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var n,r,i,o,a,s,u="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)u+=(r?"L":"M")+(s=a[r]).x+" "+s.y;u+=e?At?"z":"x":""}return u||"M0 0"}var Y=document.documentElement.style,J="ActiveXObject"in window,X=J&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=Nt("webkit"),nt=Nt("android"),rt=Nt("android 2")||Nt("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=nt&&Nt("Google")&&it<537&&!("AudioNode"in window),at=!!window.opera,st=Nt("chrome"),ut=Nt("gecko")&&!et&&!at&&!J,ct=!st&&Nt("safari"),lt=Nt("phantom"),ht="OTransition"in Y,ft=0===navigator.platform.indexOf("Win"),dt=J&&"transition"in Y,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,mt="MozPerspective"in Y,gt=!window.L_DISABLE_3D&&(dt||pt||mt)&&!ht&&!lt,vt="undefined"!=typeof orientation||Nt("mobile"),yt=vt&&et,bt=vt&&pt,wt=!window.PointerEvent&&window.MSPointerEvent,_t=!(et||!window.PointerEvent&&!wt),Et=!window.L_NO_TOUCH&&(_t||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Tt=vt&&at,St=vt&&ut,xt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,It=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t},kt=!!document.createElement("canvas").getContext,At=!(!document.createElementNS||!Z("svg").createSVGRect),Ct=!At&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Nt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Mt=(Object.freeze||Object)({ie:J,ielt9:X,edge:tt,webkit:et,android:nt,android23:rt,androidStock:ot,opera:at,chrome:st,gecko:ut,safari:ct,phantom:lt,opera12:ht,win:ft,ie3d:dt,webkit3d:pt,gecko3d:mt,any3d:gt,mobile:vt,mobileWebkit:yt,mobileWebkit3d:bt,msPointer:wt,pointer:_t,touch:Et,mobileOpera:Tt,mobileGecko:St,retina:xt,passiveEvents:It,canvas:kt,svg:At,vml:Ct}),Pt=wt?"MSPointerDown":"pointerdown",Lt=wt?"MSPointerMove":"pointermove",Dt=wt?"MSPointerUp":"pointerup",Rt=wt?"MSPointerCancel":"pointercancel",Ot=["INPUT","SELECT","OPTION"],Bt={},Ut=!1,Ft=0;function jt(t,e,n,r){return"touchstart"===e?function(t,e,n){var r=i((function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Ot.indexOf(t.target.tagName)<0))return;Be(t)}zt(t,e)}));t["_leaflet_touchstart"+n]=r,t.addEventListener(Pt,r,!1),Ut||(document.documentElement.addEventListener(Pt,qt,!0),document.documentElement.addEventListener(Lt,Vt,!0),document.documentElement.addEventListener(Dt,$t,!0),document.documentElement.addEventListener(Rt,$t,!0),Ut=!0)}(t,n,r):"touchmove"===e?function(t,e,n){var r=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&zt(t,e)};t["_leaflet_touchmove"+n]=r,t.addEventListener(Lt,r,!1)}(t,n,r):"touchend"===e&&function(t,e,n){var r=function(t){zt(t,e)};t["_leaflet_touchend"+n]=r,t.addEventListener(Dt,r,!1),t.addEventListener(Rt,r,!1)}(t,n,r),this}function qt(t){Bt[t.pointerId]=t,Ft++}function Vt(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function $t(t){delete Bt[t.pointerId],Ft--}function zt(t,e){for(var n in t.touches=[],Bt)t.touches.push(Bt[n]);t.changedTouches=[t],e(t)}var Ht=wt?"MSPointerDown":_t?"pointerdown":"touchstart",Gt=wt?"MSPointerUp":_t?"pointerup":"touchend",Wt="_leaflet_";function Kt(t,e,n){var r,i,o=!1;function a(t){var e;if(_t){if(!tt||"mouse"===t.pointerType)return;e=Ft}else e=t.touches.length;if(!(e>1)){var n=Date.now(),a=n-(r||n);i=t.touches?t.touches[0]:t,o=a>0&&a<=250,r=n}}function s(t){if(o&&!i.cancelBubble){if(_t){if(!tt||"mouse"===t.pointerType)return;var n,a,s={};for(a in i)n=i[a],s[a]=n&&n.bind?n.bind(i):n;i=s}i.type="dblclick",i.button=0,e(i),r=null}}return t[Wt+Ht+n]=a,t[Wt+Gt+n]=s,t[Wt+"dblclick"+n]=e,t.addEventListener(Ht,a,!!It&&{passive:!1}),t.addEventListener(Gt,s,!!It&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Zt(t,e){var n=t[Wt+Ht+e],r=t[Wt+Gt+e],i=t[Wt+"dblclick"+e];return t.removeEventListener(Ht,n,!!It&&{passive:!1}),t.removeEventListener(Gt,r,!!It&&{passive:!1}),tt||t.removeEventListener("dblclick",i,!1),this}var Qt,Yt,Jt,Xt,te,ee=ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ne=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),re="webkitTransition"===ne||"OTransition"===ne?ne+"End":"transitionend";function ie(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function ae(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function ue(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ce(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function le(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=me(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function fe(t,e){if(void 0!==t.classList)for(var n=f(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!he(t,e)){var o=me(t);pe(t,(o?o+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):pe(t,h((" "+me(t)+" ").replace(" "+e+" "," ")))}function pe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function me(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ge(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ye(t,e,n){var r=e||new M(0,0);t.style[ee]=(dt?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function be(t,e){t._leaflet_pos=e,gt?ye(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function we(t){return t._leaflet_pos||new M(0,0)}if("onselectstart"in document)Qt=function(){Ce(window,"selectstart",Be)},Yt=function(){Me(window,"selectstart",Be)};else{var _e=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qt=function(){if(_e){var t=document.documentElement.style;Jt=t[_e],t[_e]="none"}},Yt=function(){_e&&(document.documentElement.style[_e]=Jt,Jt=void 0)}}function Ee(){Ce(window,"dragstart",Be)}function Te(){Me(window,"dragstart",Be)}function Se(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(xe(),Xt=t,te=t.style.outline,t.style.outline="none",Ce(window,"keydown",xe))}function xe(){Xt&&(Xt.style.outline=te,Xt=void 0,te=void 0,Me(window,"keydown",xe))}function Ie(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function ke(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ae=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ne,TRANSITION_END:re,get:ie,getStyle:oe,create:ae,remove:se,empty:ue,toFront:ce,toBack:le,hasClass:he,addClass:fe,removeClass:de,setClass:pe,getClass:me,setOpacity:ge,testProp:ve,setTransform:ye,setPosition:be,getPosition:we,disableTextSelection:Qt,enableTextSelection:Yt,disableImageDrag:Ee,enableImageDrag:Te,preventOutline:Se,restoreOutline:xe,getSizedParentNode:Ie,getScale:ke});function Ce(t,e,n,r){if("object"==typeof e)for(var i in e)Pe(t,i,e[i],n);else for(var o=0,a=(e=f(e)).length;o<a;o++)Pe(t,e[o],n,r);return this}var Ne="_leaflet_events";function Me(t,e,n,r){if("object"==typeof e)for(var i in e)Le(t,i,e[i],n);else if(e)for(var o=0,a=(e=f(e)).length;o<a;o++)Le(t,e[o],n,r);else{for(var s in t[Ne])Le(t,s,t[Ne][s]);delete t[Ne]}return this}function Pe(t,e,n,r){var i=e+a(n)+(r?"_"+a(r):"");if(t[Ne]&&t[Ne][i])return this;var o=function(e){return n.call(r||t,e||window.event)},s=o;_t&&0===e.indexOf("touch")?jt(t,e,o,i):!Et||"dblclick"!==e||!Kt||_t&&st?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!!It&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,Ge(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&nt&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=Ve&&n-Ve;r&&r>100&&r<500||t.target._simulatedClick&&!t._simulated?Ue(t):(Ve=n,e(t))}(t,s)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):Kt(t,o,i),t[Ne]=t[Ne]||{},t[Ne][i]=o}function Le(t,e,n,r){var i=e+a(n)+(r?"_"+a(r):""),o=t[Ne]&&t[Ne][i];if(!o)return this;_t&&0===e.indexOf("touch")?function(t,e,n){var r=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Pt,r,!1):"touchmove"===e?t.removeEventListener(Lt,r,!1):"touchend"===e&&(t.removeEventListener(Dt,r,!1),t.removeEventListener(Rt,r,!1))}(t,e,i):!Et||"dblclick"!==e||!Zt||_t&&st?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",o,!!It&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o):Zt(t,i),t[Ne][i]=null}function De(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Re(t){return Pe(t,"mousewheel",De),this}function Oe(t){return Ce(t,"mousedown touchstart dblclick",De),Pe(t,"click",ze),this}function Be(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ue(t){return Be(t),De(t),this}function Fe(t,e){if(!e)return new M(t.clientX,t.clientY);var n=ke(e),r=n.boundingClientRect;return new M((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var je=ft&&st?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function qe(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/je:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ve,$e={};function ze(t){$e[t.type]=!0}function He(t){var e=$e[t.type];return $e[t.type]=!1,e}function Ge(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var We=(Object.freeze||Object)({on:Ce,off:Me,stopPropagation:De,disableScrollPropagation:Re,disableClickPropagation:Oe,preventDefault:Be,stop:Ue,getMousePosition:Fe,getWheelDelta:qe,fakeStop:ze,skipped:He,isExternalTarget:Ge,addListener:Ce,removeListener:Me}),Ke=N.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=we(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),be(this._el,n),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ze=N.extend({options:{crs:W,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ne&&gt&&!Tt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ce(this._proxy,re,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(j(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof M?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():U(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),r=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=U(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=D(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ke,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){fe(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!gt)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=j(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),c=i.distanceTo(r)||1;function l(t){var e=(u*u-s*s+2.0164*(t?-1:1)*2.0164*c*c)/(2*(t?u:s)*2.0164*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var d=l(0);function p(t){return s*(f(d)*(h(e=d+1.42*t)/f(e))-h(d))/2.0164;var e}var m=Date.now(),g=(l(1)-d)/1.42,v=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-m)/v,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*g;o<=1?(this._flyToFrame=x(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(p(u)/c)),a),this.getScaleZoom(s/function(t){return s*(f(d)/f(d+1.42*t))}(u),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=U(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,U(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),o=this.project(i),a=this.project(t),s=this.getPixelBounds(),u=s.getSize().divideBy(2),c=O([s.min.add(n),s.max.subtract(r)]);if(!c.contains(a)){this._enforcingBounds=!0;var l=o.subtract(a),h=D(a.x+l.x,a.y+l.y);(a.x<c.min.x||a.x>c.max.x)&&(h.x=o.x-l.x,l.x>0?h.x+=u.x-n.x:h.x-=u.x-r.x),(a.y<c.min.y||a.y>c.max.y)&&(h.y=o.y-l.y,l.y>0?h.y+=u.y-n.y:h.y-=u.y-r.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=e.divideBy(2).round(),a=r.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new F(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ae("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new B(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=U(t),n=D(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),c=O(this.project(s,r),this.project(a,r)).getSize(),l=gt?this.options.zoomSnap:1,h=u.x/c.x,f=u.y/c.y,d=e?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(d,r),l&&(r=Math.round(r/(l/100))*(l/100),r=e?Math.ceil(r/l)*l:Math.floor(r/l)*l),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new R(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(j(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(U(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return Fe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ce(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt,fe(t,"leaflet-container"+(Et?" leaflet-touch":"")+(xt?" leaflet-retina":"")+(X?" leaflet-oldie":"")+(ct?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),be(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fe(t.markerPane,"leaflet-zoom-hide"),fe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){be(this._mapPane,new M(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){be(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Me:Ce;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),gt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=x((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!Ge(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||s||i||!Ge(o,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Se(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if("click"===t.type){var i=n({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,e))).length){var o=r[0];"contextmenu"===e&&o.listens(e,!0)&&Be(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<r.length;u++)if(r[u].fire(e,a,!0),a.originalEvent._stopped||!1===r[u].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return we(this._mapPane)||new M(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return O([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new R(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new R(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=O(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new M(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=gt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=ee,n=this._proxy.style[e];ye(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ye(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i)||(x((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),x((function(){this._moveEnd(!0)}),this))}}),Qe=A.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return fe(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ye=function(t){return new Qe(t)};Ze.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ae("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=ae("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Je=Qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Qe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):de(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Oe(e),Re(e);var r=this._section=ae("section",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Ce(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=ae("a",t+"-toggle",e);i.href="#",i.title="Layers",Et?(Ce(i,"click",Ue),Ce(i,"click",this.expand,this)):Ce(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ae("div",t+"-base",r),this._separator=ae("div",t+"-separator",r),this._overlaysList=ae("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ue(this._baseLayersList),ue(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+a(this),r),this._layerControlInputs.push(e),e.layerId=a(t.layer),Ce(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Xe=Qe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ae("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=ae("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Oe(o),Ce(o,"click",Ue),Ce(o,"click",i,this),Ce(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&fe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&fe(this._zoomInButton,e)}});Ze.mergeOptions({zoomControl:!0}),Ze.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Xe,this.addControl(this.zoomControl))}));var tn=Qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ae("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ae("div",e,n)),t.imperial&&(this._iScale=ae("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),en=Qe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),Oe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ze.mergeOptions({attributionControl:!0}),Ze.addInitHook((function(){this.options.attributionControl&&(new en).addTo(this)})),Qe.Layers=Je,Qe.Zoom=Xe,Qe.Scale=tn,Qe.Attribution=en,Ye.layers=function(t,e,n){return new Je(t,e,n)},Ye.zoom=function(t){return new Xe(t)},Ye.scale=function(t){return new tn(t)},Ye.attribution=function(t){return new en(t)};var nn=A.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,e){return t.addHandler(e,this),this};var rn,on={Events:C},an=Et?"touchstart mousedown":"mousedown",sn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},un={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},cn=N.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){d(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ce(this._dragStartTarget,an,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cn._dragging===this&&this.finishDrag(),Me(this._dragStartTarget,an,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")&&!(cn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(cn._dragging=this,this._preventOutline&&Se(this._element),Ee(),Qt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ie(this._element);this._startPoint=new M(e.clientX,e.clientY),this._parentScale=ke(n),Ce(document,un[t.type],this._onMove,this),Ce(document,sn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new M(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Be(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=we(this._element).subtract(n),fe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,I(this._animRequest),this._lastEvent=t,this._animRequest=x(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),be(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),un)Me(document,un[t],this._onMove,this),Me(document,sn[t],this._onUp,this);Te(),Yt(),this._moved&&this._moving&&(I(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,cn._dragging=!1}});function ln(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,o){var a,s,u,c=0;for(s=i+1;s<=o-1;s++)(u=mn(e[s],e[i],e[o],!0))>c&&(a=s,c=u);c>r&&(n[a]=1,t(e,n,r,i,a),t(e,n,r,a,o))}(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)a=t[r],s=t[i],u=void 0,c=void 0,u=s.x-a.x,c=s.y-a.y,u*u+c*c>e&&(n.push(t[r]),i=r);var a,s,u,c;return i<o-1&&n.push(t[o-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(mn(t,e,n,!0))}function fn(t,e,n,r,i){var o,a,s,u=r?rn:pn(t,n),c=pn(e,n);for(rn=c;;){if(!(u|c))return[t,e];if(u&c)return!1;s=pn(a=dn(t,e,o=u||c,n,i),n),o===u?(t=a,u=s):(e=a,c=s)}}function dn(t,e,n,r,i){var o,a,s=e.x-t.x,u=e.y-t.y,c=r.min,l=r.max;return 8&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):4&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):2&n?(o=l.x,a=t.y+u*(l.x-t.x)/s):1&n&&(o=c.x,a=t.y+u*(c.x-t.x)/s),new M(o,a,i)}function pn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function mn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,u=n.y-a,c=s*s+u*u;return c>0&&((i=((t.x-o)*s+(t.y-a)*u)/c)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=u*i)),s=t.x-o,u=t.y-a,r?s*s+u*u:new M(o,a)}function gn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(t)}var yn=(Object.freeze||Object)({simplify:ln,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return mn(t,e,n)},clipSegment:fn,_getEdgeIntersection:dn,_getBitCode:pn,_sqClosestPointOnSegment:mn,isFlat:gn,_flat:vn});function bn(t,e,n){var r,i,o,a,s,u,c,l,h,f=[1,4,2,8];for(i=0,c=t.length;i<c;i++)t[i]._code=pn(t[i],e);for(a=0;a<4;a++){for(l=f[a],r=[],i=0,o=(c=t.length)-1;i<c;o=i++)s=t[i],u=t[o],s._code&l?u._code&l||((h=dn(u,s,l,e,n))._code=pn(h,e),r.push(h)):(u._code&l&&((h=dn(u,s,l,e,n))._code=pn(h,e),r.push(h)),r.push(s));t=r}return t}var wn=(Object.freeze||Object)({clipPolygon:bn}),_n={project:function(t){return new M(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new R([-180,-90],[180,90])},En={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new M(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),u=0,c=.1;u<15&&Math.abs(c)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new F(s*n,t.x*n/r)}},Tn=(Object.freeze||Object)({LonLat:_n,Mercator:En,SphericalMercator:z}),Sn=n({},$,{code:"EPSG:3395",projection:En,transformation:function(){var t=.5/(Math.PI*En.R);return G(t,.5,-t,.5)}()}),xn=n({},$,{code:"EPSG:4326",projection:_n,transformation:G(1/180,1,-1/180,.5)}),In=n({},V,{projection:_n,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});V.Earth=$,V.EPSG3395=Sn,V.EPSG3857=W,V.EPSG900913=K,V.EPSG4326=xn,V.Simple=In;var kn=N.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ze.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var An=kn.extend({initialize:function(t,e){var n,r;if(d(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Cn=An.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),An.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),An.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new B;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Nn=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=D(r),o=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return xt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Mn=Nn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Mn.imagePath||(Mn.imagePath=this._detectIconPath()),(this.options.imagePath||Mn.imagePath)+Nn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Pn=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new cn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=we(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=O(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!u.contains(o)){var c=D((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),be(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=x(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=we(e._icon),i=e._map.layerPointToLatLng(r);n&&be(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=kn.extend({options:{icon:new Mn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),fe(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(fe(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&be(this._icon,t),this._shadow&&be(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ge(this._icon,t),this._shadow&&ge(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Dn=kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Rn=Dn.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Dn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new R(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),On=Rn.extend({initialize:function(t,e,r){if("number"==typeof e&&(e=n({},r,{radius:e})),d(this,e),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Dn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===$.distance){var i=Math.PI/180,o=this._mRadius/$.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),c=n.unproject(u).lat,l=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(c*i))/(Math.cos(e*i)*Math.cos(c*i)))/i;(isNaN(l)||0===l)&&(l=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(l)?0:u.x-n.project([c,t-l]).x,this._radiusY=u.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),Bn=Dn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=mn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],c=1,l=u.length;c<l;c++){var h=o(t,e=u[c-1],n=u[c],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if(i=s[t],o=s[t+1],(r+=n=i.distanceTo(o))>e)return a=(r-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new B,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=gn(t),r=0,i=t.length;r<i;r++)n?(e[r]=j(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new M(t,t);this._pxBounds=new R([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof F,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,u=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=fn(s[n],s[n+1],t,n,!0))&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=ln(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&hn(t,s[i],s[r])<=u)return!0;return!1}});Bn._flat=vn;var Un=Bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,u,c=this._rings[0],l=c.length;if(!l)return null;for(o=a=s=0,t=0,e=l-1;t<l;e=t++)n=c[t],r=c[e],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return u=0===o?c[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=Bn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Bn.prototype._setLatLngs.call(this,t),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new M(e,e);if(t=new R(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=bn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,u,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(u=(e=this._parts[i]).length)-1;o<u;a=o++)n=e[o],r=e[a],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||Bn.prototype._containsPoint.call(this,t,!0)}}),Fn=Cn.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=v(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=jn(t,o);return a?(a.feature=Wn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function jn(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],c=e&&e.pointToLayer,l=e&&e.coordsToLatLng||Vn;if(!s&&!a)return null;switch(a.type){case"Point":return qn(c,t,n=l(s),e);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=l(s[i]),u.push(qn(c,t,n,e));return new Cn(u);case"LineString":case"MultiLineString":return r=$n(s,"LineString"===a.type?0:1,l),new Bn(r,e);case"Polygon":case"MultiPolygon":return r=$n(s,"Polygon"===a.type?1:2,l),new Un(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=jn({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new Cn(u);default:throw new Error("Invalid GeoJSON object.")}}function qn(t,e,n,r){return t?t(e,n):new Ln(n,r&&r.markersInheritOptions&&r)}function Vn(t){return new F(t[1],t[0],t[2])}function $n(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?$n(t[o],e-1,n):(n||Vn)(t[o]),i.push(r);return i}function zn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[l(t.lng,e),l(t.lat,e),l(t.alt,e)]:[l(t.lng,e),l(t.lat,e)]}function Hn(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?Hn(t[o],e-1,n,r):zn(t[o],r));return!e&&n&&i.push(i[0]),i}function Gn(t,e){return t.feature?n({},t.feature,{geometry:e}):Wn(e)}function Wn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Kn={toGeoJSON:function(t){return Gn(this,{type:"Point",coordinates:zn(this.getLatLng(),t)})}};function Zn(t,e){return new Fn(t,e)}Ln.include(Kn),On.include(Kn),Rn.include(Kn),Bn.include({toGeoJSON:function(t){var e=!gn(this._latlngs);return Gn(this,{type:(e?"Multi":"")+"LineString",coordinates:Hn(this._latlngs,e?1:0,!1,t)})}}),Un.include({toGeoJSON:function(t){var e=!gn(this._latlngs),n=e&&!gn(this._latlngs[0]),r=Hn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Gn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),An.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Gn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=Wn(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?Gn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Qn=Zn,Yn=kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=U(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ce(this._image),this},bringToBack:function(){return this._map&&le(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=U(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ye(this._image,n,e)},_reset:function(){var t=this._image,e=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();be(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Jn=Yn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=ae("source");s.src=this._url[a],e.appendChild(s)}}}}),Xn=Yn.extend({_initImage:function(){var t=this._image=this._url;fe(t,"leaflet-image-layer"),this._zoomAnimated&&fe(t,"leaflet-zoom-animated"),this.options.className&&fe(t,this.options.className),t.onselectstart=c,t.onmousemove=c}}),tr=kn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ge(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ge(this._container,0),this._removeTimeout=setTimeout(i(se,void 0,this._container),200)):se(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ce(this._container),this},bringToBack:function(){return this._map&&le(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof kn||(n=e,e=t),e instanceof Cn)for(var r in t._layers){e=t._layers[r];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?be(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),er=tr.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){tr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Dn||this._source.on("preclick",De))},onRemove:function(t){tr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Dn||this._source.off("preclick",De))},getEvents:function(){var t=tr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",n),Oe(n),Re(this._contentNode),Ce(n,"contextmenu",De),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ae("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",Ce(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight;i&&r>i?(e.height=i+"px",fe(t,"leaflet-popup-scrolled")):de(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();be(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new M(this._containerLeft,-n-this._containerBottom);i._add(we(this._container));var o=t.layerPointToContainerPoint(i),a=D(this.options.autoPanPadding),s=D(this.options.autoPanPaddingTopLeft||a),u=D(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),l=0,h=0;o.x+r+u.x>c.x&&(l=o.x+r-c.x+u.x),o.x-l-s.x<0&&(l=o.x-s.x),o.y+n+u.y>c.y&&(h=o.y+n-c.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(l||h)&&t.fire("autopanstart").panBy([l,h])}},_onCloseButtonClick:function(t){this._close(),Ue(t)},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ze.mergeOptions({closePopupOnClick:!0}),Ze.include({openPopup:function(t,e,n){return t instanceof er||(t=new er(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),kn.include({bindPopup:function(t,e){return t instanceof er?(d(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new er(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Ue(t),e instanceof Dn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var nr=tr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){tr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){tr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=tr.prototype.getEvents.call(this);return Et&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=D(this.options.offset),c=this._getAnchor();"top"===o?t=t.add(D(-a/2+u.x,-s+u.y+c.y,!0)):"bottom"===o?t=t.subtract(D(a/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(D(a/2+u.x,s/2-c.y+u.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",t=t.add(D(u.x+c.x,c.y-s/2+u.y,!0))):(o="left",t=t.subtract(D(a+c.x-u.x,s/2-c.y-u.y,!0))),de(n,"leaflet-tooltip-right"),de(n,"leaflet-tooltip-left"),de(n,"leaflet-tooltip-top"),de(n,"leaflet-tooltip-bottom"),fe(n,"leaflet-tooltip-"+o),be(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ge(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ze.include({openTooltip:function(t,e,n){return t instanceof nr||(t=new nr(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),kn.include({bindTooltip:function(t,e){return t instanceof nr?(d(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new nr(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),Et&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var rr=Nn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ue(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=D(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Nn.Default=Mn;var ir=kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof M?t:new M(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!X){ge(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);ge(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(I(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(se(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new M(+i,+o);s.z=+a;var u=this._tileCoordsToKey(s),c=this._tiles[u];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new M(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();gt?ye(t.el,i,r):be(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new R(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,u=new R(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var l=this._tiles[c].coords;l.z===this._tileZoom&&u.contains(new M(l.x,l.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var d=new M(f,h);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return U(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new B(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new M(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){fe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,X&&this.options.opacity<1&&ge(t,this.options.opacity),nt&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&x(i(this._tileReady,this,t,null,o)),be(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(ge(n.el,0),I(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(fe(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),X||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new M(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new R(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),or=ir.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&xt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ce(n,"load",i(this._tileOnLoad,this,e,n)),Ce(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:xt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=r),e["-y"]=r}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){X?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=b,se(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return ot||e.el.setAttribute("src",b),ir.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==b))return ir.prototype._tileReady.call(this,t,e,n)}});function ar(t,e){return new or(t,e)}var sr=or.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=n({},this.defaultWmsParams);for(var i in e)i in this.options||(r[i]=e[i]);var o=(e=d(this,e)).detectRetina&&xt?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,or.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=O(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===xn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=or.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});or.WMS=sr,ar.wms=function(t,e){return new sr(t,e)};var ur=kn.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=we(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);gt?ye(this._container,s,n):be(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new R(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cr=ur.extend({getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ur.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ce(t,"mousemove",this._onMouseMove,this),Ce(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ce(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,se(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=xt?2:1;be(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",xt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ur.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],u[r?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(ze(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(fe(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function lr(t){return kt?new cr(t):null}var hr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),fr={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ur.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hr("shape");fe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=hr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=hr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ce(t._container)},_bringToBack:function(t){le(t._container)}},dr=Ct?hr:Z,pr=ur.extend({getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=dr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=dr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),be(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=dr("path");t.options.className&&fe(e,t.options.className),t.options.interactive&&fe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ce(t._path)},_bringToBack:function(t){le(t._path)}});function mr(t){return At||Ct?new pr(t):null}Ct&&pr.include(fr),Ze.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&lr(t)||mr(t)}});var gr=Un.extend({initialize:function(t,e){Un.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=U(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});pr.create=dr,pr.pointsToPath=Q,Fn.geometryToLayer=jn,Fn.coordsToLatLng=Vn,Fn.coordsToLatLngs=$n,Fn.latLngToCoords=zn,Fn.latLngsToCoords=Hn,Fn.getFeature=Gn,Fn.asFeature=Wn,Ze.mergeOptions({boxZoom:!0});var vr=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Qt(),Ee(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ce(document,{contextmenu:Ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new R(this._point,this._startPoint),n=e.getSize();be(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(se(this._box),de(this._container,"leaflet-crosshair")),Yt(),Te(),Me(document,{contextmenu:Ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ze.addInitHook("addHandler","boxZoom",vr),Ze.mergeOptions({doubleClickZoom:!0});var yr=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Ze.addInitHook("addHandler","doubleClickZoom",yr),Ze.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var br=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new cn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=U(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),u=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),l=s.multiplyBy(c/u),h=c/(n.inertiaDeceleration*a),f=l.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),x((function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Ze.addInitHook("addHandler","dragging",br),Ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wr=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ce(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=D(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Ue(t)}}});Ze.addInitHook("addHandler","keyboard",wr),Ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _r=nn.extend({addHooks:function(){Ce(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=qe(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Ue(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ze.addInitHook("addHandler","scrollWheelZoom",_r),Ze.mergeOptions({tap:!0,tapTolerance:15});var Er=nn.extend({addHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Be(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new M(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&fe(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Ce(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Me(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new M(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});Et&&!_t&&Ze.addInitHook("addHandler","tap",Er),Ze.mergeOptions({touchZoom:Et&&!rt,bounceAtZoomLimits:!0});var Tr=nn.extend({addHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend",this._onTouchEnd,this),Be(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var s=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=x(s,this,!0),Be(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,I(this._animRequest),Me(document,"touchmove",this._onTouchMove),Me(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ze.addInitHook("addHandler","touchZoom",Tr),Ze.BoxZoom=vr,Ze.DoubleClickZoom=yr,Ze.Drag=br,Ze.Keyboard=wr,Ze.ScrollWheelZoom=_r,Ze.Tap=Er,Ze.TouchZoom=Tr,Object.freeze=e,t.version="1.6.0",t.Control=Qe,t.control=Ye,t.Browser=Mt,t.Evented=N,t.Mixin=on,t.Util=k,t.Class=A,t.Handler=nn,t.extend=n,t.bind=i,t.stamp=a,t.setOptions=d,t.DomEvent=We,t.DomUtil=Ae,t.PosAnimation=Ke,t.Draggable=cn,t.LineUtil=yn,t.PolyUtil=wn,t.Point=M,t.point=D,t.Bounds=R,t.bounds=O,t.Transformation=H,t.transformation=G,t.Projection=Tn,t.LatLng=F,t.latLng=j,t.LatLngBounds=B,t.latLngBounds=U,t.CRS=V,t.GeoJSON=Fn,t.geoJSON=Zn,t.geoJson=Qn,t.Layer=kn,t.LayerGroup=An,t.layerGroup=function(t,e){return new An(t,e)},t.FeatureGroup=Cn,t.featureGroup=function(t){return new Cn(t)},t.ImageOverlay=Yn,t.imageOverlay=function(t,e,n){return new Yn(t,e,n)},t.VideoOverlay=Jn,t.videoOverlay=function(t,e,n){return new Jn(t,e,n)},t.SVGOverlay=Xn,t.svgOverlay=function(t,e,n){return new Xn(t,e,n)},t.DivOverlay=tr,t.Popup=er,t.popup=function(t,e){return new er(t,e)},t.Tooltip=nr,t.tooltip=function(t,e){return new nr(t,e)},t.Icon=Nn,t.icon=function(t){return new Nn(t)},t.DivIcon=rr,t.divIcon=function(t){return new rr(t)},t.Marker=Ln,t.marker=function(t,e){return new Ln(t,e)},t.TileLayer=or,t.tileLayer=ar,t.GridLayer=ir,t.gridLayer=function(t){return new ir(t)},t.SVG=pr,t.svg=mr,t.Renderer=ur,t.Canvas=cr,t.canvas=lr,t.Path=Dn,t.CircleMarker=Rn,t.circleMarker=function(t,e){return new Rn(t,e)},t.Circle=On,t.circle=function(t,e,n){return new On(t,e,n)},t.Polyline=Bn,t.polyline=function(t,e){return new Bn(t,e)},t.Polygon=Un,t.polygon=function(t,e){return new Un(t,e)},t.Rectangle=gr,t.rectangle=function(t,e){return new gr(t,e)},t.Map=Ze,t.map=function(t,e){return new Ze(t,e)};var Sr=window.L;t.noConflict=function(){return window.L=Sr,this},window.L=t}(e)}));function An(t,e,n){const r=t.slice();return r[12]=e[n],r}function Cn(e){let n;return{c(){n=T("p"),n.textContent="У вас нет зарегистрированных машин, для регистрации спецтехники зайдите в свой профиль."},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function Nn(t){let e,n=t[11],r=[];for(let e=0;e<n.length;e+=1)r[e]=Ln(An(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=I()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(2054&i){let o;for(n=t[11],o=0;o<n.length;o+=1){const a=An(t,n,o);r[o]?r[o].p(a,i):(r[o]=Ln(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){E(r,t),t&&_(e)}}}function Mn(t){let e,n,r,i;function o(...e){return t[9](t[12],...e)}return{c(){e=T("i"),e.textContent="Отдыхает ...",n=x(),r=T("button"),r.textContent="На линию",A(r,"class","btn-green")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"click",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Pn(t){let e,n,r,i;function o(...e){return t[8](t[12],...e)}return{c(){e=T("i"),e.textContent="На линии ...",n=x(),r=T("button"),r.textContent="Завершить",A(r,"class","btn-orange")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"click",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Ln(t){let e,n,r,i,o,a,s,u=t[12].model+"";function c(t,e){return t[12].online?Pn:Mn}let l=c(t),h=l(t);return{c(){e=T("div"),n=T("div"),r=T("span"),i=S(u),o=x(),a=T("div"),h.c(),s=x(),A(r,"class"," text-teal-500"),A(e,"class","flex flex-row justify-around items-center")},m(t,u){w(t,e,u),b(e,n),b(n,r),b(r,i),b(e,o),b(e,a),h.m(a,null),b(e,s)},p(t,e){2048&e&&u!==(u=t[12].model+"")&&N(i,u),l===(l=c(t))&&h?h.p(t,e):(h.d(1),h=l(t),h&&(h.c(),h.m(a,null)))},d(t){t&&_(e),h.d()}}}function Dn(t){let e;return{c(){e=T("span"),e.textContent="Не удалось загрузить...",A(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Rn(t){let e;function n(t,e){return t[11].length>0?Nn:Cn}let r=n(t),i=r(t);return{c(){i.c(),e=x()},m(t,n){i.m(t,n),w(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&_(e)}}}function On(t){let e,n,r,i,o,a,s;const u=new Ye({props:{path:"rentalCars",query:function(...e){return t[7](t[10],...e)},$$slots:{default:[Rn,({data:t})=>({11:t}),({data:t})=>t?2048:0],fallback:[Dn,({data:t})=>({11:t}),({data:t})=>t?2048:0]},$$scope:{ctx:t}}});return{c(){e=T("div"),n=T("span"),r=T("img"),o=x(),mt(u.$$.fragment),r.src!==(i="./icons/close.svg")&&A(r,"src","./icons/close.svg"),A(r,"alt","x"),A(n,"class","float-right")},m(i,c){w(i,e,c),b(e,n),b(n,r),w(i,o,c),gt(u,i,c),a=!0,s=k(r,"click",t[6])},p(e,n){t=e;const r={};34816&n&&(r.$$scope={dirty:n,ctx:t}),u.$set(r)},i(t){a||(lt(u.$$.fragment,t),a=!0)},o(t){ht(u.$$.fragment,t),a=!1},d(t){t&&_(e),t&&_(o),vt(u,t),s()}}}function Bn(t){let e;const n=new me({props:{$$slots:{default:[On,({user:t})=>({10:t}),({user:t})=>t?1024:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};32768&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Un(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[Bn]},$$scope:{ctx:t}}});return{c(){e=T("div"),mt(r.$$.fragment),A(e,"class","p-2")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,[e]){const n={};32768&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function Fn(t,e,n){let{region:r}=e,{city:i}=e,{latlng:o}=e;const a=G();function s(t){t.update({online:!0,location:[o.lat,o.lng],region:r,city:i}).then((function(){a("alert",{message:"Вы на линии (отмечены на карте)"})})).catch((function(t){a("alert",{message:`Ошибка: ${t}`})}))}function u(t){t.update({online:!1}).then((function(){a("alert",{message:"Работа завершена."})})).catch((function(t){a("alert",{message:`Ошибка: ${t}`})}))}return t.$set=t=>{"region"in t&&n(3,r=t.region),"city"in t&&n(4,i=t.city),"latlng"in t&&n(5,o=t.latlng)},[a,s,u,r,i,o,()=>a("close"),(t,e)=>e.where("owner","==",t.uid),t=>u(t.ref),t=>s(t.ref)]}Sn=L.Marker.prototype._initIcon,xn=L.Marker.prototype._setPos,In="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),L.Marker.include({_initIcon:function(){Sn.call(this)},_setPos:function(t){xn.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,In?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}});class jn extends wt{constructor(t){super(),bt(this,t,Fn,Un,s,{region:3,city:4,latlng:5})}}function qn(t,e,n){const r=t.slice();return r[16]=e[n],r}function Vn(t){let e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,k,C,M,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K=t[16].address+"",Z=t[16].routes+"",Q=t[16].desc+"",Y=t[16].price+"",J=t[16].paymentMethod+"",X=t[16].setDriver==t[13].uid&&1!=t[16].completed&&$n(),tt=t[16].childSeat&&zn(),et=null==t[16].completed&&Hn(t),nt=t[16].setDriver==t[13].uid&&1!=t[16].driverArrived?Kn(t):void 0,rt=t[16].onway&&1!=t[16].completed&&Zn(t),it=t[16].completed&&Qn();return{c(){e=T("li"),n=T("div"),X&&X.c(),r=x(),i=T("p"),o=T("span"),o.textContent="Откуда:",a=x(),s=S(K),u=x(),c=T("p"),l=T("span"),l.textContent="Куда:",h=x(),f=S(Z),d=x(),p=T("p"),m=T("span"),m.textContent="Примечание:",g=x(),v=S(Q),y=x(),tt&&tt.c(),E=x(),I=T("p"),k=T("span"),C=S("Цена:  "),M=S(Y),P=S(" руб."),L=x(),D=T("p"),R=T("span"),O=S("Способ оплаты:  "),B=S(J),U=x(),et&&et.c(),F=x(),j=T("hr"),q=x(),V=T("div"),nt&&nt.c(),$=x(),rt&&rt.c(),z=x(),it&&it.c(),H=x(),G=T("hr"),W=x(),A(o,"class","font-semibold"),A(l,"class","font-semibold"),A(m,"class","font-semibold"),A(k,"class","font-semibold text-orange-500"),A(R,"class","font-semibold text-green-500"),A(n,"class","mt-2 text-sm"),A(V,"class","my-2 flex flex-row justify-around")},m(t,_){w(t,e,_),b(e,n),X&&X.m(n,null),b(n,r),b(n,i),b(i,o),b(i,a),b(i,s),b(n,u),b(n,c),b(c,l),b(c,h),b(c,f),b(n,d),b(n,p),b(p,m),b(p,g),b(p,v),b(n,y),tt&&tt.m(n,null),b(n,E),b(n,I),b(I,k),b(k,C),b(k,M),b(k,P),b(n,L),b(n,D),b(D,R),b(R,O),b(R,B),b(e,U),et&&et.m(e,null),b(e,F),b(e,j),b(e,q),b(e,V),nt&&nt.m(V,null),b(V,$),rt&&rt.m(V,null),b(e,z),it&&it.m(e,null),b(e,H),b(e,G),b(e,W)},p(t,i){t[16].setDriver==t[13].uid&&1!=t[16].completed?X||(X=$n(),X.c(),X.m(n,r)):X&&(X.d(1),X=null),16384&i&&K!==(K=t[16].address+"")&&N(s,K),16384&i&&Z!==(Z=t[16].routes+"")&&N(f,Z),16384&i&&Q!==(Q=t[16].desc+"")&&N(v,Q),t[16].childSeat?tt||(tt=zn(),tt.c(),tt.m(n,E)):tt&&(tt.d(1),tt=null),16384&i&&Y!==(Y=t[16].price+"")&&N(M,Y),16384&i&&J!==(J=t[16].paymentMethod+"")&&N(B,J),null==t[16].completed?et?et.p(t,i):(et=Hn(t),et.c(),et.m(e,F)):et&&(et.d(1),et=null),t[16].setDriver==t[13].uid&&1!=t[16].driverArrived?nt?nt.p(t,i):(nt=Kn(t),nt.c(),nt.m(V,$)):nt&&(nt.d(1),nt=null),t[16].onway&&1!=t[16].completed?rt?rt.p(t,i):(rt=Zn(t),rt.c(),rt.m(V,null)):rt&&(rt.d(1),rt=null),t[16].completed?it||(it=Qn(),it.c(),it.m(e,H)):it&&(it.d(1),it=null)},d(t){t&&_(e),X&&X.d(),tt&&tt.d(),et&&et.d(),nt&&nt.d(),rt&&rt.d(),it&&it.d()}}}function $n(t){let e;return{c(){e=T("p"),e.textContent="Заказ принят! Направляйтесь к клиенту!",A(e,"class"," font-semibold text-lg text-green-600")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function zn(t){let e;return{c(){e=T("p"),e.innerHTML='<span class="font-semibold text-red-600"> Детское кресло! </span>'},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Hn(t){let e,n,r,i,o,s,u,c,l,h,f,d,p;function m(t,e){return t[16].setDriver?Wn:Gn}let g=m(t),v=g(t);return{c(){e=T("div"),n=T("div"),r=T("button"),r.innerHTML='<img class="w-8 h-8" src="./icons/place.svg" alt="placeMarker">',i=x(),o=T("div"),s=T("button"),u=T("a"),c=T("img"),f=x(),d=T("div"),v.c(),A(r,"class","order-btn bg-teal-400 svelte-13op47i"),A(c,"class","w-8 h-8"),c.src!==(l="./icons/phone.svg")&&A(c,"src","./icons/phone.svg"),A(c,"alt","placeMarker"),A(u,"href",h="tel:"+t[16].phone),A(s,"class","order-btn bg-green-400 svelte-13op47i"),A(e,"class","mt-3 mb-2 text-center flex flex-row justify-around")},m(l,h){w(l,e,h),b(e,n),b(n,r),b(e,i),b(e,o),b(o,s),b(s,u),b(u,c),b(e,f),b(e,d),v.m(d,null),p=k(r,"click",(function(){a(t[3](t[15].path,t[16]))&&t[3](t[15].path,t[16]).apply(this,arguments)}))},p(e,n){t=e,16384&n&&h!==(h="tel:"+t[16].phone)&&A(u,"href",h),g===(g=m(t))&&v?v.p(t,n):(v.d(1),v=g(t),v&&(v.c(),v.m(d,null)))},d(t){t&&_(e),v.d(),p()}}}function Gn(t){let e,n;return{c(){e=T("button"),e.innerHTML='<img class="w-8 h-8" src="./icons/check.svg" alt="getOrder">',A(e,"class","order-btn bg-white svelte-13op47i")},m(r,i){w(r,e,i),n=k(e,"click",(function(){a(or(t[15].path,t[16],t[13].uid))&&or(t[15].path,t[16],t[13].uid).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),n()}}}function Wn(t){let e,n;return{c(){e=T("button"),e.innerHTML='<img class="w-8 h-8" src="./icons/close_white.svg" alt="getOrder">',A(e,"class","order-btn bg-red-500 svelte-13op47i")},m(r,i){w(r,e,i),n=k(e,"click",(function(){a(ar(t[15].path,t[16],t[13].uid))&&ar(t[15].path,t[16],t[13].uid).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),n()}}}function Kn(t){let e,n,r;return{c(){e=T("div"),n=T("button"),n.textContent="На месте",A(n,"class","btn-orange"),A(e,"class"," text-center")},m(i,o){w(i,e,o),b(e,n),r=k(n,"click",(function(){a(t[4](t[15].path,t[16],t[13].uid))&&t[4](t[15].path,t[16],t[13].uid).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),r()}}}function Zn(t){let e,n,r;return{c(){e=T("div"),n=T("button"),n.textContent="Завершить",A(n,"class"," text-white bg-red-600"),A(e,"class"," text-center")},m(i,o){w(i,e,o),b(e,n),r=k(n,"click",(function(){a(t[5](t[15].path,t[16],t[13].uid))&&t[5](t[15].path,t[16],t[13].uid).apply(this,arguments)}),{once:!0})},p(e,n){t=e},d(t){t&&_(e),r()}}}function Qn(t){let e;return{c(){e=T("p"),e.textContent="Заказ завершен. Баланс обновится через несколько минут.",A(e,"class"," text-gray-700")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Yn(t){let e,n=1!=t[16].payed&&Vn(t);return{c(){n&&n.c(),e=I()},m(t,r){n&&n.m(t,r),w(t,e,r)},p(t,r){1!=t[16].payed?n?n.p(t,r):(n=Vn(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function Jn(t){let e;return{c(){e=T("div"),e.innerHTML='<div class="p-2 ml-20 rounded-lg bg-gray-100 shadow-lg">\n                    Загрузка...\n                </div>',A(e,"slot","loading")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Xn(t){let e;return{c(){e=T("div"),e.innerHTML='<div class="p-2 ml-20 rounded-lg bg-gray-100 shadow-lg">\n                    Невозможно загрузить данные...\n                </div>',A(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function tr(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,S;function I(...e){return t[10](t[13],...e)}function C(...e){return t[11](t[13],...e)}function N(...e){return t[12](t[13],...e)}let M=t[14],P=[];for(let e=0;e<M.length;e+=1)P[e]=Yn(qn(t,M,e));return{c(){e=T("div"),n=T("div"),r=T("div"),i=T("button"),i.textContent="Выйти на линию",a=x(),s=T("button"),s.textContent="Закончить работу",u=x(),c=T("button"),c.textContent="Отметиться на карте",l=x(),h=T("p"),h.textContent="Текущие заказы:",f=x(),d=T("hr"),p=x(),m=T("div"),g=T("ul");for(let t=0;t<P.length;t+=1)P[t].c();v=x(),y=x(),A(i,"class","p-1 bg-green-500 text-sm text-white rounded shadow"),A(s,"class","p-1 mt-1 bg-red-500 text-sm text-white rounded shadow"),A(c,"class","p-1 mt-1 bg-orange-500 text-sm text-white rounded shadow"),A(r,"class"," text-center"),A(h,"class","mt-3 font-semibold text-center"),A(m,"class"," h-80 overflow-y-auto"),A(n,"class","p-2 bg-gray-100 rounded-lg shadow-lg h-auto w-full"),A(e,"class","taxi-orders-container z-0 fixed ml-12 mr-2")},m(t,o){w(t,e,o),b(e,n),b(n,r),b(r,i),b(r,a),b(r,s),b(r,u),b(r,c),b(n,l),b(n,h),b(n,f),b(n,d),b(n,p),b(n,m),b(m,g);for(let t=0;t<P.length;t+=1)P[t].m(g,null);w(t,v,o),w(t,y,o),S=[k(i,"click",I),k(s,"click",C),k(c,"click",N)]},p(e,n){if(t=e,57400&n){let e;for(M=t[14],e=0;e<M.length;e+=1){const r=qn(t,M,e);P[e]?P[e].p(r,n):(P[e]=Yn(r),P[e].c(),P[e].m(g,null))}for(;e<P.length;e+=1)P[e].d(1);P.length=M.length}},d(t){t&&_(e),E(P,t),t&&_(v),t&&_(y),o(S)}}}function er(t){let e;const n=new Ye({props:{path:`taxiOrders/region/${t[0]}/city/${t[1]}`,query:sr,$$slots:{default:[tr,({data:t,ref:e})=>({14:t,15:e}),({data:t,ref:e})=>(t?16384:0)|(e?32768:0)],fallback:[Xn,({data:t,ref:e})=>({14:t,15:e}),({data:t,ref:e})=>(t?16384:0)|(e?32768:0)],loading:[Jn,({data:t,ref:e})=>({14:t,15:e}),({data:t,ref:e})=>(t?16384:0)|(e?32768:0)]},$$scope:{ctx:t}}});return n.$on("data",ir),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};3&e&&(r.path=`taxiOrders/region/${t[0]}/city/${t[1]}`),581632&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function nr(t){let e;const n=new me({props:{$$slots:{default:[er,({user:t})=>({13:t}),({user:t})=>t?8192:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};532483&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function rr(t){let e;const n=new Qt({props:{firebase:Lt,$$slots:{default:[nr]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,[e]){const r={};524291&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function ir(){new Audio("./sounds/notification.mp3").play()}function or(t,e,n){let r=Ht.collection(t).doc(e.id);Ht.runTransaction((function(t){return t.get(r).then((function(e){if(!e.exists)throw"Document does not exist!";let i=e.data().setDriver;return i=n,i==n?(t.update(r,{setDriver:n,active:!1}),i):Promise.reject("Ошибка!")}))})).then((function(t){new Audio("./sounds/sms-alert.mp3").play()})).catch((function(t){console.error(t)}))}function ar(t,e,n){Ht.collection(t).doc(e.id).update({active:!0,setDriver:Lt.firestore.FieldValue.delete()})}const sr=t=>t.orderBy("date").limit(10);function ur(t,e,n){let{latlng:r}=e,{region:i}=e,{city:o}=e;const a=G();function s(t){Ht.collection("taxiDrivers").doc(t).update({location:[r.lat,r.lng]}).then((function(){alert("Вы отмечены на карте! Ожидайте клиентов!")})).catch((function(t){console.error("Error updating document: ",t)}))}let u=Lt.functions().httpsCallable("completeTaxiOrder");function c(t,e,n,r){u({orderRef:t,orderID:e,clientUID:n,price:r}).then((function(t){console.log("completeTaxiOrder",t)})).catch((function(t){console.log(t.code,t.message,t.details)}))}return t.$set=t=>{"latlng"in t&&n(6,r=t.latlng),"region"in t&&n(0,i=t.region),"city"in t&&n(1,o=t.city)},[i,o,s,function(t,e){a("lookOrderPlace",{location:e.location})},function(t,e,n){a("driverArrived",{order:e,ref:t})},function(t,e,n){let r=Ht.collection(t).doc(e.id);"Автокарта"===e.paymentMethod?(r.update({completed:!0}),c(t,e.id,e.clientUID,e.price)):r.update({completed:!0,payed:!0})},r,a,u,c,t=>{return e=t.uid,void Ht.collection("taxiDrivers").doc(e).update({online:!0}).then((function(){alert("Вы на линии. Удачи!")})).catch((function(t){console.error("Error updating document: ",t)}));var e},t=>{return e=t.uid,void Ht.collection("taxiDrivers").doc(e).update({online:!1}).then((function(){alert("Работа завершена! Спасибо!")})).catch((function(t){console.error("Error updating document: ",t)}));var e},t=>s(t.uid)]}class cr extends wt{constructor(t){super(),bt(this,t,ur,rr,s,{latlng:6,region:0,city:1})}}function lr(t,e,n){const r=t.slice();return r[32]=e[n],r}function hr(t){let e;return{c(){e=T("div"),e.innerHTML='<p class="text-center italic">\n                            Заказов нет\n                        </p>'},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function fr(t){let e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,k,C,M,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y=t[32].address+"",J=t[32].routes+"",X=t[32].desc+"",tt=t[32].price+"",et=t[32].paymentMethod+"",nt=t[32].setDriver&&1!=t[32].onway&&dr(t),rt=t[32].driverArrived&&1!=t[32].onway&&mr(),it=t[32].driverArrived&&1!=t[32].accepted&&gr(t),ot=t[32].accepted&&1!=t[32].onway&&vr(t),at=1!=t[32].driverArrived&&yr(t),st=t[32].completed&&null==t[32].rating&&br(t);return{c(){e=T("div"),n=T("div"),nt&&nt.c(),r=x(),rt&&rt.c(),i=x(),it&&it.c(),o=x(),ot&&ot.c(),a=x(),s=T("div"),u=T("p"),c=T("span"),c.textContent="Откуда:",l=x(),h=S(Y),f=x(),d=T("p"),p=T("span"),p.textContent="Куда:",m=x(),g=S(J),v=x(),y=T("p"),E=T("span"),E.textContent="Примечание:",I=x(),k=S(X),C=x(),M=T("p"),P=T("span"),L=S("Цена:  "),D=S(tt),R=S(" руб."),O=x(),B=T("p"),U=T("span"),F=S("Способ оплаты:  "),j=S(et),q=x(),V=T("div"),at&&at.c(),$=x(),z=T("hr"),H=x(),G=T("div"),st&&st.c(),W=x(),K=T("hr"),Z=x(),A(c,"class","font-semibold"),A(p,"class","font-semibold"),A(E,"class","font-semibold"),A(P,"class","font-semibold text-orange-600"),A(U,"class","font-semibold text-green-500"),A(s,"class","mt-2"),A(n,"class","mt-2 text-sm"),A(V,"class","mt-2 mb-2 text-center"),A(G,"class","my-2 text-center")},m(t,_){w(t,e,_),b(e,n),nt&&nt.m(n,null),b(n,r),rt&&rt.m(n,null),b(n,i),it&&it.m(n,null),b(n,o),ot&&ot.m(n,null),b(n,a),b(n,s),b(s,u),b(u,c),b(u,l),b(u,h),b(s,f),b(s,d),b(d,p),b(d,m),b(d,g),b(s,v),b(s,y),b(y,E),b(y,I),b(y,k),b(s,C),b(s,M),b(M,P),b(P,L),b(P,D),b(P,R),b(s,O),b(s,B),b(B,U),b(U,F),b(U,j),b(e,q),b(e,V),at&&at.m(V,null),b(e,$),b(e,z),b(e,H),b(e,G),st&&st.m(G,null),b(G,W),b(G,K),b(e,Z),Q=!0},p(t,e){t[32].setDriver&&1!=t[32].onway?nt?(nt.p(t,e),lt(nt,1)):(nt=dr(t),nt.c(),lt(nt,1),nt.m(n,r)):nt&&(ut(),ht(nt,1,1,()=>{nt=null}),ct()),t[32].driverArrived&&1!=t[32].onway?rt?rt.p(t,e):(rt=mr(),rt.c(),rt.m(n,i)):rt&&(rt.d(1),rt=null),t[32].driverArrived&&1!=t[32].accepted?it?it.p(t,e):(it=gr(t),it.c(),it.m(n,o)):it&&(it.d(1),it=null),t[32].accepted&&1!=t[32].onway?ot?ot.p(t,e):(ot=vr(t),ot.c(),ot.m(n,a)):ot&&(ot.d(1),ot=null),(!Q||1073741824&e[0])&&Y!==(Y=t[32].address+"")&&N(h,Y),(!Q||1073741824&e[0])&&J!==(J=t[32].routes+"")&&N(g,J),(!Q||1073741824&e[0])&&X!==(X=t[32].desc+"")&&N(k,X),(!Q||1073741824&e[0])&&tt!==(tt=t[32].price+"")&&N(D,tt),(!Q||1073741824&e[0])&&et!==(et=t[32].paymentMethod+"")&&N(j,et),1!=t[32].driverArrived?at?at.p(t,e):(at=yr(t),at.c(),at.m(V,null)):at&&(at.d(1),at=null),t[32].completed&&null==t[32].rating?st?st.p(t,e):(st=br(t),st.c(),st.m(G,W)):st&&(st.d(1),st=null)},i(t){Q||(lt(nt),Q=!0)},o(t){ht(nt),Q=!1},d(t){t&&_(e),nt&&nt.d(),rt&&rt.d(),it&&it.d(),ot&&ot.d(),at&&at.d(),st&&st.d()}}}function dr(t){let e;const n=new Re({props:{path:`taxiDrivers/${t[32].setDriver}`,$$slots:{default:[pr,({data:t})=>({35:t}),({data:t})=>[0,t?16:0]]},$$scope:{ctx:t}}});return n.$on("data",Or),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1073741824&e[0]&&(r.path=`taxiDrivers/${t[32].setDriver}`),1073741824&e[0]|48&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function pr(t){let e,n,r,i,o,s,u,c,l,h,f,d,p,m,g,v,y,E,I,C,M,P,L,D,R,O,B,U,F,j,q=t[35].name+"",V=t[35].lastName+"",$=t[35].carBrand+"",z=t[35].carNumber+"";return{c(){e=T("div"),n=T("p"),r=T("span"),r.textContent="Заказ принял:",i=x(),o=S(q),s=x(),u=S(V),c=x(),l=T("p"),h=T("span"),h.textContent="Автомобиль:",f=x(),d=S($),p=x(),m=S(z),g=x(),v=T("div"),y=T("img"),I=x(),C=T("div"),M=T("div"),P=T("button"),P.innerHTML='<img class="w-8 h-8" src="./icons/place.svg" alt="placeMarker">',L=x(),D=T("div"),R=T("button"),O=T("a"),B=T("img"),A(r,"class"," font-normal text-gray-800"),A(n,"class","font-semibold text-base text-green-700"),A(h,"class"," font-normal text-gray-800"),A(l,"class","font-semibold text-base text-orange-600"),A(y,"class","w-full h-32 object-cover object-none object-center"),y.src!==(E=t[35].driverAuto.frontside)&&A(y,"src",E),A(y,"alt","auto"),A(v,"class","mt-2 content-center"),A(P,"class","order-btn bg-teal-400 svelte-1tziu4s"),A(B,"class","w-8 h-8"),B.src!==(U="./icons/phone.svg")&&A(B,"src","./icons/phone.svg"),A(B,"alt","phone"),A(O,"href",F="tel:"+t[35].phone),A(O,"alt","phone"),A(R,"class","order-btn ml-4 bg-green-400 svelte-1tziu4s"),A(C,"class","mt-2 flex flex-row justify-around")},m(_,E){w(_,e,E),b(e,n),b(n,r),b(n,i),b(n,o),b(n,s),b(n,u),b(e,c),b(e,l),b(l,h),b(l,f),b(l,d),b(l,p),b(l,m),b(e,g),b(e,v),b(v,y),b(e,I),b(e,C),b(C,M),b(M,P),b(C,L),b(C,D),b(D,R),b(R,O),b(O,B),j=k(P,"click",(function(){a(t[6](t[32].setDriver))&&t[6](t[32].setDriver).apply(this,arguments)}))},p(e,n){t=e,16&n[1]&&q!==(q=t[35].name+"")&&N(o,q),16&n[1]&&V!==(V=t[35].lastName+"")&&N(u,V),16&n[1]&&$!==($=t[35].carBrand+"")&&N(d,$),16&n[1]&&z!==(z=t[35].carNumber+"")&&N(m,z),16&n[1]&&y.src!==(E=t[35].driverAuto.frontside)&&A(y,"src",E),16&n[1]&&F!==(F="tel:"+t[35].phone)&&A(O,"href",F)},d(t){t&&_(e),j()}}}function mr(e){let n,r;return{c(){n=T("p"),n.textContent="Водитель подъехал и ждёт вас!",A(n,"class","mt-4 font-semibold text-orange-600 text-lg text-center")},m(t,e){w(t,n,e),r=k(n,"load",Or())},p:t,d(t){t&&_(n),r()}}}function gr(t){let e,n,r;return{c(){e=T("p"),n=T("button"),n.textContent="Выхожу",A(n,"class","btn-orange"),A(e,"class","text-center")},m(i,o){w(i,e,o),b(e,n),r=k(n,"click",(function(){a(t[7](t[31].path,t[32]))&&t[7](t[31].path,t[32]).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),r()}}}function vr(t){let e,n,r;function i(...e){return t[16](t[32],...e)}return{c(){e=T("p"),n=T("button"),n.textContent="Поехали",A(n,"class","btn-green"),A(e,"class","text-center")},m(t,o){w(t,e,o),b(e,n),r=k(n,"click",i)},p(e,n){t=e},d(t){t&&_(e),r()}}}function yr(t){let e,n;return{c(){e=T("button"),e.textContent="Отменить заказ",A(e,"class","px-2 text-white bg-red-600 shadow-lg")},m(r,i){w(r,e,i),n=k(e,"click",(function(){a(t[5](t[31].path,t[32]))&&t[5](t[31].path,t[32]).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),n()}}}function br(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g;function v(t,e){return t[3]>=1?_r:wr}let y=v(t),E=y(t);function S(t,e){return t[3]>=2?Tr:Er}let I=S(t),C=I(t);function N(t,e){return t[3]>=3?xr:Sr}let P=N(t),L=P(t);function D(t,e){return t[3]>=4?kr:Ir}let R=D(t),O=R(t);function B(t,e){return 5==t[3]?Cr:Ar}let U=B(t),F=U(t);function j(...e){return t[28](t[31],t[32],...e)}return{c(){e=T("p"),e.textContent="Оцените поездку:",n=x(),r=T("div"),i=T("div"),E.c(),a=x(),C.c(),s=x(),L.c(),u=x(),O.c(),c=x(),F.c(),l=x(),h=T("div"),f=T("input"),d=x(),p=T("div"),m=T("button"),m.textContent="Отправить",A(e,"class"," font-semibold text-center text-lg"),A(i,"class","star-container svelte-1tziu4s"),A(f,"type","text"),A(f,"placeholder","Ваш отзыв"),A(f,"class","border rounded-lg"),A(h,"class","mt-1"),A(m,"class","btn-orange"),A(p,"class","mt-2"),A(r,"class","rating-container svelte-1tziu4s")},m(o,v){w(o,e,v),w(o,n,v),w(o,r,v),b(r,i),E.m(i,null),b(i,a),C.m(i,null),b(i,s),L.m(i,null),b(i,u),O.m(i,null),b(i,c),F.m(i,null),b(r,l),b(r,h),b(h,f),M(f,t[2]),b(r,d),b(r,p),b(p,m),g=[k(f,"input",t[27]),k(m,"click",j)]},p(e,n){y===(y=v(t=e))&&E?E.p(t,n):(E.d(1),E=y(t),E&&(E.c(),E.m(i,a))),I===(I=S(t))&&C?C.p(t,n):(C.d(1),C=I(t),C&&(C.c(),C.m(i,s))),P===(P=N(t))&&L?L.p(t,n):(L.d(1),L=P(t),L&&(L.c(),L.m(i,u))),R===(R=D(t))&&O?O.p(t,n):(O.d(1),O=R(t),O&&(O.c(),O.m(i,c))),U===(U=B(t))&&F?F.p(t,n):(F.d(1),F=U(t),F&&(F.c(),F.m(i,null))),4&n[0]&&f.value!==t[2]&&M(f,t[2])},d(t){t&&_(e),t&&_(n),t&&_(r),E.d(),C.d(),L.d(),O.d(),F.d(),o(g)}}}function wr(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[18])},p:t,d(t){t&&_(n),i()}}}function _r(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[17])},p:t,d(t){t&&_(n),i()}}}function Er(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[20])},p:t,d(t){t&&_(n),i()}}}function Tr(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[19])},p:t,d(t){t&&_(n),i()}}}function Sr(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[22])},p:t,d(t){t&&_(n),i()}}}function xr(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[21])},p:t,d(t){t&&_(n),i()}}}function Ir(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[24])},p:t,d(t){t&&_(n),i()}}}function kr(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[23])},p:t,d(t){t&&_(n),i()}}}function Ar(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[26])},p:t,d(t){t&&_(n),i()}}}function Cr(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=k(n,"click",e[25])},p:t,d(t){t&&_(n),i()}}}function Nr(t){let e,n,r=!t[32].payed&&fr(t);return{c(){r&&r.c(),e=I()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,n){t[32].payed?r&&(ut(),ht(r,1,1,()=>{r=null}),ct()):r?(r.p(t,n),lt(r,1)):(r=fr(t),r.c(),lt(r,1),r.m(e.parentNode,e))},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function Mr(t){let e;return{c(){e=T("div"),e.textContent="Невозможно загрузить данные...",A(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Pr(t){let e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g=0==t[30].length&&hr(),v=t[30],y=[];for(let e=0;e<v.length;e+=1)y[e]=Nr(lr(t,v,e));const I=t=>ht(y[t],1,1,()=>{y[t]=null});return{c(){e=T("div"),n=T("div"),r=T("p"),i=S("Текущие заказы: \r\n\r\n                        "),o=T("span"),a=T("img"),u=x(),c=T("hr"),l=x(),g&&g.c(),h=x(),f=T("div");for(let t=0;t<y.length;t+=1)y[t].c();d=x(),a.src!==(s="./icons/close.svg")&&A(a,"src","./icons/close.svg"),A(a,"alt","x"),A(a,"class","cursor-pointer"),A(o,"class"," float-right"),A(r,"class","font-semibold text-center"),A(e,"class","w-full")},m(s,v){w(s,e,v),b(e,n),b(n,r),b(r,i),b(r,o),b(o,a),b(n,u),b(n,c),b(e,l),g&&g.m(e,null),b(e,h),b(e,f);for(let t=0;t<y.length;t+=1)y[t].m(f,null);w(s,d,v),p=!0,m=k(a,"click",t[15])},p(t,n){if(0==t[30].length?g||(g=hr(),g.c(),g.m(e,h)):g&&(g.d(1),g=null),1073742316&n[0]|17&n[1]){let e;for(v=t[30],e=0;e<v.length;e+=1){const r=lr(t,v,e);y[e]?(y[e].p(r,n),lt(y[e],1)):(y[e]=Nr(r),y[e].c(),lt(y[e],1),y[e].m(f,null))}for(ut(),e=v.length;e<y.length;e+=1)I(e);ct()}},i(t){if(!p){for(let t=0;t<v.length;t+=1)lt(y[t]);p=!0}},o(t){y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)ht(y[t]);p=!1},d(t){t&&_(e),g&&g.d(),E(y,t),t&&_(d),m()}}}function Lr(t){let e;const n=new Ye({props:{path:`taxiOrders/region/${t[0]}/city/${t[1]}`,query:function(...e){return t[14](t[29],...e)},$$slots:{default:[Pr,({data:t,ref:e})=>({30:t,31:e}),({data:t,ref:e})=>[t?1073741824:0,e?1:0]],fallback:[Mr,({data:t,ref:e})=>({30:t,31:e}),({data:t,ref:e})=>[t?1073741824:0,e?1:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(e,r){t=e;const i={};3&r[0]&&(i.path=`taxiOrders/region/${t[0]}/city/${t[1]}`),1073741836&r[0]|33&r[1]&&(i.$$scope={dirty:r,ctx:t}),n.$set(i)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Dr(t){let e;const n=new me({props:{$$slots:{default:[Lr,({user:t})=>({29:t}),({user:t})=>[t?536870912:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};15&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Rr(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[Dr]},$$scope:{ctx:t}}});return{c(){e=T("div"),mt(r.$$.fragment),A(e,"class","p-2 w-full z-0 bg-white")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};15&e[0]|32&e[1]&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function Or(){new Audio("./sounds/car_horn_beep_x3_short.mp3").play()}function Br(t,e,n){let r,i,o,{region:a}=e,{city:s}=e;Lt.auth().onAuthStateChanged((function(t){t?r=t:console.log("no user login")}));const u=G();function c(t,e){setTimeout((function n(){Ht.collection(t).doc(e.id).get().then((function(r){r.data().onway||(u("checkOnWay",{ref:t,order:e}),setTimeout(n,5e3))}))}),5e3)}function l(t,e,n){Ht.collection(e).doc(n.id).update({rating:t}).then((function(){Ht.collection(`taxiDrivers/${n.setDriver}/ratings/`).add({date:Lt.firestore.FieldValue.serverTimestamp(),rating:t,review:i}).then((function(){})).catch((function(t){console.error("Error updating document: ",t)}))})).catch((function(t){console.error("Error updating document: ",t)}))}return t.$set=t=>{"region"in t&&n(0,a=t.region),"city"in t&&n(1,s=t.city)},[a,s,i,o,u,function(t,e){Ht.collection(t).doc(e.id).delete().then((function(){u("alert",{message:"Заказ отменен!"})})).catch((function(t){console.error("Error removing document: ",t)}))},function(t){Ht.collection("taxiDrivers").doc(t).get({source:"server"}).then((function(t){let e=t.data().location;u("findDriverLocation",{location:e}),u("close")})).catch((function(t){console.log("Error getting document:",t)}))},function(t,e){Ht.collection(t).doc(e.id).update({accepted:!0}).then((function(){c(t,e),u("alert",{message:"Водитель оповещён."})})).catch((function(t){console.error("Error updating document: ",t)}))},l,r,void 0,t=>t.where("clientUID","==",r.uid).where("active","==",!0),t=>t.where("clientUID","==",r.uid).where("completed","==",!0),c,(t,e)=>e.where("clientUID","==",t.uid),()=>u("close"),t=>t.ref.update({onway:!0}),()=>n(3,o=1),()=>n(3,o=1),()=>n(3,o=2),()=>n(3,o=2),()=>n(3,o=3),()=>n(3,o=3),()=>n(3,o=4),()=>n(3,o=4),()=>n(3,o=5),()=>n(3,o=5),function(){i=this.value,n(2,i)},(t,e)=>l(o,t.path,e)]}class Ur extends wt{constructor(t){super(),bt(this,t,Br,Rr,s,{region:0,city:1},[-1,-1])}}function Fr(e){let n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,C,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,ft,dt,pt,mt,gt,vt,yt,bt,wt,_t,Et,Tt,St=e[0].address+"",xt=e[0].desc+"",It=e[0].price+"";return{c(){n=T("div"),r=T("p"),r.textContent="Скорректируйте адрес и укажите цену",i=x(),a=T("div"),s=T("label"),s.textContent="Детское кресло:",u=x(),c=T("input"),l=x(),h=T("div"),f=T("label"),f.textContent="Номер мобильного:",d=x(),p=T("input"),m=x(),g=T("div"),v=T("label"),v.textContent="Примечание:",y=x(),E=T("input"),I=x(),C=T("div"),L=T("label"),L.textContent="Пункт назначения:",D=x(),R=T("input"),O=x(),B=T("div"),U=T("label"),U.textContent="Цена в рублях:",F=x(),j=T("input"),q=x(),V=T("div"),$=T("label"),$.textContent="Способ оплаты:",z=x(),H=T("select"),G=T("option"),W=T("option"),W.textContent="Наличные",K=T("option"),K.textContent="Автокарта",Z=T("option"),Z.textContent="Сбербанк-онлайн",Q=T("option"),Q.textContent="Киви-кошелёк",Y=x(),J=T("div"),tt=T("button"),tt.textContent="Отмена",et=x(),nt=T("button"),nt.textContent="Оформить заказ",rt=x(),it=T("div"),ot=T("p"),at=T("span"),at.textContent="Текущий адрес:",st=x(),ut=T("span"),ct=S(St),lt=x(),ht=T("p"),ft=T("span"),ft.textContent="Примечание:",dt=x(),pt=T("span"),mt=S(xt),gt=x(),vt=T("p"),yt=T("span"),yt.textContent="Цена:",bt=x(),wt=T("span"),_t=S(It),Et=S(" руб."),A(r,"class","my-1 text-center font-semibold text-gray-900"),A(c,"type","checkbox"),A(a,"class","mt-3"),A(p,"type","text"),A(p,"placeholder","+71234567890"),A(p,"class","p-1 bg-gray-200 rounded"),A(h,"class","mt-3"),A(E,"type","text"),A(E,"class","p-1 bg-gray-200 rounded"),A(g,"class","mt-2"),A(R,"type","text"),A(R,"class","p-1 bg-gray-200 rounded"),A(C,"class","mt-2"),A(j,"type","text"),A(j,"class","p-1 bg-gray-200 rounded"),A(B,"class","mt-2"),G.__value="false",G.value=G.__value,W.__value="Наличные",W.value=W.__value,K.__value="Автокарта",K.value=K.__value,Z.__value="Сбербанк-онлайн",Z.value=Z.__value,Q.__value="Киви-кошелёк",Q.value=Q.__value,A(H,"class","p-1 bg-white border rounded-lg"),void 0===e[0].paymentMethod&&X(()=>e[16].call(H)),A(V,"class","mt-2"),A(tt,"class","btn-gray"),A(nt,"class","btn-orange"),A(J,"class","mt-4"),A(at,"class"," font-semibold"),A(ft,"class"," font-semibold"),A(yt,"class"," font-semibold"),A(it,"class","mt-4 text-sm"),A(n,"class","p-2 z-0 w-full bg-white rounded shadow-lg")},m(t,o){w(t,n,o),b(n,r),b(n,i),b(n,a),b(a,s),b(a,u),b(a,c),c.checked=e[0].childSeat,b(n,l),b(n,h),b(h,f),b(h,d),b(h,p),M(p,e[0].phone),b(n,m),b(n,g),b(g,v),b(g,y),b(g,E),M(E,e[0].desc),b(n,I),b(n,C),b(C,L),b(C,D),b(C,R),M(R,e[0].routes),b(n,O),b(n,B),b(B,U),b(B,F),b(B,j),M(j,e[0].price),b(n,q),b(n,V),b(V,$),b(V,z),b(V,H),b(H,G),b(H,W),b(H,K),b(H,Z),b(H,Q),P(H,e[0].paymentMethod),b(n,Y),b(n,J),b(J,tt),b(J,et),b(J,nt),b(n,rt),b(n,it),b(it,ot),b(ot,at),b(ot,st),b(ot,ut),b(ut,ct),b(it,lt),b(it,ht),b(ht,ft),b(ht,dt),b(ht,pt),b(pt,mt),b(it,gt),b(it,vt),b(vt,yt),b(vt,bt),b(vt,wt),b(wt,_t),b(wt,Et),Tt=[k(c,"change",e[11]),k(p,"input",e[12]),k(E,"input",e[13]),k(R,"input",e[14]),k(j,"input",e[15]),k(H,"change",e[16]),k(tt,"click",e[1]),k(nt,"click",e[2])]},p(t,[e]){1&e&&(c.checked=t[0].childSeat),1&e&&p.value!==t[0].phone&&M(p,t[0].phone),1&e&&E.value!==t[0].desc&&M(E,t[0].desc),1&e&&R.value!==t[0].routes&&M(R,t[0].routes),1&e&&j.value!==t[0].price&&M(j,t[0].price),1&e&&P(H,t[0].paymentMethod),1&e&&St!==(St=t[0].address+"")&&N(ct,St),1&e&&xt!==(xt=t[0].desc+"")&&N(mt,xt),1&e&&It!==(It=t[0].price+"")&&N(_t,It)},i:t,o:t,d(t){t&&_(n),o(Tt)}}}function jr(t,e,n){let{address:r}=e,{clientUID:i}=e,{clientName:o}=e,{LatLng:a}=e,{region:s}=e,{city:u}=e,c={date:Lt.firestore.FieldValue.serverTimestamp(),address:r,location:[a.lat,a.lng],childSeat:!1,phone:"+7",desc:" ",clientUID:i,clientName:o,routes:" ",price:0,paymentMethod:void 0,active:!0};const l=G();return t.$set=t=>{"address"in t&&n(3,r=t.address),"clientUID"in t&&n(4,i=t.clientUID),"clientName"in t&&n(5,o=t.clientName),"LatLng"in t&&n(6,a=t.LatLng),"region"in t&&n(7,s=t.region),"city"in t&&n(8,u=t.city)},[c,function(){l("closeDialog")},function(){if("Автокарта"===c.paymentMethod){let e;Ht.collection("users").doc(i).get().then((function(n){const r=n.data();e=r.balance,e-c.price<0?(l("alert",{message:"Недостаточно средств."}),l("closeDialog")):t()})).catch((function(t){l("alert",{message:`Ошибка: ${t}`}),l("closeDialog")}))}else t();function t(){Ht.collection(`taxiOrders/region/${s}/city/${u}`).add(c).then((function(t){l("alert",{message:"Ваш заказ оформлен!"}),l("closeDialog")})).catch((function(t){console.error("Error adding document: ",t)}))}},r,i,o,a,s,u,void 0,l,function(){c.childSeat=this.checked,n(0,c)},function(){c.phone=this.value,n(0,c)},function(){c.desc=this.value,n(0,c)},function(){c.routes=this.value,n(0,c)},function(){c.price=this.value,n(0,c)},function(){c.paymentMethod=D(this),n(0,c)}]}class qr extends wt{constructor(t){super(),bt(this,t,jr,Fr,s,{address:3,clientUID:4,clientName:5,LatLng:6,region:7,city:8})}}function Vr(t,e,n){const r=t.slice();return r[14]=e[n],r}function $r(t){let e,n,r,i,o,a,s,u,c,l,h,f,d=t[14].name+"",p=t[14].date.toDate().toLocaleString("ru",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})+"";function m(...e){return t[8](t[14],...e)}function g(t,e){return t[14].from==t[11].uid?Gr:t[14].to==t[11].displayName?Hr:zr}let v=g(t),y=v(t);return{c(){e=T("li"),n=T("div"),r=T("p"),i=T("span"),o=S(d),a=S(":"),s=x(),u=T("span"),c=S(p),l=x(),y.c(),h=x(),A(i,"class","font-semibold cursor-pointer"),A(u,"class","text-sm float-right"),A(r,"class","text-gray-700"),A(n,"class","mt-2")},m(t,d){w(t,e,d),b(e,n),b(n,r),b(r,i),b(i,o),b(i,a),b(r,s),b(r,u),b(u,c),b(n,l),y.m(n,null),b(e,h),f=k(i,"click",m)},p(e,r){t=e,4096&r&&d!==(d=t[14].name+"")&&N(o,d),4096&r&&p!==(p=t[14].date.toDate().toLocaleString("ru",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})+"")&&N(c,p),v===(v=g(t))&&y?y.p(t,r):(y.d(1),y=v(t),y&&(y.c(),y.m(n,null)))},d(t){t&&_(e),y.d(),f()}}}function zr(t){let e,n,r=t[14].text+"";return{c(){e=T("p"),n=S(r),A(e,"class","message def svelte-w3jngd")},m(t,r){w(t,e,r),b(e,n)},p(t,e){4096&e&&r!==(r=t[14].text+"")&&N(n,r)},d(t){t&&_(e)}}}function Hr(t){let e,n,r=t[14].text+"";return{c(){e=T("p"),n=S(r),A(e,"class","message to-me svelte-w3jngd")},m(t,r){w(t,e,r),b(e,n)},p(t,e){4096&e&&r!==(r=t[14].text+"")&&N(n,r)},d(t){t&&_(e)}}}function Gr(t){let e,n,r=t[14].text+"";return{c(){e=T("p"),n=S(r),A(e,"class","message my svelte-w3jngd")},m(t,r){w(t,e,r),b(e,n)},p(t,e){4096&e&&r!==(r=t[14].text+"")&&N(n,r)},d(t){t&&_(e)}}}function Wr(t){let e,n=null!=t[14].date?$r(t):void 0;return{c(){n&&n.c(),e=I()},m(t,r){n&&n.m(t,r),w(t,e,r)},p(t,r){null!=t[14].date?n?n.p(t,r):(n=$r(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function Kr(t){let e,n=t[12],r=[];for(let e=0;e<n.length;e+=1)r[e]=Wr(Vr(t,n,e));return{c(){e=T("ul");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){w(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(6152&i){let o;for(n=t[12],o=0;o<n.length;o+=1){const a=Vr(t,n,o);r[o]?r[o].p(a,i):(r[o]=Wr(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&_(e),E(r,t)}}}function Zr(t){let e,n,r,i,a,s,u,c,l,h,f;const d=new Ye({props:{path:`chat/region/${t[0]}/city/${t[1]}`,query:Jr,$$slots:{default:[Kr,({data:t,ref:e})=>({12:t,13:e}),({data:t,ref:e})=>(t?4096:0)|(e?8192:0)]},$$scope:{ctx:t}}});function p(...e){return t[10](t[11],...e)}return{c(){e=T("div"),n=T("div"),mt(d.$$.fragment),r=x(),i=T("hr"),a=x(),s=T("div"),u=T("input"),c=x(),l=T("button"),l.textContent="Отправить",A(n,"id","messages"),A(n,"class","p-2 bg-gray-200 rounded-lg shadow-lg h-80 w-full overflow-y-auto"),A(u,"class","p-1 bg-white"),A(u,"type","text"),A(s,"class","w-full"),A(e,"class","taxi-orders-container z-0 fixed ml-12 mr-2")},m(o,m){w(o,e,m),b(e,n),gt(d,n,null),b(n,r),b(n,i),b(e,a),b(e,s),b(s,u),M(u,t[2].text),b(s,c),b(s,l),h=!0,f=[k(u,"input",t[9]),k(l,"click",p)]},p(e,n){t=e;const r={};3&n&&(r.path=`chat/region/${t[0]}/city/${t[1]}`),137224&n&&(r.$$scope={dirty:n,ctx:t}),d.$set(r),4&n&&u.value!==t[2].text&&M(u,t[2].text)},i(t){h||(lt(d.$$.fragment,t),h=!0)},o(t){ht(d.$$.fragment,t),h=!1},d(t){t&&_(e),vt(d),o(f)}}}function Qr(t){let e;const n=new me({props:{$$slots:{default:[Zr,({user:t})=>({11:t}),({user:t})=>t?2048:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};133135&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Yr(t){let e;const n=new Qt({props:{firebase:Lt,$$slots:{default:[Qr]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,[e]){const r={};131087&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}const Jr=t=>t.orderBy("date","desc").limit(30);function Xr(t,e,n){let{region:r}=e,{city:i}=e;const o=G();let a,s={date:Lt.firestore.FieldValue.serverTimestamp(),from:null,name:null,to:"all",text:" "},u="all",c=(new Date).getTime()-1e4;function l(t){a=(new Date).getTime(),a-c>1e4?(n(2,s.from=t.uid,s),n(2,s.name=t.displayName,s),n(2,s.to=u,s),Ht.collection(`chat/region/${r}/city/${i}`).add(s).then((function(t){c=(new Date).getTime(),n(3,u="all")})).catch((function(t){console.error("Error adding document: ",t)}))):alert("Действует ограничение, 1 сообщение/10 секунд.")}return t.$set=t=>{"region"in t&&n(0,r=t.region),"city"in t&&n(1,i=t.city)},[r,i,s,u,l,a,c,o,t=>n(3,u=t.name),function(){s.text=this.value,n(2,s)},t=>l(t)]}class ti extends wt{constructor(t){super(),bt(this,t,Xr,Yr,s,{region:0,city:1})}}function ei(t,e,n){const r=t.slice();return r[25]=e[n],r}function ni(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,S,I,C,N,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K;return{c(){e=T("div"),n=T("div"),n.innerHTML='<p class=" text-center text-white font-semibold">\n                                Что случилось?\n                            </p>',r=x(),i=T("div"),a=T("p"),a.textContent="На вас напали",s=x(),u=T("input"),c=x(),l=T("input"),h=x(),f=T("button"),f.textContent="Угроза жизни",d=x(),p=T("p"),p.textContent="При нажатии на кнопку с баланса спишется 1000 руб.",m=x(),g=T("div"),v=T("p"),v.textContent="ДТП или требуется медицинская помощь",y=x(),E=T("input"),S=x(),I=T("input"),C=x(),N=T("button"),N.textContent="Мед. помощь",P=x(),L=T("p"),L.textContent="При нажатии на кнопку с баланса спишется 500 руб.",D=x(),R=T("div"),O=T("p"),O.textContent="Требуется техническая помощь (поломка авто)",B=x(),U=T("input"),F=x(),j=T("input"),q=x(),V=T("button"),V.textContent="Тех. помощь",$=x(),z=T("p"),z.textContent="При нажатии на кнопку с баланса спишется 100 руб.",H=x(),G=T("div"),W=T("button"),W.textContent="Отмена",A(n,"class","header"),A(a,"class","m-2 font-semibold"),A(u,"type","text"),A(u,"class","svelte-6u4x5v"),A(l,"type","text"),A(l,"placeholder","Опишите проблему"),A(l,"class","svelte-6u4x5v"),A(f,"class","m-1 p-1 bg-red-600 text-white"),A(p,"class"," text-sm text-red-600"),A(i,"class","help-block svelte-6u4x5v"),A(v,"class","m-2 font-semibold"),A(E,"type","text"),A(E,"class","svelte-6u4x5v"),A(I,"type","text"),A(I,"placeholder","Опишите проблему"),A(I,"class","svelte-6u4x5v"),A(N,"class","m-1 p-1 bg-red-600 text-white"),A(L,"class"," text-sm text-red-600"),A(g,"class","help-block svelte-6u4x5v"),A(O,"class","m-2 font-semibold"),A(U,"type","text"),A(U,"class","svelte-6u4x5v"),A(j,"type","text"),A(j,"placeholder","Опишите проблему"),A(j,"class","svelte-6u4x5v"),A(V,"class","m-1 p-1 bg-gray-800 text-white"),A(z,"class"," text-sm text-red-600"),A(R,"class","help-block svelte-6u4x5v"),A(W,"class","p-1 bg-orange-600 text-white rounded-lg"),A(G,"class","mt-2 text-center")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(i,s),b(i,u),M(u,t[2]),b(i,c),b(i,l),M(l,t[1]),b(i,h),b(i,f),b(i,d),b(i,p),b(e,m),b(e,g),b(g,v),b(g,y),b(g,E),M(E,t[2]),b(g,S),b(g,I),M(I,t[1]),b(g,C),b(g,N),b(g,P),b(g,L),b(e,D),b(e,R),b(R,O),b(R,B),b(R,U),M(U,t[2]),b(R,F),b(R,j),M(j,t[1]),b(R,q),b(R,V),b(R,$),b(R,z),b(e,H),b(e,G),b(G,W),K=[k(u,"input",t[9]),k(l,"input",t[10]),k(f,"click",t[11]),k(f,"click",t[12]),k(E,"input",t[13]),k(I,"input",t[14]),k(N,"click",t[15]),k(N,"click",t[16]),k(U,"input",t[17]),k(j,"input",t[18]),k(V,"click",t[19]),k(V,"click",t[20]),k(W,"click",t[21])]},p(t,e){4&e&&u.value!==t[2]&&M(u,t[2]),2&e&&l.value!==t[1]&&M(l,t[1]),4&e&&E.value!==t[2]&&M(E,t[2]),2&e&&I.value!==t[1]&&M(I,t[1]),4&e&&U.value!==t[2]&&M(U,t[2]),2&e&&j.value!==t[1]&&M(j,t[1])},d(t){t&&_(e),o(K)}}}function ri(t){let e,n=t[23],r=[];for(let e=0;e<n.length;e+=1)r[e]=ii(ei(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=I()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(8388608&i){let o;for(n=t[23],o=0;o<n.length;o+=1){const a=ei(t,n,o);r[o]?r[o].p(a,i):(r[o]=ii(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){E(r,t),t&&_(e)}}}function ii(t){let e,n,r,i,o,a,s,u,c,l=t[25].message+"";function h(...e){return t[8](t[25],...e)}return{c(){e=T("div"),n=T("div"),r=T("p"),i=S(l),o=x(),a=T("div"),s=T("button"),s.textContent="Отменить",u=x(),A(a,"class","text-center"),A(e,"class","p-2 bg-white rounded-lg")},m(t,l){w(t,e,l),b(e,n),b(n,r),b(r,i),b(e,o),b(e,a),b(a,s),b(e,u),c=k(s,"click",h)},p(e,n){t=e,8388608&n&&l!==(l=t[25].message+"")&&N(i,l)},d(t){t&&_(e),c()}}}function oi(t){let e;function n(t,e){return t[23].length>=1?ri:ni}let r=n(t),i=r(t);return{c(){i.c(),e=I()},m(t,n){i.m(t,n),w(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&_(e)}}}function ai(t){let e;const n=new Ye({props:{path:`icons/sos/${t[0]}`,query:function(...e){return t[7](t[22],...e)},$$slots:{default:[oi,({data:t,ref:e})=>({23:t,24:e}),({data:t,ref:e})=>(t?8388608:0)|(e?16777216:0)]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(e,r){t=e;const i={};1&r&&(i.path=`icons/sos/${t[0]}`),276824070&r&&(i.$$scope={dirty:r,ctx:t}),n.$set(i)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function si(t){let e;const n=new me({props:{$$slots:{default:[ai,({user:t})=>({22:t}),({user:t})=>t?4194304:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};268435463&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function ui(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[si]},$$scope:{ctx:t}}});return{c(){e=T("div"),mt(r.$$.fragment),A(e,"class","p-1 w-full bg-gray-900 rounded-lg shadow-lg")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,[e]){const n={};268435463&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function ci(t,e,n){let{region:r}=e,{getUserAccount:i}=e;const o=G();let a="",s=i.phone,u=Lt.functions().httpsCallable("balanceDecrement");function c(t){let e;"life"===t?e=1e3:"medical"===t?e=500:"technical"===t&&(e=100),u({amount:e}).then((function(t){console.log("balanceDecrement",t)})).catch((function(t){console.log(t.code,t.message,t.details)}))}return t.$set=t=>{"region"in t&&n(0,r=t.region),"getUserAccount"in t&&n(5,i=t.getUserAccount)},[r,a,s,o,c,i,u,(t,e)=>e.where("author","==",t.uid),t=>t.ref.delete(),function(){s=this.value,n(2,s)},function(){a=this.value,n(1,a)},()=>o("danger",{message:a,type:"life",phone:s}),()=>c("life"),function(){s=this.value,n(2,s)},function(){a=this.value,n(1,a)},()=>o("danger",{message:a,type:"medical",phone:s}),()=>c("medical"),function(){s=this.value,n(2,s)},function(){a=this.value,n(1,a)},()=>o("danger",{message:a,type:"technical",phone:s}),()=>c("technical"),()=>o("close")]}class li extends wt{constructor(t){super(),bt(this,t,ci,ui,s,{region:0,getUserAccount:5})}}function hi(e){let n,r,i,a,s,u,c,l,h,f,d,p,m,g;return{c(){n=T("div"),r=T("div"),r.innerHTML='<p class="text-center font-semibold">\n            Добавить тему для обсуждения:\n        </p>',i=x(),a=T("div"),s=T("input"),u=x(),c=T("div"),l=T("textarea"),h=x(),f=T("div"),d=T("button"),d.textContent="Отмена",p=x(),m=T("button"),m.textContent="Добавить",A(s,"type","text"),A(s,"class","mt-2 border"),A(s,"placeholder","Заголовок"),A(s,"maxlength","50"),A(l,"class","mt-2 p-2 bg-gray-100 border rounded-lg w-full"),A(l,"cols","50"),A(l,"rows","10"),A(l,"placeholder","Ваше сообщение"),A(l,"maxlength","300"),A(d,"class","btn-gray"),A(m,"class","btn-orange"),A(f,"class","text-center"),A(n,"class","p-2 bg-white rounded-lg shadow-lg w-full")},m(t,o){w(t,n,o),b(n,r),b(n,i),b(n,a),b(a,s),M(s,e[0]),b(n,u),b(n,c),b(c,l),M(l,e[1]),b(n,h),b(n,f),b(f,d),b(f,p),b(f,m),g=[k(s,"input",e[10]),k(l,"input",e[11]),k(d,"click",e[12]),k(m,"click",e[13])]},p(t,[e]){1&e&&s.value!==t[0]&&M(s,t[0]),2&e&&M(l,t[1])},i:t,o:t,d(t){t&&_(n),o(g)}}}function fi(t,e,n){let{user:r}=e,{latlng:i}=e,{region:o}=e,{city:a}=e;const s=G();let u,c="",l="";function h(){Ht.collection("topics").where("owner","==",r.uid).get().then((function(t){t.empty?(u=!1,console.log("hasTopic",u)):(u=!0,console.log("hasTopic",u))})).catch((function(t){console.log("Error getting documents: ",t)}))}function f(){!1===u?Ht.collection("topics").add({date:Lt.firestore.FieldValue.serverTimestamp(),region:o,city:a,header:c,text:l,location:[i.lat,i.lng],owner:r.uid,username:r.displayName}).then((function(t){s("alert",{message:"Тема для обсуждения добавлена. Обновите карту."}),s("close")})).catch((function(t){console.error("Error adding document: ",t)})):s("alert",{message:"У вас уже есть открытая тема. Одновременно можно открыть только одну тему."})}h();return t.$set=t=>{"user"in t&&n(4,r=t.user),"latlng"in t&&n(5,i=t.latlng),"region"in t&&n(6,o=t.region),"city"in t&&n(7,a=t.city)},[c,l,s,f,r,i,o,a,u,h,function(){c=this.value,n(0,c)},function(){l=this.value,n(1,l)},()=>s("close"),()=>f()]}class di extends wt{constructor(t){super(),bt(this,t,fi,hi,s,{user:4,latlng:5,region:6,city:7})}}function pi(e){let n,r,i,a,s,u,c,l,h;return{c(){n=T("div"),r=T("button"),r.innerHTML='<img src="./icons/police-car.png" alt="police" class="svelte-1rxkpub">',i=x(),a=T("div"),s=T("button"),s.innerHTML='<img src="./icons/speed-camera.png" alt="camera" class="svelte-1rxkpub">',u=x(),c=T("div"),l=T("button"),l.innerHTML='<img src="./icons/road-camera.png" alt="rcamera" class="svelte-1rxkpub">',A(r,"class","svelte-1rxkpub"),A(n,"class","fixed -mt-32"),A(s,"class","svelte-1rxkpub"),A(a,"class","fixed -ml-16 -mt-32"),A(l,"class","svelte-1rxkpub"),A(c,"class","fixed ml-16 -mt-32")},m(t,o){w(t,n,o),b(n,r),w(t,i,o),w(t,a,o),b(a,s),w(t,u,o),w(t,c,o),b(c,l),h=[k(r,"click",e[6]),k(r,"click",e[7]),k(s,"click",e[8]),k(s,"click",e[9]),k(l,"click",e[10]),k(l,"click",e[11])]},p:t,d(t){t&&_(n),t&&_(i),t&&_(a),t&&_(u),t&&_(c),o(h)}}}function mi(e){let n,r,i,a,s,u,c,l,h;return{c(){n=T("div"),r=T("button"),r.innerHTML='<img src="./icons/road-construction.png" alt="rc" class="svelte-1rxkpub">',i=x(),a=T("div"),s=T("button"),s.innerHTML='<img src="./icons/road-closed.png" alt="closed" class="svelte-1rxkpub">',u=x(),c=T("div"),l=T("button"),l.innerHTML='<img src="./icons/car-crash.png" alt="dtp" class="svelte-1rxkpub">',A(r,"class","svelte-1rxkpub"),A(n,"class","fixed ml-16"),A(s,"class","svelte-1rxkpub"),A(a,"class","fixed ml-16 -mt-16"),A(l,"class","svelte-1rxkpub"),A(c,"class","fixed ml-16 -mt-32")},m(t,o){w(t,n,o),b(n,r),w(t,i,o),w(t,a,o),b(a,s),w(t,u,o),w(t,c,o),b(c,l),h=[k(r,"click",e[13]),k(r,"click",e[14]),k(s,"click",e[15]),k(s,"click",e[16]),k(l,"click",e[17]),k(l,"click",e[18])]},p:t,d(t){t&&_(n),t&&_(i),t&&_(a),t&&_(u),t&&_(c),o(h)}}}function gi(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,S,I,C,N,M,P,L,D,R=t[1]&&pi(t),O=t[0]&&mi(t);return{c(){e=T("div"),n=T("div"),r=T("button"),r.innerHTML='<img src="./icons/button-cancel.png" alt="close" class="svelte-1rxkpub">',i=x(),a=T("div"),s=T("button"),s.innerHTML='<img src="./icons/police-car.png" alt="police" class="svelte-1rxkpub">',u=x(),R&&R.c(),c=x(),l=T("div"),h=T("button"),h.innerHTML='<img src="./icons/road-1.png" alt="road" class="svelte-1rxkpub">',f=x(),O&&O.c(),d=x(),p=T("div"),m=T("button"),m.innerHTML='<img src="./icons/chat-3.png" alt="add" class="svelte-1rxkpub">',g=x(),v=T("div"),y=T("button"),y.innerHTML='<img src="./icons/taxi-24.png" alt="taxiCall" class="svelte-1rxkpub">',E=x(),S=T("div"),I=T("button"),I.innerHTML='<img src="./icons/location-info.png" alt="address" class="svelte-1rxkpub">',C=x(),N=T("div"),M=T("button"),M.innerHTML='<img src="./icons/sos-button.png" alt="sos" class="svelte-1rxkpub">',A(r,"class","svelte-1rxkpub"),A(n,"class","close"),A(s,"class","svelte-1rxkpub"),A(a,"class","menu-item svelte-1rxkpub"),A(h,"class","svelte-1rxkpub"),A(l,"class","menu-item svelte-1rxkpub"),A(m,"class","svelte-1rxkpub"),A(p,"class","menu-item svelte-1rxkpub"),A(y,"class","svelte-1rxkpub"),A(v,"class","menu-item svelte-1rxkpub"),A(I,"class","svelte-1rxkpub"),A(S,"class","menu-item svelte-1rxkpub"),A(M,"class","svelte-1rxkpub"),A(N,"class","menu-item svelte-1rxkpub"),A(e,"class","container svelte-1rxkpub")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(e,i),b(e,a),b(a,s),b(a,u),R&&R.m(a,null),b(e,c),b(e,l),b(l,h),b(l,f),O&&O.m(l,null),b(e,d),b(e,p),b(p,m),b(e,g),b(e,v),b(v,y),b(e,E),b(e,S),b(S,I),b(e,C),b(e,N),b(N,M),L=!0,D=[k(r,"click",t[4]),k(s,"click",t[5]),k(h,"click",t[12]),k(m,"click",t[19]),k(m,"click",t[20]),k(y,"click",t[21]),k(y,"click",t[22]),k(I,"click",t[23]),k(I,"click",t[24]),k(M,"click",t[25]),k(M,"click",t[26])]},p(t,[e]){t[1]?R?R.p(t,e):(R=pi(t),R.c(),R.m(a,null)):R&&(R.d(1),R=null),t[0]?O?O.p(t,e):(O=mi(t),O.c(),O.m(l,null)):O&&(O.d(1),O=null)},i(t){L||(X(()=>{P||(P=pt(e,ln,{duration:500,easing:an},!0)),P.run(1)}),L=!0)},o(t){P||(P=pt(e,ln,{duration:500,easing:an},!1)),P.run(0),L=!1},d(t){t&&_(e),R&&R.d(),O&&O.d(),t&&P&&P.end(),o(D)}}}function vi(){let t=document.querySelectorAll(".menu-item");for(var e=0,n=t.length;e<n;e++)t[e].style.left=(50-35*Math.cos(-.5*Math.PI-1/n*2*e*Math.PI)).toFixed(4)+"%",t[e].style.top=(50+35*Math.sin(-.5*Math.PI-1/n*2*e*Math.PI)).toFixed(4)+"%"}function yi(t,e,n){const r=G();let i,o;z(vi);return[i,o,r,function(){r("closeMenu")},()=>r("closeMenu"),()=>n(1,o=!0),()=>r("police"),()=>r("closeMenu"),()=>r("mCamera"),()=>r("closeMenu"),()=>r("sCamera"),()=>r("closeMenu"),()=>n(0,i=!0),()=>r("rConstruction"),()=>r("closeMenu"),()=>r("rClosed"),()=>r("closeMenu"),()=>r("dtp"),()=>r("closeMenu"),()=>r("add"),()=>r("closeMenu"),()=>r("taxiCall"),()=>r("closeMenu"),()=>r("getAddress"),()=>r("closeMenu"),()=>r("sos"),()=>r("closeMenu")]}class bi extends wt{constructor(t){super(),bt(this,t,yi,gi,s,{})}}var wi=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},_i=Object.prototype.toString;function Ei(t){return"[object Array]"===_i.call(t)}function Ti(t){return void 0===t}function Si(t){return null!==t&&"object"==typeof t}function xi(t){return"[object Function]"===_i.call(t)}function Ii(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),Ei(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var ki={isArray:Ei,isArrayBuffer:function(t){return"[object ArrayBuffer]"===_i.call(t)},isBuffer:function(t){return null!==t&&!Ti(t)&&null!==t.constructor&&!Ti(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:Si,isUndefined:Ti,isDate:function(t){return"[object Date]"===_i.call(t)},isFile:function(t){return"[object File]"===_i.call(t)},isBlob:function(t){return"[object Blob]"===_i.call(t)},isFunction:xi,isStream:function(t){return Si(t)&&xi(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Ii,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)Ii(arguments[r],n);return e},deepMerge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]="object"==typeof n?t({},n):n}for(var r=0,i=arguments.length;r<i;r++)Ii(arguments[r],n);return e},extend:function(t,e,n){return Ii(e,(function(e,r){t[r]=n&&"function"==typeof e?wi(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function Ai(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ci=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(ki.isURLSearchParams(e))r=e.toString();else{var i=[];ki.forEach(e,(function(t,e){null!=t&&(ki.isArray(t)?e+="[]":t=[t],ki.forEach(t,(function(t){ki.isDate(t)?t=t.toISOString():ki.isObject(t)&&(t=JSON.stringify(t)),i.push(Ai(e)+"="+Ai(t))})))})),r=i.join("&")}if(r){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t};function Ni(){this.handlers=[]}Ni.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},Ni.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Ni.prototype.forEach=function(t){ki.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var Mi=Ni,Pi=function(t,e,n){return ki.forEach(n,(function(n){t=n(t,e)})),t},Li=function(t){return!(!t||!t.__CANCEL__)},Di=function(t,e){ki.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))},Ri=function(t,e,n,r,i){return function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,n,r,i)},Oi=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Bi=ki.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=ki.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0},Ui=ki.isStandardBrowserEnv()?{write:function(t,e,n,r,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),ki.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ki.isString(r)&&a.push("path="+r),ki.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Fi=function(t){return new Promise((function(e,n){var r=t.data,i=t.headers;ki.isFormData(r)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(t.auth){var a=t.auth.username||"",s=t.auth.password||"";i.Authorization="Basic "+btoa(a+":"+s)}var u,c,l=(u=t.baseURL,c=t.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(u,c):c);if(o.open(t.method.toUpperCase(),Ci(l,t.params,t.paramsSerializer),!0),o.timeout=t.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r,i,a,s,u,c="getAllResponseHeaders"in o?(r=o.getAllResponseHeaders(),u={},r?(ki.forEach(r.split("\n"),(function(t){if(s=t.indexOf(":"),i=ki.trim(t.substr(0,s)).toLowerCase(),a=ki.trim(t.substr(s+1)),i){if(u[i]&&Oi.indexOf(i)>=0)return;u[i]="set-cookie"===i?(u[i]?u[i]:[]).concat([a]):u[i]?u[i]+", "+a:a}})),u):u):null,l={data:t.responseType&&"text"!==t.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:c,config:t,request:o};!function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(Ri("Request failed with status code "+n.status,n.config,null,n.request,n))}(e,n,l),o=null}},o.onabort=function(){o&&(n(Ri("Request aborted",t,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(Ri("Network Error",t,null,o)),o=null},o.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(Ri(e,t,"ECONNABORTED",o)),o=null},ki.isStandardBrowserEnv()){var h=Ui,f=(t.withCredentials||Bi(l))&&t.xsrfCookieName?h.read(t.xsrfCookieName):void 0;f&&(i[t.xsrfHeaderName]=f)}if("setRequestHeader"in o&&ki.forEach(i,(function(t,e){void 0===r&&"content-type"===e.toLowerCase()?delete i[e]:o.setRequestHeader(e,t)})),ki.isUndefined(t.withCredentials)||(o.withCredentials=!!t.withCredentials),t.responseType)try{o.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&o.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){o&&(o.abort(),n(t),o=null)})),void 0===r&&(r=null),o.send(r)}))},ji={"Content-Type":"application/x-www-form-urlencoded"};function qi(t,e){!ki.isUndefined(t)&&ki.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var Vi,$i={adapter:("undefined"!=typeof XMLHttpRequest?Vi=Fi:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(Vi=Fi),Vi),transformRequest:[function(t,e){return Di(e,"Accept"),Di(e,"Content-Type"),ki.isFormData(t)||ki.isArrayBuffer(t)||ki.isBuffer(t)||ki.isStream(t)||ki.isFile(t)||ki.isBlob(t)?t:ki.isArrayBufferView(t)?t.buffer:ki.isURLSearchParams(t)?(qi(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):ki.isObject(t)?(qi(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};$i.headers={common:{Accept:"application/json, text/plain, */*"}},ki.forEach(["delete","get","head"],(function(t){$i.headers[t]={}})),ki.forEach(["post","put","patch"],(function(t){$i.headers[t]=ki.merge(ji)}));var zi=$i;function Hi(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Gi=function(t){return Hi(t),t.headers=t.headers||{},t.data=Pi(t.data,t.headers,t.transformRequest),t.headers=ki.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),ki.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||zi.adapter)(t).then((function(e){return Hi(t),e.data=Pi(e.data,e.headers,t.transformResponse),e}),(function(e){return Li(e)||(Hi(t),e&&e.response&&(e.response.data=Pi(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},Wi=function(t,e){e=e||{};var n={},r=["url","method","params","data"],i=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];ki.forEach(r,(function(t){void 0!==e[t]&&(n[t]=e[t])})),ki.forEach(i,(function(r){ki.isObject(e[r])?n[r]=ki.deepMerge(t[r],e[r]):void 0!==e[r]?n[r]=e[r]:ki.isObject(t[r])?n[r]=ki.deepMerge(t[r]):void 0!==t[r]&&(n[r]=t[r])})),ki.forEach(o,(function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])}));var a=r.concat(i).concat(o),s=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return ki.forEach(s,(function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])})),n};function Ki(t){this.defaults=t,this.interceptors={request:new Mi,response:new Mi}}Ki.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=Wi(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[Gi,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},Ki.prototype.getUri=function(t){return t=Wi(this.defaults,t),Ci(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},ki.forEach(["delete","get","head","options"],(function(t){Ki.prototype[t]=function(e,n){return this.request(ki.merge(n||{},{method:t,url:e}))}})),ki.forEach(["post","put","patch"],(function(t){Ki.prototype[t]=function(e,n,r){return this.request(ki.merge(r||{},{method:t,url:e,data:n}))}}));var Zi=Ki;function Qi(t){this.message=t}Qi.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Qi.prototype.__CANCEL__=!0;var Yi=Qi;function Ji(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new Yi(t),e(n.reason))}))}Ji.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Ji.source=function(){var t;return{token:new Ji((function(e){t=e})),cancel:t}};var Xi=Ji;function to(t){var e=new Zi(t),n=wi(Zi.prototype.request,e);return ki.extend(n,Zi.prototype,e),ki.extend(n,e),n}var eo=to(zi);eo.Axios=Zi,eo.create=function(t){return to(Wi(eo.defaults,t))},eo.Cancel=Yi,eo.CancelToken=Xi,eo.isCancel=Li,eo.all=function(t){return Promise.all(t)},eo.spread=function(t){return function(e){return t.apply(null,e)}};var no=eo,ro=eo;no.default=ro;var io=no,oo=xt((function(t){!function(){var e=window.CustomEvent;function n(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement}return null}function r(t){t&&t.blur&&t!==document.body&&t.blur()}function i(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1}function o(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function a(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]})}else{var e,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===t){var o="DOMNodeRemoved";n|=i.type.substr(0,o.length)===o,window.clearTimeout(e),e=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(e){t.addEventListener(e,i)}))}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),n}).prototype=window.Event.prototype),a.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var e=document.createElement("div");this.dialog_.insertBefore(e,this.dialog_.firstChild),e.tabIndex=-1,e.focus(),this.dialog_.removeChild(e)}var n=document.createEvent("MouseEvents");n.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(n),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_),!t){var e=["button","input","keygen","select","textarea"].map((function(t){return t+":not([disabled])"}));e.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(e.join(", "))}r(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){if(t<e)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t,this.backdrop_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(t){for(;t&&t!==document.body;){var e=window.getComputedStyle(t),n=function(t,n){return!(void 0===e[t]||e[t]===n)};if(e.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===e.isolation||"fixed"===e.position||"touch"===e.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var s={reposition:function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,n=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,n)+"px"},isInlinePositionSetByStylesheet:function(t){for(var e=0;e<document.styleSheets.length;++e){var n=document.styleSheets[e],r=null;try{r=n.cssRules}catch(t){}if(r)for(var o=0;o<r.length;++o){var a=r[o],s=null;try{s=document.querySelectorAll(a.selectorText)}catch(t){}if(s&&i(s,t)){var u=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(t){return"absolute"===window.getComputedStyle(t).position&&(!("auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom)&&!s.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){if((window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new a(t)},registerDialog:function(t){t.showModal||s.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(e){var n=[];e.forEach((function(t){for(var e,r=0;e=t.removedNodes[r];++r)e instanceof Element&&("dialog"===e.localName&&n.push(e),n=n.concat(e.querySelectorAll("dialog")))})),n.length&&t(n)})))}};if(s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var t,e=this.zIndexHigh_,n=0;t=this.pendingDialogStack[n];++n)t.updateZIndex(--e,--e),0===n&&(this.overlay.style.zIndex=--e);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=n(t);){for(var e,r=0;e=this.pendingDialogStack[r];++r)if(e.dialog===t)return 0===r;t=t.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(t){if(!this.containedByTopDialog_(t.target)&&(t.preventDefault(),t.stopPropagation(),r(t.target),void 0!==this.forwardTab_)){var e=this.pendingDialogStack[0];return e.dialog.compareDocumentPosition(t.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(n)&&r.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},s.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach((function(e){-1!==t.indexOf(e.dialog)?e.downgradeModal():e.maybeHideModal()}))},s.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e)&&(1===this.pendingDialogStack.unshift(t)&&this.blockDocument(),this.updateStacking(),!0)},s.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);-1!==e&&(this.pendingDialogStack.splice(e,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var u=document.createElement("form");if(u.setAttribute("method","dialog"),"dialog"!==u.method){var c=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(c){var l=c.get;c.get=function(){return o(this)?"dialog":l.call(this)};var h=c.set;c.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):h.call(this,t)},Object.defineProperty(HTMLFormElement.prototype,"method",c)}}document.addEventListener("click",(function(t){if(s.formSubmitter=null,s.useValue=null,!t.defaultPrevented){var e=t.target;if(e&&o(e.form)){if(!("submit"===e.type&&["button","input"].indexOf(e.localName)>-1)){if("input"!==e.localName||"image"!==e.type)return;s.useValue=t.offsetX+","+t.offsetY}n(e)&&(s.formSubmitter=e)}}}),!1);var f=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!o(this))return f.call(this);var t=n(this);t&&t.close()},document.addEventListener("submit",(function(t){var e=t.target;if(o(e)){t.preventDefault();var r=n(e);if(r){var i=s.formSubmitter;i&&i.form===e?r.close(s.useValue||i.value):r.close(),s.formSubmitter=null}}}),!0)}s.forceRegisterDialog=s.forceRegisterDialog,s.registerDialog=s.registerDialog,"object"==typeof t.exports?t.exports=s:window.dialogPolyfill=s}()})),ao=xt((function(t){!function(){var e=Lt;void 0!==e.default&&(e=e.default),function(){var e=window.CustomEvent;function n(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement}return null}function r(t){t&&t.blur&&t!==document.body&&t.blur()}function i(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1}function o(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function a(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]})}else{var e,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===t){var o="DOMNodeRemoved";n|=i.type.substr(0,o.length)===o,window.clearTimeout(e),e=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(e){t.addEventListener(e,i)}))}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),n}).prototype=window.Event.prototype),a.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var e=document.createElement("div");this.dialog_.insertBefore(e,this.dialog_.firstChild),e.tabIndex=-1,e.focus(),this.dialog_.removeChild(e)}var n=document.createEvent("MouseEvents");n.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(n),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_),!t){var e=["button","input","keygen","select","textarea"].map((function(t){return t+":not([disabled])"}));e.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(e.join(", "))}r(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){if(t<e)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t,this.backdrop_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(t){for(;t&&t!==document.body;){var e=window.getComputedStyle(t),n=function(t,n){return!(void 0===e[t]||e[t]===n)};if(e.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===e.isolation||"fixed"===e.position||"touch"===e.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var s={reposition:function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,n=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,n)+"px"},isInlinePositionSetByStylesheet:function(t){for(var e=0;e<document.styleSheets.length;++e){var n=document.styleSheets[e],r=null;try{r=n.cssRules}catch(t){}if(r)for(var o=0;o<r.length;++o){var a=r[o],s=null;try{s=document.querySelectorAll(a.selectorText)}catch(t){}if(s&&i(s,t)){var u=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(t){return"absolute"===window.getComputedStyle(t).position&&(!("auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom)&&!s.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){if((window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new a(t)},registerDialog:function(t){t.showModal||s.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(e){var n=[];e.forEach((function(t){for(var e,r=0;e=t.removedNodes[r];++r)e instanceof Element&&("dialog"===e.localName&&n.push(e),n=n.concat(e.querySelectorAll("dialog")))})),n.length&&t(n)})))}};if(s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var t,e=this.zIndexHigh_,n=0;t=this.pendingDialogStack[n];++n)t.updateZIndex(--e,--e),0===n&&(this.overlay.style.zIndex=--e);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=n(t);){for(var e,r=0;e=this.pendingDialogStack[r];++r)if(e.dialog===t)return 0===r;t=t.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(t){if(!this.containedByTopDialog_(t.target)&&(t.preventDefault(),t.stopPropagation(),r(t.target),void 0!==this.forwardTab_)){var e=this.pendingDialogStack[0];return e.dialog.compareDocumentPosition(t.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(n)&&r.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},s.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach((function(e){-1!==t.indexOf(e.dialog)?e.downgradeModal():e.maybeHideModal()}))},s.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e)&&(1===this.pendingDialogStack.unshift(t)&&this.blockDocument(),this.updateStacking(),!0)},s.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);-1!==e&&(this.pendingDialogStack.splice(e,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var u=document.createElement("form");if(u.setAttribute("method","dialog"),"dialog"!==u.method){var c=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(c){var l=c.get;c.get=function(){return o(this)?"dialog":l.call(this)};var h=c.set;c.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):h.call(this,t)},Object.defineProperty(HTMLFormElement.prototype,"method",c)}}document.addEventListener("click",(function(t){if(s.formSubmitter=null,s.useValue=null,!t.defaultPrevented){var e=t.target;if(e&&o(e.form)){if(!("submit"===e.type&&["button","input"].indexOf(e.localName)>-1)){if("input"!==e.localName||"image"!==e.type)return;s.useValue=t.offsetX+","+t.offsetY}n(e)&&(s.formSubmitter=e)}}}),!1);var f=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!o(this))return f.call(this);var t=n(this);t&&t.close()},document.addEventListener("submit",(function(t){var e=t.target;if(o(e)){t.preventDefault();var r=n(e);if(r){var i=s.formSubmitter;i&&i.form===e?r.close(s.useValue||i.value):r.close(),s.formSubmitter=null}}}),!0)}s.forceRegisterDialog=s.forceRegisterDialog,s.registerDialog=s.registerDialog,"object"==typeof t.exports?t.exports=s:window.dialogPolyfill=s}();var n,r,i,o,a={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};(a=function(){var t=[],e=[];function n(e,n){for(var r=0;r<t.length;r++)if(t[r].className===e)return void 0!==n&&(t[r]=n),t[r];return!1}function r(t){var e=t.getAttribute("data-upgraded");return null===e?[""]:e.split(",")}function i(t,e){return-1!==r(t).indexOf(e)}function o(t,e,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(t,{bubbles:e,cancelable:n});var r=document.createEvent("Events");return r.initEvent(t,e,n),r}function a(e,r){if(void 0===e&&void 0===r)for(var i=0;i<t.length;i++)a(t[i].className,t[i].cssClass);else{var o=e;if(void 0===r){var u=n(o);u&&(r=u.cssClass)}for(var c=document.querySelectorAll("."+r),l=0;l<c.length;l++)s(c[l],o)}}function s(a,s){if(!("object"==typeof a&&a instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var u=o("mdl-componentupgrading",!0,!0);if(a.dispatchEvent(u),!u.defaultPrevented){var c=r(a),l=[];if(s)i(a,s)||l.push(n(s));else{var h=a.classList;t.forEach((function(t){h.contains(t.cssClass)&&-1===l.indexOf(t)&&!i(a,t.className)&&l.push(t)}))}for(var f,d=0,p=l.length;d<p;d++){if(!(f=l[d]))throw new Error("Unable to find a registered component for the given class.");c.push(f.className),a.setAttribute("data-upgraded",c.join(","));var m=new f.classConstructor(a);m.mdlComponentConfigInternal_=f,e.push(m);for(var g=0,v=f.callbacks.length;g<v;g++)f.callbacks[g](a);f.widget&&(a[f.className]=m);var y=o("mdl-componentupgraded",!0,!1);a.dispatchEvent(y)}}}function u(t){if(t){var n=e.indexOf(t);e.splice(n,1);var r=t.element_.getAttribute("data-upgraded").split(","),i=r.indexOf(t.mdlComponentConfigInternal_.classAsString);r.splice(i,1),t.element_.setAttribute("data-upgraded",r.join(","));var a=o("mdl-componentdowngraded",!0,!1);t.element_.dispatchEvent(a)}}return{upgradeDom:a,upgradeElement:s,upgradeElements:function t(e){Array.isArray(e)||(e=e instanceof Element?[e]:Array.prototype.slice.call(e));for(var n,r=0,i=e.length;r<i;r++)(n=e[r])instanceof HTMLElement&&(s(n),n.children.length>0&&t(n.children))},upgradeAllRegistered:function(){for(var e=0;e<t.length;e++)a(t[e].className)},registerUpgradedCallback:function(t,e){var r=n(t);r&&r.callbacks.push(e)},register:function(e){var r=!0;void 0===e.widget&&void 0===e.widget||(r=e.widget||e.widget);var i={classConstructor:e.constructor||e.constructor,className:e.classAsString||e.classAsString,cssClass:e.cssClass||e.cssClass,widget:r,callbacks:[]};if(t.forEach((function(t){if(t.cssClass===i.cssClass)throw new Error("The provided cssClass has already been registered: "+t.cssClass);if(t.className===i.className)throw new Error("The provided className has already been registered")})),e.constructor.prototype.hasOwnProperty("mdlComponentConfigInternal_"))throw new Error("MDL component classes must not have mdlComponentConfigInternal_ defined as a property.");n(e.classAsString,i)||t.push(i)},downgradeElements:function(t){var n=function(t){e.filter((function(e){return e.element_===t})).forEach(u)};if(t instanceof Array||t instanceof NodeList)for(var r=0;r<t.length;r++)n(t[r]);else{if(!(t instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");n(t)}}}}()).ComponentConfigPublic,a.ComponentConfig,a.Component,a.upgradeDom=a.upgradeDom,a.upgradeElement=a.upgradeElement,a.upgradeElements=a.upgradeElements,a.upgradeAllRegistered=a.upgradeAllRegistered,a.registerUpgradedCallback=a.registerUpgradedCallback,a.register=a.register,a.downgradeElements=a.downgradeElements,window.componentHandler=a,window.componentHandler=a,window.addEventListener("load",(function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),a.upgradeAllRegistered()):(a.upgradeElement=function(){},a.register=function(){})})),n=function(t){this.element_=t,this.init()},window.MaterialButton=n,n.prototype.Constant_={},n.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},n.prototype.blurHandler_=function(t){t&&this.element_.blur()},n.prototype.disable=function(){this.element_.disabled=!0},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.element_.disabled=!1},n.prototype.enable=n.prototype.enable,n.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var t=document.createElement("span");t.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),t.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(t)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},a.register({constructor:n,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0}),r=function(t){this.element_=t,this.init()},window.MaterialProgress=r,r.prototype.Constant_={},r.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},r.prototype.setProgress=function(t){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=t+"%")},r.prototype.setProgress=r.prototype.setProgress,r.prototype.setBuffer=function(t){this.bufferbar_.style.width=t+"%",this.auxbar_.style.width=100-t+"%"},r.prototype.setBuffer=r.prototype.setBuffer,r.prototype.init=function(){if(this.element_){var t=document.createElement("div");t.className="progressbar bar bar1",this.element_.appendChild(t),this.progressbar_=t,(t=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(t),this.bufferbar_=t,(t=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(t),this.auxbar_=t,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},a.register({constructor:r,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0}),i=function(t){this.element_=t,this.init()},window.MaterialSpinner=i,i.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},i.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},i.prototype.createLayer=function(t){var e=document.createElement("div");e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+t);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[n,r,i],a=0;a<o.length;a++){var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[a].appendChild(s)}e.appendChild(n),e.appendChild(r),e.appendChild(i),this.element_.appendChild(e)},i.prototype.createLayer=i.prototype.createLayer,i.prototype.stop=function(){this.element_.classList.remove("is-active")},i.prototype.stop=i.prototype.stop,i.prototype.start=function(){this.element_.classList.add("is-active")},i.prototype.start=i.prototype.start,i.prototype.init=function(){if(this.element_){for(var t=1;t<=this.Constant_.MDL_SPINNER_LAYER_COUNT;t++)this.createLayer(t);this.element_.classList.add("is-upgraded")}},a.register({constructor:i,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0}),o=function(t){this.element_=t,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()},window.MaterialTextfield=o,o.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},o.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},o.prototype.onKeyDown_=function(t){var e=t.target.value.split("\n").length;13===t.keyCode&&e>=this.maxRows&&t.preventDefault()},o.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},o.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},o.prototype.onReset_=function(t){this.updateClasses_()},o.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},o.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},o.prototype.checkDisabled=o.prototype.checkDisabled,o.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},o.prototype.checkFocus=o.prototype.checkFocus,o.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},o.prototype.checkValidity=o.prototype.checkValidity,o.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},o.prototype.checkDirty=o.prototype.checkDirty,o.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},o.prototype.disable=o.prototype.disable,o.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},o.prototype.enable=o.prototype.enable,o.prototype.change=function(t){this.input_.value=t||"",this.updateClasses_()},o.prototype.change=o.prototype.change,o.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var t=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),t&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},a.register({constructor:o,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0}),function(){var t,n,r="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var i;t:{var o={};try{o.__proto__={zb:!0},i=o.zb;break t}catch(re){}i=!1}n=i?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var a=n;function s(t,e){if(t.prototype=r(e.prototype),t.prototype.constructor=t,a)a(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.M=e.prototype}var u="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},c="undefined"!=typeof window&&window===this?this:void 0!==Et&&null!=Et?Et:this;function l(t,e){if(e){var n=c;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&u(n,t,{configurable:!0,writable:!0,value:e})}}function h(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function f(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:h(t)}}l("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),l("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(e=e||0)&&(e=Math.max(e+r,0));e<r;e++){var i=n[e];if(i===t||Object.is(i,t))return!0}return!1}})),l("Promise",(function(t){function e(t){this.f=0,this.h=void 0,this.a=[];var e=this.j();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.f=function(t){if(null==this.a){this.a=[];var e=this;this.h((function(){e.s()}))}this.a.push(t)};var i=c.setTimeout;n.prototype.h=function(t){i(t,0)},n.prototype.s=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.j(t)}}}this.a=null},n.prototype.j=function(t){this.h((function(){throw t}))},e.prototype.j=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.L),reject:t(this.s)}},e.prototype.L=function(t){if(t===this)this.s(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.N(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.I(t):this.i(t)}},e.prototype.I=function(t){var e=void 0;try{e=t.then}catch(t){return void this.s(t)}"function"==typeof e?this.O(e,t):this.i(t)},e.prototype.s=function(t){this.w(2,t)},e.prototype.i=function(t){this.w(1,t)},e.prototype.w=function(t,e){if(0!=this.f)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.f);this.f=t,this.h=e,this.C()},e.prototype.C=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)o.f(this.a[t]);this.a=null}};var o=new n;return e.prototype.N=function(t){var e=this.j();t.Ia(e.resolve,e.reject)},e.prototype.O=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ia(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ia=function(t,e){function n(){switch(r.f){case 1:t(r.h);break;case 2:e(r.h);break;default:throw Error("Unexpected state: "+r.f)}}var r=this;null==this.a?o.f(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=f(t),o=i.next();!o.done;o=i.next())r(o.value).Ia(e,n)}))},e.all=function(t){var n=f(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Ia(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var d=this;function p(t){return void 0!==t}function m(t){return"string"==typeof t}var g=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function b(t){t.V=void 0,t.Ya=function(){return t.V?t.V:t.V=new t}}function w(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function _(t){return"array"==w(t)}function E(t){var e=w(t);return"array"==e||"object"==e&&"number"==typeof t.length}function T(t){return"function"==w(t)}function S(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var x="closure_uid_"+(1e9*Math.random()>>>0),I=0;function k(t,e,n){return t.call.apply(t.bind,arguments)}function A(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function C(t,e,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?k:A).apply(null,arguments)}function N(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function M(t,e){for(var n in e)t[n]=e[n]}var P,L=Date.now||function(){return+new Date};function D(t,e){t=t.split(".");var n,r=d;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)!t.length&&p(e)?r[n]=e:r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}}function R(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.uc=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function B(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function U(t,e){throw new B("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}R(O,Error),O.prototype.name="CustomError",R(B,O),B.prototype.name="AssertionError";var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(m(t))return m(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=m(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o=m(t)?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=m(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},$=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=m(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function z(t,e,n){for(var r=t.length,i=m(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&e.call(n,i[o],o,t))return o;return-1}function H(t,e){return 0<=F(t,e)}function G(t,e){var n;return(n=0<=(e=F(t,e)))&&W(t,e),n}function W(t,e){return 1==Array.prototype.splice.call(t,e,1).length}function K(t,e){!function(t,e){for(var n=m(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&W(t,r)&&0}))}function Z(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Y(t,e,n,r){return Array.prototype.splice.apply(t,J(arguments,1))}function J(t,e,n){return 2>=arguments.length?Array.prototype.slice.call(t,e):Array.prototype.slice.call(t,e,n)}var X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,at=/[\x00&<>"']/;function st(t,e){return t<e?-1:t>e?1:0}function ut(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function ct(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function lt(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}var dt="StopIteration"in d?d.StopIteration:{message:"StopIteration",stack:""};function pt(){}function mt(t){if(t instanceof pt)return t;if("function"==typeof t.ha)return t.ha(!1);if(E(t)){var e=0,n=new pt;return n.next=function(){for(;;){if(e>=t.length)throw dt;if(e in t)return t[e++];e++}},n}throw Error("Not implemented")}function gt(t){if(E(t))return Q(t);t=mt(t);var e=[];return function(t,e){if(E(t))try{j(t,e,void 0)}catch(t){if(t!==dt)throw t}else{t=mt(t);try{for(;;)e.call(void 0,t.next(),void 0,t)}catch(t){if(t!==dt)throw t}}}(t,(function(t){e.push(t)})),e}function vt(t,e){this.f={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof vt)for(n=t.ja(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function yt(t){if(t.h!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];bt(t.f,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.h!=t.a.length){var i={};for(n=e=0;e<t.a.length;)bt(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function bt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}pt.prototype.next=function(){throw dt},pt.prototype.ha=function(){return this},(t=vt.prototype).la=function(){yt(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.f[this.a[e]]);return t},t.ja=function(){return yt(this),this.a.concat()},t.clear=function(){this.f={},this.j=this.h=this.a.length=0},t.get=function(t,e){return bt(this.f,t)?this.f[t]:e},t.set=function(t,e){bt(this.f,t)||(this.h++,this.a.push(t),this.j++),this.f[t]=e},t.forEach=function(t,e){for(var n=this.ja(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},t.ha=function(t){yt(this);var e=0,n=this.j,r=this,i=new pt;return i.next=function(){if(n!=r.j)throw Error("The map has changed since the iterator was created");if(e>=r.a.length)throw dt;var i=r.a[e++];return t?i:r.f[i]},i};var wt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _t(t,e,n,r){for(var i=n.length;0<=(e=t.indexOf(n,e))&&e<r;){var o=t.charCodeAt(e-1);if((38==o||63==o)&&(!(o=t.charCodeAt(e+i))||61==o||38==o||35==o))return e;e+=i+1}return-1}var Tt=/#|$/;function St(t,e){var n=t.search(Tt),r=_t(t,0,e,n);if(0>r)return null;var i=t.indexOf("&",r);return(0>i||i>n)&&(i=n),r+=e.length+1,decodeURIComponent(t.substr(r,i-r).replace(/\+/g," "))}var xt=/[?&]($|#)/;function It(t,e){var n;this.h=this.w=this.j="",this.C=null,this.s=this.f="",this.i=!1,t instanceof It?(this.i=p(e)?e:t.i,kt(this,t.j),this.w=t.w,this.h=t.h,At(this,t.C),this.f=t.f,Ct(this,zt(t.a)),this.s=t.s):t&&(n=String(t).match(wt))?(this.i=!!e,kt(this,n[1]||"",!0),this.w=Pt(n[2]||""),this.h=Pt(n[3]||"",!0),At(this,n[4]),this.f=Pt(n[5]||"",!0),Ct(this,n[6]||"",!0),this.s=Pt(n[7]||"")):(this.i=!!e,this.a=new jt(null,this.i))}function kt(t,e,n){t.j=n?Pt(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function At(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.C=e}else t.C=null}function Ct(t,e,n){e instanceof jt?(t.a=e,function(t,e){e&&!t.j&&(qt(t),t.h=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Vt(this,e),Vt(this,n),0<t.length&&(this.h=null,this.a.set(Ht(this,n),Q(t)),this.f+=t.length))}),t)),t.j=e}(t.a,t.i)):(n||(e=Lt(e,Ut)),t.a=new jt(e,t.i))}function Nt(t){return t instanceof It?new It(t):new It(t,void 0)}function Mt(t,e){return t instanceof It||(t=Nt(t)),e instanceof It||(e=Nt(e)),t.resolve(e)}function Pt(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lt(t,e,n){return m(t)?(t=encodeURI(t).replace(e,Dt),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Dt(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}It.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lt(e,Rt,!0),":");var n=this.h;return(n||"file"==e)&&(t.push("//"),(e=this.w)&&t.push(Lt(e,Rt,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&t.push(":",String(n))),(n=this.f)&&(this.h&&"/"!=n.charAt(0)&&t.push("/"),t.push(Lt(n,"/"==n.charAt(0)?Bt:Ot,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.s)&&t.push("#",Lt(n,Ft)),t.join("")},It.prototype.resolve=function(t){var e=new It(this),n=!!t.j;n?kt(e,t.j):n=!!t.w,n?e.w=t.w:n=!!t.h,n?e.h=t.h:n=null!=t.C;var r=t.f;if(n)At(e,t.C);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.h&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.a.toString(),n?Ct(e,zt(t.a)):n=!!t.s,n&&(e.s=t.s),e};var Rt=/[#\/\?@]/g,Ot=/[#\?:]/g,Bt=/[#\?]/g,Ut=/[#\?@]/g,Ft=/#/g;function jt(t,e){this.f=this.a=null,this.h=t||null,this.j=!!e}function qt(t){t.a||(t.a=new vt,t.f=0,t.h&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.h,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Vt(t,e){qt(t),e=Ht(t,e),bt(t.a.f,e)&&(t.h=null,t.f-=t.a.get(e).length,bt((t=t.a).f,e)&&(delete t.f[e],t.h--,t.j++,t.a.length>2*t.h&&yt(t)))}function $t(t,e){return qt(t),e=Ht(t,e),bt(t.a.f,e)}function zt(t){var e=new jt;return e.h=t.h,t.a&&(e.a=new vt(t.a),e.f=t.f),e}function Ht(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Gt(t){this.a=Nt(t)}function Wt(t){return t.a.a.get(Qt.Qa)||null}function Kt(t,e){e?t.a.a.set(Qt.PROVIDER_ID,e):Vt(t.a.a,Qt.PROVIDER_ID)}(t=jt.prototype).add=function(t,e){qt(this),this.h=null,t=Ht(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.f+=1,this},t.clear=function(){this.a=this.h=null,this.f=0},t.forEach=function(t,e){qt(this),this.a.forEach((function(n,r){j(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.ja=function(){qt(this);for(var t=this.a.la(),e=this.a.ja(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.la=function(t){qt(this);var e=[];if(m(t))$t(this,t)&&(e=Z(e,this.a.get(Ht(this,t))));else{t=this.a.la();for(var n=0;n<t.length;n++)e=Z(e,t[n])}return e},t.set=function(t,e){return qt(this),this.h=null,$t(this,t=Ht(this,t))&&(this.f-=this.a.get(t).length),this.a.set(t,[e]),this.f+=1,this},t.get=function(t,e){return t&&0<(t=this.la(t)).length?String(t[0]):e},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var t=[],e=this.a.ja(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.la(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.h=t.join("&")},Gt.prototype.toString=function(){return this.a.toString()};var Zt,Qt={Qa:"ui_auid",kc:"apiKey",Ra:"ui_sd",wb:"mode",ab:"oobCode",PROVIDER_ID:"ui_pid",Ta:"ui_sid",xb:"tenantId"};t:{var Yt=d.navigator;if(Yt){var Jt=Yt.userAgent;if(Jt){Zt=Jt;break t}}Zt=""}function Xt(t){return-1!=Zt.indexOf(t)}function te(){return(Xt("Chrome")||Xt("CriOS"))&&!Xt("Edge")}function ee(t){return ee[" "](t),t}ee[" "]=y;var ne,re,ie=Xt("Opera"),oe=Xt("Trident")||Xt("MSIE"),ae=Xt("Edge"),se=ae||oe,ue=Xt("Gecko")&&!(-1!=Zt.toLowerCase().indexOf("webkit")&&!Xt("Edge"))&&!(Xt("Trident")||Xt("MSIE"))&&!Xt("Edge"),ce=-1!=Zt.toLowerCase().indexOf("webkit")&&!Xt("Edge"),le=ce&&Xt("Mobile"),he=Xt("Macintosh");function fe(){var t=d.document;return t?t.documentMode:void 0}t:{var de="",pe=(re=Zt,ue?/rv:([^\);]+)(\)|;)/.exec(re):ae?/Edge\/([\d\.]+)/.exec(re):oe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(re):ce?/WebKit\/(\S+)/.exec(re):ie?/(?:Version)[ \/]?(\S+)/.exec(re):void 0);if(pe&&(de=pe?pe[1]:""),oe){var me=fe();if(null!=me&&me>parseFloat(de)){ne=String(me);break t}}ne=de}var ge,ve={};function ye(t){return function(t,e){var n=ve;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=X(String(ne)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=st(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||st(0==a[2].length,0==s[2].length)||st(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var be=d.document;function we(t,e){this.a=t===Te&&e||"",this.f=Ee}function _e(t){return t instanceof we&&t.constructor===we&&t.f===Ee?t.a:(U("expected object of type Const, got '"+t+"'"),"type_error:Const")}ge=be&&oe?fe()||("CSS1Compat"==be.compatMode?parseInt(ne,10):5):void 0,we.prototype.ma=!0,we.prototype.ka=function(){return this.a},we.prototype.toString=function(){return"Const{"+this.a+"}"};var Ee={},Te={};function Se(){this.a="",this.h=Ie}function xe(t){return t instanceof Se&&t.constructor===Se&&t.h===Ie?t.a:(U("expected object of type TrustedResourceUrl, got '"+t+"' of type "+w(t)),"type_error:TrustedResourceUrl")}Se.prototype.ma=!0,Se.prototype.ka=function(){return this.a.toString()},Se.prototype.f=function(){return 1},Se.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ie={};function ke(t){var e=new Se;return e.a=t,e}function Ae(){this.a="",this.h=Le}function Ce(t){return Ne(t).toString()}function Ne(t){return t instanceof Ae&&t.constructor===Ae&&t.h===Le?t.a:(U("expected object of type SafeUrl, got '"+t+"' of type "+w(t)),"type_error:SafeUrl")}Ae.prototype.ma=!0,Ae.prototype.ka=function(){return this.a.toString()},Ae.prototype.f=function(){return 1},Ae.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Me=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pe(t){return t instanceof Ae?t:(t="object"==typeof t&&t.ma?t.ka():String(t),Me.test(t)||(t="about:invalid#zClosurez"),De(t))}var Le={};function De(t){var e=new Ae;return e.a=t,e}function Re(){this.a="",this.f=Oe}De("about:blank"),Re.prototype.ma=!0;var Oe={};function Be(){this.a="",this.j=Fe,this.h=null}function Ue(t){return t instanceof Be&&t.constructor===Be&&t.j===Fe?t.a:(U("expected object of type SafeHtml, got '"+t+"' of type "+w(t)),"type_error:SafeHtml")}Re.prototype.ka=function(){return this.a},Re.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},Be.prototype.f=function(){return this.h},Be.prototype.ma=!0,Be.prototype.ka=function(){return this.a.toString()},Be.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Fe={};function je(t,e){var n=new Be;return n.a=t,n.h=e,n}je("<!DOCTYPE html>",0);var qe=je("",0);je("<br>",0);var Ve,$e,ze=($e=!1,function(){return $e||(Ve=function(){if("undefined"==typeof document)return!1;var t=document.createElement("div"),e=document.createElement("div");return e.appendChild(document.createElement("div")),t.appendChild(e),!!t.firstChild&&(e=t.firstChild.firstChild,t.innerHTML=Ue(qe),!e.parentElement)}(),$e=!0),Ve});function He(t,e){this.a=p(t)?t:0,this.f=p(e)?e:0}function Ge(t,e){this.width=t,this.height=e}function We(t){return t?new rn(tn(t)):P||(P=new rn)}function Ke(t,e){var n=e||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+t):Qe(document,t,e)}function Ze(t,e){var n=e||document;if(n.getElementsByClassName)t=n.getElementsByClassName(t)[0];else{n=document;var r=e||n;t=r.querySelectorAll&&r.querySelector&&t?r.querySelector(t?"."+t:""):Qe(n,t,e)[0]||null}return t||null}function Qe(t,e,n){var r;if((t=n||t).querySelectorAll&&t.querySelector&&e)return t.querySelectorAll(e?"."+e:"");if(e&&t.getElementsByClassName){var i=t.getElementsByClassName(e);return i}if(i=t.getElementsByTagName("*"),e){var o={};for(n=r=0;t=i[n];n++){var a=t.className;"function"==typeof a.split&&H(a.split(/\s+/),e)&&(o[r++]=t)}return o.length=r,o}return i}He.prototype.toString=function(){return"("+this.a+", "+this.f+")"},He.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.f=Math.ceil(this.f),this},He.prototype.floor=function(){return this.a=Math.floor(this.a),this.f=Math.floor(this.f),this},He.prototype.round=function(){return this.a=Math.round(this.a),this.f=Math.round(this.f),this},(t=Ge.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var Ye={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Je(t){return t.scrollingElement?t.scrollingElement:(ce||"CSS1Compat"!=t.compatMode)&&t.body||t.documentElement}function Xe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function tn(t){return 9==t.nodeType?t:t.ownerDocument||t.document}function en(t,e){if("textContent"in t)t.textContent=e;else if(3==t.nodeType)t.data=String(e);else if(t.firstChild&&3==t.firstChild.nodeType){for(;t.lastChild!=t.firstChild;)t.removeChild(t.lastChild);t.firstChild.data=String(e)}else{for(var n;n=t.firstChild;)t.removeChild(n);t.appendChild(tn(t).createTextNode(String(e)))}}function nn(t,e){return e?function(t,e){for(;t;){if(e(t))return t;t=t.parentNode}return null}(t,(function(t){return!e||m(t.className)&&H(t.className.split(/\s+/),e)})):null}function rn(t){this.a=t||d.document||document}rn.prototype.R=function(){return m(void 0)?this.a.getElementById(void 0):void 0};var on={Ec:!0},an={Gc:!0},sn={Dc:!0},un={Fc:!0};function cn(){throw Error("Do not instantiate directly")}function ln(t,e,n,r){if(t=t(e||fn,void 0,n),r=(r||We()).a.createElement("DIV"),(t=function(t){if(!S(t))return ut(String(t));if(t instanceof cn){if(t.fa===on)return t.content;if(t.fa===un)return ut(t.content)}return U("Soy template output is unsafe for use as HTML: "+t),"zSoyz"}(t)).match(hn),t=je(t,null),ze())for(;r.lastChild;)r.removeChild(r.lastChild);return r.innerHTML=Ue(t),1==r.childNodes.length&&(1==(t=r.firstChild).nodeType&&(r=t)),r}cn.prototype.va=null,cn.prototype.toString=function(){return this.content};var hn=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,fn={};function dn(){cn.call(this)}function pn(t){return null!=t&&t.fa===on?t:t instanceof Be?yn(Ue(t).toString(),t.f()):yn(ut(String(String(t))),function(t){if(null!=t)switch(t.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(t))}function mn(){cn.call(this)}function gn(t,e){this.content=String(t),this.va=null!=e?e:null}function vn(t){return new gn(t,void 0)}R(dn,cn),dn.prototype.fa=on,R(mn,cn),mn.prototype.fa=an,mn.prototype.va=1,R(gn,cn),gn.prototype.fa=un;var yn=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t,n){return t=new e(String(t)),void 0!==n&&(t.va=n),t}}(dn),bn=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t){return new e(String(t))}}(mn);function wn(t){return(t=String(t))?new gn(t,void 0):""}var _n=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t,n){return(t=String(t))?(t=new e(t),void 0!==n&&(t.va=n),t):""}}(dn);function En(t){return null!=t&&t.fa===on?String(String(t.content).replace(Ln,"").replace(Dn,"&lt;")).replace(Cn,In):ut(String(t))}function Tn(t){return null!=t&&t.fa===an?t=String(t).replace(Nn,An):t instanceof Ae?t=String(Ce(t)).replace(Nn,An):(t=String(t),Pn.test(t)?t=t.replace(Nn,An):(U("Bad value `%s` for |filterNormalizeUri",[t]),t="#zSoyz")),t}function Sn(t){return null!=t&&t.fa===sn?t=t.content:null==t?t="":t instanceof Re?t instanceof Re&&t.constructor===Re&&t.f===Oe?t=t.a:(U("expected object of type SafeStyle, got '"+t+"' of type "+w(t)),t="type_error:SafeStyle"):(t=String(t),Mn.test(t)||(U("Bad value `%s` for |filterCssValue",[t]),t="zSoyz")),t}var xn={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function In(t){return xn[t]}var kn={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function An(t){return kn[t]}var Cn=/[\x00\x22\x27\x3c\x3e]/g,Nn=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,Mn=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,Pn=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Ln=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Dn=/</g;function Rn(){return vn("Enter a valid phone number")}function On(){return vn("Unable to send password reset code to specified email")}function Bn(){return vn("Something went wrong. Please try again.")}function Un(){return vn("This email already exists without any means of sign-in. Please reset the password to recover.")}function Fn(t){var e="";switch((t=t||{}).code){case"invalid-argument":e+="Client specified an invalid argument.";break;case"invalid-configuration":e+="Client specified an invalid project configuration.";break;case"failed-precondition":e+="Request can not be executed in the current system state.";break;case"out-of-range":e+="Client specified an invalid range.";break;case"unauthenticated":e+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":e+="Client does not have sufficient permission.";break;case"not-found":e+="Specified resource is not found.";break;case"aborted":e+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":e+="The resource that a client tried to create already exists.";break;case"resource-exhausted":e+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":e+="Request cancelled by the client.";break;case"data-loss":e+="Unrecoverable data loss or data corruption.";break;case"unknown":e+="Unknown server error.";break;case"internal":e+="Internal server error.";break;case"not-implemented":e+="API method not implemented by the server.";break;case"unavailable":e+="Service unavailable.";break;case"deadline-exceeded":e+="Request deadline exceeded.";break;case"auth/user-disabled":e+="The user account has been disabled by an administrator.";break;case"auth/timeout":e+="The operation has timed out.";break;case"auth/too-many-requests":e+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":e+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":e+="A network error has occurred. Try again later.";break;case"restart-process":e+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":e+="No sign-in provider is available for the given email, please try with a different email."}return vn(e)}function jn(){return vn("Please login again to perform this operation")}function qn(t,e,n){var r=Error.call(this);if(this.message=r.message,"stack"in r&&(this.stack=r.stack),this.code=Vn+t,!(t=e)){switch(t="",this.code){case"firebaseui/merge-conflict":t+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:t+=Bn()}t=vn(t).toString()}this.message=t||"",this.credential=n||null}s(qn,Error),qn.prototype.aa=function(){return{code:this.code,message:this.message}},qn.prototype.toJSON=function(){return this.aa()};var Vn="firebaseui/";function $n(){this.O=this.O,this.C=this.C}function zn(t,e){t.O?p(void 0)?e.call(void 0):e():(t.C||(t.C=[]),t.C.push(p(void 0)?C(e,void 0):e))}function Hn(t){t&&"function"==typeof t.o&&t.o()}$n.prototype.O=!1,$n.prototype.o=function(){if(!this.O&&(this.O=!0,this.m(),0))this[x]||(this[x]=++I)},$n.prototype.m=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var Gn=Object.freeze||function(t){return t},Wn=!oe||9<=Number(ge),Kn=oe&&!ye("9"),Zn=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{d.addEventListener("test",y,e),d.removeEventListener("test",y,e)}catch(t){}return t}();function Qn(t,e){this.type=t,this.f=this.target=e,this.h=!1,this.sb=!0}function Yn(t,e){if(Qn.call(this,t?t.type:""),this.relatedTarget=this.f=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.f=e,e=t.relatedTarget){if(ue){t:{try{ee(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.j=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=m(t.pointerType)?t.pointerType:Jn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qn.prototype.stopPropagation=function(){this.h=!0},Qn.prototype.preventDefault=function(){this.sb=!1},R(Yn,Qn);var Jn=Gn({2:"touch",3:"pen",4:"mouse"});Yn.prototype.stopPropagation=function(){Yn.M.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Yn.prototype.preventDefault=function(){Yn.M.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Kn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Xn="closure_listenable_"+(1e6*Math.random()|0),tr=0;function er(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++tr,this.sa=this.Ha=!1}function nr(t){t.sa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function rr(t){this.src=t,this.a={},this.f=0}function ir(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(nr(e),0==t.a[n].length&&(delete t.a[n],t.f--))}function or(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.sa&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}rr.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.f++);var a=or(t,e,r,i);return-1<a?(e=t[a],n||(e.Ha=!1)):((e=new er(e,this.src,o,!!r,i)).Ha=n,t.push(e)),e};var ar="closure_lm_"+(1e6*Math.random()|0),sr={};function ur(t,e,n,r,i){if(r&&r.once)return lr(t,e,n,r,i);if(_(e)){for(var o=0;o<e.length;o++)ur(t,e[o],n,r,i);return null}return n=br(n),t&&t[Xn]?t.I.add(String(e),n,!1,S(r)?!!r.capture:!!r,i):cr(t,e,n,!1,r,i)}function cr(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=S(i)?!!i.capture:!!i,s=vr(t);if(s||(t[ar]=s=new rr(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=gr,e=Wn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Zn||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function lr(t,e,n,r,i){if(_(e)){for(var o=0;o<e.length;o++)lr(t,e[o],n,r,i);return null}return n=br(n),t&&t[Xn]?t.I.add(String(e),n,!0,S(r)?!!r.capture:!!r,i):cr(t,e,n,!0,r,i)}function hr(t,e,n,r,i){if(_(e))for(var o=0;o<e.length;o++)hr(t,e[o],n,r,i);else r=S(r)?!!r.capture:!!r,n=br(n),t&&t[Xn]?(t=t.I,(e=String(e).toString())in t.a&&(-1<(n=or(o=t.a[e],n,r,i))&&(nr(o[n]),W(o,n),0==o.length&&(delete t.a[e],t.f--)))):t&&(t=vr(t))&&(e=t.a[e.toString()],t=-1,e&&(t=or(e,n,r,i)),(n=-1<t?e[t]:null)&&fr(n))}function fr(t){if("number"!=typeof t&&t&&!t.sa){var e=t.src;if(e&&e[Xn])ir(e.I,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vr(e))?(ir(n,t),0==n.f&&(n.src=null,e[ar]=null)):nr(t)}}}function dr(t){return t in sr?sr[t]:sr[t]="on"+t}function pr(t,e,n,r){var i=!0;if((t=vr(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.sa&&(o=mr(o,r),i=i&&!1!==o)}return i}function mr(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&fr(t),n.call(r,e)}function gr(t,e){if(t.sa)return!0;if(!Wn){if(!e)t:{e=["window","event"];for(var n=d,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Yn(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.f;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;!e.h&&0<=i;i--){e.f=r[i];var o=pr(r[i],t,!0,e);n=n&&o}for(i=0;!e.h&&i<r.length;i++)e.f=r[i],o=pr(r[i],t,!1,e),n=n&&o}return n}return mr(t,new Yn(e,this))}function vr(t){return(t=t[ar])instanceof rr?t:null}var yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function br(t){return T(t)?t:(t[yr]||(t[yr]=function(e){return t.handleEvent(e)}),t[yr])}function wr(){$n.call(this),this.I=new rr(this),this.yb=this,this.Fa=null}function _r(t,e){var n,r=t.Fa;if(r)for(n=[];r;r=r.Fa)n.push(r);if(t=t.yb,r=e.type||e,m(e))e=new Qn(e,t);else if(e instanceof Qn)e.target=e.target||t;else{var i=e;ft(e=new Qn(r,t),i)}if(i=!0,n)for(var o=n.length-1;!e.h&&0<=o;o--){var a=e.f=n[o];i=Er(a,r,!0,e)&&i}if(e.h||(i=Er(a=e.f=t,r,!0,e)&&i,e.h||(i=Er(a,r,!1,e)&&i)),n)for(o=0;!e.h&&o<n.length;o++)i=Er(a=e.f=n[o],r,!1,e)&&i;return i}function Er(t,e,n,r){if(!(e=t.I.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.sa&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&ir(t.I,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.sb}R(wr,$n),wr.prototype[Xn]=!0,wr.prototype.$a=function(t){this.Fa=t},wr.prototype.removeEventListener=function(t,e,n,r){hr(this,t,e,n,r)},wr.prototype.m=function(){if(wr.M.m.call(this),this.I){var t,e=this.I;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nr(n[r]);delete e.a[t],e.f--}}this.Fa=null};var Tr={},Sr=0;function xr(t,e){if(!t)throw Error("Event target element must be provided!");if(t=kr(t),Tr[t]&&Tr[t].length)for(var n=0;n<Tr[t].length;n++)_r(Tr[t][n],e)}function Ir(t){var e=kr(t.R());Tr[e]&&Tr[e].length&&(function(t,e){0<=(e=z(t,e,void 0))&&W(t,e)}(Tr[e],(function(e){return e==t})),Tr[e].length||delete Tr[e])}function kr(t){return void 0===t.a&&(t.a=Sr,Sr++),t.a}function Ar(t){if(!t)throw Error("Event target element must be provided!");wr.call(this),this.a=t}function Cr(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function Nr(t,e){this.h=t,this.j=e,this.f=0,this.a=null}function Mr(t,e){t.j(e),100>t.f&&(t.f++,e.next=t.a,t.a=e)}function Pr(){this.f=this.a=null}s(Ar,wr),Ar.prototype.R=function(){return this.a},Ar.prototype.register=function(){var t=kr(this.R());Tr[t]?H(Tr[t],this)||Tr[t].push(this):Tr[t]=[this]},Nr.prototype.get=function(){if(0<this.f){this.f--;var t=this.a;this.a=t.next,t.next=null}else t=this.h();return t};var Lr,Dr,Rr=new Nr((function(){return new Br}),(function(t){t.reset()}));function Or(){var t=qr,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.f=null),e.next=null),e}function Br(){this.next=this.f=this.a=null}function Ur(t){d.setTimeout((function(){throw t}),0)}function Fr(t,e){Dr||function(){if(d.Promise&&d.Promise.resolve){var t=d.Promise.resolve(void 0);Dr=function(){t.then(Vr)}}else Dr=function(){var t=Vr;!T(d.setImmediate)||d.Window&&d.Window.prototype&&!Xt("Edge")&&d.Window.prototype.setImmediate==d.setImmediate?(Lr||(Lr=function(){var t=d.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Xt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=C((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!Xt("Trident")&&!Xt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(p(n.next)){var t=(n=n.next).hb;n.hb=null,t()}},function(t){r.next={hb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){d.setTimeout(t,0)}}()),Lr(t)):d.setImmediate(t)}}(),jr||(Dr(),jr=!0),qr.add(t,e)}Pr.prototype.add=function(t,e){var n=Rr.get();n.set(t,e),this.f?this.f.next=n:this.a=n,this.f=n},Br.prototype.set=function(t,e){this.a=t,this.f=e,this.next=null},Br.prototype.reset=function(){this.next=this.f=this.a=null};var jr=!1,qr=new Pr;function Vr(){for(var t;t=Or();){try{t.a.call(t.f)}catch(t){Ur(t)}Mr(Rr,t)}jr=!1}function $r(t){if(this.a=zr,this.w=void 0,this.j=this.f=this.h=null,this.s=this.i=!1,t!=y)try{var e=this;t.call(void 0,(function(t){ti(e,Hr,t)}),(function(t){if(!(t instanceof ai))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ti(e,Gr,t)}))}catch(t){ti(this,Gr,t)}}var zr=0,Hr=2,Gr=3;function Wr(){this.next=this.context=this.f=this.j=this.a=null,this.h=!1}Wr.prototype.reset=function(){this.context=this.f=this.j=this.a=null,this.h=!1};var Kr=new Nr((function(){return new Wr}),(function(t){t.reset()}));function Zr(t,e,n){var r=Kr.get();return r.j=t,r.f=e,r.context=n,r}function Qr(t){if(t instanceof $r)return t;var e=new $r(y);return ti(e,Hr,t),e}function Yr(t){return new $r((function(e,n){n(t)}))}function Jr(t,e){t.f||t.a!=Hr&&t.a!=Gr||ei(t),t.j?t.j.next=e:t.f=e,t.j=e}function Xr(t,e,n,r){var i=Zr(null,null,null);return i.a=new $r((function(t,o){i.j=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.f=n?function(e){try{var i=n.call(r,e);!p(i)&&e instanceof ai?o(e):t(i)}catch(t){o(t)}}:o})),i.a.h=t,Jr(t,i),i.a}function ti(t,e,n){if(t.a==zr){t===n&&(e=Gr,n=new TypeError("Promise cannot resolve to itself")),t.a=1;t:{var r=n,i=t.gc,o=t.hc;if(r instanceof $r){Jr(r,Zr(i||y,o||null,t));var a=!0}else if(Cr(r))r.then(i,o,t),a=!0;else{if(S(r))try{var s=r.then;if(T(s)){!function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(r,s,i,o,t),a=!0;break t}}catch(e){o.call(t,e),a=!0;break t}a=!1}}a||(t.w=n,t.a=e,t.h=null,ei(t),e!=Gr||n instanceof ai||function(t,e){t.s=!0,Fr((function(){t.s&&oi.call(null,e)}))}(t,n))}}function ei(t){t.i||(t.i=!0,Fr(t.Gb,t))}function ni(t){var e=null;return t.f&&(e=t.f,t.f=e.next,e.next=null),t.f||(t.j=null),e}function ri(t,e,n,r){if(n==Gr&&e.f&&!e.h)for(;t&&t.s;t=t.h)t.s=!1;if(e.a)e.a.h=null,ii(e,n,r);else try{e.h?e.j.call(e.context):ii(e,n,r)}catch(t){oi.call(null,t)}Mr(Kr,e)}function ii(t,e,n){e==Hr?t.j.call(t.context,n):t.f&&t.f.call(t.context,n)}$r.prototype.then=function(t,e,n){return Xr(this,T(t)?t:null,T(e)?e:null,n)},$r.prototype.$goog_Thenable=!0,(t=$r.prototype).ec=function(t,e){return(t=Zr(t,t,e)).h=!0,Jr(this,t),this},t.ta=function(t,e){return Xr(this,null,t,e)},t.cancel=function(t){this.a==zr&&Fr((function(){!function t(e,n){if(e.a==zr)if(e.h){var r=e.h;if(r.f){for(var i=0,o=null,a=null,s=r.f;s&&(s.h||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==zr&&1==i?t(r,n):(a?((i=a).next==r.j&&(r.j=i),i.next=i.next.next):ni(r),ri(r,o,Gr,n)))}e.h=null}else ti(e,Gr,n)}(this,new ai(t))}),this)},t.gc=function(t){this.a=zr,ti(this,Hr,t)},t.hc=function(t){this.a=zr,ti(this,Gr,t)},t.Gb=function(){for(var t;t=ni(this);)ri(this,t,this.a,this.w);this.i=!1};var oi=Ur;function ai(t){O.call(this,t)}function si(t,e,n){e||(e={}),n=n||window;var r=t instanceof Ae?t:Pe(void 0!==t.href?t.href:String(t));t=e.target||t.target;var i=[];for(o in e)switch(o){case"width":case"height":case"top":case"left":i.push(o+"="+e[o]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(o+"="+(e[o]?1:0))}var o=i.join(",");return(Xt("iPhone")&&!Xt("iPod")&&!Xt("iPad")||Xt("iPad")||Xt("iPod"))&&n.navigator&&n.navigator.standalone&&t&&"_self"!=t?(o=n.document.createElement("A"),r instanceof Ae||r instanceof Ae||(r="object"==typeof r&&r.ma?r.ka():String(r),Me.test(r)||(r="about:invalid#zClosurez"),r=De(r)),o.href=Ne(r),o.setAttribute("target",t),e.noreferrer&&o.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),o.dispatchEvent(e),n={}):e.noreferrer?(n=n.open("",t,o),e=Ce(r),n&&(se&&-1!=e.indexOf(";")&&(e="'"+e.replace(/'/g,"%27")+"'"),n.opener=null,e=je('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ut(e)+'">',null),n.document.write(Ue(e)),n.document.close())):(n=n.open(Ce(r),t,o))&&e.noopener&&(n.opener=null),n}function ui(t){window.location.assign(Ce(Pe(t)))}function ci(){try{return!!(window.opener&&window.opener.location&&window.opener.location.assign&&window.opener.location.hostname===window.location.hostname&&window.opener.location.protocol===window.location.protocol)}catch(t){}return!1}function li(t){si(t,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function hi(t,e){if(null==(t=S(t)&&1==t.nodeType?t:document.querySelector(String(t))))throw Error(e||"Cannot find element.");return t}function fi(){return window.location.href}function di(t){var e=Si;this.s=[],this.O=e,this.N=t||null,this.j=this.a=!1,this.h=void 0,this.I=this.l=this.w=!1,this.i=0,this.f=null,this.C=0}function pi(t,e,n){t.a=!0,t.h=n,t.j=!e,yi(t)}function mi(t){if(t.a){if(!t.I)throw new bi(t);t.I=!1}}function gi(t,e,n){t.s.push([e,n,void 0]),t.a&&yi(t)}function vi(t){return $(t.s,(function(t){return T(t[1])}))}function yi(t){if(t.i&&t.a&&vi(t)){var e=t.i,n=Ei[e];n&&(d.clearTimeout(n.a),delete Ei[e]),t.i=0}t.f&&(t.f.C--,delete t.f),e=t.h;for(var r=n=!1;t.s.length&&!t.w;){var i=t.s.shift(),o=i[0],a=i[1];if(i=i[2],o=t.j?a:o)try{var s=o.call(i||t.N,e);p(s)&&(t.j=t.j&&(s==e||s instanceof Error),t.h=e=s),(Cr(e)||"function"==typeof d.Promise&&e instanceof d.Promise)&&(r=!0,t.w=!0)}catch(r){e=r,t.j=!0,vi(t)||(n=!0)}}t.h=e,r&&(s=C(t.L,t,!0),r=C(t.L,t,!1),e instanceof di?(gi(e,s,r),e.l=!0):e.then(s,r)),n&&(e=new _i(e),Ei[e.a]=e,t.i=e.a)}function bi(){O.call(this)}function wi(){O.call(this)}function _i(t){this.a=d.setTimeout(C(this.h,this),0),this.f=t}R(ai,O),ai.prototype.name="cancel",di.prototype.cancel=function(t){if(this.a)this.h instanceof di&&this.h.cancel();else{if(this.f){var e=this.f;delete this.f,t?e.cancel(t):(e.C--,0>=e.C&&e.cancel())}this.O?this.O.call(this.N,this):this.I=!0,this.a||(t=new wi(this),mi(this),pi(this,!1,t))}},di.prototype.L=function(t,e){this.w=!1,pi(this,t,e)},di.prototype.then=function(t,e,n){var r,i,o=new $r((function(t,e){r=t,i=e}));return gi(this,r,(function(t){t instanceof wi?o.cancel():i(t)})),o.then(t,e,n)},di.prototype.$goog_Thenable=!0,R(bi,O),bi.prototype.message="Deferred has already fired",bi.prototype.name="AlreadyCalledError",R(wi,O),wi.prototype.message="Deferred was canceled",wi.prototype.name="CanceledError",_i.prototype.h=function(){throw delete Ei[this.a],this.f};var Ei={};function Ti(t){var e,n=document,r=xe(t).toString(),i=document.createElement("SCRIPT"),o={tb:i,ub:void 0},a=new di(o);return e=window.setTimeout((function(){xi(i,!0);var t=new Ai(ki,"Timeout reached for loading script "+r);mi(a),pi(a,!1,t)}),5e3),o.ub=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(xi(i,!1,e),mi(a),pi(a,!0,null))},i.onerror=function(){xi(i,!0,e);var t=new Ai(Ii,"Error while loading script "+r);mi(a),pi(a,!1,t)},ft(o={},{type:"text/javascript",charset:"UTF-8"}),function(t,e){ct(e,(function(e,n){e&&"object"==typeof e&&e.ma&&(e=e.ka()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Ye.hasOwnProperty(n)?t.setAttribute(Ye[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}(i,o),function(t,e){t.src=xe(e),null===v&&(v=(e=(e=d.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&g.test(e)?e:""),(e=v)&&t.setAttribute("nonce",e)}(i,t),function(t){var e=(t||document).getElementsByTagName("HEAD");return e&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Si(){if(this&&this.tb){var t=this.tb;t&&"SCRIPT"==t.tagName&&xi(t,!0,this.ub)}}function xi(t,e,n){null!=n&&d.clearTimeout(n),t.onload=y,t.onerror=y,t.onreadystatechange=y,e&&window.setTimeout((function(){Xe(t)}),0)}var Ii=0,ki=1;function Ai(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Ci(t){this.a=t||d.googleyolo,this.f=null,this.h=!1}R(Ai,O),Ci.prototype.cancel=function(){this.a&&this.h&&(this.f=this.a.cancelLastOperation().catch((function(){})))},b(Ci);var Ni=new we(Te,"https://smartlock.google.com/client"),Mi="illegalConcurrentRequest",Pi="userCanceled";function Li(){this.a=null}function Di(t,e){this.a=t,this.f=e||function(t){throw t}}function Ri(t,e,n){this.reset(t,e,n,void 0,void 0)}function Oi(t){this.s=t,this.a=this.h=this.j=this.f=null}function Bi(t,e){this.name=t,this.value=e}Li.prototype.load=function(){var t=this;if(this.a)return this.a;var e=ke(_e(Ni));return d.googleyolo?Qr():this.a=function(){var t=null;return new $r((function(e){"complete"==d.document.readyState?e():(t=function(){e()},lr(window,"load",t))})).ta((function(e){throw hr(window,"load",t),e}))}().then((function(){if(!d.googleyolo)return new $r((function(n,r){var i=setTimeout((function(){t.a=null,r(Error("Network error!"))}),1e4);d.onGoogleYoloLoad=function(){clearTimeout(i),n()},Qr(Ti(e)).ta((function(e){clearTimeout(i),t.a=null,r(e)}))}))}))},b(Li),Di.prototype.confirm=function(t){return Qr(this.a.confirm(t)).ta(this.f)},Ri.prototype.a=null,Ri.prototype.reset=function(t,e,n,r,i){this.h=r||L(),this.j=t,this.s=e,this.f=n,delete this.a},Bi.prototype.toString=function(){return this.name};var Ui=new Bi("SEVERE",1e3),Fi=new Bi("WARNING",900),ji=new Bi("CONFIG",700);Oi.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.j?e.j:e.f?t(e.f):(U("Root logger has no level set."),null)}(this).value)for(T(e)&&(e=e()),t=new Ri(t,String(e),this.s),n&&(t.a=n),n=this;n;){var r=n,i=t;if(r.a)for(var o=0;e=r.a[o];o++)e(i);n=n.f}};var qi={},Vi=null;function $i(){Vi||(Vi=new Oi(""),qi[""]=Vi,Vi.j=ji)}function zi(){this.a=L()}var Hi=null;function Gi(t){this.j=t||"",Hi||(Hi=new zi),this.s=Hi}function Wi(t){return 10>t?"0"+t:String(t)}function Ki(t){Gi.call(this,t)}function Zi(){this.s=C(this.h,this),this.a=new Ki,this.a.f=!1,this.a.h=!1,this.f=this.a.a=!1,this.j={}}zi.prototype.set=function(t){this.a=t},zi.prototype.reset=function(){this.set(L())},zi.prototype.get=function(){return this.a},Gi.prototype.a=!0,Gi.prototype.f=!0,Gi.prototype.h=!1,R(Ki,Gi),Zi.prototype.h=function(t){if(!this.j[t.f]){var e=function(t,e){var n=[];if(n.push(t.j," "),t.f){var r=new Date(e.h);n.push("[",Wi(r.getFullYear()-2e3)+Wi(r.getMonth()+1)+Wi(r.getDate())+" "+Wi(r.getHours())+":"+Wi(r.getMinutes())+":"+Wi(r.getSeconds())+"."+Wi(Math.floor(r.getMilliseconds()/10)),"] ")}return n.push("[",function(t,e){e=(t=(t.h-e)/1e3).toFixed(3);var n=0;if(1>t)n=2;else for(;100>t;)n++,t*=10;for(;0<n--;)e=" "+e;return e}(e,t.s.get()),"s] "),n.push("[",e.f,"] "),n.push(e.s),t.h&&(e=e.a)&&n.push("\n",e instanceof Error?e.message:e.toString()),t.a&&n.push("\n"),n.join("")}(this.a,t);if(Yi)!function(t,e,n,r){t[e]?t[e](n,r||""):t.log(n,r||"")}(Yi,function(t){if(t){if(t.value>=Ui.value)return"error";if(t.value>=Fi.value)return"warn";if(t.value>=ji.value)return"log"}return"debug"}(t.j),e,t.a)}};var Qi,Yi=d.console;function Ji(t,e){Qi&&Qi.log(Ui,t,e)}Qi=function t(e){var n;if($i(),!(n=qi[e])){n=new Oi(e);var r=e.lastIndexOf("."),i=e.substr(r+1);(r=t(e.substr(0,r))).h||(r.h={}),r.h[i]=n,n.f=r,qi[e]=n}return n}("firebaseui");var Xi=new Zi;if(1!=Xi.f){var to;$i(),to=Vi;var eo=Xi.s;to.a||(to.a=[]),to.a.push(eo),Xi.f=!0}function no(t){Qi&&Qi.log(Fi,t,void 0)}function ro(t,e,n,r){this.a=t,this.h=e||null,this.j=n||null,this.f=r||null}function io(t){return t.email?new ro(t.email,t.displayName,t.photoUrl,t.providerId):null}function oo(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function ao(t){t=(t.a.cookie||"").split(";");for(var e,n,r=[],i=[],o=0;o<t.length;o++)-1==(e=(n=X(t[o])).indexOf("="))?(r.push(""),i.push(n)):(r.push(n.substring(0,e)),i.push(n.substring(e+1)));return{keys:r,values:i}}ro.prototype.aa=function(){return{email:this.a,displayName:this.h,photoUrl:this.j,providerId:this.f}},(t=oo.prototype).set=function(t,e,n,r,i,o){if(/[;=\s]/.test(t))throw Error('Invalid cookie name "'+t+'"');if(/[;\r\n]/.test(e))throw Error('Invalid cookie value "'+e+'"');p(n)||(n=-1),i=i?";domain="+i:"",r=r?";path="+r:"",o=o?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(L()+1e3*n).toUTCString(),this.a.cookie=t+"="+e+i+r+n+o},t.get=function(t,e){for(var n,r=t+"=",i=(this.a.cookie||"").split(";"),o=0;o<i.length;o++){if(0==(n=X(i[o])).lastIndexOf(r,0))return n.substr(r.length);if(n==t)return""}return e},t.ja=function(){return ao(this).keys},t.la=function(){return ao(this).values},t.clear=function(){for(var t=ao(this).keys,e=t.length-1;0<=e;e--){var n=t[e];this.get(n),this.set(n,"",0,void 0,void 0)}};var so=new oo;function uo(){}function co(t,e,n,r){this.h=null!=t?t:-1,this.f=e||null,this.a=n||null,this.j=!!r}function lo(t,e){this.f=t,this.a=e||null}function ho(t){if(t&&t.email){var n=t.credential&&e.auth.AuthCredential.fromJSON(t.credential);return new lo(t.email,n)}return null}function fo(t){this.a=t||null}function po(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);255<i&&(e[n++]=255&i,i>>=8),e[n++]=i}return e}function mo(t){return V(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}function go(t){for(this.i=t,this.f=this.i.length/4,this.j=this.f+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(vo*(this.j+1)),t=0;t<this.f;t++)this.a[t]=[this.i[4*t],this.i[4*t+1],this.i[4*t+2],this.i[4*t+3]];var e=Array(4);for(t=this.f;t<vo*(this.j+1);t++){if(e[0]=this.a[t-1][0],e[1]=this.a[t-1][1],e[2]=this.a[t-1][2],e[3]=this.a[t-1][3],0==t%this.f){var n=e,r=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=r,So(e),e[0]^=ko[t/this.f][0],e[1]^=ko[t/this.f][1],e[2]^=ko[t/this.f][2],e[3]^=ko[t/this.f][3]}else 6<this.f&&4==t%this.f&&So(e);this.a[t]=Array(4),this.a[t][0]=this.a[t-this.f][0]^e[0],this.a[t][1]=this.a[t-this.f][1]^e[1],this.a[t][2]=this.a[t-this.f][2]^e[2],this.a[t][3]=this.a[t-this.f][3]^e[3]}}s(co,uo),co.prototype.set=function(t,e){so.set(t,e,this.h,this.f,this.a,this.j)},co.prototype.get=function(t){return so.get(t)||null},co.prototype.ra=function(t){var e=this.f,n=this.a;so.get(t),so.set(t,"",0,e,n)},lo.prototype.aa=function(){return{email:this.f,credential:this.a&&this.a.toJSON()}},fo.prototype.aa=function(){return{tenantId:this.a}},go.prototype.w=16;var vo=go.prototype.w/4;function yo(t,e){for(var n,r=0;r<vo;r++)for(var i=0;4>i;i++)n=e[n=4*i+r],t.h[r][i]=n}function bo(t){for(var e=[],n=0;n<vo;n++)for(var r=0;4>r;r++)e[4*r+n]=t.h[n][r];return e}function wo(t,e){for(var n=0;4>n;n++)for(var r=0;4>r;r++)t.h[n][r]^=t.a[4*e+r][n]}function _o(t,e){for(var n=0;4>n;n++)for(var r=0;4>r;r++)t.h[n][r]=e[t.h[n][r]]}function Eo(t){for(var e=1;4>e;e++)for(var n=0;4>n;n++)t.s[e][n]=t.h[e][n];for(e=1;4>e;e++)for(n=0;4>n;n++)t.h[e][n]=t.s[e][(n+e)%vo]}function To(t){for(var e=1;4>e;e++)for(var n=0;4>n;n++)t.s[e][(n+e)%vo]=t.h[e][n];for(e=1;4>e;e++)for(n=0;4>n;n++)t.h[e][n]=t.s[e][n]}function So(t){t[0]=xo[t[0]],t[1]=xo[t[1]],t[2]=xo[t[2]],t[3]=xo[t[3]]}var xo=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Io=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ko=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Ao=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Co=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],No=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Mo=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Po=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Lo=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function Do(t,e){t=new go(Oo(t));for(var n,r=Y(e=po(e),0,16),i="";r.length;){n=16-r.length;for(var o=0;o<n;o++)r.push(0);for(yo(n=t,r),wo(n,0),r=1;r<n.j;++r){_o(n,xo),Eo(n),o=n.h;for(var a=n.s[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=Ao[a[0]]^Co[a[1]]^a[2]^a[3],o[1][s]=a[0]^Ao[a[1]]^Co[a[2]]^a[3],o[2][s]=a[0]^a[1]^Ao[a[2]]^Co[a[3]],o[3][s]=Co[a[0]]^a[1]^a[2]^Ao[a[3]];wo(n,r)}_o(n,xo),Eo(n),wo(n,n.j),i+=mo(bo(n)),r=Y(e,0,16)}return i}function Ro(t,e){t=new go(Oo(t));for(var n=[],r=0;r<e.length;r+=2)n.push(parseInt(e.substring(r,r+2),16));var i=Y(n,0,16);for(e="";i.length;){for(yo(r=t,i),wo(r,r.j),i=1;i<r.j;++i){To(r),_o(r,Io),wo(r,r.j-i);for(var o=r.h,a=r.s[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=Lo[a[0]]^Mo[a[1]]^Po[a[2]]^No[a[3]],o[1][s]=No[a[0]]^Lo[a[1]]^Mo[a[2]]^Po[a[3]],o[2][s]=Po[a[0]]^No[a[1]]^Lo[a[2]]^Mo[a[3]],o[3][s]=Mo[a[0]]^Po[a[1]]^No[a[2]]^Lo[a[3]]}if(To(r),_o(r,Io),wo(r,0),8192>=(r=bo(r)).length)r=String.fromCharCode.apply(null,r);else{for(i="",o=0;o<r.length;o+=8192)i+=String.fromCharCode.apply(null,J(r,o,o+8192));r=i}e+=r,i=Y(n,0,16)}return e.replace(/(\x00)+$/,"")}function Oo(t){for(var e=32-(t=po(t.substring(0,32))).length,n=0;n<e;n++)t.push(0);return t}function Bo(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(_(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),qo(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":qo(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Uo,t,e),e.join("")}function Uo(){}var Fo={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},jo=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function qo(t,e){e.push('"',t.replace(jo,(function(t){var e=Fo[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Fo[t]=e),e})),'"')}function Vo(t){this.a=t}function $o(){}function zo(t){this.a=t}function Ho(t){if(!t.a)return!1;try{return t.a.setItem("__sak","1"),t.a.removeItem("__sak"),!0}catch(t){return!1}}function Go(){var t=null;try{t=window.localStorage||null}catch(t){}this.a=t}function Wo(){var t=null;try{t=window.sessionStorage||null}catch(t){}this.a=t}function Ko(t,e){this.f=t,this.a=e+"::"}Vo.prototype.set=function(t,e){p(e)?this.a.set(t,Bo(e)):this.a.ra(t)},Vo.prototype.get=function(t){try{var e=this.a.get(t)}catch(t){return}if(null!==e)try{return JSON.parse(e)}catch(t){throw"Storage: Invalid value was encountered"}},R($o,uo),$o.prototype.clear=function(){var t=gt(this.ha(!0)),e=this;j(t,(function(t){e.ra(t)}))},R(zo,$o),(t=zo.prototype).set=function(t,e){try{this.a.setItem(t,e)}catch(t){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},t.get=function(t){if(!m(t=this.a.getItem(t))&&null!==t)throw"Storage mechanism: Invalid value was encountered";return t},t.ra=function(t){this.a.removeItem(t)},t.ha=function(t){var e=0,n=this.a,r=new pt;return r.next=function(){if(e>=n.length)throw dt;var r=n.key(e++);if(t)return r;if(!m(r=n.getItem(r)))throw"Storage mechanism: Invalid value was encountered";return r},r},t.clear=function(){this.a.clear()},t.key=function(t){return this.a.key(t)},R(Go,zo),R(Wo,zo),R(Ko,$o),Ko.prototype.set=function(t,e){this.f.set(this.a+t,e)},Ko.prototype.get=function(t){return this.f.get(this.a+t)},Ko.prototype.ra=function(t){this.f.ra(this.a+t)},Ko.prototype.ha=function(t){var e=this.f.ha(!0),n=this,r=new pt;return r.next=function(){for(var r=e.next();r.substr(0,n.a.length)!=n.a;)r=e.next();return t?r.substr(n.a.length):n.f.get(r)},r};var Zo=new Go,Qo=new Vo(Ho(Zo)?new Ko(Zo,"firebaseui"):null),Yo=new Wo,Jo=new Vo(Ho(Yo)?new Ko(Yo,"firebaseui"):null),Xo={name:"pendingEmailCredential",storage:Jo},ta={name:"redirectStatus",storage:Jo},ea={name:"redirectUrl",storage:Jo},na={name:"rememberAccount",storage:Jo},ra={name:"rememberedAccounts",storage:Qo},ia={name:"emailForSignIn",storage:new Vo(new co(3600,"/"))},oa={name:"pendingEncryptedCredential",storage:new Vo(new co(3600,"/"))};function aa(t,e){return t.storage.get(e?t.name+":"+e:t.name)}function sa(t,e){t.storage.a.ra(e?t.name+":"+e:t.name)}function ua(t,e,n){t.storage.set(n?t.name+":"+n:t.name,e)}function ca(t){return aa(ea,t)||null}function la(t,e){ua(ea,t,e)}function ha(t,e){ua(na,t,e)}function fa(t){return t=aa(ra,t)||[],t=V(t,(function(t){return io(t)})),q(t,(function(t){return null!=t}))}function da(t){return ho(t=aa(Xo,t)||null)}function pa(t){sa(Xo,t)}function ma(t,e){ua(Xo,t.aa(),e)}function ga(t){return(t=aa(ta,t)||null)&&void 0!==t.tenantId?new fo(t.tenantId):null}function va(t,e){ua(ta,t.aa(),e)}function ya(){this.V={}}function ba(t,e,n){if(e.toLowerCase()in t.V)throw Error("Configuration "+e+" has already been defined.");t.V[e.toLowerCase()]=n}function wa(t,e,n){if(!(e.toLowerCase()in t.V))throw Error("Configuration "+e+" is not defined.");t.V[e.toLowerCase()]=n}function _a(t,e){if(!(t=t.get(e)))throw Error("Configuration "+e+" is required.");return t}function Ea(){this.f=void 0,this.a={}}function Ta(t,e,n,r){for(var i=0;i<e.length;i++){var o=e.charAt(i);t.a[o]||(t.a[o]=new Ea),t=t.a[o]}if(r&&void 0!==t.f)throw Error('The collection already contains the key "'+e+'"');t.f=n}function Sa(t){for(this.a=t,this.f=new Ea,t=0;t<this.a.length;t++){var e=this.f.get("+"+this.a[t].b);e?e.push(this.a[t]):this.f.add("+"+this.a[t].b,[this.a[t]])}}function xa(t,e){var n={},r=0;for(void 0!==(t=t.f).f&&(n[r]=t.f);r<e.length;r++){var i=e.charAt(r);if(!(i in t.a))break;void 0!==(t=t.a[i]).f&&(n[r]=t.f)}for(var o in n)if(n.hasOwnProperty(o))return n[o];return[]}function Ia(t){for(var e=0;e<Na.length;e++)if(Na[e].c===t)return Na[e];return null}function ka(t){t=t.toUpperCase();for(var e=[],n=0;n<Na.length;n++)Na[n].g===t&&e.push(Na[n]);return e}function Aa(t){if(0<t.length&&"+"==t.charAt(0)){t=t.substring(1);for(var e=[],n=0;n<Na.length;n++)Na[n].b==t&&e.push(Na[n]);t=e}else t=ka(t);return t}function Ca(t){t.sort((function(t,e){return t.name.localeCompare(e.name,"en")}))}ya.prototype.get=function(t){if(!(t.toLowerCase()in this.V))throw Error("Configuration "+t+" is not defined.");return this.V[t.toLowerCase()]},(t=Ea.prototype).set=function(t,e){Ta(this,t,e,!1)},t.add=function(t,e){Ta(this,t,e,!0)},t.get=function(t){t:{for(var e=this,n=0;n<t.length;n++)if(!(e=e.a[t.charAt(n)])){t=void 0;break t}t=e}return t?t.f:void 0},t.la=function(){var t=[];return function t(e,n){for(var r in void 0!==e.f&&n.push(e.f),e.a)t(e.a[r],n)}(this,t),t},t.ja=function(){var t=[];return function t(e,n,r){for(var i in void 0!==e.f&&r.push(n),e.a)t(e.a[i],n+i,r)}(this,"",t),t},t.clear=function(){this.a={},this.f=void 0};var Na=[{name:"Afghanistan",c:"93-AF-0",b:"93",g:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",g:"AX"},{name:"Albania",c:"355-AL-0",b:"355",g:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",g:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",g:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",g:"AD"},{name:"Angola",c:"244-AO-0",b:"244",g:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",g:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",g:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",g:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",g:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",g:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",g:"AC"},{name:"Australia",c:"61-AU-0",b:"61",g:"AU"},{name:"Austria",c:"43-AT-0",b:"43",g:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",g:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",g:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",g:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",g:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",g:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",g:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",g:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",g:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",g:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",g:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",g:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",g:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",g:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",g:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",g:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",g:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",g:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",g:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",g:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",g:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",g:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",g:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",g:"CM"},{name:"Canada",c:"1-CA-0",b:"1",g:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",g:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",g:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",g:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",g:"CF"},{name:"Chad",c:"235-TD-0",b:"235",g:"TD"},{name:"Chile",c:"56-CL-0",b:"56",g:"CL"},{name:"China",c:"86-CN-0",b:"86",g:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",g:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",g:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",g:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",g:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",g:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",g:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",g:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",g:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",g:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",g:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",g:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",g:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",g:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",g:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",g:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",g:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",g:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",g:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",g:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",g:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",g:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",g:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",g:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",g:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",g:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",g:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",g:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",g:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",g:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",g:"FI"},{name:"France",c:"33-FR-0",b:"33",g:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",g:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",g:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",g:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",g:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",g:"GE"},{name:"Germany",c:"49-DE-0",b:"49",g:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",g:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",g:"GI"},{name:"Greece",c:"30-GR-0",b:"30",g:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",g:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",g:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",g:"GP"},{name:"Guam",c:"1-GU-0",b:"1",g:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",g:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",g:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",g:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",g:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",g:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",g:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",g:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",g:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",g:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",g:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",g:"IS"},{name:"India",c:"91-IN-0",b:"91",g:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",g:"ID"},{name:"Iran",c:"98-IR-0",b:"98",g:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",g:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",g:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",g:"IM"},{name:"Israel",c:"972-IL-0",b:"972",g:"IL"},{name:"Italy",c:"39-IT-0",b:"39",g:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",g:"JM"},{name:"Japan",c:"81-JP-0",b:"81",g:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",g:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",g:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",g:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",g:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",g:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",g:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",g:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",g:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",g:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",g:"KG"},{name:"Laos",c:"856-LA-0",b:"856",g:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",g:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",g:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",g:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",g:"LR"},{name:"Libya",c:"218-LY-0",b:"218",g:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",g:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",g:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",g:"LU"},{name:"Macau",c:"853-MO-0",b:"853",g:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",g:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",g:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",g:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",g:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",g:"MV"},{name:"Mali",c:"223-ML-0",b:"223",g:"ML"},{name:"Malta",c:"356-MT-0",b:"356",g:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",g:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",g:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",g:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",g:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",g:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",g:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",g:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",g:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",g:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",g:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",g:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",g:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",g:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",g:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",g:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",g:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",g:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",g:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",g:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",g:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",g:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",g:"NI"},{name:"Niger",c:"227-NE-0",b:"227",g:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",g:"NG"},{name:"Niue",c:"683-NU-0",b:"683",g:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",g:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",g:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",g:"MP"},{name:"Norway",c:"47-NO-0",b:"47",g:"NO"},{name:"Oman",c:"968-OM-0",b:"968",g:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",g:"PK"},{name:"Palau",c:"680-PW-0",b:"680",g:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",g:"PS"},{name:"Panama",c:"507-PA-0",b:"507",g:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",g:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",g:"PY"},{name:"Peru",c:"51-PE-0",b:"51",g:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",g:"PH"},{name:"Poland",c:"48-PL-0",b:"48",g:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",g:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",g:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",g:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",g:"RE"},{name:"Romania",c:"40-RO-0",b:"40",g:"RO"},{name:"Russia",c:"7-RU-0",b:"7",g:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",g:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",g:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",g:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",g:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",g:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",g:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",g:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",g:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",g:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",g:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",g:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",g:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",g:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",g:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",g:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",g:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",g:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",g:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",g:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",g:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",g:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",g:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",g:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",g:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",g:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",g:"SS"},{name:"Spain",c:"34-ES-0",b:"34",g:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",g:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",g:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",g:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",g:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",g:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",g:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",g:"CH"},{name:"Syria",c:"963-SY-0",b:"963",g:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",g:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",g:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",g:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",g:"TH"},{name:"Togo",c:"228-TG-0",b:"228",g:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",g:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",g:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",g:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",g:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",g:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",g:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",g:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",g:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",g:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",g:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",g:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",g:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",g:"GB"},{name:"United States",c:"1-US-0",b:"1",g:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",g:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",g:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",g:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",g:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",g:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",g:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",g:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",g:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",g:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",g:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",g:"ZW"}];Ca(Na);var Ma=new Sa(Na);function Pa(t,e){this.a=t,this.za=e}function La(t){t=X(t);var e=xa(Ma,t);return 0<e.length?new Pa("1"==e[0].b?"1-US-0":e[0].c,X(t.substr(e[0].b.length+1))):null}function Da(t){var e=Ia(t.a);if(!e)throw Error("Country ID "+t.a+" not found.");return"+"+e.b+t.za}function Ra(t,e){for(var n=0;n<t.length;n++)if(!H(Oa,t[n])&&(null!==Ba&&t[n]in Ba||H(e,t[n])))return t[n];return null}var Oa=["emailLink","password","phone"],Ba={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function Ua(){this.a=new ya,ba(this.a,"acUiConfig"),ba(this.a,"autoUpgradeAnonymousUsers"),ba(this.a,"callbacks"),ba(this.a,"credentialHelper",ds),ba(this.a,"immediateFederatedRedirect",!1),ba(this.a,"popupMode",!1),ba(this.a,"privacyPolicyUrl"),ba(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),ba(this.a,"queryParameterForWidgetMode","mode"),ba(this.a,"signInFlow"),ba(this.a,"signInOptions"),ba(this.a,"signInSuccessUrl"),ba(this.a,"siteName"),ba(this.a,"tosUrl"),ba(this.a,"widgetUrl")}function Fa(t){var e=t.a.get("widgetUrl")||fi();return ja(t,e)}function ja(t,e){t=Qa(t);for(var n,r=e.search(Tt),i=0,o=[];0<=(n=_t(e,i,t,r));)o.push(e.substring(i,n)),i=Math.min(e.indexOf("&",n)+1||r,r);return o.push(e.substr(i)),e=o.join("").replace(xt,"$1"),(t+=r="="+encodeURIComponent("select"))?(0>(r=e.indexOf("#"))&&(r=e.length),0>(i=e.indexOf("?"))||i>r?(i=r,n=""):n=e.substring(i+1,r),r=(e=[e.substr(0,i),n,e.substr(r)])[1],e[1]=t?r?r+"&"+t:t:r,t=e[0]+(e[1]?"?"+e[1]:"")+e[2]):t=e,t}function qa(t){var e=!!t.a.get("autoUpgradeAnonymousUsers");return e&&!as(t)&&Ji('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),e}function Va(t){t=t.a.get("signInOptions")||[];for(var e=[],n=0;n<t.length;n++){var r=t[n];(r=S(r)?r:{provider:r}).provider&&e.push(r)}return e}function $a(t,e){t=Va(t);for(var n=0;n<t.length;n++)if(t[n].provider===e)return t[n];return null}function za(t){return V(Va(t),(function(t){return t.provider}))}function Ha(t,e){t=Ga(t);for(var n=0;n<t.length;n++)if(t[n].providerId===e)return t[n];return null}function Ga(t){return V(Va(t),(function(t){return Ba[t.provider]||H(ws,t.provider)?{providerId:t.provider}:{providerId:t.provider,rb:t.providerName||null,Ga:t.buttonColor||null,Na:t.iconUrl?Ce(Pe(t.iconUrl)):null,Nb:t.loginHintKey||null}}))}function Wa(t,e){return _(t=(t=$a(t,e))&&t.scopes)?t:[]}function Ka(t,n){return S(t=(t=$a(t,n))&&t.customParameters)?(t=lt(t),n===e.auth.GoogleAuthProvider.PROVIDER_ID&&delete t.login_hint,n===e.auth.GithubAuthProvider.PROVIDER_ID&&delete t.login,t):null}function Za(t){if(!(t=$a(t,e.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var n=t.whitelistedCountries,r=t.blacklistedCountries;if(void 0!==n&&(!_(n)||0==n.length))throw Error("WhitelistedCountries must be a non-empty array.");if(void 0!==r&&!_(r))throw Error("BlacklistedCountries must be an array.");if(n&&r)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!n&&!r)return Na;if(t=[],n){r={};for(var i=0;i<n.length;i++)for(var o=Aa(n[i]),a=0;a<o.length;a++)r[o[a].c]=o[a];for(var s in r)r.hasOwnProperty(s)&&t.push(r[s])}else{for(s={},n=0;n<r.length;n++)for(o=Aa(r[n]),i=0;i<o.length;i++)s[o[i].c]=o[i];for(o=0;o<Na.length;o++)null!==s&&Na[o].c in s||t.push(Na[o])}return t}function Qa(t){return _a(t.a,"queryParameterForWidgetMode")}function Ya(t){var e=t.a.get("tosUrl")||null;if(t=t.a.get("privacyPolicyUrl")||null,e&&!t&&no("Privacy Policy URL is missing, the link will not be displayed."),e&&t){if(T(e))return e;if("string"==typeof e)return function(){li(e)}}return null}function Ja(t){var e=t.a.get("tosUrl")||null,n=t.a.get("privacyPolicyUrl")||null;if(n&&!e&&no("Term of Service URL is missing, the link will not be displayed."),e&&n){if(T(n))return n;if("string"==typeof n)return function(){li(n)}}return null}function Xa(t){return!(t=$a(t,e.auth.EmailAuthProvider.PROVIDER_ID))||void 0===t.requireDisplayName||!!t.requireDisplayName}function ts(t){return!(!(t=$a(t,e.auth.EmailAuthProvider.PROVIDER_ID))||t.signInMethod!==e.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function es(t){var e=!!t.a.get("immediateFederatedRedirect"),n=za(t);return t=ns(t),e&&1==n.length&&!H(Oa,n[0])&&t==vs}function ns(t){for(var e in t=t.a.get("signInFlow"),ys)if(ys[e]==t)return ys[e];return vs}function rs(t){return ss(t).uiShown||null}function is(t){return ss(t).signInSuccess||null}function os(t){return ss(t).signInSuccessWithAuthResult||null}function as(t){return ss(t).signInFailure||null}function ss(t){return t.a.get("callbacks")||{}}function us(t){if("http:"!==(window.location&&window.location.protocol)&&"https:"!==(window.location&&window.location.protocol))return ms;for(var e in t=t.a.get("credentialHelper"),gs)if(gs[e]==t)return gs[e];return ds}var cs,ls,hs,fs,ds="accountchooser.com",ps="googleyolo",ms="none",gs={jc:ds,mc:ps,NONE:ms},vs="redirect",ys={pc:"popup",qc:vs},bs={lc:"callback",RECOVER_EMAIL:"recoverEmail",rc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",sc:"select",tc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},ws=["anonymous"],_s=["sitekey","tabindex","callback","expired-callback"],Es={};function Ts(t,e,n,r){Es[t].apply(null,Array.prototype.slice.call(arguments,1))}var Ss=null;function xs(t){return!(!t||-32e3!=t.code||"Service unavailable"!=t.message)}function Is(t,e,n,r){Ss||(t={callbacks:{empty:t,select:function(t,r){t&&t.account&&e?e(io(t.account)):n&&n(!xs(r))},store:t,update:t},language:"en",providers:void 0,ui:r},"undefined"!=typeof accountchooser&&accountchooser.Api&&accountchooser.Api.init?Ss=accountchooser.Api.init(t):(Ss=new As(t),function(){var t=Ss;T(t.a.callbacks.empty)&&t.a.callbacks.empty()}()))}function ks(t,e,n){function r(){var t=Mt(window.location.href,n).toString();Ss.select(V(e||[],(function(t){return t.aa()})),{clientCallbackUrl:t})}e&&e.length?r():Ss.checkEmpty((function(e,n){e||n?t(!xs(n)):r()}))}function As(t){this.a=t,this.a.callbacks=this.a.callbacks||{}}(t=As.prototype).store=function(){T(this.a.callbacks.store)&&this.a.callbacks.store(void 0,Cs)},t.select=function(){T(this.a.callbacks.select)&&this.a.callbacks.select(void 0,Cs)},t.update=function(){T(this.a.callbacks.update)&&this.a.callbacks.update(void 0,Cs)},t.checkDisabled=function(t){t(!0)},t.checkEmpty=function(t){t(void 0,Cs)},t.checkAccountExist=function(t,e){e(void 0,Cs)},t.checkShouldUpdate=function(t,e){e(void 0,Cs)};var Cs={code:-32e3,message:"Service unavailable",data:"Service is unavailable."},Ns=/MSIE ([\d.]+).*Windows NT ([\d.]+)/,Ms=/Firefox\/([\d.]+)/,Ps=/Opera[ \/]([\d.]+)(.*Version\/([\d.]+))?/,Ls=/Chrome\/([\d.]+)/,Ds=/((Windows NT ([\d.]+))|(Mac OS X ([\d_]+))).*Version\/([\d.]+).*Safari/,Rs=/Mac OS X;.*(?!(Version)).*Safari/,Os=/Android ([\d.]+).*Safari/,Bs=/OS ([\d_]+) like Mac OS X.*Mobile.*Safari/,Us=/Konqueror\/([\d.]+)/,Fs=/MSIE ([\d.]+).*Windows Phone OS ([\d.]+)/;function js(t,e){for(t=t.split(e||"."),this.a=[],e=0;e<t.length;e++)this.a.push(parseInt(t[e],10))}function qs(t,e){return 0<=function(t,e){e instanceof js||(e=new js(String(e)));for(var n=Math.max(t.a.length,e.a.length),r=0;r<n;r++){var i=t.a[r],o=e.a[r];if(void 0!==i&&void 0!==o&&i!==o)return i-o;if(void 0===i)return-1;if(void 0===o)return 1}return 0}(t,e)}function Vs(t){return t.classList?t.classList:m(t=t.className)&&t.match(/\S+/g)||[]}function $s(t,e){return t.classList?t.classList.contains(e):H(Vs(t),e)}function zs(t,e){t.classList?t.classList.add(e):$s(t,e)||(t.className+=0<t.className.length?" "+e:e)}function Hs(t,e){t.classList?t.classList.remove(e):$s(t,e)&&(t.className=q(Vs(t),(function(t){return t!=e})).join(" "))}function Gs(t){var e=t.type;switch(m(e)&&e.toLowerCase()){case"checkbox":case"radio":return t.checked?t.value:null;case"select-one":return 0<=(e=t.selectedIndex)?t.options[e].value:null;case"select-multiple":e=[];for(var n,r=0;n=t.options[r];r++)n.selected&&e.push(n.value);return e.length?e:null;default:return null!=t.value?t.value:null}}function Ws(t,e){var n=t.type;switch(m(n)&&n.toLowerCase()){case"checkbox":case"radio":t.checked=e;break;case"select-one":if(t.selectedIndex=-1,m(e))for(var r=0;n=t.options[r];r++)if(n.value==e){n.selected=!0;break}break;case"select-multiple":for(m(e)&&(e=[e]),r=0;n=t.options[r];r++)if(n.selected=!1,e)for(var i,o=0;i=e[o];o++)n.value==i&&(n.selected=!0);break;default:t.value=null!=e?e:""}}function Ks(t,e,n,r,i,o){if(ce&&!ye("525"))return!0;if(he&&i)return Zs(t);if(i&&!r)return!1;if(!ue&&("number"==typeof e&&(e=Qs(e)),(!n||he)&&(17==e||18==e||he&&91==e)||he&&16==e&&(r||o)))return!1;if((ce||ae)&&r&&n)switch(t){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(oe&&r&&e==t)return!1;switch(t){case 13:return!ue||!o&&!i&&!(n&&r);case 27:return!(ce||ae||ue)}return(!ue||!(r||i||o))&&Zs(t)}function Zs(t){if(48<=t&&57>=t||96<=t&&106>=t||65<=t&&90>=t||(ce||ae)&&0==t)return!0;switch(t){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return ue;default:return!1}}function Qs(t){if(ue)t=function(t){switch(t){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return t}}(t);else if(he&&ce)switch(t){case 93:t=91}return t}function Ys(t){wr.call(this),this.a=t,ur(t,"keydown",this.f,!1,this),ur(t,"click",this.h,!1,this)}function Js(t,e){var n=new tu(e);if(_r(t,n)){n=new Xs(e);try{_r(t,n)}finally{e.stopPropagation()}}}function Xs(t){Yn.call(this,t.a),this.type="action"}function tu(t){Yn.call(this,t.a),this.type="beforeaction"}function eu(t){wr.call(this),this.a=t,t=oe?"focusout":"blur",this.f=ur(this.a,oe?"focusin":"focus",this,!oe),this.h=ur(this.a,t,this,!oe)}function nu(t,e){wr.call(this),this.f=t||1,this.a=e||d,this.h=C(this.fc,this),this.j=L()}function ru(t){t.Ka=!1,t.$&&(t.a.clearTimeout(t.$),t.$=null)}function iu(t){$n.call(this),this.f=t,this.a={}}R(Ys,wr),Ys.prototype.f=function(t){(13==t.keyCode||ce&&3==t.keyCode)&&Js(this,t)},Ys.prototype.h=function(t){Js(this,t)},Ys.prototype.m=function(){Ys.M.m.call(this),hr(this.a,"keydown",this.f,!1,this),hr(this.a,"click",this.h,!1,this),delete this.a},R(Xs,Yn),R(tu,Yn),R(eu,wr),eu.prototype.handleEvent=function(t){var e=new Yn(t.a);e.type="focusin"==t.type||"focus"==t.type?"focusin":"focusout",_r(this,e)},eu.prototype.m=function(){eu.M.m.call(this),fr(this.f),fr(this.h),delete this.a},R(nu,wr),(t=nu.prototype).Ka=!1,t.$=null,t.fc=function(){if(this.Ka){var t=L()-this.j;0<t&&t<.8*this.f?this.$=this.a.setTimeout(this.h,this.f-t):(this.$&&(this.a.clearTimeout(this.$),this.$=null),_r(this,"tick"),this.Ka&&(ru(this),this.start()))}},t.start=function(){this.Ka=!0,this.$||(this.$=this.a.setTimeout(this.h,this.f),this.j=L())},t.m=function(){nu.M.m.call(this),ru(this),delete this.a},R(iu,$n);var ou=[];function au(t,e,n,r){_(n)||(n&&(ou[0]=n.toString()),n=ou);for(var i=0;i<n.length;i++){var o=ur(e,n[i],r||t.handleEvent,!1,t.f||t);if(!o)break;t.a[o.key]=o}}function su(t){ct(t.a,(function(t,e){this.a.hasOwnProperty(e)&&fr(t)}),t),t.a={}}function uu(t){wr.call(this),this.a=null,this.f=t,t=oe||ae||ce&&!ye("531")&&"TEXTAREA"==t.tagName,this.h=new iu(this),au(this.h,this.f,t?["keydown","paste","cut","drop","input"]:"input",this)}function cu(t){null!=t.a&&(d.clearTimeout(t.a),t.a=null)}function lu(t){return(t=new Yn(t.a)).type="input",t}function hu(t,e){wr.call(this),t&&(this.Pa&&gu(this),this.qa=t,this.Oa=ur(this.qa,"keypress",this,e),this.Za=ur(this.qa,"keydown",this.Ib,e,this),this.Pa=ur(this.qa,"keyup",this.Jb,e,this))}iu.prototype.m=function(){iu.M.m.call(this),su(this)},iu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},R(uu,wr),uu.prototype.handleEvent=function(t){if("input"==t.type)oe&&ye(10)&&0==t.keyCode&&0==t.j||(cu(this),_r(this,lu(t)));else if("keydown"!=t.type||function(t){if(t.altKey&&!t.ctrlKey||t.metaKey||112<=t.keyCode&&123>=t.keyCode)return!1;if(Zs(t.keyCode))return!0;switch(t.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!ue;default:return 166>t.keyCode||183<t.keyCode}}(t)){var e="keydown"==t.type?this.f.value:null;oe&&229==t.keyCode&&(e=null);var n=lu(t);cu(this),this.a=function(t,e){if(T(t))e&&(t=C(t,e));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=C(t.handleEvent,t)}return 2147483647<Number(0)?-1:d.setTimeout(t,0)}((function(){this.a=null,this.f.value!=e&&_r(this,n)}),this)}},uu.prototype.m=function(){uu.M.m.call(this),this.h.o(),cu(this),delete this.f},R(hu,wr),(t=hu.prototype).qa=null,t.Oa=null,t.Za=null,t.Pa=null,t.T=-1,t.W=-1,t.Va=!1;var fu={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},du={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},pu=!ce||ye("525"),mu=he&&ue;function gu(t){t.Oa&&(fr(t.Oa),fr(t.Za),fr(t.Pa),t.Oa=null,t.Za=null,t.Pa=null),t.qa=null,t.T=-1,t.W=-1}function vu(t,e,n,r){Yn.call(this,r),this.type="key",this.keyCode=t,this.j=e,this.repeat=n}function yu(t,e,n,r){this.top=t,this.right=e,this.bottom=n,this.left=r}function bu(t,e){var n=tn(t);return n.defaultView&&n.defaultView.getComputedStyle&&(t=n.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""}function wu(t){try{var e=t.getBoundingClientRect()}catch(t){return{left:0,top:0,right:0,bottom:0}}return oe&&t.ownerDocument.body&&(t=t.ownerDocument,e.left-=t.documentElement.clientLeft+t.body.clientLeft,e.top-=t.documentElement.clientTop+t.body.clientTop),e}function _u(t){var e=tn(t),n=new He(0,0),r=e?tn(e):document;return t==(r=!oe||9<=Number(ge)||"CSS1Compat"==We(r).a.compatMode?r.documentElement:r.body)?n:(t=wu(t),e=Je(r=We(e).a),r=r.parentWindow||r.defaultView,e=oe&&ye("10")&&r.pageYOffset!=e.scrollTop?new He(e.scrollLeft,e.scrollTop):new He(r.pageXOffset||e.scrollLeft,r.pageYOffset||e.scrollTop),n.a=t.left+e.a,n.f=t.top+e.f,n)}(t=hu.prototype).Ib=function(t){(ce||ae)&&(17==this.T&&!t.ctrlKey||18==this.T&&!t.altKey||he&&91==this.T&&!t.metaKey)&&(this.W=this.T=-1),-1==this.T&&(t.ctrlKey&&17!=t.keyCode?this.T=17:t.altKey&&18!=t.keyCode?this.T=18:t.metaKey&&91!=t.keyCode&&(this.T=91)),pu&&!Ks(t.keyCode,this.T,t.shiftKey,t.ctrlKey,t.altKey,t.metaKey)?this.handleEvent(t):(this.W=Qs(t.keyCode),mu&&(this.Va=t.altKey))},t.Jb=function(t){this.W=this.T=-1,this.Va=t.altKey},t.handleEvent=function(t){var e=t.a,n=e.altKey;if(oe&&"keypress"==t.type)var r=this.W,i=13!=r&&27!=r?e.keyCode:0;else(ce||ae)&&"keypress"==t.type?(r=this.W,i=0<=e.charCode&&63232>e.charCode&&Zs(r)?e.charCode:0):ie&&!ce?i=Zs(r=this.W)?e.keyCode:0:("keypress"==t.type?(mu&&(n=this.Va),e.keyCode==e.charCode?32>e.keyCode?(r=e.keyCode,i=0):(r=this.W,i=e.charCode):(r=e.keyCode||this.W,i=e.charCode||0)):(r=e.keyCode||this.W,i=e.charCode||0),he&&63==i&&224==r&&(r=191));var o=r=Qs(r);r?63232<=r&&r in fu?o=fu[r]:25==r&&t.shiftKey&&(o=9):e.keyIdentifier&&e.keyIdentifier in du&&(o=du[e.keyIdentifier]),ue&&pu&&"keypress"==t.type&&!Ks(o,this.T,t.shiftKey,t.ctrlKey,n,t.metaKey)||(t=o==this.T,this.T=o,(e=new vu(o,i,t,e)).altKey=n,_r(this,e))},t.R=function(){return this.qa},t.m=function(){hu.M.m.call(this),gu(this)},R(vu,Yn),yu.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},yu.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},yu.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},yu.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var Eu={thin:2,medium:4,thick:6};function Tu(t,e){if("none"==(t.currentStyle?t.currentStyle[e+"Style"]:null))return 0;var n=t.currentStyle?t.currentStyle[e+"Width"]:null;if(n in Eu)t=Eu[n];else if(/^\d+px?$/.test(n))t=parseInt(n,10);else{e=t.style.left;var r=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,t.style.left=n,n=t.style.pixelLeft,t.style.left=e,t.runtimeStyle.left=r,t=+n}return t}function Su(){}function xu(t){wr.call(this),this.s=t||We(),this.eb=null,this.na=!1,this.f=null,this.L=void 0,this.oa=this.Ca=this.X=null}function Iu(t,e){return t.f?Ze(e,t.f||t.s.a):null}function ku(t){return t.L||(t.L=new iu(t)),t.L}function Au(t,e){t.Ca&&j(t.Ca,e,void 0)}function Cu(t,e){var n=nn(t,"firebaseui-textfield");e?(Hs(t,"firebaseui-input-invalid"),zs(t,"firebaseui-input"),n&&Hs(n,"firebaseui-textfield-invalid")):(Hs(t,"firebaseui-input"),zs(t,"firebaseui-input-invalid"),n&&zs(n,"firebaseui-textfield-invalid"))}function Nu(t,e,n){zn(t,N(Hn,e=new uu(e))),au(ku(t),e,"input",n)}function Mu(t,e,n){zn(t,N(Hn,e=new hu(e))),au(ku(t),e,"key",(function(t){13==t.keyCode&&(t.stopPropagation(),t.preventDefault(),n(t))}))}function Pu(t,e,n){zn(t,N(Hn,e=new Ys(e))),au(ku(t),e,"action",(function(t){t.stopPropagation(),t.preventDefault(),n(t)}))}function Lu(t){zs(t,"firebaseui-hidden")}function Du(t,e){e&&en(t,e),Hs(t,"firebaseui-hidden")}function Ru(t){return!$s(t,"firebaseui-hidden")&&"none"!=t.style.display}function Ou(t){var e=(t=t||{}).email,n=t.disabled,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return r=t.vc?r+"Enter new email address":r+"Email",r+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+En(null!=e?e:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',yn(r)}function Bu(t){var e='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return e=(t=(t=t||{}).label)?e+pn(t):e+"Next",yn(e+"</button>")}function Uu(){var t=""+Bu({label:wn("Sign In")});return yn(t)}function Fu(){var t=""+Bu({label:wn("Save")});return yn(t)}function ju(){var t=""+Bu({label:wn("Continue")});return yn(t)}function qu(t){var e='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return e=(t=(t=t||{}).label)?e+pn(t):e+"Choose password",yn(e+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function Vu(){var t='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return yn((t+="Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function $u(){return yn('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function zu(t){var e='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return e=(t=(t=t||{}).label)?e+pn(t):e+"Cancel",yn(e+"</button>")}function Hu(t){var e="";return t.G&&t.F&&(e+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),yn(e)}function Gu(t){var e="";return t.G&&t.F&&(e+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),yn(e)}function Wu(t){return t='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+pn(t.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',yn(t)}function Ku(t){var e=t.content;return t=t.Bb,yn('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(t?" "+En(t):"")+'">'+pn(e)+"</dialog>")}function Zu(t){var e=t.message;return yn(Ku({content:_n('<div class="firebaseui-dialog-icon-wrapper"><div class="'+En(t.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+pn(e)+"</div>")}))}function Qu(t){for(var e='<div class="firebaseui-list-box-actions">',n=(t=t.items).length,r=0;r<n;r++){var i=t[r];e+='<button type="button" data-listboxid="'+En(i.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(i.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+En(i.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+pn(i.label)+"</div></button>"}return e=""+Ku({Bb:wn("firebaseui-list-box-dialog"),content:_n(e+"</div>")}),yn(e)}function Yu(t){return yn((t=t||{}).vb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function Ju(t,e){return vn((t=(t=t||{}).ga).rb?t.rb:e.ib[t.providerId]?""+e.ib[t.providerId]:0==(""+t.providerId).indexOf("saml.")?(""+t.providerId).substring(5):0==(""+t.providerId).indexOf("oidc.")?(""+t.providerId).substring(5):""+t.providerId)}function Xu(t){nc(t,"upgradeElement")}function tc(t){nc(t,"downgradeElements")}b(Su),Su.prototype.a=0,R(xu,wr),(t=xu.prototype).Kb=Su.Ya(),t.R=function(){return this.f},t.$a=function(t){if(this.X&&this.X!=t)throw Error("Method not supported");xu.M.$a.call(this,t)},t.lb=function(){this.f=this.s.a.createElement("DIV")},t.render=function(t){if(this.na)throw Error("Component already rendered");this.f||this.lb(),t?t.insertBefore(this.f,null):this.s.a.body.appendChild(this.f),this.X&&!this.X.na||this.v()},t.v=function(){this.na=!0,Au(this,(function(t){!t.na&&t.R()&&t.v()}))},t.ya=function(){Au(this,(function(t){t.na&&t.ya()})),this.L&&su(this.L),this.na=!1},t.m=function(){this.na&&this.ya(),this.L&&(this.L.o(),delete this.L),Au(this,(function(t){t.o()})),this.f&&Xe(this.f),this.X=this.f=this.oa=this.Ca=null,xu.M.m.call(this)},t.removeChild=function(t,e){if(t){var n=m(t)?t:t.eb||(t.eb=":"+(t.Kb.a++).toString(36));if(this.oa&&n?t=(null!==(t=this.oa)&&n in t?t[n]:void 0)||null:t=null,n&&t){var r=this.oa;if(n in r&&delete r[n],G(this.Ca,t),e&&(t.ya(),t.f&&Xe(t.f)),null==(e=t))throw Error("Unable to set parent component");e.X=null,xu.M.$a.call(e,null)}}if(!t)throw Error("Child is not in parent component");return t},Wu.A="firebaseui.auth.soy2.element.infoBar",Zu.A="firebaseui.auth.soy2.element.progressDialog",Qu.A="firebaseui.auth.soy2.element.listBoxDialog",Yu.A="firebaseui.auth.soy2.element.busyIndicator";var ec=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function nc(t,e){t&&window.componentHandler&&window.componentHandler[e]&&j(ec,(function(n){$s(t,n)&&window.componentHandler[e](t),j(Ke(n,t),(function(t){window.componentHandler[e](t)}))}))}function rc(t,e,n){if(ic.call(this),document.body.appendChild(t),t.showModal||window.dialogPolyfill.registerDialog(t),t.showModal(),Xu(t),e&&Pu(this,t,(function(e){var n=t.getBoundingClientRect();(e.clientX<n.left||n.left+n.width<e.clientX||e.clientY<n.top||n.top+n.height<e.clientY)&&ic.call(this)})),!n){var r=this.R().parentElement||this.R().parentNode;if(r){var i=this;this.da=function(){if(t.open){var e=t.getBoundingClientRect().height,n=r.getBoundingClientRect().height,o=r.getBoundingClientRect().top-document.body.getBoundingClientRect().top,a=r.getBoundingClientRect().left-document.body.getBoundingClientRect().left,s=t.getBoundingClientRect().width,u=r.getBoundingClientRect().width;t.style.top=(o+(n-e)/2).toString()+"px",e=a+(u-s)/2,t.style.left=e.toString()+"px",t.style.right=(document.body.getBoundingClientRect().width-e-s).toString()+"px"}else window.removeEventListener("resize",i.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function ic(){var t=oc.call(this);t&&(tc(t),t.open&&t.close(),Xe(t),this.da&&window.removeEventListener("resize",this.da))}function oc(){return Ze("firebaseui-id-dialog")}function ac(){Xe(sc.call(this))}function sc(){return Iu(this,"firebaseui-id-info-bar")}function uc(){return Iu(this,"firebaseui-id-dismiss-info-bar")}var cc={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},ib:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function lc(t,e,n){for(var r in Qn.call(this,t,e),n)this[r]=n[r]}function hc(t,e,n,r,i){xu.call(this,n),this.gb=t,this.fb=e,this.Da=!1,this.Ea=r||null,this.w=this.ca=null,this.Y=lt(cc),ft(this.Y,i||{})}function fc(t){return t.R().parentElement||t.R().parentNode}function dc(t,e,n){Mu(t,e,(function(){n.focus()}))}function pc(t,e,n){Mu(t,e,(function(){n()}))}function mc(t,e,n){e=(t=t||{}).Wa;var r=t.ia;return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Ou(t)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?zu(null):"")+Bu(null)+'</div></div><div class="firebaseui-card-footer">'+(r?Gu(n):Hu(n))+"</div></form></div>",yn(t)}function gc(t,e,n){return e=(t=t||{}).ia,t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+Ou(t)+Vu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+$u()+'</div><div class="firebaseui-form-actions">'+Uu()+'</div></div><div class="firebaseui-card-footer">'+(e?Gu(n):Hu(n))+"</div></form></div>",yn(t)}function vc(t,e,n){var r=(t=t||{}).Sb;e=t.Ua;var i=t.ia,o='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+Ou(t);return r?(t='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+En(null!=(t=(t=t||{}).name)?t:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',t=yn(t)):t="",n=o+t+qu(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?zu(null):"")+Fu()+'</div></div><div class="firebaseui-card-footer">'+(i?Gu(n):Hu(n))+"</div></form></div>",yn(n)}function yc(t,e,n){return e=(t=t||{}).Ua,t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+Ou(t)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?zu(null):"")+Bu({label:wn("Send")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(t)}function bc(t,e,n){e=t.H;var r="";return r+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="Follow the instructions sent to <strong>"+pn(t.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',e&&(r+='<div class="firebaseui-form-actions">'+Bu({label:wn("Done")})+"</div>"),r+='</div><div class="firebaseui-card-footer">'+Hu(n)+"</div></div>",yn(r)}function wc(t,e,n){return yn('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+Yu(null)+"</div></div>")}function _c(t,e,n){return yn('<div class="firebaseui-container firebaseui-id-page-spinner">'+Yu({vb:!0})+"</div>")}function Ec(){return yn('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function Tc(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(t="A sign-in email with additional instructions was sent to <strong>"+pn(t.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+yn('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+zu({label:wn("Back")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Sc(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+yn('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+zu({label:wn("Back")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(t)}function xc(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+Ou(t)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu(null)+Bu(null)+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(t)}function Ic(){var t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu({label:wn("Dismiss")})+"</div></div></div>";return yn(t)}function kc(){var t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu({label:wn("Dismiss")})+"</div></div></div>";return yn(t)}function Ac(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(t="You’ve already used <strong>"+pn(t.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+Vu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+$u()+'</div><div class="firebaseui-form-actions">'+Uu()+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Cc(t,e,n){var r=t.email;return e="",t=wn(t=""+Ju(t,n)),e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(r="You’ve already used <strong>"+pn(r)+"</strong>. You can connect your <strong>"+pn(t)+"</strong> account with <strong>"+pn(r)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(t="For this flow to successfully connect your "+pn(t)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Uu()+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Nc(t,e,n){e="";var r=""+Ju(t,n);return e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(t="You originally intended to connect <strong>"+pn(r=wn(r))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(r="If you still want to connect your <strong>"+pn(r)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ju()+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Mc(t,e,n){var r=t.email;return e="",t=wn(t=""+Ju(t,n)),e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(r="You’ve already used <strong>"+pn(r)+"</strong>. Sign in with "+pn(t)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Bu({label:wn("Sign in with "+t)})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Pc(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="To continue sign in with <strong>"+pn(t.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu(null)+Bu({label:wn("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Lc(t){var e="";return e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+('<p class="firebaseui-text">for <strong>'+pn(t.email)+"</strong></p>")+qu(function(t){function e(){}var n={label:wn("New password")};for(var r in e.prototype=t,t=new e,n)t[r]=n[r];return t}(t))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Fu()+"</div></div></form></div>",yn(e)}function Dc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Rc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Oc(t){var e=t.H,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="Your sign-in email address has been changed back to <strong>"+pn(t.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></form></div>",yn(n)}function Bc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Uc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Fc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function jc(t){var e=t.H,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="You can now sign in with your new email <strong>"+pn(t.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(n)}function qc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Vc(t){var e=t.factorId,n=t.phoneNumber;t=t.H;var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(e){case"phone":r+=e="The <strong>"+pn(e)+" "+pn(n)+"</strong> was removed as a second authentication step.";break;default:r+="The device or app was removed as a second authentication step."}return r+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></form></div>",yn(r)}function $c(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function zc(t){var e=t.Ab;return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+pn(t.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',e&&(t+=Bu({label:wn("Retry")})),yn(t+"</div></div></div>")}function Hc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+pn(t.errorMessage)+"</p></div></div>",yn(t)}function Gc(t,e,n){var r=t.Pb;return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(t="Continue with "+pn(t.ic)+"?")+'</h2><p class="firebaseui-text">'+(r="You originally wanted to sign in with "+pn(r))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu(null)+Bu({label:wn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Wc(t,e,n){var r='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';e=(t=t.Rb).length;for(var i=0;i<e;i++){var o={ga:t[i]},a=n,s=(o=o||{}).ga,u=o,c="";switch((u=u||{}).ga.providerId){case"google.com":c+="firebaseui-idp-google";break;case"github.com":c+="firebaseui-idp-github";break;case"facebook.com":c+="firebaseui-idp-facebook";break;case"twitter.com":c+="firebaseui-idp-twitter";break;case"phone":c+="firebaseui-idp-phone";break;case"anonymous":c+="firebaseui-idp-anonymous";break;case"password":c+="firebaseui-idp-password";break;default:c+="firebaseui-idp-generic"}u=(u='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+En(vn(c))+' firebaseui-id-idp-button" data-provider-id="'+En(s.providerId)+'" style="background-color:')+En(Sn(vn((c=(c=(c=o)||{}).ga).Ga?c.Ga:a.wa[c.providerId]?""+a.wa[c.providerId]:0==c.providerId.indexOf("saml.")?""+a.wa.saml:0==c.providerId.indexOf("oidc.")?""+a.wa.oidc:""+a.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var l=o;c=a,l=(l=l||{}).ga,c=bn(l.Na?Tn(l.Na):c.xa[l.providerId]?Tn(c.xa[l.providerId]):0==l.providerId.indexOf("saml.")?Tn(c.xa.saml):0==l.providerId.indexOf("oidc.")?Tn(c.xa.oidc):Tn(c.xa.password)),u=u+En(Tn(c))+'"></span>',"password"==s.providerId?u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with email</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Email</span>':"phone"==s.providerId?u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with phone</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Phone</span>':"anonymous"==s.providerId?u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Continue as guest</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Guest</span>':u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">'+(s="Sign in with "+pn(Ju(o,a)))+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+pn(Ju(o,a))+"</span>",r+='<li class="firebaseui-list-item">'+(o=yn(u+"</button>"))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Gu(n)+"</div></div>",yn(r)}function Kc(t,e,n){var r,i=(t=t||{}).Fb,o=t.Wa;return e=t.ia,t='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+En(null!=(t=(t=t||{}).za)?t:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',r=(t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+yn(t))+(r=i?yn('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(o?zu(null):"")+Bu({label:wn("Verify")})+'</div></div><div class="firebaseui-card-footer">',e?(e='<p class="firebaseui-tos firebaseui-phone-tos">',e=n.G&&n.F?e+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':e+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=yn(e+"</p>")):n=yn('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+Hu(n),yn(r+n+"</div></form></div>")}function Zc(t,e,n){var r="";return t='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+pn(e=(t=t||{}).phoneNumber)+"</a>",pn(e),e=r,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+t+"</p>"+(r=yn('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu(null)+Bu({label:wn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form>",t=yn('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),yn(e+(n+t+"</div>"))}function Qc(){return yn('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function Yc(t,e,n){var r='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';e=(t=t.dc).length;for(var i=0;i<e;i++){var o=t[i],a="",s="Sign in to "+pn(o.displayName),u=pn(o.displayName),c=o.tenantId?o.tenantId:"top-level-project";a+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+En(c=wn(c))+' firebaseui-id-tenant-selection-button"'+(o.tenantId?'data-tenant-id="'+En(o.tenantId)+'"':"")+'style="background-color:'+En(Sn(o.Ga))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+En(Tn(o.Na))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">'+s+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+u+"</span></button>",r+='<li class="firebaseui-list-item">'+(o=yn(a))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Gu(n)+"</div></div>",yn(r)}function Jc(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Ou(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Bu(null)+'</div></div><div class="firebaseui-card-footer">'+Gu(n)+"</div></form></div>",yn(t)}function Xc(){return Iu(this,"firebaseui-id-submit")}function tl(){return Iu(this,"firebaseui-id-secondary-link")}function el(t,e){Pu(this,Xc.call(this),(function(e){t(e)}));var n=tl.call(this);n&&e&&Pu(this,n,(function(t){e(t)}))}function nl(){return Iu(this,"firebaseui-id-password")}function rl(){return Iu(this,"firebaseui-id-password-error")}function il(){var t=nl.call(this),e=rl.call(this);Nu(this,t,(function(){Ru(e)&&(Cu(t,!0),Lu(e))}))}function ol(){var t=nl.call(this),e=rl.call(this);return Gs(t)?(Cu(t,!0),Lu(e),e=!0):(Cu(t,!1),Du(e,vn("Enter your password").toString()),e=!1),e?Gs(t):null}function al(t,e,n,r,i,o){hc.call(this,Ac,{email:t},o,"passwordLinking",{G:r,F:i}),this.B=e,this.J=n}R(lc,Qn),R(hc,xu),(t=hc.prototype).lb=function(){var t=ln(this.gb,this.fb,this.Y,this.s);Xu(t),this.f=t},t.v=function(){if(hc.M.v.call(this),xr(fc(this),new lc("pageEnter",fc(this),{pageId:this.Ea})),this.cb()&&this.Y.G){var t=this.Y.G;Pu(this,this.cb(),(function(){t()}))}if(this.bb()&&this.Y.F){var e=this.Y.F;Pu(this,this.bb(),(function(){e()}))}},t.ya=function(){xr(fc(this),new lc("pageExit",fc(this),{pageId:this.Ea})),hc.M.ya.call(this)},t.m=function(){window.clearTimeout(this.ca),this.fb=this.gb=this.ca=null,this.Da=!1,this.w=null,tc(this.R()),hc.M.m.call(this)},t.K=function(t,e,n,r){function i(){if(o.O)return null;o.Da=!1,window.clearTimeout(o.ca),o.ca=null,o.w&&(tc(o.w),Xe(o.w),o.w=null)}var o=this;return o.Da?null:(function(t){t.Da=!0;var e=$s(t.R(),"firebaseui-use-spinner");t.ca=window.setTimeout((function(){t.R()&&null===t.w&&(t.w=ln(Yu,{vb:e},null,t.s),t.R().appendChild(t.w),Xu(t.w))}),500)}(o),t.apply(null,e).then(n,r).then(i,i))},M(hc.prototype,{a:function(t){ac.call(this);var e=ln(Wu,{message:t},null,this.s);this.R().appendChild(e),Pu(this,uc.call(this),(function(){Xe(e)}))},xc:ac,zc:sc,yc:uc,Z:function(t,e){t=ln(Zu,{Ma:t,message:e},null,this.s),rc.call(this,t)},h:ic,Db:oc,Bc:function(){return Iu(this,"firebaseui-tos")},cb:function(){return Iu(this,"firebaseui-tos-link")},bb:function(){return Iu(this,"firebaseui-pp-link")},Cc:function(){return Iu(this,"firebaseui-tos-list")}}),mc.A="firebaseui.auth.soy2.page.signIn",gc.A="firebaseui.auth.soy2.page.passwordSignIn",vc.A="firebaseui.auth.soy2.page.passwordSignUp",yc.A="firebaseui.auth.soy2.page.passwordRecovery",bc.A="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",wc.A="firebaseui.auth.soy2.page.callback",_c.A="firebaseui.auth.soy2.page.spinner",Ec.A="firebaseui.auth.soy2.page.blank",Tc.A="firebaseui.auth.soy2.page.emailLinkSignInSent",Sc.A="firebaseui.auth.soy2.page.emailNotReceived",xc.A="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",Ic.A="firebaseui.auth.soy2.page.differentDeviceError",kc.A="firebaseui.auth.soy2.page.anonymousUserMismatch",Ac.A="firebaseui.auth.soy2.page.passwordLinking",Cc.A="firebaseui.auth.soy2.page.emailLinkSignInLinking",Nc.A="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",Mc.A="firebaseui.auth.soy2.page.federatedLinking",Pc.A="firebaseui.auth.soy2.page.unsupportedProvider",Lc.A="firebaseui.auth.soy2.page.passwordReset",Dc.A="firebaseui.auth.soy2.page.passwordResetSuccess",Rc.A="firebaseui.auth.soy2.page.passwordResetFailure",Oc.A="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",Bc.A="firebaseui.auth.soy2.page.emailChangeRevokeFailure",Uc.A="firebaseui.auth.soy2.page.emailVerificationSuccess",Fc.A="firebaseui.auth.soy2.page.emailVerificationFailure",jc.A="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",qc.A="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",Vc.A="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",$c.A="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",zc.A="firebaseui.auth.soy2.page.recoverableError",Hc.A="firebaseui.auth.soy2.page.unrecoverableError",Gc.A="firebaseui.auth.soy2.page.emailMismatch",Wc.A="firebaseui.auth.soy2.page.providerSignIn",Kc.A="firebaseui.auth.soy2.page.phoneSignInStart",Zc.A="firebaseui.auth.soy2.page.phoneSignInFinish",Qc.A="firebaseui.auth.soy2.page.signOut",Yc.A="firebaseui.auth.soy2.page.selectTenant",Jc.A="firebaseui.auth.soy2.page.providerMatchByEmail",s(al,hc),al.prototype.v=function(){this.S(),this.P(this.B,this.J),pc(this,this.i(),this.B),this.i().focus(),hc.prototype.v.call(this)},al.prototype.m=function(){this.B=null,hc.prototype.m.call(this)},al.prototype.j=function(){return Gs(Iu(this,"firebaseui-id-email"))},M(al.prototype,{i:nl,D:rl,S:il,u:ol,ea:Xc,ba:tl,P:el});var sl=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function ul(){return Iu(this,"firebaseui-id-email")}function cl(){return Iu(this,"firebaseui-id-email-error")}function ll(t){var e=ul.call(this),n=cl.call(this);Nu(this,e,(function(){Ru(n)&&(Cu(e,!0),Lu(n))})),t&&Mu(this,e,(function(){t()}))}function hl(){return X(Gs(ul.call(this))||"")}function fl(){var t=ul.call(this),e=cl.call(this),n=Gs(t)||"";return n?sl.test(n)?(Cu(t,!0),Lu(e),e=!0):(Cu(t,!1),Du(e,vn("That email address isn't correct").toString()),e=!1):(Cu(t,!1),Du(e,vn("Enter your email address to continue").toString()),e=!1),e?X(Gs(t)):null}function dl(t,e,n,r,i,o,a){hc.call(this,gc,{email:n,ia:!!o},a,"passwordSignIn",{G:r,F:i}),this.B=t,this.J=e}function pl(t,e,n,r,i,o){hc.call(this,t,e,r,i||"notice",o),this.i=n||null}function ml(t,e,n,r,i){pl.call(this,bc,{email:t,H:!!e},e,i,"passwordRecoveryEmailSent",{G:n,F:r})}function gl(t,e){pl.call(this,Uc,{H:!!t},t,e,"emailVerificationSuccess")}function vl(t,e){pl.call(this,Fc,{H:!!t},t,e,"emailVerificationFailure")}function yl(t,e,n){pl.call(this,jc,{email:t,H:!!e},e,n,"verifyAndChangeEmailSuccess")}function bl(t,e){pl.call(this,qc,{H:!!t},t,e,"verifyAndChangeEmailFailure")}function wl(t,e){pl.call(this,$c,{H:!!t},t,e,"revertSecondFactorAdditionFailure")}function _l(t){pl.call(this,Qc,void 0,void 0,t,"signOut")}function El(t,e){pl.call(this,Dc,{H:!!t},t,e,"passwordResetSuccess")}function Tl(t,e){pl.call(this,Rc,{H:!!t},t,e,"passwordResetFailure")}function Sl(t,e){pl.call(this,Bc,{H:!!t},t,e,"emailChangeRevokeFailure")}function xl(t,e,n){pl.call(this,zc,{errorMessage:t,Ab:!!e},e,n,"recoverableError")}function Il(t,e){pl.call(this,Hc,{errorMessage:t},void 0,e,"unrecoverableError")}s(dl,hc),dl.prototype.v=function(){this.S(),this.ea(),this.ba(this.B,this.J),dc(this,this.l(),this.i()),pc(this,this.i(),this.B),Gs(this.l())?this.i().focus():this.l().focus(),hc.prototype.v.call(this)},dl.prototype.m=function(){this.J=this.B=null,hc.prototype.m.call(this)},M(dl.prototype,{l:ul,U:cl,S:ll,P:hl,j:fl,i:nl,D:rl,ea:il,u:ol,ua:Xc,pa:tl,ba:el}),R(pl,hc),pl.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),pl.M.v.call(this)},pl.prototype.m=function(){this.i=null,pl.M.m.call(this)},M(pl.prototype,{l:Xc,B:tl,u:el}),R(ml,pl),R(gl,pl),R(vl,pl),R(yl,pl),R(bl,pl),R(wl,pl),R(_l,pl),R(El,pl),R(Tl,pl),R(Sl,pl),R(xl,pl),R(Il,pl);var kl=!1,Al=null;function Cl(t,e){kl=!!e,Al||("undefined"==typeof accountchooser&&function(){var t=window.navigator&&window.navigator.userAgent;if(t){var e;if(e=t.match(Ps)){var n=new js(e[3]||e[1]);return!(0<=t.indexOf("Opera Mini"))&&(0<=t.indexOf("Opera Mobi")?0<=t.indexOf("Android")&&qs(n,"10.1"):qs(n,"8.0"))}if(e=t.match(Ms))return qs(new js(e[1]),"2.0");if(e=t.match(Ls))return qs(new js(e[1]),"6.0");if(e=t.match(Ds))return n=new js(e[6]),t=e[3]&&new js(e[3]),e=e[5]&&new js(e[5],"_"),(!(!t||!qs(t,"6.0"))||!(!e||!qs(e,"10.5.6")))&&qs(n,"3.0");if(e=t.match(Os))return qs(new js(e[1]),"3.0");if(e=t.match(Bs))return qs(new js(e[1],"_"),"4.0");if(e=t.match(Us))return qs(new js(e[1]),"4.7");if(e=t.match(Fs))return n=new js(e[1]),t=new js(e[2]),qs(n,"7.0")&&qs(t,"7.0");if(e=t.match(Ns))return n=new js(e[1]),t=new js(e[2]),qs(n,"7.0")&&qs(t,"6.0");if(t.match(Rs))return!1}return!0}()?(e=ke(_e(new we(Te,"//www.gstatic.com/accountchooser/client.js"))),Al=Qr(Ti(e)).ta((function(){}))):Al=Qr()),Al.then(t,t)}function Nl(t,e){(t=ss(t=gf(t)).accountChooserInvoked||null)?t(e):e()}function Ml(t,e,n){(t=ss(t=gf(t)).accountChooserResult||null)?t(e,n):n()}function Pl(t,e,n,r){function i(){var e=t();e&&(e=rs(gf(e)))&&e()}Is((function(){var o=t();o&&function(t,e,n,r,i){r?(Ts("callback",t,e),kl&&n()):Nl(t,(function(){va(new fo(t.a.tenantId||null),af(t)),ks((function(r){sa(ta,af(t)),Ml(t,r?"empty":"unavailable",(function(){Ts("signIn",t,e),(r||kl)&&n()}))}),fa(af(t)),i)}))}(o,e,i,n,r)}),(function(n){var r=t();r&&function(t,e,n,r){function i(t){t=Ol(t),ql(e,n,void 0,t),r()}Ml(e,"accountSelected",(function(){ha(!1,af(e));var o=Fl(e);df(e,rf(e).fetchSignInMethodsForEmail(t.a).then((function(i){$l(e,n,i,t.a,t.h||void 0,void 0,o),r()}),i))}))}(n,r,e,i)}),(function(n){var r=t();r&&function(t,e,n,r){Ml(e,t?"addAccount":"unavailable",(function(){Ts("signIn",e,n),(t||kl)&&r()}))}(n,r,e,i)}),t()&&function(t){return t.a.get("acUiConfig")||null}(gf(t())))}function Ll(t,e,n,r){function i(n){if(!n.name||"cancel"!=n.name){t:{var r=n.message;try{var i=((JSON.parse(r).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(i&&i.length){var o=!0;break t}}catch(t){}o=!1}if(o)n=fc(e),e.o(),ql(t,n,void 0,vn("Your sign-in session has expired. Please try again.").toString());else{if(o=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;o=Ol(n)}e.a(o)}}}if(pf(t),r)return Dl(t,n),Qr();if(!n.credential)throw Error("No credential found!");if(!(r=rf(t).currentUser||n.user))throw Error("User not logged in.");r=new ro(r.email,r.displayName,r.photoURL,"password"==n.credential.providerId?null:n.credential.providerId),null!=aa(na,af(t))&&!aa(na,af(t))||function(t,e){var n=fa(e),r=z(n,(function(e){return e.a==t.a&&(e.f||null)==(t.f||null)}));-1<r&&W(n,r),n.unshift(t),ua(ra,V(n,(function(t){return t.aa()})),e)}(r,af(t)),sa(na,af(t));try{var o=function(t,e){return vf(t),hf(t,(function(n){if(t.j&&!t.j.isAnonymous&&qa(gf(t))&&!rf(t).currentUser)return bf(t).then((function(){return"password"==e.credential.providerId&&(e.credential=null),e}));if(n)return bf(t).then((function(){return n.linkWithCredential(e.credential)})).then((function(t){return e.user=t.user,e.credential=t.credential,e.operationType=t.operationType,e.additionalUserInfo=t.additionalUserInfo,e}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return wf(t,n,e.credential)}));if(!e.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return bf(t).then((function(){return of(t).updateCurrentUser(e.user)})).then((function(){return e.user=of(t).currentUser,e.operationType="signIn",e.credential&&e.credential.providerId&&"password"==e.credential.providerId&&(e.credential=null),e}))}))}(t,n)}catch(t){return Ji(t.code||t.message,t),e.a(t.code||t.message),Qr()}return n=o.then((function(e){Dl(t,e)}),i).then(void 0,i),df(t,o),Qr(n)}function Dl(t,e){if(!e.user)throw Error("No user found");var n=os(gf(t));if(is(gf(t))&&n&&no("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=os(gf(t));var r=ca(af(t))||void 0;sa(ea,af(t));var i=!1;ci()?(n&&!n(e,r)||(i=!0,window.opener.location.assign(Ce(Pe(Rl(t,r))))),n||window.close()):n&&!n(e,r)||(i=!0,ui(Rl(t,r))),i||t.reset()}else{n=e.user,e=e.credential,r=is(gf(t)),i=ca(af(t))||void 0,sa(ea,af(t));var o=!1;ci()?(r&&!r(n,e,i)||(o=!0,window.opener.location.assign(Ce(Pe(Rl(t,i))))),r||window.close()):r&&!r(n,e,i)||(o=!0,ui(Rl(t,i))),o||t.reset()}}function Rl(t,e){if(!(t=e||gf(t).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return t}function Ol(t){var e={code:t.code},n="";switch((e=e||{}).code){case"auth/email-already-in-use":n+="The email address is already used by another account";break;case"auth/requires-recent-login":n+=jn();break;case"auth/too-many-requests":n+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":n+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":n+="That email address doesn't match an existing account";break;case"auth/user-token-expired":n+=jn();break;case"auth/weak-password":n+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":n+="The email and password you entered don't match";break;case"auth/network-request-failed":n+="A network error has occurred";break;case"auth/invalid-phone-number":n+=Rn();break;case"auth/invalid-verification-code":n+=vn("Wrong code. Try again.");break;case"auth/code-expired":n+="This code is no longer valid";break;case"auth/expired-action-code":n+="This code has expired.";break;case"auth/invalid-action-code":n+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(e=vn(n).toString())return e;try{return JSON.parse(t.message),Ji("Internal error: "+t.message,void 0),Bn().toString()}catch(e){return t.message}}function Bl(t,n,r,i){function o(){va(new fo(t.a.tenantId||null),af(t)),df(t,n.K(C(t.cc,t),[c],(function(){if("file:"===(window.location&&window.location.protocol))return df(t,Xh(t).then((function(e){n.o(),sa(ta,af(t)),Ts("callback",t,u,Qr(e))}),a))}),s))}function a(e){if(sa(ta,af(t)),!e.name||"cancel"!=e.name)switch(e.code){case"auth/popup-blocked":o();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":n.a(Ol(e));break;default:n.o(),Ts("callback",t,u,Yr(e))}}function s(e){sa(ta,af(t)),e.name&&"cancel"==e.name||(Ji("signInWithRedirect: "+e.code,void 0),e=Ol(e),"blank"==n.Ea&&es(gf(t))?(n.o(),Ts("providerSignIn",t,u,e)):n.a(e))}var u=fc(n),c=function(t,n,r){var i=Ba[n]&&e.auth[Ba[n]]?new e.auth[Ba[n]]:0==n.indexOf("saml.")?new e.auth.SAMLAuthProvider(n):new e.auth.OAuthProvider(n);if(!i)throw Error("Invalid Firebase Auth provider!");var o=Wa(gf(t),n);if(i.addScope)for(var a=0;a<o.length;a++)i.addScope(o[a]);return o=Ka(gf(t),n)||{},r&&((t=n==e.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":n==e.auth.GithubAuthProvider.PROVIDER_ID?"login":(t=Ha(gf(t),n))&&t.Nb)&&(o[t]=r)),i.setCustomParameters&&i.setCustomParameters(o),i}(t,r,i);ns(gf(t))==vs?o():df(t,function(t,e){return vf(t),hf(t,(function(n){return n&&!da(af(t))?n.linkWithPopup(e).then((function(t){return t}),(function(e){if(e&&"auth/email-already-in-use"==e.code&&e.email&&e.credential)throw e;return wf(t,e)})):rf(t).signInWithPopup(e)}))}(t,c).then((function(e){n.o(),Ts("callback",t,u,Qr(e))}),a))}function Ul(t,n,r){var i,o,a=function(t,e){var n=null;return j(Va(t),(function(t){t.authMethod===e&&(n=t.provider)})),n}(gf(t),r&&r.authMethod||null);return r&&r.idToken&&a===e.auth.GoogleAuthProvider.PROVIDER_ID?(Wa(gf(t),e.auth.GoogleAuthProvider.PROVIDER_ID).length?(Bl(t,n,a,r.id),r=Qr(!0)):(i=e.auth.GoogleAuthProvider.credential(r.idToken),o=!1,i=n.K(C(t.$b,t),[i],(function(e){var r=fc(n);n.o(),Ts("callback",t,r,Qr(e)),o=!0}),(function(e){if(!(e.name&&"cancel"==e.name||e&&"auth/credential-already-in-use"==e.code))if(e&&"auth/email-already-in-use"==e.code&&e.email&&e.credential){var r=fc(n);n.o(),Ts("callback",t,r,Yr(e))}else e=Ol(e),n.a(e)})),df(t,i),r=i.then((function(){return o}),(function(){return!1}))),r):(r&&n.a(vn("The selected credential for the authentication provider is not supported!").toString()),Qr(!1))}function Fl(t){return 1==(t=za(gf(t))).length&&t[0]==e.auth.EmailAuthProvider.PROVIDER_ID}function jl(t){return 1==(t=za(gf(t))).length&&t[0]==e.auth.PhoneAuthProvider.PROVIDER_ID}function ql(t,e,n,r){Fl(t)?r?Ts("signIn",t,e,n,r):Hl(t,e,n):t&&jl(t)&&!r?Ts("phoneSignInStart",t,e):t&&es(gf(t))&&!r?Ts("federatedRedirect",t,e,n):Ts("providerSignIn",t,e,r,n)}function Vl(t,e,n,r){var i=fc(e);df(t,e.K(C(rf(t).fetchSignInMethodsForEmail,rf(t)),[n],(function(o){ha(us(gf(t))==ds,af(t)),e.o(),$l(t,i,o,n,void 0,r)}),(function(t){t=Ol(t),e.a(t)})))}function $l(t,n,r,i,o,a,s){r.length||ts(gf(t))?!r.length&&ts(gf(t))?Ts("sendEmailLinkForSignIn",t,n,i,(function(){Ts("signIn",t,n)})):H(r,e.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Ts("passwordSignIn",t,n,i,s):1==r.length&&r[0]===e.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Ts("sendEmailLinkForSignIn",t,n,i,(function(){Ts("signIn",t,n)})):(r=Ra(r,za(gf(t))))?(ma(new lo(i),af(t)),Ts("federatedSignIn",t,n,i,r,a)):Ts("unsupportedProvider",t,n,i):Ts("passwordSignUp",t,n,i,o,void 0,s)}function zl(t,e,n,r,i,o){var a=fc(e);df(t,e.K(C(t.Hb,t),[n,o],(function(){e.o(),Ts("emailLinkSignInSent",t,a,n,r,o)}),i))}function Hl(t,e,n){us(gf(t))==ds?Cl((function(){Ss?Nl(t,(function(){va(new fo(t.a.tenantId||null),af(t)),ks((function(r){sa(ta,af(t)),Ml(t,r?"empty":"unavailable",(function(){n?Ts("prefilledEmailSignIn",t,e,n):Ts("signIn",t,e)}))}),fa(af(t)),Fa(gf(t)))})):(vf(t),Pl(nf,e,!1,Fa(gf(t))))}),!1):(kl=!1,Nl(t,(function(){Ml(t,"unavailable",(function(){n?Ts("prefilledEmailSignIn",t,e,n):Ts("signIn",t,e)}))})))}function Gl(){return St(fi(),"oobCode")}function Wl(){var t=St(fi(),"continueUrl");return t?function(){ui(t)}:null}function Kl(t,e){var n=hi(e,"Could not find the FirebaseUI widget element on the page.");switch(e=function(t){var e=fi();return(e=St(e,t=_a(gf(t).a,"queryParameterForSignInSuccessUrl")))?Ce(Pe(e)):null}(t),function(t){var e=fi();for(var n in e=St(e,t=Qa(gf(t)))||"",bs)if(bs[n].toLowerCase()==e.toLowerCase())return bs[n];return"callback"}(t)){case"callback":e&&la(e,af(t)),t.ob()?Ts("callback",t,n):ql(t,n,sf(t));break;case"resetPassword":Ts("passwordReset",t,n,Gl(),Wl());break;case"recoverEmail":Ts("emailChangeRevocation",t,n,Gl());break;case"revertSecondFactorAddition":Ts("revertSecondFactorAddition",t,n,Gl());break;case"verifyEmail":Ts("emailVerification",t,n,Gl(),Wl());break;case"verifyAndChangeEmail":Ts("verifyAndChangeEmail",t,n,Gl(),Wl());break;case"signIn":Ts("emailLinkSignInCallback",t,n,fi()),yf();break;case"select":if(e&&la(e,af(t)),Ss){ql(t,n);break}return void Cl((function(){vf(t),Pl(nf,n,!0)}),!0);default:throw Error("Unhandled widget operation.")}(e=rs(gf(t)))&&e()}function Zl(t,e){hc.call(this,kc,void 0,e,"anonymousUserMismatch"),this.i=t}function Ql(t){hc.call(this,wc,void 0,t,"callback")}function Yl(t,e,n){if(n.user){var r={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},i=da(af(t)),o=i&&i.f;if(o&&!function(t,e){if(e==t.email)return!0;if(t.providerData)for(var n=0;n<t.providerData.length;n++)if(e==t.providerData[n].email)return!0;return!1}(n.user,o))!function(t,e,n){var r=fc(e);df(t,bf(t).then((function(){e.o(),Ts("emailMismatch",t,r,n)}),(function(t){t.name&&"cancel"==t.name||(t=Ol(t.code),e.a(t))})))}(t,e,r);else{var a=i&&i.a;a?df(t,n.user.linkWithCredential(a).then((function(n){r={user:n.user,credential:a,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},Jl(t,e,r)}),(function(n){Xl(t,e,n)}))):Jl(t,e,r)}}else n=fc(e),e.o(),pa(af(t)),ql(t,n)}function Jl(t,e,n){pa(af(t)),Ll(t,e,n)}function Xl(t,e,n){var r=fc(e);pa(af(t)),n=Ol(n),e.o(),ql(t,r,void 0,n)}function th(t,n,r,i){var o=fc(n);df(t,rf(t).fetchSignInMethodsForEmail(r).then((function(a){n.o(),a.length?H(a,e.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Ts("passwordLinking",t,o,r):1==a.length&&a[0]===e.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Ts("emailLinkSignInLinking",t,o,r):(a=Ra(a,za(gf(t))))?Ts("federatedLinking",t,o,r,a,i):(pa(af(t)),Ts("unsupportedProvider",t,o,r)):(pa(af(t)),Ts("passwordRecovery",t,o,r,!1,Un().toString()))}),(function(e){Xl(t,n,e)})))}function eh(t,e){hc.call(this,Ic,void 0,e,"differentDeviceError"),this.i=t}function nh(t,e,n,r){hc.call(this,Oc,{email:t,H:!!n},r,"emailChangeRevoke"),this.l=e,this.i=n||null}function rh(){return Iu(this,"firebaseui-id-new-password")}function ih(){return Iu(this,"firebaseui-id-password-toggle")}function oh(){this.Sa=!this.Sa;var t=ih.call(this),e=rh.call(this);this.Sa?(e.type="text",zs(t,"firebaseui-input-toggle-off"),Hs(t,"firebaseui-input-toggle-on")):(e.type="password",zs(t,"firebaseui-input-toggle-on"),Hs(t,"firebaseui-input-toggle-off")),e.focus()}function ah(){return Iu(this,"firebaseui-id-new-password-error")}function sh(){this.Sa=!1;var t=rh.call(this);t.type="password";var e=ah.call(this);Nu(this,t,(function(){Ru(e)&&(Cu(t,!0),Lu(e))}));var n=ih.call(this);zs(n,"firebaseui-input-toggle-on"),Hs(n,"firebaseui-input-toggle-off"),function(t,e,n){zn(t,N(Hn,e=new eu(e))),au(ku(t),e,"focusin",n)}(this,t,(function(){zs(n,"firebaseui-input-toggle-focus"),Hs(n,"firebaseui-input-toggle-blur")})),function(t,e,n){zn(t,N(Hn,e=new eu(e))),au(ku(t),e,"focusout",n)}(this,t,(function(){zs(n,"firebaseui-input-toggle-blur"),Hs(n,"firebaseui-input-toggle-focus")})),Pu(this,n,C(oh,this))}function uh(){var t=rh.call(this),e=ah.call(this);return Gs(t)?(Cu(t,!0),Lu(e),e=!0):(Cu(t,!1),Du(e,vn("Enter your password").toString()),e=!1),e?Gs(t):null}function ch(t,e,n){hc.call(this,Lc,{email:t},n,"passwordReset"),this.l=e}function lh(t,e,n,r,i){hc.call(this,Vc,{factorId:t,phoneNumber:n||null,H:!!r},i,"revertSecondFactorAdditionSuccess"),this.l=e,this.i=r||null}function hh(t,e,n,r){"auth/weak-password"==(r&&r.code)?(t=Ol(r),Cu(n.i(),!1),Du(n.B(),t),n.i().focus()):(n&&n.o(),(n=new Tl).render(e),tf(t,n))}function fh(t,e){try{var n="number"==typeof t.selectionStart}catch(t){n=!1}n?(t.selectionStart=e,t.selectionEnd=e):oe&&!ye("9")&&("textarea"==t.type&&(e=t.value.substring(0,e).replace(/(\r\n|\r|\n)/g,"\n").length),(t=t.createTextRange()).collapse(!0),t.move("character",e),t.select())}function dh(t,e,n,r,i,o){hc.call(this,xc,{email:n},o,"emailLinkSignInConfirmation",{G:r,F:i}),this.l=t,this.u=e}function ph(t,e,n,r,i){hc.call(this,Nc,{ga:t},i,"emailLinkSignInLinkingDifferentDevice",{G:n,F:r}),this.i=e}function mh(t){hc.call(this,Ec,void 0,t,"blank")}function gh(t,n,r,i,o){var a=new mh,s=new Gt(r),u=s.a.a.get(Qt.ab)||"",c=s.a.a.get(Qt.Ta)||"",l="1"===s.a.a.get(Qt.Ra),h=Wt(s),f=s.a.a.get(Qt.PROVIDER_ID)||null;s=s.a.a.get(Qt.xb)||null,mf(t,s);var d=!aa(ia,af(t)),p=i||function(t,e){var n=null;if(e=aa(ia,e))try{var r=Ro(t,e),i=JSON.parse(r);n=i&&i.email||null}catch(t){}return n}(c,af(t)),m=(i=function(t,e){var n=null;if(e=aa(oa,e))try{var r=Ro(t,e);n=JSON.parse(r)}catch(t){}return ho(n||null)}(c,af(t)))&&i.a;f&&m&&m.providerId!==f&&(m=null),a.render(n),tf(t,a),df(t,a.K((function(){var e=Qr(null);e=h&&d||d&&l?Yr(Error("anonymous-user-not-found")):function(t,e){var n=Wt(new Gt(e));return n?(e=new $r((function(e,r){var i=of(t).onAuthStateChanged((function(t){i(),t&&t.isAnonymous&&t.uid===n?e(t):t&&t.isAnonymous&&t.uid!==n?r(Error("anonymous-user-mismatch")):r(Error("anonymous-user-not-found"))}));df(t,i)})),df(t,e),e):Qr(null)}(t,r).then((function(t){if(f&&!m)throw Error("pending-credential-not-found");return t}));var n=null;return e.then((function(e){return n=e,o?null:rf(t).checkActionCode(u)})).then((function(){return n}))}),[],(function(i){p?function(t,n,r,i,o,a){var s=fc(n);n.Z("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",vn("Signing in...").toString());var u=null;o=(a?function(t,n,r,i,o){vf(t);var a=o||null,s=e.auth.EmailAuthProvider.credentialWithLink(r,i);return r=a?rf(t).signInWithEmailLink(r,i).then((function(t){return t.user.linkWithCredential(a)})).then((function(){return bf(t)})).then((function(){return wf(t,{code:"auth/email-already-in-use"},a)})):rf(t).fetchSignInMethodsForEmail(r).then((function(e){return e.length?wf(t,{code:"auth/email-already-in-use"},s):n.linkWithCredential(s)})),df(t,r),r}(t,a,r,i,o):function(t,e,n,r){vf(t);var i,o=r||null;return e=rf(t).signInWithEmailLink(e,n).then((function(t){if(i={user:t.user,credential:null,operationType:t.operationType,additionalUserInfo:t.additionalUserInfo},o)return t.user.linkWithCredential(o).then((function(t){i={user:t.user,credential:o,operationType:i.operationType,additionalUserInfo:t.additionalUserInfo}}))})).then((function(){bf(t)})).then((function(){return of(t).updateCurrentUser(i.user)})).then((function(){return i.user=of(t).currentUser,i})),df(t,e),e}(t,r,i,o)).then((function(e){sa(oa,af(t)),sa(ia,af(t)),n.h(),n.Z("firebaseui-icon-done",vn("Signed in!").toString()),u=setTimeout((function(){n.h(),Ll(t,n,e,!0)}),1e3),df(t,(function(){n&&(n.h(),n.o()),clearTimeout(u)}))}),(function(e){if(n.h(),n.o(),!e.name||"cancel"!=e.name){var o=Ol(e);"auth/email-already-in-use"==e.code||"auth/credential-already-in-use"==e.code?(sa(oa,af(t)),sa(ia,af(t))):"auth/invalid-email"==e.code?(o=vn("The email provided does not match the current sign-in session.").toString(),Ts("emailLinkConfirmation",t,s,i,vh,null,o)):ql(t,s,r,o)}})),df(t,o)}(t,a,p,r,m,i):l?(a.o(),Ts("differentDeviceError",t,n)):(a.o(),Ts("emailLinkConfirmation",t,n,r,vh))}),(function(e){var i=void 0;if(!e||!e.name||"cancel"!=e.name)switch(a.o(),e&&e.message){case"anonymous-user-not-found":Ts("differentDeviceError",t,n);break;case"anonymous-user-mismatch":Ts("anonymousUserMismatch",t,n);break;case"pending-credential-not-found":Ts("emailLinkNewDeviceLinking",t,n,r,yh);break;default:e&&(i=Ol(e)),ql(t,n,void 0,i)}})))}function vh(t,e,n,r){gh(t,e,r,n,!0)}function yh(t,e,n){gh(t,e,n)}function bh(t,e,n,r,i,o){hc.call(this,Cc,{email:t,ga:e},o,"emailLinkSignInLinking",{G:r,F:i}),this.i=n}function wh(t,e,n,r,i,o){hc.call(this,Tc,{email:t},o,"emailLinkSignInSent",{G:r,F:i}),this.u=e,this.i=n}function _h(t,e,n,r,i,o,a){hc.call(this,Gc,{ic:t,Pb:e},a,"emailMismatch",{G:i,F:o}),this.l=n,this.i=r}function Eh(t,e,n,r,i){hc.call(this,Sc,void 0,i,"emailNotReceived",{G:n,F:r}),this.l=t,this.i=e}function Th(t,e,n,r,i,o){hc.call(this,Mc,{email:t,ga:e},o,"federatedLinking",{G:r,F:i}),this.i=n}function Sh(t,e,n,r,i,o){hc.call(this,yc,{email:n,Ua:!!e},o,"passwordRecovery",{G:r,F:i}),this.l=t,this.u=e}function xh(){return Iu(this,"firebaseui-id-name")}function Ih(){return Iu(this,"firebaseui-id-name-error")}function kh(t,e,n,r,i,o,a,s,u){hc.call(this,vc,{email:r,Sb:t,name:i,Ua:!!n,ia:!!s},u,"passwordSignUp",{G:o,F:a}),this.B=e,this.J=n,this.D=t}function Ah(t,n){var r=Xa(gf(t)),i=n.j(),o=null;r&&(o=n.P());var a=n.S();if(i){if(r){if(!o)return void n.u().focus();o=ut(o)}if(a){var s=e.auth.EmailAuthProvider.credential(i,a);df(t,n.K(C(t.Xb,t),[i,a],(function(e){var i={user:e.user,credential:s,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo};return r?(e=e.user.updateProfile({displayName:o}).then((function(){return Ll(t,n,i)})),df(t,e),e):Ll(t,n,i)}),(function(e){if(!e.name||"cancel"!=e.name){var r=Ol(e);switch(e.code){case"auth/email-already-in-use":return function(t,e,n,r){function i(){var t=Ol(r);Cu(e.i(),!1),Du(e.U(),t),e.i().focus()}var o=rf(t).fetchSignInMethodsForEmail(n).then((function(r){r.length?i():(r=fc(e),e.o(),Ts("passwordRecovery",t,r,n,!1,Un().toString()))}),(function(){i()}));return df(t,o),o}(t,n,i,e);case"auth/too-many-requests":r=vn("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Cu(n.l(),!1),Du(n.ba(),r);break;default:Ji(e="setAccountInfo: "+Bo(e),void 0),n.a(r)}}})))}else n.l().focus()}else n.i().focus()}function Ch(){return Iu(this,"firebaseui-id-phone-confirmation-code")}function Nh(){return Iu(this,"firebaseui-id-phone-confirmation-code-error")}function Mh(){return Iu(this,"firebaseui-id-resend-countdown")}function Ph(t,e,n,r,i,o,a,s,u){hc.call(this,Zc,{phoneNumber:i},u,"phoneSignInFinish",{G:a,F:s}),this.kb=o,this.i=new nu(1e3),this.D=o,this.S=t,this.l=e,this.J=n,this.P=r}s(Zl,hc),Zl.prototype.v=function(){var t=this;Pu(this,this.l(),(function(){t.i()})),this.l().focus(),hc.prototype.v.call(this)},Zl.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(Zl.prototype,{l:tl}),Es.anonymousUserMismatch=function(t,e){var n=new Zl((function(){n.o(),ql(t,e)}));n.render(e),tf(t,n)},s(Ql,hc),Ql.prototype.K=function(t,e,n,r){return t.apply(null,e).then(n,r)},Es.callback=function(t,e,n){var r=new Ql;r.render(e),tf(t,r),e=n||Xh(t),df(t,e.then((function(e){Yl(t,r,e)}),(function(e){if(e&&("auth/account-exists-with-different-credential"==e.code||"auth/email-already-in-use"==e.code)&&e.email&&e.credential)ma(new lo(e.email,e.credential),af(t)),th(t,r,e.email);else if(e&&"auth/user-cancelled"==e.code){var n=da(af(t)),i=Ol(e);n&&n.a?th(t,r,n.f,i):n?Vl(t,r,n.f,i):Xl(t,r,e)}else e&&"auth/credential-already-in-use"==e.code||(e&&"auth/operation-not-supported-in-this-environment"==e.code&&Fl(t)?Yl(t,r,{user:null,credential:null}):Xl(t,r,e))})))},s(eh,hc),eh.prototype.v=function(){var t=this;Pu(this,this.l(),(function(){t.i()})),this.l().focus(),hc.prototype.v.call(this)},eh.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(eh.prototype,{l:tl}),Es.differentDeviceError=function(t,e){var n=new eh((function(){n.o(),ql(t,e)}));n.render(e),tf(t,n)},s(nh,hc),nh.prototype.v=function(){var t=this;Pu(this,Iu(this,"firebaseui-id-reset-password-link"),(function(){t.l()})),this.i&&(this.B(this.i),this.u().focus()),hc.prototype.v.call(this)},nh.prototype.m=function(){this.l=this.i=null,hc.prototype.m.call(this)},M(nh.prototype,{u:Xc,D:tl,B:el}),s(ch,hc),ch.prototype.v=function(){this.J(),this.D(this.l),pc(this,this.i(),this.l),this.i().focus(),hc.prototype.v.call(this)},ch.prototype.m=function(){this.l=null,hc.prototype.m.call(this)},M(ch.prototype,{i:rh,B:ah,P:ih,J:sh,u:uh,U:Xc,S:tl,D:el}),s(lh,hc),lh.prototype.v=function(){var t=this;Pu(this,Iu(this,"firebaseui-id-reset-password-link"),(function(){t.l()})),this.i&&(this.B(this.i),this.u().focus()),hc.prototype.v.call(this)},lh.prototype.m=function(){this.l=this.i=null,hc.prototype.m.call(this)},M(lh.prototype,{u:Xc,D:tl,B:el}),Es.passwordReset=function(t,e,n,r){df(t,rf(t).verifyPasswordResetCode(n).then((function(i){var o=new ch(i,(function(){!function(t,e,n,r,i){var o=n.u();o&&df(t,n.K(C(rf(t).confirmPasswordReset,rf(t)),[r,o],(function(){n.o();var r=new El(i);r.render(e),tf(t,r)}),(function(r){hh(t,e,n,r)})))}(t,e,o,n,r)}));o.render(e),tf(t,o)}),(function(){hh(t,e)})))},Es.emailChangeRevocation=function(t,e,n){var r=null;df(t,rf(t).checkActionCode(n).then((function(e){return r=e.data.email,rf(t).applyActionCode(n)})).then((function(){!function(t,e,n){var r=new nh(n,(function(){df(t,r.K(C(rf(t).sendPasswordResetEmail,rf(t)),[n],(function(){r.o(),(r=new ml(n,void 0,Ya(gf(t)),Ja(gf(t)))).render(e),tf(t,r)}),(function(){r.a(On().toString())})))}));r.render(e),tf(t,r)}(t,e,r)}),(function(){var n=new Sl;n.render(e),tf(t,n)})))},Es.emailVerification=function(t,e,n,r){df(t,rf(t).applyActionCode(n).then((function(){var n=new gl(r);n.render(e),tf(t,n)}),(function(){var n=new vl;n.render(e),tf(t,n)})))},Es.revertSecondFactorAddition=function(t,e,n){var r=null,i=null;df(t,rf(t).checkActionCode(n).then((function(e){return r=e.data.email,i=e.data.multiFactorInfo,rf(t).applyActionCode(n)})).then((function(){!function(t,e,n,r){var i=new lh(r.factorId,(function(){i.K(C(rf(t).sendPasswordResetEmail,rf(t)),[n],(function(){i.o(),(i=new ml(n,void 0,Ya(gf(t)),Ja(gf(t)))).render(e),tf(t,i)}),(function(){i.a(On().toString())}))}),r.phoneNumber);i.render(e),tf(t,i)}(t,e,r,i)}),(function(){var n=new wl;n.render(e),tf(t,n)})))},Es.verifyAndChangeEmail=function(t,e,n,r){var i=null;df(t,rf(t).checkActionCode(n).then((function(e){return i=e.data.email,rf(t).applyActionCode(n)})).then((function(){var n=new yl(i,r);n.render(e),tf(t,n)}),(function(){var n=new bl;n.render(e),tf(t,n)})))},s(dh,hc),dh.prototype.v=function(){this.B(this.l),this.D(this.l,this.u),this.i().focus(),fh(this.i(),(this.i().value||"").length),hc.prototype.v.call(this)},dh.prototype.m=function(){this.u=this.l=null,hc.prototype.m.call(this)},M(dh.prototype,{i:ul,P:cl,B:ll,J:hl,j:fl,U:Xc,S:tl,D:el}),Es.emailLinkConfirmation=function(t,e,n,r,i,o){var a=new dh((function(){var i=a.j();i?(a.o(),r(t,e,i,n)):a.i().focus()}),(function(){a.o(),ql(t,e,i||void 0)}),i||void 0,Ya(gf(t)),Ja(gf(t)));a.render(e),tf(t,a),o&&a.a(o)},s(ph,hc),ph.prototype.v=function(){this.u(this.i),this.l().focus(),hc.prototype.v.call(this)},ph.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(ph.prototype,{l:Xc,u:el}),Es.emailLinkNewDeviceLinking=function(t,e,n,r){var i=new Gt(n);if(n=i.a.a.get(Qt.PROVIDER_ID)||null,Kt(i,null),n){var o=new ph(Ha(gf(t),n),(function(){o.o(),r(t,e,i.toString())}),Ya(gf(t)),Ja(gf(t)));o.render(e),tf(t,o)}else ql(t,e)},s(mh,hc),Es.emailLinkSignInCallback=gh,s(bh,hc),bh.prototype.v=function(){this.u(this.i),this.l().focus(),hc.prototype.v.call(this)},bh.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(bh.prototype,{l:Xc,u:el}),Es.emailLinkSignInLinking=function(t,e,n){var r=da(af(t));if(pa(af(t)),r){var i=r.a.providerId,o=new bh(n,Ha(gf(t),i),(function(){!function(t,e,n,r){var i=fc(e);zl(t,e,n,(function(){ql(t,i,n)}),(function(r){if(!r.name||"cancel"!=r.name){var o=Ol(r);r&&"auth/network-request-failed"==r.code?e.a(o):(e.o(),ql(t,i,n,o))}}),r)}(t,o,n,r)}),Ya(gf(t)),Ja(gf(t)));o.render(e),tf(t,o)}else ql(t,e)},s(wh,hc),wh.prototype.v=function(){var t=this;Pu(this,this.l(),(function(){t.i()})),Pu(this,Iu(this,"firebaseui-id-trouble-getting-email-link"),(function(){t.u()})),this.l().focus(),hc.prototype.v.call(this)},wh.prototype.m=function(){this.i=this.u=null,hc.prototype.m.call(this)},M(wh.prototype,{l:tl}),Es.emailLinkSignInSent=function(t,e,n,r,i){var o=new wh(n,(function(){o.o(),Ts("emailNotReceived",t,e,n,r,i)}),(function(){o.o(),r()}),Ya(gf(t)),Ja(gf(t)));o.render(e),tf(t,o)},s(_h,hc),_h.prototype.v=function(){this.B(this.l,this.i),this.u().focus(),hc.prototype.v.call(this)},_h.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(_h.prototype,{u:Xc,D:tl,B:el}),Es.emailMismatch=function(t,e,n){var r=da(af(t));if(r){var i=new _h(n.user.email,r.f,(function(){var e=i;pa(af(t)),Ll(t,e,n)}),(function(){var e=n.credential.providerId,o=fc(i);i.o(),r.a?Ts("federatedLinking",t,o,r.f,e):Ts("federatedSignIn",t,o,r.f,e)}),Ya(gf(t)),Ja(gf(t)));i.render(e),tf(t,i)}else ql(t,e)},s(Eh,hc),Eh.prototype.v=function(){var t=this;Pu(this,this.u(),(function(){t.i()})),Pu(this,this.Ba(),(function(){t.l()})),this.u().focus(),hc.prototype.v.call(this)},Eh.prototype.Ba=function(){return Iu(this,"firebaseui-id-resend-email-link")},Eh.prototype.m=function(){this.i=this.l=null,hc.prototype.m.call(this)},M(Eh.prototype,{u:tl}),Es.emailNotReceived=function(t,e,n,r,i){var o=new Eh((function(){zl(t,o,n,r,(function(t){t=Ol(t),o.a(t)}),i)}),(function(){o.o(),ql(t,e,n)}),Ya(gf(t)),Ja(gf(t)));o.render(e),tf(t,o)},s(Th,hc),Th.prototype.v=function(){this.u(this.i),this.l().focus(),hc.prototype.v.call(this)},Th.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(Th.prototype,{l:Xc,u:el}),Es.federatedLinking=function(t,e,n,r,i){var o=da(af(t));if(o&&o.a){var a=new Th(n,Ha(gf(t),r),(function(){Bl(t,a,r,n)}),Ya(gf(t)),Ja(gf(t)));a.render(e),tf(t,a),i&&a.a(i)}else ql(t,e)},Es.federatedRedirect=function(t,e,n){var r=new mh;r.render(e),tf(t,r),Bl(t,r,e=za(gf(t))[0],n)},Es.federatedSignIn=function(t,e,n,r,i){var o=new Th(n,Ha(gf(t),r),(function(){Bl(t,o,r,n)}),Ya(gf(t)),Ja(gf(t)));o.render(e),tf(t,o),i&&o.a(i)},Es.passwordLinking=function(t,e,n){var r=da(af(t));pa(af(t));var i=r&&r.a;if(i){var o=new al(n,(function(){!function(t,e,n,r){var i=e.u();i?df(t,e.K(C(t.Wb,t),[n,i],(function(n){return n=n.user.linkWithCredential(r).then((function(n){return Ll(t,e,{user:n.user,credential:r,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})})),df(t,n),n}),(function(t){if(!t.name||"cancel"!=t.name)switch(t.code){case"auth/wrong-password":Cu(e.i(),!1),Du(e.D(),Ol(t));break;case"auth/too-many-requests":e.a(Ol(t));break;default:Ji("signInWithEmailAndPassword: "+t.message,void 0),e.a(Ol(t))}}))):e.i().focus()}(t,o,n,i)}),(function(){o.o(),Ts("passwordRecovery",t,e,n)}),Ya(gf(t)),Ja(gf(t)));o.render(e),tf(t,o)}else ql(t,e)},s(Sh,hc),Sh.prototype.v=function(){this.D(),this.J(this.l,this.u),Gs(this.i())||this.i().focus(),pc(this,this.i(),this.l),hc.prototype.v.call(this)},Sh.prototype.m=function(){this.u=this.l=null,hc.prototype.m.call(this)},M(Sh.prototype,{i:ul,B:cl,D:ll,P:hl,j:fl,U:Xc,S:tl,J:el}),Es.passwordRecovery=function(t,e,n,r,i){var o=new Sh((function(){!function(t,e){var n=e.j();if(n){var r=fc(e);df(t,e.K(C(rf(t).sendPasswordResetEmail,rf(t)),[n],(function(){e.o();var i=new ml(n,(function(){i.o(),ql(t,r)}),Ya(gf(t)),Ja(gf(t)));i.render(r),tf(t,i)}),(function(t){Cu(e.i(),!1),Du(e.B(),Ol(t))})))}else e.i().focus()}(t,o)}),r?void 0:function(){o.o(),ql(t,e)},n,Ya(gf(t)),Ja(gf(t)));o.render(e),tf(t,o),i&&o.a(i)},Es.passwordSignIn=function(t,n,r,i){var o=new dl((function(){!function(t,n){var r=n.j(),i=n.u();if(r)if(i){var o=e.auth.EmailAuthProvider.credential(r,i);df(t,n.K(C(t.ac,t),[r,i],(function(e){return Ll(t,n,{user:e.user,credential:o,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo})}),(function(t){if(!t.name||"cancel"!=t.name)switch(t.code){case"auth/email-already-in-use":break;case"auth/email-exists":Cu(n.l(),!1),Du(n.U(),Ol(t));break;case"auth/too-many-requests":case"auth/wrong-password":Cu(n.i(),!1),Du(n.D(),Ol(t));break;default:Ji("verifyPassword: "+t.message,void 0),n.a(Ol(t))}})))}else n.i().focus();else n.l().focus()}(t,o)}),(function(){var e=o.P();o.o(),Ts("passwordRecovery",t,n,e)}),r,Ya(gf(t)),Ja(gf(t)),i);o.render(n),tf(t,o)},s(kh,hc),kh.prototype.v=function(){this.ea(),this.D&&this.Ja(),this.ua(),this.pa(this.B,this.J),this.D?(dc(this,this.i(),this.u()),dc(this,this.u(),this.l())):dc(this,this.i(),this.l()),this.B&&pc(this,this.l(),this.B),Gs(this.i())?this.D&&!Gs(this.u())?this.u().focus():this.l().focus():this.i().focus(),hc.prototype.v.call(this)},kh.prototype.m=function(){this.J=this.B=null,hc.prototype.m.call(this)},M(kh.prototype,{i:ul,U:cl,ea:ll,kb:hl,j:fl,u:xh,Ac:Ih,Ja:function(){var t=xh.call(this),e=Ih.call(this);Nu(this,t,(function(){Ru(e)&&(Cu(t,!0),Lu(e))}))},P:function(){var t=xh.call(this),e=Ih.call(this),n=Gs(t);return Cu(t,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(Lu(e),e=!0):(Du(e,vn("Enter your account name").toString()),e=!1),e?X(Gs(t)):null},l:rh,ba:ah,mb:ih,ua:sh,S:uh,Mb:Xc,Lb:tl,pa:el}),Es.passwordSignUp=function(t,e,n,r,i,o){var a=new kh(Xa(gf(t)),(function(){Ah(t,a)}),i?void 0:function(){a.o(),ql(t,e)},n,r,Ya(gf(t)),Ja(gf(t)),o);a.render(e),tf(t,a)},s(Ph,hc),Ph.prototype.v=function(){var t=this;this.U(this.kb),ur(this.i,"tick",this.B,!1,this),this.i.start(),Pu(this,Iu(this,"firebaseui-id-change-phone-number-link"),(function(){t.S()})),Pu(this,this.Ba(),(function(){t.P()})),this.Ja(this.l),this.ea(this.l,this.J),this.u().focus(),hc.prototype.v.call(this)},Ph.prototype.m=function(){this.P=this.J=this.l=this.S=null,ru(this.i),hr(this.i,"tick",this.B),this.i=null,hc.prototype.m.call(this)},Ph.prototype.B=function(){--this.D,0<this.D?this.U(this.D):(ru(this.i),hr(this.i,"tick",this.B),this.ua(),this.mb())},M(Ph.prototype,{u:Ch,pa:Nh,Ja:function(t){var e=Ch.call(this),n=Nh.call(this);Nu(this,e,(function(){Ru(n)&&(Cu(e,!0),Lu(n))})),t&&Mu(this,e,(function(){t()}))},ba:function(){var t=X(Gs(Ch.call(this))||"");return/^\d{6}$/.test(t)?t:null},Eb:Mh,U:function(t){en(Mh.call(this),vn("Resend code in "+(9<t?"0:":"0:0")+t).toString())},ua:function(){Lu(this.Eb())},Ba:function(){return Iu(this,"firebaseui-id-resend-link")},mb:function(){Du(this.Ba())},Mb:Xc,Lb:tl,ea:el}),Es.phoneSignInFinish=function(t,e,n,r,i,o){var a=new Ph((function(){a.o(),Ts("phoneSignInStart",t,e,n)}),(function(){!function(t,e,n,r){function i(t){e.u().focus(),Cu(e.u(),!1),Du(e.pa(),t)}var o=e.ba();o?(e.Z("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",vn("Verifying...").toString()),df(t,e.K(C(r.confirm,r),[o],(function(n){e.h(),e.Z("firebaseui-icon-done",vn("Verified!").toString());var r=setTimeout((function(){e.h(),e.o();var r={user:of(t).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};Ll(t,e,r,!0)}),1e3);df(t,(function(){e&&e.h(),clearTimeout(r)}))}),(function(r){if(r.name&&"cancel"==r.name)e.h();else{var o=Ol(r);switch(r.code){case"auth/credential-already-in-use":e.h();break;case"auth/code-expired":r=fc(e),e.h(),e.o(),Ts("phoneSignInStart",t,r,n,o);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":e.h(),i(o);break;default:e.h(),e.a(o)}}})))):i(vn("Wrong code. Try again.").toString())}(t,a,n,i)}),(function(){a.o(),ql(t,e)}),(function(){a.o(),Ts("phoneSignInStart",t,e,n)}),Da(n),r,Ya(gf(t)),Ja(gf(t)));a.render(e),tf(t,a),o&&a.a(o)};var Lh=!(oe||Xt("Safari")&&!(te()||Xt("Coast")||Xt("Opera")||Xt("Edge")||Xt("Firefox")||Xt("FxiOS")||Xt("Silk")||Xt("Android")));function Dh(t,e){return/-[a-z]/.test(e)?null:Lh&&t.dataset?!Xt("Android")||te()||Xt("Firefox")||Xt("FxiOS")||Xt("Opera")||Xt("Silk")||e in t.dataset?void 0===(t=t.dataset[e])?null:t:null:t.getAttribute("data-"+String(e).replace(/([A-Z])/g,"-$1").toLowerCase())}function Rh(t,e,n){var r=this;t=ln(Qu,{items:t},null,this.s),rc.call(this,t,!0,!0),n&&(n=function(t,e){t=(t||document).getElementsByTagName("BUTTON");for(var n=0;n<t.length;n++)if(Dh(t[n],"listboxid")===e)return t[n];return null}(t,n))&&(n.focus(),function(t,e){var n=(e=e||Je(document))||Je(document),r=_u(t),i=_u(n);if(!oe||9<=Number(ge)){a=bu(n,"borderLeftWidth");var o=bu(n,"borderRightWidth");s=bu(n,"borderTopWidth"),u=bu(n,"borderBottomWidth"),o=new yu(parseFloat(s),parseFloat(o),parseFloat(u),parseFloat(a))}else{var a=Tu(n,"borderLeft");o=Tu(n,"borderRight");var s=Tu(n,"borderTop"),u=Tu(n,"borderBottom");o=new yu(s,o,u,a)}n==Je(document)?(a=r.a-n.scrollLeft,r=r.f-n.scrollTop,!oe||10<=Number(ge)||(a+=o.left,r+=o.top)):(a=r.a-i.a-o.left,r=r.f-i.f-o.top),i=t.offsetWidth,o=t.offsetHeight,s=ce&&!i&&!o,p(i)&&!s||!t.getBoundingClientRect?t=new Ge(i,o):t=new Ge((t=wu(t)).right-t.left,t.bottom-t.top),i=n.clientHeight-t.height,o=n.scrollLeft,s=n.scrollTop,n=new He(o+=Math.min(a,Math.max(a-(n.clientWidth-t.width),0)),s+=Math.min(r,Math.max(r-i,0))),e.scrollLeft=n.a,e.scrollTop=n.f}(n,t)),Pu(this,t,(function(t){(t=(t=nn(t.target,"firebaseui-id-list-box-dialog-button"))&&Dh(t,"listboxid"))&&(ic.call(r),e(t))}))}function Oh(){return Iu(this,"firebaseui-id-phone-number")}function Bh(){return Iu(this,"firebaseui-id-country-selector")}function Uh(){return Iu(this,"firebaseui-id-phone-number-error")}function Fh(t,e){var n=t.a,r=jh("1-US-0",n),i=null;if(!(i=e&&jh(e,n)?e:r?"1-US-0":0<n.length?n[0].c:null))throw Error("No available default country");$h.call(this,i,t)}function jh(t,e){return!(!(t=Ia(t))||!H(e,t))}function qh(t){return"firebaseui-flag-"+t.g}function Vh(t){var e=this;Rh.call(this,function(t){return V(t,(function(t){return{id:t.c,Ma:"firebaseui-flag "+qh(t),label:t.name+" ‎+"+t.b}}))}(t.a),(function(n){$h.call(e,n,t,!0),e.N().focus()}),this.Aa)}function $h(t,e,n){var r=Ia(t);r&&(n&&((e=xa(e,n=X(Gs(Oh.call(this))||""))).length&&e[0].b!=r.b&&(n="+"+r.b+n.substr(e[0].b.length+1),Ws(Oh.call(this),n))),e=Ia(this.Aa),this.Aa=t,t=Iu(this,"firebaseui-id-country-selector-flag"),e&&Hs(t,qh(e)),zs(t,qh(r)),en(Iu(this,"firebaseui-id-country-selector-code"),"‎+"+r.b))}function zh(t,e,n,r,i,o,a,s,u,c){hc.call(this,Kc,{Fb:e,za:u||null,Wa:!!n,ia:!!o},c,"phoneSignInStart",{G:r,F:i}),this.J=s||null,this.P=e,this.l=t,this.B=n||null,this.pa=a||null}function Hh(t,e,n,r){try{var i=e.U(hs)}catch(t){return}i?cs?(e.Z("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",vn("Verifying...").toString()),df(t,e.K(C(t.bc,t),[Da(i),n],(function(n){var r=fc(e);e.Z("firebaseui-icon-done",vn("Code sent!").toString());var o=setTimeout((function(){e.h(),e.o(),Ts("phoneSignInFinish",t,r,i,15,n)}),1e3);df(t,(function(){e&&e.h(),clearTimeout(o)}))}),(function(t){if(e.h(),!t.name||"cancel"!=t.name){grecaptcha.reset(fs),cs=null;var n=t&&t.message||"";if(t.code)switch(t.code){case"auth/too-many-requests":n=vn("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return e.N().focus(),void Du(e.D(),Rn().toString());default:n=Ol(t)}e.a(n)}})))):ls?Du(e.u(),vn("Solve the reCAPTCHA").toString()):!ls&&r&&e.i().click():(e.N().focus(),Du(e.D(),Rn().toString()))}function Gh(t,e,n,r,i){hc.call(this,Wc,{Rb:e},i,"providerSignIn",{G:n,F:r}),this.i=t}function Wh(t,e,n,r,i,o,a){hc.call(this,mc,{email:n,Wa:!!e,ia:!!o},a,"signIn",{G:r,F:i}),this.i=t,this.u=e}function Kh(t,e,n,r,i,o){hc.call(this,Pc,{email:t},o,"unsupportedProvider",{G:r,F:i}),this.l=e,this.i=n}function Zh(t,n){this.Z=!1;var r=Jh(n);if(Yh[r])throw Error('An AuthUI instance already exists for the key "'+r+'"');Yh[r]=this,this.f=t,this.u=null,this.X=!1,Qh(this.f),this.a=e.initializeApp({apiKey:t.app.options.apiKey,authDomain:t.app.options.authDomain},t.app.name+"-firebaseui-temp").auth(),Qh(this.a),this.a.setPersistence&&this.a.setPersistence(e.auth.Auth.Persistence.SESSION),this.oa=n,this.ca=new Ua,this.h=this.O=this.i=this.I=this.N=null,this.s=[],this.Y=!1,this.l=Ci.Ya(),this.j=this.C=null,this.da=this.w=!1}function Qh(t){t&&t.INTERNAL&&t.INTERNAL.logFramework&&t.INTERNAL.logFramework("FirebaseUI-web")}s(zh,hc),zh.prototype.v=function(){this.ea(this.pa,this.J),this.S(this.l,this.B||void 0),this.P||dc(this,this.N(),this.i()),pc(this,this.i(),this.l),this.N().focus(),fh(this.N(),(this.N().value||"").length),hc.prototype.v.call(this)},zh.prototype.m=function(){this.B=this.l=null,hc.prototype.m.call(this)},M(zh.prototype,{Db:oc,N:Oh,D:Uh,ea:function(t,e,n){var r=this,i=Oh.call(this),o=Bh.call(this),a=Uh.call(this),s=t||Ma,u=s.a;if(0==u.length)throw Error("No available countries provided.");Fh.call(r,s,e),Pu(this,o,(function(){Vh.call(r,s)})),Nu(this,i,(function(){Ru(a)&&(Cu(i,!0),Lu(a));var t=X(Gs(i)||""),e=Ia(this.Aa),n=xa(s,t);t=jh("1-US-0",u),n.length&&n[0].b!=e.b&&(e=n[0],$h.call(r,"1"==e.b&&t?"1-US-0":e.c,s))})),n&&Mu(this,i,(function(){n()}))},U:function(t){var e=X(Gs(Oh.call(this))||""),n=(t=t||Ma).a,r=xa(Ma,e);if(r.length&&!H(n,r[0]))throw Ws(Oh.call(this)),Oh.call(this).focus(),Du(Uh.call(this),vn("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=Ia(this.Aa),r.length&&r[0].b!=n.b&&$h.call(this,r[0].c,t),r.length&&(e=e.substr(r[0].b.length+1)),e?new Pa(this.Aa,e):null},Ja:Bh,ba:function(){return Iu(this,"firebaseui-recaptcha-container")},u:function(){return Iu(this,"firebaseui-id-recaptcha-error")},i:Xc,ua:tl,S:el}),Es.phoneSignInStart=function(t,n,r,i){var o=function(t){var n=null;if(j(Va(t),(function(t){t.provider==e.auth.PhoneAuthProvider.PROVIDER_ID&&S(t.recaptchaParameters)&&!_(t.recaptchaParameters)&&(n=lt(t.recaptchaParameters))})),n){var r=[];j(_s,(function(t){void 0!==n[t]&&(r.push(t),delete n[t])})),r.length&&no('The following provided "recaptchaParameters" keys are not allowed: '+r.join(", "))}return n}(gf(t))||{};cs=null,ls=!(o&&"invisible"===o.size);var a=jl(t),s=function(t){var n=(t=$a(t,e.auth.PhoneAuthProvider.PROVIDER_ID))&&t.defaultCountry||null;n=n&&ka(n);var r=null;return t&&"string"==typeof t.loginHint&&(r=La(t.loginHint)),n&&n[0]||r&&Ia(r.a)||null}(gf(t)),u=a?function(t){var n=null;return(t=$a(t,e.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"==typeof t.loginHint&&(n=La(t.loginHint)),t&&t.defaultNationalNumber||n&&n.za||null}(gf(t)):null;s=r&&r.a||s&&s.c||null,r=r&&r.za||u,(u=Za(gf(t)))&&Ca(u),hs=u?new Sa(Za(gf(t))):Ma;var c=new zh((function(e){Hh(t,c,l,!(!e||!e.keyCode))}),ls,a?null:function(){l.clear(),c.o(),ql(t,n)},Ya(gf(t)),Ja(gf(t)),a,hs,s,r);c.render(n),tf(t,c),i&&c.a(i),o.callback=function(e){c.u()&&Lu(c.u()),cs=e,ls||Hh(t,c,l)},o["expired-callback"]=function(){cs=null};var l=new e.auth.RecaptchaVerifier(ls?c.ba():c.i(),o,of(t).app);df(t,c.K(C(l.render,l),[],(function(t){fs=t}),(function(e){e.name&&"cancel"==e.name||(e=Ol(e),c.o(),ql(t,n,void 0,e))})))},Es.prefilledEmailSignIn=function(t,e,n){var r=new mh;r.render(e),tf(t,r),df(t,r.K(C(rf(t).fetchSignInMethodsForEmail,rf(t)),[n],(function(i){r.o();var o=!(!Fl(t)||!sf(t));$l(t,e,i,n,void 0,void 0,o)}),(function(i){i=Ol(i),r.o(),Ts("signIn",t,e,n,i)})))},s(Gh,hc),Gh.prototype.v=function(){this.l(this.i),hc.prototype.v.call(this)},Gh.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(Gh.prototype,{l:function(t){function e(e){t(e)}for(var n=this.f?Ke("firebaseui-id-idp-button",this.f||this.s.a):[],r=0;r<n.length;r++){var i=n[r];Pu(this,i,N(e,Dh(i,"providerId")))}}}),Es.providerSignIn=function(t,n,r,i){var o=new Gh((function(r){r==e.auth.EmailAuthProvider.PROVIDER_ID?(o.o(),Hl(t,n,i)):r==e.auth.PhoneAuthProvider.PROVIDER_ID?(o.o(),Ts("phoneSignInStart",t,n)):"anonymous"==r?function(t,e){df(t,e.K(C(t.Zb,t),[],(function(n){return e.o(),Ll(t,e,n,!0)}),(function(t){t.name&&"cancel"==t.name||(Ji("ContinueAsGuest: "+t.code,void 0),t=Ol(t),e.a(t))})))}(t,o):Bl(t,o,r,i),vf(t),t.l.cancel()}),Ga(gf(t)),Ya(gf(t)),Ja(gf(t)));o.render(n),tf(t,o),r&&o.a(r),function(t){vf(t);try{(function t(e,n,r){if(e.a&&n){var i=function(){e.h=!0;var i=Promise.resolve(null);return r||(i=e.a.retrieve(n).catch((function(t){if(t.type===Pi||t.type===Mi)throw t;return null}))),i.then((function(t){return t||e.a.hint(n)})).catch((function(i){if(i.type===Pi)e.f=Promise.resolve();else if(i.type===Mi)return e.cancel(),t(e,n,r);return null}))};return e.f?e.f.then(i):i()}if(n)return i=Li.Ya().load().then((function(){return e.a=d.googleyolo,t(e,n,r)})).ta((function(){return null})),Promise.resolve(i);if("undefined"!=typeof Promise)return Promise.resolve(null);throw Error("One-Tap sign in not supported in the current browser!")})(t.l,function(t){var e=[],n=[];j(Va(t),(function(t){t.authMethod&&(e.push(t.authMethod),t.clientId&&n.push({uri:t.authMethod,clientId:t.clientId}))}));var r=null;return us(t)===ps&&e.length&&(r={supportedIdTokenProviders:n,supportedAuthMethods:e}),r}(gf(t)),function(t){var n;return vf(t),(n=t.Y)||(t=Ka(t=gf(t),e.auth.GoogleAuthProvider.PROVIDER_ID),n=!(!t||"select_account"!==t.prompt)),n}(t)).then((function(e){return!!t.h&&Ul(t,t.h,e)}))}catch(t){}}(t)},Es.sendEmailLinkForSignIn=function(t,e,n,r){var i=new Ql;i.render(e),tf(t,i),zl(t,i,n,r,(function(r){i.o(),r=Ol(r),Ts("signIn",t,e,n,r)}))},s(Wh,hc),Wh.prototype.v=function(){this.B(this.i),this.D(this.i,this.u||void 0),this.l().focus(),fh(this.l(),(this.l().value||"").length),hc.prototype.v.call(this)},Wh.prototype.m=function(){this.u=this.i=null,hc.prototype.m.call(this)},M(Wh.prototype,{l:ul,P:cl,B:ll,J:hl,j:fl,U:Xc,S:tl,D:el}),Es.signIn=function(t,e,n,r){var i=Fl(t),o=new Wh((function(){var e=o,n=e.j()||"";n&&Vl(t,e,n)}),i&&us(gf(t))!=ds?null:function(){o.o(),ql(t,e,n)},n,Ya(gf(t)),Ja(gf(t)),i);o.render(e),tf(t,o),r&&o.a(r)},s(Kh,hc),Kh.prototype.v=function(){this.B(this.l,this.i),this.u().focus(),hc.prototype.v.call(this)},Kh.prototype.m=function(){this.i=this.l=null,hc.prototype.m.call(this)},M(Kh.prototype,{u:Xc,D:tl,B:el}),Es.unsupportedProvider=function(t,e,n){var r=new Kh(n,(function(){r.o(),Ts("passwordRecovery",t,e,n)}),(function(){r.o(),ql(t,e,n)}),Ya(gf(t)),Ja(gf(t)));r.render(e),tf(t,r)};var Yh={};function Jh(t){return t||"[DEFAULT]"}function Xh(t){return vf(t),t.i||(t.i=hf(t,(function(e){return e&&!da(af(t))?Qr(of(t).getRedirectResult().then((function(t){return t}),(function(e){if(e&&"auth/email-already-in-use"==e.code&&e.email&&e.credential)throw e;return wf(t,e)}))):Qr(rf(t).getRedirectResult().then((function(e){return qa(gf(t))&&!e.user&&t.j&&!t.j.isAnonymous?of(t).getRedirectResult():e})))}))),t.i}function tf(t,e){vf(t),t.h=e}var ef=null;function nf(){return ef}function rf(t){return vf(t),t.a}function of(t){return vf(t),t.f}function af(t){return vf(t),t.oa}function sf(t){return vf(t),t.N?t.N.emailHint:void 0}function uf(t){return"signIn"===((t=new Gt(t)).a.a.get(Qt.wb)||null)&&!!t.a.a.get(Qt.ab)}function cf(t,e,n,r){vf(t),void 0!==t.f.languageCode&&(t.u=t.f.languageCode);var i="en".replace(/_/g,"-");t.f.languageCode=i,t.a.languageCode=i,t.X=!0,void 0!==t.f.tenantId&&(t.a.tenantId=t.f.tenantId),t.jb(n),t.N=r||null;var o=d.document;t.C?t.C.then((function(){"complete"==o.readyState?lf(t,e):lr(window,"load",(function(){lf(t,e)}))})):"complete"==o.readyState?lf(t,e):lr(window,"load",(function(){lf(t,e)}))}function lf(t,e){var n=hi(e,"Could not find the FirebaseUI widget element on the page.");if(n.setAttribute("lang","en".replace(/_/g,"-")),ef){var r=ef;vf(r),da(af(r))&&no("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),ef.reset()}ef=t,t.O=n,function(t,e){t.L=null,t.I=new Ar(e),t.I.register(),ur(t.I,"pageEnter",(function(e){if(e=e&&e.pageId,t.L!=e){var n=gf(t);(n=ss(n).uiChanged||null)&&n(t.L,e),t.L=e}}))}(t,n),Ho(new Go)&&Ho(new Wo)?Kl(t,e):(e=hi(e,"Could not find the FirebaseUI widget element on the page."),(n=new Il(vn("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(e),tf(t,n)),e=t.h&&"blank"==t.h.Ea&&es(gf(t)),ga(af(t))&&!e&&(mf(t,(e=ga(af(t))).a),sa(ta,af(t)))}function hf(t,e){if(t.w)return e(ff(t));if(df(t,(function(){t.w=!1})),qa(gf(t))){var n=new $r((function(n){df(t,t.f.onAuthStateChanged((function(r){t.j=r,t.w||(t.w=!0,n(e(ff(t))))})))}));return df(t,n),n}return t.w=!0,e(null)}function ff(t){return vf(t),qa(gf(t))&&t.j&&t.j.isAnonymous?t.j:null}function df(t,e){if(vf(t),e){t.s.push(e);var n=function(){K(t.s,(function(t){return t==e}))};"function"!=typeof e&&e.then(n,n)}}function pf(t){void 0!==t.f.languageCode&&t.X&&(t.X=!1,t.f.languageCode=t.u)}function mf(t,e){t.f.tenantId=e,t.a.tenantId=e}function gf(t){return vf(t),t.ca}function vf(t){if(t.Z)throw Error("AuthUI instance is deleted!")}function yf(){var t=fi();if(uf(t)){for(var e in t=new Gt(t),Qt)Qt.hasOwnProperty(e)&&Vt(t.a.a,Qt[e]);e={state:"signIn",mode:"emailLink",operation:"clear"};var n=d.document.title;d.history&&d.history.replaceState&&d.history.replaceState(e,n,t.toString())}}function bf(t){return vf(t),rf(t).signOut()}function wf(t,e,n){if(vf(t),e&&e.code&&("auth/email-already-in-use"==e.code||"auth/credential-already-in-use"==e.code)){var r=as(gf(t));return Qr().then((function(){return r(new qn("anonymous-upgrade-merge-conflict",null,n||e.credential))})).then((function(){throw t.h&&(t.h.o(),t.h=null),e}))}return Yr(e)}function _f(t,e,n,r){hc.call(this,Jc,void 0,r,"providerMatchByEmail",{G:e,F:n}),this.i=t}function Ef(t,e,n,r,i){hc.call(this,Yc,{dc:e},i,"selectTenant",{G:n,F:r}),this.i=t}function Tf(t){hc.call(this,_c,void 0,t,"spinner")}function Sf(t){for(var e in this.a=new ya,ba(this.a,"authDomain"),ba(this.a,"displayMode",Pf),ba(this.a,"tenants"),ba(this.a,"callbacks"),ba(this.a,"tosUrl"),ba(this.a,"privacyPolicyUrl"),t)if(t.hasOwnProperty(e))try{wa(this.a,e,t[e])}catch(t){Ji('Invalid config: "'+e+'"',void 0)}}function xf(t){return t.a.get("callbacks")||{}}function If(t){var e=t.a.get("tosUrl")||null;if(t=t.a.get("privacyPolicyUrl")||null,e&&!t&&no("Privacy Policy URL is missing, the link will not be displayed."),e&&t){if("function"==typeof e)return e;if("string"==typeof e)return function(){li(e)}}return null}function kf(t){var e=t.a.get("tosUrl")||null,n=t.a.get("privacyPolicyUrl")||null;if(n&&!e&&no("Terms of Service URL is missing, the link will not be displayed."),e&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){li(n)}}return null}function Af(t,e){if(!(t=t.a.get("tenants"))||!t.hasOwnProperty(e)&&!t.hasOwnProperty(Df))throw Error("Invalid tenant configuration!")}function Cf(t,e,n){if(!(t=t.a.get("tenants")))throw Error("Invalid tenant configuration!");var r=[];if(!(t=t[e]||t[Df]))return Ji("Invalid tenant configuration: "+e+" is not configured!",void 0),r;if(!(e=t.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return e.forEach((function(t){if("string"==typeof t)r.push(t);else if("string"==typeof t.provider){var e=t.hd;e&&n?(e instanceof RegExp?e:new RegExp("@"+e.replace(".","\\.")+"$")).test(n)&&r.push(t.provider):r.push(t.provider)}else Ji(t="Invalid tenant configuration: signInOption "+JSON.stringify(t)+" is invalid!",void 0)})),r}function Nf(t,e,n){return t=function(t,e){var n=Mf,r=void 0===r?{}:r;return Af(t,e),function(t,e,n){return n=void 0===n?{}:n,Object.keys(t).filter((function(t){return e.includes(t)})).reduce((function(e,n){return e[n]=t[n],e}),n)}((t=t.a.get("tenants"))[e]||t[Df],n,r)}(t,e),(e=t.signInOptions)&&n&&(e=e.filter((function(t){return"string"==typeof t?n.includes(t):n.includes(t.provider)})),t.signInOptions=e),t}(t=Zh.prototype).ob=function(){return vf(this),!!ga(af(this))||uf(fi())},t.start=function(t,e){cf(this,t,e)},t.disableAutoSignIn=function(){vf(this),this.Y=!0},t.reset=function(){vf(this);var t=this;this.O&&this.O.removeAttribute("lang"),this.I&&Ir(this.I),pf(this),this.N=null,yf(),sa(ta,af(this)),vf(this),this.l.cancel(),this.i=Qr({user:null,credential:null}),ef==this&&(ef=null),this.O=null;for(var e=0;e<this.s.length;e++)"function"==typeof this.s[e]?this.s[e]():this.s[e].cancel&&this.s[e].cancel();this.s=[],pa(af(this)),this.h&&(this.h.o(),this.h=null),this.L=null,this.a&&(this.C=bf(this).then((function(){t.C=null}),(function(){t.C=null})))},t.jb=function(t){vf(this);var e,n=this.ca;for(e in t)try{wa(n.a,e,t[e])}catch(t){Ji('Invalid config: "'+e+'"',void 0)}le&&wa(n.a,"popupMode",!1),Za(n),!this.da&&is(gf(this))&&(no("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},t.Vb=function(){vf(this);var t=gf(this),e=_a(t.a,"widgetUrl"),n=ja(t,e);gf(this).a.get("popupMode")?(n=n||"about:blank",(t={width:500,height:600,top:0<(t=(window.screen.availHeight-600)/2)?t:0,left:0<(e=(window.screen.availWidth-500)/2)?e:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=t.target||n.target||"google_popup",t.width=t.width||690,t.height=t.height||500,(t=si(n,t))&&t.focus()):ui(n)},t.Xa=function(){var t=this;return vf(this),this.a.app.delete().then((function(){var e=Jh(af(t));delete Yh[e],t.reset(),t.Z=!0}))},t.Hb=function(t,n){vf(this);var r=this,i=function(){for(var t=32,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();if(!ts(gf(this)))return Yr(Error("Email link sign-in should be enabled to trigger email sending."));var o=function(t){if(ts(t)){var n={url:fi(),handleCodeInApp:!0};return(t=$a(t,e.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof t.emailLinkSignIn&&ft(n,t.emailLinkSignIn()),n.url=Mt(fi(),n.url).toString(),n}return null}(gf(this)),a=new Gt(o.url);return function(t,e){e?t.a.a.set(Qt.Ta,e):Vt(t.a.a,Qt.Ta)}(a,i),n&&n.a&&(function(t,e,n){ua(oa,Do(t,JSON.stringify(e.aa())),n)}(i,n,af(this)),Kt(a,n.a.providerId)),function(t,e){null!==e?t.a.a.set(Qt.Ra,e?"1":"0"):Vt(t.a.a,Qt.Ra)}(a,function(t){return!(!(t=$a(t,e.auth.EmailAuthProvider.PROVIDER_ID))||!t.forceSameDevice)}(gf(this))),hf(this,(function(e){return e&&((e=e.uid)?a.a.a.set(Qt.Qa,e):Vt(a.a.a,Qt.Qa)),o.url=a.toString(),rf(r).sendSignInLinkToEmail(t,o)})).then((function(){var e=af(r),n={};n.email=t,ua(ia,Do(i,JSON.stringify(n)),e)}),(function(t){throw sa(oa,af(r)),sa(ia,af(r)),t}))},t.ac=function(t,n){vf(this);var r=this;return rf(this).signInWithEmailAndPassword(t,n).then((function(i){return hf(r,(function(o){return o?bf(r).then((function(){return wf(r,{code:"auth/email-already-in-use"},e.auth.EmailAuthProvider.credential(t,n))})):i}))}))},t.Xb=function(t,n){vf(this);var r=this;return hf(this,(function(i){if(i){var o=e.auth.EmailAuthProvider.credential(t,n);return i.linkWithCredential(o)}return rf(r).createUserWithEmailAndPassword(t,n)}))},t.$b=function(t){vf(this);var e=this;return hf(this,(function(n){return n?n.linkWithCredential(t).then((function(t){return t}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return wf(e,n,t)})):rf(e).signInWithCredential(t)}))},t.cc=function(t){vf(this);var e=this,n=this.i;return this.i=null,hf(this,(function(n){return n&&!da(af(e))?n.linkWithRedirect(t):rf(e).signInWithRedirect(t)})).then((function(){}),(function(t){throw e.i=n,t}))},t.bc=function(t,e){vf(this);var n=this;return hf(this,(function(r){return r?r.linkWithPhoneNumber(t,e).then((function(t){return new Di(t,(function(t){if("auth/credential-already-in-use"==t.code)return wf(n,t);throw t}))})):of(n).signInWithPhoneNumber(t,e).then((function(t){return new Di(t)}))}))},t.Zb=function(){return vf(this),of(this).signInAnonymously()},t.Wb=function(t,e){return vf(this),rf(this).signInWithEmailAndPassword(t,e)},s(_f,hc),_f.prototype.v=function(){this.u(this.i),this.B(this.i),this.l().focus(),fh(this.l(),(this.l().value||"").length),hc.prototype.v.call(this)},_f.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(_f.prototype,{l:ul,J:cl,u:ll,D:hl,j:fl,P:Xc,B:el}),s(Ef,hc),Ef.prototype.v=function(){!function(t,e){function n(t){e(t)}for(var r=t.f?Ke("firebaseui-id-tenant-selection-button",t.f||t.s.a):[],i=0;i<r.length;i++){var o=r[i],a=Dh(o,"tenantId");Pu(t,o,N(n,a))}}(this,this.i),hc.prototype.v.call(this)},Ef.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},s(Tf,hc);var Mf=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],Pf="optionFirst",Lf={oc:Pf,nc:"identifierFirst"},Df="*";function Rf(t,e){var n=this;this.s=hi(t),this.a={},Object.keys(e).forEach((function(t){n.a[t]=new Sf(e[t])})),this.pb=this.f=this.w=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.pb},set:function(t){this.pb=t||null},enumerable:!1})}function Of(t){t.j&&t.j.reset(),t.nb(),t.f&&t.f.o()}(t=Rf.prototype).Tb=function(t,e){var n=this;Of(this);var r=t.apiKey;return new $r((function(t,i){if(n.a.hasOwnProperty(r)){var o=xf(n.a[r]).selectTenantUiHidden||null;if(function(t){for(var e in t=t.a.get("displayMode"),Lf)if(Lf[e]===t)return Lf[e];return Pf}(n.a[r])===Pf){var a=[];e.forEach((function(t){t=t||"_";var e=n.a[r].a.get("tenants");if(!e)throw Error("Invalid tenant configuration!");(e=e[t]||e[Df])?t={tenantId:"_"!==t?t:null,displayName:e.displayName,Na:e.iconUrl,Ga:e.buttonColor}:(Ji("Invalid tenant configuration: "+t+" is not configured!",void 0),t=null),t&&a.push(t)}));var s=function(e){e={tenantId:e,providerIds:Cf(n.a[r],e||"_")},t(e)};if(1===a.length)return void s(a[0].tenantId);n.f=new Ef((function(t){Of(n),o&&o(),s(t)}),a,If(n.a[r]),kf(n.a[r]))}else n.f=new _f((function(){var i=n.f.j();if(i){for(var a=0;a<e.length;a++){var s=Cf(n.a[r],e[a]||"_",i);if(0!==s.length)return i={tenantId:e[a],providerIds:s,email:i},Of(n),o&&o(),void t(i)}n.f.a(Fn({code:"no-matching-tenant-for-email"}).toString())}}),If(n.a[r]),kf(n.a[r]));n.f.render(n.s),(i=xf(n.a[r]).selectTenantUiShown||null)&&i()}else{var u=Error("Invalid project configuration: API key is invalid!");u.code="invalid-configuration",n.qb(u),i(u)}}))},t.Ob=function(t,n){if(!this.a.hasOwnProperty(t))throw Error("Invalid project configuration: API key is invalid!");var r=n||void 0;Af(this.a[t],n||"_");try{this.i=e.app(r).auth()}catch(o){var i=this.a[t].a.get("authDomain");if(!i)throw Error("Invalid project configuration: authDomain is required!");(t=e.initializeApp({apiKey:t,authDomain:i},r)).auth().tenantId=n,this.i=t.auth()}return this.i},t.Yb=function(t,e){var n=this;return new $r((function(r,i){function o(e,r){n.j=new Zh(t),cf(n.j,n.s,e,r)}var a=t.app.options.apiKey;n.a.hasOwnProperty(a)||i(Error("Invalid project configuration: API key is invalid!"));var s=Nf(n.a[a],t.tenantId||"_",e&&e.providerIds);Of(n),i={signInSuccessWithAuthResult:function(t){return r(t),!1}};var u,c=xf(n.a[a]).signInUiShown||null,l=!1;i.uiChanged=function(e,r){null===e&&"callback"===r?((e=Ze("firebaseui-id-page-callback",n.s))&&Lu(e),n.h=new Tf,n.h.render(n.s)):l||null===e&&"spinner"===r||"blank"===r||(n.h&&(n.h.o(),n.h=null),l=!0,c&&c(t.tenantId))},s.callbacks=i,s.credentialHelper="none",e&&e.email&&(u={emailHint:e.email}),n.j?n.j.Xa().then((function(){o(s,u)})):o(s,u)}))},t.reset=function(){var t=this;return Qr().then((function(){t.j&&t.j.Xa()})).then((function(){t.j=null,Of(t)}))},t.Ub=function(){var t=this;this.h||this.w||(this.w=window.setTimeout((function(){Of(t),t.h=new Tf,t.f=t.h,t.h.render(t.s),t.w=null}),500))},t.nb=function(){window.clearTimeout(this.w),this.w=null,this.h&&(this.h.o(),this.h=null)},t.Cb=function(){return Of(this),this.f=new _l,this.f.render(this.s),Qr()},t.qb=function(t){var e,n=this,r=Fn({code:t.code}).toString()||t.message;Of(this),t.retry&&T(t.retry)&&(e=function(){n.reset(),t.retry()}),this.f=new xl(r,e),this.f.render(this.s)},t.Qb=function(t){var e=this;return Qr().then((function(){var n=e.i&&e.i.app.options.apiKey;if(!e.a.hasOwnProperty(n))throw Error("Invalid project configuration: API key is invalid!");if(Af(e.a[n],t.tenantId||"_"),!e.i.currentUser||e.i.currentUser.uid!==t.uid)throw Error("The user being processed does not match the signed in user!");return(n=xf(e.a[n]).beforeSignInSuccess||null)?n(t):t})).then((function(e){if(e.uid!==t.uid)throw Error("User with mismatching UID returned.");return e}))},D("firebaseui.auth.FirebaseUiHandler",Rf),D("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Rf.prototype.Tb),D("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Rf.prototype.Ob),D("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Rf.prototype.Yb),D("firebaseui.auth.FirebaseUiHandler.prototype.reset",Rf.prototype.reset),D("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Rf.prototype.Ub),D("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Rf.prototype.nb),D("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Rf.prototype.Cb),D("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Rf.prototype.qb),D("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Rf.prototype.Qb),D("firebaseui.auth.AuthUI",Zh),D("firebaseui.auth.AuthUI.getInstance",(function(t){return t=Jh(t),Yh[t]?Yh[t]:null})),D("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Zh.prototype.disableAutoSignIn),D("firebaseui.auth.AuthUI.prototype.start",Zh.prototype.start),D("firebaseui.auth.AuthUI.prototype.setConfig",Zh.prototype.jb),D("firebaseui.auth.AuthUI.prototype.signIn",Zh.prototype.Vb),D("firebaseui.auth.AuthUI.prototype.reset",Zh.prototype.reset),D("firebaseui.auth.AuthUI.prototype.delete",Zh.prototype.Xa),D("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Zh.prototype.ob),D("firebaseui.auth.AuthUIError",qn),D("firebaseui.auth.AuthUIError.prototype.toJSON",qn.prototype.toJSON),D("firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM",ds),D("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",ps),D("firebaseui.auth.CredentialHelper.NONE",ms),D("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),$r.prototype.catch=$r.prototype.ta,$r.prototype.finally=$r.prototype.ec}.apply(void 0!==Et?Et:"undefined"!=typeof self?self:window),"undefined"!=typeof window&&(window.dialogPolyfill=oo)}(),t.exports=firebaseui})),so=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)uo.call(n,r)&&(t[r]=n[r])}return t},uo=Object.prototype.hasOwnProperty;var co=Object.prototype.toString,lo={};function ho(t){var e=Array.isArray(t);return function(n){var r,i=fo(lo.plainArray,n);if(i)return i;if(e&&n.length!==t.length)return"an array with "+t.length+" items";for(var o=0;o<n.length;o++)if(i=fo((r=o,e?t[r]:t),n[o]))return[o].concat(i)}}function fo(t,e){if(null!=e||t.hasOwnProperty("__required")){var n=t(e);return n?Array.isArray(n)?n:[n]:void 0}}function po(t,e){var n=t.length,r=t[n-1],i=t.slice(0,n-1);return 0===i.length&&(i=["value"]),e=so(e,{path:i}),"function"==typeof r?r(e):go(e,function(t){return"must be "+function(t){if(/^an? /.test(t))return t;if(/^[aeiou]/i.test(t))return"an "+t;if(/^[a-z]/i.test(t))return"a "+t;return t}(t)+"."}(r))}function mo(t){return t.length<2?t[0]:2===t.length?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function go(t,e){return(vo(t.path)?"Item at position ":"")+(t.path.join(".")+" "+e)}function vo(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}lo.assert=function(t,e){return e=e||{},function(n){var r=fo(t,n);if(r){var i=po(r,e);throw e.apiName&&(i=e.apiName+": "+i),new Error(i)}}},lo.shape=function(t){var e,n=(e=t,Object.keys(e||{}).map((function(t){return{key:t,value:e[t]}})));return function(t){var e,r=fo(lo.plainObject,t);if(r)return r;for(var i=[],o=0;o<n.length;o++)e=n[o].key,(r=fo(n[o].value,t[e]))&&i.push([e].concat(r));return i.length<2?i[0]:function(t){i=i.map((function(e){return"- "+e[0]+": "+po(e,t).split("\n").join("\n  ")}));var e=t.path.join(".");return"The following properties"+("value"===e?"":" of "+e)+" have invalid values:\n  "+i.join("\n  ")}}},lo.strictShape=function(t){var e=lo.shape(t);return function(n){var r=e(n);if(r)return r;var i=Object.keys(n).reduce((function(e,n){return void 0===t[n]&&e.push(n),e}),[]);return 0!==i.length?function(){return"The following keys are invalid: "+i.join(", ")}:void 0}},lo.arrayOf=function(t){return ho(t)},lo.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return ho(t)},lo.required=function(t){function e(e){return null==e?function(t){return go(t,vo(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},lo.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var n=t.map((function(t){return fo(t,e)})).filter(Boolean);if(n.length===t.length)return n.every((function(t){return 1===t.length&&"string"==typeof t[0]}))?mo(n.map((function(t){return t[0]}))):n.reduce((function(t,e){return e.length>t.length?e:t}))}},lo.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},lo.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),e=t.map((function(t){return lo.equal(t)}));return lo.oneOfType.apply(this,e)},lo.range=function(t){var e=t[0],n=t[1];return function(t){if(fo(lo.number,t)||t<e||t>n)return"number between "+e+" & "+n+" (inclusive)"}},lo.any=function(){},lo.boolean=function(t){if("boolean"!=typeof t)return"boolean"},lo.number=function(t){if("number"!=typeof t)return"number"},lo.plainArray=function(t){if(!Array.isArray(t))return"array"},lo.plainObject=function(t){if(e=t,"[object Object]"!==co.call(e)||null!==(n=Object.getPrototypeOf(e))&&n!==Object.getPrototypeOf({}))return"object";var e,n},lo.string=function(t){if("string"!=typeof t)return"string"},lo.func=function(t){if("function"!=typeof t)return"function"},lo.validate=fo,lo.processMessage=po;var yo=lo;var bo=so(yo,{file:function(t){if("undefined"!=typeof window){if(t instanceof Et.Blob||t instanceof Et.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){if("boolean"==typeof t)return"date";try{var e=new Date(t);if(e.getTime&&isNaN(e.getTime()))return"date"}catch(t){return"date"}},coordinates:function(t){return yo.tuple(yo.number,yo.number)(t)},assertShape:function(t,e){return yo.assert(yo.strictShape(t),e)}});var wo=function(t,e){var n=function(t,n){return-1!==e.indexOf(t)&&void 0!==n};return"function"==typeof e&&(n=e),Object.keys(t).filter((function(e){return n(e,t[e])})).reduce((function(e,n){return e[n]=t[n],e}),{})};var _o=function(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=e(r,t[r]),n}),{})};var Eo=function(t){return _o(t,(function(t,e){return"boolean"==typeof e?JSON.stringify(e):e}))},To=xt((function(t,e){!function(n){var r=e,i=t&&t.exports==r&&t,o="object"==typeof Et&&Et;o.global!==o&&o.window!==o||(n=o);var a=function(t){this.message=t};(a.prototype=new Error).name="InvalidCharacterError";var s=function(t){throw new a(t)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,l={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,r,i,o=t.length%3,a="",c=-1,l=t.length-o;++c<l;)e=t.charCodeAt(c)<<16,n=t.charCodeAt(++c)<<8,r=t.charCodeAt(++c),a+=u.charAt((i=e+n+r)>>18&63)+u.charAt(i>>12&63)+u.charAt(i>>6&63)+u.charAt(63&i);return 2==o?(e=t.charCodeAt(c)<<8,n=t.charCodeAt(++c),a+=u.charAt((i=e+n)>>10)+u.charAt(i>>4&63)+u.charAt(i<<2&63)+"="):1==o&&(i=t.charCodeAt(c),a+=u.charAt(i>>2)+u.charAt(i<<4&63)+"=="),a},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<e;)r=u.indexOf(t.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};if(r&&!r.nodeType)if(i)i.exports=l;else for(var h in l)l.hasOwnProperty(h)&&(r[h]=l[h]);else n.base64=l}(Et)})),So={};function xo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Io=function(t){if(So[t])return So[t];var e=t.split("."),n=e[0],r=e[1];if(!r)throw new Error("Invalid token");var i=function(t){try{return JSON.parse(To.decode(t))}catch(t){throw new Error("Invalid token")}}(r),o={usage:n,user:i.u};return xo(i,"a")&&(o.authorization=i.a),xo(i,"exp")&&(o.expires=1e3*i.exp),xo(i,"iat")&&(o.created=1e3*i.iat),xo(i,"scopes")&&(o.scopes=i.scopes),xo(i,"client")&&(o.client=i.client),xo(i,"ll")&&(o.lastLogin=i.ll),xo(i,"iu")&&(o.impersonator=i.iu),So[t]=o,o},ko=xt((function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,o),!0;case 6:return l.fn.call(l.context,e,r,i,o,a),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,i);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}));function Ao(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function Co(t,e,n){if(!1===n||null===n)return t;var r=/\?/.test(t)?"&":"?",i=encodeURIComponent(e);return void 0!==n&&""!==n&&!0!==n&&(i+="="+Ao(n)),""+t+r+i}var No={appendQueryObject:function(t,e){if(!e)return t;var n=t;return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(Array.isArray(r)&&(r=r.filter((function(t){return!!t})).join(",")),n=Co(n,t,r))})),n},appendQueryParam:Co,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,(function(t,n){var r=e[n];if(void 0===r)throw new Error("Unspecified route parameter "+n);return"/"+Ao(r)})):t}},Mo="https://api.mapbox.com",Po="downloadProgress",Lo="uploadProgress",Do="error",Ro="response",Oo="HttpError",Bo="RequestAbortedError",Uo=1;function Fo(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var r=so(n,e.headers),i=Object.keys(r).reduce((function(t,e){return t[e.toLowerCase()]=r[e],t}),{});this.id=Uo++,this._options=e,this.emitter=new ko,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.headers=i}Fo.prototype.url=function(t){var e=No.prependOrigin(this.path,this.origin);e=No.appendQueryObject(e,this.query);var n=this.params,r=null==t?this.client.accessToken:t;if(r){e=No.appendQueryParam(e,"access_token",r);var i=Io(r).user;n=so({ownerId:i},n)}return e=No.interpolateRouteParams(e,n),e},Fo.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then((function(e){return t.response=e,t.emitter.emit(Ro,e),e}),(function(e){throw t.error=e,t.emitter.emit(Do,e),e}))},Fo.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},Fo.prototype.eachPage=function(t){var e=this;function n(n){t(null,n,(function(){delete e._nextPageRequest;var t=n.nextPage();t&&(e._nextPageRequest=t,i(t))}))}function r(e){t(e,null,(function(){}))}function i(t){t.send().then(n,r)}i(this)},Fo.prototype.clone=function(){return this._extend()},Fo.prototype._extend=function(t){var e=so(this._options,t);return new Fo(this.client,e)};var jo=Fo;function qo(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");Io(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||Mo}qo.prototype.createRequest=function(t){return new jo(this,t)};var Vo=qo;var $o=function(t){return t?t.split(/,\s*</).reduce((function(t,e){var n=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],r=e[2].split(";"),i=null,o=r.reduce((function(t,e){var n=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return n?"rel"===n.key?(i||(i=n.value),t):(t[n.key]=n.value,t):t}),{});return i?{url:n,rel:i,params:o}:null}(e);return n?(n.rel.split(/\s+/).forEach((function(e){t[e]||(t[e]={url:n.url,params:n.params})})),t):t}),{}):{}};function zo(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(t){this.body=e.body}this.links=$o(this.headers.link)}zo.prototype.hasNextPage=function(){return!!this.links.next},zo.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var Ho=zo;var Go=function(t){var e,n=t.type||Oo;if(t.body)try{e=JSON.parse(t.body)}catch(n){e=t.body}else e=null;var r=t.message||null;r||("string"==typeof e?r=e:e&&"string"==typeof e.message?r=e.message:n===Bo&&(r="Request aborted")),this.message=r,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e};var Wo=function(t){var e={};return t?(t.trim().split(/[\r|\n]+/).forEach((function(t){var n=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);e[n.name]=n.value})),e):e},Ko={};function Zo(t){var e=t.total,n=t.loaded;return{total:e,transferred:n,percent:100*n/e}}function Qo(t,e){return new Promise((function(n,r){e.onprogress=function(e){t.emitter.emit(Po,Zo(e))};var i=t.file;i&&(e.upload.onprogress=function(e){t.emitter.emit(Lo,Zo(e))}),e.onerror=function(t){r(t)},e.onabort=function(){var e=new Go({request:t,type:Bo});r(e)},e.onload=function(){if(delete Ko[t.id],e.status<200||e.status>=400){var i=new Go({request:t,body:e.response,statusCode:e.status});r(i)}else n(e)};var o=t.body;"string"==typeof o?e.send(o):o?e.send(JSON.stringify(o)):i?e.send(i):e.send(),Ko[t.id]=e})).then((function(e){return function(t,e){return new Ho(t,{body:e.response,headers:Wo(e.getAllResponseHeaders()),statusCode:e.status})}(t,e)}))}function Yo(t,e){var n=t.url(e),r=new window.XMLHttpRequest;return r.open(t.method,n),Object.keys(t.headers).forEach((function(e){r.setRequestHeader(e,t.headers[e])})),r}var Jo=function(t){var e=Ko[t.id];e&&(e.abort(),delete Ko[t.id])},Xo=function(t){return Promise.resolve().then((function(){var e=Yo(t,t.client.accessToken);return Qo(t,e)}))};function ta(t){Vo.call(this,t)}ta.prototype=Object.create(Vo.prototype),ta.prototype.constructor=ta,ta.prototype.sendRequest=Xo,ta.prototype.abortRequest=Jo;var ea=function(t){return new ta(t)};var na=function(t){return function(e){var n;n=Vo.prototype.isPrototypeOf(e)?e:ea(e);var r=Object.create(t);return r.client=n,r}},ra={},ia=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];ra.forwardGeocode=function(t){bo.assertShape({query:bo.required(bo.string),mode:bo.oneOf("mapbox.places","mapbox.places-permanent"),countries:bo.arrayOf(bo.string),proximity:bo.coordinates,types:bo.arrayOf(bo.oneOf(ia)),autocomplete:bo.boolean,bbox:bo.arrayOf(bo.number),limit:bo.number,language:bo.arrayOf(bo.string)})(t),t.mode=t.mode||"mapbox.places";var e=Eo(so({country:t.countries},wo(t,["proximity","types","autocomplete","bbox","limit","language"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:wo(t,["mode","query"]),query:e})},ra.reverseGeocode=function(t){bo.assertShape({query:bo.required(bo.coordinates),mode:bo.oneOf("mapbox.places","mapbox.places-permanent"),countries:bo.arrayOf(bo.string),types:bo.arrayOf(bo.oneOf(ia)),bbox:bo.arrayOf(bo.number),limit:bo.number,language:bo.arrayOf(bo.string),reverseMode:bo.oneOf("distance","score")})(t),t.mode=t.mode||"mapbox.places";var e=Eo(so({country:t.countries},wo(t,["country","types","bbox","limit","language","reverseMode"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:wo(t,["mode","query"]),query:e})};var oa=na(ra);function aa(t){let e,n,r,i,a,s,u,c,l;return{c(){e=T("div"),n=T("div"),r=T("input"),i=x(),a=T("div"),s=T("button"),s.textContent="Найти",A(r,"class","p-1 w-full rounded outline-none"),A(r,"type","text"),A(r,"placeholder","Адрес"),A(s,"class","p-1 w-full text-white bg-gray-800 rounded"),A(s,"type","button"),A(e,"class","fixed ml-12 -mt-10 bg-white rounded shadow-lg flex flex-row")},m(o,u){w(o,e,u),b(e,n),b(n,r),M(r,t[9]),b(e,i),b(e,a),b(a,s),c=!0,l=[k(r,"input",t[116]),k(s,"click",t[25])]},p(t,e){512&e[0]&&r.value!==t[9]&&M(r,t[9])},i(t){c||(X(()=>{u||(u=pt(e,un,{x:-300,duration:1e3},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(e,un,{x:-300,duration:1e3},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),o(l)}}}function sa(t){let e,n,r=null!=t[2]&&null!=t[2].region&&ua(t);return{c(){r&&r.c(),e=I()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,n){null!=t[2]&&null!=t[2].region?r?(r.p(t,n),lt(r,1)):(r=ua(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function ua(t){let e;const n=new cr({props:{region:t[2].region,city:t[2].city,latlng:t[2].latlng}});return n.$on("lookOrderPlace",t[29]),n.$on("driverArrived",t[32]),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};4&e[0]&&(r.region=t[2].region),4&e[0]&&(r.city=t[2].city),4&e[0]&&(r.latlng=t[2].latlng),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function ca(t){let e;const n=new qr({props:{address:t[1],LatLng:t[0],clientUID:t[7].uid,clientName:t[7].displayName,region:t[2].region,city:t[2].city}});return n.$on("closeDialog",t[118]),n.$on("alert",t[119]),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};2&e[0]&&(r.address=t[1]),1&e[0]&&(r.LatLng=t[0]),128&e[0]&&(r.clientUID=t[7].uid),128&e[0]&&(r.clientName=t[7].displayName),4&e[0]&&(r.region=t[2].region),4&e[0]&&(r.city=t[2].city),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function la(t){let e,n,r=null!=t[2]&&null!=t[2].region&&ha(t);return{c(){r&&r.c(),e=I()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,n){null!=t[2]&&null!=t[2].region?r?(r.p(t,n),lt(r,1)):(r=ha(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function ha(t){let e;const n=new Ur({props:{region:t[2].region,city:t[2].city}});return n.$on("findDriverLocation",t[29]),n.$on("checkOnWay",t[33]),n.$on("alert",t[120]),n.$on("close",t[121]),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};4&e[0]&&(r.region=t[2].region),4&e[0]&&(r.city=t[2].city),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function fa(t){let e,n,r=null!=t[2]&&null!=t[2].region&&da(t);return{c(){r&&r.c(),e=I()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,n){null!=t[2]&&null!=t[2].region?r?(r.p(t,n),lt(r,1)):(r=da(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function da(t){let e;const n=new ti({props:{region:t[2].region,city:t[2].city}});return n.$on("fullscreen",t[122]),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};4&e[0]&&(r.region=t[2].region),4&e[0]&&(r.city=t[2].city),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function pa(t){let e,n;const r=new jn({props:{region:t[2].region,city:t[2].city,latlng:t[2].latlng}});return r.$on("close",t[123]),r.$on("alert",t[124]),{c(){e=T("div"),mt(r.$$.fragment),A(e,"id","rentalCarBox"),A(e,"class","absolute top-0 mt-16 w-full bg-white svelte-11f35y3")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};4&e[0]&&(n.region=t[2].region),4&e[0]&&(n.city=t[2].city),4&e[0]&&(n.latlng=t[2].latlng),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function ma(t){let e,n;const r=new di({props:{user:t[7],region:t[2].region,city:t[2].city,latlng:t[0]}});return r.$on("close",t[125]),r.$on("alert",t[126]),{c(){e=T("div"),mt(r.$$.fragment),A(e,"id","addServiceBox"),A(e,"class","absolute top-0 mt-16 w-full svelte-11f35y3")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};128&e[0]&&(n.user=t[7]),4&e[0]&&(n.region=t[2].region),4&e[0]&&(n.city=t[2].city),1&e[0]&&(n.latlng=t[0]),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function ga(t){let e,n;const r=new li({props:{region:t[2].region,getUserAccount:t[8]}});return r.$on("danger",t[21]),r.$on("close",t[127]),{c(){e=T("div"),mt(r.$$.fragment),A(e,"id","sosBox"),A(e,"class","absolute top-0 mt-16 w-full svelte-11f35y3")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};4&e[0]&&(n.region=t[2].region),256&e[0]&&(n.getUserAccount=t[8]),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function va(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=T("div"),n=T("div"),r=T("p"),i=S(t[4]),o=x(),a=T("p"),s=T("button"),s.textContent="Ок",A(r,"class","text-center"),A(s,"class","btn-orange"),A(a,"class","mt-2 text-center"),A(n,"class","p-3 border bg-white rounded-lg shadow-lg"),A(e,"id","alertBox"),A(e,"class"," fixed top-0 svelte-11f35y3")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=k(s,"click",t[128])},p(t,e){(!c||16&e[0])&&N(i,t[4])},i(t){c||(X(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function ya(e){let n,r,i,a,s,u,c,l,h,f,d,p,m,g;return{c(){n=T("div"),r=T("div"),i=T("button"),i.innerHTML='<img class="object-cover" src="./icons/like.png" alt="like">',s=x(),u=T("div"),c=T("button"),c.innerHTML='<img class="object-cover" src="./icons/button-close-yellow.png" alt="close">',h=x(),f=T("div"),d=T("button"),d.innerHTML='<img class="object-cover" src="./icons/dislike.png" alt="dislike">',A(i,"class","m-2 p-3 w-16 h-16 border border-black rounded-full bg-green-500"),A(c,"class","m-2 p-0 w-12 h-12 bg-transparent rounded-full"),A(d,"class","m-2 p-3 w-16 h-16 border border-black rounded-full bg-red-500"),A(n,"id","dialog"),A(n,"class"," flex flex-row items-center justify-around svelte-11f35y3")},m(t,o){w(t,n,o),b(n,r),b(r,i),b(n,s),b(n,u),b(u,c),b(n,h),b(n,f),b(f,d),m=!0,g=[k(i,"click",e[23]),k(c,"click",e[129]),k(d,"click",e[24]),k(n,"click",e[130])]},p:t,i(t){m||(X(()=>{a||(a=pt(r,un,{x:-100,duration:1e3},!0)),a.run(1)}),X(()=>{l||(l=pt(u,ln,{duration:1e3},!0)),l.run(1)}),X(()=>{p||(p=pt(f,un,{x:100,duration:1e3},!0)),p.run(1)}),m=!0)},o(t){a||(a=pt(r,un,{x:-100,duration:1e3},!1)),a.run(0),l||(l=pt(u,ln,{duration:1e3},!1)),l.run(0),p||(p=pt(f,un,{x:100,duration:1e3},!1)),p.run(0),m=!1},d(t){t&&_(n),t&&a&&a.end(),t&&l&&l.end(),t&&p&&p.end(),o(g)}}}function ba(e){let n;const r=new bi({});return r.$on("closeMenu",e[131]),r.$on("getAddress",e[26]),r.$on("police",e[132]),r.$on("mCamera",e[133]),r.$on("sCamera",e[134]),r.$on("dtp",e[135]),r.$on("rClosed",e[136]),r.$on("rConstruction",e[137]),r.$on("taxiCall",e[27]),r.$on("sos",e[35]),r.$on("add",e[36]),{c(){mt(r.$$.fragment)},m(t,e){gt(r,t,e),n=!0},p:t,i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){vt(r,t)}}}function wa(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,S,I,C,N,M,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,X,tt,et=t[6]&&aa(t),nt=t[11]&&sa(t),rt=t[10]&&ca(t),it=t[12]&&la(t),ot=t[13]&&fa(t),at=t[17]&&pa(t),st=t[16]&&ma(t),ft=t[15]&&ga(t),dt=t[3]&&va(t),pt=t[5]&&ya(t),mt=t[14]&&ba(t);return{c(){var t,o,b;e=T("div"),n=T("div"),r=x(),i=T("div"),a=T("div"),s=T("div"),u=T("button"),u.innerHTML='<img src="./icons/search.png" alt="targetLocation">',c=x(),et&&et.c(),l=x(),h=T("div"),f=T("button"),f.innerHTML='<img src="./icons/fullscreen.png" alt="fullscreen">',d=x(),p=T("div"),m=T("button"),m.innerHTML='<img src="./icons/target.png" alt="targetLocation">',g=x(),v=T("div"),y=T("button"),y.innerHTML='<img src="./icons/taxi-find.png" alt="taxiLocation">',E=x(),S=T("div"),I=T("button"),I.innerHTML='<img src="./icons/taxi-signal.png" alt="taxiOrders">',C=x(),N=T("div"),M=T("button"),M.innerHTML='<img src="./icons/excavator.png" alt="excavator">',P=x(),L=T("div"),D=T("button"),D.innerHTML='<img src="./icons/chat-phone.png" alt="chat">',R=x(),O=T("div"),nt&&nt.c(),B=x(),U=T("div"),rt&&rt.c(),F=x(),j=T("div"),it&&it.c(),q=x(),V=T("div"),ot&&ot.c(),$=x(),at&&at.c(),z=x(),st&&st.c(),H=x(),ft&&ft.c(),G=x(),dt&&dt.c(),W=x(),K=T("div"),pt&&pt.c(),Z=x(),Q=T("div"),mt&&mt.c(),Y=x(),J=T("div"),J.innerHTML='<div id="loader" class="p-4"><img id="loading" class="mx-auto w-8 h-8 svelte-11f35y3" src="./icons/loading.svg" alt="loading"></div> \n        <div id="firebaseui-auth-container"></div>',A(n,"id","map"),t="min-height",o="550px",n.style.setProperty(t,o,b?"important":""),A(n,"class","z-0 w-full h-screen"),A(u,"class","map-btn svelte-11f35y3"),A(u,"type","button"),A(s,"class","mt-2 relative"),A(f,"class","map-btn svelte-11f35y3"),A(f,"type","button"),A(h,"class","mt-2"),A(m,"class","map-btn svelte-11f35y3"),A(m,"type","button"),A(p,"class","mt-2"),A(y,"class","map-btn svelte-11f35y3"),A(y,"type","button"),A(v,"class","mt-2"),A(I,"class","map-btn svelte-11f35y3"),A(I,"type","button"),A(S,"class","mt-2"),A(M,"class","map-btn svelte-11f35y3"),A(M,"type","button"),A(N,"class","mt-2"),A(D,"class","map-btn svelte-11f35y3"),A(D,"type","button"),A(L,"class","mt-2"),A(a,"class","flex flex-col"),A(i,"class","absolute top-0 mt-16 ml-1"),A(O,"class"," absolute top-0 mt-16"),A(U,"class"," absolute top-0 mt-16"),A(j,"id","clientTaxiBox"),A(j,"class"," absolute top-0 mt-16 svelte-11f35y3"),A(V,"id","Chat"),A(V,"class"," absolute top-0 mt-16"),A(K,"id","marker-dialog"),A(K,"class","svelte-11f35y3"),A(Q,"id","contextmenu"),A(Q,"class","absolute"),A(J,"id","authUI"),A(J,"class","w-full bg-gray-900 shadow-xl svelte-11f35y3"),A(e,"id","main"),A(e,"class","relative")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(a,s),b(s,u),b(s,c),et&&et.m(s,null),b(a,l),b(a,h),b(h,f),b(a,d),b(a,p),b(p,m),b(a,g),b(a,v),b(v,y),b(a,E),b(a,S),b(S,I),b(a,C),b(a,N),b(N,M),b(a,P),b(a,L),b(L,D),b(e,R),b(e,O),nt&&nt.m(O,null),b(e,B),b(e,U),rt&&rt.m(U,null),b(e,F),b(e,j),it&&it.m(j,null),b(e,q),b(e,V),ot&&ot.m(V,null),b(e,$),at&&at.m(e,null),b(e,z),st&&st.m(e,null),b(e,H),ft&&ft.m(e,null),b(e,G),dt&&dt.m(e,null),b(e,W),b(e,K),pt&&pt.m(K,null),b(e,Z),b(e,Q),mt&&mt.m(Q,null),b(e,Y),b(e,J),X=!0,tt=[k(window,"contextmenu",t[34]),k(u,"click",t[115]),k(f,"click",t[117]),k(m,"click",t[20]),k(y,"click",t[30]),k(I,"click",t[28]),k(M,"click",t[37]),k(D,"click",t[31])]},p(t,n){t[6]?et?(et.p(t,n),lt(et,1)):(et=aa(t),et.c(),lt(et,1),et.m(s,null)):et&&(ut(),ht(et,1,1,()=>{et=null}),ct()),t[11]?nt?(nt.p(t,n),lt(nt,1)):(nt=sa(t),nt.c(),lt(nt,1),nt.m(O,null)):nt&&(ut(),ht(nt,1,1,()=>{nt=null}),ct()),t[10]?rt?(rt.p(t,n),lt(rt,1)):(rt=ca(t),rt.c(),lt(rt,1),rt.m(U,null)):rt&&(ut(),ht(rt,1,1,()=>{rt=null}),ct()),t[12]?it?(it.p(t,n),lt(it,1)):(it=la(t),it.c(),lt(it,1),it.m(j,null)):it&&(ut(),ht(it,1,1,()=>{it=null}),ct()),t[13]?ot?(ot.p(t,n),lt(ot,1)):(ot=fa(t),ot.c(),lt(ot,1),ot.m(V,null)):ot&&(ut(),ht(ot,1,1,()=>{ot=null}),ct()),t[17]?at?(at.p(t,n),lt(at,1)):(at=pa(t),at.c(),lt(at,1),at.m(e,z)):at&&(ut(),ht(at,1,1,()=>{at=null}),ct()),t[16]?st?(st.p(t,n),lt(st,1)):(st=ma(t),st.c(),lt(st,1),st.m(e,H)):st&&(ut(),ht(st,1,1,()=>{st=null}),ct()),t[15]?ft?(ft.p(t,n),lt(ft,1)):(ft=ga(t),ft.c(),lt(ft,1),ft.m(e,G)):ft&&(ut(),ht(ft,1,1,()=>{ft=null}),ct()),t[3]?dt?(dt.p(t,n),lt(dt,1)):(dt=va(t),dt.c(),lt(dt,1),dt.m(e,W)):dt&&(ut(),ht(dt,1,1,()=>{dt=null}),ct()),t[5]?pt?(pt.p(t,n),lt(pt,1)):(pt=ya(t),pt.c(),lt(pt,1),pt.m(K,null)):pt&&(ut(),ht(pt,1,1,()=>{pt=null}),ct()),t[14]?mt?(mt.p(t,n),lt(mt,1)):(mt=ba(t),mt.c(),lt(mt,1),mt.m(Q,null)):mt&&(ut(),ht(mt,1,1,()=>{mt=null}),ct())},i(t){X||(lt(et),lt(nt),lt(rt),lt(it),lt(ot),lt(at),lt(st),lt(ft),lt(dt),lt(pt),lt(mt),X=!0)},o(t){ht(et),ht(nt),ht(rt),ht(it),ht(ot),ht(at),ht(st),ht(ft),ht(dt),ht(pt),ht(mt),X=!1},d(t){t&&_(e),et&&et.d(),nt&&nt.d(),rt&&rt.d(),it&&it.d(),ot&&ot.d(),at&&at.d(),st&&st.d(),ft&&ft.d(),dt&&dt.d(),pt&&pt.d(),mt&&mt.d(),o(tt)}}}const _a="pk.eyJ1IjoiZGFwcGRldnYiLCJhIjoiY2s3ZWo0dWV4MDYzcjNncHRncnlvdHY2OSJ9.zLk9G0tHK9iU-onN_TjxFw";function Ea(t,e,n){const r=oa({accessToken:_a});let i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,b,w,_,E,T,S,x,I,k,A,C,N,M,P,L,D,R,O,B,U,F,j,q,V,$,H,G,W,K,Z,Q,Y,J,X,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,ft,dt,pt,mt={latlng:null,region:"none",city:"none",district:"none"},gt=[];function vt(){Ht.collection("users").doc(I.uid).get().then((function(t){const e=t.data();n(8,k=e)})).catch((function(t){console.log("Error getting document:",t)}))}function yt(){g=kn.layerGroup([]),v=kn.layerGroup([]),y=kn.layerGroup([]),b=kn.layerGroup([]),w=kn.layerGroup([]),_=kn.layerGroup([]),gt.push(g,v,y,b,w,_);let t={Main:g,"Такси":b,"Сервисы":_,"Спецтехника":w,"Дорожные события":y,"Патрули ГИБДД, камеры":v};i=kn.map("map",{zoomControl:!1,layers:[g,v,b,w,_]}).setView([55.80046084146819,49.105174541473396],13),kn.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'<span style="font-size: smaller;"> Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a></span>',maxZoom:19,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:_a}).addTo(i),n(0,o=i.getCenter()),a=i.getBounds(),kn.control.zoom({position:"bottomright"}).addTo(i),m=kn.control.layers(null,t).setPosition("bottomleft").addTo(i),i.locate({watch:!1,setView:!0,enableHighAccuracy:!0}),i.on("locationfound",St),i.on("locationfound",It),i.on("contextmenu",Ct),i.on("zoomend",_t)}function bt(){let t=Ht.collection(`icons/police/${h}`),e=Ht.collection(`icons/mCamera/${h}`),n=Ht.collection(`icons/sCamera/${h}`),r=Ht.collection(`icons/roadClosed/${h}`),i=Ht.collection(`icons/roadConstruction/${h}`),o=Ht.collection(`icons/DTP/${h}`),a=Ht.collection(`icons/sos/${h}`),s=Ht.collection("services").where("region","==",h).where("city","==",f),u=Ht.collection("taxiDrivers").where("online","==",!0),c=Ht.collection("topics").where("region","==",h).where("city","==",f),l=Ht.collection("rentalCars").where("region","==",h).where("city","==",f).where("online","==",!0),d={dbRef:u,layer:b,icon:L};[{dbRef:t,layer:v,icon:R},{dbRef:e,layer:v,icon:O},{dbRef:n,layer:v,icon:B},{dbRef:o,layer:y,icon:U},{dbRef:i,layer:y,icon:F},{dbRef:r,layer:y,icon:j}].forEach(t=>{t.dbRef.get().then((function(e){e.forEach((function(e){let n=e.data(),r=n.added.toDate(),i=(new Date).getTime()-r.getTime();if(n.actual>=.1&&i<=18e7){let i=r.toLocaleString("ru",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}),o=kn.marker(n.location,{icon:t.icon,opacity:n.actual,alt:e.id,title:e.ref.parent.path}).bindPopup(`<p> Добавлено ${i} </p>`);o.on("click",Mt),t.layer.addLayer(o)}}))})).catch((function(t){console.log("Error getting documents: ",t)}))}),a.get().then((function(t){t.forEach((function(t){const e=t.data();let n=kn.marker(e.location,{icon:C,alt:t.id,title:t.ref.parent.path}).bindPopup(`<p> Сообщение: ${e.message} </p> <p> Телефон: <a href="tel:${e.phone}"> ${e.phone} </a> </p>`);g.addLayer(n)}))})),u.get().then((function(t){t.forEach((function(t){let e=t.data(),n=kn.marker(e.location,{icon:L}).bindPopup(`<img src=${e.driverAuto.frontside}> <p>${e.name} ${e.lastName}</p> <p>Рейтинг: ${e.rating}</p> <a href="#/taxidriverpage/${t.id}"> Предложить поездку </a>`);d.layer.addLayer(n)}))})),l.get().then((function(t){t.forEach((function(t){let e,n=t.data();"Экскаватор"===n.type?e=tt:"Бульдозер"===n.type?e=et:"Трактор"===n.type?e=nt:"Грейдер"===n.type?e=rt:"Самосвал"===n.type?e=it:"Бетономешалка"===n.type?e=ot:"Бурильная"===n.type?e=at:"Каток"===n.type?e=st:"Ассенизатор"===n.type?e=ut:"Автокран"===n.type?e=ct:"Манипулятор"===n.type?e=lt:"Автоподъемник"===n.type?e=ht:"Погрузчик"===n.type?e=ft:"Эвакуатор"===n.type?e=dt:"Другое"===n.type&&(e=pt);let r=kn.marker(n.location,{icon:e}).bindPopup(`<img src=${n.imgURL}> <p> ${n.type} ${n.model} </p> <p> Аренда: ${n.price} руб./час</p> <a href="tel:${n.phone}"> Позвонить </a>`);w.addLayer(r)}))})),c.get().then((function(t){t.forEach((function(t){let e=t.data(),n=kn.marker(e.location,{icon:X,alt:t.id,title:t.ref.parent.path}).bindPopup(`<p><b>${e.header}</b></p> <p><i>${e.text}</i></p> <p><a href="#/topic/${t.id}"> Перейти </a></p>`);g.addLayer(n)}))})),s.get().then((function(t){t.forEach((function(t){let e=t.data();if("Шиномонтаж"===e.type){let n=kn.marker(e.location,{icon:q}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("Автомойка"===e.type){let n=kn.marker(e.location,{icon:V}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("СТО"===e.type){let n=kn.marker(e.location,{icon:$}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("Автозапчасти"===e.type){let n=kn.marker(e.location,{icon:H}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("Мелкосрочка"===e.type){let n=kn.marker(e.location,{icon:G}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("Автостекло/Тонировка"===e.type){let n=kn.marker(e.location,{icon:W}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("ГСМ"===e.type){let n=kn.marker(e.location,{icon:K}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("Автозаправка"===e.type){let n=kn.marker(e.location,{icon:Z}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("Авторазбор"===e.type){let n=kn.marker(e.location,{icon:Q}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}else if("Кафе"===e.type){let n=kn.marker(e.location,{icon:Y}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Меню и отзывы </a>`);_.addLayer(n)}else if("Отель"===e.type){let n=kn.marker(e.location,{icon:J}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);_.addLayer(n)}}))}))}function wt(){A=kn.Icon.extend({options:{iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]}}),N=new A({iconUrl:"./icons/placeholder.png"}),M=new A({iconUrl:"./icons/direction-arrow-2.png"}),P=new A({iconUrl:"./icons/location.png"}),C=new A({iconUrl:"./icons/sos-icon.png"}),L=new A({iconUrl:"./icons/taxi.png"}),D=new A({iconUrl:"./icons/taxi-marker.png"}),F=new A({iconUrl:"./icons/road-construction.png"}),j=new A({iconUrl:"./icons/road-closed.png"}),U=new A({iconUrl:"./icons/car-crash.png"}),R=new A({iconUrl:"./icons/police-car.png"}),B=new A({iconUrl:"./icons/road-camera.png"}),O=new A({iconUrl:"./icons/speed-camera.png"}),q=new A({iconUrl:"./icons/tires-3.png"}),V=new A({iconUrl:"./icons/car-wash.png"}),$=new A({iconUrl:"./icons/car-service-2.png"}),H=new A({iconUrl:"./icons/gear.png"}),G=new A({iconUrl:"./icons/technical-support.png"}),W=new A({iconUrl:"./icons/windshield.png"}),K=new A({iconUrl:"./icons/oil.png"}),Z=new A({iconUrl:"./icons/gas-station.png"}),Q=new A({iconUrl:"./icons/car-lifter.png"}),Y=new A({iconUrl:"./icons/cafe-placeholder.png"}),J=new A({iconUrl:"./icons/hotel-placeholder.png"}),X=new A({iconUrl:"./icons/chat-4.png"}),tt=new A({iconUrl:"./icons/excavator.png"}),et=new A({iconUrl:"./icons/bulldozer.png"}),nt=new A({iconUrl:"./icons/tractor.png"}),rt=new A({iconUrl:"./icons/grader.png"}),it=new A({iconUrl:"./icons/dumper.png"}),ot=new A({iconUrl:"./icons/concrete.png"}),at=new A({iconUrl:"./icons/bur.png"}),st=new A({iconUrl:"./icons/paver.png"}),ut=new A({iconUrl:"./icons/garbage.png"}),ct=new A({iconUrl:"./icons/crane-truck.png"}),lt=new A({iconUrl:"./icons/manipulator.png"}),ht=new A({iconUrl:"./icons/car-lift.png"}),ft=new A({iconUrl:"./icons/loader.png"}),dt=new A({iconUrl:"./icons/tow-truck.png"}),pt=new A({iconUrl:"./icons/excavator-2.png"})}function _t(t){l=t.target._zoom,n(0,o=i.getCenter()),a=i.getBounds(),l<=11?gt.forEach(t=>{t.remove()}):l>=17?(gt.forEach(t=>{t.remove()}),gt.forEach(t=>{t.eachLayer((function(t){t.options.icon.options.iconSize=[40,40]})),t.addTo(i)})):l<15?(gt.forEach(t=>{t.remove()}),gt.forEach(t=>{t.eachLayer((function(t){t.options.icon.options.iconSize=[20,20]})),t.addTo(i)})):l<18&&(gt.forEach(t=>{t.remove()}),gt.forEach(t=>{t.eachLayer((function(t){t.options.icon.options.iconSize=[30,30]})),t.addTo(i)}))}function Et(t){let e=document.getElementById(t);document.fullscreenElement?document.exitFullscreen():e.requestFullscreen().catch(t=>{Tt(`Error attempting to enable full-screen mode: ${t.message} (${t.name})`)})}function Tt(t){E||(n(4,T=t),n(3,E=!0)),setTimeout(()=>{n(3,E=!1)},5e3)}function St(t){null==p&&(p=kn.marker(t.latlng,{icon:N,rotationAngle:0}).addTo(i).bindPopup("Ты здесь!"),n(2,mt.latlng=t.latlng,mt))}function xt(t){let e=function(t,e){let n=3.14159,r=t.lat*n/180,i=t.lng*n/180,o=e.lat*n/180,a=e.lng*n/180-i,s=Math.sin(a)*Math.cos(o),u=Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos(a),c=Math.atan2(s,u);return c*=180/n,c=(c+360)%360,c}(t.oldLatLng,t.latlng);p.setRotationAngle(e)}function It(t){p.setLatLng(t.latlng),n(2,mt={latlng:t.latlng,region:h,district:d,city:f})}z(yt),z(wt),Lt.auth().onAuthStateChanged((function(t){t?(document.getElementById("loader").style.display="none",n(7,I=t),vt(),Dt()):new ao.auth.AuthUI(Lt.auth()).start("#firebaseui-auth-container",{callbacks:{signInSuccessWithAuthResult:(t,e)=>!0,uiShown(){document.getElementById("loader").style.display="none"}},signInFlow:"popup",signInSuccessUrl:"https://avtokarta.club",signInOptions:[Lt.auth.EmailAuthProvider.PROVIDER_ID,Lt.auth.PhoneAuthProvider.PROVIDER_ID,Lt.auth.GoogleAuthProvider.PROVIDER_ID]})}));let kt,At=!1;function Ct(t){n(0,o=t.latlng)}function Nt(t){let e=0;Ht.collection(`icons/${t}/${h}`).where("author","==",I.uid).get().then((function(n){e=n.size,e>=5?Tt("Вы добавили максимальное кол-во иконок данного типа."):k.mapRating>5?mt.city===f&&mt.district===d&&mt.region===h?Ht.collection(`icons/${t}/${h}`).add({city:f,district:d,added:Lt.firestore.FieldValue.serverTimestamp(),location:[o.lat,o.lng],author:I.uid,actual:.7,votes:[]}).then((function(t){bt(),Tt("Добавлено.")})).catch((function(t){console.error("Error adding document: ",t)})):Tt("Вы находитесь слишком далеко! Обновите местоположение."):Tt("Ваш рейтинг слишком мал.")}))}function Mt(t){s=t.target.options.alt,u=t.target.options.title,n(5,S=!0)}let Pt=io.create({baseURL:"https://nominatim.openstreetmap.org/search/"});function Dt(){r.reverseGeocode({query:[o.lng,o.lat]}).send().then(t=>{const e=t.body.features;e.forEach(t=>{"region"===t.place_type[0]?h=t.text:"district"===t.place_type[0]?d=t.text:"place"===t.place_type[0]&&(f=t.text)}),e.some(t=>"district"===t.place_type[0])||(d=f),n(2,mt.region=h,mt),n(2,mt.city=f,mt),n(2,mt.district=d,mt),bt()})}let Rt=!1;let Ot=!1;let Bt=!1;let Ut=!1;let Ft=!1;let jt,qt,Vt=!1;return[o,c,mt,E,T,S,x,I,k,kt,Rt,Ot,Bt,Ut,Ft,Vt,jt,qt,Et,Tt,function(){At?(At=!1,p.setIcon(N),i.stopLocate(),p.setRotationAngle(0),Tt("Следовать за маркером выключено.")):(At=!0,p.setIcon(M),p.on("move",xt),i.locate({watch:!0,setView:!0,enableHighAccuracy:!0,maxZoom:17}),Tt("Следовать за маркером включено."))},function(t){console.log(t.detail.message,t.detail.type,t.detail.phone),mt.city===f&&mt.district===d&&mt.region===h&&Ht.collection(`icons/sos/${h}`).add({city:f,district:d,added:Lt.firestore.FieldValue.serverTimestamp(),location:[o.lat,o.lng],author:I.uid,message:t.detail.message,phone:t.detail.phone}).then((function(t){bt(),Tt("Добавлено.")})).catch((function(t){console.error("Error adding document: ",t)}))},Nt,function(){let t=Ht.collection(`${u}`).doc(`${s}`);t.get().then((function(e){if(e.exists){e.data().votes.some(t=>t===I.uid)?Tt("Вы уже проголосовали!"):t.update({actual:Lt.firestore.FieldValue.increment(.11),votes:Lt.firestore.FieldValue.arrayUnion(I.uid)}).then((function(){Tt("Голос принят!")})).catch((function(t){Tt(`Ошибка: ${t.message}`)}))}else Tt("Ошибка документ не найден!")})).catch((function(t){Tt(`Ошибка: ${t.message}`)}))},function(){let t=Ht.collection(`${u}`).doc(`${s}`);t.get().then((function(e){if(e.exists){e.data().votes.some(t=>t===I.uid)?Tt("Вы уже проголосовали!"):t.update({actual:Lt.firestore.FieldValue.increment(-.11),votes:Lt.firestore.FieldValue.arrayUnion(I.uid)}).then((function(){Tt("Голос принят!")})).catch((function(t){Tt(`Ошибка: ${t.message}`)}))}else Tt("Ошибка документ не найден!")})).catch((function(t){Tt(`Ошибка: ${t.message}`)}))},async function(){try{const t={swLng:a._southWest.lng-.02,neLat:a._northEast.lat+.02,neLng:a._northEast.lng+.02,swLat:a._southWest.lat-.02},e=(await Pt.get(kt,{params:{format:"json",limit:3,addressdetails:1,countrycodes:["ru"],viewbox:`${t.swLng}, ${t.neLat}, ${t.neLng}, ${t.swLat}`,bounded:1}})).data;if(e.length>=1){const t=[e[0].lat,e[0].lon];e.forEach(t=>{kn.marker([t.lat,t.lon],{icon:P}).addTo(i).bindPopup(`${t.display_name}`)}),i.flyTo(t,16)}else Tt("Ничего не найдено. Попробуйте отдалить карту или изменить запрос.")}catch(t){console.error(t)}},async function(){const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o.lat}&lon=${o.lng}`),e=(await t.json()).display_name;kn.popup().setLatLng(o).setContent(e).openOn(i)},async function(){if(k.balance>=100){const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o.lat}&lon=${o.lng}`),e=await t.json();n(1,c=e.display_name),n(10,Rt=!0)}else Tt("На вашем счете недостаточно средств. Менее 100 руб.")},function(){Ot?n(11,Ot=!1):Ht.collection("taxiDrivers").doc(I.uid).get().then((function(t){t.exists?(n(11,Ot=!0),Ht.collection(`taxiOrders/region/${h}/city/${f}`).where("active","==",!0).get().then((function(t){t.forEach((function(t){let e=t.data();kn.marker(e.location,{icon:D,alt:t.id}).addTo(i).bindPopup(`<p> Пункт назначения: ${e.routes}</p> <p> Примечание: ${e.desc}</p> <p> Цена: ${e.price}</p> <a href="tel:${e.phone}"> Позвонить клиенту </a>`)}))}))):Tt("Список текущих заказов доступен только для зарегистрированных водителей.")})).catch((function(t){console.log("Error getting document:",t)}))},function(t){i.flyTo(t.detail.location,16),console.log(t.detail)},function(){n(12,Bt=!Bt)},function(){n(13,Ut=!Ut)},function(t){let e=i.distance(t.detail.order.location,mt.latlng);console.log("distance",e),e<=150?Ht.collection(t.detail.ref).doc(t.detail.order.id).update({driverArrived:!0}).then((function(){Tt("Клиент оповещен! Ожидайте.")})).catch((function(t){console.error("Error updating document: ",t)})):Tt("Вы слишком далеко! Если вы на месте обновите локацию.")},function(t){let e=i.distance(t.detail.order.location,mt.latlng);console.log("distance",e),e>=10?Ht.collection(t.detail.ref).doc(t.detail.order.id).update({onway:!0}).then((function(){Tt("Поехали. Не забудьте пристегнуться!")})).catch((function(t){console.error("Error updating document: ",t)})):console.log("waiting")},function(t){t.preventDefault();let e=document.getElementById("contextmenu");e.style.left=t.clientX+"px",e.style.top=t.clientY+"px",n(14,Ft=!0)},function(){Vt||n(15,Vt=!0)},function(){l<18?Tt("Увеличьте зум до максимума и повторите попытку."):n(16,jt=!0)},function(){n(17,qt=!qt)},i,a,s,u,l,h,f,d,p,m,g,v,y,b,w,_,A,C,N,M,P,L,D,R,O,B,U,F,j,q,V,$,H,G,W,K,Z,Q,Y,J,X,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,ft,dt,pt,At,r,void 0,gt,void 0,void 0,void 0,void 0,vt,yt,bt,wt,_t,St,xt,It,Ct,Mt,Pt,async function(){const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o.lat}&lon=${o.lng}`),e=await t.json();n(1,c=e.display_name)},Dt,()=>n(6,x=!x),function(){kt=this.value,n(9,kt)},()=>Et("main"),()=>n(10,Rt=!1),t=>Tt(t.detail.message),t=>Tt(t.detail.message),()=>n(12,Bt=!1),()=>Et("Chat"),()=>n(17,qt=!1),t=>Tt(t.detail.message),()=>n(16,jt=!1),t=>Tt(t.detail.message),()=>n(15,Vt=!1),()=>n(3,E=!1),()=>n(5,S=!1),()=>n(5,S=!1),()=>n(14,Ft=!1),()=>Nt("police"),()=>Nt("mCamera"),()=>Nt("sCamera"),()=>Nt("DTP"),()=>Nt("roadClosed"),()=>Nt("roadConstruction")]}function Ta(e){let n;return{c(){n=T("div"),n.innerHTML="<div></div>",A(n,"class","mt-20")},m(t,e){w(t,n,e)},p:t,i:t,o:t,d(t){t&&_(n)}}}function Sa(e){let n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,E,S;return{c(){n=T("div"),r=T("div"),i=T("p"),i.textContent="Стоимость размещения",o=x(),a=T("p"),a.textContent="100 руб.: Мелкосрочка (частный гараж), Шиномонтаж, Автостекло/Тонировка.",s=x(),u=T("p"),u.textContent="300 руб.: Автозапчасти, Автомойка, Авторазбор, СТО, ГСМ.",c=x(),l=T("p"),l.textContent="500 руб.: Придорожное кафе, Придорожный отель.",h=x(),f=T("p"),f.textContent="1000 руб.: Автозаправка.",d=x(),p=T("p"),p.textContent="Стоимость размещения оплачивается единоразово и списывается с баланса аккаунта.",m=x(),g=T("p"),v=T("button"),v.textContent="Закрыть",A(i,"class","text-center text-lg font-semibold svelte-1gxemwq"),A(a,"class","svelte-1gxemwq"),A(u,"class","svelte-1gxemwq"),A(l,"class","svelte-1gxemwq"),A(f,"class","svelte-1gxemwq"),A(p,"class","svelte-1gxemwq"),A(v,"class","btn-gray"),A(g,"class","mt-2 text-center svelte-1gxemwq"),A(r,"class","p-2 border bg-white rounded-lg shadow-lg"),A(n,"id","priceList"),A(n,"class"," fixed top-0 svelte-1gxemwq")},m(t,y){w(t,n,y),b(n,r),b(r,i),b(r,o),b(r,a),b(r,s),b(r,u),b(r,c),b(r,l),b(r,h),b(r,f),b(r,d),b(r,p),b(r,m),b(r,g),b(g,v),E=!0,S=k(v,"click",e[46])},p:t,i(t){E||(X(()=>{y||(y=pt(r,sn,{duration:500},!0)),y.run(1)}),E=!0)},o(t){y||(y=pt(r,sn,{duration:500},!1)),y.run(0),E=!1},d(t){t&&_(n),t&&y&&y.end(),S()}}}function xa(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=T("div"),n=T("div"),r=T("p"),i=S(t[7]),o=x(),a=T("p"),s=T("button"),s.textContent="Ок",A(r,"class","text-center svelte-1gxemwq"),A(s,"class","btn-orange"),A(a,"class","mt-2 text-center svelte-1gxemwq"),A(n,"class","p-3 border bg-white rounded-lg shadow-lg"),A(e,"id","alertBox"),A(e,"class"," fixed top-0 svelte-1gxemwq")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=k(s,"click",t[47])},p(t,e){(!c||128&e[0])&&N(i,t[7])},i(t){c||(X(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function Ia(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,C,N,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,tt,et,nt,rt,it,ot,at,st,ft,dt,pt,mt,gt,vt,yt,bt,wt,_t,Et,Tt,St,xt,It,kt,At,Ct,Nt,Mt,Pt,Lt,Dt,Rt,Ot,Bt,Ut,Ft,jt,qt,Vt,$t,zt,Ht,Gt=t[0]&&Sa(t),Wt=t[6]&&xa(t);return{c(){e=T("div"),n=T("div"),r=x(),i=T("div"),a=T("div"),a.innerHTML='<h1 class=" font-semibold text-center">\n                Добавить сервис\n            </h1>',s=x(),u=T("div"),c=T("label"),c.textContent="Тип сервиса:",l=x(),h=T("select"),f=T("option"),d=T("option"),d.textContent="СТО",p=T("option"),p.textContent="Мелкосрочка (частный гараж)",m=T("option"),m.textContent="Шиномонтаж",g=T("option"),g.textContent="Автомойка",v=T("option"),v.textContent="Автозапчасти",y=T("option"),y.textContent="Автостекло/Тонировка",E=T("option"),E.textContent="Автозаправка",C=T("option"),C.textContent="ГСМ",N=T("option"),N.textContent="Авторазбор",L=T("option"),L.textContent="Придорожное кафе",D=T("option"),D.textContent="Придорожный отель",R=x(),O=T("div"),B=T("p"),U=S("Название:\r\n                "),F=T("input"),j=x(),q=T("div"),V=T("p"),$=S("Виды услуг:\r\n                "),z=T("input"),H=x(),G=T("div"),W=T("p"),W.textContent="Время работы:",K=x(),Z=T("p"),Q=S("Круглосуточно \r\n                "),Y=T("input"),J=x(),tt=T("p"),tt.textContent="Пн - Пт",et=x(),nt=T("p"),rt=S("С\r\n                "),it=T("input"),ot=S("\r\n                до\r\n                "),at=T("input"),st=x(),ft=T("p"),ft.textContent="Суббота",dt=x(),pt=T("p"),mt=S("С\r\n                "),gt=T("input"),vt=S("\r\n                до\r\n                "),yt=T("input"),bt=S("\r\n                Выходной \r\n                "),wt=T("input"),_t=x(),Et=T("p"),Et.textContent="Вокресенье",Tt=x(),St=T("p"),xt=S("С\r\n                "),It=T("input"),kt=S("\r\n                до\r\n                "),At=T("input"),Ct=S("\r\n                Выходной \r\n                "),Nt=T("input"),Mt=x(),Pt=T("div"),Lt=T("p"),Dt=S("Номер телефона: \r\n                "),Rt=T("input"),Ot=x(),Bt=T("div"),Ut=T("button"),Ut.textContent="Стоимость размещения",Ft=x(),jt=T("button"),jt.textContent="Добавить",qt=x(),Gt&&Gt.c(),Vt=x(),Wt&&Wt.c(),$t=I(),A(n,"id","map"),A(n,"class","svelte-1gxemwq"),A(c,"for","service-type"),A(c,"class"," text-gray-700 text-sm font-semibold"),f.__value="",f.value=f.__value,d.__value="СТО",d.value=d.__value,p.__value="Мелкосрочка",p.value=p.__value,m.__value="Шиномонтаж",m.value=m.__value,g.__value="Автомойка",g.value=g.__value,v.__value="Автозапчасти",v.value=v.__value,y.__value="Автостекло/Тонировка",y.value=y.__value,E.__value="Автозаправка",E.value=E.__value,C.__value="ГСМ",C.value=C.__value,N.__value="Авторазбор",N.value=N.__value,L.__value="Кафе",L.value=L.__value,D.__value="Отель",D.value=D.__value,A(h,"name","service-type"),A(h,"id","service-type"),A(h,"class","border rounded-md"),void 0===t[2]&&X(()=>t[31].call(h)),A(u,"class","mt-2"),A(F,"type","text"),A(F,"placeholder","Название сервиса"),A(F,"maxlength","50"),A(B,"class","svelte-1gxemwq"),A(z,"type","text"),A(z,"placeholder","Короткое описание"),A(z,"maxlength","150"),A(V,"class","svelte-1gxemwq"),A(W,"class","svelte-1gxemwq"),A(Y,"type","checkbox"),A(Z,"class","svelte-1gxemwq"),A(tt,"class","svelte-1gxemwq"),A(it,"type","time"),A(at,"type","time"),A(nt,"class","svelte-1gxemwq"),A(ft,"class","svelte-1gxemwq"),A(gt,"type","time"),A(yt,"type","time"),A(wt,"type","checkbox"),A(pt,"class","svelte-1gxemwq"),A(Et,"class","svelte-1gxemwq"),A(It,"type","time"),A(At,"type","time"),A(Nt,"type","checkbox"),A(St,"class","svelte-1gxemwq"),A(Rt,"type","text"),A(Lt,"class","svelte-1gxemwq"),A(Ut,"class","btn-white"),A(jt,"class","btn-green"),A(Bt,"class","mt-2 text-center"),A(i,"class","p-2 bg-white rounded-lg shadow-lg w-full"),A(e,"class","mt-16")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(i,s),b(i,u),b(u,c),b(u,l),b(u,h),b(h,f),b(h,d),b(h,p),b(h,m),b(h,g),b(h,v),b(h,y),b(h,E),b(h,C),b(h,N),b(h,L),b(h,D),P(h,t[2]),b(i,R),b(i,O),b(O,B),b(B,U),b(B,F),M(F,t[1]),b(i,j),b(i,q),b(q,V),b(V,$),b(V,z),M(z,t[3]),b(i,H),b(i,G),b(G,W),b(G,K),b(G,Z),b(Z,Q),b(Z,Y),Y.checked=t[5].alltime,b(G,J),b(G,tt),b(G,et),b(G,nt),b(nt,rt),b(nt,it),M(it,t[5].weekdays[0]),b(nt,ot),b(nt,at),M(at,t[5].weekdays[1]),b(G,st),b(G,ft),b(G,dt),b(G,pt),b(pt,mt),b(pt,gt),M(gt,t[5].sat[0]),b(pt,vt),b(pt,yt),M(yt,t[5].sat[1]),b(pt,bt),b(pt,wt),wt.checked=t[5].saturday,b(G,_t),b(G,Et),b(G,Tt),b(G,St),b(St,xt),b(St,It),M(It,t[5].sun[0]),b(St,kt),b(St,At),M(At,t[5].sun[1]),b(St,Ct),b(St,Nt),Nt.checked=t[5].sunday,b(i,Mt),b(i,Pt),b(Pt,Lt),b(Lt,Dt),b(Lt,Rt),M(Rt,t[4]),b(i,Ot),b(i,Bt),b(Bt,Ut),b(Bt,Ft),b(Bt,jt),w(o,qt,_),Gt&&Gt.m(o,_),w(o,Vt,_),Wt&&Wt.m(o,_),w(o,$t,_),zt=!0,Ht=[k(h,"change",t[31]),k(F,"input",t[32]),k(z,"input",t[33]),k(Y,"change",t[34]),k(it,"input",t[35]),k(at,"input",t[36]),k(gt,"input",t[37]),k(yt,"input",t[38]),k(wt,"change",t[39]),k(It,"input",t[40]),k(At,"input",t[41]),k(Nt,"change",t[42]),k(Rt,"input",t[43]),k(Ut,"click",t[44]),k(jt,"click",t[45])]},p(t,e){4&e[0]&&P(h,t[2]),2&e[0]&&F.value!==t[1]&&M(F,t[1]),8&e[0]&&z.value!==t[3]&&M(z,t[3]),32&e[0]&&(Y.checked=t[5].alltime),32&e[0]&&M(it,t[5].weekdays[0]),32&e[0]&&M(at,t[5].weekdays[1]),32&e[0]&&M(gt,t[5].sat[0]),32&e[0]&&M(yt,t[5].sat[1]),32&e[0]&&(wt.checked=t[5].saturday),32&e[0]&&M(It,t[5].sun[0]),32&e[0]&&M(At,t[5].sun[1]),32&e[0]&&(Nt.checked=t[5].sunday),16&e[0]&&Rt.value!==t[4]&&M(Rt,t[4]),t[0]?Gt?(Gt.p(t,e),lt(Gt,1)):(Gt=Sa(t),Gt.c(),lt(Gt,1),Gt.m(Vt.parentNode,Vt)):Gt&&(ut(),ht(Gt,1,1,()=>{Gt=null}),ct()),t[6]?Wt?(Wt.p(t,e),lt(Wt,1)):(Wt=xa(t),Wt.c(),lt(Wt,1),Wt.m($t.parentNode,$t)):Wt&&(ut(),ht(Wt,1,1,()=>{Wt=null}),ct())},i(t){zt||(lt(Gt),lt(Wt),zt=!0)},o(t){ht(Gt),ht(Wt),zt=!1},d(t){t&&_(e),t&&_(qt),Gt&&Gt.d(t),t&&_(Vt),Wt&&Wt.d(t),t&&_($t),o(Ht)}}}const ka="pk.eyJ1IjoiZGFwcGRldnYiLCJhIjoiY2s3ZWo0dWV4MDYzcjNncHRncnlvdHY2OSJ9.zLk9G0tHK9iU-onN_TjxFw";function Aa(t,e,n){const r=oa({accessToken:ka});let i,o,a,s,u,c,l,h,f,d,p,m,g,v={latlng:null,region:"none",city:"none",district:"none"};function y(){i=kn.map("map",{zoomControl:!1}).setView([55.80046084146819,49.105174541473396],13),i.locate({watch:!1,setView:!0,enableHighAccuracy:!0}),kn.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'<span style="font-size: smaller;"> Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a></span>',maxZoom:19,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:ka}).addTo(i),o=i.getCenter(),kn.control.zoom({position:"bottomright"}).addTo(i),s=kn.Icon.extend({options:{iconSize:[50,50],iconAnchor:[25,25],popupAnchor:[0,-25]}}),u=new s({iconUrl:"./icons/location.png"}),i.on("locationfound",b),i.on("click",_)}function b(t){a=kn.marker(t.latlng,{icon:u,draggable:!0}).addTo(i),a.on("move",w),a.on("moveend",E)}function w(t){v.latlng=t.latlng}function _(t){a.setLatLng(t.latlng),v.latlng=t.latlng,E()}function E(){let t=v.latlng;r.reverseGeocode({query:[t.lng,t.lat]}).send().then(t=>{const e=t.body.features;e.forEach(t=>{"region"===t.place_type[0]?c=t.text:"district"===t.place_type[0]?h=t.text:"place"===t.place_type[0]&&(l=t.text)}),e.some(t=>"district"===t.place_type[0])||(h=l),v.region=c,v.city=l,v.district=h,console.log(v)})}z(y),Lt.auth().onAuthStateChanged((function(t){t?d=t:console.log("no user login")}));let T,S,x="+7",I={alltime:!1,saturday:!1,sunday:!1,weekdays:[],sat:[],sun:[]};function k(){let t;let e;Ht.collection("priceList").doc("addService").get().then((function(e){const n=e.data();t=n[m]})).catch((function(t){C(`Ошибка: ${t}`)})),Ht.collection("users").doc(d.uid).get().then((function(n){const r=n.data();e=r.balance,e-t>0?A(t):C("Недостаточно средств.")})).catch((function(t){C(`Ошибка: ${t}`)}))}function A(t){if(v.region&&"none"!=v.city)if(g&&p&&null!=m){Ht.collection("services").add({region:v.region,district:v.district,city:v.city,name:p,type:m,offer:g,phone:x,location:[v.latlng.lat,v.latlng.lng],owner:d.uid,time:{wHours:I}}).then((function(e){M(t),C("Новый сервис добавлен. Данные обновятся через несколько минут.")})).catch((function(t){C(`Ошибка: ${t}`)}))}else C("Заполните все поля.");else C("Установите маркер на местоположение сервиса.")}function C(t){T||(n(7,S=t),n(6,T=!0)),setTimeout(()=>{n(6,T=!1)},5e3)}let N=Lt.functions().httpsCallable("balanceDecrement");function M(t){N({amount:t}).then((function(t){console.log(t)})).catch((function(t){console.log(t.code,t.message,t.details)}))}return[f,p,m,g,x,I,T,S,k,i,o,a,s,u,c,l,h,v,d,r,void 0,void 0,y,b,w,_,E,A,C,N,M,function(){m=D(this),n(2,m)},function(){p=this.value,n(1,p)},function(){g=this.value,n(3,g)},function(){I.alltime=this.checked,n(5,I)},function(){I.weekdays[0]=this.value,n(5,I)},function(){I.weekdays[1]=this.value,n(5,I)},function(){I.sat[0]=this.value,n(5,I)},function(){I.sat[1]=this.value,n(5,I)},function(){I.saturday=this.checked,n(5,I)},function(){I.sun[0]=this.value,n(5,I)},function(){I.sun[1]=this.value,n(5,I)},function(){I.sunday=this.checked,n(5,I)},function(){x=this.value,n(4,x)},()=>n(0,f=!0),()=>k(),()=>n(0,f=!1),()=>n(6,T=!1)]}function Ca(t,e,n){const r=t.slice();return r[95]=e[n],r}function Na(t,e,n){const r=t.slice();return r[98]=e[n],r}function Ma(t,e,n){const r=t.slice();return r[109]=e[n],r}function Pa(t,e,n){const r=t.slice();return r[104]=e[n],r}function La(t,e,n){const r=t.slice();return r[113]=e[n],r}function Da(t){let e,n;return{c(){e=T("span"),n=S(t[4]),A(e,"class"," text-red-600")},m(t,r){w(t,e,r),b(e,n)},p(t,e){16&e[0]&&N(n,t[4])},d(t){t&&_(e)}}}function Ra(t){let e,n;return{c(){e=T("span"),n=S(t[4]),A(e,"class"," text-orange-600")},m(t,r){w(t,e,r),b(e,n)},p(t,e){16&e[0]&&N(n,t[4])},d(t){t&&_(e)}}}function Oa(t){let e,n;return{c(){e=T("span"),n=S(t[4]),A(e,"class"," text-green-600")},m(t,r){w(t,e,r),b(e,n)},p(t,e){16&e[0]&&N(n,t[4])},d(t){t&&_(e)}}}function Ba(e){let n,r,i,o;return{c(){n=T("div"),r=T("img"),r.src!==(i="./icons/expand_more.svg")&&A(r,"src","./icons/expand_more.svg"),A(r,"alt","options"),A(r,"class"," mx-auto")},m(t,i){w(t,n,i),b(n,r),o=k(r,"click",e[45])},p:t,d(t){t&&_(n),o()}}}function Ua(t){let e,n,r,i,a,s,u,c,l,h,f,d,p=t[21]&&Fa(t),m=t[22]&&Ga(t),g=t[8]&&Wa(t);return{c(){e=T("div"),n=T("div"),n.textContent="Журнал",r=x(),i=T("div"),i.textContent="Настройки",a=x(),p&&p.c(),s=x(),u=T("div"),u.textContent="Добавить услугу",c=x(),m&&m.c(),l=x(),h=T("div"),h.textContent="Добавить блок",f=x(),g&&g.c(),A(n,"class","option-menu svelte-1rqnpkw"),A(i,"class","option-menu svelte-1rqnpkw"),A(u,"class","option-menu svelte-1rqnpkw"),A(h,"class","option-menu svelte-1rqnpkw")},m(o,v){w(o,e,v),b(e,n),b(e,r),b(e,i),b(e,a),p&&p.m(e,null),b(e,s),b(e,u),b(e,c),m&&m.m(e,null),b(e,l),b(e,h),b(e,f),g&&g.m(e,null),d=[k(n,"click",t[46]),k(i,"click",t[47]),k(u,"click",t[51]),k(h,"click",t[54])]},p(t,n){t[21]?p?p.p(t,n):(p=Fa(t),p.c(),p.m(e,s)):p&&(p.d(1),p=null),t[22]?m?m.p(t,n):(m=Ga(t),m.c(),m.m(e,l)):m&&(m.d(1),m=null),t[8]?g?g.p(t,n):(g=Wa(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(t){t&&_(e),p&&p.d(),m&&m.d(),g&&g.d(),o(d)}}}function Fa(t){let e,n,r,i,o,a,s,u;function c(t,e){return t[91].subServices?qa:ja}let l=c(t),h=l(t);function f(t,e){return"granted"==t[28]?Ha:za}let d=f(t),p=d(t);return{c(){e=T("div"),n=T("div"),r=T("span"),r.textContent="Предварительная запись через сайт:",i=x(),h.c(),o=x(),a=T("div"),s=T("span"),s.textContent="Уведомления:",u=x(),p.c(),A(r,"class"," text-sm"),A(s,"class"," text-sm"),A(e,"class","mt-1 p-1 border border-dashed")},m(t,c){w(t,e,c),b(e,n),b(n,r),b(n,i),h.m(n,null),b(e,o),b(e,a),b(a,s),b(a,u),p.m(a,null)},p(t,e){l===(l=c(t))&&h?h.p(t,e):(h.d(1),h=l(t),h&&(h.c(),h.m(n,null))),d===(d=f(t))&&p?p.p(t,e):(p.d(1),p=d(t),p&&(p.c(),p.m(a,null)))},d(t){t&&_(e),h.d(),p.d()}}}function ja(e){let n;return{c(){n=T("span"),n.textContent="Сначала добавьте услугу...",A(n,"class"," text-sm text-orange-600 italic")},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function qa(t){let e;function n(t,e){return t[91].reception?$a:Va}let r=n(t),i=r(t);return{c(){i.c(),e=I()},m(t,n){i.m(t,n),w(t,e,n)},p(t,o){r!==(r=n(t))&&(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&_(e)}}}function Va(t){let e,n,r,i;function o(...e){return t[49](t[92],...e)}return{c(){e=T("span"),e.textContent="Выключено",n=x(),r=T("button"),r.textContent="включить",A(e,"class"," text-sm text-gray-500"),A(r,"class","btn-green")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"click",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function $a(t){let e,n,r,i;function o(...e){return t[48](t[92],...e)}return{c(){e=T("span"),e.textContent="Включено",n=x(),r=T("button"),r.textContent="отключить",A(e,"class"," text-sm text-green-600"),A(r,"class","btn-gray")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"click",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function za(e){let n,r,i,o;return{c(){n=T("span"),n.textContent="Выключено",r=x(),i=T("button"),i.textContent="включить",A(n,"class"," text-sm text-gray-500"),A(i,"class","btn-green")},m(t,a){w(t,n,a),w(t,r,a),w(t,i,a),o=k(i,"click",e[50])},p:t,d(t){t&&_(n),t&&_(r),t&&_(i),o()}}}function Ha(e){let n;return{c(){n=T("span"),n.textContent="Включено",A(n,"class"," text-sm text-green-600")},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function Ga(t){let e,n,r,i,a;function s(...e){return t[53](t[92],...e)}return{c(){e=T("div"),n=T("input"),r=x(),i=T("button"),i.textContent="добавить",A(n,"type","text"),A(n,"placeholder","Название услуги"),A(n,"class","svelte-1rqnpkw"),A(i,"class","btn-orange"),A(e,"class","pt-1 p-1 border border-dashed")},m(o,u){w(o,e,u),b(e,n),M(n,t[23]),b(e,r),b(e,i),a=[k(n,"input",t[52]),k(i,"click",s)]},p(e,r){t=e,8388608&r[0]&&n.value!==t[23]&&M(n,t[23])},d(t){t&&_(e),o(a)}}}function Wa(t){let e,n,r,i,a,s,u,c,l;function h(t,e){return null!=t[9]?Za:Ka}let f=h(t),d=f(t),p=null!=t[9]&&Qa(t);return{c(){e=T("div"),n=T("div"),d.c(),r=x(),i=T("div"),a=T("input"),s=x(),u=T("input"),c=x(),p&&p.c(),A(n,"class","image-upload svelte-1rqnpkw"),A(a,"type","text"),A(a,"maxlength","50"),A(a,"class","svelte-1rqnpkw"),A(u,"type","text"),A(u,"maxlength","150"),A(u,"class","svelte-1rqnpkw"),A(i,"class","mt-2 text-center")},m(o,h){w(o,e,h),b(e,n),d.m(n,null),b(e,r),b(e,i),b(i,a),M(a,t[10]),b(i,s),b(i,u),M(u,t[11]),b(i,c),p&&p.m(i,null),l=[k(a,"input",t[56]),k(u,"input",t[57])]},p(t,e){f===(f=h(t))&&d?d.p(t,e):(d.d(1),d=f(t),d&&(d.c(),d.m(n,null))),1024&e[0]&&a.value!==t[10]&&M(a,t[10]),2048&e[0]&&u.value!==t[11]&&M(u,t[11]),null!=t[9]?p?p.p(t,e):(p=Qa(t),p.c(),p.m(i,null)):p&&(p.d(1),p=null)},d(t){t&&_(e),d.d(),p&&p.d(),o(l)}}}function Ka(t){let e,n,r,i;function o(...e){return t[55](t[90],...e)}return{c(){e=T("label"),e.innerHTML='<p class="my-4">Загрузите изображение</p> \n                                        <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1rqnpkw">',n=x(),r=T("input"),A(e,"for","block-foto"),A(r,"type","file"),A(r,"id","block-foto"),A(r,"name","file"),A(r,"class","svelte-1rqnpkw")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Za(t){let e,n;return{c(){e=T("img"),A(e,"class","img-up svelte-1rqnpkw"),e.src!==(n=t[9])&&A(e,"src",n),A(e,"alt","block-img")},m(t,n){w(t,e,n)},p(t,r){512&r[0]&&e.src!==(n=t[9])&&A(e,"src",n)},d(t){t&&_(e)}}}function Qa(e){let n,r;return{c(){n=T("button"),n.textContent="Добавить",A(n,"class","btn-green")},m(t,i){w(t,n,i),r=k(n,"click",e[33])},p:t,d(t){t&&_(n),r()}}}function Ya(t){let e,n,r;function i(...e){return t[58](t[113],...e)}return{c(){e=T("div"),n=T("button"),n.textContent="Удалить блок",A(n,"class","btn-opt"),A(e,"class","mt-1 text-center")},m(t,o){w(t,e,o),b(e,n),r=k(n,"click",i)},p(e,n){t=e},d(t){t&&_(e),r()}}}function Ja(t){let e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v=t[113].title+"",y=t[113].desc+"",E=t[91].owner==t[1].uid&&Ya(t);function I(...e){return t[59](t[103],...e)}return{c(){e=T("div"),n=T("span"),r=S(v),i=x(),o=T("span"),o.innerHTML='<img src="./icons/close_circle.svg" alt="X" class="w-8 h-8">',a=x(),s=T("img"),c=x(),l=T("hr"),h=x(),f=T("div"),d=S(y),p=x(),E&&E.c(),m=x(),A(n,"class","absolute p-1 mt-3 bg-gray-900 text-white font-semibold uppercase opacity-75"),A(o,"class","absolute right-0 m-2 opacity-50"),s.src!==(u=t[113].imgURL)&&A(s,"src",u),A(s,"alt","block-img"),A(s,"class","img-up svelte-1rqnpkw"),A(f,"class","p-2 bg-gray-100 text-black text-sm leading-tight"),A(e,"class"," relative border rounded shadow-md")},m(t,u){w(t,e,u),b(e,n),b(n,r),b(e,i),b(e,o),b(e,a),b(e,s),b(e,c),b(e,l),b(e,h),b(e,f),b(f,d),b(f,p),E&&E.m(f,null),b(e,m),g=k(e,"click",I)},p(e,n){t=e,524288&n[3]&&v!==(v=t[113].title+"")&&N(r,v),524288&n[3]&&s.src!==(u=t[113].imgURL)&&A(s,"src",u),524288&n[3]&&y!==(y=t[113].desc+"")&&N(d,y),t[91].owner==t[1].uid?E?E.p(t,n):(E=Ya(t),E.c(),E.m(f,null)):E&&(E.d(1),E=null)},d(t){t&&_(e),E&&E.d(),g()}}}function Xa(t){let e,n=t[112],r=[];for(let e=0;e<n.length;e+=1)r[e]=Ja(La(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=I()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(1073741826&i[0]|536870912&i[2]|524288&i[3]){let o;for(n=t[112],o=0;o<n.length;o+=1){const a=La(t,n,o);r[o]?r[o].p(a,i):(r[o]=Ja(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){E(r,t),t&&_(e)}}}function ts(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[61])},p:t,d(t){t&&_(n),i()}}}function es(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[60])},p:t,d(t){t&&_(n),i()}}}function ns(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[63])},p:t,d(t){t&&_(n),i()}}}function rs(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[62])},p:t,d(t){t&&_(n),i()}}}function is(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[65])},p:t,d(t){t&&_(n),i()}}}function os(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[64])},p:t,d(t){t&&_(n),i()}}}function as(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[67])},p:t,d(t){t&&_(n),i()}}}function ss(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[66])},p:t,d(t){t&&_(n),i()}}}function us(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star_border.svg")&&A(n,"src","./icons/star_border.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[69])},p:t,d(t){t&&_(n),i()}}}function cs(e){let n,r,i;return{c(){n=T("img"),n.src!==(r="./icons/star.svg")&&A(n,"src","./icons/star.svg"),A(n,"alt","star"),A(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=k(n,"click",e[68])},p:t,d(t){t&&_(n),i()}}}function ls(t){let e,n,r,i,o=t[104].rating>=2&&hs(t);return{c(){e=T("img"),r=x(),o&&o.c(),i=I(),e.src!==(n="./icons/star.svg")&&A(e,"src","./icons/star.svg"),A(e,"alt","star"),A(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n),w(t,r,n),o&&o.m(t,n),w(t,i,n)},p(t,e){t[104].rating>=2?o?o.p(t,e):(o=hs(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&_(e),t&&_(r),o&&o.d(t),t&&_(i)}}}function hs(t){let e,n,r,i,o=t[104].rating>=3&&fs(t);return{c(){e=T("img"),r=x(),o&&o.c(),i=I(),e.src!==(n="./icons/star.svg")&&A(e,"src","./icons/star.svg"),A(e,"alt","star"),A(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n),w(t,r,n),o&&o.m(t,n),w(t,i,n)},p(t,e){t[104].rating>=3?o?o.p(t,e):(o=fs(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&_(e),t&&_(r),o&&o.d(t),t&&_(i)}}}function fs(t){let e,n,r,i,o=t[104].rating>=4&&ds(t);return{c(){e=T("img"),r=x(),o&&o.c(),i=I(),e.src!==(n="./icons/star.svg")&&A(e,"src","./icons/star.svg"),A(e,"alt","star"),A(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n),w(t,r,n),o&&o.m(t,n),w(t,i,n)},p(t,e){t[104].rating>=4?o?o.p(t,e):(o=ds(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&_(e),t&&_(r),o&&o.d(t),t&&_(i)}}}function ds(t){let e,n,r,i,o=5==t[104].rating&&ps();return{c(){e=T("img"),r=x(),o&&o.c(),i=I(),e.src!==(n="./icons/star.svg")&&A(e,"src","./icons/star.svg"),A(e,"alt","star"),A(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n),w(t,r,n),o&&o.m(t,n),w(t,i,n)},p(t,e){5==t[104].rating?o||(o=ps(),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&_(e),t&&_(r),o&&o.d(t),t&&_(i)}}}function ps(t){let e,n;return{c(){e=T("img"),e.src!==(n="./icons/star.svg")&&A(e,"src","./icons/star.svg"),A(e,"alt","star"),A(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function ms(t){let e,n;function r(...e){return t[71](t[104],...e)}return{c(){e=T("span"),e.textContent="Ответить",A(e,"class"," text-teal-500 text-xs")},m(t,i){w(t,e,i),n=k(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function gs(t){let e,n=t[107],r=[];for(let e=0;e<n.length;e+=1)r[e]=vs(Ma(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=I()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(16384&i[3]){let o;for(n=t[107],o=0;o<n.length;o+=1){const a=Ma(t,n,o);r[o]?r[o].p(a,i):(r[o]=vs(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){E(r,t),t&&_(e)}}}function vs(t){let e,n,r,i,o,a,s,u=t[109].username+"",c=t[109].text+"";return{c(){e=T("div"),n=T("p"),r=S(u),i=x(),o=T("p"),a=S(c),s=x(),A(n,"class"," font-semibold"),A(o,"class","mt-1"),A(e,"class","reply svelte-1rqnpkw")},m(t,u){w(t,e,u),b(e,n),b(n,r),b(e,i),b(e,o),b(o,a),b(e,s)},p(t,e){16384&e[3]&&u!==(u=t[109].username+"")&&N(r,u),16384&e[3]&&c!==(c=t[109].text+"")&&N(a,c)},d(t){t&&_(e)}}}function ys(t){let e,n=t[107].length>=1&&gs(t);return{c(){n&&n.c(),e=I()},m(t,r){n&&n.m(t,r),w(t,e,r)},p(t,r){t[107].length>=1?n?n.p(t,r):(n=gs(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function bs(t){let e,n,r,i,o,a,s,u,c,l,h,f,d,p=t[104].username+"",m=t[104].text+"",g=t[104].rating>=1&&ls(t),v=t[91].owner==t[1].uid&&ms(t);const y=new Ye({props:{path:t[104].ref.collection("reply"),$$slots:{default:[ys,({data:t,ref:e})=>({107:t,108:e}),({data:t,ref:e})=>[0,0,0,(t?16384:0)|(e?32768:0)]]},$$scope:{ctx:t}}});return{c(){e=T("div"),n=T("p"),r=T("span"),i=S(p),o=x(),a=T("span"),g&&g.c(),s=x(),u=T("p"),c=S(m),l=x(),v&&v.c(),h=x(),mt(y.$$.fragment),f=x(),A(r,"class"," font-semibold"),A(a,"class"," float-right"),A(u,"class","mt-2"),A(e,"class","review svelte-1rqnpkw")},m(t,p){w(t,e,p),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),g&&g.m(a,null),b(e,s),b(e,u),b(u,c),b(u,l),v&&v.m(u,null),b(e,h),gt(y,e,null),b(e,f),d=!0},p(t,e){(!d||256&e[3])&&p!==(p=t[104].username+"")&&N(i,p),t[104].rating>=1?g?g.p(t,e):(g=ls(t),g.c(),g.m(a,null)):g&&(g.d(1),g=null),(!d||256&e[3])&&m!==(m=t[104].text+"")&&N(c,m),t[91].owner==t[1].uid?v?v.p(t,e):(v=ms(t),v.c(),v.m(u,null)):v&&(v.d(1),v=null);const n={};256&e[3]&&(n.path=t[104].ref.collection("reply")),8404992&e[3]&&(n.$$scope={dirty:e,ctx:t}),y.$set(n)},i(t){d||(lt(y.$$.fragment,t),d=!0)},o(t){ht(y.$$.fragment,t),d=!1},d(t){t&&_(e),g&&g.d(),v&&v.d(),vt(y)}}}function ws(t){let e;return{c(){e=T("div"),e.innerHTML="<p>Отзывов нет</p>",A(e,"class","mt-1 p-2 bg-gray-100 border rounded-md text-center")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function _s(t){let e;return{c(){e=T("span"),e.textContent="Не удалось загрузить",A(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Es(t){let e,n,r,i,o,a,s,u,c,l=t[101],h=[];for(let e=0;e<l.length;e+=1)h[e]=bs(Pa(t,l,e));const f=t=>ht(h[t],1,1,()=>{h[t]=null});function d(...e){return t[72](t[103],...e)}let p=0==t[101].length&&ws();return{c(){e=T("div");for(let t=0;t<h.length;t+=1)h[t].c();n=x(),r=T("div"),i=T("img"),a=x(),p&&p.c(),s=x(),A(e,"class","mt-1"),i.src!==(o="./icons/expand_more.svg")&&A(i,"src","./icons/expand_more.svg"),A(i,"alt","options"),A(i,"class"," mx-auto")},m(t,o){w(t,e,o);for(let t=0;t<h.length;t+=1)h[t].m(e,null);w(t,n,o),w(t,r,o),b(r,i),w(t,a,o),p&&p.m(t,o),w(t,s,o),u=!0,c=k(i,"click",d)},p(n,r){if(t=n,2&r[0]|16&r[1]|536870912&r[2]|16640&r[3]){let n;for(l=t[101],n=0;n<l.length;n+=1){const i=Pa(t,l,n);h[n]?(h[n].p(i,r),lt(h[n],1)):(h[n]=bs(i),h[n].c(),lt(h[n],1),h[n].m(e,null))}for(ut(),n=l.length;n<h.length;n+=1)f(n);ct()}0==t[101].length?p||(p=ws(),p.c(),p.m(s.parentNode,s)):p&&(p.d(1),p=null)},i(t){if(!u){for(let t=0;t<l.length;t+=1)lt(h[t]);u=!0}},o(t){h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)ht(h[t]);u=!1},d(t){t&&_(e),E(h,t),t&&_(n),t&&_(r),t&&_(a),p&&p.d(t),t&&_(s),c()}}}function Ts(e){let n,r,i,o,a,s,u,c;return{c(){n=T("div"),r=T("div"),i=T("div"),o=T("img"),o.src!==(a="./icons/event_note.svg")&&A(o,"src","./icons/event_note.svg"),A(o,"alt","call"),A(o,"class","w-8 h-8 cursor-pointer"),A(i,"class","p-2 rounded-full bg-teal-400"),A(r,"class","mt-3 ml-1 p-2 fixed rounded-full bg-teal-500 shadow-lg"),A(n,"class","absolute bottom-0 left-0 w-20 h-20")},m(t,a){w(t,n,a),b(n,r),b(r,i),b(i,o),u=!0,c=k(o,"click",e[73])},p:t,i(t){u||(X(()=>{s||(s=pt(n,ln,{duration:1e3},!0)),s.run(1)}),u=!0)},o(t){s||(s=pt(n,ln,{duration:1e3},!1)),s.run(0),u=!1},d(t){t&&_(n),t&&s&&s.end(),c()}}}function Ss(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,S,I,C,N,P,L,D,R,O,B,U,F,j,q,V=t[91].subServices,$=[];for(let e=0;e<V.length;e+=1)$[e]=xs(Na(t,V,e));return{c(){e=T("div"),n=T("div"),r=T("div"),r.innerHTML='<span class="text-lg font-semibold">\n                                Записаться\n                            </span>',i=x(),a=T("div"),s=T("div"),s.innerHTML="<span>\n                                    Выберите услугу:\n                                </span>",u=x(),c=T("div"),l=T("select"),h=T("option");for(let t=0;t<$.length;t+=1)$[t].c();f=x(),d=T("div"),d.innerHTML="<span>\n                                    Выберите дату:\n                                </span>",p=x(),m=T("div"),g=T("input"),v=x(),y=T("div"),y.innerHTML="<span>\n                                    Выберите время:\n                                </span>",S=x(),I=T("div"),C=T("input"),N=x(),P=T("div"),P.innerHTML="<span>\n                                    Комментарий:\n                                </span>",L=x(),D=T("div"),R=T("input"),O=x(),B=T("div"),U=T("button"),U.textContent="Отмена",F=x(),j=T("button"),j.textContent="Записаться",A(r,"class","text-center"),h.__value="",h.value=h.__value,A(l,"class","p-1 rounded-lg border bg-white"),A(d,"class","mt-1"),A(g,"type","date"),A(g,"class","svelte-1rqnpkw"),A(y,"class","mt-1"),A(C,"type","time"),A(C,"class","svelte-1rqnpkw"),A(P,"class","mt-1"),A(R,"type","text"),A(R,"class","svelte-1rqnpkw"),A(a,"class","mt-1"),A(U,"class","btn-gray"),A(j,"class","btn-orange"),A(n,"class","p-2 bg-gray-100 border rounded-lg shadow-lg"),A(e,"id","receptionBox"),A(e,"class","svelte-1rqnpkw")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(n,i),b(n,a),b(a,s),b(a,u),b(a,c),b(c,l),b(l,h);for(let t=0;t<$.length;t+=1)$[t].m(l,null);b(a,f),b(a,d),b(a,p),b(a,m),b(m,g),M(g,t[25]),b(a,v),b(a,y),b(a,S),b(a,I),b(I,C),M(C,t[26]),b(a,N),b(a,P),b(a,L),b(a,D),b(D,R),M(R,t[27]),b(n,O),b(n,B),b(B,U),b(B,F),b(B,j),q=[k(l,"change",t[74]),k(g,"input",t[75]),k(C,"input",t[76]),k(R,"input",t[77]),k(U,"click",t[78]),k(j,"click",t[37])]},p(t,e){if(536870912&e[2]){let n;for(V=t[91].subServices,n=0;n<V.length;n+=1){const r=Na(t,V,n);$[n]?$[n].p(r,e):($[n]=xs(r),$[n].c(),$[n].m(l,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=V.length}33554432&e[0]&&M(g,t[25]),67108864&e[0]&&M(C,t[26]),134217728&e[0]&&R.value!==t[27]&&M(R,t[27])},d(t){t&&_(e),E($,t),o(q)}}}function xs(t){let e,n,r,i=t[98]+"";return{c(){e=T("option"),n=S(i),e.__value=r=t[98],e.value=e.__value},m(t,r){w(t,e,r),b(e,n)},p(t,o){536870912&o[2]&&i!==(i=t[98]+"")&&N(n,i),536870912&o[2]&&r!==(r=t[98])&&(e.__value=r),e.value=e.__value},d(t){t&&_(e)}}}function Is(t){let e,n,r,i,a,s,u,c,l,h,f;const d=new Ye({props:{path:t[92].collection("records"),query:js,$$slots:{default:[Ps,({data:t,ref:e})=>({93:t,94:e}),({data:t,ref:e})=>[0,0,0,(t?1:0)|(e?2:0)]]},$$scope:{ctx:t}}});return{c(){e=T("div"),n=T("div"),r=T("div"),r.innerHTML='<span class=" text-lg font-semibold">\n                            Журнал\n                        </span>',i=x(),a=T("input"),s=x(),mt(d.$$.fragment),u=x(),c=T("div"),l=T("button"),l.textContent="Закрыть",A(r,"class","text-center"),A(a,"type","date"),A(a,"class","svelte-1rqnpkw"),A(l,"class","btn-gray"),A(c,"class","mt-2 text-center"),A(n,"class","p-2 bg-gray-100 border rounded-lg shadow-lg"),A(e,"id","recordsBox"),A(e,"class","svelte-1rqnpkw")},m(o,p){w(o,e,p),b(e,n),b(n,r),b(n,i),b(n,a),M(a,t[18]),b(n,s),gt(d,n,null),b(n,u),b(n,c),b(c,l),h=!0,f=[k(a,"input",t[79]),k(l,"click",t[85])]},p(t,e){262144&e[0]&&M(a,t[18]);const n={};1073741824&e[2]&&(n.path=t[92].collection("records")),458752&e[0]|8388609&e[3]&&(n.$$scope={dirty:e,ctx:t}),d.$set(n)},i(t){h||(lt(d.$$.fragment,t),h=!0)},o(t){ht(d.$$.fragment,t),h=!1},d(t){t&&_(e),vt(d),o(f)}}}function ks(t){let e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g=t[95].time+"",v=t[95].subservice+"",y=t[95].clientname+"",E=t[95].desc+"",I=!t[95].confirmed&&As(t);return{c(){e=T("div"),n=T("div"),r=T("span"),i=S(g),o=x(),a=T("span"),s=S(v),u=x(),c=T("div"),l=S(y),h=x(),f=S(E),d=x(),I&&I.c(),p=x(),A(r,"class"," text-orange-600 font-semibold"),A(a,"class","ml-2 font-semibold"),A(c,"class","mt-1 text-sm"),A(e,"class","mt-1 p-1 border rounded bg-white")},m(g,v){w(g,e,v),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),b(e,u),b(e,c),b(c,l),b(c,h),b(c,f),b(e,d),I&&I.m(e,null),b(e,p),m=k(r,"click",t[80])},p(t,n){1&n[3]&&g!==(g=t[95].time+"")&&N(i,g),1&n[3]&&v!==(v=t[95].subservice+"")&&N(s,v),1&n[3]&&y!==(y=t[95].clientname+"")&&N(l,y),1&n[3]&&E!==(E=t[95].desc+"")&&N(f,E),t[95].confirmed?I&&(I.d(1),I=null):I?I.p(t,n):(I=As(t),I.c(),I.m(e,p))},d(t){t&&_(e),I&&I.d(),m()}}}function As(t){let e,n,r,i,a,s,u,c=t[17]&&Cs(t),l=null!=t[16]&&Ns(t);function h(...e){return t[83](t[95],...e)}function f(...e){return t[84](t[95],...e)}return{c(){c&&c.c(),e=x(),n=T("div"),l&&l.c(),r=x(),i=T("button"),i.textContent="Принять",a=x(),s=T("button"),s.textContent="Отменить",A(i,"class","btn-opt bg-green-500"),A(s,"class","btn-opt bg-gray-800"),A(n,"class","mt-2 text-center")},m(t,o){c&&c.m(t,o),w(t,e,o),w(t,n,o),l&&l.m(n,null),b(n,r),b(n,i),b(n,a),b(n,s),u=[k(i,"click",h,{once:!0}),k(s,"click",f)]},p(i,o){(t=i)[17]?c?c.p(t,o):(c=Cs(t),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),null!=t[16]?l?l.p(t,o):(l=Ns(t),l.c(),l.m(n,r)):l&&(l.d(1),l=null)},d(t){c&&c.d(t),t&&_(e),t&&_(n),l&&l.d(),o(u)}}}function Cs(t){let e,n,r;return{c(){e=T("div"),n=T("input"),A(n,"type","time"),A(n,"class","svelte-1rqnpkw")},m(i,o){w(i,e,o),b(e,n),M(n,t[16]),r=k(n,"input",t[81])},p(t,e){65536&e[0]&&M(n,t[16])},d(t){t&&_(e),r()}}}function Ns(t){let e,n;function r(...e){return t[82](t[95],...e)}return{c(){e=T("button"),e.textContent="Изменить",A(e,"class","btn-opt bg-orange-500")},m(t,i){w(t,e,i),n=k(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function Ms(t){let e,n=t[95].date==t[18]&&ks(t);return{c(){n&&n.c(),e=I()},m(t,r){n&&n.m(t,r),w(t,e,r)},p(t,r){t[95].date==t[18]?n?n.p(t,r):(n=ks(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function Ps(t){let e,n=t[93],r=[];for(let e=0;e<n.length;e+=1)r[e]=Ms(Ca(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=I()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(537329664&i[0]|1&i[3]){let o;for(n=t[93],o=0;o<n.length;o+=1){const a=Ca(t,n,o);r[o]?r[o].p(a,i):(r[o]=Ms(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){E(r,t),t&&_(e)}}}function Ls(t){let e;return{c(){e=T("span"),e.textContent="Не удалось загрузить",A(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Ds(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,C,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,tt,et,nt,rt,it,ot,at,st,ft,dt=t[91].name+"",yt=t[91].offer+"",bt=t[4]<3&&Da(t),wt=t[4]>=3&&t[4]<4&&Ra(t),_t=t[4]>=4&&Oa(t),Et=t[91].owner==t[1].uid&&Ba(t),Tt=t[7]&&Ua(t);const St=new Ye({props:{path:t[92].collection("adblocks"),query:t[12],$$slots:{default:[Xa,({data:t,last:e})=>({112:t,103:e}),({data:t,last:e})=>[0,0,0,(t?524288:0)|(e?1024:0)]]},$$scope:{ctx:t}}});function xt(t,e){return t[5]>=1?es:ts}let It=xt(t),kt=It(t);function At(t,e){return t[5]>=2?rs:ns}let Ct=At(t),Nt=Ct(t);function Mt(t,e){return t[5]>=3?os:is}let Pt=Mt(t),Lt=Pt(t);function Dt(t,e){return t[5]>=4?ss:as}let Rt=Dt(t),Ot=Rt(t);function Bt(t,e){return 5==t[5]?cs:us}let Ut=Bt(t),Ft=Ut(t);const jt=new Ye({props:{path:t[92].collection("reviews"),query:t[13],$$slots:{default:[Es,({data:t,ref:e,last:n})=>({101:t,102:e,103:n}),({data:t,ref:e,last:n})=>[0,0,0,(t?256:0)|(e?512:0)|(n?1024:0)]],fallback:[_s,({data:t,ref:e,last:n})=>({101:t,102:e,103:n}),({data:t,ref:e,last:n})=>[0,0,0,(t?256:0)|(e?512:0)|(n?1024:0)]]},$$scope:{ctx:t}}});let qt=t[91].reception&&Ts(t),Vt=t[20]&&Ss(t),$t=t[19]&&Is(t);return{c(){e=T("div"),n=T("div"),r=T("div"),i=T("div"),i.innerHTML='<img src="./icons/star.svg" alt="star" class="w-8 h-8">',a=x(),s=T("div"),bt&&bt.c(),u=x(),wt&&wt.c(),c=x(),_t&&_t.c(),l=x(),h=T("div"),f=T("div"),d=T("p"),p=S(dt),m=x(),g=T("div"),v=T("p"),y=S(yt),E=x(),Et&&Et.c(),I=x(),Tt&&Tt.c(),C=x(),P=T("div"),mt(St.$$.fragment),L=x(),D=T("div"),R=T("div"),kt.c(),O=x(),Nt.c(),B=x(),Lt.c(),U=x(),Ot.c(),F=x(),Ft.c(),j=x(),q=T("div"),V=T("input"),$=x(),z=T("button"),z.textContent="Добавить",H=x(),G=T("div"),mt(jt.$$.fragment),W=x(),qt&&qt.c(),K=x(),Z=T("div"),Q=T("div"),Y=T("div"),J=T("a"),tt=T("img"),it=x(),Vt&&Vt.c(),ot=x(),$t&&$t.c(),at=x(),A(s,"class","mt-1 font-semibold text-center"),A(r,"class","p-2 flex flex-col content-center items-center"),A(d,"class","font-semibold text-lg"),A(f,"class","p-2 my-auto mx-auto text-center"),A(h,"class","flex flex-grow"),A(n,"class","p-1 flex flex-row"),A(v,"class","p-2 text-sm text-justify"),A(e,"class","p-2 rounded-lg shadow-lg"),A(P,"class","p-1"),A(R,"class","star-container svelte-1rqnpkw"),A(V,"type","text"),A(V,"placeholder","Ваш отзыв"),A(V,"class","svelte-1rqnpkw"),A(z,"class","btn-orange"),A(q,"class","mt-1 inline-block"),A(D,"class","rating-container svelte-1rqnpkw"),A(G,"class","p-1"),tt.src!==(et="./icons/phone.svg")&&A(tt,"src","./icons/phone.svg"),A(tt,"alt","call"),A(tt,"class","w-8 h-8"),A(J,"href",nt="tel:"+t[91].phone),A(Y,"class","p-2 rounded-full bg-green-400"),A(Q,"class","mt-3 ml-2 p-2 fixed rounded-full bg-green-500 shadow-lg"),A(Z,"class","absolute bottom-0 right-0 w-20 h-20")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(r,i),b(r,a),b(r,s),bt&&bt.m(s,null),b(s,u),wt&&wt.m(s,null),b(s,c),_t&&_t.m(s,null),b(n,l),b(n,h),b(h,f),b(f,d),b(d,p),b(e,m),b(e,g),b(g,v),b(v,y),b(e,E),Et&&Et.m(e,null),b(e,I),Tt&&Tt.m(e,null),w(o,C,_),w(o,P,_),gt(St,P,null),w(o,L,_),w(o,D,_),b(D,R),kt.m(R,null),b(R,O),Nt.m(R,null),b(R,B),Lt.m(R,null),b(R,U),Ot.m(R,null),b(R,F),Ft.m(R,null),b(D,j),b(D,q),b(q,V),M(V,t[6]),b(q,$),b(q,z),w(o,H,_),w(o,G,_),gt(jt,G,null),w(o,W,_),qt&&qt.m(o,_),w(o,K,_),w(o,Z,_),b(Z,Q),b(Q,Y),b(Y,J),b(J,tt),w(o,it,_),Vt&&Vt.m(o,_),w(o,ot,_),$t&&$t.m(o,_),w(o,at,_),st=!0,ft=[k(V,"input",t[70]),k(z,"click",t[34])]},p(t,n){t[4]<3?bt?bt.p(t,n):(bt=Da(t),bt.c(),bt.m(s,u)):bt&&(bt.d(1),bt=null),t[4]>=3&&t[4]<4?wt?wt.p(t,n):(wt=Ra(t),wt.c(),wt.m(s,c)):wt&&(wt.d(1),wt=null),t[4]>=4?_t?_t.p(t,n):(_t=Oa(t),_t.c(),_t.m(s,null)):_t&&(_t.d(1),_t=null),(!st||536870912&n[2])&&dt!==(dt=t[91].name+"")&&N(p,dt),(!st||536870912&n[2])&&yt!==(yt=t[91].offer+"")&&N(y,yt),t[91].owner==t[1].uid?Et?Et.p(t,n):(Et=Ba(t),Et.c(),Et.m(e,I)):Et&&(Et.d(1),Et=null),t[7]?Tt?Tt.p(t,n):(Tt=Ua(t),Tt.c(),Tt.m(e,null)):Tt&&(Tt.d(1),Tt=null);const r={};1073741824&n[2]&&(r.path=t[92].collection("adblocks")),4096&n[0]&&(r.query=t[12]),2&n[0]|536870912&n[2]|8912896&n[3]&&(r.$$scope={dirty:n,ctx:t}),St.$set(r),It===(It=xt(t))&&kt?kt.p(t,n):(kt.d(1),kt=It(t),kt&&(kt.c(),kt.m(R,O))),Ct===(Ct=At(t))&&Nt?Nt.p(t,n):(Nt.d(1),Nt=Ct(t),Nt&&(Nt.c(),Nt.m(R,B))),Pt===(Pt=Mt(t))&&Lt?Lt.p(t,n):(Lt.d(1),Lt=Pt(t),Lt&&(Lt.c(),Lt.m(R,U))),Rt===(Rt=Dt(t))&&Ot?Ot.p(t,n):(Ot.d(1),Ot=Rt(t),Ot&&(Ot.c(),Ot.m(R,F))),Ut===(Ut=Bt(t))&&Ft?Ft.p(t,n):(Ft.d(1),Ft=Ut(t),Ft&&(Ft.c(),Ft.m(R,null))),64&n[0]&&V.value!==t[6]&&M(V,t[6]);const i={};1073741824&n[2]&&(i.path=t[92].collection("reviews")),8192&n[0]&&(i.query=t[13]),2&n[0]|536870912&n[2]|8388864&n[3]&&(i.$$scope={dirty:n,ctx:t}),jt.$set(i),t[91].reception?qt?(qt.p(t,n),lt(qt,1)):(qt=Ts(t),qt.c(),lt(qt,1),qt.m(K.parentNode,K)):qt&&(ut(),ht(qt,1,1,()=>{qt=null}),ct()),(!st||536870912&n[2]&&nt!==(nt="tel:"+t[91].phone))&&A(J,"href",nt),t[20]?Vt?Vt.p(t,n):(Vt=Ss(t),Vt.c(),Vt.m(ot.parentNode,ot)):Vt&&(Vt.d(1),Vt=null),t[19]?$t?($t.p(t,n),lt($t,1)):($t=Is(t),$t.c(),lt($t,1),$t.m(at.parentNode,at)):$t&&(ut(),ht($t,1,1,()=>{$t=null}),ct())},i(t){st||(lt(St.$$.fragment,t),lt(jt.$$.fragment,t),lt(qt),X(()=>{rt||(rt=pt(Z,ln,{duration:1e3},!0)),rt.run(1)}),lt($t),st=!0)},o(t){ht(St.$$.fragment,t),ht(jt.$$.fragment,t),ht(qt),rt||(rt=pt(Z,ln,{duration:1e3},!1)),rt.run(0),ht($t),st=!1},d(t){t&&_(e),bt&&bt.d(),wt&&wt.d(),_t&&_t.d(),Et&&Et.d(),Tt&&Tt.d(),t&&_(C),t&&_(P),vt(St),t&&_(L),t&&_(D),kt.d(),Nt.d(),Lt.d(),Ot.d(),Ft.d(),t&&_(H),t&&_(G),vt(jt),t&&_(W),qt&&qt.d(t),t&&_(K),t&&_(Z),t&&rt&&rt.end(),t&&_(it),Vt&&Vt.d(t),t&&_(ot),$t&&$t.d(t),t&&_(at),o(ft)}}}function Rs(t){let e;const n=new Re({props:{path:`services/${t[0].id}`,$$slots:{default:[Ds,({data:t,ref:e})=>({91:t,92:e}),({data:t,ref:e})=>[0,0,(t?536870912:0)|(e?1073741824:0)]],fallback:[Ls,({data:t,ref:e})=>({91:t,92:e}),({data:t,ref:e})=>[0,0,(t?536870912:0)|(e?1073741824:0)]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1&e[0]&&(r.path=`services/${t[0].id}`),536821746&e[0]|1610612736&e[2]|8388608&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Os(t){let e;const n=new me({props:{$$slots:{default:[Rs,({user:t})=>({90:t}),({user:t})=>[0,0,t?268435456:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};536821747&e[0]|8388608&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Bs(t){let e,n,r,i,a,s,u,c,l,h,f,d;return{c(){e=T("div"),n=T("div"),r=T("p"),i=T("input"),a=x(),s=T("p"),u=T("button"),u.textContent="Отмена",c=x(),l=T("button"),l.textContent="Отправить",A(i,"type","text"),A(i,"placeholder","Ответ"),A(i,"class","svelte-1rqnpkw"),A(r,"class","text-center"),A(u,"class","btn-gray"),A(l,"class","btn-orange"),A(s,"class","mt-2 text-center"),A(n,"class","p-3 border bg-white rounded-lg shadow-lg"),A(e,"id","replyReviewBox"),A(e,"class"," fixed top-0 svelte-1rqnpkw")},m(o,h){w(o,e,h),b(e,n),b(n,r),b(r,i),M(i,t[14]),b(n,a),b(n,s),b(s,u),b(s,c),b(s,l),f=!0,d=[k(i,"input",t[86]),k(u,"click",t[87]),k(l,"click",t[88])]},p(t,e){16384&e[0]&&i.value!==t[14]&&M(i,t[14])},i(t){f||(X(()=>{h||(h=pt(n,sn,{duration:200},!0)),h.run(1)}),f=!0)},o(t){h||(h=pt(n,sn,{duration:200},!1)),h.run(0),f=!1},d(t){t&&_(e),t&&h&&h.end(),o(d)}}}function Us(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=T("div"),n=T("div"),r=T("p"),i=S(t[3]),o=x(),a=T("p"),s=T("button"),s.textContent="Ок",A(r,"class","text-center"),A(s,"class","btn-orange"),A(a,"class","mt-2 text-center"),A(n,"class","p-3 border bg-white rounded-lg shadow-lg"),A(e,"id","alertBox"),A(e,"class"," fixed top-0 svelte-1rqnpkw")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=k(s,"click",t[89])},p(t,e){(!c||8&e[0])&&N(i,t[3])},i(t){c||(X(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function Fs(t){let e,n,r,i,o;const a=new Qt({props:{firebase:Lt,$$slots:{default:[Os]},$$scope:{ctx:t}}});let s=t[15]&&Bs(t),u=t[2]&&Us(t);return{c(){e=T("div"),mt(a.$$.fragment),n=x(),s&&s.c(),r=x(),u&&u.c(),i=I(),A(e,"class","mt-16")},m(t,c){w(t,e,c),gt(a,e,null),w(t,n,c),s&&s.m(t,c),w(t,r,c),u&&u.m(t,c),w(t,i,c),o=!0},p(t,e){const n={};536821747&e[0]|8388608&e[3]&&(n.$$scope={dirty:e,ctx:t}),a.$set(n),t[15]?s?(s.p(t,e),lt(s,1)):(s=Bs(t),s.c(),lt(s,1),s.m(r.parentNode,r)):s&&(ut(),ht(s,1,1,()=>{s=null}),ct()),t[2]?u?(u.p(t,e),lt(u,1)):(u=Us(t),u.c(),lt(u,1),u.m(i.parentNode,i)):u&&(ut(),ht(u,1,1,()=>{u=null}),ct())},i(t){o||(lt(a.$$.fragment,t),lt(s),lt(u),o=!0)},o(t){ht(a.$$.fragment,t),ht(s),ht(u),o=!1},d(t){t&&_(e),vt(a),t&&_(n),s&&s.d(t),t&&_(r),u&&u.d(t),t&&_(i)}}}const js=t=>t.orderBy("time");function qs(t,e,n){let r,i,o,a,{params:s={}}=e,u=Gt.ref();function c(t){i||(n(3,o=t),n(2,i=!0)),setTimeout(()=>{n(2,i=!1)},5e3)}Lt.auth().onAuthStateChanged((function(t){t?n(1,r=t):console.log("no user login")}));let l,h,f,d=0,p="",m="Заголовок",g="Описание",v=t=>t.orderBy("desc").limit(1);function y(t){n(12,v=e=>e.orderBy("desc").startAfter(t.desc).limit(1))}let b=t=>t.orderBy("date","desc").limit(3);function w(t){n(13,b=e=>e.orderBy("date","desc").startAfter(t.date).limit(3))}function _(){let t=[];Ht.collection(`services/${s.id}/reviews`).get().then((function(e){e.forEach((function(e){let n=e.data();t.push(n.rating)}));let r=t.reduce((t,e)=>t+e,0)/t.length;n(4,a=Math.trunc(10*r)/10)}))}function E(t,e){t.stopPropagation(),t.preventDefault();let r=t.target.files[0],i={contentType:r.type};u.child(`users/${e}/service/${s.id}/${r.name}`).put(r,i).then((function(t){t.ref.getDownloadURL().then((function(t){console.log("File available at",t),n(9,f=t)}))})).catch((function(t){console.error("Upload failed:",t)}))}_();let T,S,x,I,k="";function A(t){T=t,n(15,S=!0)}function C(){k.length>15?Ht.collection(`services/${s.id}/reviews/${T}/reply`).add({date:Lt.firestore.FieldValue.serverTimestamp(),text:k,owner:r.uid,username:r.displayName}).then((function(){n(15,S=!1),n(14,k=""),c("Спасибо, ответ добавлен!")})).catch((function(t){console.error("Error updating document: ",t)})):c("Слишком короткий ответ!")}let N,M,P,L,D,R,O,B,U=s.date?s.date:null,F=!!s.records;let j=Notification.permission;function q(){Notification.requestPermission().then((function(t){n(28,j=t),"granted"===j&&$()}))}function V(t,e,r,i){new Notification("К вам записались, клиент ждёт подтверждения.",{body:`${t} записался на ${e}`,icon:"./icons/main-logo.png"}).onclick=t=>{n(18,U=r),n(19,F=!0),t.preventDefault(),window.open(`https://avtokarta.club/#/service/${i}/true/${r}`,"_blank")}}function $(){Ht.collection(`services/${s.id}/records`).onSnapshot((function(t){t.docChanges().forEach((function(t){if("added"===t.type){let e=t.doc.data();e.confirmed||V(e.clientname,e.subservice,e.date,s.id)}}))}))}"granted"===j&&$();return t.$set=t=>{"params"in t&&n(0,s=t.params)},[s,r,i,o,a,d,p,l,h,f,m,g,v,b,k,S,x,I,U,F,N,M,P,L,D,R,O,B,j,c,y,w,E,function(){null!=f&&Ht.collection(`services/${s.id}/adblocks`).add({imgURL:f,title:m,desc:g,owner:r.uid}).then((function(){c("Рекламный блок добавлен! Обновите страницу."),n(7,l=!1),n(8,h=!1),n(9,f=null),n(10,m="Заголовок"),n(11,g="Описание")})).catch((function(t){console.error("Error updating document: ",t)}))},function(){if(p.length>15){Ht.collection(`services/${s.id}/reviews`).where("owner","==",r.uid).get().then((function(t){t.forEach((function(t){t.data().owner==r.uid?c("Отзыв можно оставить после оплаты услуг сервиса, но только один отзыв разрешается написать без оплаты."):Ht.collection(`services/${s.id}/reviews`).add({date:Lt.firestore.FieldValue.serverTimestamp(),text:p,rating:d,owner:r.uid,username:r.displayName}).then((function(){n(5,d=0),n(6,p=""),c("Спасибо, отзыв добавлен!")})).catch((function(t){console.error("Error updating document: ",t)}))}))})).catch((function(t){console.log("Error getting documents: ",t)}))}else c("Слишком короткий отзыв!")},A,C,function(){D&&R&&O&&null!=B?Ht.collection(`services/${s.id}/records`).add({clientname:r.displayName,clientUID:r.uid,subservice:D,date:R,time:O,desc:B}).then((function(t){n(20,N=!1),c("Вы записаны, ждите ответа мастера.")})).catch((function(t){c("Ошибка.")})):c("Заполните все поля.")},q,T,u,void 0,_,V,$,()=>n(7,l=!l),()=>n(19,F=!F),()=>n(21,M=!M),t=>t.update({reception:!1}),t=>t.update({reception:!0}),()=>q(),()=>n(22,P=!P),function(){L=this.value,n(23,L)},t=>t.update({subServices:Lt.firestore.FieldValue.arrayUnion(L)}).then(()=>c("Услуга добавлена.")),()=>n(8,h=!h),(t,e)=>E(e,t.uid),function(){m=this.value,n(10,m)},function(){g=this.value,n(11,g)},t=>t.ref.delete(),t=>y(t),()=>n(5,d=1),()=>n(5,d=1),()=>n(5,d=2),()=>n(5,d=2),()=>n(5,d=3),()=>n(5,d=3),()=>n(5,d=4),()=>n(5,d=4),()=>n(5,d=5),()=>n(5,d=5),function(){p=this.value,n(6,p)},t=>A(t.id),t=>w(t),()=>n(20,N=!0),t=>n(24,D=t.target.value),function(){R=this.value,n(25,R)},function(){O=this.value,n(26,O)},function(){B=this.value,n(27,B)},()=>n(20,N=!1),function(){U=this.value,n(18,U)},()=>n(17,I=!I),function(){x=this.value,n(16,x)},t=>t.ref.update({time:x}).then(c("Время изменено.")),t=>t.ref.update({confirmed:!0}).then(c("Принято.")),t=>t.ref.delete().then(c("Отменено.")),()=>n(19,F=!1),function(){k=this.value,n(14,k)},()=>n(15,S=!1),()=>C(),()=>n(2,i=!1)]}var Vs=St(xt((function(t,e){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(!s&&Tt)return Tt();if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){return i(e[a][1][t]||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var o=Tt,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.version="4.0.46"},{}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./utils/properties"),i=(o.isSigner=function(t){return r.isType(t,"Signer")},o);function o(){r.setType(this,"Signer")}n.Signer=i},{"./utils/properties":74}],3:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./utils/bignumber");n.AddressZero="0x0000000000000000000000000000000000000000",n.HashZero="0x0000000000000000000000000000000000000000000000000000000000000000",n.EtherSymbol="Ξ";var i=r.bigNumberify(-1);n.NegativeOne=i;var o=r.bigNumberify(0);n.Zero=o;var a=r.bigNumberify(1);n.One=a;var s=r.bigNumberify(2);n.Two=s;var u=r.bigNumberify("1000000000000000000");n.WeiPerEther=u;var c=r.bigNumberify("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");n.MaxUint256=c},{"./utils/bignumber":63}],4:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("./constants"),u=o(t("./errors")),c=t("./utils/abi-coder"),l=t("./utils/address"),h=t("./utils/bignumber"),f=t("./utils/bytes"),d=t("./utils/interface"),p=t("./utils/properties"),m=t("./providers/abstract-provider"),g=t("./abstract-signer"),v=(i(y,a=g.Signer),y.prototype.getAddress=function(){return Promise.resolve(this.address)},y.prototype._fail=function(t,e){return Promise.resolve().then((function(){u.throwError(t,u.UNSUPPORTED_OPERATION,{operation:e})}))},y.prototype.signMessage=function(t){return this._fail("VoidSigner cannot sign messages","signMessage")},y.prototype.sendTransaction=function(t){return this._fail("VoidSigner cannot sign transactions","sendTransaction")},y.prototype.connect=function(t){return new y(this.address,t)},y);function y(t,e){var n=a.call(this)||this;return p.defineReadOnly(n,"address",t),p.defineReadOnly(n,"provider",e),n}n.VoidSigner=v;var b={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};function w(t,e,n){var r=t.interface.functions[e];return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o={},a=null;if(e.length===r.inputs.length+1&&"object"==typeof e[e.length-1])for(var l in null!=(o=p.shallowCopy(e.pop())).blockTag&&(a=o.blockTag),delete o.blockTag,o)if(!b[l])throw new Error("unknown transaction override "+l);if(e.length!=r.inputs.length)throw new Error("incorrect number of arguments");return["data","to"].forEach((function(t){null!=o[t]&&u.throwError("cannot override "+t,u.UNSUPPORTED_OPERATION,{operation:t})})),o.to=t._deployed(a).then((function(){return t.addressPromise})),function t(e,n,r){if(Array.isArray(r)){var i=[];return r.forEach((function(r,o){var a;a=Array.isArray(n)?n[o]:n[r.name],i.push(t(e,a,r))})),Promise.all(i)}if("address"===r.type)return e.resolveName(n);if("tuple"===r.type)return t(e,n,r.components);var o=r.type.match(/(.*)(\[[0-9]*\]$)/);if(o){if(!Array.isArray(n))throw new Error("invalid value for array");var a=[],s={components:r.components,type:o[1]};return n.forEach((function(n){a.push(t(e,n,s))})),Promise.all(a)}return Promise.resolve(n)}(t.provider,e,r.inputs).then((function(e){if(o.data=r.encode(e),"call"===r.type)return n?Promise.resolve(s.Zero):(t.provider||u.throwError("call (constant functions) require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"call"}),["gasLimit","gasPrice","value"].forEach((function(t){if(null!=o[t])throw new Error("call cannot override "+t)})),null==o.from&&t.signer&&(o.from=t.signer.getAddress()),t.provider.call(o,a).then((function(n){if(f.hexDataLength(n)%32==4&&"0x08c379a0"===f.hexDataSlice(n,0,4)){var i=c.defaultAbiCoder.decode(["string"],f.hexDataSlice(n,4));u.throwError("call revert exception",u.CALL_EXCEPTION,{address:t.address,args:e,method:r.signature,errorSignature:"Error(string)",errorArgs:[i],reason:i,transaction:o})}try{var a=r.decode(n);return 1===r.outputs.length&&(a=a[0]),a}catch(i){throw"0x"===n&&0<r.outputs.length&&u.throwError("call exception",u.CALL_EXCEPTION,{address:t.address,method:r.signature,args:e}),i}})));if("transaction"===r.type)return n?(t.provider||u.throwError("estimate gas require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"estimateGas"}),null==o.from&&t.signer&&(o.from=t.signer.getAddress()),t.provider.estimateGas(o)):(null==o.gasLimit&&null!=r.gas&&(o.gasLimit=h.bigNumberify(r.gas).add(21e3)),t.signer||u.throwError("sending a transaction requires a signer",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=o.from&&u.throwError("cannot override from in a transaction",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.signer.sendTransaction(o).then((function(e){var n=e.wait.bind(e);return e.wait=function(e){return n(e).then((function(e){return e.events=e.logs.map((function(n){var r=p.deepCopy(n),i=t.interface.parseLog(n);return i&&(r.args=i.values,r.decode=i.decode,r.event=i.name,r.eventSignature=i.signature),r.removeListener=function(){return t.provider},r.getBlock=function(){return t.provider.getBlock(e.blockHash)},r.getTransaction=function(){return t.provider.getTransaction(e.transactionHash)},r.getTransactionReceipt=function(){return Promise.resolve(e)},r})),e}))},e})));throw new Error("invalid type - "+r.type)}))}}function _(t){return!t.address||null!=t.topics&&0!==t.topics.length?(t.address||"*")+"@"+(t.topics?t.topics.join(":"):""):"*"}var E=(T.prototype.deployed=function(){return this._deployed()},T.prototype._deployed=function(t){var e=this;return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((function(){return e})):this._deployedPromise=this.provider.getCode(this.address,t).then((function(t){return"0x"===t&&u.throwError("contract not deployed",u.UNSUPPORTED_OPERATION,{contractAddress:e.address,operation:"getDeployed"}),e}))),this._deployedPromise},T.prototype.fallback=function(t){var e=this;this.signer||u.throwError("sending a transaction requires a signer",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});var n=p.shallowCopy(t||{});return["from","to"].forEach((function(t){null!=n[t]&&u.throwError("cannot override "+t,u.UNSUPPORTED_OPERATION,{operation:t})})),n.to=this.addressPromise,this.deployed().then((function(){return e.signer.sendTransaction(n)}))},T.prototype.connect=function(t){"string"==typeof t&&(t=new v(t,this.provider));var e=new T(this.address,this.interface,t);return this.deployTransaction&&p.defineReadOnly(e,"deployTransaction",this.deployTransaction),e},T.prototype.attach=function(t){return new T(t,this.interface,this.signer||this.provider)},T.isIndexed=function(t){return d.Interface.isIndexed(t)},T.prototype._getEventFilter=function(t){var e=this;if("string"==typeof t){if("*"===t)return{prepareEvent:function(t){var n=e.interface.parseLog(t);return n&&(t.args=n.values,t.decode=n.decode,t.event=n.name,t.eventSignature=n.signature),[t]},eventTag:"*",filter:{address:this.address}};-1!==t.indexOf("(")&&(t=c.formatSignature(c.parseSignature("event "+t)));var n=this.interface.events[t];n||u.throwError("unknown event - "+t,u.INVALID_ARGUMENT,{argumnet:"eventName",value:t});var r={address:this.address,topics:[n.topic]};return{prepareEvent:function(t){var e=n.decode(t.data,t.topics);t.args=e;var r=Array.prototype.slice.call(e);return r.push(t),r},event:n,eventTag:_(r),filter:r}}var i={address:this.address},o=null;if(t.topics&&t.topics[0])for(var a in i.topics=t.topics,this.interface.events)if(-1!==a.indexOf("(")){var s=this.interface.events[a];if(s.topic===t.topics[0].toLowerCase()){o=s;break}}return{prepareEvent:function(t){if(!o)return[t];var e=o.decode(t.data,t.topics);t.args=e;var n=Array.prototype.slice.call(e);return n.push(t),n},event:o,eventTag:_(i),filter:i}},T.prototype._addEventListener=function(t,e,n){var r=this;function i(n){var i=p.deepCopy(n),o=t.prepareEvent(i);t.event&&(i.decode=t.event.decode,i.event=t.event.name,i.eventSignature=t.event.signature),i.removeListener=function(){r.removeListener(t.filter,e)},i.getBlock=function(){return r.provider.getBlock(n.blockHash)},i.getTransaction=function(){return r.provider.getTransaction(n.transactionHash)},i.getTransactionReceipt=function(){return r.provider.getTransactionReceipt(n.transactionHash)},r.emit.apply(r,[t.filter].concat(o))}this.provider||u.throwError("events require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"once"}),this.provider.on(t.filter,i),this._events.push({eventFilter:t,listener:e,wrappedListener:i,once:n})},T.prototype.on=function(t,e){return this._addEventListener(this._getEventFilter(t),e,!1),this},T.prototype.once=function(t,e){return this._addEventListener(this._getEventFilter(t),e,!0),this},T.prototype.addListener=function(t,e){return this.on(t,e)},T.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.provider)return!1;var i=!1,o=this._getEventFilter(t);return this._events=this._events.filter((function(t){return t.eventFilter.eventTag!==o.eventTag||(setTimeout((function(){t.listener.apply(e,n)}),0),i=!0,!t.once)})),i},T.prototype.listenerCount=function(t){if(!this.provider)return 0;var e=this._getEventFilter(t);return this._events.filter((function(t){return t.eventFilter.eventTag===e.eventTag})).length},T.prototype.listeners=function(t){if(!this.provider)return[];var e=this._getEventFilter(t);return this._events.filter((function(t){return t.eventFilter.eventTag===e.eventTag})).map((function(t){return t.listener}))},T.prototype.removeAllListeners=function(t){var e=this;if(!this.provider)return this;var n=this._getEventFilter(t);return this._events=this._events.filter((function(t){return t.eventFilter.eventTag!==n.eventTag||(e.provider.removeListener(t.eventFilter.filter,t.wrappedListener),!1)})),this},T.prototype.removeListener=function(t,e){var n=this;if(!this.provider)return this;var r=!1,i=this._getEventFilter(t);return this._events=this._events.filter((function(t){return t.eventFilter.eventTag!==i.eventTag||t.listener!==e||(n.provider.removeListener(t.eventFilter.filter,t.wrappedListener),!!r||!(r=!0))})),this},T);function T(t,e,n){var r=this;if(u.checkNew(this,T),d.Interface.isInterface(e)?p.defineReadOnly(this,"interface",e):p.defineReadOnly(this,"interface",new d.Interface(e)),g.Signer.isSigner(n)?(p.defineReadOnly(this,"provider",n.provider),p.defineReadOnly(this,"signer",n)):m.Provider.isProvider(n)?(p.defineReadOnly(this,"provider",n),p.defineReadOnly(this,"signer",null)):u.throwError("invalid signer or provider",u.INVALID_ARGUMENT,{arg:"signerOrProvider",value:n}),p.defineReadOnly(this,"estimate",{}),p.defineReadOnly(this,"functions",{}),p.defineReadOnly(this,"filters",{}),Object.keys(this.interface.events).forEach((function(t){var e=r.interface.events[t];p.defineReadOnly(r.filters,t,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return{address:r.address,topics:e.encodeTopics(t)}}))})),this._events=[],p.defineReadOnly(this,"address",t),this.provider)p.defineReadOnly(this,"addressPromise",this.provider.resolveName(t).then((function(t){if(null==t)throw new Error("name not found");return t})).catch((function(t){throw t})));else try{p.defineReadOnly(this,"addressPromise",Promise.resolve(l.getAddress(t)))}catch(e){u.throwError("provider is required to use non-address contract address",u.INVALID_ARGUMENT,{argument:"addressOrName",value:t})}Object.keys(this.interface.functions).forEach((function(t){var e=w(r,t,!1);null==r[t]?p.defineReadOnly(r,t,e):u.warn("WARNING: Multiple definitions for "+t),null==r.functions[t]&&(p.defineReadOnly(r.functions,t,e),p.defineReadOnly(r.estimate,t,w(r,t,!0)))}))}n.Contract=E;var S=(x.prototype.getDeployTransaction=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={};if(t.length===this.interface.deployFunction.inputs.length+1)for(var r in n=p.shallowCopy(t.pop()))if(!b[r])throw new Error("unknown transaction override "+r);return["data","from","to"].forEach((function(t){null!=n[t]&&u.throwError("cannot override "+t,u.UNSUPPORTED_OPERATION,{operation:t})})),u.checkArgumentCount(t.length,this.interface.deployFunction.inputs.length," in Contract constructor"),n.data=this.interface.deployFunction.encode(this.bytecode,t),n},x.prototype.deploy=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.getDeployTransaction.apply(this,e);return this.signer.sendTransaction(r).then((function(e){var n=new E(l.getContractAddress(e),t.interface,t.signer);return p.defineReadOnly(n,"deployTransaction",e),n}))},x.prototype.attach=function(t){return new E(t,this.interface,this.signer)},x.prototype.connect=function(t){return new x(this.interface,this.bytecode,t)},x.fromSolidity=function(t,e){null==t&&u.throwError("missing compiler output",u.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof t&&(t=JSON.parse(t));var n=t.abi,r=null;return t.bytecode?r=t.bytecode:t.evm&&t.evm.bytecode&&(r=t.evm.bytecode),new x(n,r,e)},x);function x(t,e,n){var r=null;"string"==typeof e?r=e:f.isArrayish(e)?r=f.hexlify(e):"string"==typeof e.object?r=e.object:u.throwError("bytecode must be a valid hex string",u.INVALID_ARGUMENT,{arg:"bytecode",value:e}),"0x"!==r.substring(0,2)&&(r="0x"+r),f.isHexString(r)||u.throwError("bytecode must be a valid hex string",u.INVALID_ARGUMENT,{arg:"bytecode",value:e}),r.length%2!=0&&u.throwError("bytecode must be valid data (even length)",u.INVALID_ARGUMENT,{arg:"bytecode",value:e}),p.defineReadOnly(this,"bytecode",r),d.Interface.isInterface(t)?p.defineReadOnly(this,"interface",t):p.defineReadOnly(this,"interface",new d.Interface(t)),n&&!g.Signer.isSigner(n)&&u.throwError("invalid signer",u.INVALID_ARGUMENT,{arg:"signer",value:null}),p.defineReadOnly(this,"signer",n||null)}n.ContractFactory=S},{"./abstract-signer":2,"./constants":3,"./errors":5,"./providers/abstract-provider":50,"./utils/abi-coder":59,"./utils/address":60,"./utils/bignumber":63,"./utils/bytes":64,"./utils/interface":69,"./utils/properties":74}],5:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./_version");n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.MISSING_NEW="MISSING_NEW",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.NUMERIC_FAULT="NUMERIC_FAULT",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED";var i=!(n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION"),o=!1;function a(t,e,i){if(o)throw new Error("unknown error");e=e||n.UNKNOWN_ERROR,i=i||{};var a=[];Object.keys(i).forEach((function(t){try{a.push(t+"="+JSON.stringify(i[t]))}catch(e){a.push(t+"="+JSON.stringify(i[t].toString()))}})),a.push("version="+r.version);var s=t;a.length&&(t+=" ("+a.join(", ")+")");var u=new Error(t);throw u.reason=s,u.code=e,Object.keys(i).forEach((function(t){u[t]=i[t]})),u}n.throwError=a,n.checkNew=function(t,e){t instanceof e||a("missing new",n.MISSING_NEW,{name:e.name})},n.checkArgumentCount=function(t,e,r){r=r||"",t<e&&a("missing argument"+r,n.MISSING_ARGUMENT,{count:t,expectedCount:e}),e<t&&a("too many arguments"+r,n.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})},n.setCensorship=function(t,e){i&&a("error censorship permanent",n.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),o=!!t,i=!!e},n.checkNormalize=function(){try{if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{"test".normalize(t)}catch(e){throw new Error("missing "+t)}})),String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){a("platform missing String.prototype.normalize",n.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:t.message})}};var s={debug:1,default:2,info:2,warn:3,error:4,off:5},u=s.default;function c(t,e){u>s[t]||console.log.apply(console,e)}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c("warn",t)}n.setLogLevel=function(t){var e=s[t];null!=e?u=e:l("invliad log level - "+t)},n.warn=l,n.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c("info",t)}},{"./_version":1}],6:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./contract");n.Contract=i.Contract,n.ContractFactory=i.ContractFactory,n.VoidSigner=i.VoidSigner;var o=t("./abstract-signer");n.Signer=o.Signer;var a=t("./wallet");n.Wallet=a.Wallet;var s=r(t("./constants"));n.constants=s;var u=r(t("./errors"));n.errors=u;var c=r(t("./providers"));n.providers=c;var l=r(t("./utils"));n.utils=l;var h=r(t("./wordlists"));n.wordlists=h;var f=t("./utils/shims");n.platform=f.platform;var d=t("./_version");n.version=d.version,n.getDefaultProvider=function(t){null==t&&(t="homestead");var e=l.getNetwork(t);return e&&e._defaultProvider||u.throwError("unsupported getDefaultProvider network",u.UNSUPPORTED_OPERATION,{operation:"getDefaultProvider",network:t}),e._defaultProvider(c)}},{"./_version":1,"./abstract-signer":2,"./constants":3,"./contract":4,"./errors":5,"./providers":54,"./utils":68,"./utils/shims":80,"./wallet":88,"./wordlists":89}],7:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("./ethers"));n.ethers=i,function(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}(t("./ethers"))},{"./ethers":6}],8:[function(t,e,n){!function(t){function r(t){return parseInt(t)===t}function i(t){if(!r(t.length))return!1;for(var e=0;e<t.length;e++)if(!r(t[e])||t[e]<0||255<t[e])return!1;return!0}function o(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!i(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(r(t.length)&&i(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function a(t){return new Uint8Array(t)}function s(t,e,n,r,i){null==r&&null==i||(t=t.slice?t.slice(r,i):Array.prototype.slice.call(t,r,i)),e.set(t,n)}var u,c={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var r=t.charCodeAt(n++);37===r?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(r)}return o(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var r=t[n];r<128?(e.push(String.fromCharCode(r)),n++):191<r&&r<224?(e.push(String.fromCharCode((31&r)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&r)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},l=(u="0123456789abcdef",{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(u[(240&r)>>4]+u[15&r])}return e.join("")}}),h={16:10,24:12,32:14},f=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],d=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],p=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],g=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],v=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],b=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],w=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],_=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],E=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],T=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],S=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],x=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],I=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function k(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var A=function(t){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:o(t,!0)}),this._prepare()};A.prototype._prepare=function(){var t=h[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,r=4*(t+1),i=this.key.length/4,o=k(this.key);for(e=0;e<i;e++)n=e>>2,this._Ke[n][e%4]=o[e],this._Kd[t-n][e%4]=o[e];for(var a,s=0,u=i;u<r;){if(a=o[i-1],o[0]^=d[a>>16&255]<<24^d[a>>8&255]<<16^d[255&a]<<8^d[a>>24&255]^f[s]<<24,s+=1,8!=i)for(e=1;e<i;e++)o[e]^=o[e-1];else{for(e=1;e<i/2;e++)o[e]^=o[e-1];for(a=o[i/2-1],o[i/2]^=d[255&a]^d[a>>8&255]<<8^d[a>>16&255]<<16^d[a>>24&255]<<24,e=i/2+1;e<i;e++)o[e]^=o[e-1]}for(e=0;e<i&&u<r;)c=u>>2,l=u%4,this._Ke[c][l]=o[e],this._Kd[t-c][l]=o[e++],u++}for(var c=1;c<t;c++)for(var l=0;l<4;l++)a=this._Kd[c][l],this._Kd[c][l]=T[a>>24&255]^S[a>>16&255]^x[a>>8&255]^I[255&a]},A.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],r=k(t),i=0;i<4;i++)r[i]^=this._Ke[0][i];for(var o=1;o<e;o++){for(i=0;i<4;i++)n[i]=m[r[i]>>24&255]^g[r[(i+1)%4]>>16&255]^v[r[(i+2)%4]>>8&255]^y[255&r[(i+3)%4]]^this._Ke[o][i];r=n.slice()}var s,u=a(16);for(i=0;i<4;i++)s=this._Ke[e][i],u[4*i]=255&(d[r[i]>>24&255]^s>>24),u[4*i+1]=255&(d[r[(i+1)%4]>>16&255]^s>>16),u[4*i+2]=255&(d[r[(i+2)%4]>>8&255]^s>>8),u[4*i+3]=255&(d[255&r[(i+3)%4]]^s);return u},A.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],r=k(t),i=0;i<4;i++)r[i]^=this._Kd[0][i];for(var o=1;o<e;o++){for(i=0;i<4;i++)n[i]=b[r[i]>>24&255]^w[r[(i+3)%4]>>16&255]^_[r[(i+2)%4]>>8&255]^E[255&r[(i+1)%4]]^this._Kd[o][i];r=n.slice()}var s,u=a(16);for(i=0;i<4;i++)s=this._Kd[e][i],u[4*i]=255&(p[r[i]>>24&255]^s>>24),u[4*i+1]=255&(p[r[(i+3)%4]>>16&255]^s>>16),u[4*i+2]=255&(p[r[(i+2)%4]>>8&255]^s>>8),u[4*i+3]=255&(p[255&r[(i+1)%4]]^s);return u};var C=function(t){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new A(t)};C.prototype.encrypt=function(t){if((t=o(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),r=0;r<t.length;r+=16)s(t,n,0,r,r+16),s(n=this._aes.encrypt(n),e,r);return e},C.prototype.decrypt=function(t){if((t=o(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),r=0;r<t.length;r+=16)s(t,n,0,r,r+16),s(n=this._aes.decrypt(n),e,r);return e};var N=function(t,e){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=a(16);this._lastCipherblock=o(e,!0),this._aes=new A(t)};N.prototype.encrypt=function(t){if((t=o(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),r=0;r<t.length;r+=16){s(t,n,0,r,r+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),s(this._lastCipherblock,e,r)}return e},N.prototype.decrypt=function(t){if((t=o(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),r=0;r<t.length;r+=16){s(t,n,0,r,r+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)e[r+i]=n[i]^this._lastCipherblock[i];s(t,this._lastCipherblock,0,r,r+16)}return e};var M=function(t,e,n){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=a(16);n=n||1,this.segmentSize=n,this._shiftRegister=o(e,!0),this._aes=new A(t)};M.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=o(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)n[r+i]^=e[i];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n},M.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=o(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)n[r+i]^=e[i];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(t,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n};var P=function(t,e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=a(16);this._lastPrecipher=o(e,!0),this._lastPrecipherIndex=16,this._aes=new A(t)};P.prototype.encrypt=function(t){for(var e=o(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},P.prototype.decrypt=P.prototype.encrypt;var L=function(t){if(!(this instanceof L))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=a(16),this.setValue(t)):this.setBytes(t)};L.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");for(var e=15;0<=e;--e)this._counter[e]=t%256,t>>=8},L.prototype.setBytes=function(t){if(16!=(t=o(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},L.prototype.increment=function(){for(var t=15;0<=t;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var D=function(t,e){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof L||(e=new L(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new A(t)};D.prototype.encrypt=function(t){for(var e=o(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},D.prototype.decrypt=D.prototype.encrypt;var R={AES:A,Counter:L,ModeOfOperation:{ecb:C,cbc:N,cfb:M,ofb:P,ctr:D},utils:{hex:l,utf8:c},padding:{pkcs7:{pad:function(t){var e=16-(t=o(t,!0)).length%16,n=a(t.length+e);s(t,n);for(var r=t.length;r<n.length;r++)n[r]=e;return n},strip:function(t){if((t=o(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(16<e)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,r=0;r<e;r++)if(t[n+r]!==e)throw new Error("PKCS#7 invalid padding byte");var i=a(n);return s(t,i,0,0,n),i}}},_arrayTest:{coerceArray:o,createArray:a,copyArray:s}};void 0!==n?e.exports=R:(t.aesjs&&(R._aesjs=t.aesjs),t.aesjs=R)}(this)},{}],9:[function(t,e,n){!function(e,n){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){function n(){}t.super_=e,n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,(this.red=null)!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var a;"object"==typeof e?e.exports=o:n.BN=o,(o.BN=o).wordSize=26;try{a=t("buffer").Buffer}catch(e){}function s(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var a=t.charCodeAt(o)-48;r<<=4,r|=49<=a&&a<=54?a-49+10:17<=a&&a<=22?a-17+10:15&a}return r}function u(t,e,n,r){for(var i=0,o=Math.min(t.length,n),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=r,i+=49<=s?s-49+10:17<=s?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return 0<t.cmp(e)?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&2<=e&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=t.length-1,o=0;0<=i;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,26<=(s+=24)&&(s-=26,o++);else if("le"===n)for(o=i=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,26<=(s+=24)&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;e<=n;n-=6)i=s(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,26<=(o+=24)&&(o-=26,r++);n+6!==e&&(i=s(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0];for(var r=0,i=this.length=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,c=0,l=n;l<s;l+=r)c=u(t,l,l+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!=a){var h=1;for(c=u(t,l,t.length,e),l=0;l<a;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;r=(n.length=r)-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;l+=(a=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);n=0!=(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+n:u+n,26<=(i+=2)&&(i-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&2<=t&&t<=36){var f=l[t],d=h[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?m+n:c[f-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(0<o,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,c=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var e=t,n=0;return 4096<=e&&(n+=13,e>>>=13),64<=e&&(n+=7,e>>>=7),8<=e&&(n+=4,e>>>=4),2<=e&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;n=this.length>t.length?(e=this,t):(e=t,this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&0<=t);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),0<n&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return 0<n&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&0<=t);var n=t/26|0,i=t%26;return this._expand(1+n),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();r=this.length>t.length?(n=this,t):(n=t,this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;r=0<i?(n=this,t):(n=t,this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],v=8191&g,y=g>>>13,b=0|a[3],w=8191&b,_=b>>>13,E=0|a[4],T=8191&E,S=E>>>13,x=0|a[5],I=8191&x,k=x>>>13,A=0|a[6],C=8191&A,N=A>>>13,M=0|a[7],P=8191&M,L=M>>>13,D=0|a[8],R=8191&D,O=D>>>13,B=0|a[9],U=8191&B,F=B>>>13,j=0|s[0],q=8191&j,V=j>>>13,$=0|s[1],z=8191&$,H=$>>>13,G=0|s[2],W=8191&G,K=G>>>13,Z=0|s[3],Q=8191&Z,Y=Z>>>13,J=0|s[4],X=8191&J,tt=J>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,ct=st>>>13,lt=0|s[8],ht=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,mt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,q)|0))<<13)|0;c=((o=Math.imul(f,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,V))+Math.imul(m,q)|0,o=Math.imul(m,V);var vt=(c+(r=r+Math.imul(h,z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,z)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,q),i=(i=Math.imul(v,V))+Math.imul(y,q)|0,o=Math.imul(y,V),r=r+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var yt=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,V))+Math.imul(_,q)|0,o=Math.imul(_,V),r=r+Math.imul(v,z)|0,i=(i=i+Math.imul(v,H)|0)+Math.imul(y,z)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,K)|0;var bt=(c+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,V))+Math.imul(S,q)|0,o=Math.imul(S,V),r=r+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(v,W)|0,i=(i=i+Math.imul(v,K)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,K)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,Y)|0;var wt=(c+(r=r+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,X)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(I,q),i=(i=Math.imul(I,V))+Math.imul(k,q)|0,o=Math.imul(k,V),r=r+Math.imul(T,z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(S,z)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,K)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,K)|0,r=r+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,tt)|0;var _t=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(C,q),i=(i=Math.imul(C,V))+Math.imul(N,q)|0,o=Math.imul(N,V),r=r+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,z)|0,o=o+Math.imul(k,H)|0,r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(S,W)|0,o=o+Math.imul(S,K)|0,r=r+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(v,X)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0;var Et=(c+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(P,q),i=(i=Math.imul(P,V))+Math.imul(L,q)|0,o=Math.imul(L,V),r=r+Math.imul(C,z)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(I,W)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(k,W)|0,o=o+Math.imul(k,K)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,Y)|0,r=r+Math.imul(w,X)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(v,nt)|0,i=(i=i+Math.imul(v,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Tt=(c+(r=r+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(f,ut)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(R,q),i=(i=Math.imul(R,V))+Math.imul(O,q)|0,o=Math.imul(O,V),r=r+Math.imul(P,z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(L,z)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(C,W)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,K)|0,r=r+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,Y)|0,r=r+Math.imul(T,X)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(w,nt)|0,i=(i=i+Math.imul(w,rt)|0)+Math.imul(_,nt)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(v,ot)|0,i=(i=i+Math.imul(v,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ct)|0;var St=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(U,q),i=(i=Math.imul(U,V))+Math.imul(F,q)|0,o=Math.imul(F,V),r=r+Math.imul(R,z)|0,i=(i=i+Math.imul(R,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,r=r+Math.imul(P,W)|0,i=(i=i+Math.imul(P,K)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,K)|0,r=r+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,Y)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,at)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,r=r+Math.imul(v,ut)|0,i=(i=i+Math.imul(v,ct)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var xt=(c+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;c=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(F,z)|0,o=Math.imul(F,H),r=r+Math.imul(R,W)|0,i=(i=i+Math.imul(R,K)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,K)|0,r=r+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(C,X)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,tt)|0,r=r+Math.imul(I,nt)|0,i=(i=i+Math.imul(I,rt)|0)+Math.imul(k,nt)|0,o=o+Math.imul(k,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,r=r+Math.imul(w,ut)|0,i=(i=i+Math.imul(w,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,r=r+Math.imul(v,ht)|0,i=(i=i+Math.imul(v,ft)|0)+Math.imul(y,ht)|0,o=o+Math.imul(y,ft)|0;var It=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;c=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,W),i=(i=Math.imul(U,K))+Math.imul(F,W)|0,o=Math.imul(F,K),r=r+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,Y)|0,r=r+Math.imul(P,X)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(C,nt)|0,i=(i=i+Math.imul(C,rt)|0)+Math.imul(N,nt)|0,o=o+Math.imul(N,rt)|0,r=r+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,at)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,at)|0,r=r+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(w,ht)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var kt=(c+(r=r+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,mt)|0)+Math.imul(y,pt)|0))<<13)|0;c=((o=o+Math.imul(y,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),i=(i=Math.imul(U,Y))+Math.imul(F,Q)|0,o=Math.imul(F,Y),r=r+Math.imul(R,X)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,at)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,r=r+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(k,ut)|0,o=o+Math.imul(k,ct)|0,r=r+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var At=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,X),i=(i=Math.imul(U,tt))+Math.imul(F,X)|0,o=Math.imul(F,tt),r=r+Math.imul(R,nt)|0,i=(i=i+Math.imul(R,rt)|0)+Math.imul(O,nt)|0,o=o+Math.imul(O,rt)|0,r=r+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,r=r+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,ct)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,ct)|0,r=r+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var Ct=(c+(r=r+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(S,pt)|0))<<13)|0;c=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,nt),i=(i=Math.imul(U,rt))+Math.imul(F,nt)|0,o=Math.imul(F,rt),r=r+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,at)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,at)|0,r=r+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,ct)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ct)|0,r=r+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(N,ht)|0,o=o+Math.imul(N,ft)|0;var Nt=(c+(r=r+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,pt)|0))<<13)|0;c=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(U,ot),i=(i=Math.imul(U,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),r=r+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,ct)|0)+Math.imul(O,ut)|0,o=o+Math.imul(O,ct)|0,r=r+Math.imul(P,ht)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Mt=(c+(r=r+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(N,pt)|0))<<13)|0;c=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(U,ut),i=(i=Math.imul(U,ct))+Math.imul(F,ut)|0,o=Math.imul(F,ct),r=r+Math.imul(R,ht)|0,i=(i=i+Math.imul(R,ft)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ft)|0;var Pt=(c+(r=r+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(U,ht),i=(i=Math.imul(U,ft))+Math.imul(F,ht)|0,o=Math.imul(F,ft);var Lt=(c+(r=r+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,mt)|0)+Math.imul(O,pt)|0))<<13)|0;c=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Dt=(c+(r=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(F,pt)|0))<<13)|0;return c=((o=Math.imul(F,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,u[0]=gt,u[1]=vt,u[2]=yt,u[3]=bt,u[4]=wt,u[5]=_t,u[6]=Et,u[7]=Tt,u[8]=St,u[9]=xt,u[10]=It,u[11]=kt,u[12]=At,u[13]=Ct,u[14]=Nt,u[15]=Mt,u[16]=Pt,u[17]=Lt,u[18]=Dt,0!==c&&(u[19]=c,n.length++),n};function p(t,e,n){return(new m).mulp(t,e,n)}function m(t,e){this.x=t,this.y=e}Math.imul||(d=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):p(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},m.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},m.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},m.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],g=n[l+d+a],v=r[l+d+a],y=h*g-f*v;v=h*v+f*g,g=y,n[l+d]=p+g,r[l+d]=m+v,n[l+d+a]=p-g,r[l+d+a]=m-v,d!==s&&(y=u*h-c*f,f=u*f+c*h,h=y)}},m.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},m.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},m.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,n,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)n[a]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},m.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),p(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&0<=t);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!=n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<n;this.words[e]=u|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!=i){for(e=this.length-1;0<=e;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&0<=t),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;0<=c&&(0!==l||i<=c);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&0<=t);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n||!(this.words[n]&i))},o.prototype.imaskn=function(t){r("number"==typeof t&&0<=t);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!=e&&n++,this.length=Math.min(n,this.length),0!=e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&67108864<=this.words[e];e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,a=t.length+n;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)s=(o=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&o;if(0===s)return this.strip();for(r(-1===s),i=s=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new o(null)).length=1+u,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;0<=h;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==e&&0!=n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;0<=i;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;0<=n;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(0<f)for(e.iushrn(f);0<f--;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(0<p)for(n.iushrn(p);0<p--;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);0<=e.cmp(n)?(e.isub(n),i.isub(s),a.isub(u)):(n.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=n.clone();0<e.cmpn(1)&&0<n.cmpn(1);){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(0<c)for(e.iushrn(c);0<c--;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(0<h)for(n.iushrn(h);0<h--;)s.isOdd()&&s.iadd(u),s.iushrn(1);0<=e.cmp(n)?(e.isub(n),a.isub(s)):(n.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0;for(var r=n.negative=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(1+n),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),1<this.length)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;0<=n;n--){var r=0|this.words[n],i=0|t.words[n];if(r!=i){r<i?e=-1:i<r&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return 0<=this.cmpn(t)},o.prototype.gte=function(t){return 0<=this.cmp(t)},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){for(var e,n=t;this.split(n,this.tmp),(e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength())>this.n;);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(y,v),y.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,0===(t.words[r-10]=i)&&10<t.length?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(_,v),_.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new _}return g[t]=e},E.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return 0<=n.cmp(this.m)&&n.isub(this.m),n._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return 0<=n.cmp(this.m)&&n.isub(this.m),n},E.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=a;0!==d.cmp(s);){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var v=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(v),h=v.redSqr(),d=d.redMul(h),p=g}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;0<=r;r--){for(var c=e.words[r],l=u-1;0<=l;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!=h||0!==a?(a<<=1,a|=h,(4==++s||0===r&&0===l)&&(i=this.mul(i,n[a]),a=s=0)):s=0}u=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,E),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return 0<=i.cmp(this.m)?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return 0<=i.cmp(this.m)?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)},{buffer:11}],10:[function(t,e,n){(function(t){e.exports=function(e){var n=new Uint8Array(e);return(t.crypto||t.msCrypto).getRandomValues(n),n}}).call(this,void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e,n){},{}],12:[function(t,e,n){var r=n;r.version=t("../package.json").version,r.utils=t("./elliptic/utils"),r.rand=t("brorand"),r.curve=t("./elliptic/curve"),r.curves=t("./elliptic/curves"),r.ec=t("./elliptic/ec"),r.eddsa=t("./elliptic/eddsa")},{"../package.json":25,"./elliptic/curve":15,"./elliptic/curves":18,"./elliptic/ec":19,"./elliptic/eddsa":22,"./elliptic/utils":24,brorand:10}],13:[function(t,e,n){var r=t("bn.js"),i=t("../utils"),o=i.getNAF,a=i.getJSF,s=i.assert;function u(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||0<n.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}(e.exports=u).prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var n=t._getDoubles(),r=o(e,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;for(var a=[],u=0;u<r.length;u+=n.step){var c=0;for(e=u+n.step-1;u<=e;e--)c=(c<<1)+r[e];a.push(c)}for(var l=this.jpoint(null,null,null),h=this.jpoint(null,null,null),f=i;0<f;f--){for(u=0;u<a.length;u++)(c=a[u])===f?h=h.mixedAdd(n.points[u]):c===-f&&(h=h.mixedAdd(n.points[u].neg()));l=l.add(h)}return l.toP()},u.prototype._wnafMul=function(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var i=r.points,a=o(e,n,this._bitLength),u=this.jpoint(null,null,null),c=a.length-1;0<=c;c--){for(e=0;0<=c&&0===a[c];c--)e++;if(0<=c&&e++,u=u.dblp(e),c<0)break;var l=a[c];s(0!==l),u="affine"===t.type?0<l?u.mixedAdd(i[l-1>>1]):u.mixedAdd(i[-l-1>>1].neg()):0<l?u.add(i[l-1>>1]):u.add(i[-l-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,n,r,i){for(var s=this._wnafT1,u=this._wnafT2,c=this._wnafT3,l=0,h=0;h<r;h++){var f=(x=e[h])._getNAFPoints(t);s[h]=f.wnd,u[h]=f.points}for(h=r-1;1<=h;h-=2){var d=h-1,p=h;if(1===s[d]&&1===s[p]){var m=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(m[1]=e[d].add(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].add(e[p].neg())):(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=a(n[d],n[p]);l=Math.max(v[0].length,l),c[d]=new Array(l),c[p]=new Array(l);for(var y=0;y<l;y++){var b=0|v[0][y],w=0|v[1][y];c[d][y]=g[3*(1+b)+(1+w)],c[p][y]=0,u[d]=m}}else c[d]=o(n[d],s[d],this._bitLength),c[p]=o(n[p],s[p],this._bitLength),l=Math.max(c[d].length,l),l=Math.max(c[p].length,l)}var _=this.jpoint(null,null,null),E=this._wnafT4;for(h=l;0<=h;h--){for(var T=0;0<=h;){var S=!0;for(y=0;y<r;y++)E[y]=0|c[y][h],0!==E[y]&&(S=!1);if(!S)break;T++,h--}if(0<=h&&T++,_=_.dblp(T),h<0)break;for(y=0;y<r;y++){var x,I=E[y];0!==I&&(0<I?x=u[y][I-1>>1]:I<0&&(x=u[y][-I-1>>1].neg()),_="affine"===x.type?_.mixedAdd(x):_.add(x))}}for(h=0;h<r;h++)u[h]=null;return i?_:_.toP()},(u.BasePoint=c).prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},c.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},c.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1==n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}},{"../utils":24,"bn.js":9}],14:[function(t,e,n){e.exports={}},{}],15:[function(t,e,n){var r=n;r.base=t("./base"),r.short=t("./short"),r.mont=t("./mont"),r.edwards=t("./edwards")},{"./base":13,"./edwards":14,"./mont":16,"./short":17}],16:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],17:[function(t,e,n){var r=t("../utils"),i=t("bn.js"),o=t("inherits"),a=t("./base"),s=r.assert;function u(t){a.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,n,r){a.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(t,e,n,r){a.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),(e.exports=u).prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)n=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?n=o[0]:(n=o[1],s(0===this.g.mul(n).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:n,basis:t.basis?t.basis.map((function(t){return{a:new i(t.a,16),b:new i(t.b,16)}})):this._getEndoBasis(n)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),n=new i(2).toRed(e).redInvm(),r=n.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(n);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,n,r,o,a,s,u,c,l,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i(1),m=new i(0),g=new i(0),v=new i(1),y=0;0!==f.cmpn(0);){var b=d.div(f);c=d.sub(b.mul(f)),l=g.sub(b.mul(p));var w=v.sub(b.mul(m));if(!r&&c.cmp(h)<0)e=u.neg(),n=p,r=c.neg(),o=l;else if(r&&2==++y)break;d=f,f=u=c,g=p,p=l,v=m,m=w}a=c.neg(),s=l;var _=r.sqr().add(o.sqr());return 0<=a.sqr().add(s.sqr()).cmp(_)&&(a=e,s=n),r.negative&&(r=r.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:r,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],r=e[1],i=r.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),a=i.mul(n.a),s=o.mul(r.a),u=i.mul(n.b),c=o.mul(r.b);return{k1:t.sub(a).sub(s),k2:u.add(c).neg()}},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(e&&!o||!e&&o)&&(r=r.redNeg()),this.point(t,r)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),r[2*o]=s,r[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,r,i,2*o,n),l=0;l<2*o;l++)r[l]=null,i[l]=null;return c},o(c,a.BasePoint),u.prototype.point=function(t,e,n){return new c(this,t,e,n)},u.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,r=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};(t.beta=e).precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,n){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],n);if(!e[2])return r;function i(e){return t.point(e[0],e[1],n)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},c.prototype.jmulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,a.BasePoint),u.prototype.jpoint=function(t,e,n){return new l(this,t,e,n)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(n,r)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(e),i=t.x.redMul(n),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),s=r.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),h=r.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,d,p)},l.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,r=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=n.redSub(r),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=n.redMul(u),h=s.redSqr().redIAdd(c).redISub(l).redISub(l),f=s.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(h,f,d)},l.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}var r=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(n=0;n<t;n++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(u)),p=o.redMul(h),m=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=d.redMul(g);v=v.redIAdd(v).redISub(f);var y=c.redMul(s);n+1<t&&(u=u.redMul(f)),o=m,s=y,c=v}return this.curve.jpoint(o,c.redMul(i),s)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=u,e=s.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),m=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,e,n)},l.prototype._threeDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=s.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,n)},l.prototype._dbl=function(){var t=this.curve.a,e=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=e.redSqr(),a=n.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),c=(u=u.redIAdd(u)).redMul(a),l=s.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=s.redMul(h).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(l,d,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),r=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(r),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),l=e.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(s).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(a).redSqr().redISub(n).redISub(s);return this.curve.jpoint(h,f,d)},l.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},l.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),i=n.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(r)).cmpn(0)},l.prototype.eqXToP=function(t){var e=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(n))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),0<=r.cmp(this.curve.p))return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../utils":24,"./base":13,"bn.js":9,inherits:39}],18:[function(t,e,n){var r,i=n,o=t("hash.js"),a=t("./curve"),s=t("./utils").assert;function u(t){"short"===t.type?this.curve=new a.short(t):"edwards"===t.type?this.curve=new a.edwards(t):this.curve=new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var n=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=u,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=t("./precomputed/secp256k1")}catch(t){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},{"./curve":15,"./precomputed/secp256k1":23,"./utils":24,"hash.js":26}],19:[function(t,e,n){var r=t("bn.js"),i=t("hmac-drbg"),o=t("../utils"),a=t("../curves"),s=t("brorand"),u=o.assert,c=t("./key"),l=t("./signature");function h(t){if(!(this instanceof h))return new h(t);"string"==typeof t&&(u(a.hasOwnProperty(t),"Unknown curve "+t),t=a[t]),t instanceof a.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}(e.exports=h).prototype.keyPair=function(t){return new c(this,t)},h.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},h.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},h.prototype.genKeyPair=function(t){t=t||{};for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||s(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new r(2));;){var a=new r(e.generate(n));if(!(0<a.cmp(o)))return a.iaddn(1),this.keyFromPrivate(a)}},h.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return 0<n&&(t=t.ushrn(n)),!e&&0<=t.cmp(this.n)?t.sub(this.n):t},h.prototype.sign=function(t,e,n,o){"object"==typeof n&&(o=n,n=null),o=o||{},e=this.keyFromPrivate(e,n),t=this._truncateToN(new r(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),u=t.toArray("be",a),c=new i({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new r(1)),f=0;;f++){var d=o.k?o.k(f):new r(c.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||0<=d.cmp(h))){var p=this.g.mul(d);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var v=d.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&0<v.cmp(this.nh)&&(v=this.n.sub(v),y^=1),new l({r:g,s:v,recoveryParam:y})}}}}}},h.prototype.verify=function(t,e,n,i){t=this._truncateToN(new r(t,16)),n=this.keyFromPublic(n,i);var o=(e=new l(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||0<=o.cmp(this.n))return!1;if(a.cmpn(1)<0||0<=a.cmp(this.n))return!1;var s,u=a.invm(this.n),c=u.mul(t).umod(this.n),h=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,n.getPublic(),h)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(c,n.getPublic(),h)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(t,e,n,i){u((3&n)===n,"The recovery param is more than two bits"),e=new l(e,i);var o=this.n,a=new r(t),s=e.r,c=e.s,h=1&n,f=n>>1;if(0<=s.cmp(this.curve.p.umod(this.curve.n))&&f)throw new Error("Unable to find sencond key candinate");s=f?this.curve.pointFromX(s.add(this.curve.n),h):this.curve.pointFromX(s,h);var d=e.r.invm(o),p=o.sub(a).mul(d).umod(o),m=c.mul(d).umod(o);return this.g.mulAdd(p,s,m)},h.prototype.getKeyRecoveryParam=function(t,e,n,r){if(null!==(e=new l(e,r)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},{"../curves":18,"../utils":24,"./key":20,"./signature":21,"bn.js":9,brorand:10,"hmac-drbg":38}],20:[function(t,e,n){var r=t("bn.js"),i=t("../utils").assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}(e.exports=o).fromPublic=function(t,e,n){return e instanceof o?e:new o(t,{pub:e,pubEnc:n})},o.fromPrivate=function(t,e,n){return e instanceof o?e:new o(t,{priv:e,privEnc:n})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.mul(this.priv).getX()},o.prototype.sign=function(t,e,n){return this.ec.sign(t,this,e,n)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":24,"bn.js":9}],21:[function(t,e,n){var r=t("bn.js"),i=t("../utils"),o=i.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var n=t[e.place++];if(!(128&n))return n;for(var r=15&n,i=0,o=0,a=e.place;o<r;o++,a++)i<<=8,i|=t[a];return e.place=a,i}function c(t){for(var e=0,n=t.length-1;!t[e]&&!(128&t[e+1])&&e<n;)e++;return 0===e?t:t.slice(e)}function l(t,e){if(e<128)t.push(e);else{var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(e>>>(n<<3)&255);t.push(e)}}(e.exports=a).prototype._importDER=function(t,e){t=i.toArray(t,e);var n=new s;if(48!==t[n.place++])return!1;if(u(t,n)+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var o=u(t,n),a=t.slice(n.place,o+n.place);if(n.place+=o,2!==t[n.place++])return!1;var c=u(t,n);if(t.length!==c+n.place)return!1;var l=t.slice(n.place,c+n.place);return 0===a[0]&&128&a[1]&&(a=a.slice(1)),0===l[0]&&128&l[1]&&(l=l.slice(1)),this.r=new r(a),this.s=new r(l),!(this.recoveryParam=null)},a.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n)),e=c(e),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];l(r,e.length),(r=r.concat(e)).push(2),l(r,n.length);var o=r.concat(n),a=[48];return l(a,o.length),a=a.concat(o),i.encode(a,t)}},{"../utils":24,"bn.js":9}],22:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],23:[function(t,e,n){e.exports=void 0},{}],24:[function(t,e,n){var r=n,i=t("bn.js"),o=t("minimalistic-assert"),a=t("minimalistic-crypto-utils");r.assert=o,r.toArray=a.toArray,r.zero2=a.zero2,r.toHex=a.toHex,r.encode=a.encode,r.getNAF=function(t,e,n){var r=new Array(Math.max(t.bitLength(),n)+1);r.fill(0);for(var i=1<<e+1,o=t.clone(),a=0;a<r.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=(i>>1)-1<u?(i>>1)-u:u,o.isubn(s)):s=0,r[a]=s,o.iushrn(1)}return r},r.getJSF=function(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var r=0,i=0;0<t.cmpn(-r)||0<e.cmpn(-i);){var o,a,s,u=t.andln(3)+r&3,c=e.andln(3)+i&3;3===u&&(u=-1),3===c&&(c=-1),o=0==(1&u)?0:3!=(s=t.andln(7)+r&7)&&5!==s||2!==c?u:-u,n[0].push(o),a=0==(1&c)?0:3!=(s=e.andln(7)+i&7)&&5!==s||2!==u?c:-c,n[1].push(a),2*r===o+1&&(r=1-r),2*i===a+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return n},r.cachedProperty=function(t,e,n){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new i(t,"hex","le")}},{"bn.js":9,"minimalistic-assert":41,"minimalistic-crypto-utils":42}],25:[function(t,e,n){e.exports={version:"6.5.2"}},{}],26:[function(t,e,n){var r=n;r.utils=t("./hash/utils"),r.common=t("./hash/common"),r.sha=t("./hash/sha"),r.ripemd=t("./hash/ripemd"),r.hmac=t("./hash/hmac"),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},{"./hash/common":27,"./hash/hmac":28,"./hash/ripemd":29,"./hash/sha":30,"./hash/utils":37}],27:[function(t,e,n){var r=t("./utils"),i=t("minimalistic-assert");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}(n.BlockHash=o).prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,n=e-(t+this.padLength)%e,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=t>>>24&255,r[i++]=t>>>16&255,r[i++]=t>>>8&255,r[i++]=255&t}else for(r[i++]=255&t,r[i++]=t>>>8&255,r[i++]=t>>>16&255,r[i++]=t>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},{"./utils":37,"minimalistic-assert":41}],28:[function(t,e,n){var r=t("./utils"),i=t("minimalistic-assert");function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,n))}(e.exports=o).prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},{"./utils":37,"minimalistic-assert":41}],29:[function(t,e,n){var r=t("./utils"),i=t("./common"),o=r.rotl32,a=r.sum32,s=r.sum32_3,u=r.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(l,c),(n.ripemd160=l).blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(t,e){for(var n=this.h[0],r=this.h[1],i=this.h[2],c=this.h[3],l=this.h[4],y=n,b=r,w=i,_=c,E=l,T=0;T<80;T++){var S=a(o(u(n,h(T,r,i,c),t[p[T]+e],f(T)),g[T]),l);n=l,l=c,c=o(i,10),i=r,r=S,S=a(o(u(y,h(79-T,b,w,_),t[m[T]+e],d(T)),v[T]),E),y=E,E=_,_=o(w,10),w=b,b=S}S=s(this.h[1],i,_),this.h[1]=s(this.h[2],c,E),this.h[2]=s(this.h[3],l,y),this.h[3]=s(this.h[4],n,b),this.h[4]=s(this.h[0],r,w),this.h[0]=S},l.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":27,"./utils":37}],30:[function(t,e,n){n.sha1=t("./sha/1"),n.sha224=t("./sha/224"),n.sha256=t("./sha/256"),n.sha384=t("./sha/384"),n.sha512=t("./sha/512")},{"./sha/1":31,"./sha/224":32,"./sha/256":33,"./sha/384":34,"./sha/512":35}],31:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],32:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],33:[function(t,e,n){var r=t("../utils"),i=t("../common"),o=t("./common"),a=t("minimalistic-assert"),s=r.sum32,u=r.sum32_4,c=r.sum32_5,l=o.ch32,h=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,m=o.g1_256,g=i.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}r.inherits(y,g),(e.exports=y).blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=u(m(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],w=this.h[6],_=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var E=c(_,d(y),l(y,b,w),this.k[r],n[r]),T=s(f(i),h(i,o,g));_=w,w=b,b=y,y=s(v,E),v=g,g=o,o=i,i=s(E,T)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],v),this.h[4]=s(this.h[4],y),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],w),this.h[7]=s(this.h[7],_)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":27,"../utils":37,"./common":36,"minimalistic-assert":41}],34:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],35:[function(t,e,n){var r=t("../utils"),i=t("../common"),o=t("minimalistic-assert"),a=r.rotr64_hi,s=r.rotr64_lo,u=r.shr64_hi,c=r.shr64_lo,l=r.sum64,h=r.sum64_hi,f=r.sum64_lo,d=r.sum64_4_hi,p=r.sum64_4_lo,m=r.sum64_5_hi,g=r.sum64_5_lo,v=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function w(t,e,n,r,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function _(t,e,n,r,i,o){var a=e&r^~e&o;return a<0&&(a+=4294967296),a}function E(t,e,n,r,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function T(t,e,n,r,i,o){var a=e&r^e&o^r&o;return a<0&&(a+=4294967296),a}function S(t,e){var n=a(t,e,28)^a(e,t,2)^a(e,t,7);return n<0&&(n+=4294967296),n}function x(t,e){var n=s(t,e,28)^s(e,t,2)^s(e,t,7);return n<0&&(n+=4294967296),n}function I(t,e){var n=a(t,e,14)^a(t,e,18)^a(e,t,9);return n<0&&(n+=4294967296),n}function k(t,e){var n=s(t,e,14)^s(t,e,18)^s(e,t,9);return n<0&&(n+=4294967296),n}function A(t,e){var n=a(t,e,1)^a(t,e,8)^u(t,e,7);return n<0&&(n+=4294967296),n}function C(t,e){var n=s(t,e,1)^s(t,e,8)^c(t,e,7);return n<0&&(n+=4294967296),n}function N(t,e){var n=a(t,e,19)^a(e,t,29)^u(t,e,6);return n<0&&(n+=4294967296),n}function M(t,e){var n=s(t,e,19)^s(e,t,29)^c(t,e,6);return n<0&&(n+=4294967296),n}r.inherits(b,v),(e.exports=b).blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var n=this.W,r=0;r<32;r++)n[r]=t[e+r];for(;r<n.length;r+=2){var i=N(n[r-4],n[r-3]),o=M(n[r-4],n[r-3]),a=n[r-14],s=n[r-13],u=A(n[r-30],n[r-29]),c=C(n[r-30],n[r-29]),l=n[r-32],h=n[r-31];n[r]=d(i,o,a,s,u,c,l,h),n[r+1]=p(i,o,a,s,u,c,l,h)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var n=this.W,r=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],d=this.h[6],p=this.h[7],v=this.h[8],y=this.h[9],b=this.h[10],A=this.h[11],C=this.h[12],N=this.h[13],M=this.h[14],P=this.h[15];o(this.k.length===n.length);for(var L=0;L<n.length;L+=2){var D=M,R=P,O=I(v,y),B=k(v,y),U=w(v,0,b,0,C),F=_(0,y,0,A,0,N),j=this.k[L],q=this.k[L+1],V=n[L],$=n[L+1],z=m(D,R,O,B,U,F,j,q,V,$),H=g(D,R,O,B,U,F,j,q,V,$);D=S(r,i),R=x(r,i),O=E(r,0,a,0,u),B=T(0,i,0,s,0,c);var G=h(D,R,O,B),W=f(D,R,O,B);M=C,P=N,C=b,N=A,b=v,A=y,v=h(d,p,z,H),y=f(p,p,z,H),d=u,p=c,u=a,c=s,a=r,s=i,r=h(z,H,G,W),i=f(z,H,G,W)}l(this.h,0,r,i),l(this.h,2,a,s),l(this.h,4,u,c),l(this.h,6,d,p),l(this.h,8,v,y),l(this.h,10,b,A),l(this.h,12,C,N),l(this.h,14,M,P)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":27,"../utils":37,"minimalistic-assert":41}],36:[function(t,e,n){var r=t("../utils").rotr32;function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function a(t,e,n){return t^e^n}n.ft_1=function(t,e,n,r){return 0===t?i(e,n,r):1===t||3===t?a(e,n,r):2===t?o(e,n,r):void 0},n.ch32=i,n.maj32=o,n.p32=a,n.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},n.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},n.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},n.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},{"../utils":37}],37:[function(t,e,n){var r=t("minimalistic-assert"),i=t("inherits");function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function s(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}n.inherits=i,n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}else for(var r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,a=255&i;o?n.push(o,a):n.push(a)}else for(r=0;r<t.length;r++)n[r]=0|t[r];return n},n.toHex=function(t){for(var e="",n=0;n<t.length;n++)e+=a(t[n].toString(16));return e},n.htonl=o,n.toHex32=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];"little"===e&&(i=o(i)),n+=s(i.toString(16))}return n},n.zero2=a,n.zero8=s,n.join32=function(t,e,n,i){var o=n-e;r(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4){var c;c="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=c>>>0}return a},n.split32=function(t,e){for(var n=new Array(4*t.length),r=0,i=0;r<t.length;r++,i+=4){var o=t[r];"big"===e?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},n.rotr32=function(t,e){return t>>>e|t<<32-e},n.rotl32=function(t,e){return t<<e|t>>>32-e},n.sum32=function(t,e){return t+e>>>0},n.sum32_3=function(t,e,n){return t+e+n>>>0},n.sum32_4=function(t,e,n,r){return t+e+n+r>>>0},n.sum32_5=function(t,e,n,r,i){return t+e+n+r+i>>>0},n.sum64=function(t,e,n,r){var i=t[e],o=r+t[e+1]>>>0,a=(o<r?1:0)+n+i;t[e]=a>>>0,t[e+1]=o},n.sum64_hi=function(t,e,n,r){return(e+r>>>0<e?1:0)+t+n>>>0},n.sum64_lo=function(t,e,n,r){return e+r>>>0},n.sum64_4_hi=function(t,e,n,r,i,o,a,s){var u=0,c=e;return u+=(c=c+r>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+n+i+a+(u+=(c=c+s>>>0)<s?1:0)>>>0},n.sum64_4_lo=function(t,e,n,r,i,o,a,s){return e+r+o+s>>>0},n.sum64_5_hi=function(t,e,n,r,i,o,a,s,u,c){var l=0,h=e;return l+=(h=h+r>>>0)<e?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+s>>>0)<s?1:0,t+n+i+a+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},n.sum64_5_lo=function(t,e,n,r,i,o,a,s,u,c){return e+r+o+s+c>>>0},n.rotr64_hi=function(t,e,n){return(e<<32-n|t>>>n)>>>0},n.rotr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0},n.shr64_hi=function(t,e,n){return t>>>n},n.shr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0}},{inherits:39,"minimalistic-assert":41}],38:[function(t,e,n){var r=t("hash.js"),i=t("minimalistic-crypto-utils"),o=t("minimalistic-assert");function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),n=i.toArray(t.nonce,t.nonceEnc||"hex"),r=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}(e.exports=a).prototype._init=function(t,e,n){var r=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,n,r){"string"!=typeof e&&(r=n,n=e,e=null),t=i.toArray(t,e),n=i.toArray(n,r),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},a.prototype.generate=function(t,e,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=n,n=e,e=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(n),this._reseed++,i.encode(a,e)}},{"hash.js":26,"minimalistic-assert":41,"minimalistic-crypto-utils":42}],39:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){function n(){}t.super_=e,n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],40:[function(t,e,n){(function(t,n){!function(){var r="object"==typeof window?window:{};!r.JS_SHA3_NO_NODE_JS&&"object"==typeof t&&t.versions&&t.versions.node&&(r=n);for(var i=!r.JS_SHA3_NO_COMMON_JS&&"object"==typeof e&&e.exports,o="0123456789abcdef".split(""),a=[0,8,16,24],s=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],u=[224,256,384,512],c=["hex","buffer","arrayBuffer","array"],l=function(t,e,n){return function(r){return new _(t,e,t).update(r)[n]()}},h=function(t,e,n){return function(r,i){return new _(t,e,i).update(r)[n]()}},f=function(t,e){var n=l(t,e,"hex");n.create=function(){return new _(t,e,t)},n.update=function(t){return n.create().update(t)};for(var r=0;r<c.length;++r){var i=c[r];n[i]=l(t,e,i)}return n},d=[{name:"keccak",padding:[1,256,65536,16777216],bits:u,createMethod:f},{name:"sha3",padding:[6,1536,393216,100663296],bits:u,createMethod:f},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(t,e){var n=h(t,e,"hex");n.create=function(n){return new _(t,e,n)},n.update=function(t,e){return n.create(e).update(t)};for(var r=0;r<c.length;++r){var i=c[r];n[i]=h(t,e,i)}return n}}],p={},m=[],g=0;g<d.length;++g)for(var v=d[g],y=v.bits,b=0;b<y.length;++b){var w=v.name+"_"+y[b];m.push(w),p[w]=v.createMethod(y[b],v.padding)}function _(t,e,n){this.blocks=[],this.s=[],this.padding=e,this.outputBits=n,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}_.prototype.update=function(t){var e="string"!=typeof t;e&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t));for(var n,r,i=t.length,o=this.blocks,s=this.byteCount,u=this.blockCount,c=0,l=this.s;c<i;){if(this.reset)for(this.reset=!1,o[0]=this.block,n=1;n<u+1;++n)o[n]=0;if(e)for(n=this.start;c<i&&n<s;++c)o[n>>2]|=t[c]<<a[3&n++];else for(n=this.start;c<i&&n<s;++c)(r=t.charCodeAt(c))<128?o[n>>2]|=r<<a[3&n++]:(r<2048?o[n>>2]|=(192|r>>6)<<a[3&n++]:(r<55296||57344<=r?o[n>>2]|=(224|r>>12)<<a[3&n++]:(r=65536+((1023&r)<<10|1023&t.charCodeAt(++c)),o[n>>2]|=(240|r>>18)<<a[3&n++],o[n>>2]|=(128|r>>12&63)<<a[3&n++]),o[n>>2]|=(128|r>>6&63)<<a[3&n++]),o[n>>2]|=(128|63&r)<<a[3&n++]);if(s<=(this.lastByteIndex=n)){for(this.start=n-s,this.block=o[u],n=0;n<u;++n)l[n]^=o[n];E(l),this.reset=!0}else this.start=n}return this},_.prototype.finalize=function(){var t=this.blocks,e=this.lastByteIndex,n=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[n],e=1;e<n+1;++e)t[e]=0;for(t[n-1]|=2147483648,e=0;e<n;++e)r[e]^=t[e];E(r)},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,a=0,s=0,u="";s<r;){for(a=0;a<e&&s<r;++a,++s)t=n[a],u+=o[t>>4&15]+o[15&t]+o[t>>12&15]+o[t>>8&15]+o[t>>20&15]+o[t>>16&15]+o[t>>28&15]+o[t>>24&15];s%e==0&&(E(n),a=0)}return i&&(t=n[a],0<i&&(u+=o[t>>4&15]+o[15&t]),1<i&&(u+=o[t>>12&15]+o[t>>8&15]),2<i&&(u+=o[t>>20&15]+o[t>>16&15])),u},_.prototype.buffer=_.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,o=0,a=0,s=this.outputBits>>3;t=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(s);for(var u=new Uint32Array(t);a<r;){for(o=0;o<e&&a<r;++o,++a)u[a]=n[o];a%e==0&&E(n)}return i&&(u[o]=n[o],t=t.slice(0,s)),t},_.prototype.digest=_.prototype.array=function(){this.finalize();for(var t,e,n=this.blockCount,r=this.s,i=this.outputBlocks,o=this.extraBytes,a=0,s=0,u=[];s<i;){for(a=0;a<n&&s<i;++a,++s)t=s<<2,e=r[a],u[t]=255&e,u[t+1]=e>>8&255,u[t+2]=e>>16&255,u[t+3]=e>>24&255;s%n==0&&E(r)}return o&&(t=s<<2,e=r[a],0<o&&(u[t]=255&e),1<o&&(u[t+1]=e>>8&255),2<o&&(u[t+2]=e>>16&255)),u};var E=function(t){var e,n,r,i,o,a,u,c,l,h,f,d,p,m,g,v,y,b,w,_,E,T,S,x,I,k,A,C,N,M,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,X,tt,et,nt,rt,it,ot,at,st,ut,ct,lt;for(r=0;r<48;r+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],a=t[2]^t[12]^t[22]^t[32]^t[42],u=t[3]^t[13]^t[23]^t[33]^t[43],c=t[4]^t[14]^t[24]^t[34]^t[44],l=t[5]^t[15]^t[25]^t[35]^t[45],h=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],e=(d=t[8]^t[18]^t[28]^t[38]^t[48])^(a<<1|u>>>31),n=(p=t[9]^t[19]^t[29]^t[39]^t[49])^(u<<1|a>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=i^(c<<1|l>>>31),n=o^(l<<1|c>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=a^(h<<1|f>>>31),n=u^(f<<1|h>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=c^(d<<1|p>>>31),n=l^(p<<1|d>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=h^(i<<1|o>>>31),n=f^(o<<1|i>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,m=t[0],g=t[1],W=t[11]<<4|t[10]>>>28,K=t[10]<<4|t[11]>>>28,C=t[20]<<3|t[21]>>>29,N=t[21]<<3|t[20]>>>29,st=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,$=t[40]<<18|t[41]>>>14,z=t[41]<<18|t[40]>>>14,R=t[2]<<1|t[3]>>>31,O=t[3]<<1|t[2]>>>31,v=t[13]<<12|t[12]>>>20,y=t[12]<<12|t[13]>>>20,Z=t[22]<<10|t[23]>>>22,Q=t[23]<<10|t[22]>>>22,M=t[33]<<13|t[32]>>>19,P=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,lt=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,B=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,w=t[24]<<11|t[25]>>>21,Y=t[34]<<15|t[35]>>>17,J=t[35]<<15|t[34]>>>17,L=t[45]<<29|t[44]>>>3,D=t[44]<<29|t[45]>>>3,x=t[6]<<28|t[7]>>>4,I=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,F=t[26]<<25|t[27]>>>7,j=t[27]<<25|t[26]>>>7,_=t[36]<<21|t[37]>>>11,E=t[37]<<21|t[36]>>>11,X=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,H=t[8]<<27|t[9]>>>5,G=t[9]<<27|t[8]>>>5,k=t[18]<<20|t[19]>>>12,A=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,at=t[28]<<7|t[29]>>>25,q=t[38]<<8|t[39]>>>24,V=t[39]<<8|t[38]>>>24,T=t[48]<<14|t[49]>>>18,S=t[49]<<14|t[48]>>>18,t[0]=m^~v&b,t[1]=g^~y&w,t[10]=x^~k&C,t[11]=I^~A&N,t[20]=R^~B&F,t[21]=O^~U&j,t[30]=H^~W&Z,t[31]=G^~K&Q,t[40]=et^~rt&ot,t[41]=nt^~it&at,t[2]=v^~b&_,t[3]=y^~w&E,t[12]=k^~C&M,t[13]=A^~N&P,t[22]=B^~F&q,t[23]=U^~j&V,t[32]=W^~Z&Y,t[33]=K^~Q&J,t[42]=rt^~ot&st,t[43]=it^~at&ut,t[4]=b^~_&T,t[5]=w^~E&S,t[14]=C^~M&L,t[15]=N^~P&D,t[24]=F^~q&$,t[25]=j^~V&z,t[34]=Z^~Y&X,t[35]=Q^~J&tt,t[44]=ot^~st&ct,t[45]=at^~ut&lt,t[6]=_^~T&m,t[7]=E^~S&g,t[16]=M^~L&x,t[17]=P^~D&I,t[26]=q^~$&R,t[27]=V^~z&O,t[36]=Y^~X&H,t[37]=J^~tt&G,t[46]=st^~ct&et,t[47]=ut^~lt&nt,t[8]=T^~m&v,t[9]=S^~g&y,t[18]=L^~x&k,t[19]=D^~I&A,t[28]=$^~R&B,t[29]=z^~O&U,t[38]=X^~H&W,t[39]=tt^~G&K,t[48]=ct^~et&rt,t[49]=lt^~nt&it,t[0]^=s[r],t[1]^=s[r+1]};if(i)e.exports=p;else for(g=0;g<m.length;++g)r[m[g]]=p[m[g]]}()}).call(this,t("_process"),void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:43}],41:[function(t,e,n){(e.exports=function(t,e){if(!t)throw new Error(e||"Assertion failed")}).equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},{}],42:[function(t,e,n){var r=n;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",n=0;n<t.length;n++)e+=i(t[n].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,a=255&i;o?n.push(o,a):n.push(a)}return n},r.zero2=i,r.toHex=o,r.encode=function(t,e){return"hex"===e?o(t):t}},{}],43:[function(t,e,n){e.exports={browser:!0}},{}],44:[function(t,e,n){(function(t){function r(t){var e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=1779033703,r=3144134277,i=1013904242,o=2773480762,a=1359893119,s=2600822924,u=528734635,c=1541459225,l=new Array(64);function h(t){for(var h=0,f=t.length;64<=f;){var d,p,m,g,v,y=n,b=r,w=i,_=o,E=a,T=s,S=u,x=c;for(p=0;p<16;p++)m=h+4*p,l[p]=(255&t[m])<<24|(255&t[m+1])<<16|(255&t[m+2])<<8|255&t[m+3];for(p=16;p<64;p++)g=((d=l[p-2])>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,v=((d=l[p-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,l[p]=(g+l[p-7]|0)+(v+l[p-16]|0)|0;for(p=0;p<64;p++)g=(((E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7))+(E&T^~E&S)|0)+(x+(e[p]+l[p]|0)|0)|0,v=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&b^y&w^b&w)|0,x=S,S=T,T=E,E=_+g|0,_=w,w=b,b=y,y=g+v|0;n=n+y|0,r=r+b|0,i=i+w|0,o=o+_|0,a=a+E|0,s=s+T|0,u=u+S|0,c=c+x|0,h+=64,f-=64}}h(t);var f,d=t.length%64,p=t.length/536870912|0,m=t.length<<3,g=d<56?56:120,v=t.slice(t.length-d,t.length);for(v.push(128),f=1+d;f<g;f++)v.push(0);return v.push(p>>>24&255),v.push(p>>>16&255),v.push(p>>>8&255),v.push(p>>>0&255),v.push(m>>>24&255),v.push(m>>>16&255),v.push(m>>>8&255),v.push(m>>>0&255),h(v),[n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function i(t,e,n){var i;t=t.length<=64?t:r(t);var o=64+e.length+4,a=new Array(o),s=new Array(64),u=[];for(i=0;i<64;i++)a[i]=54;for(i=0;i<t.length;i++)a[i]^=t[i];for(i=0;i<e.length;i++)a[64+i]=e[i];for(i=o-4;i<o;i++)a[i]=0;for(i=0;i<64;i++)s[i]=92;for(i=0;i<t.length;i++)s[i]^=t[i];function c(){for(var t=o-1;o-4<=t;t--){if(a[t]++,a[t]<=255)return;a[t]=0}}for(;32<=n;)c(),u=u.concat(r(s.concat(r(a)))),n-=32;return 0<n&&(c(),u=u.concat(r(s.concat(r(a))).slice(0,n))),u}function o(t,e,n,r,i){var o;for(c(t,16*(2*n-1),i,0,16),o=0;o<2*n;o++)u(t,16*o,i,16),s(i,r),c(i,0,t,e+16*o,16);for(o=0;o<n;o++)c(t,e+2*o*16,t,16*o,16);for(o=0;o<n;o++)c(t,e+16*(2*o+1),t,16*(o+n),16)}function a(t,e){return t<<e|t>>>32-e}function s(t,e){c(t,0,e,0,16);for(var n=8;0<n;n-=2)e[4]^=a(e[0]+e[12],7),e[8]^=a(e[4]+e[0],9),e[12]^=a(e[8]+e[4],13),e[0]^=a(e[12]+e[8],18),e[9]^=a(e[5]+e[1],7),e[13]^=a(e[9]+e[5],9),e[1]^=a(e[13]+e[9],13),e[5]^=a(e[1]+e[13],18),e[14]^=a(e[10]+e[6],7),e[2]^=a(e[14]+e[10],9),e[6]^=a(e[2]+e[14],13),e[10]^=a(e[6]+e[2],18),e[3]^=a(e[15]+e[11],7),e[7]^=a(e[3]+e[15],9),e[11]^=a(e[7]+e[3],13),e[15]^=a(e[11]+e[7],18),e[1]^=a(e[0]+e[3],7),e[2]^=a(e[1]+e[0],9),e[3]^=a(e[2]+e[1],13),e[0]^=a(e[3]+e[2],18),e[6]^=a(e[5]+e[4],7),e[7]^=a(e[6]+e[5],9),e[4]^=a(e[7]+e[6],13),e[5]^=a(e[4]+e[7],18),e[11]^=a(e[10]+e[9],7),e[8]^=a(e[11]+e[10],9),e[9]^=a(e[8]+e[11],13),e[10]^=a(e[9]+e[8],18),e[12]^=a(e[15]+e[14],7),e[13]^=a(e[12]+e[15],9),e[14]^=a(e[13]+e[12],13),e[15]^=a(e[14]+e[13],18);for(n=0;n<16;++n)t[n]+=e[n]}function u(t,e,n,r){for(var i=0;i<r;i++)n[i]^=t[e+i]}function c(t,e,n,r,i){for(;i--;)n[r++]=t[e++]}function l(t){if(!t||"number"!=typeof t.length)return!1;for(var e=0;e<t.length;e++){if("number"!=typeof t[e])return!1;var n=parseInt(t[e]);if(n!=t[e]||n<0||256<=n)return!1}return!0}function h(t,e){var n=parseInt(t);if(t!=n)throw new Error("invalid "+e);return n}function f(e,n,r,a,s,f,d){if(!d)throw new Error("missing callback");if(r=h(r,"N"),a=h(a,"r"),s=h(s,"p"),f=h(f,"dkLen"),0===r||0!=(r&r-1))throw new Error("N must be power of 2");if(p/128/a<r)throw new Error("N too large");if(p/128/s<a)throw new Error("r too large");if(!l(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!l(n))throw new Error("salt must be an array or buffer");n=Array.prototype.slice.call(n);for(var m=i(e,n,128*s*a),g=new Uint32Array(32*s*a),v=0;v<g.length;v++){var y=4*v;g[v]=(255&m[3+y])<<24|(255&m[2+y])<<16|(255&m[1+y])<<8|(255&m[0+y])<<0}var b,w,_=new Uint32Array(64*a),E=new Uint32Array(32*a*r),T=32*a,S=new Uint32Array(16),x=new Uint32Array(16),I=s*r*2,k=0,A=null,C=!1,N=0,M=0,P=parseInt(1e3/a),L=void 0!==t?t:setTimeout,D=function(){if(C)return d(new Error("cancelled"),k/I);switch(N){case 0:c(g,w=32*M*a,_,0,T),N=1,b=0;case 1:P<(n=r-b)&&(n=P);for(var t=0;t<n;t++)c(_,0,E,(b+t)*T,T),o(_,T,a,S,x);if(b+=n,k+=n,(l=parseInt(1e3*k/I))!==A){if(C=d(null,k/I))break;A=l}if(b<r)break;b=0,N=2;case 2:var n,l;for(P<(n=r-b)&&(n=P),t=0;t<n;t++){var h=_[16*(2*a-1)]&r-1;u(E,h*T,_,T),o(_,T,a,S,x)}if(b+=n,k+=n,(l=parseInt(1e3*k/I))!==A){if(C=d(null,k/I))break;A=l}if(b<r)break;if(c(_,0,g,w,T),++M<s){N=0;break}for(m=[],t=0;t<g.length;t++)m.push(g[t]>>0&255),m.push(g[t]>>8&255),m.push(g[t]>>16&255),m.push(g[t]>>24&255);var p=i(e,m,f);return d(null,1,p)}L(D)};D()}var d,p;d=this,p=2147483647,void 0!==n?e.exports=f:d&&(d.scrypt&&(d._scrypt=d.scrypt),d.scrypt=f)}).call(this,t("timers").setImmediate)},{timers:46}],45:[function(t,e,n){(function(t,e,n){!function(e,n){if(!e.setImmediate){var r,i,o,a,s=1,u={},c=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,r="[object process]"==={}.toString.call(e.process)?function(){var e=f(arguments);return t.nextTick(d(p,e)),e}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",g,!1):e.attachEvent("onmessage",g),function(){var t=f(arguments);return e.postMessage(a+t,"*"),t}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(){var t=f(arguments);return o.port2.postMessage(t),t}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,function(){var t=f(arguments),e=l.createElement("script");return e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e),t}):function(){var t=f(arguments);return setTimeout(d(p,t),0),t},h.setImmediate=r,h.clearImmediate=m}function f(t){return u[s]=d.apply(n,t),s++}function d(t){var e=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(n,e):new Function(""+t)()}}function p(t){if(c)setTimeout(d(p,t),0);else{var e=u[t];if(e){c=!0;try{e()}finally{m(t),c=!1}}}}function m(t){delete u[t]}function g(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,t("_process"),void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").clearImmediate)},{_process:43,timers:46}],46:[function(t,e,n){(function(t){e.exports={setImmediate:t.setImmediate}}).call(this,void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e,n){(function(t){var n;if(t.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);n=function(){return crypto.getRandomValues(r),r}}if(!n){var i=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}e.exports=n}).call(this,void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(t,e,n){for(var r=t("./rng"),i=[],o={},a=0;a<256;a++)i[a]=(a+256).toString(16).substr(1),o[i[a]]=a;function s(t,e){var n=e||0,r=i;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}var u=r(),c=[1|u[0],u[1],u[2],u[3],u[4],u[5]],l=16383&(u[6]<<8|u[7]),h=0,f=0;function d(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;a++)e[i+a]=o[a];return e||s(o)}var p=d;p.v1=function(t,e,n){var r=e&&n||0,i=e||[],o=void 0!==(t=t||{}).clockseq?t.clockseq:l,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:f+1,d=a-h+(u-f)/1e4;if(d<0&&void 0===t.clockseq&&(o=o+1&16383),(d<0||h<a)&&void 0===t.nsecs&&(u=0),1e4<=u)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=a,l=o;var p=(1e4*(268435455&(a+=122192928e5))+(f=u))%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var m=a/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var g=t.node||c,v=0;v<6;v++)i[r+v]=g[v];return e||s(i)},p.v4=d,p.parse=function(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,(function(t){i<16&&(e[r+i++]=o[t])}));i<16;)e[r+i++]=0;return e},p.unparse=s,e.exports=p},{"./rng":47}],49:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});try{e.exports.XMLHttpRequest=XMLHttpRequest}catch(t){console.log("Warning: XMLHttpRequest is not defined"),e.exports.XMLHttpRequest=null}},{}],50:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/properties"),i=(o.isProvider=function(t){return r.isType(t,"Provider")},o);function o(){r.setType(this,"Provider")}n.Provider=i},{"../utils/properties":74}],51:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../utils/address"),s=t("../utils/bignumber"),u=t("../utils/bytes"),c=t("../constants"),l=t("../utils/hash"),h=t("../utils/networks"),f=t("../utils/properties"),d=t("../utils/rlp"),p=t("../utils/transaction"),m=t("../utils/utf8"),g=t("../utils/web"),v=o(t("../errors")),y=t("./abstract-provider");function b(t,e){var n={};for(var r in t)try{var i=t[r](e[r]);void 0!==i&&(n[r]=i)}catch(t){throw t.checkKey=r,t.checkValue=e[r],t}return n}function w(t,e){return function(n){return null==n?e:t(n)}}function _(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");var n=[];return e.forEach((function(e){n.push(t(e))})),n}}function E(t,e){return"string"==typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),32===u.hexDataLength(t))?t.toLowerCase():(v.throwError("invalid hash",v.INVALID_ARGUMENT,{arg:"hash",value:t}),null)}function T(t){return s.bigNumberify(t).toNumber()}function S(t){if(!u.isHexString(t))throw new Error("invalid uint256");for(;t.length<66;)t="0x0"+t.substring(2);return t}function x(t){if(null==t)return"latest";if("earliest"===t)return"0x0";if("latest"===t||"pending"===t)return t;if("number"==typeof t)return u.hexStripZeros(u.hexlify(t));if(u.isHexString(t))return u.hexStripZeros(t);throw new Error("invalid blockTag")}var I={hash:E,blockHash:w(E,null),blockNumber:w(T,null),transactionIndex:w(T,null),confirmations:w(T,null),from:a.getAddress,gasPrice:s.bigNumberify,gasLimit:s.bigNumberify,to:w(a.getAddress,null),value:s.bigNumberify,nonce:T,data:u.hexlify,r:w(S),s:w(S),v:w(T),creates:w(a.getAddress,null),raw:w(u.hexlify)};function k(t){if(null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&s.bigNumberify(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=a.getContractAddress(t)),!t.raw&&t.v&&t.r&&t.s){var e=[u.stripZeros(u.hexlify(t.nonce)),u.stripZeros(u.hexlify(t.gasPrice)),u.stripZeros(u.hexlify(t.gasLimit)),t.to||"0x",u.stripZeros(u.hexlify(t.value||"0x")),u.hexlify(t.data||"0x"),u.stripZeros(u.hexlify(t.v||"0x")),u.stripZeros(u.hexlify(t.r)),u.stripZeros(u.hexlify(t.s))];t.raw=d.encode(e)}var n=b(I,t),r=t.networkId;return null!=t.chainId&&null==r&&null==n.v&&(r=t.chainId),u.isHexString(r)&&(r=s.bigNumberify(r).toNumber()),"number"!=typeof r&&null!=n.v&&((r=(n.v-35)/2)<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),n.networkId=r,null==n.chainId&&null!=r&&(n.chainId=r),n.blockHash&&"x"===n.blockHash.replace(/0/g,"")&&(n.blockHash=null),n}var A={hash:E,parentHash:E,number:T,timestamp:T,nonce:w(u.hexlify),difficulty:function(t){var e=s.bigNumberify(t);try{return e.toNumber()}catch(t){}return null},gasLimit:s.bigNumberify,gasUsed:s.bigNumberify,miner:a.getAddress,extraData:u.hexlify,transactions:w(_(E))},C=f.shallowCopy(A);function N(t,e){return null!=t.author&&null==t.miner&&(t.miner=t.author),b(e?C:A,t)}C.transactions=w(_(k));var M={from:w(a.getAddress),nonce:w(T),gasLimit:w(s.bigNumberify),gasPrice:w(s.bigNumberify),to:w(a.getAddress),value:w(s.bigNumberify),data:w(u.hexlify)};function P(t){return b(M,t)}var L={transactionLogIndex:w(T),transactionIndex:T,blockNumber:T,transactionHash:E,address:a.getAddress,topics:_(E),data:u.hexlify,logIndex:T,blockHash:E},D={to:w(a.getAddress,null),from:w(a.getAddress,null),contractAddress:w(a.getAddress,null),transactionIndex:T,root:w(E),gasUsed:s.bigNumberify,logsBloom:w(u.hexlify),blockHash:E,transactionHash:E,logs:_((function(t){return b(L,t)})),blockNumber:T,confirmations:w(T,null),cumulativeGasUsed:s.bigNumberify,status:w(T)};function R(t){return Array.isArray(t)?t.forEach((function(t){R(t)})):null!=t&&E(t),t}var O,B={fromBlock:w(x,void 0),toBlock:w(x,void 0),address:w(a.getAddress,void 0),topics:w(R,void 0)},U={blockHash:w(E,void 0),address:w(a.getAddress,void 0),topics:w(R,void 0)},F={blockNumber:w(T),blockHash:w(E),transactionIndex:T,removed:w((function(t){if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===t)return!0;if("false"===t)return!1}throw new Error("invaid boolean - "+t)})),address:a.getAddress,data:(O=u.hexlify,function(t){return t?O(t):"0x"}),topics:_(E),transactionHash:E,logIndex:T};function j(t){return b(F,t)}function q(t){return t.map((function(t){return"string"==typeof t?t:Array.isArray(t)?(t.forEach((function(t){null!==t&&32!==u.hexDataLength(t)&&v.throwError("invalid topic",v.INVALID_ARGUMENT,{argument:"topic",value:t})})),t.join(",")):null===t?"":v.throwError("invalid topic value",v.INVALID_ARGUMENT,{argument:"topic",value:t})})).join("&")}function V(t){if("string"==typeof t){if(20===u.hexDataLength(t))return"address:"+a.getAddress(t);if(t=t.toLowerCase(),32===u.hexDataLength(t))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter::"+q(t);if(t&&"object"==typeof t)return"filter:"+(t.address||"")+":"+q(t.topics||[])}throw new Error("invalid event - "+t)}function $(){return(new Date).getTime()}var z,H=(i(G,z=y.Provider),G.prototype._doPoll=function(){var t=this;this.getBlockNumber().then((function(e){if(t.polling&&(t._setFastBlockNumber(e),e!==t._lastBlockNumber)){-2===t._emitted.block&&(t._emitted.block=e-1);for(var n=t._emitted.block+1;n<=e;n++)t.emit("block",n);t._emitted.block!==e&&(t._emitted.block=e,Object.keys(t._emitted).forEach((function(n){if("block"!==n){var r=t._emitted[n];"pending"!==r&&12<e-r&&delete t._emitted[n]}}))),-2===t._lastBlockNumber&&(t._lastBlockNumber=e-1);var r={},i={};return t._events.forEach((function(t){i[t.tag]=!0})),Object.keys(i).forEach((function(n){var i=n.split(":");switch(i[0]){case"tx":var o=i[1];t.getTransactionReceipt(o).then((function(e){return e&&null!=e.blockNumber&&(t._emitted["t:"+o]=e.blockNumber,t.emit(o,e)),null})).catch((function(e){t.emit("error",e)}));break;case"address":var a=i[1];t._balances[a]&&(r[a]=t._balances[a]),t.getBalance(a,"latest").then((function(e){var n=t._balances[a];if(!n||!e.eq(n))return t._balances[a]=e,t.emit(a,e),null})).catch((function(e){t.emit("error",e)}));break;case"filter":var s=function(t){return t.split(/&/g).map((function(t){var e=t.split(",");return 1===e.length?""===e[0]?null:t:e.map((function(t){return""===t?null:t}))}))}(i[2]),u={address:i[1],fromBlock:t._lastBlockNumber+1,toBlock:e,topics:s};u.address||delete u.address,t.getLogs(u).then((function(e){if(0!==e.length)return e.forEach((function(e){t._emitted["b:"+e.blockHash]=e.blockNumber,t._emitted["t:"+e.transactionHash]=e.blockNumber,t.emit(u,e)})),null})).catch((function(e){t.emit("error",e)}))}})),t._lastBlockNumber=e,t._balances=r,null}})).catch((function(t){})),this.doPoll()},G.prototype.resetEventsBlock=function(t){this._lastBlockNumber=t-1,this.polling&&this._doPoll()},Object.defineProperty(G.prototype,"network",{get:function(){return this._network},enumerable:!0,configurable:!0}),G.prototype.getNetwork=function(){return this.ready},Object.defineProperty(G.prototype,"blockNumber",{get:function(){return this._fastBlockNumber},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"polling",{get:function(){return null!=this._poller},set:function(t){var e=this;setTimeout((function(){t&&!e._poller?(e._poller=setInterval(e._doPoll.bind(e),e.pollingInterval),e._doPoll()):!t&&e._poller&&(clearInterval(e._poller),e._poller=null)}),0)},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"pollingInterval",{get:function(){return this._pollingInterval},set:function(t){var e=this;if("number"!=typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){e._doPoll()}),this._pollingInterval))},enumerable:!0,configurable:!0}),G.prototype._getFastBlockNumber=function(){var t=this,e=$();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((function(e){return(null==t._fastBlockNumber||e>t._fastBlockNumber)&&(t._fastBlockNumber=e),t._fastBlockNumber}))),this._fastBlockNumberPromise},G.prototype._setFastBlockNumber=function(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=$(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))},G.prototype.waitForTransaction=function(t,e){var n=this;return null==e&&(e=1),this.getTransactionReceipt(t).then((function(r){return 0===e||r&&r.confirmations>=e?r:new Promise((function(r){var i=function(o){o.confirmations<e||(n.removeListener(t,i),r(o))};n.on(t,i)}))}))},G.prototype.getBlockNumber=function(){var t=this;return this.ready.then((function(){return t.perform("getBlockNumber",{}).then((function(e){var n=parseInt(e);if(n!=e)throw new Error("invalid response - getBlockNumber");return t._setFastBlockNumber(n),n}))}))},G.prototype.getGasPrice=function(){var t=this;return this.ready.then((function(){return t.perform("getGasPrice",{}).then((function(t){return s.bigNumberify(t)}))}))},G.prototype.getBalance=function(t,e){var n=this;return this.ready.then((function(){return f.resolveProperties({addressOrName:t,blockTag:e}).then((function(t){var e=t.addressOrName,r=t.blockTag;return n._getAddress(e).then((function(t){var e={address:t,blockTag:x(r)};return n.perform("getBalance",e).then((function(t){return s.bigNumberify(t)}))}))}))}))},G.prototype.getTransactionCount=function(t,e){var n=this;return this.ready.then((function(){return f.resolveProperties({addressOrName:t,blockTag:e}).then((function(t){var e=t.addressOrName,r=t.blockTag;return n._getAddress(e).then((function(t){var e={address:t,blockTag:x(r)};return n.perform("getTransactionCount",e).then((function(t){return s.bigNumberify(t).toNumber()}))}))}))}))},G.prototype.getCode=function(t,e){var n=this;return this.ready.then((function(){return f.resolveProperties({addressOrName:t,blockTag:e}).then((function(t){var e=t.addressOrName,r=t.blockTag;return n._getAddress(e).then((function(t){var e={address:t,blockTag:x(r)};return n.perform("getCode",e).then((function(t){return u.hexlify(t)}))}))}))}))},G.prototype.getStorageAt=function(t,e,n){var r=this;return this.ready.then((function(){return f.resolveProperties({addressOrName:t,position:e,blockTag:n}).then((function(t){var e=t.addressOrName,n=t.position,i=t.blockTag;return r._getAddress(e).then((function(t){var e={address:t,blockTag:x(i),position:u.hexStripZeros(u.hexlify(n))};return r.perform("getStorageAt",e).then((function(t){return u.hexlify(t)}))}))}))}))},G.prototype.sendTransaction=function(t){var e=this;return this.ready.then((function(){return f.resolveProperties({signedTransaction:t}).then((function(t){var n=t.signedTransaction,r={signedTransaction:u.hexlify(n)};return e.perform("sendTransaction",r).then((function(t){return e._wrapTransaction(p.parse(n),t)}),(function(t){throw t.transaction=p.parse(n),t.transaction.hash&&(t.transactionHash=t.transaction.hash),t}))}))}))},G.prototype._wrapTransaction=function(t,e){var n=this;if(null!=e&&32!==u.hexDataLength(e))throw new Error("invalid response - sendTransaction");var r=t;return null!=e&&t.hash!==e&&v.throwError("Transaction hash mismatch from Provider.sendTransaction.",v.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),r.wait=function(e){return 0!==e&&(n._emitted["t:"+t.hash]="pending"),n.waitForTransaction(t.hash,e).then((function(r){return null==r&&0===e?null:(n._emitted["t:"+t.hash]=r.blockNumber,0===r.status&&v.throwError("transaction failed",v.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t}),r)}))},r},G.prototype.call=function(t,e){var n=this,r=f.shallowCopy(t);return this.ready.then((function(){return f.resolveProperties({blockTag:e,tx:r}).then((function(t){var e=t.blockTag,r=t.tx;return n._resolveNames(r,["to","from"]).then((function(t){var r={blockTag:x(e),transaction:P(t)};return n.perform("call",r).then((function(t){return u.hexlify(t)}))}))}))}))},G.prototype.estimateGas=function(t){var e=this,n={to:t.to,from:t.from,data:t.data,gasPrice:t.gasPrice,value:t.value};return this.ready.then((function(){return f.resolveProperties(n).then((function(t){return e._resolveNames(t,["to","from"]).then((function(t){var n={transaction:P(t)};return e.perform("estimateGas",n).then((function(t){return s.bigNumberify(t)}))}))}))}))},G.prototype.getBlock=function(t,e){var n=this;return this.ready.then((function(){return f.resolveProperties({blockHashOrBlockTag:t}).then((function(t){var r=t.blockHashOrBlockTag;try{var i=u.hexlify(r);if(32===u.hexDataLength(i))return g.poll((function(){return n.perform("getBlock",{blockHash:i,includeTransactions:!!e}).then((function(t){return null==t?null==n._emitted["b:"+i]?null:void 0:N(t,e)}))}),{onceBlock:n})}catch(t){}try{var o=-128,a=x(r);return u.isHexString(a)&&(o=parseInt(a.substring(2),16)),g.poll((function(){return n.perform("getBlock",{blockTag:a,includeTransactions:!!e}).then((function(t){return null!=t?N(t,e):o<=n._emitted.block?void 0:null}))}),{onceBlock:n})}catch(t){}throw new Error("invalid block hash or block tag")}))}))},G.prototype.getTransaction=function(t){var e=this;return this.ready.then((function(){return f.resolveProperties({transactionHash:t}).then((function(t){var n=t.transactionHash,r={transactionHash:E(n,!0)};return g.poll((function(){return e.perform("getTransaction",r).then((function(t){if(null==t)return null==e._emitted["t:"+n]?null:void 0;var r=G.checkTransactionResponse(t);if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations)return e._getFastBlockNumber().then((function(t){var n=t-r.blockNumber+1;return n<=0&&(n=1),r.confirmations=n,e._wrapTransaction(r)}));return e._wrapTransaction(r)}))}),{onceBlock:e})}))}))},G.prototype.getTransactionReceipt=function(t){var e=this;return this.ready.then((function(){return f.resolveProperties({transactionHash:t}).then((function(t){var n=t.transactionHash,r={transactionHash:E(n,!0)};return g.poll((function(){return e.perform("getTransactionReceipt",r).then((function(t){if(null==t)return null==e._emitted["t:"+n]?null:void 0;if(null!=t.blockHash){var r=function(t){var e=b(D,t);return e.logs.forEach((function(t,e){null==t.transactionLogIndex&&(t.transactionLogIndex=e)})),null!=t.status&&(e.byzantium=!0),e}(t);if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations)return e._getFastBlockNumber().then((function(t){var e=t-r.blockNumber+1;return e<=0&&(e=1),r.confirmations=e,r}));return r}}))}),{onceBlock:e})}))}))},G.prototype.getLogs=function(t){var e=this;return this.ready.then((function(){return f.resolveProperties(t).then((function(t){return e._resolveNames(t,["address"]).then((function(t){var n={filter:function(t){return t&&t.blockHash?b(U,t):b(B,t)}(t)};return e.perform("getLogs",n).then((function(t){return _(j)(t)}))}))}))}))},G.prototype.getEtherPrice=function(){var t=this;return this.ready.then((function(){return t.perform("getEtherPrice",{}).then((function(t){return t}))}))},G.prototype._getAddress=function(t){return this.resolveName(t).then((function(e){return null==e&&v.throwError("ENS name not configured",v.UNSUPPORTED_OPERATION,{operation:"resolveName("+JSON.stringify(t)+")"}),e}))},G.prototype._resolveNames=function(t,e){var n=[],r=f.shallowCopy(t);return e.forEach((function(t){null!=r[t]&&n.push(this._getAddress(r[t]).then((function(e){r[t]=e})))}),this),Promise.all(n).then((function(){return r}))},G.prototype._getResolver=function(t){var e=this;return this.getNetwork().then((function(n){n.ensAddress||v.throwError("network does not support ENS",v.UNSUPPORTED_OPERATION,{operation:"ENS",network:n.name});var r="0x0178b8bf"+l.namehash(t).substring(2),i={to:n.ensAddress,data:r};return e.call(i).then((function(t){if(32!==u.hexDataLength(t))return null;var e=a.getAddress(u.hexDataSlice(t,12));return e===c.AddressZero?null:e}))}))},G.prototype.resolveName=function(t){var e=this;if(t instanceof Promise)return t.then((function(t){return e.resolveName(t)}));try{return Promise.resolve(a.getAddress(t))}catch(e){if(u.isHexString(t))throw e}var n=this,r=l.namehash(t);return this._getResolver(t).then((function(t){if(null==t)return null;var e={to:t,data:"0x3b3b57de"+r.substring(2)};return n.call(e)})).then((function(t){if(32!==u.hexDataLength(t))return null;var e=a.getAddress(u.hexDataSlice(t,12));return e===c.AddressZero?null:e}))},G.prototype.lookupAddress=function(t){var e=this;if(t instanceof Promise)return t.then((function(t){return e.lookupAddress(t)}));var n=(t=a.getAddress(t)).substring(2)+".addr.reverse",r=l.namehash(n),i=this;return this._getResolver(n).then((function(t){if(!t)return null;var e={to:t,data:"0x691f3431"+r.substring(2)};return i.call(e)})).then((function(e){if(null==e)return null;if((e=e.substring(2)).length<64)return null;if((e=e.substring(64)).length<64)return null;var n=s.bigNumberify("0x"+e.substring(0,64)).toNumber();if(2*n>(e=e.substring(64)).length)return null;var r=m.toUtf8String("0x"+e.substring(0,2*n));return i.resolveName(r).then((function(e){return e!=t?null:r}))}))},G.checkTransactionResponse=function(t){return k(t)},G.prototype.doPoll=function(){},G.prototype.perform=function(t,e){return v.throwError(t+" not implemented",v.NOT_IMPLEMENTED,{operation:t}),null},G.prototype._startPending=function(){v.warn("WARNING: this provider does not support pending events")},G.prototype._stopPending=function(){},G.prototype._addEventListener=function(t,e,n){this._events.push({tag:V(t),listener:e,once:n}),"pending"===t&&this._startPending(),this.polling=!0},G.prototype.on=function(t,e){return this._addEventListener(t,e,!1),this},G.prototype.once=function(t,e){return this._addEventListener(t,e,!0),this},G.prototype.addEventListener=function(t,e){return this.on(t,e)},G.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=!1,o=V(t);return this._events=this._events.filter((function(t){return t.tag!==o||(setTimeout((function(){t.listener.apply(e,n)}),0),i=!0,!t.once)})),0===this.listenerCount()&&(this.polling=!1),i},G.prototype.listenerCount=function(t){if(!t)return this._events.length;var e=V(t);return this._events.filter((function(t){return t.tag===e})).length},G.prototype.listeners=function(t){var e=V(t);return this._events.filter((function(t){return t.tag===e})).map((function(t){return t.listener}))},G.prototype.removeAllListeners=function(t){if(null==t)this._events=[],this._stopPending();else{var e=V(t);this._events=this._events.filter((function(t){return t.tag!==e})),"pending"===t&&this._stopPending()}return 0===this._events.length&&(this.polling=!1),this},G.prototype.removeListener=function(t,e){var n=!1,r=V(t);return this._events=this._events.filter((function(t){return t.tag!==r||t.listener!=e||!!n||!(n=!0)})),"pending"===t&&0===this.listenerCount("pending")&&this._stopPending(),0===this.listenerCount()&&(this.polling=!1),this},G);function G(t){var e=z.call(this)||this;if(v.checkNew(e,y.Provider),t instanceof Promise)f.defineReadOnly(e,"ready",t.then((function(t){return f.defineReadOnly(e,"_network",t),t}))),e.ready.catch((function(t){}));else{var n=h.getNetwork(null==t?"homestead":t);n?(f.defineReadOnly(e,"_network",n),f.defineReadOnly(e,"ready",Promise.resolve(e._network))):v.throwError("invalid network",v.INVALID_ARGUMENT,{arg:"network",value:t})}return e._lastBlockNumber=-2,e._balances={},e._events=[],e._pollingInterval=4e3,e._emitted={block:-2},e._fastQueryDate=0,e}n.BaseProvider=H,f.defineReadOnly(y.Provider,"inherits",f.inheritable(y.Provider))},{"../constants":3,"../errors":5,"../utils/address":60,"../utils/bignumber":63,"../utils/bytes":64,"../utils/hash":65,"../utils/networks":72,"../utils/properties":74,"../utils/rlp":76,"../utils/transaction":83,"../utils/utf8":85,"../utils/web":86,"./abstract-provider":50}],52:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./base-provider"),s=t("../utils/bytes"),u=t("../utils/properties"),c=t("../utils/web"),l=o(t("../errors"));function h(t){var e=[];for(var n in t)if(null!=t[n]){var r=s.hexlify(t[n]);!{gasLimit:!0,gasPrice:!0,nonce:!0,value:!0}[n]||(r=s.hexStripZeros(r)),e.push(n+"="+r)}return e.join("&")}function f(t){if(0==t.status&&("No records found"===t.message||"No transactions found"===t.message))return t.result;if(1==t.status&&"OK"==t.message)return t.result;var e=new Error("invalid response");throw e.result=JSON.stringify(t),e}function d(t){if("2.0"!=t.jsonrpc)throw(e=new Error("invalid response")).result=JSON.stringify(t),e;if(t.error){var e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function p(t){if("pending"===t)throw new Error("pending not supported");return"latest"===t?t:parseInt(t.substring(2),16)}var m,g=(i(v,m=a.BaseProvider),v.prototype.perform=function(t,e){var n=this,r=this.baseUrl,i="";function o(t,e){return c.fetchJson(t,null,e||d).then((function(e){return n.emit("debug",{action:"perform",request:t,response:e,provider:n}),e}))}switch(this.apiKey&&(i+="&apikey="+this.apiKey),t){case"getBlockNumber":return o(r+="/api?module=proxy&action=eth_blockNumber"+i);case"getGasPrice":return o(r+="/api?module=proxy&action=eth_gasPrice"+i);case"getBalance":return r+="/api?module=account&action=balance&address="+e.address,o(r+="&tag="+e.blockTag+i,f);case"getTransactionCount":return r+="/api?module=proxy&action=eth_getTransactionCount&address="+e.address,o(r+="&tag="+e.blockTag+i);case"getCode":return r+="/api?module=proxy&action=eth_getCode&address="+e.address,o(r+="&tag="+e.blockTag+i,d);case"getStorageAt":return r+="/api?module=proxy&action=eth_getStorageAt&address="+e.address,r+="&position="+e.position,o(r+="&tag="+e.blockTag+i,d);case"sendTransaction":return r+="/api?module=proxy&action=eth_sendRawTransaction&hex="+e.signedTransaction,o(r+=i).catch((function(t){throw t.responseText&&(0<=t.responseText.toLowerCase().indexOf("insufficient funds")&&l.throwError("insufficient funds",l.INSUFFICIENT_FUNDS,{}),0<=t.responseText.indexOf("same hash was already imported")&&l.throwError("nonce has already been used",l.NONCE_EXPIRED,{}),0<=t.responseText.indexOf("another transaction with same nonce")&&l.throwError("replacement fee too low",l.REPLACEMENT_UNDERPRICED,{})),t}));case"getBlock":return e.blockTag?(r+="/api?module=proxy&action=eth_getBlockByNumber&tag="+e.blockTag,e.includeTransactions?r+="&boolean=true":r+="&boolean=false",o(r+=i)):Promise.reject(new Error("getBlock by blockHash not implemeneted"));case"getTransaction":return r+="/api?module=proxy&action=eth_getTransactionByHash&txhash="+e.transactionHash,o(r+=i);case"getTransactionReceipt":return r+="/api?module=proxy&action=eth_getTransactionReceipt&txhash="+e.transactionHash,o(r+=i);case"call":return r+="/api?module=proxy&action=eth_call"+(a=(a=h(e.transaction))&&"&"+a),"latest"!==e.blockTag?Promise.reject(new Error("EtherscanProvider does not support blockTag for call")):o(r+=i);case"estimateGas":var a;return r+="/api?module=proxy&action=eth_estimateGas&"+(a=(a=h(e.transaction))&&"&"+a),o(r+=i);case"getLogs":r+="/api?module=logs&action=getLogs";try{if(e.filter.fromBlock&&(r+="&fromBlock="+p(e.filter.fromBlock)),e.filter.toBlock&&(r+="&toBlock="+p(e.filter.toBlock)),e.filter.blockHash)try{l.throwError("Etherscan does not support blockHash filters",l.UNSUPPORTED_OPERATION,{operation:"getLogs(blockHash)"})}catch(t){return Promise.reject(t)}if(e.filter.address&&(r+="&address="+e.filter.address),e.filter.topics&&0<e.filter.topics.length){if(1<e.filter.topics.length)throw new Error("unsupported topic format");var s=e.filter.topics[0];if("string"!=typeof s||66!==s.length)throw new Error("unsupported topic0 format");r+="&topic0="+s}}catch(t){return Promise.reject(t)}var u=this;return o(r+=i,f).then((function(t){var e={},n=Promise.resolve();return t.forEach((function(t){n=n.then((function(){return null!=t.blockHash?null:(t.blockHash=e[t.transactionHash],null==t.blockHash?u.getTransaction(t.transactionHash).then((function(n){return e[t.transactionHash]=n.blockHash,t.blockHash=n.blockHash,null})):null)}))})),n.then((function(){return t}))}));case"getEtherPrice":return"homestead"!==this.network.name?Promise.resolve(0):(r+="/api?module=stats&action=ethprice",o(r+=i,f).then((function(t){return parseFloat(t.ethusd)})))}return m.prototype.perform.call(this,t,e)},v.prototype.getHistory=function(t,e,n){var r=this,i=this.baseUrl,o="";return this.apiKey&&(o+="&apikey="+this.apiKey),null==e&&(e=0),null==n&&(n=99999999),this.resolveName(t).then((function(t){return i+="/api?module=account&action=txlist&address="+t,i+="&startblock="+e,i+="&endblock="+n,i+="&sort=asc"+o,c.fetchJson(i,null,f).then((function(t){r.emit("debug",{action:"getHistory",request:i,response:t,provider:r});var e=[];return t.forEach((function(t){["contractAddress","to"].forEach((function(e){""==t[e]&&delete t[e]})),null==t.creates&&null!=t.contractAddress&&(t.creates=t.contractAddress);var n=a.BaseProvider.checkTransactionResponse(t);t.timeStamp&&(n.timestamp=parseInt(t.timeStamp)),e.push(n)})),e}))}))},v);function v(t,e){var n=m.call(this,t)||this;l.checkNew(n,v);var r="invalid";n.network&&(r=n.network.name);var i=null;switch(r){case"homestead":i="https://api.etherscan.io";break;case"ropsten":i="https://api-ropsten.etherscan.io";break;case"rinkeby":i="https://api-rinkeby.etherscan.io";break;case"kovan":i="https://api-kovan.etherscan.io";break;case"goerli":i="https://api-goerli.etherscan.io";break;default:throw new Error("unsupported network")}return u.defineReadOnly(n,"baseUrl",i),u.defineReadOnly(n,"apiKey",e||"8FG3JMZ9USS4NTA6YKEKHINU56SEPPVBJR"),n}n.EtherscanProvider=g},{"../errors":5,"../utils/bytes":64,"../utils/properties":74,"../utils/web":86,"./base-provider":51}],53:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./base-provider"),s=o(t("../errors"));function u(t){var e=!0,n=null;return t.forEach((function(r){null!=r?null!=n?n.name===r.name&&n.chainId===r.chainId&&(n.ensAddress===r.ensAddress||null==n.ensAddress&&null==r.ensAddress)||s.throwError("provider mismatch",s.INVALID_ARGUMENT,{arg:"networks",value:t}):n=r:e=!1})),e}var c,l=(i(h,c=a.BaseProvider),Object.defineProperty(h.prototype,"providers",{get:function(){return this._providers.slice(0)},enumerable:!0,configurable:!0}),h.prototype.perform=function(t,e){var n=this.providers;return new Promise((function(r,i){var o=null;!function a(){n.length?n.shift().perform(t,e).then((function(t){return r(t)})).catch((function(t){o=o||t,setTimeout(a,0)})):i(o)}()}))},h);function h(t){var e=this;if(0===t.length)throw new Error("no providers");if(u(t.map((function(t){return t.network}))))e=c.call(this,t[0].network)||this;else{var n=Promise.all(t.map((function(t){return t.getNetwork()}))).then((function(t){return u(t)||s.throwError("getNetwork returned null",s.UNKNOWN_ERROR,{}),t[0]}));e=c.call(this,n)||this}return s.checkNew(e,h),e._providers=t.slice(0),e}n.FallbackProvider=l},{"../errors":5,"./base-provider":51}],54:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./abstract-provider");n.Provider=r.Provider;var i=t("./base-provider");n.BaseProvider=i.BaseProvider;var o=t("./etherscan-provider");n.EtherscanProvider=o.EtherscanProvider;var a=t("./fallback-provider");n.FallbackProvider=a.FallbackProvider;var s=t("./ipc-provider");n.IpcProvider=s.IpcProvider;var u=t("./infura-provider");n.InfuraProvider=u.InfuraProvider;var c=t("./json-rpc-provider");n.JsonRpcProvider=c.JsonRpcProvider,n.JsonRpcSigner=c.JsonRpcSigner;var l=t("./web3-provider");n.Web3Provider=l.Web3Provider},{"./abstract-provider":50,"./base-provider":51,"./etherscan-provider":52,"./fallback-provider":53,"./infura-provider":55,"./ipc-provider":56,"./json-rpc-provider":57,"./web3-provider":58}],55:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("./json-rpc-provider"),u=t("../utils/bytes"),c=t("../utils/networks"),l=t("../utils/properties"),h=o(t("../errors")),f=(i(d,a=s.JsonRpcProvider),d.prototype._startPending=function(){h.warn("WARNING: INFURA does not support pending filters")},d.prototype.getSigner=function(t){return h.throwError("INFURA does not support signing",h.UNSUPPORTED_OPERATION,{operation:"getSigner"})},d.prototype.listAccounts=function(){return Promise.resolve([])},d);function d(t,e){var n=this,r=c.getNetwork(null==t?"homestead":t);null==e&&(e="7d0d81d0919f4f05b9ab6634be01ee73");var i=null;switch(r.name){case"homestead":i="mainnet.infura.io";break;case"ropsten":i="ropsten.infura.io";break;case"rinkeby":i="rinkeby.infura.io";break;case"goerli":i="goerli.infura.io";break;case"kovan":i="kovan.infura.io";break;default:h.throwError("unsupported network",h.INVALID_ARGUMENT,{argument:"network",value:t})}return u.isHexString("0x"+e,16)?(n=a.call(this,"https://"+i+"/v3/"+e,r)||this,l.defineReadOnly(n,"apiAccessToken",null),l.defineReadOnly(n,"projectId",e)):(h.warn("The legacy INFURA apiAccesToken API is deprecated; please upgrade to a Project ID instead (see INFURA dshboard; https://infura.io)"),n=a.call(this,"https://"+i+"/"+e,r)||this,l.defineReadOnly(n,"apiAccessToken",e),l.defineReadOnly(n,"projectId",null)),h.checkNew(n,d),n}n.InfuraProvider=f},{"../errors":5,"../utils/bytes":64,"../utils/networks":72,"../utils/properties":74,"./json-rpc-provider":57}],56:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0})},{}],57:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./base-provider"),s=t("../abstract-signer"),u=o(t("../errors")),c=t("../utils/address"),l=t("../utils/bytes"),h=t("../utils/networks"),f=t("../utils/properties"),d=t("../utils/utf8"),p=t("../utils/web");function m(t){if(t.error){var e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function g(t){return t?t.toLowerCase():t}var v,y={},b=42,w=(i(_,v=s.Signer),_.prototype.getAddress=function(){var t=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((function(e){return e.length<=t._index&&u.throwError("unknown account #"+t._index,u.UNSUPPORTED_OPERATION,{operation:"getAddress"}),t._address=c.getAddress(e[t._index]),t._address}))},_.prototype.getBalance=function(t){return this.provider.getBalance(this.getAddress(),t)},_.prototype.getTransactionCount=function(t){return this.provider.getTransactionCount(this.getAddress(),t)},_.prototype.sendUncheckedTransaction=function(t){var e=this;t=f.shallowCopy(t);var n=this.getAddress().then((function(t){return t&&t.toLowerCase()}));if(null==t.gasLimit){var r=f.shallowCopy(t);r.from=n,t.gasLimit=this.provider.estimateGas(r)}return Promise.all([f.resolveProperties(t),n]).then((function(t){var n=t[0],r=S.hexlifyTransaction(n);return r.from=t[1],e.provider.send("eth_sendTransaction",[r]).then((function(t){return t}),(function(t){throw t.responseText&&(0<=t.responseText.indexOf("insufficient funds")&&u.throwError("insufficient funds",u.INSUFFICIENT_FUNDS,{transaction:n}),0<=t.responseText.indexOf("nonce too low")&&u.throwError("nonce has already been used",u.NONCE_EXPIRED,{transaction:n}),0<=t.responseText.indexOf("replacement transaction underpriced")&&u.throwError("replacement fee too low",u.REPLACEMENT_UNDERPRICED,{transaction:n})),t}))}))},_.prototype.sendTransaction=function(t){var e=this;return this.sendUncheckedTransaction(t).then((function(t){return p.poll((function(){return e.provider.getTransaction(t).then((function(n){if(null!==n)return e.provider._wrapTransaction(n,t)}))}),{fastRetry:250,onceBlock:e.provider}).catch((function(e){throw e.transactionHash=t,e}))}))},_.prototype.signMessage=function(t){var e=this,n="string"==typeof t?d.toUtf8Bytes(t):t;return this.getAddress().then((function(t){return e.provider.send("eth_sign",[t.toLowerCase(),l.hexlify(n)])}))},_.prototype.unlock=function(t){var e=this.provider;return this.getAddress().then((function(n){return e.send("personal_unlockAccount",[n.toLowerCase(),t,null])}))},_);function _(t,e,n){var r=v.call(this)||this;if(u.checkNew(r,_),t!==y)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return f.defineReadOnly(r,"provider",e),n?"string"==typeof n?f.defineReadOnly(r,"_address",c.getAddress(n)):"number"==typeof n?f.defineReadOnly(r,"_index",n):u.throwError("invalid address or index",u.INVALID_ARGUMENT,{argument:"addressOrIndex",value:n}):f.defineReadOnly(r,"_index",0),r}n.JsonRpcSigner=w;var E,T={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0},S=(i(x,E=a.BaseProvider),x.prototype.getSigner=function(t){return new w(y,this,t)},x.prototype.listAccounts=function(){return this.send("eth_accounts",[]).then((function(t){return t.map((function(t){return c.getAddress(t)}))}))},x.prototype.send=function(t,e){var n=this,r={method:t,params:e,id:b++,jsonrpc:"2.0"};return p.fetchJson(this.connection,JSON.stringify(r),m).then((function(t){return n.emit("debug",{action:"send",request:r,response:t,provider:n}),t}))},x.prototype.perform=function(t,e){switch(t){case"getBlockNumber":return this.send("eth_blockNumber",[]);case"getGasPrice":return this.send("eth_gasPrice",[]);case"getBalance":return this.send("eth_getBalance",[g(e.address),e.blockTag]);case"getTransactionCount":return this.send("eth_getTransactionCount",[g(e.address),e.blockTag]);case"getCode":return this.send("eth_getCode",[g(e.address),e.blockTag]);case"getStorageAt":return this.send("eth_getStorageAt",[g(e.address),e.position,e.blockTag]);case"sendTransaction":return this.send("eth_sendRawTransaction",[e.signedTransaction]).catch((function(t){throw t.responseText&&(0<t.responseText.indexOf("insufficient funds")&&u.throwError("insufficient funds",u.INSUFFICIENT_FUNDS,{}),0<t.responseText.indexOf("nonce too low")&&u.throwError("nonce has already been used",u.NONCE_EXPIRED,{}),0<t.responseText.indexOf("replacement transaction underpriced")&&u.throwError("replacement fee too low",u.REPLACEMENT_UNDERPRICED,{})),t}));case"getBlock":return e.blockTag?this.send("eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]):e.blockHash?this.send("eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]):Promise.reject(new Error("invalid block tag or block hash"));case"getTransaction":return this.send("eth_getTransactionByHash",[e.transactionHash]);case"getTransactionReceipt":return this.send("eth_getTransactionReceipt",[e.transactionHash]);case"call":return this.send("eth_call",[x.hexlifyTransaction(e.transaction,{from:!0}),e.blockTag]);case"estimateGas":return this.send("eth_estimateGas",[x.hexlifyTransaction(e.transaction,{from:!0})]);case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=g(e.filter.address)),this.send("eth_getLogs",[e.filter])}return u.throwError(t+" not implemented",u.NOT_IMPLEMENTED,{operation:t}),null},x.prototype._startPending=function(){if(null==this._pendingFilter){var t=this,e=this.send("eth_newPendingTransactionFilter",[]);(this._pendingFilter=e).then((function(n){return function r(){t.send("eth_getFilterChanges",[n]).then((function(n){if(t._pendingFilter!=e)return null;var r=Promise.resolve();return n.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",r=r.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),r.then((function(){return new Promise((function(t){setTimeout((function(){t()}),1e3)}))}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){r()}),0),null;t.send("eth_uninstallFilter",[n])})).catch((function(t){}))}(),n})).catch((function(t){}))}},x.prototype._stopPending=function(){this._pendingFilter=null},x.hexlifyTransaction=function(t,e){var n=f.shallowCopy(T);if(e)for(var r in e)e[r]&&(n[r]=!0);f.checkProperties(t,n);var i={};return["gasLimit","gasPrice","nonce","value"].forEach((function(e){if(null!=t[e]){var n=l.hexStripZeros(l.hexlify(t[e]));"gasLimit"===e&&(e="gas"),i[e]=n}})),["from","to","data"].forEach((function(e){null!=t[e]&&(i[e]=l.hexlify(t[e]))})),i},x);function x(t,e){var n=this;if("string"==typeof t&&null===e&&h.getNetwork(t)&&(e=t,t=null),e)n=E.call(this,e)||this;else{var r=new Promise((function(t,e){setTimeout((function(){n.send("net_version",[]).then((function(e){return t(h.getNetwork(parseInt(e)))})).catch((function(t){e(t)}))}))}));n=E.call(this,r)||this}return u.checkNew(n,x),t=t||"http://localhost:8545",n.connection="string"==typeof t?{url:t}:t,n}n.JsonRpcProvider=S},{"../abstract-signer":2,"../errors":5,"../utils/address":60,"../utils/bytes":64,"../utils/networks":72,"../utils/properties":74,"../utils/utf8":85,"../utils/web":86,"./base-provider":51}],58:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("./json-rpc-provider"),u=t("../utils/properties"),c=o(t("../errors")),l=42,h=(i(f,a=s.JsonRpcProvider),f.prototype.send=function(t,e){var n=this;return"eth_sign"==t&&this._web3Provider.isMetaMask&&(t="personal_sign",e=[e[1],e[0]]),new Promise((function(r,i){var o={method:t,params:e,id:l++,jsonrpc:"2.0"};n._sendAsync(o,(function(t,e){if(t)i(t);else{if(e.error){var n=new Error(e.error.message);return n.code=e.error.code,n.data=e.error.data,void i(n)}r(e.result)}}))}))},f);function f(t,e){var n=a.call(this,t.host||t.path||"",e)||this;return c.checkNew(n,f),t&&(t.sendAsync?n._sendAsync=t.sendAsync.bind(t):t.send&&(n._sendAsync=t.send.bind(t))),t&&n._sendAsync||c.throwError("invalid web3Provider",c.INVALID_ARGUMENT,{arg:"web3Provider",value:t}),u.defineReadOnly(n,"_web3Provider",t),u.defineReadOnly(n,"provider",t),n}n.Web3Provider=h},{"../errors":5,"../utils/properties":74,"./json-rpc-provider":57}],59:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../constants"),s=o(t("../errors")),u=t("./address"),c=t("./bignumber"),l=t("./bytes"),h=t("./utf8"),f=t("./properties"),d=new RegExp(/^bytes([0-9]*)$/),p=new RegExp(/^(u?int)([0-9]*)$/),m=new RegExp(/^(.*)\[([0-9]*)\]$/);n.defaultCoerceFunc=function(t,e){var n=t.match(p);return n&&parseInt(n[2])<=48?e.toNumber():e};var g=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),v=new RegExp("^[A-Za-z_][A-Za-z0-9_]*$");function y(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}function b(t,e){var n=t;function r(t){throw new Error('unexpected character "'+n[t]+'" at position '+t+' in "'+n+'"')}t=t.replace(/\s/g," ");for(var i={type:"",name:"",state:{allowType:!0}},o=i,a=0;a<t.length;a++){var s=t[a];switch(s){case"(":o.state.allowParams||r(a),o.state.allowType=!1,o.type=y(o.type),o.components=[{type:"",name:"",parent:o,state:{allowType:!0}}],o=o.components[0];break;case")":delete o.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),o.type=y(o.type);var u=o;(o=o.parent)||r(a),delete u.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),o.type=y(o.type);var c={type:"",name:"",parent:o.parent,state:{allowType:!0}};o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&""!==o.type&&(o.type=y(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&(e&&"indexed"===o.name?(o.indexed=!0,o.name=""):o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:r(a)}}if(o.parent)throw new Error("unexpected eof");return delete i.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),i.type=y(i.type),i}function w(t){return at(n.defaultCoerceFunc,t).type}function _(t,e,n,r,i){this.coerceFunc=t,this.name=e,this.type=n,this.localName=r,this.dynamic=i}n.parseParamType=function(t){return b(t,!0)},n.formatParamType=w,n.formatSignature=function(t){return t.name+"("+t.inputs.map((function(t){return w(t)})).join(",")+")"},n.parseSignature=function(t){if("string"==typeof t)return"event "===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).substring(0,6)?function(t){var e={anonymous:!1,inputs:[],name:"",type:"event"},n=t.match(g);if(!n)throw new Error("invalid event: "+t);if(e.name=n[1].trim(),it(n[2]).forEach((function(t){(t=b(t,!0)).indexed=!!t.indexed,e.inputs.push(t)})),n[3].split(" ").forEach((function(t){switch(t){case"anonymous":e.anonymous=!0;break;case"":break;default:s.info("unknown modifier: "+t)}})),e.name&&!e.name.match(v))throw new Error('invalid identifier: "'+e.name+'"');return e}(t.substring(6).trim()):("function "===t.substring(0,9)&&(t=t.substring(9)),function(t){var e={constant:!1,gas:null,inputs:[],name:"",outputs:[],payable:!1,stateMutability:null,type:"function"},n=t.split("@");if(1!==n.length){if(2<n.length)throw new Error("invalid signature");if(!n[1].match(/^[0-9]+$/))throw new Error("invalid signature gas");e.gas=c.bigNumberify(n[1]),t=n[0]}var r=(n=t.split(" returns "))[0].match(g);if(!r)throw new Error("invalid signature");if(e.name=r[1].trim(),!e.name.match(v))throw new Error('invalid identifier: "'+r[1]+'"');if(it(r[2]).forEach((function(t){e.inputs.push(b(t))})),r[3].split(" ").forEach((function(t){switch(t){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:s.info("unknown modifier: "+t)}})),1<n.length){var i=n[1].match(g);if(""!=i[1].trim()||""!=i[3].trim())throw new Error("unexpected tokens");it(i[2]).forEach((function(t){e.outputs.push(b(t))}))}if("constructor"===e.name){if(e.type="constructor",e.outputs.length)throw new Error("constructor may not have outputs");delete e.name,delete e.outputs}return e}(t.trim()));throw new Error("unknown signature")};var E,T=(i(S,E=_),S.prototype.encode=function(t){return this.coder.encode(t)},S.prototype.decode=function(t,e){return this.coder.decode(t,e)},S);function S(t){var e=E.call(this,t.coerceFunc,t.name,t.type,void 0,t.dynamic)||this;return f.defineReadOnly(e,"coder",t),e}var x,I=(i(k,x=_),k.prototype.encode=function(t){return l.arrayify([])},k.prototype.decode=function(t,e){if(e>t.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}},k);function k(t,e){return x.call(this,t,"null","",e,!1)||this}var A,C=(i(N,A=_),N.prototype.encode=function(t){try{var e=c.bigNumberify(t);if(this.signed){var n=a.MaxUint256.maskn(8*this.size-1);if(e.gt(n))throw new Error("out-of-bounds");if(n=n.add(a.One).mul(a.NegativeOne),e.lt(n))throw new Error("out-of-bounds")}else if(e.lt(a.Zero)||e.gt(a.MaxUint256.maskn(8*this.size)))throw new Error("out-of-bounds");return e=e.toTwos(8*this.size).maskn(8*this.size),this.signed&&(e=e.fromTwos(8*this.size).toTwos(256)),l.padZeros(l.arrayify(e),32)}catch(e){s.throwError("invalid number value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:t})}return null},N.prototype.decode=function(t,e){t.length<e+32&&s.throwError("insufficient data for "+this.name+" type",s.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:l.hexlify(t.slice(e,e+32))});var n=32-this.size,r=c.bigNumberify(t.slice(e+n,e+32));return r=this.signed?r.fromTwos(8*this.size):r.maskn(8*this.size),{consumed:32,value:this.coerceFunc(this.name,r)}},N);function N(t,e,n,r){var i=this,o=(n?"int":"uint")+8*e;return(i=A.call(this,t,o,o,r,!1)||this).size=e,i.signed=n,i}var M,P=new C((function(t,e){return e}),32,!1,"none"),L=(i(D,M=_),D.prototype.encode=function(t){return P.encode(t?1:0)},D.prototype.decode=function(t,e){try{var n=P.decode(t,e)}catch(t){throw"insufficient data for uint256 type"===t.reason&&s.throwError("insufficient data for boolean type",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"boolean",value:t.value}),t}return{consumed:n.consumed,value:this.coerceFunc("bool",!n.value.isZero())}},D);function D(t,e){return M.call(this,t,"bool","bool",e,!1)||this}var R,O=(i(B,R=_),B.prototype.encode=function(t){var e=new Uint8Array(32);try{var n=l.arrayify(t);if(n.length!==this.length)throw new Error("incorrect data length");e.set(n)}catch(e){s.throwError("invalid "+this.name+" value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:e.value||t})}return e},B.prototype.decode=function(t,e){return t.length<e+32&&s.throwError("insufficient data for "+this.name+" type",s.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:l.hexlify(t.slice(e,e+32))}),{consumed:32,value:this.coerceFunc(this.name,l.hexlify(t.slice(e,e+this.length)))}},B);function B(t,e,n){var r=this,i="bytes"+e;return(r=R.call(this,t,i,i,n,!1)||this).length=e,r}var U,F=(i(j,U=_),j.prototype.encode=function(t){var e=new Uint8Array(32);try{e.set(l.arrayify(u.getAddress(t)),12)}catch(e){s.throwError("invalid address",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:t})}return e},j.prototype.decode=function(t,e){return t.length<e+32&&s.throwError("insufficuent data for address type",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:l.hexlify(t.slice(e,e+32))}),{consumed:32,value:this.coerceFunc("address",u.getAddress(l.hexlify(t.slice(e+12,e+32))))}},j);function j(t,e){return U.call(this,t,"address","address",e,!1)||this}function q(t){var e=32*Math.ceil(t.length/32),n=new Uint8Array(e-t.length);return l.concat([P.encode(t.length),t,n])}function V(t,e,n){t.length<e+32&&s.throwError("insufficient data for dynamicBytes length",s.INVALID_ARGUMENT,{arg:n,coderType:"dynamicBytes",value:l.hexlify(t.slice(e,e+32))});var r=P.decode(t,e).value;try{r=r.toNumber()}catch(t){s.throwError("dynamic bytes count too large",s.INVALID_ARGUMENT,{arg:n,coderType:"dynamicBytes",value:r.toString()})}return t.length<e+32+r&&s.throwError("insufficient data for dynamicBytes type",s.INVALID_ARGUMENT,{arg:n,coderType:"dynamicBytes",value:l.hexlify(t.slice(e,e+32+r))}),{consumed:32+32*Math.ceil(r/32),value:t.slice(e+32,e+32+r)}}var $,z=(i(H,$=_),H.prototype.encode=function(t){try{return q(l.arrayify(t))}catch(t){s.throwError("invalid bytes value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"bytes",value:t.value})}return null},H.prototype.decode=function(t,e){var n=V(t,e,this.localName);return n.value=this.coerceFunc("bytes",l.hexlify(n.value)),n},H);function H(t,e){return $.call(this,t,"bytes","bytes",e,!0)||this}var G,W=(i(K,G=_),K.prototype.encode=function(t){return"string"!=typeof t&&s.throwError("invalid string value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"string",value:t}),q(h.toUtf8Bytes(t))},K.prototype.decode=function(t,e){var n=V(t,e,this.localName);return n.value=this.coerceFunc("string",h.toUtf8String(n.value)),n},K);function K(t,e){return G.call(this,t,"string","string",e,!0)||this}function Z(t){return 32*Math.ceil(t/32)}function Q(t,e){if(Array.isArray(e));else if(e&&"object"==typeof e){var n=[];t.forEach((function(t){n.push(e[t.localName])})),e=n}else s.throwError("invalid tuple value",s.INVALID_ARGUMENT,{coderType:"tuple",value:e});t.length!==e.length&&s.throwError("types/value length mismatch",s.INVALID_ARGUMENT,{coderType:"tuple",value:e});var r=[];t.forEach((function(t,n){r.push({dynamic:t.dynamic,value:t.encode(e[n])})}));var i=0,o=0;r.forEach((function(t){t.dynamic?(i+=32,o+=Z(t.value.length)):i+=Z(t.value.length)}));var a=0,u=i,c=new Uint8Array(i+o);return r.forEach((function(t){t.dynamic?(c.set(P.encode(u),a),a+=32,c.set(t.value,u),u+=Z(t.value.length)):(c.set(t.value,a),a+=Z(t.value.length))})),c}function Y(t,e,n){var r=n,i=0,o=[];return t.forEach((function(t){if(t.dynamic){var a=P.decode(e,n);(s=t.decode(e,r+a.value.toNumber())).consumed=a.consumed}else var s=t.decode(e,n);null!=s.value&&o.push(s.value),n+=s.consumed,i+=s.consumed})),t.forEach((function(t,e){var n=t.localName;n&&("length"===n&&(n="_length"),null==o[n]&&(o[n]=o[e]))})),{value:o,consumed:i}}var J,X=(i(tt,J=_),tt.prototype.encode=function(t){Array.isArray(t)||s.throwError("expected array value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:t});var e=this.length,n=new Uint8Array(0);-1===e&&(e=t.length,n=P.encode(e)),s.checkArgumentCount(e,t.length," in coder array"+(this.localName?" "+this.localName:""));for(var r=[],i=0;i<t.length;i++)r.push(this.coder);return l.concat([n,Q(r,t)])},tt.prototype.decode=function(t,e){var n=0,r=this.length;if(-1===r){try{var i=P.decode(t,e)}catch(t){s.throwError("insufficient data for dynamic array length",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:t.value})}try{r=i.value.toNumber()}catch(t){s.throwError("array count too large",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:i.value.toString()})}n+=i.consumed,e+=i.consumed}for(var o=[],a=0;a<r;a++)o.push(new T(this.coder));var u=Y(o,t,e);return u.consumed+=n,u.value=this.coerceFunc(this.type,u.value),u},tt);function tt(t,e,n,r){var i=this,o=e.type+"["+(0<=n?n:"")+"]",a=-1===n||e.dynamic;return(i=J.call(this,t,"array",o,r,a)||this).coder=e,i.length=n,i}var et,nt=(i(rt,et=_),rt.prototype.encode=function(t){return Q(this.coders,t)},rt.prototype.decode=function(t,e){var n=Y(this.coders,t,e);return n.value=this.coerceFunc(this.type,n.value),n},rt);function rt(t,e,n){var r=this,i=!1,o=[];e.forEach((function(t){t.dynamic&&(i=!0),o.push(t.type)}));var a="tuple("+o.join(",")+")";return(r=et.call(this,t,"tuple",a,n,i)||this).coders=e,r}function it(t){t=t.trim();for(var e=[],n="",r=0,i=0;i<t.length;i++){var o=t[i];if(","===o&&0===r)e.push(n),n="";else if(n+=o,"("===o)r++;else if(")"===o&&-1==--r)throw new Error("unbalanced parenthsis")}return n&&e.push(n),e}var ot={address:F,bool:L,string:W,bytes:z};function at(t,e){var n,r=ot[e.type];if(r)return new r(t,e.name);if(n=e.type.match(p))return(0===(i=parseInt(n[2]||"256"))||256<i||i%8!=0)&&s.throwError("invalid "+n[1]+" bit length",s.INVALID_ARGUMENT,{arg:"param",value:e}),new C(t,i/8,"int"===n[1],e.name);if(n=e.type.match(d))return(0===(i=parseInt(n[1]))||32<i)&&s.throwError("invalid bytes length",s.INVALID_ARGUMENT,{arg:"param",value:e}),new O(t,i,e.name);if(n=e.type.match(m)){var i=parseInt(n[2]||"-1");return(e=f.shallowCopy(e)).type=n[1],e=f.deepCopy(e),new X(t,at(t,e),i,e.name)}return"tuple"===e.type.substring(0,5)?function(t,e,n){var r=[];return(e=e||[]).forEach((function(e){r.push(at(t,e))})),new nt(t,r,n)}(t,e.components,e.name):""===e.type?new I(t,e.name):(s.throwError("invalid type",s.INVALID_ARGUMENT,{arg:"type",value:e.type}),null)}var st=(ut.prototype.encode=function(t,e){t.length!==e.length&&s.throwError("types/values length mismatch",s.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});var n=[];return t.forEach((function(t){var e;e="string"==typeof t?b(t):t,n.push(at(this.coerceFunc,e))}),this),l.hexlify(new nt(this.coerceFunc,n,"_").encode(e))},ut.prototype.decode=function(t,e){var n=[];return t.forEach((function(t){var e;e="string"==typeof t?b(t):f.deepCopy(t),n.push(at(this.coerceFunc,e))}),this),new nt(this.coerceFunc,n,"_").decode(l.arrayify(e),0).value},ut);function ut(t){s.checkNew(this,ut),t=t||n.defaultCoerceFunc,f.defineReadOnly(this,"coerceFunc",t)}n.AbiCoder=st,n.defaultAbiCoder=new st},{"../constants":3,"../errors":5,"./address":60,"./bignumber":63,"./bytes":64,"./properties":74,"./utf8":85}],60:[function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("bn.js")),o=t("./bytes"),a=t("./keccak256"),s=t("./rlp"),u=t("../errors");function c(t){"string"==typeof t&&t.match(/^0x[0-9A-Fa-f]{40}$/)||u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:t});for(var e=(t=t.toLowerCase()).substring(2).split(""),n=new Uint8Array(40),r=0;r<40;r++)n[r]=e[r].charCodeAt(0);n=o.arrayify(a.keccak256(n));for(var i=0;i<40;i+=2)8<=n[i>>1]>>4&&(e[i]=e[i].toUpperCase()),8<=(15&n[i>>1])&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}for(var l={},h=0;h<10;h++)l[String(h)]=String(h);for(h=0;h<26;h++)l[String.fromCharCode(65+h)]=String(10+h);var f,d=Math.floor((f=9007199254740991,Math.log10?Math.log10(f):Math.log(f)/Math.LN10));function p(t){t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00";var e="";for(t.split("").forEach((function(t){e+=l[t]}));e.length>=d;){var n=e.substring(0,d);e=parseInt(n,10)%97+e.substring(n.length)}for(var r=String(98-parseInt(e,10)%97);r.length<2;)r="0"+r;return r}function m(t){var e=null;if("string"!=typeof t&&u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:t}),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=c(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&u.throwError("bad address checksum",u.INVALID_ARGUMENT,{arg:"address",value:t});else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==p(t)&&u.throwError("bad icap checksum",u.INVALID_ARGUMENT,{arg:"address",value:t}),e=new i.default.BN(t.substring(4),36).toString(16);e.length<40;)e="0"+e;e=c("0x"+e)}else u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:t});return e}n.getAddress=m,n.getIcapAddress=function(t){for(var e=new i.default.BN(m(t).substring(2),16).toString(36).toUpperCase();e.length<30;)e="0"+e;return"XE"+p("XE00"+e)+e},n.getContractAddress=function(t){if(!t.from)throw new Error("missing from address");var e=t.nonce;return m("0x"+a.keccak256(s.encode([m(t.from),o.stripZeros(o.hexlify(e))])).substring(26))},n.getCreate2Address=function(t){var e=t.initCodeHash;t.initCode&&(e?a.keccak256(t.initCode)!==e&&u.throwError("initCode/initCodeHash mismatch",u.INVALID_ARGUMENT,{arg:"options",value:t}):e=a.keccak256(t.initCode)),e||u.throwError("missing initCode or initCodeHash",u.INVALID_ARGUMENT,{arg:"options",value:t});var n=m(t.from),r=o.arrayify(t.salt);return 32!==r.length&&u.throwError("invalid salt",u.INVALID_ARGUMENT,{arg:"options",value:t}),m("0x"+a.keccak256(o.concat(["0xff",n,r,e])).substring(26))}},{"../errors":5,"./bytes":64,"./keccak256":71,"./rlp":76,"bn.js":9}],61:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/bytes");e.exports={decode:function(t){t=atob(t);for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n));return r.arrayify(e)},encode:function(t){t=r.arrayify(t);for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}}},{"../utils/bytes":64}],62:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./bytes"),i=t("./properties"),o=(a.prototype.encode=function(t){var e=r.arrayify(t);if(0===e.length)return"";for(var n=[0],i=0;i<e.length;++i){for(var o=e[i],a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;0<o;)n.push(o%this.base),o=o/this.base|0}for(var s="",u=0;0===e[u]&&u<e.length-1;++u)s+=this._leader;for(var c=n.length-1;0<=c;--c)s+=this.alphabet[n[c]];return s},a.prototype.decode=function(t){if("string"!=typeof t)throw new TypeError("Expected String");var e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(var n=0;n<t.length;n++){var i=this._alphabetMap[t[n]];if(void 0===i)throw new Error("Non-base"+this.base+" character");for(var o=i,a=0;a<e.length;++a)o+=e[a]*this.base,e[a]=255&o,o>>=8;for(;0<o;)e.push(255&o),o>>=8}for(var s=0;t[s]===this._leader&&s<t.length-1;++s)e.push(0);return r.arrayify(new Uint8Array(e.reverse()))},a);function a(t){i.defineReadOnly(this,"alphabet",t),i.defineReadOnly(this,"base",t.length),i.defineReadOnly(this,"_alphabetMap",{}),i.defineReadOnly(this,"_leader",t.charAt(0));for(var e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}var s=new(n.BaseX=o)("abcdefghijklmnopqrstuvwxyz234567");n.Base32=s;var u=new o("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");n.Base58=u},{"./bytes":64,"./properties":74}],63:[function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t("bn.js")),a=t("./bytes"),s=t("./properties"),u=i(t("../errors")),c=new o.default.BN(-1);function l(t){var e=t.toString(16);return"-"===e[0]?e.length%2==0?"-0x0"+e.substring(1):"-0x"+e.substring(1):e.length%2==1?"0x0"+e:"0x"+e}function h(t){return d(g(t))}function f(t){return new p(l(t))}function d(t){var e=t._hex;return"-"===e[0]?new o.default.BN(e.substring(3),16).mul(c):new o.default.BN(e.substring(2),16)}var p=(m.prototype.fromTwos=function(t){return f(d(this).fromTwos(t))},m.prototype.toTwos=function(t){return f(d(this).toTwos(t))},m.prototype.abs=function(){return"-"===this._hex[0]?f(d(this).mul(c)):this},m.prototype.add=function(t){return f(d(this).add(h(t)))},m.prototype.sub=function(t){return f(d(this).sub(h(t)))},m.prototype.div=function(t){return g(t).isZero()&&u.throwError("division by zero",u.NUMERIC_FAULT,{operation:"divide",fault:"division by zero"}),f(d(this).div(h(t)))},m.prototype.mul=function(t){return f(d(this).mul(h(t)))},m.prototype.mod=function(t){return f(d(this).mod(h(t)))},m.prototype.pow=function(t){return f(d(this).pow(h(t)))},m.prototype.maskn=function(t){return f(d(this).maskn(t))},m.prototype.eq=function(t){return d(this).eq(h(t))},m.prototype.lt=function(t){return d(this).lt(h(t))},m.prototype.lte=function(t){return d(this).lte(h(t))},m.prototype.gt=function(t){return d(this).gt(h(t))},m.prototype.gte=function(t){return d(this).gte(h(t))},m.prototype.isZero=function(){return d(this).isZero()},m.prototype.toNumber=function(){try{return d(this).toNumber()}catch(t){u.throwError("overflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:t.message})}return null},m.prototype.toString=function(){return d(this).toString(10)},m.prototype.toHexString=function(){return this._hex},m.isBigNumber=function(t){return s.isType(t,"BigNumber")},m);function m(t){if(u.checkNew(this,m),s.setType(this,"BigNumber"),"string"==typeof t)a.isHexString(t)?("0x"==t&&(t="0x0"),s.defineReadOnly(this,"_hex",t)):"-"===t[0]&&a.isHexString(t.substring(1))?s.defineReadOnly(this,"_hex",t):t.match(/^-?[0-9]*$/)?(""==t&&(t="0"),s.defineReadOnly(this,"_hex",l(new o.default.BN(t)))):u.throwError("invalid BigNumber string value",u.INVALID_ARGUMENT,{arg:"value",value:t});else if("number"==typeof t){parseInt(String(t))!==t&&u.throwError("underflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"underflow",value:t,outputValue:parseInt(String(t))});try{s.defineReadOnly(this,"_hex",l(new o.default.BN(t)))}catch(t){u.throwError("overflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:t.message})}}else t instanceof m?s.defineReadOnly(this,"_hex",t._hex):t.toHexString?s.defineReadOnly(this,"_hex",l(h(t.toHexString()))):t._hex&&a.isHexString(t._hex)?s.defineReadOnly(this,"_hex",t._hex):a.isArrayish(t)?s.defineReadOnly(this,"_hex",l(new o.default.BN(a.hexlify(t).substring(2),16))):u.throwError("invalid BigNumber value",u.INVALID_ARGUMENT,{arg:"value",value:t})}function g(t){return p.isBigNumber(t)?t:new p(t)}n.BigNumber=p,n.bigNumberify=g},{"../errors":5,"./bytes":64,"./properties":74,"bn.js":9}],64:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors"));function o(t){return!!t.toHexString}function a(t){return t.slice||(t.slice=function(){var e=Array.prototype.slice.call(arguments);return a(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function s(t){if(!t||parseInt(String(t.length))!=t.length||"string"==typeof t)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(n<0||256<=n||parseInt(String(n))!=n)return!1}return!0}function u(t){if(null==t&&i.throwError("cannot convert null value to array",i.INVALID_ARGUMENT,{arg:"value",value:t}),o(t)&&(t=t.toHexString()),"string"!=typeof t)return s(t)?a(new Uint8Array(t)):(i.throwError("invalid arrayify value",null,{arg:"value",value:t,type:typeof t}),null);var e=t.match(/^(0x)?[0-9a-fA-F]*$/);e||i.throwError("invalid hexidecimal string",i.INVALID_ARGUMENT,{arg:"value",value:t}),"0x"!==e[1]&&i.throwError("hex string must have 0x prefix",i.INVALID_ARGUMENT,{arg:"value",value:t}),(t=t.substring(2)).length%2&&(t="0"+t);for(var n=[],r=0;r<t.length;r+=2)n.push(parseInt(t.substr(r,2),16));return a(new Uint8Array(n))}function c(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=u(t[r]);e.push(i),n+=i.length}var o=new Uint8Array(n),s=0;for(r=0;r<e.length;r++)o.set(e[r],s),s+=e[r].length;return a(o)}function l(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}n.isHexable=o,n.isArrayish=s,n.arrayify=u,n.concat=c,n.stripZeros=function(t){var e=u(t);if(0===e.length)return e;for(var n=0;0===e[n];)n++;return n&&(e=e.slice(n)),e},n.padZeros=function(t,e){if(e<(t=u(t)).length)throw new Error("cannot pad");var n=new Uint8Array(e);return n.set(t,e-t.length),a(n)},n.isHexString=l;var h="0123456789abcdef";function f(t){if(o(t))return t.toHexString();if("number"==typeof t){t<0&&i.throwError("cannot hexlify negative value",i.INVALID_ARGUMENT,{arg:"value",value:t}),9007199254740991<=t&&i.throwError("out-of-range",i.NUMERIC_FAULT,{operartion:"hexlify",fault:"out-of-safe-range"});for(var e="";t;)e=h[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("string"==typeof t){var n=t.match(/^(0x)?[0-9a-fA-F]*$/);return n||i.throwError("invalid hexidecimal string",i.INVALID_ARGUMENT,{arg:"value",value:t}),"0x"!==n[1]&&i.throwError("hex string must have 0x prefix",i.INVALID_ARGUMENT,{arg:"value",value:t}),t.length%2&&(t="0x0"+t.substring(2)),t}if(s(t)){for(var r=[],a=0;a<t.length;a++){var u=t[a];r.push(h[(240&u)>>4]+h[15&u])}return"0x"+r.join("")}return i.throwError("invalid hexlify value",null,{arg:"value",value:t}),"never"}function d(t,e){for(l(t)||i.throwError("invalid hex string",i.INVALID_ARGUMENT,{arg:"value",value:t});t.length<2*e+2;)t="0x0"+t.substring(2);return t}function p(t){var e=0,n="0x",r="0x";if(function(t){return t&&null!=t.r&&null!=t.s}(t)){null==t.v&&null==t.recoveryParam&&i.throwError("at least on of recoveryParam or v must be specified",i.INVALID_ARGUMENT,{argument:"signature",value:t}),n=d(t.r,32),r=d(t.s,32),"string"==typeof(e=t.v)&&(e=parseInt(e,16));var o=t.recoveryParam;null==o&&null!=t.v&&(o=1-e%2),e=27+o}else{var a=u(t);if(65!==a.length)throw new Error("invalid signature");n=f(a.slice(0,32)),r=f(a.slice(32,64)),27!==(e=a[64])&&28!==e&&(e=27+e%2)}return{r:n,s:r,recoveryParam:e-27,v:e}}n.hexlify=f,n.hexDataLength=function(t){return l(t)&&t.length%2==0?(t.length-2)/2:null},n.hexDataSlice=function(t,e,n){return l(t)||i.throwError("invalid hex data",i.INVALID_ARGUMENT,{arg:"value",value:t}),t.length%2!=0&&i.throwError("hex data length must be even",i.INVALID_ARGUMENT,{arg:"value",value:t}),e=2+2*e,null!=n?"0x"+t.substring(e,2+2*n):"0x"+t.substring(e)},n.hexStripZeros=function(t){for(l(t)||i.throwError("invalid hex string",i.INVALID_ARGUMENT,{arg:"value",value:t});3<t.length&&"0x0"===t.substring(0,3);)t="0x"+t.substring(3);return t},n.hexZeroPad=d,n.splitSignature=p,n.joinSignature=function(t){return f(c([(t=p(t)).r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}},{"../errors":5}],65:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors")),o=t("./bytes"),a=t("./utf8"),s=t("./keccak256"),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),c=new RegExp("^((.*)\\.)?([^.]+)$"),l=new RegExp("^[a-z0-9.-]*$");n.namehash=function(t){"string"!=typeof t&&i.throwError("invalid address - "+String(t),i.INVALID_ARGUMENT,{argument:"name",value:t}),(t=t.toLowerCase()).match(l)||i.throwError("contains invalid UseSTD3ASCIIRules characters",i.INVALID_ARGUMENT,{argument:"name",value:t});for(var e=u;t.length;){var n=t.match(c),r=a.toUtf8Bytes(n[3]);e=s.keccak256(o.concat([e,s.keccak256(r)])),t=n[2]||""}return o.hexlify(e)},n.id=function(t){return s.keccak256(a.toUtf8Bytes(t))},n.hashMessage=function(t){return s.keccak256(o.concat([a.toUtf8Bytes("Ethereum Signed Message:\n"),a.toUtf8Bytes(String(t.length)),"string"==typeof t?a.toUtf8Bytes(t):t]))}},{"../errors":5,"./bytes":64,"./keccak256":71,"./utf8":85}],66:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors")),o=t("../wordlists/lang-en"),a=t("./basex"),s=t("./bytes"),u=t("./bignumber"),c=t("./utf8"),l=t("./pbkdf2"),h=t("./hmac"),f=t("./properties"),d=t("./secp256k1"),p=t("./sha2"),m=u.bigNumberify("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),g=c.toUtf8Bytes("Bitcoin seed"),v=2147483648;function y(t){return(1<<t)-1<<8-t}function b(t){return s.hexZeroPad(s.hexlify(t),32)}function w(t){var e=s.hexDataSlice(p.sha256(p.sha256(t)),0,4);return a.Base58.encode(s.concat([t,e]))}var _={};n.defaultPath="m/44'/60'/0'/0/0";var E=(Object.defineProperty(T.prototype,"extendedKey",{get:function(){if(256<=this.depth)throw new Error("Depth too large!");return w(s.concat([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",s.hexlify(this.depth),this.parentFingerprint,s.hexZeroPad(s.hexlify(this.index),4),this.chainCode,null!=this.privateKey?s.concat(["0x00",this.privateKey]):this.publicKey]))},enumerable:!0,configurable:!0}),T.prototype.neuter=function(){return new T(_,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,null,this.path)},T.prototype._derive=function(t){if(4294967295<t)throw new Error("invalid index - "+String(t));var e=this.path;e&&(e+="/"+(t&~v));var n=new Uint8Array(37);if(t&v){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(s.arrayify(this.privateKey),1),e&&(e+="'")}else n.set(s.arrayify(this.publicKey));for(var r=24;0<=r;r-=8)n[33+(r>>3)]=t>>24-r&255;var i=h.computeHmac(h.SupportedAlgorithms.sha512,this.chainCode,n),o=i.slice(0,32),a=i.slice(32),c=null,l=null;return this.privateKey?c=b(u.bigNumberify(o).add(this.privateKey).mod(m)):l=new d.KeyPair(s.hexlify(o))._addPoint(this.publicKey),new T(_,c,l,this.fingerprint,b(a),t,this.depth+1,this.mnemonic,e)},T.prototype.derivePath=function(t){var e=t.split("/");if(0===e.length||"m"===e[0]&&0!==this.depth)throw new Error("invalid path - "+t);"m"===e[0]&&e.shift();for(var n=this,r=0;r<e.length;r++){var i=e[r];if(i.match(/^[0-9]+'$/)){var o=parseInt(i.substring(0,i.length-1));if(v<=o)throw new Error("invalid path index - "+i);n=n._derive(v+o)}else{if(!i.match(/^[0-9]+$/))throw new Error("invalid path component - "+i);if(o=parseInt(i),v<=o)throw new Error("invalid path index - "+i);n=n._derive(o)}}return n},T.isHDNode=function(t){return f.isType(t,"HDNode")},T);function T(t,e,n,r,o,a,u,c,l){if(i.checkNew(this,T),t!==_)throw new Error("HDNode constructor cannot be called directly");if(e){var h=new d.KeyPair(e);f.defineReadOnly(this,"privateKey",h.privateKey),f.defineReadOnly(this,"publicKey",h.compressedPublicKey)}else f.defineReadOnly(this,"privateKey",null),f.defineReadOnly(this,"publicKey",s.hexlify(n));f.defineReadOnly(this,"parentFingerprint",r),f.defineReadOnly(this,"fingerprint",s.hexDataSlice(p.ripemd160(p.sha256(this.publicKey)),0,4)),f.defineReadOnly(this,"address",d.computeAddress(this.publicKey)),f.defineReadOnly(this,"chainCode",o),f.defineReadOnly(this,"index",a),f.defineReadOnly(this,"depth",u),f.defineReadOnly(this,"mnemonic",c),f.defineReadOnly(this,"path",l),f.setType(this,"HDNode")}function S(t,e){var n=s.arrayify(t);if(n.length<16||64<n.length)throw new Error("invalid seed");var r=s.arrayify(h.computeHmac(h.SupportedAlgorithms.sha512,g,n));return new E(_,b(r.slice(0,32)),null,"0x00000000",b(r.slice(32)),0,0,e,"m")}function x(t,e){e=e||"";var n=c.toUtf8Bytes("mnemonic"+e,c.UnicodeNormalizationForm.NFKD);return s.hexlify(l.pbkdf2(c.toUtf8Bytes(t,c.UnicodeNormalizationForm.NFKD),n,2048,64,"sha512"))}function I(t,e){e=e||o.langEn,i.checkNormalize();var n=e.split(t);if(n.length%3!=0)throw new Error("invalid mnemonic");for(var r=s.arrayify(new Uint8Array(Math.ceil(11*n.length/8))),a=0,u=0;u<n.length;u++){var c=e.getWordIndex(n[u].normalize("NFKD"));if(-1===c)throw new Error("invalid mnemonic");for(var l=0;l<11;l++)c&1<<10-l&&(r[a>>3]|=1<<7-a%8),a++}var h=32*n.length/3,f=y(n.length/3),d=s.arrayify(p.sha256(r.slice(0,h/8)))[0];if((d&=f)!=(r[r.length-1]&f))throw new Error("invalid checksum");return s.hexlify(r.slice(0,h/8))}function k(t,e){if((t=s.arrayify(t)).length%4!=0||t.length<16||32<t.length)throw new Error("invalid entropy");for(var n=[0],r=11,i=0;i<t.length;i++)8<r?(n[n.length-1]<<=8,n[n.length-1]|=t[i],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[i]>>8-r,n.push(t[i]&(1<<8-r)-1),r+=3);var a=s.arrayify(p.sha256(t))[0],u=t.length/4;return a&=y(u),n[n.length-1]<<=u,n[n.length-1]|=a>>8-u,(e=e||o.langEn).join(n.map((function(t){return e.getWord(t)})))}n.HDNode=E,n.fromExtendedKey=function(t){var e=a.Base58.decode(t);82===e.length&&w(e.slice(0,78))===t||i.throwError("invalid extended key",i.INVALID_ARGUMENT,{argument:"extendedKey",value:"[REDACTED]"});var n=e[4],r=s.hexlify(e.slice(5,9)),o=parseInt(s.hexlify(e.slice(9,13)).substring(2),16),u=s.hexlify(e.slice(13,45)),c=e.slice(45,78);switch(s.hexlify(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new E(_,null,s.hexlify(c),r,u,o,n,null,null);case"0x0488ade4":case"0x04358394":if(0!==c[0])break;return new E(_,s.hexlify(c.slice(1)),null,r,u,o,n,null,null)}return i.throwError("invalid extended key",i.INVALID_ARGUMENT,{argument:"extendedKey",value:"[REDACTED]"})},n.fromMnemonic=function(t,e,n){return S(x(t=k(I(t,e),e),n),t)},n.fromSeed=function(t){return S(t,null)},n.mnemonicToSeed=x,n.mnemonicToEntropy=I,n.entropyToMnemonic=k,n.isValidMnemonic=function(t,e){try{return I(t,e),!0}catch(t){}return!1}},{"../errors":5,"../wordlists/lang-en":90,"./basex":62,"./bignumber":63,"./bytes":64,"./hmac":67,"./pbkdf2":73,"./properties":74,"./secp256k1":77,"./sha2":79,"./utf8":85}],67:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i,o,a=r(t("hash.js")),s=t("../utils/bytes"),u=r(t("../errors"));(o=i=n.SupportedAlgorithms||(n.SupportedAlgorithms={})).sha256="sha256",o.sha512="sha512",n.computeHmac=function(t,e,n){return i[t]||u.throwError("unsupported algorithm "+t,u.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),s.arrayify(a.hmac(a[t],s.arrayify(e)).update(s.arrayify(n)).digest())}},{"../errors":5,"../utils/bytes":64,"hash.js":26}],68:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./abi-coder");n.AbiCoder=i.AbiCoder,n.defaultAbiCoder=i.defaultAbiCoder,n.formatSignature=i.formatSignature,n.formatParamType=i.formatParamType,n.parseSignature=i.parseSignature,n.parseParamType=i.parseParamType;var o=t("./address");n.getAddress=o.getAddress,n.getContractAddress=o.getContractAddress,n.getCreate2Address=o.getCreate2Address,n.getIcapAddress=o.getIcapAddress;var a=r(t("./base64"));n.base64=a;var s=t("./bignumber");n.BigNumber=s.BigNumber,n.bigNumberify=s.bigNumberify;var u=t("./bytes");n.arrayify=u.arrayify,n.concat=u.concat,n.hexDataSlice=u.hexDataSlice,n.hexDataLength=u.hexDataLength,n.hexlify=u.hexlify,n.hexStripZeros=u.hexStripZeros,n.hexZeroPad=u.hexZeroPad,n.isHexString=u.isHexString,n.joinSignature=u.joinSignature,n.padZeros=u.padZeros,n.splitSignature=u.splitSignature,n.stripZeros=u.stripZeros;var c=t("./hash");n.hashMessage=c.hashMessage,n.id=c.id,n.namehash=c.namehash;var l=r(t("./hdnode"));n.HDNode=l;var h=t("./interface");n.Interface=h.Interface;var f=t("./json-wallet");n.getJsonWalletAddress=f.getJsonWalletAddress;var d=t("./keccak256");n.keccak256=d.keccak256;var p=t("./sha2");n.sha256=p.sha256;var m=t("./solidity");n.solidityKeccak256=m.keccak256,n.solidityPack=m.pack,n.soliditySha256=m.sha256;var g=t("./random-bytes");n.randomBytes=g.randomBytes;var v=t("./networks");n.getNetwork=v.getNetwork;var y=t("./properties");n.checkProperties=y.checkProperties,n.deepCopy=y.deepCopy,n.defineReadOnly=y.defineReadOnly,n.resolveProperties=y.resolveProperties,n.shallowCopy=y.shallowCopy;var b=r(t("./rlp"));n.RLP=b;var w=t("./secp256k1");n.computeAddress=w.computeAddress,n.computePublicKey=w.computePublicKey,n.recoverAddress=w.recoverAddress,n.recoverPublicKey=w.recoverPublicKey,n.verifyMessage=w.verifyMessage;var _=t("./signing-key");n.SigningKey=_.SigningKey;var E=t("./transaction");n.populateTransaction=E.populateTransaction;var T=t("./transaction");n.parseTransaction=T.parse,n.serializeTransaction=T.serialize;var S=t("./utf8");n.formatBytes32String=S.formatBytes32String,n.parseBytes32String=S.parseBytes32String,n.toUtf8Bytes=S.toUtf8Bytes,n.toUtf8String=S.toUtf8String;var x=t("./units");n.commify=x.commify,n.formatEther=x.formatEther,n.parseEther=x.parseEther,n.formatUnits=x.formatUnits,n.parseUnits=x.parseUnits;var I=t("./web");n.fetchJson=I.fetchJson,n.poll=I.poll;var k=t("./hmac");n.SupportedAlgorithms=k.SupportedAlgorithms;var A=t("./utf8");n.UnicodeNormalizationForm=A.UnicodeNormalizationForm;var C=t("./wordlist");n.Wordlist=C.Wordlist},{"./abi-coder":59,"./address":60,"./base64":61,"./bignumber":63,"./bytes":64,"./hash":65,"./hdnode":66,"./hmac":67,"./interface":69,"./json-wallet":70,"./keccak256":71,"./networks":72,"./properties":74,"./random-bytes":75,"./rlp":76,"./secp256k1":77,"./sha2":79,"./signing-key":81,"./solidity":82,"./transaction":83,"./units":84,"./utf8":85,"./web":86,"./wordlist":87}],69:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};function a(t){for(var e in p.setType(this,"Description"),t)p.defineReadOnly(this,e,p.deepCopy(t[e],!0));Object.freeze(this)}Object.defineProperty(n,"__esModule",{value:!0});var s,u=t("./address"),c=t("./abi-coder"),l=t("./bignumber"),h=t("./bytes"),f=t("./hash"),d=t("./keccak256"),p=t("./properties"),m=o(t("../errors")),g=function(t){p.setType(this,"Indexed"),p.defineReadOnly(this,"hash",t)},v=(i(y,s=a),y.prototype.encode=function(t,e){h.isHexString(t)||m.throwError("invalid contract bytecode",m.INVALID_ARGUMENT,{arg:"bytecode",value:t}),m.checkArgumentCount(e.length,this.inputs.length," in Interface constructor");try{return t+c.defaultAbiCoder.encode(this.inputs,e).substring(2)}catch(t){m.throwError("invalid constructor argument",m.INVALID_ARGUMENT,{arg:t.arg,reason:t.reason,value:t.value})}return null},y);function y(){return null!==s&&s.apply(this,arguments)||this}var b,w=(i(_,b=a),_.prototype.encode=function(t){m.checkArgumentCount(t.length,this.inputs.length," in interface function "+this.name);try{return this.sighash+c.defaultAbiCoder.encode(this.inputs,t).substring(2)}catch(t){m.throwError("invalid input argument",m.INVALID_ARGUMENT,{arg:t.arg,reason:t.reason,value:t.value})}return null},_.prototype.decode=function(t){try{return c.defaultAbiCoder.decode(this.outputs,h.arrayify(t))}catch(e){m.throwError("invalid data for function output",m.INVALID_ARGUMENT,{arg:"data",errorArg:e.arg,errorValue:e.value,value:t,reason:e.reason})}},_);function _(){return null!==b&&b.apply(this,arguments)||this}var E,T=(i(S,E=a),S);function S(){return null!==E&&E.apply(this,arguments)||this}var x,I=(i(k,x=a),k.prototype.encodeTopics=function(t){var e=this;t.length>this.inputs.length&&m.throwError("too many arguments for "+this.name,m.UNEXPECTED_ARGUMENT,{maxCount:t.length,expectedCount:this.inputs.length});var n=[];for(this.anonymous||n.push(this.topic),t.forEach((function(t,r){var i=e.inputs[r];i.indexed?null==t?n.push(null):"string"===i.type?n.push(f.id(t)):"bytes"===i.type?n.push(d.keccak256(t)):-1!==i.type.indexOf("[")||"tuple"===i.type.substring(0,5)?m.throwError("filtering with tuples or arrays not implemented yet; bug us on GitHub",m.NOT_IMPLEMENTED,{operation:"filter(array|tuple)"}):("address"===i.type&&u.getAddress(t),n.push(h.hexZeroPad(h.hexlify(t),32).toLowerCase())):null!=t&&m.throwError("cannot filter non-indexed parameters; must be null",m.INVALID_ARGUMENT,{argument:i.name||r,value:t})}));n.length&&null===n[n.length-1];)n.pop();return n},k.prototype.decode=function(t,e){null==e||this.anonymous||(e=e.slice(1));var n=[],r=[],i=[];if(this.inputs.forEach((function(t,e){t.indexed?"string"===t.type||"bytes"===t.type||0<=t.type.indexOf("[")||"tuple"===t.type.substring(0,5)?(n.push({type:"bytes32",name:t.name||""}),i.push(!0)):(n.push(t),i.push(!1)):(r.push(t),i.push(!1))})),null!=e)var o=c.defaultAbiCoder.decode(n,h.concat(e));var a=c.defaultAbiCoder.decode(r,h.arrayify(t)),s={},u=0,l=0;return this.inputs.forEach((function(t,n){t.indexed?null==e?s[n]=new g(null):i[n]?s[n]=new g(o[l++]):s[n]=o[l++]:s[n]=a[u++],t.name&&(s[t.name]=s[n])})),s.length=this.inputs.length,new T(s)},k);function k(){return null!==x&&x.apply(this,arguments)||this}var A,C=(i(N,A=a),N);function N(){return null!==A&&A.apply(this,arguments)||this}var M,P=(i(L,M=a),L);function L(){return null!==M&&M.apply(this,arguments)||this}function D(t){switch(t.type){case"constructor":var e=new v({inputs:t.inputs,payable:null==t.payable||!!t.payable});this.deployFunction||(this.deployFunction=e);break;case"function":var n=c.formatSignature(t).replace(/tuple/g,""),r=f.id(n).substring(0,10),i=!1;null!=t.constant?i=t.constant:null!=t.stateMutability&&(i="view"==t.stateMutability||"pure"==t.stateMutability),e=new w({inputs:t.inputs,outputs:t.outputs,gas:t.gas,payable:null==t.payable||!!t.payable,type:i?"call":"transaction",name:t.name,signature:n,sighash:r}),t.name&&(null==this.functions[t.name]?p.defineReadOnly(this.functions,t.name,e):m.warn("WARNING: Multiple definitions for "+t.name)),null==this.functions[e.signature]&&p.defineReadOnly(this.functions,e.signature,e);break;case"event":n=c.formatSignature(t).replace(/tuple/g,""),e=new I({name:t.name,signature:n,inputs:t.inputs,topic:f.id(n),anonymous:!!t.anonymous}),t.name&&null==this.events[t.name]&&p.defineReadOnly(this.events,t.name,e),null==this.events[e.signature]&&p.defineReadOnly(this.events,e.signature,e);break;case"fallback":break;default:m.warn("WARNING: unsupported ABI type - "+t.type)}}var R=(O.prototype.parseTransaction=function(t){var e=t.data.substring(0,10).toLowerCase();for(var n in this.functions)if(-1!==n.indexOf("(")){var r=this.functions[n];if(r.sighash===e){var i=c.defaultAbiCoder.decode(r.inputs,"0x"+t.data.substring(10));return new C({args:i,decode:r.decode,name:r.name,signature:r.signature,sighash:r.sighash,value:l.bigNumberify(t.value||"0")})}}return null},O.prototype.parseLog=function(t){for(var e in this.events)if(-1!==e.indexOf("(")){var n=this.events[e];if(!n.anonymous&&n.topic===t.topics[0])return new P({decode:n.decode,name:n.name,signature:n.signature,topic:n.topic,values:n.decode(t.data,t.topics)})}return null},O.isInterface=function(t){return p.isType(t,"Interface")},O.isIndexed=function(t){return p.isType(t,"Indexed")},O);function O(t){if(m.checkNew(this,O),"string"==typeof t){try{t=JSON.parse(t)}catch(e){m.throwError("could not parse ABI JSON",m.INVALID_ARGUMENT,{arg:"abi",errorMessage:e.message,value:t})}if(!Array.isArray(t))return m.throwError("invalid abi",m.INVALID_ARGUMENT,{arg:"abi",value:t}),null}p.defineReadOnly(this,"functions",{}),p.defineReadOnly(this,"events",{});var e=[];t.forEach((function(t){"string"==typeof t&&(t=c.parseSignature(t)),e.push(t)})),p.defineReadOnly(this,"abi",p.deepCopy(e,!0)),e.forEach(D,this),this.deployFunction||D.call(this,{type:"constructor",inputs:[]}),p.setType(this,"Interface")}n.Interface=R},{"../errors":5,"./abi-coder":59,"./address":60,"./bignumber":63,"./bytes":64,"./hash":65,"./keccak256":71,"./properties":74}],70:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./address");function i(t){try{var e=JSON.parse(t)}catch(t){return!1}return e.encseed&&e.ethaddr}function o(t){try{var e=JSON.parse(t)}catch(t){return!1}return!(!e.version||parseInt(e.version)!==e.version||3!==parseInt(e.version))}n.isCrowdsaleWallet=i,n.isSecretStorageWallet=o,n.getJsonWalletAddress=function(t){if(i(t))try{return r.getAddress(JSON.parse(t).ethaddr)}catch(t){return null}if(o(t))try{return r.getAddress(JSON.parse(t).address)}catch(t){return null}return null}},{"./address":60}],71:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("js-sha3"),i=t("./bytes");n.keccak256=function(t){return"0x"+r.keccak_256(i.arrayify(t))}},{"./bytes":64,"js-sha3":40}],72:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors"));function o(t){return function(e){var n=[];return e.InfuraProvider&&n.push(new e.InfuraProvider(t)),e.EtherscanProvider&&n.push(new e.EtherscanProvider(t)),0===n.length?null:e.FallbackProvider?new e.FallbackProvider(n):n[0]}}function a(t,e){return function(n){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null}}var s={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:o("homestead")},u={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:o("ropsten")},c={unspecified:{chainId:0,name:"unspecified"},homestead:s,mainnet:s,morden:{chainId:2,name:"morden"},ropsten:u,testnet:u,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:o("rinkeby")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:o("goerli")},kovan:{chainId:42,name:"kovan",_defaultProvider:o("kovan")},classic:{chainId:61,name:"classic",_defaultProvider:a("https://web3.gastracker.io","classic")},classicTestnet:{chainId:62,name:"classicTestnet",_defaultProvider:a("https://web3.gastracker.io/morden","classicTestnet")}};n.getNetwork=function(t){if(null==t)return null;if("number"==typeof t){for(var e in c){var n=c[e];if(n.chainId===t)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"==typeof t){var r=c[t];return null==r?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}var o=c[t.name];return o?(0!==t.chainId&&t.chainId!==o.chainId&&i.throwError("network chainId mismatch",i.INVALID_ARGUMENT,{arg:"network",value:t}),{name:t.name,chainId:o.chainId,ensAddress:t.ensAddress||o.ensAddress||null,_defaultProvider:t._defaultProvider||o._defaultProvider||null}):("number"!=typeof t.chainId&&i.throwError("invalid network chainId",i.INVALID_ARGUMENT,{arg:"network",value:t}),t)}},{"../errors":5}],73:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/bytes"),i=t("./hmac");n.pbkdf2=function(t,e,n,o,a){var s;t=r.arrayify(t),e=r.arrayify(e);var u,c,l=1,h=new Uint8Array(o),f=new Uint8Array(e.length+4);f.set(e);for(var d=1;d<=l;d++){f[e.length]=d>>24&255,f[e.length+1]=d>>16&255,f[e.length+2]=d>>8&255,f[e.length+3]=255&d;var p=i.computeHmac(a,t,f);s||(s=p.length,c=new Uint8Array(s),u=o-((l=Math.ceil(o/s))-1)*s),c.set(p);for(var m=1;m<n;m++){p=i.computeHmac(a,t,p);for(var g=0;g<s;g++)c[g]^=p[g]}var v=(d-1)*s,y=d===l?u:s;h.set(r.arrayify(c).slice(0,y),v)}return r.arrayify(h)}},{"../utils/bytes":64,"./hmac":67}],74:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors"));function o(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}function a(t,e){return t&&t._ethersType===e}n.defineReadOnly=o,n.setType=function(t,e){Object.defineProperty(t,"_ethersType",{configurable:!1,value:e,writable:!1})},n.isType=a,n.resolveProperties=function(t){var e={},n=[];return Object.keys(t).forEach((function(r){var i=t[r];i instanceof Promise?n.push(i.then((function(t){return e[r]=t,null}))):e[r]=i})),Promise.all(n).then((function(){return e}))},n.checkProperties=function(t,e){t&&"object"==typeof t||i.throwError("invalid object",i.INVALID_ARGUMENT,{argument:"object",value:t}),Object.keys(t).forEach((function(n){e[n]||i.throwError("invalid object key - "+n,i.INVALID_ARGUMENT,{argument:"transaction",value:t,key:n})}))},n.shallowCopy=function(t){var e={};for(var n in t)e[n]=t[n];return e};var s={boolean:!0,number:!0,string:!0};n.deepCopy=function t(e,n){if(null==e||s[typeof e])return e;if(Array.isArray(e)){var r=e.map((function(e){return t(e,n)}));return n&&Object.freeze(r),r}if("object"==typeof e){if(a(e,"BigNumber"))return e;if(a(e,"Description"))return e;if(a(e,"Indexed"))return e;for(var i in r={},e){var u=e[i];void 0!==u&&o(r,i,t(u,n))}return n&&Object.freeze(r),r}if("function"==typeof e)return e;throw new Error("Cannot deepCopy "+typeof e)},n.inheritable=function t(e){return function(n){!function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}(n,e),o(n,"inherits",t(n))}}},{"../errors":5}],75:[function(t,e,n){(function(e){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/bytes"),i=t("../utils/properties"),o=e.crypto||e.msCrypto;function a(t){if(t<=0||1024<t||parseInt(String(t))!=t)throw new Error("invalid length");var e=new Uint8Array(t);return o.getRandomValues(e),r.arrayify(e)}o&&o.getRandomValues||(console.log("WARNING: Missing strong random number source; using weak randomBytes"),o={getRandomValues:function(t){for(var e=0;e<20;e++)for(var n=0;n<t.length;n++)e?t[n]^=Math.trunc(256*Math.random()):t[n]=Math.trunc(256*Math.random());return t},_weakCrypto:!0}),n.randomBytes=a,!0===o._weakCrypto&&i.defineReadOnly(a,"_weakCrypto",!0)}).call(this,void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/bytes":64,"../utils/properties":74}],76:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./bytes");function i(t){for(var e=[];t;)e.unshift(255&t),t>>=8;return e}function o(t,e,n){for(var r=0,i=0;i<n;i++)r=256*r+t[e+i];return r}function a(t,e,n,r){for(var i=[];n<e+1+r;){var o=s(t,n);if(i.push(o.result),e+1+r<(n+=o.consumed))throw new Error("invalid rlp")}return{consumed:1+r,result:i}}function s(t,e){if(0===t.length)throw new Error("invalid rlp data");if(248<=t[e]){if(e+1+(n=t[e]-247)>t.length)throw new Error("too short");if(e+1+n+(i=o(t,e+1,n))>t.length)throw new Error("to short");return a(t,e,e+1+n,n+i)}if(192<=t[e]){if(e+1+(i=t[e]-192)>t.length)throw new Error("invalid rlp data");return a(t,e,e+1,i)}if(184<=t[e]){var n;if(e+1+(n=t[e]-183)>t.length)throw new Error("invalid rlp data");if(e+1+n+(i=o(t,e+1,n))>t.length)throw new Error("invalid rlp data");return{consumed:1+n+i,result:r.hexlify(t.slice(e+1+n,e+1+n+i))}}if(128<=t[e]){var i;if(e+1+(i=t[e]-128)>t.length)throw new Error("invalid rlp data");return{consumed:1+i,result:r.hexlify(t.slice(e+1,e+1+i))}}return{consumed:1,result:r.hexlify(t[e])}}n.encode=function(t){return r.hexlify(function t(e){if(Array.isArray(e)){var n=[];return e.forEach((function(e){n=n.concat(t(e))})),n.length<=55?(n.unshift(192+n.length),n):((o=i(n.length)).unshift(247+o.length),o.concat(n))}var o,a=Array.prototype.slice.call(r.arrayify(e));return 1===a.length&&a[0]<=127?a:a.length<=55?(a.unshift(128+a.length),a):((o=i(a.length)).unshift(183+o.length),o.concat(a))}(t))},n.decode=function(t){var e=r.arrayify(t),n=s(e,0);if(n.consumed!==e.length)throw new Error("invalid rlp data");return n.result}},{"./bytes":64}],77:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("elliptic"),o=t("./address"),a=t("./bytes"),s=t("./hash"),u=t("./keccak256"),c=t("./properties"),l=r(t("../errors")),h=null;function f(){return h=h||new i.ec("secp256k1")}var d=(p.prototype.sign=function(t){var e=f().keyFromPrivate(a.arrayify(this.privateKey)).sign(a.arrayify(t),{canonical:!0});return{recoveryParam:e.recoveryParam,r:a.hexZeroPad("0x"+e.r.toString(16),32),s:a.hexZeroPad("0x"+e.s.toString(16),32),v:27+e.recoveryParam}},p.prototype.computeSharedSecret=function(t){var e=f().keyFromPrivate(a.arrayify(this.privateKey)),n=f().keyFromPublic(a.arrayify(m(t)));return a.hexZeroPad("0x"+e.derive(n.getPublic()).toString(16),32)},p.prototype._addPoint=function(t){var e=f().keyFromPublic(a.arrayify(this.publicKey)),n=f().keyFromPublic(a.arrayify(t));return"0x"+e.pub.add(n.pub).encodeCompressed("hex")},p);function p(t){var e=f().keyFromPrivate(a.arrayify(t));c.defineReadOnly(this,"privateKey",a.hexlify(e.priv.toArray("be",32))),c.defineReadOnly(this,"publicKey","0x"+e.getPublic(!1,"hex")),c.defineReadOnly(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),c.defineReadOnly(this,"publicKeyBytes",e.getPublic().encode(null,!0))}function m(t,e){var n=a.arrayify(t);if(32!==n.length)return 33===n.length?e?a.hexlify(n):"0x"+f().keyFromPublic(n).getPublic(!1,"hex"):65===n.length?e?"0x"+f().keyFromPublic(n).getPublic(!0,"hex"):a.hexlify(n):(l.throwError("invalid public or private key",l.INVALID_ARGUMENT,{arg:"key",value:"[REDACTED]"}),null);var r=new d(n);return e?r.compressedPublicKey:r.publicKey}function g(t){var e="0x"+m(t).slice(4);return o.getAddress("0x"+u.keccak256(e).substring(26))}function v(t,e){var n=a.splitSignature(e),r={r:a.arrayify(n.r),s:a.arrayify(n.s)};return"0x"+f().recoverPubKey(a.arrayify(t),r,n.recoveryParam).encode("hex",!1)}function y(t,e){return g(v(a.arrayify(t),e))}n.KeyPair=d,n.computePublicKey=m,n.computeAddress=g,n.recoverPublicKey=v,n.recoverAddress=y,n.verifyMessage=function(t,e){return y(s.hashMessage(t),e)}},{"../errors":5,"./address":60,"./bytes":64,"./hash":65,"./keccak256":71,"./properties":74,elliptic:12}],78:[function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t("aes-js")),a=r(t("scrypt-js")),s=r(t("uuid")),u=t("./signing-key"),c=i(t("./hdnode")),l=t("./address"),h=t("./bytes"),f=t("./pbkdf2"),d=t("./keccak256"),p=t("./utf8"),m=t("./random-bytes");function g(t){return"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),h.arrayify(t)}function v(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function y(t){return"string"==typeof t?p.toUtf8Bytes(t,p.UnicodeNormalizationForm.NFKC):h.arrayify(t)}function b(t,e){for(var n=t,r=e.toLowerCase().split("/"),i=0;i<r.length;i++){var o=null;for(var a in n)if(a.toLowerCase()===r[i]){o=n[a];break}if(null===o)return null;n=o}return n}n.decryptCrowdsale=function(t,e){var n=JSON.parse(t);e=y(e);var r=l.getAddress(b(n,"ethaddr")),i=g(b(n,"encseed"));if(!i||i.length%16!=0)throw new Error("invalid encseed");var a=f.pbkdf2(e,e,2e3,32,"sha256").slice(0,16),s=i.slice(0,16),c=i.slice(16),m=new o.default.ModeOfOperation.cbc(a,s),v=h.arrayify(m.decrypt(c));v=o.default.padding.pkcs7.strip(v);for(var w="",_=0;_<v.length;_++)w+=String.fromCharCode(v[_]);var E=p.toUtf8Bytes(w),T=new u.SigningKey(d.keccak256(E));if(T.address!==r)throw new Error("corrupt crowdsale wallet");return T},n.decrypt=function(t,e,n){function r(t,e){var n=g(b(i,"crypto/ciphertext"));if(h.hexlify(function(t,e){return d.keccak256(h.concat([t,e]))}(t.slice(16,32),n)).substring(2)!==b(i,"crypto/mac").toLowerCase())return e(new Error("invalid password")),null;var r=function(t,e){if("aes-128-ctr"!==b(i,"crypto/cipher"))return null;var n=g(b(i,"crypto/cipherparams/iv")),r=new o.default.Counter(n),a=new o.default.ModeOfOperation.ctr(t,r);return h.arrayify(a.decrypt(e))}(t.slice(0,16),n),a=t.slice(32,64);if(!r)return e(new Error("unsupported cipher")),null;var s=new u.SigningKey(r);if(i.address&&s.address!==l.getAddress(i.address))return e(new Error("address mismatch")),null;var f=b(i,"x-ethers/locale");if("0.1"===b(i,"x-ethers/version")&&(null==f||"en"===f)){var p=g(b(i,"x-ethers/mnemonicCiphertext")),m=g(b(i,"x-ethers/mnemonicCounter")),v=new o.default.Counter(m),y=new o.default.ModeOfOperation.ctr(a,v),w=b(i,"x-ethers/path")||c.defaultPath,_=h.arrayify(y.decrypt(p)),E=c.entropyToMnemonic(_),T=c.fromMnemonic(E).derivePath(w);if(T.privateKey!=h.hexlify(r))return e(new Error("mnemonic mismatch")),null;s=new u.SigningKey(T)}return s}var i=JSON.parse(t),s=y(e);return new Promise((function(t,e){var o=b(i,"crypto/kdf");if(o&&"string"==typeof o)if("scrypt"===o.toLowerCase()){var u=g(b(i,"crypto/kdfparams/salt")),c=parseInt(b(i,"crypto/kdfparams/n")),l=parseInt(b(i,"crypto/kdfparams/r")),d=parseInt(b(i,"crypto/kdfparams/p"));if(!c||!l||!d)return void e(new Error("unsupported key-derivation function parameters"));if(0!=(c&c-1))return void e(new Error("unsupported key-derivation function parameter value for N"));if(32!==(v=parseInt(b(i,"crypto/kdfparams/dklen"))))return void e(new Error("unsupported key-derivation derived-key length"));n&&n(0),a.default(s,u,c,l,d,64,(function(i,o,a){if(i)i.progress=o,e(i);else if(a){var s=r(a=h.arrayify(a),e);if(!s)return;n&&n(1),t(s)}else if(n)return n(o)}))}else if("pbkdf2"===o.toLowerCase()){u=g(b(i,"crypto/kdfparams/salt"));var p=null,m=b(i,"crypto/kdfparams/prf");if("hmac-sha256"===m)p="sha256";else{if("hmac-sha512"!==m)return void e(new Error("unsupported prf"));p="sha512"}var v,y=parseInt(b(i,"crypto/kdfparams/c"));if(32!==(v=parseInt(b(i,"crypto/kdfparams/dklen"))))return void e(new Error("unsupported key-derivation derived-key length"));var w=r(f.pbkdf2(s,u,y,v,p),e);if(!w)return;t(w)}else e(new Error("unsupported key-derivation function"));else e(new Error("unsupported key-derivation function"))}))},n.encrypt=function(t,e,n,r){var i;if("function"!=typeof n||r||(r=n,n={}),n=n||{},32!==(i=u.SigningKey.isSigningKey(t)?h.arrayify(t.privateKey):h.arrayify(t)).length)throw new Error("invalid private key");var l=y(e),f=null;if(n.entropy&&(f=h.arrayify(n.entropy)),n.mnemonic)if(f){if(c.entropyToMnemonic(f)!==n.mnemonic)throw new Error("entropy and mnemonic mismatch")}else f=h.arrayify(c.mnemonicToEntropy(n.mnemonic,n.wordlist));var p=n.path;f&&!p&&(p=c.defaultPath);var g,b=n.client;b=b||"ethers.js",g=n.salt?h.arrayify(n.salt):m.randomBytes(32);var w=null;if(n.iv){if(16!==(w=h.arrayify(n.iv)).length)throw new Error("invalid iv")}else w=m.randomBytes(16);var _=null;if(n.uuid){if(16!==(_=h.arrayify(n.uuid)).length)throw new Error("invalid uuid")}else _=m.randomBytes(16);var E=1<<17,T=8,S=1;return n.scrypt&&(n.scrypt.N&&(E=n.scrypt.N),n.scrypt.r&&(T=n.scrypt.r),n.scrypt.p&&(S=n.scrypt.p)),new Promise((function(t,e){r&&r(0),a.default(l,g,E,T,S,64,(function(a,c,l){if(a)a.progress=c,e(a);else if(l){var y=(l=h.arrayify(l)).slice(0,16),x=l.slice(16,32),I=l.slice(32,64),k=new u.SigningKey(i).address,A=new o.default.Counter(w),C=new o.default.ModeOfOperation.ctr(y,A),N=h.arrayify(C.encrypt(i)),M=d.keccak256(h.concat([x,N])),P={address:k.substring(2).toLowerCase(),id:s.default.v4({random:_}),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:h.hexlify(w).substring(2)},ciphertext:h.hexlify(N).substring(2),kdf:"scrypt",kdfparams:{salt:h.hexlify(g).substring(2),n:E,dklen:32,p:S,r:T},mac:M.substring(2)}};if(f){var L=m.randomBytes(16),D=new o.default.Counter(L),R=new o.default.ModeOfOperation.ctr(I,D),O=h.arrayify(R.encrypt(f)),B=new Date,U=B.getUTCFullYear()+"-"+v(B.getUTCMonth()+1,2)+"-"+v(B.getUTCDate(),2)+"T"+v(B.getUTCHours(),2)+"-"+v(B.getUTCMinutes(),2)+"-"+v(B.getUTCSeconds(),2)+".0Z";P["x-ethers"]={client:b,gethFilename:"UTC--"+U+"--"+P.address,mnemonicCounter:h.hexlify(L).substring(2),mnemonicCiphertext:h.hexlify(O).substring(2),path:p,version:"0.1"},n.wordlist&&"string"==typeof n.wordlist.locale&&(P["x-ethers"].locale=n.wordlist.locale)}r&&r(1),t(JSON.stringify(P))}else if(r)return r(c)}))}))}},{"./address":60,"./bytes":64,"./hdnode":66,"./keccak256":71,"./pbkdf2":73,"./random-bytes":75,"./signing-key":81,"./utf8":85,"aes-js":8,"scrypt-js":44,uuid:48}],79:[function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("hash.js")),o=t("./bytes");n.ripemd160=function(t){return"0x"+i.default.ripemd160().update(o.arrayify(t)).digest("hex")},n.sha256=function(t){return"0x"+i.default.sha256().update(o.arrayify(t)).digest("hex")},n.sha512=function(t){return"0x"+i.default.sha512().update(o.arrayify(t)).digest("hex")}},{"./bytes":64,"hash.js":26}],80:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),t("setimmediate"),n.platform="browser"},{setimmediate:45}],81:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./hdnode"),o=t("./bytes"),a=t("./properties"),s=t("./secp256k1"),u=r(t("../errors")),c=(l.prototype.signDigest=function(t){return this.keyPair.sign(t)},l.prototype.computeSharedSecret=function(t){return this.keyPair.computeSharedSecret(o.arrayify(t))},l.isSigningKey=function(t){return a.isType(t,"SigningKey")},l);function l(t){var e;u.checkNew(this,l),e=i.HDNode.isHDNode(t)?(a.defineReadOnly(this,"mnemonic",t.mnemonic),a.defineReadOnly(this,"path",t.path),o.arrayify(t.privateKey)):("string"==typeof t&&t.match(/^[0-9a-f]*$/i)&&64===t.length&&(t="0x"+t),o.arrayify(t));try{32!==e.length&&u.throwError("exactly 32 bytes required",u.INVALID_ARGUMENT,{arg:"privateKey",value:"[REDACTED]"})}catch(t){var n={arg:"privateKey",reason:t.reason,value:"[REDACTED]"};t.value&&("number"==typeof t.value.length&&(n.length=t.value.length),n.type=typeof t.value),u.throwError("invalid private key",t.code,n)}a.defineReadOnly(this,"privateKey",o.hexlify(e)),a.defineReadOnly(this,"keyPair",new s.KeyPair(e)),a.defineReadOnly(this,"publicKey",this.keyPair.publicKey),a.defineReadOnly(this,"address",s.computeAddress(this.keyPair.publicKey)),a.setType(this,"SigningKey")}n.SigningKey=c},{"../errors":5,"./bytes":64,"./hdnode":66,"./properties":74,"./secp256k1":77}],82:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./bignumber"),i=t("./bytes"),o=t("./utf8"),a=t("./keccak256"),s=t("./sha2"),u=new RegExp("^bytes([0-9]+)$"),c=new RegExp("^(u?int)([0-9]*)$"),l=new RegExp("^(.*)\\[([0-9]*)\\]$");function h(t,e){if(t.length!=e.length)throw new Error("type/value count mismatch");var n=[];return t.forEach((function(t,a){n.push(function t(e,n,a){switch(e){case"address":return a?i.padZeros(n,32):i.arrayify(n);case"string":return o.toUtf8Bytes(n);case"bytes":return i.arrayify(n);case"bool":return n=n?"0x01":"0x00",a?i.padZeros(n,32):i.arrayify(n)}var s=e.match(c);if(s){if((h=parseInt(s[2]||"256"))%8!=0||0===h||256<h)throw new Error("invalid number type - "+e);return a&&(h=256),n=r.bigNumberify(n).toTwos(h),i.padZeros(n,h/8)}if(s=e.match(u)){var h=parseInt(s[1]);if(String(h)!=s[1]||0===h||32<h)throw new Error("invalid number type - "+e);if(i.arrayify(n).byteLength!==h)throw new Error("invalid value for "+e);return a?i.arrayify((n+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):n}if((s=e.match(l))&&Array.isArray(n)){var f=s[1];if(parseInt(s[2]||String(n.length))!=n.length)throw new Error("invalid value for "+e);var d=[];return n.forEach((function(e){d.push(t(f,e,!0))})),i.concat(d)}throw new Error("unknown type - "+e)}(t,e[a]))})),i.hexlify(i.concat(n))}n.pack=h,n.keccak256=function(t,e){return a.keccak256(h(t,e))},n.sha256=function(t,e){return s.sha256(h(t,e))}},{"./bignumber":63,"./bytes":64,"./keccak256":71,"./sha2":79,"./utf8":85}],83:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../constants"),o=r(t("../errors")),a=t("./secp256k1"),s=t("./address"),u=t("./bignumber"),c=t("./bytes"),l=t("./keccak256"),h=t("./properties"),f=r(t("./rlp")),d=t("../providers/abstract-provider");function p(t){return"0x"===t?i.Zero:u.bigNumberify(t)}var m=[{name:"nonce",maxLength:32},{name:"gasPrice",maxLength:32},{name:"gasLimit",maxLength:32},{name:"to",length:20},{name:"value",maxLength:32},{name:"data"}],g={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};n.serialize=function(t,e){h.checkProperties(t,g);var n=[];m.forEach((function(e){var r=t[e.name]||[];r=c.arrayify(c.hexlify(r)),e.length&&r.length!==e.length&&0<r.length&&o.throwError("invalid length for "+e.name,o.INVALID_ARGUMENT,{arg:"transaction"+e.name,value:r}),e.maxLength&&(r=c.stripZeros(r)).length>e.maxLength&&o.throwError("invalid length for "+e.name,o.INVALID_ARGUMENT,{arg:"transaction"+e.name,value:r}),n.push(c.hexlify(r))})),null!=t.chainId&&0!==t.chainId&&(n.push(c.hexlify(t.chainId)),n.push("0x"),n.push("0x"));var r=f.encode(n);if(!e)return r;var i=c.splitSignature(e),a=27+i.recoveryParam;return 9===n.length&&(n.pop(),n.pop(),n.pop(),a+=2*t.chainId+8),n.push(c.hexlify(a)),n.push(c.stripZeros(c.arrayify(i.r))),n.push(c.stripZeros(c.arrayify(i.s))),f.encode(n)},n.parse=function(t){var e=f.decode(t);9!==e.length&&6!==e.length&&o.throwError("invalid raw transaction",o.INVALID_ARGUMENT,{arg:"rawTransactin",value:t});var n={nonce:p(e[0]).toNumber(),gasPrice:p(e[1]),gasLimit:p(e[2]),to:function(t){return"0x"===t?null:s.getAddress(t)}(e[3]),value:p(e[4]),data:e[5],chainId:0};if(6===e.length)return n;try{n.v=u.bigNumberify(e[6]).toNumber()}catch(t){return o.info(t),n}if(n.r=c.hexZeroPad(e[7],32),n.s=c.hexZeroPad(e[8],32),u.bigNumberify(n.r).isZero()&&u.bigNumberify(n.s).isZero())n.chainId=n.v,n.v=0;else{n.chainId=Math.floor((n.v-35)/2),n.chainId<0&&(n.chainId=0);var r=n.v-27,i=e.slice(0,6);0!==n.chainId&&(i.push(c.hexlify(n.chainId)),i.push("0x"),i.push("0x"),r-=2*n.chainId+8);var h=l.keccak256(f.encode(i));try{n.from=a.recoverAddress(h,{r:c.hexlify(n.r),s:c.hexlify(n.s),recoveryParam:r})}catch(t){o.info(t)}n.hash=l.keccak256(t)}return n},n.populateTransaction=function(t,e,n){d.Provider.isProvider(e)||o.throwError("missing provider",o.INVALID_ARGUMENT,{argument:"provider",value:e}),h.checkProperties(t,g);var r=h.shallowCopy(t);if(null!=r.to&&(r.to=e.resolveName(r.to)),null==r.gasPrice&&(r.gasPrice=e.getGasPrice()),null==r.nonce&&(r.nonce=e.getTransactionCount(n)),null==r.gasLimit){var i=h.shallowCopy(r);i.from=n,r.gasLimit=e.estimateGas(i)}return null==r.chainId&&(r.chainId=e.getNetwork().then((function(t){return t.chainId}))),h.resolveProperties(r)}},{"../constants":3,"../errors":5,"../providers/abstract-provider":50,"./address":60,"./bignumber":63,"./bytes":64,"./keccak256":71,"./properties":74,"./rlp":76,"./secp256k1":77}],84:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=t("../constants"),a=r(t("../errors")),s=t("./bignumber"),u={};function c(t){return{decimals:t.length-1,tenPower:s.bigNumberify(t)}}function l(t){var e=u[String(t).toLowerCase()];if(!e&&"number"==typeof t&&parseInt(String(t))==t&&0<=t&&t<=256){for(var n="1",r=0;r<t;r++)n+="0";e=c(n)}return e||a.throwError("invalid unitType",a.INVALID_ARGUMENT,{argument:"name",value:t}),e}function h(t,e){var n=l(e),r=(t=s.bigNumberify(t)).lt(o.Zero);r&&(t=t.mul(o.NegativeOne));for(var i=t.mod(n.tenPower).toString();i.length<n.decimals;)i="0"+i;return i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1],t=t.div(n.tenPower).toString()+"."+i,r&&(t="-"+t),t}function f(t,e){null==e&&(e=18);var n=l(e);if("string"==typeof t&&t.match(/^-?[0-9.,]+$/)||a.throwError("invalid decimal value",a.INVALID_ARGUMENT,{arg:"value",value:t}),0===n.decimals)return s.bigNumberify(t);var r="-"===t.substring(0,1);r&&(t=t.substring(1)),"."===t&&a.throwError("missing value",a.INVALID_ARGUMENT,{arg:"value",value:t});var i=t.split(".");2<i.length&&a.throwError("too many decimal points",a.INVALID_ARGUMENT,{arg:"value",value:t});var u=i[0],c=i[1];for(u=u||"0",(c=c||"0").length>n.decimals&&a.throwError("underflow occurred",a.NUMERIC_FAULT,{operation:"division",fault:"underflow"});c.length<n.decimals;)c+="0";var h=s.bigNumberify(u),f=s.bigNumberify(c),d=h.mul(n.tenPower).add(f);return r&&(d=d.mul(o.NegativeOne)),d}i="1",["wei","kwei","Mwei","Gwei","szabo","finney","ether"].forEach((function(t){var e=c(i);u[t.toLowerCase()]=e,u[String(e.decimals)]=e,i+="000"})),n.commify=function(t){var e=String(t).split(".");(2<e.length||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||"."===t||"-."===t)&&a.throwError("invalid value",a.INVALID_ARGUMENT,{argument:"value",value:t});var n=e[0],r="";for("-"===n.substring(0,1)&&(r="-",n=n.substring(1));"0"===n.substring(0,1);)n=n.substring(1);""===n&&(n="0");var i="";2===e.length&&(i="."+(e[1]||"0"));for(var o=[];n.length;){if(n.length<=3){o.unshift(n);break}var s=n.length-3;o.unshift(n.substring(s)),n=n.substring(0,s)}return r+o.join(",")+i},n.formatUnits=h,n.parseUnits=f,n.formatEther=function(t){return h(t,18)},n.parseEther=function(t){return f(t,18)}},{"../constants":3,"../errors":5,"./bignumber":63}],85:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i,o=t("../constants"),a=t("../errors"),s=t("./bytes");function u(t,e){void 0===e&&(e=r.current),e!=r.current&&(a.checkNormalize(),t=t.normalize(e));for(var n=[],i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o<128)n.push(o);else if(o<2048)n.push(o>>6|192),n.push(63&o|128);else if(55296==(64512&o)){i++;var u=t.charCodeAt(i);if(i>=t.length||56320!=(64512&u))throw new Error("invalid utf-8 string");o=65536+((1023&o)<<10)+(1023&u),n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(63&o|128)}else n.push(o>>12|224),n.push(o>>6&63|128),n.push(63&o|128)}return s.arrayify(n)}function c(t,e){t=s.arrayify(t);for(var n="",r=0;r<t.length;){var i=t[r++];if(i>>7!=0){var o=null,a=null;if(192==(224&i))o=1,a=127;else if(224==(240&i))o=2,a=2047;else{if(240!=(248&i)){if(e)continue;if(128==(192&i))throw new Error("invalid utf8 byte sequence; unexpected continuation byte");throw new Error("invalid utf8 byte sequence; invalid prefix")}o=3,a=65535}if(r+o>t.length){if(!e)throw new Error("invalid utf8 byte sequence; too short");for(;r<t.length&&t[r]>>6==2;r++);}else{for(var u=i&(1<<8-o-1)-1,c=0;c<o;c++){var l=t[r];if(128!=(192&l)){u=null;break}u=u<<6|63&l,r++}if(null!==u)if(u<=a){if(!e)throw new Error("invalid utf8 byte sequence; overlong")}else if(1114111<u){if(!e)throw new Error("invalid utf8 byte sequence; out-of-range")}else if(55296<=u&&u<=57343){if(!e)throw new Error("invalid utf8 byte sequence; utf-16 surrogate")}else u<=65535?n+=String.fromCharCode(u):(u-=65536,n+=String.fromCharCode(55296+(u>>10&1023),56320+(1023&u)));else if(!e)throw new Error("invalid utf8 byte sequence; invalid continuation byte")}}else n+=String.fromCharCode(i)}return n}(i=r=n.UnicodeNormalizationForm||(n.UnicodeNormalizationForm={})).current="",i.NFC="NFC",i.NFD="NFD",i.NFKC="NFKC",i.NFKD="NFKD",n.toUtf8Bytes=u,n.toUtf8String=c,n.formatBytes32String=function(t){var e=u(t);if(31<e.length)throw new Error("bytes32 string must be less than 32 bytes");return s.hexlify(s.concat([e,o.HashZero]).slice(0,32))},n.parseBytes32String=function(t){var e=s.arrayify(t);if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");for(var n=31;0===e[n-1];)n--;return c(e.slice(0,n))}},{"../constants":3,"../errors":5,"./bytes":64}],86:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("xmlhttprequest"),o=t("./base64"),a=t("./properties"),s=t("./utf8"),u=r(t("../errors"));n.fetchJson=function(t,e,n){var r={},a=null,c=12e4;if("string"==typeof t)a=t;else if("object"==typeof t){if(null==t.url&&u.throwError("missing URL",u.MISSING_ARGUMENT,{arg:"url"}),a=t.url,"number"==typeof t.timeout&&0<t.timeout&&(c=t.timeout),t.headers)for(var l in t.headers)r[l.toLowerCase()]={key:l,value:String(t.headers[l])};if(null!=t.user&&null!=t.password){"https:"!==a.substring(0,6)&&!0!==t.allowInsecure&&u.throwError("basic authentication requires a secure https url",u.INVALID_ARGUMENT,{arg:"url",url:a,user:t.user,password:"[REDACTED]"});var h=t.user+":"+t.password;r.authorization={key:"Authorization",value:"Basic "+o.encode(s.toUtf8Bytes(h))}}}return new Promise((function(t,o){var s=new i.XMLHttpRequest,u=null;function l(){null!=u&&(clearTimeout(u),u=null)}u=setTimeout((function(){null!=u&&(u=null,o(new Error("timeout")),setTimeout((function(){s.abort()}),0))}),c),e?(s.open("POST",a,!0),r["content-type"]={key:"Content-Type",value:"application/json"}):s.open("GET",a,!0),Object.keys(r).forEach((function(t){var e=r[t];s.setRequestHeader(e.key,e.value)})),s.onreadystatechange=function(){if(4===s.readyState){if(200!=s.status){l();var r=new Error("invalid response - "+s.status);return r.statusCode=s.status,s.responseText&&(r.responseText=s.responseText),void o(r)}var i=null;try{i=JSON.parse(s.responseText)}catch(r){l();var u=new Error("invalid json response");return u.orginialError=r,u.responseText=s.responseText,null!=e&&(u.requestBody=e),u.url=a,void o(u)}if(n)try{i=n(i)}catch(r){return l(),r.url=a,r.body=e,r.responseText=s.responseText,void o(r)}l(),t(i)}},s.onerror=function(t){l(),o(t)};try{null!=e?s.send(e):s.send()}catch(u){l();var h=new Error("connection error");h.error=u,o(h)}}))},n.poll=function(t,e){return e=e||{},null==(e=a.shallowCopy(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(n,r){var i=null,o=!1,a=function(){return!o&&(o=!0,i&&clearTimeout(i),!0)};e.timeout&&(i=setTimeout((function(){a()&&r(new Error("timeout"))}),e.timeout));var s=e.fastRetry||null,u=0;!function i(){return t().then((function(t){if(void 0!==t)a()&&n(t);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!o){u++;var r=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));r<e.floor&&(r=e.floor),r>e.ceiling&&(r=e.ceiling),s&&(u--,r=s,s=null),setTimeout(i,r)}return null}),(function(t){a()&&r(t)}))}()}))}},{"../errors":5,"./base64":61,"./properties":74,"./utf8":85,xmlhttprequest:49}],87:[function(t,e,n){(function(e){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/hash"),i=t("../utils/properties");n.check=function(t){for(var e=[],n=0;n<2048;n++){var i=t.getWord(n);if(n!==t.getWordIndex(i))return"0x";e.push(i)}return r.id(e.join("\n")+"\n")};var o=(a.prototype.split=function(t){return t.toLowerCase().split(/ +/g)},a.prototype.join=function(t){return t.join(" ")},a);function a(t){i.defineReadOnly(this,"locale",t)}n.Wordlist=o,n.register=function(t,e){e=e||t.locale}}).call(this,void 0!==Et?Et:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/hash":65,"../utils/properties":74}],88:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("./utils/bytes"),u=t("./utils/hash"),c=t("./utils/hdnode"),l=t("./utils/json-wallet"),h=t("./utils/keccak256"),f=t("./utils/properties"),d=t("./utils/random-bytes"),p=o(t("./utils/secret-storage")),m=t("./utils/signing-key"),g=t("./utils/transaction"),v=t("./abstract-signer"),y=t("./providers/abstract-provider"),b=o(t("./errors")),w=(i(_,a=v.Signer),Object.defineProperty(_.prototype,"address",{get:function(){return this.signingKey.address},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"mnemonic",{get:function(){return this.signingKey.mnemonic},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"path",{get:function(){return this.signingKey.path},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"privateKey",{get:function(){return this.signingKey.privateKey},enumerable:!0,configurable:!0}),_.prototype.connect=function(t){return y.Provider.isProvider(t)||b.throwError("invalid provider",b.INVALID_ARGUMENT,{argument:"provider",value:t}),new _(this.signingKey,t)},_.prototype.getAddress=function(){return Promise.resolve(this.address)},_.prototype.sign=function(t){var e=this;return f.resolveProperties(t).then((function(t){var n=g.serialize(t),r=e.signingKey.signDigest(h.keccak256(n));return g.serialize(t,r)}))},_.prototype.signMessage=function(t){return Promise.resolve(s.joinSignature(this.signingKey.signDigest(u.hashMessage(t))))},_.prototype.getBalance=function(t){if(!this.provider)throw new Error("missing provider");return this.provider.getBalance(this.address,t)},_.prototype.getTransactionCount=function(t){if(!this.provider)throw new Error("missing provider");return this.provider.getTransactionCount(this.address,t)},_.prototype.sendTransaction=function(t){var e=this;if(!this.provider)throw new Error("missing provider");return null==t.nonce&&((t=f.shallowCopy(t)).nonce=this.getTransactionCount("pending")),g.populateTransaction(t,this.provider,this.address).then((function(t){return e.sign(t).then((function(t){return e.provider.sendTransaction(t)}))}))},_.prototype.encrypt=function(t,e,n){if("function"!=typeof e||n||(n=e,e={}),n&&"function"!=typeof n)throw new Error("invalid callback");return e=e||{},this.mnemonic&&((e=f.shallowCopy(e)).mnemonic=this.mnemonic,e.path=this.path),p.encrypt(this.privateKey,t,e,n)},_.createRandom=function(t){var e=d.randomBytes(16);(t=t||{}).extraEntropy&&(e=s.arrayify(h.keccak256(s.concat([e,t.extraEntropy])).substring(0,34)));var n=c.entropyToMnemonic(e,t.locale);return _.fromMnemonic(n,t.path,t.locale)},_.fromEncryptedJson=function(t,e,n){if(l.isCrowdsaleWallet(t))try{n&&n(0);var r=p.decryptCrowdsale(t,e);return n&&n(1),Promise.resolve(new _(r))}catch(t){return Promise.reject(t)}else if(l.isSecretStorageWallet(t))return p.decrypt(t,e,n).then((function(t){return new _(t)}));return Promise.reject("invalid wallet JSON")},_.fromMnemonic=function(t,e,n){return e=e||c.defaultPath,new _(c.fromMnemonic(t,n).derivePath(e))},_);function _(t,e){var n=a.call(this)||this;return b.checkNew(n,_),m.SigningKey.isSigningKey(t)?f.defineReadOnly(n,"signingKey",t):f.defineReadOnly(n,"signingKey",new m.SigningKey(t)),f.defineReadOnly(n,"provider",e),n}n.Wallet=w},{"./abstract-signer":2,"./errors":5,"./providers/abstract-provider":50,"./utils/bytes":64,"./utils/hash":65,"./utils/hdnode":66,"./utils/json-wallet":70,"./utils/keccak256":71,"./utils/properties":74,"./utils/random-bytes":75,"./utils/secret-storage":78,"./utils/signing-key":81,"./utils/transaction":83}],89:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../wordlists/lang-en").langEn;n.en=r},{"../wordlists/lang-en":90}],90:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o,a=t("../utils/wordlist"),s=null;function u(t){if(null==s&&(s="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==a.check(t)))throw s=null,new Error("BIP39 Wordlist for en (English) FAILED")}function c(){return o.call(this,"en")||this}var l=new(i(c,o=a.Wordlist),c.prototype.getWord=function(t){return u(this),s[t]},c.prototype.getWordIndex=function(t){return u(this),s.indexOf(t)},c);n.langEn=l,a.register(l)},{"../utils/wordlist":87}]},{},[7])(7)}))),$s=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],zs=xt((function(t,e){!function(){function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){o(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Et&&Et.global===Et?Et:void 0,o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,o,a){var s=i.URL||i.webkitURL,u=document.createElement("a");o=o||t.name||"download",u.download=o,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):n(u.href)?e(t,o,a):r(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){r(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,o){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),i);else if(n(t))e(t,i,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,s=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},c.readAsDataURL(t)}else{var l=i.URL||i.webkitURL,h=l.createObjectURL(t);o?o.location=h:location.href=h,o=null,setTimeout((function(){l.revokeObjectURL(h)}),4e4)}});i.saveAs=o.saveAs=o,t.exports=o}()}));function Hs(t,e,n){const r=t.slice();return r[110]=e[n],r}function Gs(t,e,n){const r=t.slice();return r[107]=e[n],r}function Ws(t){let e;return{c(){e=T("div"),e.textContent="Загрузка...",A(e,"slot","loading"),A(e,"class","mt-16 text-white text-center")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Ks(t){let e;return{c(){e=T("progress"),A(e,"class","mt-2 w-full rounded-full overflow-hidden"),A(e,"max","100"),e.value=t[3]},m(t,n){w(t,e,n)},p(t,n){8&n[0]&&(e.value=t[3])},d(t){t&&_(e)}}}function Zs(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m=null!=t[3]?Ks(t):null;function g(...e){return t[75](t[29],...e)}return{c(){e=T("div"),n=T("div"),r=T("div"),i=T("div"),i.innerHTML='<p class=" font-semibold text-center text-base">\n                                    Добро пожаловать!\n                                    </p> \n                                    <p class=" mt-2">\n                                        На данный момент у вас нет крипто-кошелька привязанного к аккаунту.\n                                        Создайте его прямо сейчас! Придумайте пароль для кошелька и нажмите кнопку &quot;Создать&quot;.\n                                    </p> \n                                    <p class="mt-1 text-red-600"><b>Внимание!</b> Кошелёк будет зашифрован с помощью этого пароля, если вы его забудете, то все средства\n                                        останутся там навсегда, так как нет другого способа его расшифровать. Рекомендуем записать пароль на бумаге\n                                        и хранить в надёжном месте.\n                                    </p> \n                                    <p class="mt-1 text-teal-600">\n                                        После создания кошельки сохраняются в зашифрованном виде, и каждый раз при открытии необходимо вводить пароль.\n                                        Даже если злоумышленники получат доступ к вашему аккаунту, средства на кошельках останутся в сохранности.\n                                        Рекомендуем скачать копию кошелька в зашифрованном виде (файл JSON) или приватный ключ кошелька, для доступа к кошельку\n                                        из других источников. Кнопки появятся под адресом после создания: &quot;Показать приватный ключ&quot;, &quot;Скачать JSON-кошелёк&quot;.\n                                    </p>',a=x(),s=T("div"),m&&m.c(),u=x(),c=T("div"),l=T("input"),h=x(),f=T("div"),d=T("button"),d.textContent="Создать",A(i,"class","text-justify leading-tight text-sm"),A(l,"class","input-password svelte-1dd2abr"),A(l,"type","password"),A(l,"placeholder","Пароль"),A(c,"class","mt-3 text-center"),A(d,"class","btn-orange svelte-1dd2abr"),A(f,"class","mt-3 text-center"),A(r,"class","welcome-block p-2 bg-gray-100 rounded-lg"),A(n,"class","welcome-container p-2 bg-gray-900 h-auto"),A(e,"slot","fallback")},m(o,v){w(o,e,v),b(e,n),b(n,r),b(r,i),b(r,a),b(r,s),m&&m.m(s,null),b(r,u),b(r,c),b(c,l),M(l,t[7]),b(r,h),b(r,f),b(f,d),p=[k(l,"input",t[74]),k(d,"click",g,{once:!0})]},p(e,n){null!=(t=e)[3]?m?m.p(t,n):(m=Ks(t),m.c(),m.m(s,null)):m&&(m.d(1),m=null),128&n[0]&&l.value!==t[7]&&M(l,t[7])},d(t){t&&_(e),m&&m.d(),o(p)}}}function Qs(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,C,M,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,X,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,ft,dt,pt,mt,gt,vt,yt,bt,wt,_t,Et,Tt,St,xt,It,kt,At,Ct,Nt,Mt,Pt,Lt,Dt,Rt,Ot,Bt,Ut,Ft,jt=Math.trunc(+t[22]/1e9)+"",qt=t[18]&&Js(t),Vt=t[20]&&tu(t);function $t(t,e){return t[28]?eu:nu}let zt=$t(t),Ht=zt(t),Gt=t[28]&&ru(t),Wt=t[12]&&iu(t),Kt=t[13]&&au(t),Zt=t[26]&&su(t);return{c(){e=T("div"),n=T("div"),r=x(),i=T("div"),a=T("div"),s=T("div"),s.innerHTML='<span class="text-sm text-gray-700 font-semibold">\n                                            Текущая сеть: \n                                        </span> \n                                        <span class="help svelte-1dd2abr"><img src="./icons/help.svg" alt="help" class="w-4 h-4"> \n                                            <span class="svelte-1dd2abr">\n                                                &quot;Homestead&quot; - главная сеть эфириума (Ethereum mainnet).\n                                                &quot;Ropsten&quot; - тестовая сеть эфириума (Ropsten testnet).\n                                                &quot;Rinkeby&quot; - тестовая сеть эфириума (Rinkeby mainnet).\n                                            </span></span>',u=x(),c=T("div"),l=T("span"),h=T("select"),f=T("option"),f.textContent="homestead",d=T("option"),d.textContent="rinkeby",p=T("option"),p.textContent="ropsten",m=x(),qt&&qt.c(),g=x(),v=T("div"),y=T("div"),E=T("div"),E.innerHTML='<span class="text-sm text-gray-700 font-semibold">\n                                            Текущий кошелёк: \n                                        </span>',I=x(),C=T("div"),M=T("div"),P=T("div"),L=S(t[6]),D=x(),R=T("div"),O=T("img"),U=x(),F=T("div"),j=T("button"),j.textContent="добавить +",q=x(),V=T("div"),$=T("div"),z=T("input"),H=x(),G=T("div"),W=T("img"),Z=x(),Q=T("div"),Y=T("span"),Y.textContent="Показать приватный ключ",J=x(),X=T("span"),X.textContent="JSON-кошелёк",tt=x(),Vt&&Vt.c(),et=x(),nt=T("div"),rt=T("div"),it=T("div"),it.innerHTML='<p class=" text-center font-semibold text-green-500">\n                                            Баланс\n                                        </p>',ot=x(),at=T("div"),st=T("div"),ut=T("div"),ct=T("div"),ct.textContent="Eth:",lt=x(),ht=T("div"),ft=S(t[21]),dt=x(),pt=T("div"),Ht.c(),mt=x(),Gt&&Gt.c(),gt=x(),vt=T("div"),yt=T("p"),bt=T("span"),bt.textContent="TAK:",wt=x(),_t=T("span"),Et=S(t[0]),Tt=x(),St=T("div"),xt=T("p"),It=T("span"),It.textContent="Цена газа:",kt=x(),At=T("span"),Ct=S(jt),Nt=S(" gwei"),Mt=x(),Pt=T("div"),Lt=T("button"),Lt.textContent="Показать токены",Dt=x(),Rt=T("button"),Rt.textContent="Добавить токен",Ot=x(),Wt&&Wt.c(),Bt=x(),Kt&&Kt.c(),Ut=x(),Zt&&Zt.c(),A(n,"class","wallet-header"),f.__value="homestead",f.value=f.__value,d.__value="rinkeby",d.value=d.__value,p.__value="ropsten",p.value=p.__value,A(h,"id","select-network"),A(h,"class","svelte-1dd2abr"),A(a,"class"," flex flex-row justify-between items-center"),A(i,"class","wallet-block svelte-1dd2abr"),A(P,"class","p-1 w-full border border-gray-400 bg-white rounded-lg"),O.src!==(B="./icons/unfold_more.svg")&&A(O,"src","./icons/unfold_more.svg"),A(O,"alt","copy"),A(O,"class","w-6 h-6 cursor-pointer"),A(R,"class","ml-1 p-1 rounded-full bg-teal-500 shadow-md"),A(M,"class"," flex flex-row"),A(j,"class","btn-opt mb-2 svelte-1dd2abr"),A(C,"class","flex flex-row justify-between items-center"),A(z,"id","wallet-address"),A(z,"type","text"),z.value=t[8],A(z,"class","svelte-1dd2abr"),A($,"class"," w-11/12"),W.src!==(K="./icons/file-copy.svg")&&A(W,"src","./icons/file-copy.svg"),A(W,"alt","copy"),A(W,"class"," w-6 h-6 cursor-pointer"),A(G,"class","px-1"),A(V,"class","mt-1 flex flex-row justify-between items-center"),A(Y,"class","link-wallet-secret svelte-1dd2abr"),A(X,"class","link-wallet-secret svelte-1dd2abr"),A(v,"class","wallet-block svelte-1dd2abr"),A(ct,"class","ml-1 font-semibold text-blue-500"),A(ht,"class"," text-orange-500"),A(ut,"class"," flex flex-row justify-between items-center"),A(st,"class","token svelte-1dd2abr"),A(bt,"class"," text-blue-500"),A(_t,"class"," text-orange-500"),A(vt,"class","token svelte-1dd2abr"),A(It,"class"," text-blue-500"),A(At,"class"," text-orange-500"),A(St,"class","token svelte-1dd2abr"),A(at,"class","mt-2 flex flex-col"),A(Lt,"class","btn-opt svelte-1dd2abr"),A(Rt,"class","btn-opt svelte-1dd2abr"),A(Pt,"class","mt-2 text-center"),A(rt,"class"," flex flex-col"),A(nt,"class","wallet-block svelte-1dd2abr"),A(e,"class","wallet flex flex-col px-2 rounded-lg bg-gray-200")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(a,s),b(a,u),b(a,c),b(c,l),b(l,h),b(h,f),b(h,d),b(h,p),b(e,m),qt&&qt.m(e,null),b(e,g),b(e,v),b(v,y),b(y,E),b(y,I),b(y,C),b(C,M),b(M,P),b(P,L),b(M,D),b(M,R),b(R,O),b(C,U),b(C,F),b(F,j),b(y,q),b(y,V),b(V,$),b($,z),b(V,H),b(V,G),b(G,W),b(y,Z),b(y,Q),b(Q,Y),b(Q,J),b(Q,X),b(v,tt),Vt&&Vt.m(v,null),b(e,et),b(e,nt),b(nt,rt),b(rt,it),b(rt,ot),b(rt,at),b(at,st),b(st,ut),b(ut,ct),b(ut,lt),b(ut,ht),b(ht,ft),b(ut,dt),b(ut,pt),Ht.m(pt,null),b(st,mt),Gt&&Gt.m(st,null),b(at,gt),b(at,vt),b(vt,yt),b(yt,bt),b(yt,wt),b(yt,_t),b(_t,Et),b(at,Tt),b(at,St),b(St,xt),b(xt,It),b(xt,kt),b(xt,At),b(At,Ct),b(At,Nt),b(rt,Mt),b(rt,Pt),b(Pt,Lt),b(Pt,Dt),b(Pt,Rt),b(nt,Ot),Wt&&Wt.m(nt,null),b(e,Bt),Kt&&Kt.m(e,null),b(e,Ut),Zt&&Zt.m(e,null),Ft=[k(h,"input",t[31]),k(O,"click",t[88]),k(j,"click",t[89]),k(W,"click",t[90]),k(Y,"click",t[91]),k(X,"click",t[92]),k(Lt,"click",t[40]),k(Rt,"click",t[98])]},p(t,n){t[18]?qt?qt.p(t,n):(qt=Js(t),qt.c(),qt.m(e,g)):qt&&(qt.d(1),qt=null),64&n[0]&&N(L,t[6]),256&n[0]&&z.value!==t[8]&&(z.value=t[8]),t[20]?Vt?Vt.p(t,n):(Vt=tu(t),Vt.c(),Vt.m(v,null)):Vt&&(Vt.d(1),Vt=null),2097152&n[0]&&N(ft,t[21]),zt===(zt=$t(t))&&Ht?Ht.p(t,n):(Ht.d(1),Ht=zt(t),Ht&&(Ht.c(),Ht.m(pt,null))),t[28]?Gt?Gt.p(t,n):(Gt=ru(t),Gt.c(),Gt.m(st,null)):Gt&&(Gt.d(1),Gt=null),1&n[0]&&N(Et,t[0]),4194304&n[0]&&jt!==(jt=Math.trunc(+t[22]/1e9)+"")&&N(Ct,jt),t[12]?Wt?Wt.p(t,n):(Wt=iu(t),Wt.c(),Wt.m(nt,null)):Wt&&(Wt.d(1),Wt=null),t[13]?Kt?Kt.p(t,n):(Kt=au(t),Kt.c(),Kt.m(e,Ut)):Kt&&(Kt.d(1),Kt=null),t[26]?Zt?Zt.p(t,n):(Zt=su(t),Zt.c(),Zt.m(e,null)):Zt&&(Zt.d(1),Zt=null)},d(t){t&&_(e),qt&&qt.d(),Vt&&Vt.d(),Ht.d(),Gt&&Gt.d(),Wt&&Wt.d(),Kt&&Kt.d(),Zt&&Zt.d(),o(Ft)}}}function Ys(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m;let g=function(t,e){return t[30].length>1?lu:cu}(t)(t),v=null!=t[4]?fu(t):null;return{c(){e=T("div"),n=T("p"),n.textContent="Выберите кошелёк:",r=x(),g.c(),i=x(),a=T("div"),a.innerHTML='<p class=" text-center font-semibold text-gray-700">\n                                    Введите пароль кошелька:\n                                </p>',s=x(),u=T("div"),v&&v.c(),c=x(),l=T("div"),h=T("input"),f=x(),d=T("div"),p=T("button"),p.textContent="Открыть",A(n,"class","mb-2 font-semibold text-center text-gray-800"),A(a,"class","mt-3"),A(h,"class","input-password svelte-1dd2abr"),A(h,"type","password"),A(l,"class","mt-2 text-center"),A(p,"class","btn-orange svelte-1dd2abr"),A(d,"class","mt-4 text-center"),A(e,"class","auth-block p-4 bg-gray-100 rounded-lg")},m(o,y){w(o,e,y),b(e,n),b(e,r),g.m(e,null),b(e,i),b(e,a),b(e,s),b(e,u),v&&v.m(u,null),b(e,c),b(e,l),b(l,h),M(h,t[7]),b(e,f),b(e,d),b(d,p),m=[k(h,"input",t[79]),k(p,"click",t[80])]},p(t,e){g.p(t,e),null!=t[4]?v?v.p(t,e):(v=fu(t),v.c(),v.m(u,null)):v&&(v.d(1),v=null),128&e[0]&&h.value!==t[7]&&M(h,t[7])},d(t){t&&_(e),g.d(),v&&v.d(),o(m)}}}function Js(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,S,I,C,N,P,L,D,R,O,B,U,F,j,q,V=null!=t[3]?Xs(t):null;function $(...e){return t[84](t[29],...e)}function z(...e){return t[86](t[29],...e)}return{c(){e=T("div"),n=T("div"),r=T("div"),i=T("p"),i.textContent="Создать новый кошелёк:",a=x(),V&&V.c(),s=x(),u=T("p"),c=T("input"),l=x(),h=T("button"),h.textContent="Отмена",f=x(),d=T("p"),p=T("input"),m=x(),g=T("button"),g.textContent="Создать",v=x(),y=T("div"),E=T("p"),E.textContent="Импортировать существующий кошелёк и сохранить:",S=x(),I=T("p"),C=T("input"),N=x(),P=T("button"),P.textContent="Импорт",L=x(),D=T("div"),R=T("p"),R.textContent="Временный импорт:",O=x(),B=T("p"),U=T("input"),F=x(),j=T("button"),j.textContent="Импорт",A(i,"class"," text-sm text-center text-orange-600 font-semibold"),A(c,"class","input-field svelte-1dd2abr"),A(c,"type","text"),A(c,"placeholder","Название кошелька"),A(h,"class","btn-gray ml-1 svelte-1dd2abr"),A(u,"class","mt-2"),A(p,"class","input-field svelte-1dd2abr"),A(p,"type","text"),A(p,"placeholder","Пароль кошелька"),A(g,"class","btn-orange svelte-1dd2abr"),A(d,"class","mt-1"),A(E,"class"," text-sm text-center text-orange-600 font-semibold"),A(C,"class","input-field svelte-1dd2abr"),A(C,"type","text"),A(C,"placeholder","Приватный ключ"),A(P,"class","btn-green svelte-1dd2abr"),A(y,"class","mt-2"),A(R,"class"," text-sm text-center text-orange-600 font-semibold"),A(U,"class","input-field svelte-1dd2abr"),A(U,"type","text"),A(U,"placeholder","Приватный ключ"),A(j,"class","btn-orange svelte-1dd2abr"),A(D,"class","mt-2"),A(n,"class"," flex flex-col"),A(e,"class","wallet-block svelte-1dd2abr")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(r,i),b(r,a),V&&V.m(r,null),b(r,s),b(r,u),b(u,c),M(c,t[16]),b(u,l),b(u,h),b(r,f),b(r,d),b(d,p),M(p,t[17]),b(d,m),b(d,g),b(n,v),b(n,y),b(y,E),b(y,S),b(y,I),b(I,C),M(C,t[23]),b(I,N),b(I,P),b(n,L),b(n,D),b(D,R),b(D,O),b(D,B),b(B,U),M(U,t[23]),b(B,F),b(B,j),q=[k(c,"input",t[81]),k(h,"click",t[82]),k(p,"input",t[83]),k(g,"click",$),k(C,"input",t[85]),k(P,"click",z),k(U,"input",t[87]),k(j,"click",t[35])]},p(e,n){null!=(t=e)[3]?V?V.p(t,n):(V=Xs(t),V.c(),V.m(r,s)):V&&(V.d(1),V=null),65536&n[0]&&c.value!==t[16]&&M(c,t[16]),131072&n[0]&&p.value!==t[17]&&M(p,t[17]),8388608&n[0]&&C.value!==t[23]&&M(C,t[23]),8388608&n[0]&&U.value!==t[23]&&M(U,t[23])},d(t){t&&_(e),V&&V.d(),o(q)}}}function Xs(t){let e;return{c(){e=T("progress"),A(e,"max","100"),A(e,"class"," mt-2 w-full rounded-full overflow-hidden"),e.value=t[3]},m(t,n){w(t,e,n)},p(t,n){8&n[0]&&(e.value=t[3])},d(t){t&&_(e)}}}function tu(t){let e,n,r,i,a,s,u;return{c(){e=T("div"),n=T("div"),r=T("input"),i=x(),a=T("div"),s=T("button"),s.textContent="Закрыть",A(r,"id","private-key"),A(r,"class","view-private-key svelte-1dd2abr"),A(r,"type","text"),r.value=t[9],A(n,"class","mt-2"),A(s,"class","btn-gray svelte-1dd2abr"),A(a,"class","mt-2"),A(e,"class","wallet-secret svelte-1dd2abr")},m(o,c){w(o,e,c),b(e,n),b(n,r),b(e,i),b(e,a),b(a,s),u=[k(r,"click",t[32]),k(s,"click",t[93])]},p(t,e){512&e[0]&&r.value!==t[9]&&(r.value=t[9])},d(t){t&&_(e),o(u)}}}function eu(e){let n,r,i;return{c(){n=T("img"),A(n,"class","w-8 h-8 cursor-pointer"),n.src!==(r="./icons/expand_less.svg")&&A(n,"src","./icons/expand_less.svg"),A(n,"alt","less")},m(t,r){w(t,n,r),i=k(n,"click",e[95])},p:t,d(t){t&&_(n),i()}}}function nu(e){let n,r,i;return{c(){n=T("img"),A(n,"class","w-8 h-8 cursor-pointer"),n.src!==(r="./icons/expand_more.svg")&&A(n,"src","./icons/expand_more.svg"),A(n,"alt","more")},m(t,r){w(t,n,r),i=k(n,"click",e[94])},p:t,d(t){t&&_(n),i()}}}function ru(t){let e,n,r,i,a,s,u;return{c(){e=T("div"),n=T("input"),r=x(),i=T("input"),a=x(),s=T("button"),s.textContent="Отправить",A(n,"class","input-field svelte-1dd2abr"),A(n,"type","text"),A(n,"placeholder","Адрес получателя"),A(i,"class","input-field svelte-1dd2abr"),A(i,"type","text"),A(i,"placeholder","Количество"),A(s,"class","btn-green svelte-1dd2abr"),A(e,"class","text-center")},m(o,c){w(o,e,c),b(e,n),M(n,t[25]),b(e,r),b(e,i),M(i,t[24]),b(e,a),b(e,s),u=[k(n,"input",t[96]),k(i,"input",t[97]),k(s,"click",t[43])]},p(t,e){33554432&e[0]&&n.value!==t[25]&&M(n,t[25]),16777216&e[0]&&i.value!==t[24]&&M(i,t[24])},d(t){t&&_(e),o(u)}}}function iu(t){let e,n=t[14],r=[];for(let e=0;e<n.length;e+=1)r[e]=ou(Hs(t,n,e));return{c(){e=T("div");for(let t=0;t<r.length;t+=1)r[t].c();A(e,"class","mt-3 flex flex-col")},m(t,n){w(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(67125248&i[0]){let o;for(n=t[14],o=0;o<n.length;o+=1){const a=Hs(t,n,o);r[o]?r[o].p(a,i):(r[o]=ou(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&_(e),E(r,t)}}}function ou(t){let e,n,r,i,o,a,s,u,c,l,h,f,d,p=t[110].name+"",m=+t[110].balance/1e18+"";return{c(){e=T("div"),n=T("label"),r=T("span"),i=S(p),o=S(":"),a=x(),s=T("span"),u=S(m),c=x(),l=T("input"),f=x(),A(r,"class"," text-blue-500"),A(s,"class"," text-orange-500"),A(l,"type","radio"),l.__value=h=t[110].address,l.value=l.__value,t[77][1].push(l),A(e,"class","token svelte-1dd2abr")},m(h,p){w(h,e,p),b(e,n),b(n,r),b(r,i),b(r,o),b(n,a),b(n,s),b(s,u),b(n,c),b(n,l),l.checked=l.__value===t[26],b(e,f),d=k(l,"change",t[99])},p(t,e){16384&e[0]&&p!==(p=t[110].name+"")&&N(i,p),16384&e[0]&&m!==(m=+t[110].balance/1e18+"")&&N(u,m),16384&e[0]&&h!==(h=t[110].address)&&(l.__value=h),l.value=l.__value,67108864&e[0]&&(l.checked=l.__value===t[26])},d(n){n&&_(e),t[77][1].splice(t[77][1].indexOf(l),1),d()}}}function au(t){let e,n,r,i,a,s,u,c,l,h,f,d,p;return{c(){e=T("div"),n=T("div"),n.innerHTML='<p class=" text-center font-semibold text-teal-500">\n                                        Добавить токен:\n                                    </p>',r=x(),i=T("div"),a=T("input"),s=x(),u=T("input"),c=x(),l=T("div"),h=T("button"),h.textContent="Добавить",f=x(),d=T("button"),d.textContent="Отмена",A(a,"class","input-field svelte-1dd2abr"),A(a,"type","text"),A(a,"placeholder","Название токена"),A(u,"class","input-field svelte-1dd2abr"),A(u,"type","text"),A(u,"placeholder","Адрес смарт-контракта токена"),A(i,"class"," text-center"),A(h,"class","btn-orange svelte-1dd2abr"),A(d,"class","btn-gray svelte-1dd2abr"),A(l,"class"," text-center"),A(e,"class","wallet-block svelte-1dd2abr")},m(o,m){w(o,e,m),b(e,n),b(e,r),b(e,i),b(i,a),M(a,t[10]),b(i,s),b(i,u),M(u,t[11]),b(e,c),b(e,l),b(l,h),b(l,f),b(l,d),p=[k(a,"input",t[100]),k(u,"input",t[101]),k(h,"click",t[39]),k(d,"click",t[102])]},p(t,e){1024&e[0]&&a.value!==t[10]&&M(a,t[10]),2048&e[0]&&u.value!==t[11]&&M(u,t[11])},d(t){t&&_(e),o(p)}}}function su(t){let e,n,r,i,a,s,u,c,l,h,f,d,p=t[27]&&uu(t);return{c(){e=T("div"),n=T("div"),r=T("p"),r.textContent="Отправить токены",i=x(),a=T("div"),s=T("input"),u=x(),c=T("input"),l=x(),h=T("button"),h.textContent="Отправить",f=x(),p&&p.c(),A(r,"class"," text-center font-semibold text-teal-500"),A(s,"class","input-field svelte-1dd2abr"),A(s,"type","text"),A(s,"placeholder","Адрес получателя"),A(c,"class","input-field svelte-1dd2abr"),A(c,"type","text"),A(c,"placeholder","Количество"),A(h,"class","btn-green svelte-1dd2abr"),A(a,"class"," text-center"),A(e,"class","wallet-block svelte-1dd2abr")},m(o,m){w(o,e,m),b(e,n),b(n,r),b(n,i),b(n,a),b(a,s),M(s,t[25]),b(a,u),b(a,c),M(c,t[24]),b(a,l),b(a,h),b(n,f),p&&p.m(n,null),d=[k(s,"input",t[103]),k(c,"input",t[104]),k(h,"click",t[42])]},p(t,e){33554432&e[0]&&s.value!==t[25]&&M(s,t[25]),16777216&e[0]&&c.value!==t[24]&&M(c,t[24]),t[27]?p?p.p(t,e):(p=uu(t),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},d(t){t&&_(e),p&&p.d(),o(d)}}}function uu(t){let e,n,r,i;return{c(){e=T("div"),n=T("a"),r=S(t[27]),A(n,"class","link-hash svelte-1dd2abr"),A(n,"href",i=`https://${t[19].network.name}.etherscan.io/tx/${t[27]}`),A(e,"class","mt-1 p-1 w-full bg-white rounded-lg truncate")},m(t,i){w(t,e,i),b(e,n),b(n,r)},p(t,e){134217728&e[0]&&N(r,t[27]),134742016&e[0]&&i!==(i=`https://${t[19].network.name}.etherscan.io/tx/${t[27]}`)&&A(n,"href",i)},d(t){t&&_(e)}}}function cu(t){let e,n,r,i,o,a,s,u,c;return{c(){e=T("div"),n=T("label"),r=T("span"),r.textContent=`${t[30][0].name}`,i=x(),o=T("input"),s=x(),u=T("span"),u.textContent=`${t[30][0].address}`,A(o,"type","radio"),o.__value=a=0,o.value=o.__value,o.checked=!0,t[77][0].push(o),A(n,"for",""),A(u,"class"," text-teal-600 text-xs tracking-tight"),A(e,"class","mt-1 p-1 text-orange-600 bg-white border rounded-lg")},m(a,l){w(a,e,l),b(e,n),b(n,r),b(n,i),b(n,o),o.checked=o.__value===t[15],b(e,s),b(e,u),c=k(o,"change",t[78])},p(t,e){32768&e[0]&&(o.checked=o.__value===t[15])},d(n){n&&_(e),t[77][0].splice(t[77][0].indexOf(o),1),c()}}}function lu(t){let e,n=t[30],r=[];for(let e=0;e<n.length;e+=1)r[e]=hu(Gs(t,n,e));return{c(){e=T("div");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){w(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(1073774592&i[0]){let o;for(n=t[30],o=0;o<n.length;o+=1){const a=Gs(t,n,o);r[o]?r[o].p(a,i):(r[o]=hu(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&_(e),E(r,t)}}}function hu(t){let e,n,r,i,o,a,s,u,c,l,h,f,d=t[107].name+"",p=t[107].address+"";return{c(){e=T("div"),n=T("label"),r=T("span"),i=S(d),o=x(),a=T("input"),u=x(),c=T("span"),l=S(p),h=x(),A(a,"type","radio"),a.__value=s=t[107].id,a.value=a.__value,t[77][0].push(a),A(n,"for",""),A(c,"class"," text-teal-600 text-xs tracking-tight"),A(e,"class","mt-1 p-1 text-orange-600 bg-white border rounded-lg")},m(s,d){w(s,e,d),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),a.checked=a.__value===t[15],b(e,u),b(e,c),b(c,l),b(e,h),f=k(a,"change",t[76])},p(t,e){32768&e[0]&&(a.checked=a.__value===t[15])},d(n){n&&_(e),t[77][0].splice(t[77][0].indexOf(a),1),f()}}}function fu(t){let e;return{c(){e=T("progress"),A(e,"class","mt-4 w-full rounded-full overflow-hidden"),A(e,"max","100"),e.value=t[4]},m(t,n){w(t,e,n)},p(t,n){16&n[0]&&(e.value=t[4])},d(t){t&&_(e)}}}function du(t){let e,n,r;function i(t,e){return t[5]?Qs:Ys}let o=i(t),a=o(t);return{c(){e=x(),n=x(),r=T("div"),a.c(),A(r,"class","wallet-container p-2 bg-gray-900 h-auto")},m(t,i){w(t,e,i),w(t,n,i),w(t,r,i),a.m(r,null)},p(t,e){o===(o=i(t))&&a?a.p(t,e):(a.d(1),a=o(t),a&&(a.c(),a.m(r,null)))},d(t){t&&_(e),t&&_(n),t&&_(r),a.d()}}}function pu(t){let e;const n=new Re({props:{path:`users/${t[29].uid}/wallets/default`,$$slots:{default:[du,({data:t,ref:e})=>({48:t,106:e}),({data:t,ref:e})=>[0,t?131072:0,0,e?8192:0]],fallback:[Zs,({data:t,ref:e})=>({48:t,106:e}),({data:t,ref:e})=>[0,t?131072:0,0,e?8192:0]],loading:[Ws,({data:t,ref:e})=>({48:t,106:e}),({data:t,ref:e})=>[0,t?131072:0,0,e?8192:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};536870912&e[0]&&(r.path=`users/${t[29].uid}/wallets/default`),536870905&e[0]|1048576&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function mu(t){let e;const n=new me({props:{$$slots:{default:[pu,({user:t})=>({29:t}),({user:t})=>[t?536870912:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1073741817&e[0]|1048576&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function gu(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=T("div"),n=T("div"),r=T("p"),i=S(t[2]),o=x(),a=T("p"),s=T("button"),s.textContent="Ок",A(r,"class","text-center"),A(s,"class","btn-orange svelte-1dd2abr"),A(a,"class","mt-2 text-center"),A(n,"class","p-3 border bg-white rounded-lg shadow-lg"),A(e,"id","alertBox"),A(e,"class"," fixed top-0 svelte-1dd2abr")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=k(s,"click",t[105])},p(t,e){(!c||4&e[0])&&N(i,t[2])},i(t){c||(X(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function vu(t){let e,n,r,i;const o=new Qt({props:{firebase:Lt,$$slots:{default:[mu]},$$scope:{ctx:t}}});let a=t[1]&&gu(t);return{c(){e=T("div"),mt(o.$$.fragment),n=x(),a&&a.c(),r=I(),A(e,"class","main-container svelte-1dd2abr")},m(t,s){w(t,e,s),gt(o,e,null),w(t,n,s),a&&a.m(t,s),w(t,r,s),i=!0},p(t,e){const n={};1073741817&e[0]|1048576&e[3]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),t[1]?a?(a.p(t,e),lt(a,1)):(a=gu(t),a.c(),lt(a,1),a.m(r.parentNode,r)):a&&(ut(),ht(a,1,1,()=>{a=null}),ct())},i(t){i||(lt(o.$$.fragment,t),lt(a),i=!0)},o(t){ht(o.$$.fragment,t),ht(a),i=!1},d(t){t&&_(e),vt(o),t&&_(n),a&&a.d(t),t&&_(r)}}}function yu(t,e,n){let r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,b,w,_,E,T,S,x,I,k,A,C,N,M,P,L,D=0,R=!1,O=[],B=[],U=Vs.getDefaultProvider(),F=U.network.name,j=new Vs.providers.EtherscanProvider;function q(){Lt.auth().onAuthStateChanged((function(t){t?(n(29,r=t),Y()):console.log("no user")}))}function V(t){n(8,d=t.address),n(9,p=t.privateKey),m=t.mnemonic,n(19,U=Vs.getDefaultProvider()),c=new Vs.Wallet(p,U),$(),H(),nt(),G(c.address)}function $(){c.getBalance().then(t=>{let e=Vs.utils.formatEther(t);n(21,x=e)})}function H(){U.getGasPrice().then(t=>{n(22,I=t.toString())})}function G(t){let e=t;j.getHistory(e,0,"latest").then((function(t){return console.log(t),t}))}function W(t,e){i||(n(2,o=t),n(1,i=!0)),setTimeout(()=>{n(1,i=!1)},e)}function K(t){let e=document.getElementById(t);e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),W("Скопировано.",2e3)}function Z(){let t=B.filter(t=>t.address===c.address),e=t[0].wjson,n=`${t[0].name}.json`,r=new Blob([e],{type:"application/json",name:n});zs(r,n)}function Q(t){if(null==_)W("Введите название кошелька!",5e3);else if(null==E)W("Введите пароль для кошелька!",5e3);else if(null==k)W("Введите приватный ключ кошелька!",5e3);else{V(new Vs.Wallet(k)),n(6,h=_);const e=f;c.encrypt(e,(function(t){n(3,s=parseInt(100*t))})).then((function(e){l=e,Ht.collection(`users/${t}/wallets`).doc(_).set({name:_,address:d,owner:t,wjson:l}).then((function(t){n(18,T=!1),W("Кошелёк создан.",2e3)})).catch((function(t){console.error("Error adding document: ",t),W(`Ошибка: ${t.message}`,2e3)})),n(3,s=null)}))}}function Y(){Ht.collection(`users/${r.uid}/wallets`).get().then((function(t){t.forEach((function(t){const e=t.data();B.push({id:B.length,name:e.name,address:e.address,wjson:e.wjson})}))}))}function J(){const t=B[w];n(6,h=t.name),new Vs.Wallet.fromEncryptedJson(t.wjson,f,(function(t){n(4,u=parseInt(100*t))})).then(t=>{V(t),n(5,R=!0)}).catch(t=>{console.log("error",t.message)})}function X(){new Vs.Wallet.fromEncryptedJson(l,f,(function(t){n(4,u=parseInt(100*t))})).then(t=>{V(t),n(5,R=!0)}).catch(t=>{console.log("error",t.message)})}function tt(t){null==f&&alert("Введите пароль!"),V(Vs.Wallet.createRandom());const e=f;c.encrypt(e,(function(t){n(3,s=parseInt(100*t))})).then((function(e){l=e,Ht.collection(`users/${t}/wallets`).doc("default").set({name:"default",address:d,owner:t,wjson:l}).then((function(t){W("Кошелёк создан.",2e3),document.location.reload(!0)})).catch((function(t){console.error("Error adding document: ",t)})),n(3,s=null)}))}function et(){O.forEach(async t=>{const e=new Vs.Contract(t.address,$s,U),r=await e.balanceOf(c.address);t.balance=await r.toString(),n(12,y=!0)}),console.log("tokenList",O)}async function nt(){const t=new Vs.Contract("0x943b8cc219a5fb3ba70adb173774987c63c3080b",$s,U);n(0,D=await t.balanceOf(c.address)),console.log("balanceOfTAK",D.toString())}function rt(t){if(null==_)W("Введите название кошелька!",2e3);else if(null==E)W("Введите пароль для кошелька!",2e3);else{V(Vs.Wallet.createRandom());const e=f;c.encrypt(e,(function(t){n(3,s=parseInt(100*t))})).then((function(e){l=e,Ht.collection(`users/${t}/wallets`).doc(_).set({name:_,address:d,owner:t,wjson:l}).then((function(t){W("Кошелёк создан.",2e3)})).catch((function(t){W(`Ошибка: ${t.message}`,5e3)})),n(3,s=null)})).catch((function(t){W(`Ошибка: ${t.message}`,5e3)}))}}z(q);return[D,i,o,s,u,R,h,f,d,p,g,v,y,b,O,w,_,E,T,U,S,x,I,k,C,N,M,P,L,r,B,function(t){n(19,U=Vs.getDefaultProvider(t.target.value)),c=new Vs.Wallet(p,U),$(),H(),G(c.address)},function(){let t=document.getElementById("private-key");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),W("Скопировано.",2e3)},K,Z,function(){V(new Vs.Wallet(k)),W("Готово",2e3)},Q,J,tt,function(){v&&null==g?W("Заполните все необходимые поля.",3e3):Ht.collection(`users/${r.uid}/wallets/${h}/tokens`).add({network:U.network.name,name:g,address:v}).then((function(t){W("Токен добавлен.",3e3),n(13,b=!1)})).catch((function(t){console.error("Error adding document: ",t)}))},function(){n(12,y=!1),n(14,O.length=0,O),Ht.collection(`users/${r.uid}/wallets/${h}/tokens`).where("network","==",U.network.name).get().then((function(t){t.forEach((function(t){const e=t.data();O.push({name:e.name,address:e.address,balance:0,id:t.id})})),et()}))},rt,function(){const t=new Vs.Contract(M,$s,c),e=Vs.utils.parseUnits(C,18);t.transfer(N,e).then((function(t){console.log(t),n(27,P=t.hash),W("Отправлено",3e3)})).catch(t=>{W(`Ошибка: ${t.message}`,3e3)})},function(){let t=Vs.utils.parseEther(C),e={to:N,value:t};c.sendTransaction(e).then(t=>{console.log(t),W("Отправлено",3e3)}).catch(t=>{W(`Ошибка: ${t.message}`,3e3)})},a,l,m,A,c,void 0,void 0,void 0,void 0,void 0,void 0,F,j,q,V,void 0,$,function(){c.getTransactionCount().then(t=>{console.log(t)})},H,G,W,function(t){U.getBalance(t).then(t=>{let e=Vs.utils.formatEther(t);console.log("Balance: "+e)})},function(){null==f&&alert("Введите пароль!");let t=f;c.encrypt(t,(function(t){a=parseInt(100*t),console.log("Encrypting: "+parseInt(100*t)+"% complete")})).then((function(t){l=t,console.log(l),a=null}))},function(){A=new Vs.Wallet.fromEncryptedJson(l,f,(function(t){a=parseInt(100*t)})),V(A)},Y,X,function(t){Ht.collection(`users/${t}/wallets`).doc("default").get().then((function(t){if(t.exists){const e=t.data();l=e.wjson,n(6,h=t.id),X()}else alert("Ошибка! Кошелек не найден.")})).catch((function(t){console.log("Error getting document:",t)}))},et,async function(t){const e=new Vs.Contract(t,$s,U),n=await e.balanceOf(c.address);console.log("balance string",n.toString())},nt,function(){f=this.value,n(7,f)},t=>tt(t.uid),function(){w=this.__value,n(15,w)},[[],[]],function(){w=this.__value,n(15,w)},function(){f=this.value,n(7,f)},()=>J(),function(){_=this.value,n(16,_)},()=>n(18,T=!1),function(){E=this.value,n(17,E)},t=>rt(t.uid),function(){k=this.value,n(23,k)},t=>Q(t.uid),function(){k=this.value,n(23,k)},()=>n(5,R=!1),()=>n(18,T=!0),()=>K("wallet-address"),()=>n(20,S=!0),()=>Z(),()=>n(20,S=!1),()=>n(28,L=!0),()=>n(28,L=!1),function(){N=this.value,n(25,N)},function(){C=this.value,n(24,C)},()=>n(13,b=!0),function(){M=this.__value,n(26,M)},function(){g=this.value,n(10,g)},function(){v=this.value,n(11,v)},()=>n(13,b=!1),function(){N=this.value,n(25,N)},function(){C=this.value,n(24,C)},()=>n(1,i=!1)]}function bu(e){let n,r;return{c(){n=T("img"),n.src!==(r="./icons/check.svg")&&A(n,"src","./icons/check.svg"),A(n,"alt","confirmed"),A(n,"class"," inline-block")},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function wu(t){let e,n;function r(...e){return t[9](t[12],...e)}return{c(){e=T("button"),e.textContent="Подтвердить",A(e,"class","btn-orange")},m(t,i){w(t,e,i),n=k(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function _u(t){let e,n,r,i,o,a,s,u,c=t[13].balance+"",l=t[13].username+"";return{c(){e=T("div"),n=S("Баланс:\r\n                    "),r=S(c),i=S(" руб."),o=x(),a=T("div"),s=S("Промокод:\r\n                    "),u=S(l),A(e,"class","mt-4"),A(a,"class","mt-2")},m(t,c){w(t,e,c),b(e,n),b(e,r),b(e,i),w(t,o,c),w(t,a,c),b(a,s),b(a,u)},p(t,e){8192&e&&c!==(c=t[13].balance+"")&&N(r,c),8192&e&&l!==(l=t[13].username+"")&&N(u,l)},d(t){t&&_(e),t&&_(o),t&&_(a)}}}function Eu(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,C,N,P,L;function D(...e){return t[7](t[12],...e)}function R(t,e){return t[12].emailVerified?bu:wu}let O=R(t),B=O(t);const U=new Re({props:{path:`users/${t[12].uid}`,$$slots:{default:[_u,({data:t})=>({13:t}),({data:t})=>t?8192:0]},$$scope:{ctx:t}}});return{c(){e=T("div"),n=S("Отображаемое имя: \r\n                "),r=T("input"),a=x(),s=T("div"),u=S("Эл. почта: \r\n                "),c=T("input"),h=x(),f=T("button"),f.textContent="Изменить",d=x(),B.c(),p=x(),m=T("div"),g=S("Новый пароль:\r\n                "),v=T("input"),y=x(),E=T("button"),E.textContent="Изменить",I=x(),C=T("hr"),N=x(),mt(U.$$.fragment),A(r,"type","text"),r.value=i=t[12].displayName,A(e,"class","mt-2"),A(c,"type","text"),c.value=l=t[12].email,A(f,"class","btn-orange"),A(s,"class","mt-2"),A(v,"type","text"),A(v,"placeholder","Новый пароль"),A(E,"class","btn-orange"),A(m,"class","mt-2")},m(i,o){w(i,e,o),b(e,n),b(e,r),w(i,a,o),w(i,s,o),b(s,u),b(s,c),b(s,h),b(s,f),b(s,d),B.m(s,null),w(i,p,o),w(i,m,o),b(m,g),b(m,v),M(v,t[0]),b(m,y),b(m,E),w(i,I,o),w(i,C,o),w(i,N,o),gt(U,i,o),P=!0,L=[k(r,"input",D),k(c,"change",t[8]),k(v,"input",t[10]),k(E,"click",t[4])]},p(e,n){t=e,(!P||4096&n&&i!==(i=t[12].displayName)&&r.value!==i)&&(r.value=i),(!P||4096&n&&l!==(l=t[12].email)&&c.value!==l)&&(c.value=l),O===(O=R(t))&&B?B.p(t,n):(B.d(1),B=O(t),B&&(B.c(),B.m(s,null))),1&n&&v.value!==t[0]&&M(v,t[0]);const o={};4096&n&&(o.path=`users/${t[12].uid}`),24576&n&&(o.$$scope={dirty:n,ctx:t}),U.$set(o)},i(t){P||(lt(U.$$.fragment,t),P=!0)},o(t){ht(U.$$.fragment,t),P=!1},d(t){t&&_(e),t&&_(a),t&&_(s),B.d(),t&&_(p),t&&_(m),t&&_(I),t&&_(C),t&&_(N),vt(U,t),o(L)}}}function Tu(t){let e;const n=new me({props:{$$slots:{default:[Eu,({user:t})=>({12:t}),({user:t})=>t?4096:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};20481&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Su(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=T("div"),n=T("div"),r=T("p"),i=S(t[2]),o=x(),a=T("p"),s=T("button"),s.textContent="Ок",A(r,"class","text-center"),A(s,"class","btn-orange"),A(a,"class","mt-2 text-center"),A(n,"class","p-3 border bg-white rounded-lg shadow-lg"),A(e,"id","alertBox"),A(e,"class"," fixed top-0")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=k(s,"click",t[11])},p(t,e){(!c||4&e)&&N(i,t[2])},i(t){c||(X(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function xu(t){let e,n,r,i;const o=new Qt({props:{firebase:Lt,$$slots:{default:[Tu]},$$scope:{ctx:t}}});let a=t[1]&&Su(t);return{c(){e=T("div"),mt(o.$$.fragment),n=x(),a&&a.c(),r=I(),A(e,"class","p-2")},m(t,s){w(t,e,s),gt(o,e,null),w(t,n,s),a&&a.m(t,s),w(t,r,s),i=!0},p(t,[e]){const n={};16385&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),t[1]?a?(a.p(t,e),lt(a,1)):(a=Su(t),a.c(),lt(a,1),a.m(r.parentNode,r)):a&&(ut(),ht(a,1,1,()=>{a=null}),ct())},i(t){i||(lt(o.$$.fragment,t),lt(a),i=!0)},o(t){ht(o.$$.fragment,t),ht(a),i=!1},d(t){t&&_(e),vt(o),t&&_(n),a&&a.d(t),t&&_(r)}}}function Iu(t,e,n){let r,i,o,a;function s(t){Lt.auth().currentUser.updateEmail(t).then((function(){u("Эл. почта обновлена, нажмите кнопку подтвердить.")})).catch((function(t){u("Сессия устарела, перезайдите в аккаунт и повторите попытку.")}))}function u(t){o||(n(2,a=t),n(1,o=!0)),setTimeout(()=>{n(1,o=!1)},5e3)}Lt.auth().onAuthStateChanged((function(t){t&&(r=t)}));return[i,o,a,s,function(){Lt.auth().currentUser.updatePassword(i).then((function(){u("Пароль обновлен.")})).catch((function(t){u("Сессия устарела, перезайдите в аккаунт и повторите попытку.")}))},u,r,(t,e)=>t.updateProfile({displayName:e.target.value}).then(console.log("updated")),t=>s(t.target.value),t=>t.sendEmailVerification().then(u("Письмо отправлено, проверьте почту.")),function(){i=this.value,n(0,i)},()=>n(1,o=!1)]}class ku extends wt{constructor(t){super(),bt(this,t,Iu,xu,s,{})}}function Au(t){let e,n,r,i,s,u,c,l,h,f,d,p,m,g,v,y,E,S,I,C;return{c(){e=T("div"),n=T("h1"),n.textContent="Регистрация водителя такси",r=x(),i=T("p"),i.textContent="Заполните анкету",s=x(),u=T("div"),c=T("input"),l=x(),h=T("input"),f=x(),d=T("input"),p=x(),m=T("input"),g=x(),v=T("input"),y=x(),E=T("input"),S=x(),I=T("button"),I.textContent="Начать регистрацию",A(n,"class","svelte-1fqymuk"),A(i,"class","svelte-1fqymuk"),A(c,"type","text"),A(c,"placeholder","Имя"),A(c,"class","svelte-1fqymuk"),A(h,"type","text"),A(h,"placeholder","Фамилия"),A(h,"class","svelte-1fqymuk"),A(d,"type","text"),A(d,"placeholder","Отчество"),A(d,"class","svelte-1fqymuk"),A(m,"type","text"),A(m,"placeholder","Номер телефона"),A(m,"class","svelte-1fqymuk"),A(v,"type","text"),A(v,"placeholder","Марка автомобиля"),A(v,"class","svelte-1fqymuk"),A(E,"type","text"),A(E,"placeholder","Гос. номер"),A(E,"class","svelte-1fqymuk"),A(I,"class","btn bg-orange-500 block mt-2 svelte-1fqymuk"),A(u,"class","taxi-driver-registration svelte-1fqymuk"),A(e,"slot","fallback"),A(e,"class","profile-card svelte-1fqymuk")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(e,s),b(e,u),b(u,c),M(c,t[0].name),b(u,l),b(u,h),M(h,t[0].secondName),b(u,f),b(u,d),M(d,t[0].lastName),b(u,p),b(u,m),M(m,t[0].phone),b(u,g),b(u,v),M(v,t[0].carBrand),b(u,y),b(u,E),M(E,t[0].carNumber),b(u,S),b(u,I),C=[k(c,"input",t[5]),k(h,"input",t[6]),k(d,"input",t[7]),k(m,"input",t[8]),k(v,"input",t[9]),k(E,"input",t[10]),k(I,"click",(function(){a(t[1](t[15].uid))&&t[1](t[15].uid).apply(this,arguments)}))]},p(e,n){t=e,1&n&&c.value!==t[0].name&&M(c,t[0].name),1&n&&h.value!==t[0].secondName&&M(h,t[0].secondName),1&n&&d.value!==t[0].lastName&&M(d,t[0].lastName),1&n&&m.value!==t[0].phone&&M(m,t[0].phone),1&n&&v.value!==t[0].carBrand&&M(v,t[0].carBrand),1&n&&E.value!==t[0].carNumber&&M(E,t[0].carNumber)},d(t){t&&_(e),o(C)}}}function Cu(t){let e,n,r,i;function o(...e){return t[11](t[15],...e)}return{c(){e=T("label"),e.innerHTML='<p class="mt-3 text-sm">Лицевая сторона</p> \n                            <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1fqymuk">',n=x(),r=T("input"),A(e,"for","driver-license-frontside"),A(r,"type","file"),A(r,"id","driver-license-frontside"),A(r,"name","file"),A(r,"class","svelte-1fqymuk")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Nu(t){let e,n;return{c(){e=T("img"),A(e,"class","img-up svelte-1fqymuk"),e.src!==(n=t[16].driverLicense.frontside)&&A(e,"src",n),A(e,"alt","driverLicense")},m(t,n){w(t,e,n)},p(t,r){65536&r&&e.src!==(n=t[16].driverLicense.frontside)&&A(e,"src",n)},d(t){t&&_(e)}}}function Mu(t){let e,n,r,i;function o(...e){return t[12](t[15],...e)}return{c(){e=T("label"),e.innerHTML='<p class="mt-3 text-sm">Обратная сторона</p> \n                            <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1fqymuk">',n=x(),r=T("input"),A(e,"for","driver-license-reverseside"),A(r,"type","file"),A(r,"id","driver-license-reverseside"),A(r,"name","file"),A(r,"class","svelte-1fqymuk")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Pu(t){let e,n;return{c(){e=T("img"),A(e,"class","img-up svelte-1fqymuk"),e.src!==(n=t[16].driverLicense.reverseside)&&A(e,"src",n),A(e,"alt","driverLicense")},m(t,n){w(t,e,n)},p(t,r){65536&r&&e.src!==(n=t[16].driverLicense.reverseside)&&A(e,"src",n)},d(t){t&&_(e)}}}function Lu(t){let e,n,r,i;function o(...e){return t[13](t[15],...e)}return{c(){e=T("label"),e.innerHTML='<p class="mt-3 text-sm">Фронтальная сторона с гос. номером</p> \n                            <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1fqymuk">',n=x(),r=T("input"),A(e,"for","driver-auto-frontside"),A(r,"type","file"),A(r,"id","driver-auto-frontside"),A(r,"name","file"),A(r,"class","svelte-1fqymuk")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Du(t){let e,n;return{c(){e=T("img"),A(e,"class","img-up svelte-1fqymuk"),e.src!==(n=t[16].driverAuto.frontside)&&A(e,"src",n),A(e,"alt","driverAuto")},m(t,n){w(t,e,n)},p(t,r){65536&r&&e.src!==(n=t[16].driverAuto.frontside)&&A(e,"src",n)},d(t){t&&_(e)}}}function Ru(t){let e,n,r,i;function o(...e){return t[14](t[15],...e)}return{c(){e=T("label"),e.innerHTML='<p class="mt-3 text-sm">Фото с боковой стороны (любой)</p> \n                            <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1fqymuk">',n=x(),r=T("input"),A(e,"for","driver-auto-reverseside"),A(r,"type","file"),A(r,"id","driver-auto-reverseside"),A(r,"name","file"),A(r,"class","svelte-1fqymuk")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Ou(t){let e,n;return{c(){e=T("img"),A(e,"class","img-up svelte-1fqymuk"),e.src!==(n=t[16].driverAuto.reverseside)&&A(e,"src",n),A(e,"alt","driverAuto")},m(t,n){w(t,e,n)},p(t,r){65536&r&&e.src!==(n=t[16].driverAuto.reverseside)&&A(e,"src",n)},d(t){t&&_(e)}}}function Bu(t){let e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,k,C,M,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K=t[16].secondName+"",Z=t[16].name+"",Q=t[16].lastName+"",Y=t[16].phone+"",J=t[16].carBrand+"",X=t[16].carNumber+"",tt=t[16].rating+"";function et(t,e){return null!=t[16].driverLicense&&null!=t[16].driverLicense.frontside?Nu:Cu}let nt=et(t),rt=nt(t);function it(t,e){return null!=t[16].driverLicense&&null!=t[16].driverLicense.reverseside?Pu:Mu}let ot=it(t),at=ot(t);function st(t,e){return null!=t[16].driverAuto&&null!=t[16].driverAuto.frontside?Du:Lu}let ut=st(t),ct=ut(t);function lt(t,e){return null!=t[16].driverAuto&&null!=t[16].driverAuto.reverseside?Ou:Ru}let ht=lt(t),ft=ht(t);return{c(){e=x(),n=T("div"),r=T("p"),r.textContent="Данные водителя такси",i=x(),o=T("p"),a=S("Ф.И.О.: "),s=S(K),u=x(),c=S(Z),l=x(),h=S(Q),f=x(),d=T("p"),p=S("Номер телефона: "),m=S(Y),g=x(),v=T("p"),y=S("Марка и номер автомобиля: "),E=S(J),I=x(),k=S(X),C=x(),M=T("p"),P=S("Рейтинг: "),L=S(tt),D=x(),R=T("br"),O=x(),B=T("p"),B.textContent="Фото водительского удостоверения:",U=x(),F=T("div"),rt.c(),j=x(),q=T("div"),at.c(),V=x(),$=T("p"),$.textContent="Фото автомобиля:",z=x(),H=T("div"),ct.c(),G=x(),W=T("div"),ft.c(),A(r,"class","mt-2 font-semibold text-center svelte-1fqymuk"),A(o,"class","mt-3 svelte-1fqymuk"),A(d,"class","svelte-1fqymuk"),A(v,"class","svelte-1fqymuk"),A(M,"class","svelte-1fqymuk"),A(B,"class","font-semibold text-center svelte-1fqymuk"),A(F,"class","image-upload svelte-1fqymuk"),A(q,"class","image-upload svelte-1fqymuk"),A($,"class","mt-2 font-semibold text-center svelte-1fqymuk"),A(H,"class","image-upload svelte-1fqymuk"),A(W,"class","image-upload svelte-1fqymuk"),A(n,"class","profile-card svelte-1fqymuk")},m(t,_){w(t,e,_),w(t,n,_),b(n,r),b(n,i),b(n,o),b(o,a),b(o,s),b(o,u),b(o,c),b(o,l),b(o,h),b(n,f),b(n,d),b(d,p),b(d,m),b(n,g),b(n,v),b(v,y),b(v,E),b(v,I),b(v,k),b(n,C),b(n,M),b(M,P),b(M,L),b(n,D),b(n,R),b(n,O),b(n,B),b(n,U),b(n,F),rt.m(F,null),b(n,j),b(n,q),at.m(q,null),b(n,V),b(n,$),b(n,z),b(n,H),ct.m(H,null),b(n,G),b(n,W),ft.m(W,null)},p(t,e){65536&e&&K!==(K=t[16].secondName+"")&&N(s,K),65536&e&&Z!==(Z=t[16].name+"")&&N(c,Z),65536&e&&Q!==(Q=t[16].lastName+"")&&N(h,Q),65536&e&&Y!==(Y=t[16].phone+"")&&N(m,Y),65536&e&&J!==(J=t[16].carBrand+"")&&N(E,J),65536&e&&X!==(X=t[16].carNumber+"")&&N(k,X),65536&e&&tt!==(tt=t[16].rating+"")&&N(L,tt),nt===(nt=et(t))&&rt?rt.p(t,e):(rt.d(1),rt=nt(t),rt&&(rt.c(),rt.m(F,null))),ot===(ot=it(t))&&at?at.p(t,e):(at.d(1),at=ot(t),at&&(at.c(),at.m(q,null))),ut===(ut=st(t))&&ct?ct.p(t,e):(ct.d(1),ct=ut(t),ct&&(ct.c(),ct.m(H,null))),ht===(ht=lt(t))&&ft?ft.p(t,e):(ft.d(1),ft=ht(t),ft&&(ft.c(),ft.m(W,null)))},d(t){t&&_(e),t&&_(n),rt.d(),at.d(),ct.d(),ft.d()}}}function Uu(t){let e;return{c(){e=T("div"),e.innerHTML="<p>Для просмотра страницы необходима авторизация</p>",A(e,"slot","signed-out")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Fu(t){let e,n;const r=new Re({props:{path:`taxiDrivers/${t[15].uid}`,$$slots:{default:[Bu,({data:t,ref:e})=>({16:t,17:e}),({data:t,ref:e})=>(t?65536:0)|(e?131072:0)],fallback:[Au,({data:t,ref:e})=>({16:t,17:e}),({data:t,ref:e})=>(t?65536:0)|(e?131072:0)]},$$scope:{ctx:t}}});return{c(){mt(r.$$.fragment),e=x()},m(t,i){gt(r,t,i),w(t,e,i),n=!0},p(t,e){const n={};32768&e&&(n.path=`taxiDrivers/${t[15].uid}`),360449&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){vt(r,t),t&&_(e)}}}function ju(t){let e;const n=new me({props:{$$slots:{default:[Fu,({user:t})=>({15:t}),({user:t})=>t?32768:0],"signed-out":[Uu,({user:t})=>({15:t}),({user:t})=>t?32768:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};294913&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function qu(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[ju]},$$scope:{ctx:t}}});return{c(){e=T("div"),mt(r.$$.fragment),A(e,"class","p-2 bg-gray-100")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,[e]){const n={};262145&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function Vu(t,e,n){let r=Gt.ref(),i={registered:Lt.firestore.FieldValue.serverTimestamp(),rating:5};function o(t,e){let n;t.stopPropagation(),t.preventDefault(),"driver-license-frontside"==t.target.id&&(n="driverLicense.frontside"),"driver-license-reverseside"==t.target.id&&(n="driverLicense.reverseside");let i=t.target.files[0],o={contentType:i.type};r.child(`users/${e}/taxiDriver/driverLicense/${i.name}`).put(i,o).then((function(t){console.log("Uploaded",t.totalBytes,"bytes."),console.log("File metadata:",t.metadata),t.ref.getDownloadURL().then((function(t){console.log("File available at",t),Ht.collection("taxiDrivers").doc(e).update({[n]:t}).then((function(){console.log("Document successfully updated!")})).catch((function(t){console.error("Error updating document: ",t)}))}))})).catch((function(t){console.error("Upload failed:",t)}))}function a(t,e){let n;t.stopPropagation(),t.preventDefault(),"driver-auto-frontside"==t.target.id&&(n="driverAuto.frontside"),"driver-auto-reverseside"==t.target.id&&(n="driverAuto.reverseside");let i=t.target.files[0],o={contentType:i.type};r.child(`users/${e}/taxiDriver/driverAuto/${i.name}`).put(i,o).then((function(t){console.log("Uploaded",t.totalBytes,"bytes."),console.log("File metadata:",t.metadata),t.ref.getDownloadURL().then((function(t){console.log("File available at",t),Ht.collection("taxiDrivers").doc(e).update({[n]:t}).then((function(){console.log("Document successfully updated!")})).catch((function(t){console.error("Error updating document: ",t)}))}))})).catch((function(t){console.error("Upload failed:",t)}))}return[i,function(t){Ht.collection("taxiDrivers").doc(t).set(i).then((function(){console.log("Document successfully written!")})).catch((function(t){console.error("Error writing document: ",t)}))},o,a,r,function(){i.name=this.value,n(0,i)},function(){i.secondName=this.value,n(0,i)},function(){i.lastName=this.value,n(0,i)},function(){i.phone=this.value,n(0,i)},function(){i.carBrand=this.value,n(0,i)},function(){i.carNumber=this.value,n(0,i)},(t,e)=>o(e,t.uid),(t,e)=>o(e,t.uid),(t,e)=>a(e,t.uid),(t,e)=>a(e,t.uid)]}class $u extends wt{constructor(t){super(),bt(this,t,Vu,qu,s,{})}}function zu(t,e,n){const r=t.slice();return r[29]=e[n],r}function Hu(e){let n,r,i;return{c(){n=T("p"),r=T("button"),r.textContent="Добавить",A(r,"class","btn-green")},m(t,o){w(t,n,o),b(n,r),i=k(r,"click",e[18])},p:t,d(t){t&&_(n),i()}}}function Gu(t){let e,n,r,i,o=t[28],a=[];for(let e=0;e<o.length;e+=1)a[e]=Wu(zu(t,o,e));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=x(),n=T("p"),r=T("button"),r.textContent="Добавить",A(r,"class","btn-green"),A(n,"class","mt-3 text-center")},m(o,s){for(let t=0;t<a.length;t+=1)a[t].m(o,s);w(o,e,s),w(o,n,s),b(n,r),i=k(r,"click",t[17])},p(t,n){if(268435456&n[0]){let r;for(o=t[28],r=0;r<o.length;r+=1){const i=zu(t,o,r);a[r]?a[r].p(i,n):(a[r]=Wu(i),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}},d(t){E(a,t),t&&_(e),t&&_(n),i()}}}function Wu(t){let e,n,r,i,o,a,s,u,c,l,h,f,d=t[29].model+"";function p(...e){return t[16](t[29],...e)}return{c(){e=T("div"),n=T("div"),r=T("img"),o=x(),a=T("div"),s=T("span"),u=S(d),c=x(),l=T("div"),h=T("button"),h.textContent="Удалить",r.src!==(i=t[29].imgURL)&&A(r,"src",i),A(r,"alt","foto"),A(r,"class","w-20 h-20"),A(n,"class",""),A(s,"class"," text-teal-500"),A(h,"class","btn-orange"),A(e,"class","flex flex-row bg-white rounded-lg justify-between items-center overflow-hidden")},m(t,i){w(t,e,i),b(e,n),b(n,r),b(e,o),b(e,a),b(a,s),b(s,u),b(e,c),b(e,l),b(l,h),f=k(h,"click",p)},p(e,n){t=e,268435456&n[0]&&r.src!==(i=t[29].imgURL)&&A(r,"src",i),268435456&n[0]&&d!==(d=t[29].model+"")&&N(u,d)},d(t){t&&_(e),f()}}}function Ku(t){let e;return{c(){e=T("span"),e.textContent="Не удалось загрузить...",A(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Zu(t){let e;function n(t,e){return t[28].length>0?Gu:Hu}let r=n(t),i=r(t);return{c(){i.c(),e=x()},m(t,n){i.m(t,n),w(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&_(e)}}}function Qu(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,C,N,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,ft=!1,dt="Другое"===t[1]&&Yu(t);function pt(){ft=!0,t[23].call(nt)}function mt(t,e){return null!=t[3]?Xu:Ju}let gt=mt(t),vt=gt(t);return{c(){e=T("div"),n=T("div"),n.innerHTML='<p class=" text-teal-500 text-center font-semibold">\n                        Регистрация спецтехники\n                    </p>',r=x(),i=T("div"),a=S("Вид спецтехники:\r\n                    "),s=T("select"),u=T("option"),c=T("option"),c.textContent="Строительная",l=T("option"),l.textContent="Дорожная",h=T("option"),h.textContent="Транспортная",f=T("option"),f.textContent="Коммунальная",d=T("option"),d.textContent="Грузовая",p=T("option"),p.textContent="Сельхозтехника",m=T("option"),m.textContent="Автоспецтехника",g=T("option"),g.textContent="Лесная",v=T("option"),v.textContent="Карьерная",y=T("option"),y.textContent="Производственная",E=x(),I=T("div"),C=S("Тип спецтехники:\r\n                    "),N=T("select"),L=T("option"),D=T("option"),D.textContent="Экскаватор",R=T("option"),R.textContent="Бульдозер",O=T("option"),O.textContent="Трактор",B=T("option"),B.textContent="Грейдер",U=T("option"),U.textContent="Самосвал",F=T("option"),F.textContent="Бетономешалка",j=T("option"),j.textContent="Бурильная техника",q=T("option"),q.textContent="Каток",V=T("option"),V.textContent="Ассенизатор",$=T("option"),$.textContent="Автокран",z=T("option"),z.textContent="Маннипулятор",H=T("option"),H.textContent="Автоподъемник",G=T("option"),G.textContent="Погрузчик",W=T("option"),W.textContent="Эвакуатор",K=T("option"),K.textContent="Другое",Z=x(),dt&&dt.c(),Q=x(),Y=T("div"),J=T("input"),tt=x(),et=T("div"),nt=T("input"),rt=x(),it=T("div"),ot=T("input"),at=x(),st=T("div"),vt.c(),ut=x(),ct=T("div"),lt=T("button"),lt.textContent="Зарегистрировать",u.__value="",u.value=u.__value,c.__value="Строительная",c.value=c.__value,l.__value="Дорожная",l.value=l.__value,h.__value="Транспортная",h.value=h.__value,f.__value="Коммунальная",f.value=f.__value,d.__value="Грузовая",d.value=d.__value,p.__value="Сельхозтехника",p.value=p.__value,m.__value="Автоспецтехника",m.value=m.__value,g.__value="Лесная",g.value=g.__value,v.__value="Карьерная",v.value=v.__value,y.__value="Производственная",y.value=y.__value,void 0===t[2]&&X(()=>t[19].call(s)),A(i,"class","mt-2"),L.__value="",L.value=L.__value,D.__value="Экскаватор",D.value=D.__value,R.__value="Бульдозер",R.value=R.__value,O.__value="Трактор",O.value=O.__value,B.__value="Грейдер",B.value=B.__value,U.__value="Самосвал",U.value=U.__value,F.__value="Бетономешалка",F.value=F.__value,j.__value="Бурильная",j.value=j.__value,q.__value="Каток",q.value=q.__value,V.__value="Ассенизатор",V.value=V.__value,$.__value="Автокран",$.value=$.__value,z.__value="Маннипулятор",z.value=z.__value,H.__value="Автоподъемник",H.value=H.__value,G.__value="Погрузчик",G.value=G.__value,W.__value="Эвакуатор",W.value=W.__value,K.__value="Другое",K.value=K.__value,void 0===t[1]&&X(()=>t[20].call(N)),A(J,"type","text"),A(J,"placeholder","Модель"),A(J,"class","inputs svelte-z2itl3"),A(nt,"type","number"),A(nt,"placeholder","Стоимость аренды в час"),A(nt,"class","inputs svelte-z2itl3"),A(ot,"type","text"),A(ot,"placeholder","Номер телефона +7"),A(ot,"class","inputs svelte-z2itl3"),A(st,"class","image-upload svelte-z2itl3"),A(lt,"class","btn-orange"),A(ct,"class","mt-2 text-center"),A(e,"class","mt-2 p-1 bg-white rounded-lg")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(i,s),b(s,u),b(s,c),b(s,l),b(s,h),b(s,f),b(s,d),b(s,p),b(s,m),b(s,g),b(s,v),b(s,y),P(s,t[2]),b(e,E),b(e,I),b(I,C),b(I,N),b(N,L),b(N,D),b(N,R),b(N,O),b(N,B),b(N,U),b(N,F),b(N,j),b(N,q),b(N,V),b(N,$),b(N,z),b(N,H),b(N,G),b(N,W),b(N,K),P(N,t[1]),b(e,Z),dt&&dt.m(e,null),b(e,Q),b(e,Y),b(Y,J),M(J,t[0]),b(e,tt),b(e,et),b(et,nt),M(nt,t[5]),b(e,rt),b(e,it),b(it,ot),M(ot,t[6]),b(e,at),b(e,st),vt.m(st,null),b(e,ut),b(e,ct),b(ct,lt),ht=[k(s,"change",t[19]),k(N,"change",t[20]),k(J,"input",t[22]),k(nt,"input",pt),k(ot,"input",t[24]),k(lt,"click",t[11])]},p(t,n){4&n[0]&&P(s,t[2]),2&n[0]&&P(N,t[1]),"Другое"===t[1]?dt?dt.p(t,n):(dt=Yu(t),dt.c(),dt.m(e,Q)):dt&&(dt.d(1),dt=null),1&n[0]&&J.value!==t[0]&&M(J,t[0]),!ft&&32&n[0]&&M(nt,t[5]),ft=!1,64&n[0]&&ot.value!==t[6]&&M(ot,t[6]),gt===(gt=mt(t))&&vt?vt.p(t,n):(vt.d(1),vt=gt(t),vt&&(vt.c(),vt.m(st,null)))},d(t){t&&_(e),dt&&dt.d(),vt.d(),o(ht)}}}function Yu(t){let e,n,r;return{c(){e=T("div"),n=T("input"),A(n,"type","text"),A(n,"placeholder","Тип спецтехники")},m(i,o){w(i,e,o),b(e,n),M(n,t[4]),r=k(n,"input",t[21])},p(t,e){16&e[0]&&n.value!==t[4]&&M(n,t[4])},d(t){t&&_(e),r()}}}function Ju(t){let e,n,r,i;function o(...e){return t[25](t[27],...e)}return{c(){e=T("label"),e.innerHTML='<p class="mt-3 text-sm text-teal-500">\n                            Сфотографируйте, а затем загрузите фото спецтехники\n                        </p> \n\n                        <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-z2itl3">',n=x(),r=T("input"),A(e,"for","carImage"),A(r,"type","file"),A(r,"id","carImage"),A(r,"name","file"),A(r,"class","svelte-z2itl3")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=k(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Xu(t){let e,n;return{c(){e=T("img"),A(e,"class","img-up svelte-z2itl3"),e.src!==(n=t[3])&&A(e,"src",n),A(e,"alt","carImage")},m(t,n){w(t,e,n)},p(t,r){8&r[0]&&e.src!==(n=t[3])&&A(e,"src",n)},d(t){t&&_(e)}}}function tc(t){let e,n,r,i,o,a;const s=new Ye({props:{path:"rentalCars",query:function(...e){return t[15](t[27],...e)},$$slots:{default:[Zu,({data:t})=>({28:t}),({data:t})=>[t?268435456:0]],fallback:[Ku,({data:t})=>({28:t}),({data:t})=>[t?268435456:0]]},$$scope:{ctx:t}}});let u=t[9]&&Qu(t);return{c(){e=T("div"),e.innerHTML='<p class=" text-teal-500 text-center font-semibold">\n                    Аренда и услуги спецтехники\n                </p>',n=x(),r=T("div"),mt(s.$$.fragment),i=x(),u&&u.c(),o=I(),A(r,"class","mt-3")},m(t,c){w(t,e,c),w(t,n,c),w(t,r,c),gt(s,r,null),w(t,i,c),u&&u.m(t,c),w(t,o,c),a=!0},p(e,n){t=e;const r={};268435968&n[0]|2&n[1]&&(r.$$scope={dirty:n,ctx:t}),s.$set(r),t[9]?u?u.p(t,n):(u=Qu(t),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i(t){a||(lt(s.$$.fragment,t),a=!0)},o(t){ht(s.$$.fragment,t),a=!1},d(t){t&&_(e),t&&_(n),t&&_(r),vt(s),t&&_(i),u&&u.d(t),t&&_(o)}}}function ec(t){let e;const n=new me({props:{$$slots:{default:[tc,({user:t})=>({27:t}),({user:t})=>[t?134217728:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};639&e[0]|2&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function nc(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=T("div"),n=T("div"),r=T("p"),i=S(t[8]),o=x(),a=T("p"),s=T("button"),s.textContent="Ок",A(r,"class","text-center"),A(s,"class","btn-orange"),A(a,"class","mt-2 text-center"),A(n,"class","p-3 border bg-white rounded-lg shadow-lg"),A(e,"id","alertBox"),A(e,"class"," fixed top-0")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=k(s,"click",t[26])},p(t,e){(!c||256&e[0])&&N(i,t[8])},i(t){c||(X(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function rc(t){let e,n,r,i;const o=new Qt({props:{firebase:Lt,$$slots:{default:[ec]},$$scope:{ctx:t}}});let a=t[7]&&nc(t);return{c(){e=T("div"),mt(o.$$.fragment),n=x(),a&&a.c(),r=I(),A(e,"class","p-2 bg-gray-100")},m(t,s){w(t,e,s),gt(o,e,null),w(t,n,s),a&&a.m(t,s),w(t,r,s),i=!0},p(t,e){const n={};639&e[0]|2&e[1]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),t[7]?a?(a.p(t,e),lt(a,1)):(a=nc(t),a.c(),lt(a,1),a.m(r.parentNode,r)):a&&(ut(),ht(a,1,1,()=>{a=null}),ct())},i(t){i||(lt(o.$$.fragment,t),lt(a),i=!0)},o(t){ht(o.$$.fragment,t),ht(a),i=!1},d(t){t&&_(e),vt(o),t&&_(n),a&&a.d(t),t&&_(r)}}}function ic(t,e,n){let r,i,o,a,s,u,c,l,h,f=Gt.ref(),d="",p=!1;function m(t,e){t.stopPropagation(),t.preventDefault();let r=t.target.files[0],i={contentType:r.type};f.child(`users/${e}/rentalCar/${r.name}`).put(r,i).then((function(t){console.log("Uploaded",t.totalBytes,"bytes."),console.log("File metadata:",t.metadata),t.ref.getDownloadURL().then((function(t){console.log("File available at",t),n(3,s=t)}))})).catch((function(t){console.error("Upload failed:",t)}))}function g(t){l||(n(8,h=t),n(7,l=!0)),setTimeout(()=>{n(7,l=!1)},5e3)}Lt.auth().onAuthStateChanged((function(t){t&&(r=t)}));return[i,o,a,s,d,u,c,l,h,p,m,function(){if(a&&o&&i&&u&&c&&null!=s){let t={owner:r.uid,username:r.displayName,category:a,type:o,atype:d,model:i,price:u,phone:c,imgURL:s};Ht.collection("rentalCars").add(t).then((function(t){g("Спецтехника зарегистрирована.")})).catch((function(t){g(`Ошибка: ${t}`)}))}else g("Заполните все поля и загрузите фото спецтехники.")},r,f,g,(t,e)=>e.where("owner","==",t.uid),t=>t.ref.delete(),()=>n(9,p=!0),()=>n(9,p=!0),function(){a=D(this),n(2,a)},function(){o=D(this),n(1,o)},function(){d=this.value,n(4,d)},function(){i=this.value,n(0,i)},function(){u=C(this.value),n(5,u)},function(){c=this.value,n(6,c)},(t,e)=>m(e,t.uid),()=>n(7,l=!1)]}class oc extends wt{constructor(t){super(),bt(this,t,ic,rc,s,{},[-1,-1])}}function ac(t){let e;const n=new oc({});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function sc(t){let e;const n=new $u({});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function uc(t){let e;const n=new ku({});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function cc(t){let e,n,r,i,a,s,u,c,l,h,f,d,p;const m=[uc,sc,ac],g=[];function v(t,e){return"ProfileMain"===t[0]?0:"TaxiDriverReg"===t[0]?1:"RentalCar"===t[0]?2:-1}return~(h=v(t))&&(f=g[h]=m[h](t)),{c(){e=T("div"),n=T("div"),r=T("div"),r.textContent="Настройки профиля",i=x(),a=T("div"),a.textContent="Такси",s=x(),u=T("div"),u.textContent="Спецтехника",c=x(),l=T("div"),f&&f.c(),A(r,"class","tab svelte-qsfr0b"),A(a,"class","tab ml-1 svelte-qsfr0b"),A(u,"class","tab ml-1 svelte-qsfr0b"),A(n,"class"," flex flex-row"),A(l,"class","bg-white"),A(e,"class","mt-16 bg-gray-800")},m(o,f){w(o,e,f),b(e,n),b(n,r),b(n,i),b(n,a),b(n,s),b(n,u),b(e,c),b(e,l),~h&&g[h].m(l,null),d=!0,p=[k(r,"click",t[1]),k(a,"click",t[2]),k(u,"click",t[3])]},p(t,[e]){let n=h;h=v(t),h!==n&&(f&&(ut(),ht(g[n],1,1,()=>{g[n]=null}),ct()),~h?(f=g[h],f||(f=g[h]=m[h](t),f.c()),lt(f,1),f.m(l,null)):f=null)},i(t){d||(lt(f),d=!0)},o(t){ht(f),d=!1},d(t){t&&_(e),~h&&g[h].d(),o(p)}}}function lc(t,e,n){let r="ProfileMain";return[r,()=>n(0,r="ProfileMain"),()=>n(0,r="TaxiDriverReg"),()=>n(0,r="RentalCar")]}function hc(t,e,n){const r=t.slice();return r[16]=e[n],r}function fc(t){let e,n,r=t[13].rating+"";return{c(){e=T("span"),n=S(r),A(e,"class","text-orange-500 font-semibold")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[13].rating+"")&&N(n,r)},d(t){t&&_(e)}}}function dc(t){let e,n,r=t[13].rating+"";return{c(){e=T("span"),n=S(r),A(e,"class","text-green-500 font-semibold")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[13].rating+"")&&N(n,r)},d(t){t&&_(e)}}}function pc(t){let e,n,r=t[13].rating+"";return{c(){e=T("span"),n=S(r),A(e,"class","text-red-500 font-semibold")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[13].rating+"")&&N(n,r)},d(t){t&&_(e)}}}function mc(e){let n;return{c(){n=T("i"),n.textContent="нет отзывов"},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function gc(t){let e,n=t[15],r=[];for(let e=0;e<n.length;e+=1)r[e]=bc(hc(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=I()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(32768&i){let o;for(n=t[15],o=0;o<n.length;o+=1){const a=hc(t,n,o);r[o]?r[o].p(a,i):(r[o]=bc(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){E(r,t),t&&_(e)}}}function vc(e){let n;return{c(){n=T("i"),n.textContent="нет отзыва"},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function yc(t){let e,n=t[16].review+"";return{c(){e=S(n)},m(t,n){w(t,e,n)},p(t,r){32768&r&&n!==(n=t[16].review+"")&&N(e,n)},d(t){t&&_(e)}}}function bc(t){let e,n;function r(t,e){return null!=t[16].review?yc:vc}let i=r(t),o=i(t);return{c(){e=T("div"),o.c(),n=x(),A(e,"class","m-1 p-1 text-sm bg-gray-100 rounded-lg")},m(t,r){w(t,e,r),o.m(e,null),b(e,n)},p(t,a){i===(i=r(t))&&o?o.p(t,a):(o.d(1),o=i(t),o&&(o.c(),o.m(e,n)))},d(t){t&&_(e),o.d()}}}function wc(t){let e;return{c(){e=T("div"),e.textContent="Не удалось загрузить",A(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function _c(t){let e,n,r;function i(t,e){return t[15].length>=1?gc:mc}let o=i(t),a=o(t);return{c(){e=T("p"),e.textContent="Отзывы",n=x(),a.c(),r=x(),A(e,"class","text-lg text-center font-semibold")},m(t,i){w(t,e,i),w(t,n,i),a.m(t,i),w(t,r,i)},p(t,e){o===(o=i(t))&&a?a.p(t,e):(a.d(1),a=o(t),a&&(a.c(),a.m(r.parentNode,r)))},d(t){t&&_(e),t&&_(n),a.d(t),t&&_(r)}}}function Ec(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,C,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,tt,et,nt,rt,it,ot,at,st,ut,ct,ft,dt,pt,yt,bt,wt,_t,Et,Tt,St,xt,It,kt,At,Ct,Nt,Mt,Pt,Lt,Dt,Rt,Ot=t[13].name+"",Bt=t[13].lastName+"",Ut=!1;function Ft(t,e){return t[13].rating<3?pc:t[13].rating>4?dc:fc}let jt=Ft(t),qt=jt(t);function Vt(){Ut=!0,t[5].call(G)}function $t(...e){return t[11](t[12],...e)}const zt=new Ye({props:{path:t[14].collection("ratings"),$$slots:{default:[_c,({data:t})=>({15:t}),({data:t})=>t?32768:0],fallback:[wc,({data:t})=>({15:t}),({data:t})=>t?32768:0]},$$scope:{ctx:t}}});return{c(){e=T("div"),n=T("div"),r=T("img"),a=x(),s=T("div"),u=T("div"),c=T("span"),l=S(Ot),h=x(),f=S(Bt),d=x(),p=T("div"),m=T("img"),v=x(),qt.c(),y=x(),E=T("div"),I=T("p"),I.textContent="Предложить поездку",C=x(),L=T("div"),D=T("label"),D.textContent="Откуда:",R=x(),O=T("input"),B=x(),U=T("div"),F=T("label"),F.textContent="Куда:",j=x(),q=T("input"),V=x(),$=T("div"),z=T("label"),z.textContent="Цена в рублях:",H=x(),G=T("input"),W=x(),K=T("div"),Z=T("label"),Z.textContent="Способ оплаты:",Q=x(),Y=T("select"),J=T("option"),tt=T("option"),tt.textContent="Наличные",et=T("option"),et.textContent="Автокарта",nt=T("option"),nt.textContent="Сбербанк-онлайн",rt=T("option"),rt.textContent="Киви-кошелёк",it=x(),ot=T("div"),at=T("label"),at.textContent="Детское кресло:",st=x(),ut=T("input"),ct=x(),ft=T("div"),dt=T("label"),dt.textContent="Животное:",pt=x(),yt=T("input"),bt=x(),wt=T("div"),_t=T("label"),_t.textContent="Номер мобильного:",Et=x(),Tt=T("input"),St=x(),xt=T("div"),It=T("label"),It.textContent="Примечание:",kt=x(),At=T("input"),Ct=x(),Nt=T("div"),Mt=T("button"),Mt.textContent="Предложить",Pt=x(),Lt=T("div"),mt(zt.$$.fragment),r.src!==(i=t[13].driverAuto.frontside)&&A(r,"src",i),A(r,"alt","auto"),A(c,"class"," font-semibold"),m.src!==(g="./icons/star.svg")&&A(m,"src","./icons/star.svg"),A(m,"alt","rating"),A(m,"class"," inline-block w-6 h-6"),A(s,"class","mt-1 px-1 flex flex-row justify-between items-center content-center"),A(e,"class","p-2 rounded-lg shadow-md"),A(I,"class","my-1 text-lg text-center font-semibold text-gray-900"),A(O,"type","text"),A(L,"class","mt-3"),A(q,"type","text"),A(U,"class","mt-2"),A(G,"type","number"),A($,"class","mt-2"),J.__value="false",J.value=J.__value,tt.__value="Наличные",tt.value=tt.__value,et.__value="Автокарта",et.value=et.__value,nt.__value="Сбербанк-онлайн",nt.value=nt.__value,rt.__value="Киви-кошелёк",rt.value=rt.__value,void 0===t[1].paymentMethod&&X(()=>t[6].call(Y)),A(K,"class","mt-2"),A(ut,"type","checkbox"),A(ot,"class","mt-3"),A(yt,"type","checkbox"),A(ft,"class","mt-3"),A(Tt,"type","text"),A(Tt,"placeholder","+71234567890"),A(wt,"class","mt-2"),A(At,"type","text"),A(xt,"class","mt-2"),A(Mt,"class","btn-orange"),A(Nt,"class","mt-4 text-center"),A(E,"class","m-1 mt-1 p-2 rounded-lg border shadow-lg"),A(Lt,"class","m-1 mt-2 p-2 rounded-lg border shadow-lg")},m(i,o){w(i,e,o),b(e,n),b(n,r),b(e,a),b(e,s),b(s,u),b(u,c),b(c,l),b(c,h),b(c,f),b(s,d),b(s,p),b(p,m),b(p,v),qt.m(p,null),w(i,y,o),w(i,E,o),b(E,I),b(E,C),b(E,L),b(L,D),b(L,R),b(L,O),M(O,t[1].addressFrom),b(E,B),b(E,U),b(U,F),b(U,j),b(U,q),M(q,t[1].addressTo),b(E,V),b(E,$),b($,z),b($,H),b($,G),M(G,t[1].price),b(E,W),b(E,K),b(K,Z),b(K,Q),b(K,Y),b(Y,J),b(Y,tt),b(Y,et),b(Y,nt),b(Y,rt),P(Y,t[1].paymentMethod),b(E,it),b(E,ot),b(ot,at),b(ot,st),b(ot,ut),ut.checked=t[1].childSeat,b(E,ct),b(E,ft),b(ft,dt),b(ft,pt),b(ft,yt),yt.checked=t[1].animal,b(E,bt),b(E,wt),b(wt,_t),b(wt,Et),b(wt,Tt),M(Tt,t[1].phone),b(E,St),b(E,xt),b(xt,It),b(xt,kt),b(xt,At),M(At,t[1].desc),b(E,Ct),b(E,Nt),b(Nt,Mt),w(i,Pt,o),w(i,Lt,o),gt(zt,Lt,null),Dt=!0,Rt=[k(O,"input",t[3]),k(q,"input",t[4]),k(G,"input",Vt),k(Y,"change",t[6]),k(ut,"change",t[7]),k(yt,"change",t[8]),k(Tt,"input",t[9]),k(At,"input",t[10]),k(Mt,"click",$t)]},p(e,n){t=e,(!Dt||8192&n&&r.src!==(i=t[13].driverAuto.frontside))&&A(r,"src",i),(!Dt||8192&n)&&Ot!==(Ot=t[13].name+"")&&N(l,Ot),(!Dt||8192&n)&&Bt!==(Bt=t[13].lastName+"")&&N(f,Bt),jt===(jt=Ft(t))&&qt?qt.p(t,n):(qt.d(1),qt=jt(t),qt&&(qt.c(),qt.m(p,null))),2&n&&O.value!==t[1].addressFrom&&M(O,t[1].addressFrom),2&n&&q.value!==t[1].addressTo&&M(q,t[1].addressTo),!Ut&&2&n&&M(G,t[1].price),Ut=!1,2&n&&P(Y,t[1].paymentMethod),2&n&&(ut.checked=t[1].childSeat),2&n&&(yt.checked=t[1].animal),2&n&&Tt.value!==t[1].phone&&M(Tt,t[1].phone),2&n&&At.value!==t[1].desc&&M(At,t[1].desc);const o={};16384&n&&(o.path=t[14].collection("ratings")),557056&n&&(o.$$scope={dirty:n,ctx:t}),zt.$set(o)},i(t){Dt||(lt(zt.$$.fragment,t),Dt=!0)},o(t){ht(zt.$$.fragment,t),Dt=!1},d(t){t&&_(e),qt.d(),t&&_(y),t&&_(E),t&&_(Pt),t&&_(Lt),vt(zt),o(Rt)}}}function Tc(t){let e;const n=new Re({props:{path:`taxiDrivers/${t[0].id}`,$$slots:{default:[Ec,({data:t,ref:e})=>({13:t,14:e}),({data:t,ref:e})=>(t?8192:0)|(e?16384:0)]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.path=`taxiDrivers/${t[0].id}`),548866&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Sc(t){let e;const n=new me({props:{$$slots:{default:[Tc,({user:t})=>({12:t}),({user:t})=>t?4096:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};524291&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function xc(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[Sc]},$$scope:{ctx:t}}});return{c(){e=T("div"),mt(r.$$.fragment),A(e,"class","mt-16")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,[e]){const n={};524291&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function Ic(t,e,n){let{params:r={}}=e,i={date:Lt.firestore.FieldValue.serverTimestamp(),addressFrom:"",addressTo:"",childSeat:!1,animal:!1,phone:"+7",desc:"",price:0,paymentMethod:!1,active:!0};function o(t,e){Ht.collection(`taxiOrders/region/${region}/city/${city}`).add(i).then((function(t){console.log("Document written with ID: ",t.id),alert("Ваша заказ оформлен!")})).catch((function(t){console.error("Error adding document: ",t)}))}return t.$set=t=>{"params"in t&&n(0,r=t.params)},[r,i,o,function(){i.addressFrom=this.value,n(1,i)},function(){i.addressTo=this.value,n(1,i)},function(){i.price=C(this.value),n(1,i)},function(){i.paymentMethod=D(this),n(1,i)},function(){i.childSeat=this.checked,n(1,i)},function(){i.animal=this.checked,n(1,i)},function(){i.phone=this.value,n(1,i)},function(){i.desc=this.value,n(1,i)},t=>o(t.uid,t.displayName)]}function kc(t,e,n){const r=t.slice();return r[29]=e[n],r}function Ac(t){let e,n;return{c(){e=T("span"),e.textContent="удалить тему",A(e,"class"," float-right font-normal text-xs cursor-pointer text-teal-600")},m(r,i){w(r,e,i),n=k(e,"click",(function(){a(t[26].delete().then(t[15]))&&t[26].delete().then(t[15]).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),n()}}}function Cc(t){let e,n;return{c(){e=T("span"),n=S(t[1]),A(e,"class","mx-2")},m(t,r){w(t,e,r),b(e,n)},p(t,e){2&e[0]&&N(n,t[1])},d(t){t&&_(e)}}}function Nc(t){let e,n;return{c(){e=T("span"),n=S(t[1]),A(e,"class","mx-2 text-red-500")},m(t,r){w(t,e,r),b(e,n)},p(t,e){2&e[0]&&N(n,t[1])},d(t){t&&_(e)}}}function Mc(t){let e,n;return{c(){e=T("span"),n=S(t[1]),A(e,"class","mx-2 text-green-500")},m(t,r){w(t,e,r),b(e,n)},p(t,e){2&e[0]&&N(n,t[1])},d(t){t&&_(e)}}}function Pc(t){let e,n,r,i=t[29].date.toDate().toLocaleDateString("ru-RU",{day:"numeric",month:"long"})+"",o=t[29].date.toDate().toLocaleTimeString("ru-RU",{hour12:!1})+"";return{c(){e=S(i),n=x(),r=S(o)},m(t,i){w(t,e,i),w(t,n,i),w(t,r,i)},p(t,n){134217728&n[0]&&i!==(i=t[29].date.toDate().toLocaleDateString("ru-RU",{day:"numeric",month:"long"})+"")&&N(e,i),134217728&n[0]&&o!==(o=t[29].date.toDate().toLocaleTimeString("ru-RU",{hour12:!1})+"")&&N(r,o)},d(t){t&&_(e),t&&_(n),t&&_(r)}}}function Lc(t){let e,n,r,i,o,a,s,u,c,l,h,f,d=t[29].text+"",p=t[29].username+"",m=null!=t[29].date&&Pc(t);return{c(){e=T("div"),n=T("div"),r=S(d),i=x(),o=T("div"),a=T("div"),s=T("span"),u=S(p),c=x(),l=T("div"),h=T("span"),m&&m.c(),f=x(),A(s,"class","text-xs text-gray-700 font-semibold"),A(h,"class"," text-gray-700 text-xs"),A(o,"class","flex flex-row justify-between"),A(e,"class","my-2 p-1 bg-white rounded-lg shadow-md")},m(t,d){w(t,e,d),b(e,n),b(n,r),b(e,i),b(e,o),b(o,a),b(a,s),b(s,u),b(o,c),b(o,l),b(l,h),m&&m.m(h,null),b(e,f)},p(t,e){134217728&e[0]&&d!==(d=t[29].text+"")&&N(r,d),134217728&e[0]&&p!==(p=t[29].username+"")&&N(u,p),null!=t[29].date?m?m.p(t,e):(m=Pc(t),m.c(),m.m(h,null)):m&&(m.d(1),m=null)},d(t){t&&_(e),m&&m.d()}}}function Dc(t){let e,n,r=t[27].length<10&&Rc(t),i=10===t[27].length&&Oc(t);return{c(){e=T("div"),r&&r.c(),n=x(),i&&i.c(),A(e,"class","w-full text-center")},m(t,o){w(t,e,o),r&&r.m(e,null),b(e,n),i&&i.m(e,null)},p(t,o){t[27].length<10?r?r.p(t,o):(r=Rc(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),10===t[27].length?i?i.p(t,o):(i=Oc(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(t){t&&_(e),r&&r.d(),i&&i.d()}}}function Rc(t){let e,n;function r(...e){return t[19](t[28],...e)}return{c(){e=T("button"),e.innerHTML='<img src="./icons/expand_less.svg" alt="prev">',A(e,"class","mr-4 p-2 border rounded-full bg-white")},m(t,i){w(t,e,i),n=k(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function Oc(t){let e,n;function r(...e){return t[20](t[28],...e)}return{c(){e=T("button"),e.innerHTML='<img src="./icons/expand_more.svg" alt="next">',A(e,"class","mr-4 p-2 border rounded-full bg-white")},m(t,i){w(t,e,i),n=k(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function Bc(e){let n,r,i;return{c(){n=T("div"),r=T("button"),r.innerHTML='<img src="./icons/expand_less.svg" alt="prev">',A(r,"class","mr-4 p-2 border rounded-full bg-white"),A(n,"class","w-full text-center")},m(t,o){w(t,n,o),b(n,r),i=k(r,"click",e[21])},p:t,d(t){t&&_(n),i()}}}function Uc(t){let e;return{c(){e=T("span"),e.textContent="Не удалось загрузить",A(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Fc(t){let e,n,r,i,o=t[27],a=[];for(let e=0;e<o.length;e+=1)a[e]=Lc(kc(t,o,e));let s=0!=t[27].length&&Dc(t),u=0==t[27].length&&Bc(t);return{c(){e=T("div");for(let t=0;t<a.length;t+=1)a[t].c();n=x(),s&&s.c(),r=x(),u&&u.c(),i=x()},m(t,o){w(t,e,o);for(let t=0;t<a.length;t+=1)a[t].m(e,null);w(t,n,o),s&&s.m(t,o),w(t,r,o),u&&u.m(t,o),w(t,i,o)},p(t,n){if(134217728&n[0]){let r;for(o=t[27],r=0;r<o.length;r+=1){const i=kc(t,o,r);a[r]?a[r].p(i,n):(a[r]=Lc(i),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}0!=t[27].length?s?s.p(t,n):(s=Dc(t),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null),0==t[27].length?u?u.p(t,n):(u=Bc(t),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(t){t&&_(e),E(a,t),t&&_(n),s&&s.d(t),t&&_(r),u&&u.d(t),t&&_(i)}}}function jc(t){let e,n,r,i,a,s,u,c,l;return{c(){e=T("div"),n=T("div"),r=T("textarea"),i=x(),a=T("div"),s=T("button"),s.textContent="Закрыть",u=x(),c=T("button"),c.textContent="Отправить",A(r,"class","mx-auto p-1 w-full border rounded-lg shadow"),A(r,"placeholder","Сообщение"),A(s,"class","btn-gray"),A(c,"class","btn-orange"),A(a,"class"," text-center"),A(e,"class","fixed bottom-0 border bg-gray-100 rounded-lg w-full p-2")},m(o,h){w(o,e,h),b(e,n),b(n,r),M(r,t[2]),b(e,i),b(e,a),b(a,s),b(a,u),b(a,c),l=[k(r,"input",t[22]),k(s,"click",t[23]),k(c,"click",t[9])]},p(t,e){4&e[0]&&M(r,t[2])},d(t){t&&_(e),o(l)}}}function qc(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,C,M,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K,Z,Q,Y,J,X=t[25].header+"",tt=t[25].text+"",et=t[25].username+"",nt=t[25].date.toDate().toLocaleDateString("ru-RU",{day:"numeric",month:"long"})+"",rt=t[25].date.toDate().toLocaleTimeString("ru-RU",{hour12:!1})+"",it=t[25].owner===t[24].uid&&Ac(t);function ot(t,e){return t[1]>0?Mc:t[1]<0?Nc:Cc}let at=ot(t),st=at(t);const ut=new Ye({props:{path:t[26].collection("replies"),query:t[4],$$slots:{default:[Fc,({data:t,last:e})=>({27:t,28:e}),({data:t,last:e})=>[(t?134217728:0)|(e?268435456:0)]],fallback:[Uc,({data:t,last:e})=>({27:t,28:e}),({data:t,last:e})=>[(t?134217728:0)|(e?268435456:0)]]},$$scope:{ctx:t}}});let ct=t[3]&&jc(t);return{c(){e=T("div"),n=T("div"),r=T("p"),i=S(X),a=x(),it&&it.c(),s=x(),u=T("div"),c=T("p"),l=S(tt),h=x(),f=T("div"),d=T("div"),p=T("span"),m=S(et),g=x(),v=T("div"),y=T("div"),E=T("div"),C=T("img"),P=x(),L=T("div"),st.c(),D=x(),R=T("div"),O=T("img"),U=x(),F=T("div"),j=T("span"),q=S(nt),V=x(),$=S(rt),z=x(),H=T("div"),G=T("button"),G.textContent="Ответить",W=x(),K=T("div"),mt(ut.$$.fragment),Z=x(),ct&&ct.c(),Q=I(),A(r,"class"," text-lg font-semibold"),A(c,"class","text-justify leading-tight"),A(p,"class","text-xs text-gray-700 font-semibold"),A(C,"class"," cursor-pointer"),C.src!==(M="./icons/thumb_down_red.svg")&&A(C,"src","./icons/thumb_down_red.svg"),A(C,"alt","down"),A(O,"class"," cursor-pointer"),O.src!==(B="./icons/thumb_up_green.svg")&&A(O,"src","./icons/thumb_up_green.svg"),A(O,"alt","up"),A(y,"class","p-1 flex flex-row"),A(j,"class"," text-gray-700 text-xs"),A(f,"class","mt-2 flex flex-row justify-between"),A(G,"class","p-1 text-sm border bg-white text-green-600 rounded-md shadow-lg"),A(H,"class"," float-right"),A(e,"class","sticky top-0 mt-16 w-full p-2 bg-white rounded-lg shadow-md"),A(K,"class","mt-1 p-2")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(r,i),b(r,a),it&&it.m(r,null),b(e,s),b(e,u),b(u,c),b(c,l),b(e,h),b(e,f),b(f,d),b(d,p),b(p,m),b(f,g),b(f,v),b(v,y),b(y,E),b(E,C),b(y,P),b(y,L),st.m(L,null),b(y,D),b(y,R),b(R,O),b(f,U),b(f,F),b(F,j),b(j,q),b(j,V),b(j,$),b(e,z),b(e,H),b(H,G),w(o,W,_),w(o,K,_),gt(ut,K,null),w(o,Z,_),ct&&ct.m(o,_),w(o,Q,_),Y=!0,J=[k(C,"click",t[16]),k(O,"click",t[17]),k(G,"click",t[18])]},p(t,e){(!Y||33554432&e[0])&&X!==(X=t[25].header+"")&&N(i,X),t[25].owner===t[24].uid?it?it.p(t,e):(it=Ac(t),it.c(),it.m(r,null)):it&&(it.d(1),it=null),(!Y||33554432&e[0])&&tt!==(tt=t[25].text+"")&&N(l,tt),(!Y||33554432&e[0])&&et!==(et=t[25].username+"")&&N(m,et),at===(at=ot(t))&&st?st.p(t,e):(st.d(1),st=at(t),st&&(st.c(),st.m(L,null))),(!Y||33554432&e[0])&&nt!==(nt=t[25].date.toDate().toLocaleDateString("ru-RU",{day:"numeric",month:"long"})+"")&&N(q,nt),(!Y||33554432&e[0])&&rt!==(rt=t[25].date.toDate().toLocaleTimeString("ru-RU",{hour12:!1})+"")&&N($,rt);const n={};67108864&e[0]&&(n.path=t[26].collection("replies")),16&e[0]&&(n.query=t[4]),134217728&e[0]|2&e[1]&&(n.$$scope={dirty:e,ctx:t}),ut.$set(n),t[3]?ct?ct.p(t,e):(ct=jc(t),ct.c(),ct.m(Q.parentNode,Q)):ct&&(ct.d(1),ct=null)},i(t){Y||(lt(ut.$$.fragment,t),Y=!0)},o(t){ht(ut.$$.fragment,t),Y=!1},d(t){t&&_(e),it&&it.d(),st.d(),t&&_(W),t&&_(K),vt(ut),t&&_(Z),ct&&ct.d(t),t&&_(Q),o(J)}}}function Vc(t){let e;const n=new Re({props:{path:`topics/${t[0].id}`,$$slots:{default:[qc,({data:t,ref:e})=>({25:t,26:e}),({data:t,ref:e})=>[(t?33554432:0)|(e?67108864:0)]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1&e[0]&&(r.path=`topics/${t[0].id}`),117440542&e[0]|2&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function $c(t){let e;const n=new me({props:{$$slots:{default:[Vc,({user:t})=>({24:t}),({user:t})=>[t?16777216:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};16777247&e[0]|2&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function zc(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[$c]},$$scope:{ctx:t}}});return{c(){e=T("div"),mt(r.$$.fragment),A(e,"class","mt-16 h-full min-h-screen bg-gray-200")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};31&e[0]|2&e[1]&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function Hc(t,e,n){let r,{params:i={}}=e,o=Gt.ref();Lt.auth().onAuthStateChanged((function(t){t?r=t:console.log("no user login")}));let a=0,s=0,u="",c=!1,l=t=>t.orderBy("date","desc").limit(10);function h(t){n(4,l=e=>e.orderBy("date","desc").startAfter(t.date).limit(10))}function f(t){n(4,l=e=>e.orderBy("date","desc").endAt(t.date).limit(10))}function d(){n(4,l=t=>t.orderBy("date","desc").limit(10))}function p(){a=0,n(1,s=0),Ht.collection(`topics/${i.id}/votes`).get().then((function(t){t.forEach((function(t){const e=t.data();"up"===e.vote?(a++,n(1,s++,s)):"down"===e.vote&&(a++,n(1,s--,s))}))}))}function m(t){Ht.collection(`topics/${i.id}/votes`).where("owner","==",r.uid).get().then((function(e){if(e.empty)!function(t){Ht.collection(`topics/${i.id}/votes`).add({owner:r.uid,vote:t}).then(()=>{p(),console.log("voted")})}(t);else{let n=e.docs[0].ref.id;!function(e,n){console.log("update start"),Ht.collection(e).doc(n).update({vote:t}).then(()=>{p(),console.log("updated")})}(e.docs[0].ref.parent.path,n)}}))}p();return t.$set=t=>{"params"in t&&n(0,i=t.params)},[i,s,u,c,l,h,f,d,m,function(){Ht.collection(`topics/${i.id}/replies`).add({date:Lt.firestore.FieldValue.serverTimestamp(),owner:r.uid,username:r.displayName,text:u}).then((function(t){n(2,u=""),console.log("Document written with ID: ",t.id)})).catch((function(t){console.error("Error adding document: ",t)}))},r,a,o,void 0,p,()=>en("/"),()=>m("down"),()=>m("up"),()=>n(3,c=!0),t=>f(t),t=>h(t),()=>d(),function(){u=this.value,n(2,u)},()=>n(3,c=!1)]}function Gc(e){let n,r;return{c(){n=T("div"),n.innerHTML='<p class="svelte-1sewpn4">\n                Бизнес-ангелы - это независимые инвесторы, которые способны вложить в проект деньги еще на стадии идеи.\n            </p> \n            <p class="svelte-1sewpn4">\n                Avtokarta.club предлагает ангелам приобрести собственные токены \n                <a href="https://etherscan.io/token/0x943b8cc219a5fb3ba70adb173774987c63c3080b" class="svelte-1sewpn4">TAK</a> \n                стандарта  <a href="https://eips.ethereum.org/EIPS/eip-777" class="svelte-1sewpn4">ERC777</a> (новый стандарт токенов на блокчейне Ethereum).\n            </p> \n            <p class="svelte-1sewpn4">\n                1 токен ТАК = 1 российский рубль.\n            </p> \n            <p class="svelte-1sewpn4">\n                За каждый преобретённый токен ТАК, ангел получает ещё 2 токена. Всего будет продано 5 млн. токенов.\n            </p> \n            <p class="svelte-1sewpn4">\n                Возврат инвестиций. После открытии биржи токенов, ангелы первыми получают доступ к продажам токенов. \n                Спрос токенов обеспечат партнеры в регионах, которые хотят стать партнерами и пробрести франшизу платформы, \n                так как франшиза приобретается за токены. Следующими доступ к продажам токенов получают франчайзи, которые \n                обеспечат быстрый и выгодный обмен токенов в регонах для клиентов платформы. После окончания ICO доступ к бирже \n                будет открыт для всех.\n            </p> \n            <p class="svelte-1sewpn4">\n                Приобрести токены можно будет с 1 июня 2020 года на странице <a href="#/ico" class="svelte-1sewpn4">ICO</a>.\n            </p>'},m(t,e){w(t,n,e)},i(t){r||X(()=>{r=dt(n,cn,{duration:1e3}),r.start()})},o:t,d(t){t&&_(n)}}}function Wc(e){let n,r;return{c(){n=T("div"),n.innerHTML='<p class="svelte-1sewpn4">\n                Для партнеров, которые хотят иметь долю в перспективной платформе, Avtokarta.club предлагает \n                взаимовыгодную, понятную и простую схему сотрудничества - франшиза.\n            </p> \n            <p class="svelte-1sewpn4">\n                Партнер приобретающий франшизу\n                (далее франчайзи), единожды оплачивает паушальный взнос и выбирает город, который будет закрепллён за франчайзи.\n            </p> \n            <p class="svelte-1sewpn4">\n                Далее вся прибыль полученная от комисси такси, комиссии аренды спецтехники, премиум аккаунтов пользователей, \n                платных услуг для сервисов, рекламных блоков на карте данного города, включая его административные границы,\n                делится 50/50, пока будет существовать платформа. Больше никаких платежей, взносов и прочего.\n            </p>'},m(t,e){w(t,n,e)},i(t){r||X(()=>{r=dt(n,cn,{duration:1e3}),r.start()})},o:t,d(t){t&&_(n)}}}function Kc(t){let e,n,r;return{c(){e=T("div"),e.innerHTML='<p class="svelte-1sewpn4">\n                На SMM (social media marketing) в Avtokarta.club выделено 100 млн. токенов ТАК. За каждого нового пользователя,\n                зарегистрированного по вашему промокоду, Avtokarta.club переводит вам 100 токенов ТАК.\n            </p>'},m(t,n){w(t,e,n),r=!0},i(t){r||(X(()=>{n||(n=pt(e,cn,{duration:1e3},!0)),n.run(1)}),r=!0)},o(t){n||(n=pt(e,cn,{duration:1e3},!1)),n.run(0),r=!1},d(t){t&&_(e),t&&n&&n.end()}}}function Zc(t){let e;return{c(){e=T("div"),e.innerHTML='<p class="svelte-1sewpn4">\n            К концу 2020 года Avtokarta.club полностью перейдёт на децентрализованную систему взаимодействия между \n            пользователями, разработчиками и инвесторами. Таким образом, единственный способ воспользоваться всеми\n            преимуществами платформы, станет токен ТАК.\n            </p> \n            <p class="svelte-1sewpn4">\n            Все, пользователи платформы и держатели токена ТАК заинтересованы в его стабильности и ликвидности.\n            Для этого перед открытием биржи, все токены, за вычетом выделленных на маркетинг,\n            разработку и поддержку платформы, переводятся на специальный смарт-контракт, который не имеет владельца, \n            тем самым исключается возможность обмана со стороны разработчиков платформы.\n            </p> \n            <p class="svelte-1sewpn4">\n            Смарт-контракт позволит пользователям &quot;майнить&quot; токены ТАК. Например, держатель токена переводит токены\n            на смарт-контракт, если на счету контракта достаточно токенов, чтобы вернуть владельцу депозит плюс проценты,\n            тогда токены замораживаются контрактом на инвестиционный период, после истечения срока токены размораживаются\n            и становятся доступны для их владельца. Вот так просто и прозрачно &quot;майнятся&quot; токены ТАК.\n            Общее колличество токенов ТАК 21 трлн. \n            </p>'},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Qc(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,S=t[0]&&Gc(),I=t[1]&&Wc(),C=t[2]&&Kc(),N=t[3]&&Zc();return{c(){e=T("div"),n=T("div"),r=T("div"),r.innerHTML='<span class="headers svelte-1sewpn4">\n                АНГЕЛЫ ПРОЕКТА\n            </span> \n            <img src="./img/angel.jpg" alt="angel" class="svelte-1sewpn4">',i=x(),S&&S.c(),a=x(),s=T("div"),u=T("div"),u.innerHTML='<span class="headers svelte-1sewpn4">\n                ФРАНШИЗА\n            </span> \n            <img src="./img/map-pin.jpg" alt="map" class="svelte-1sewpn4">',c=x(),I&&I.c(),l=x(),h=T("div"),f=T("div"),f.innerHTML='<span class="headers svelte-1sewpn4">\n                SOCIAL MEDIA\n            </span> \n            <img src="./img/social-media.jpg" alt="sm" class="svelte-1sewpn4">',d=x(),C&&C.c(),p=x(),m=T("div"),g=T("div"),g.innerHTML='<span class="headers svelte-1sewpn4">\n                МАЙНИНГ\n            </span> \n            <img src="./img/blockchain-world.jpg" alt="angel" class="svelte-1sewpn4">',v=x(),N&&N.c(),A(r,"class","title svelte-1sewpn4"),A(u,"class","title svelte-1sewpn4"),A(f,"class","title svelte-1sewpn4"),A(g,"class","title svelte-1sewpn4"),A(m,"id","blockchain"),A(e,"class","mt-16")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(n,i),S&&S.m(n,null),b(e,a),b(e,s),b(s,u),b(s,c),I&&I.m(s,null),b(e,l),b(e,h),b(h,f),b(h,d),C&&C.m(h,null),b(e,p),b(e,m),b(m,g),b(m,v),N&&N.m(m,null),y=!0,E=[k(r,"click",t[5]),k(u,"click",t[6]),k(f,"click",t[7]),k(g,"click",t[8])]},p(t,[e]){t[0]?S?lt(S,1):(S=Gc(),S.c(),lt(S,1),S.m(n,null)):S&&(S.d(1),S=null),t[1]?I?lt(I,1):(I=Wc(),I.c(),lt(I,1),I.m(s,null)):I&&(I.d(1),I=null),t[2]?C?lt(C,1):(C=Kc(),C.c(),lt(C,1),C.m(h,null)):C&&(ut(),ht(C,1,1,()=>{C=null}),ct()),t[3]?N||(N=Zc(),N.c(),N.m(m,null)):N&&(N.d(1),N=null)},i(t){y||(lt(S),lt(I),lt(C),y=!0)},o(t){ht(C),y=!1},d(t){t&&_(e),S&&S.d(),I&&I.d(),C&&C.d(),N&&N.d(),o(E)}}}function Yc(t,e,n){let r=!1,i=!1,o=!1,a=!1;return[r,i,o,a,void 0,()=>n(0,r=!0),()=>n(1,i=!0),()=>n(2,o=!0),()=>n(3,a=!0)]}var Jc=[{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"_rate",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"userData",type:"bytes"},{indexed:!1,internalType:"bytes",name:"operatorData",type:"bytes"}],name:"TokReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"userData",type:"bytes"},{indexed:!1,internalType:"bytes",name:"operatorData",type:"bytes"}],name:"TokSent",type:"event"},{inputs:[],name:"TOKENS_SENDER_INTERFACE_HASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"interfaceHash",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"canImplementInterfaceForAddress",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rate",type:"uint256"}],name:"changeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getRate",outputs:[{internalType:"uint256",name:"crate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"rate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"senderFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"userData",type:"bytes"},{internalType:"bytes",name:"operatorData",type:"bytes"}],name:"tokensReceived",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"userData",type:"bytes"},{internalType:"bytes",name:"operatorData",type:"bytes"}],name:"tokensToSend",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function Xc(e){let n;return{c(){n=T("div"),n.innerHTML='<p>\n            Для покупки токенов установите расширение для браузера \n            <a class=" underline text-teal-500 font-semibold" href="https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn">\n            MetaMask\n            </a></p>',A(n,"class","mt-6 p-2")},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function tl(t){let e,n,r,i,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,C,P,L,D,R,O,B,U,F,j,q,V=Math.trunc(t[9])+"",$=!1;function z(){$=!0,t[32].call(C)}return{c(){e=T("div"),n=T("div"),r=T("div"),r.textContent="Ваш кошелёк:",i=x(),a=T("div"),s=S(t[8]),u=x(),c=T("div"),l=T("span"),l.textContent="Кол-во ТАК:",h=x(),f=S(V),d=x(),p=T("div"),m=T("button"),m.textContent="Добавить токены в кошелёк",g=x(),v=T("div"),y=T("div"),y.textContent="Купить токены",E=x(),I=T("div"),C=T("input"),P=x(),L=T("div"),D=T("span"),R=S("= "),O=S(t[2]),B=S(" Eth."),U=x(),F=T("div"),j=T("button"),j.textContent="Купить",A(r,"class"," font-medium"),A(l,"class"," font-medium"),A(n,"class"," text-sm"),A(m,"class","btn-green"),A(p,"class","mt-2 text-center"),A(y,"class"," text-lg font-semibold text-center text-orange-500"),A(C,"class"," border bg-gray-200"),A(C,"type","number"),A(C,"step","100"),A(C,"min","100"),A(C,"max",t[3]),A(I,"class","mt-2 text-center"),A(D,"class"," text-sm text-teal-500"),A(L,"class"," text-center"),A(j,"class","btn-orange"),A(F,"class","mt-2 text-center"),A(v,"class","mt-4"),A(e,"class","mt-3")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(n,i),b(n,a),b(a,s),b(n,u),b(n,c),b(c,l),b(c,h),b(c,f),b(e,d),b(e,p),b(p,m),b(e,g),b(e,v),b(v,y),b(v,E),b(v,I),b(I,C),M(C,t[1]),b(v,P),b(v,L),b(L,D),b(D,R),b(D,O),b(D,B),b(v,U),b(v,F),b(F,j),q=[k(m,"click",il),k(C,"input",z),k(j,"click",t[10])]},p(t,e){256&e[0]&&N(s,t[8]),512&e[0]&&V!==(V=Math.trunc(t[9])+"")&&N(f,V),8&e[0]&&A(C,"max",t[3]),!$&&2&e[0]&&M(C,t[1]),$=!1,4&e[0]&&N(O,t[2])},d(t){t&&_(e),o(q)}}}function el(e){let n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,E,I,k,C,M,P,L,D,R,O,B,U,F,j,q,V,$,z,H,G,W,K=Math.trunc(100*e[5])/100+"",Z=Math.trunc(e[6]*e[5]*100)/100+"",Q=Math.trunc(1e3-e[3])+"",Y=Math.trunc(e[3])+"";function J(t,e){return t[7]?tl:Xc}let X=J(e),tt=X(e);return{c(){n=T("div"),r=T("div"),i=T("div"),o=S("USD: \r\n            "),a=S(K),s=S(" руб.\r\n\r\n            \r\n            "),u=T("span"),u.innerHTML='<img src="./icons/help.svg" alt="help" class="w-4 h-4"> \n                <span class="svelte-1rtoxjc">\n                    Курс долара США от ЦБ РФ.\n                </span>',c=x(),l=T("div"),h=S("ETH: \r\n            "),f=S(e[6]),d=S(" USD\r\n            \r\n            "),p=T("span"),p.innerHTML='<img src="./icons/help.svg" alt="help" class="w-4 h-4"> \n                <span class="svelte-1rtoxjc">\n                    Курс эфириума от \n                    <a href="https://etherscan.io" class=" underline text-orange-500"> \n                    Etherscan \n                    </a></span>',m=x(),g=T("div"),v=S("ETH/RUB: \r\n            "),y=S(Z),E=S(" руб."),I=x(),k=T("div"),C=S("ETH/ТАК: "),M=S(e[4]),P=S(" TAK\r\n            \r\n            "),L=T("span"),L.innerHTML='<img src="./icons/help.svg" alt="help" class="w-4 h-4"> \n                <span class="svelte-1rtoxjc">\n                    Токен Avtokarta.club, цена указана со скидкой 50%\n                </span>',D=x(),R=T("div"),O=T("div"),B=T("progress"),U=x(),F=T("div"),j=T("span"),q=S("Продано: "),V=S(Q),$=S("\r\n            /\r\n            "),z=T("span"),H=S("Доступно: "),G=S(Y),W=x(),tt.c(),A(u,"class","help svelte-1rtoxjc"),A(p,"class","help svelte-1rtoxjc"),A(L,"class","help svelte-1rtoxjc"),A(r,"class","p-1 text-sm font-medium"),B.value=e[0],A(B,"max","1000"),A(B,"class","mt-2 w-full h-10"),A(F,"class"," text-teal-500 text-xs italic text-center"),A(n,"class","mt-16 p-1")},m(t,e){w(t,n,e),b(n,r),b(r,i),b(i,o),b(i,a),b(i,s),b(i,u),b(r,c),b(r,l),b(l,h),b(l,f),b(l,d),b(l,p),b(r,m),b(r,g),b(g,v),b(g,y),b(g,E),b(r,I),b(r,k),b(k,C),b(k,M),b(k,P),b(k,L),b(n,D),b(n,R),b(R,O),b(O,B),b(R,U),b(R,F),b(F,j),b(j,q),b(j,V),b(F,$),b(F,z),b(z,H),b(z,G),b(n,W),tt.m(n,null)},p(t,e){32&e[0]&&K!==(K=Math.trunc(100*t[5])/100+"")&&N(a,K),64&e[0]&&N(f,t[6]),96&e[0]&&Z!==(Z=Math.trunc(t[6]*t[5]*100)/100+"")&&N(y,Z),16&e[0]&&N(M,t[4]),1&e[0]&&(B.value=t[0]),8&e[0]&&Q!==(Q=Math.trunc(1e3-t[3])+"")&&N(V,Q),8&e[0]&&Y!==(Y=Math.trunc(t[3])+"")&&N(G,Y),X===(X=J(t))&&tt?tt.p(t,e):(tt.d(1),tt=X(t),tt&&(tt.c(),tt.m(n,null)))},i:t,o:t,d(t){t&&_(n),tt.d()}}}const nl="0x1b669eceff700c112be964bd7b8cb21e651c798a",rl="0xE92f2ad4c5212f395d633c609437C2F005321775";function il(){ethereum.sendAsync({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:nl,symbol:"T777",decimals:18}},id:Math.round(1e5*Math.random())},(t,e)=>{e?console.log("Thanks for your interest!"):console.log("Your loss!")})}function ol(t,e,n){let r,i,o,a,s,u,c,l,h,f,d=0,p=0,m=0,g=0,v=!1,y=Vs.constants.WeiPerEther,b=new Vs.providers.Web3Provider(web3.currentProvider);const w=b.getSigner();let _=new Vs.Contract(rl,Jc,b),E=new Vs.Contract(nl,$s,b);async function T(){let t=await _.getRate();n(15,l=t),n(4,c=t.toString()),console.log("token rate",c)}async function S(){let t=await E.balanceOf(h);n(9,f=Vs.utils.formatEther(t))}async function x(){let t=await E.balanceOf(rl);n(3,s=Vs.utils.formatEther(t)),console.log("balance",s),n(0,d=1e3-s)}function I(){void 0!==window.ethereum?ethereum.isMetaMask&&(n(7,v=!0),k(),S()):n(7,v=!1)}function k(){window.ethereum.enable(),n(8,h=ethereum.selectedAddress)}function A(){fetch("https://www.cbr-xml-daily.ru/daily_json.js").then(t=>t.json()).then(t=>{u=t,console.log(u),n(5,m=u.Valute.USD.Value)})}function N(){(new Vs.providers.EtherscanProvider).getEtherPrice().then((function(t){n(6,g=t),console.log("Ether price in USD: "+t)}))}return T(),x(),I(),A(),N(),t.$$.update=()=>{43010&t.$$.dirty[0]&&r>0&&(n(11,i=Vs.utils.bigNumberify(r)),n(13,a=y.mul(i).div(l).add(8)),o=a.toHexString(),n(2,p=Vs.utils.formatEther(a)))},[d,r,p,s,c,m,g,v,h,f,function(){if(s>r){let t=o;console.log(t);const e={to:rl,from:ethereum.selectedAddress,value:t};ethereum.sendAsync({method:"eth_sendTransaction",params:[e],from:ethereum.selectedAddress},(t,e)=>{t?console.error(t):console.log(e)})}else alert(`Доступное кол-во токенов для покупки: ${s}`)},i,o,a,u,l,void 0,void 0,y,b,w,_,E,T,S,x,I,k,A,N,async function(){let t=_.connect(w),e=await t.changeRate(void 0);console.log(e.hash),await e.wait(),console.log("done")},async function(){let t=_.connect(w),e=await t.withdraw();console.log(e.hash),await e.wait(),console.log("done")},function(){r=C(this.value),n(1,r)}]}function al(e){let n;return{c(){n=T("p"),n.textContent="Not found"},m(t,e){w(t,n,e)},p:t,i:t,o:t,d(t){t&&_(n)}}}var sl={routes:{"/":class extends wt{constructor(t){super(),bt(this,t,Ea,wa,s,{},[-1,-1,-1,-1,-1])}},"/about":class extends wt{constructor(t){super(),bt(this,t,null,Ta,s,{})}},"/ico":class extends wt{constructor(t){super(),bt(this,t,ol,el,s,{},[-1,-1])}},"/partners":class extends wt{constructor(t){super(),bt(this,t,Yc,Qc,s,{})}},"/addservice":class extends wt{constructor(t){super(),bt(this,t,Aa,Ia,s,{},[-1,-1])}},"/service/:id/:records?/:date?":class extends wt{constructor(t){super(),bt(this,t,qs,Fs,s,{params:0},[-1,-1,-1,-1])}},"/cryptowallet":class extends wt{constructor(t){super(),bt(this,t,yu,vu,s,{},[-1,-1,-1,-1])}},"/profile":class extends wt{constructor(t){super(),bt(this,t,lc,cc,s,{})}},"/taxidriverpage/:id":class extends wt{constructor(t){super(),bt(this,t,Ic,xc,s,{params:0})}},"/topic/:id":class extends wt{constructor(t){super(),bt(this,t,Hc,zc,s,{params:0},[-1,-1])}},"*":class extends wt{constructor(t){super(),bt(this,t,null,al,s,{})}}}};function ul(t){let e,r,i,o;const a=new _t({}),s=new Tn({}),u=[sl];let c={};for(let t=0;t<u.length;t+=1)c=n(c,u[t]);const l=new rn({props:c});return{c(){mt(a.$$.fragment),e=x(),r=T("main"),mt(s.$$.fragment),i=x(),mt(l.$$.fragment)},m(t,n){gt(a,t,n),w(t,e,n),w(t,r,n),gt(s,r,null),b(r,i),gt(l,r,null),o=!0},p(t,[e]){const n=0&e?function(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[o]=s}else for(const t in a)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(u,[(r=sl,"object"==typeof r&&null!==r?r:{})]):{};var r;l.$set(n)},i(t){o||(lt(a.$$.fragment,t),lt(s.$$.fragment,t),lt(l.$$.fragment,t),o=!0)},o(t){ht(a.$$.fragment,t),ht(s.$$.fragment,t),ht(l.$$.fragment,t),o=!1},d(t){vt(a,t),t&&_(e),t&&_(r),vt(s),vt(l)}}}return new class extends wt{constructor(t){super(),bt(this,t,null,ul,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
