var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t,e,n){t.$$.on_destroy.push(u(e,n))}function l(t,e,n,r){if(t){const i=h(t,e,n,r);return t[0](i)}}function h(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}function d(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if("object"==typeof e.dirty){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}const f="undefined"!=typeof window;let p=f?()=>window.performance.now():()=>Date.now(),m=f?t=>requestAnimationFrame(t):t;const g=new Set;function v(t){g.forEach(e=>{e.c(t)||(g.delete(e),e.f())}),0!==g.size&&m(v)}function y(t){let e;return 0===g.size&&m(v),{promise:new Promise(n=>{g.add(e={c:t,f:n})}),abort(){g.delete(e)}}}function b(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function _(t){t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function S(){return x(" ")}function T(){return x("")}function C(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function I(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t){return""===t?void 0:+t}function P(t,e){e=""+e,t.data!==e&&(t.data=e)}function M(t,e){(null!=e||t.value)&&(t.value=e)}function N(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function D(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function R(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}let O,B,U=0,F={};function j(t,e,n,r,i,o,a,s=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);c+=100*t+`%{${a(r,1-r)}}\n`}const l=c+`100% {${a(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${s}`;if(!F[h]){if(!O){const t=E("style");document.head.appendChild(t),O=t.sheet}F[h]=!0,O.insertRule(`@keyframes ${h} ${l}`,O.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${h} ${r}ms linear ${i}ms 1 both`,U+=1,h}function q(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--U&&m(()=>{if(U)return;let t=O.cssRules.length;for(;t--;)O.deleteRule(t);F={}})}function $(t){B=t}function V(){if(!B)throw new Error("Function called outside component initialization");return B}function z(t){V().$$.on_mount.push(t)}function H(t){V().$$.on_destroy.push(t)}function G(){const t=V();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=R(e,n);r.slice().forEach(e=>{e.call(t,i)})}}}const W=[],K=[],Z=[],Q=[],Y=Promise.resolve();let X=!1;function J(t){Z.push(t)}const tt=new Set;function et(){do{for(;W.length;){const t=W.shift();$(t),nt(t.$$)}for(;K.length;)K.pop()();for(let t=0;t<Z.length;t+=1){const e=Z[t];tt.has(e)||(tt.add(e),e())}Z.length=0}while(W.length);for(;Q.length;)Q.pop()();X=!1,tt.clear()}function nt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}let rt;function it(){return rt||(rt=Promise.resolve(),rt.then(()=>{rt=null})),rt}function ot(t,e,n){t.dispatchEvent(R(`${e?"intro":"outro"}${n}`))}const at=new Set;let st;function ut(){st={r:0,c:[],p:st}}function ct(){st.r||o(st.c),st=st.p}function lt(t,e){t&&t.i&&(at.delete(t),t.i(e))}function ht(t,e,n,r){if(t&&t.o){if(at.has(t))return;at.add(t),st.c.push(()=>{at.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const dt={duration:0};function ft(n,r,i){let o,s,u=r(n,i),c=!1,l=0;function h(){o&&q(n,o)}function d(){const{delay:r=0,duration:i=300,easing:a=e,tick:d=t,css:f}=u||dt;f&&(o=j(n,0,1,i,r,a,f,l++)),d(0,1);const m=p()+r,g=m+i;s&&s.abort(),c=!0,J(()=>ot(n,!0,"start")),s=y(t=>{if(c){if(t>=g)return d(1,0),ot(n,!0,"end"),h(),c=!1;if(t>=m){const e=a((t-m)/i);d(e,1-e)}}return c})}let f=!1;return{start(){f||(q(n),a(u)?(u=u(),it().then(d)):d())},invalidate(){f=!1},end(){c&&(h(),c=!1)}}}function pt(n,r,i,s){let u=r(n,i),c=s?0:1,l=null,h=null,d=null;function f(){d&&q(n,d)}function m(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(r){const{delay:i=0,duration:a=300,easing:s=e,tick:g=t,css:v}=u||dt,b={start:p()+i,b:r};r||(b.group=st,st.r+=1),l?h=b:(v&&(f(),d=j(n,c,r,a,i,s,v)),r&&g(0,1),l=m(b,a),J(()=>ot(n,r,"start")),y(t=>{if(h&&t>h.start&&(l=m(h,a),h=null,ot(n,l.b,"start"),v&&(f(),d=j(n,c,l.b,l.duration,0,s,u.css))),l)if(t>=l.end)g(c=l.b,1-c),ot(n,l.b,"end"),h||(l.b?f():--l.group.r||o(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;c=l.a+l.d*s(e/l.duration),g(c,1-c)}return!(!l&&!h)}))}return{run(t){a(u)?it().then(()=>{u=u(),g(t)}):g(t)},end(){f(),l=h=null}}}function mt(t){t&&t.c()}function gt(t,e,n){const{fragment:i,on_mount:s,on_destroy:u,after_update:c}=t.$$;i&&i.m(e,n),J(()=>{const e=s.map(r).filter(a);u?u.push(...e):o(e),t.$$.on_mount=[]}),c.forEach(J)}function vt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){-1===t.$$.dirty[0]&&(W.push(t),X||(X=!0,Y.then(et)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function bt(e,n,r,a,s,u,c=[-1]){const l=B;$(e);const h=n.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:c};let f=!1;d.ctx=r?r(e,h,(t,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=i)&&(d.bound[t]&&d.bound[t](i),f&&yt(e,t)),n}):[],d.update(),f=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):d.fragment&&d.fragment.c(),n.intro&&lt(e.$$.fragment),gt(e,n.target,n.anchor),et()),$(l)}class wt{$destroy(){vt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}class _t extends wt{constructor(t){super(),bt(this,t,null,null,s,{})}}var kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Et(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function xt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function St(t,e){return t(e={exports:{}},e.exports),e.exports}var Tt=St((function(t){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var e,n,r,i,o,a,s,u,c,l,h,d,f,p,m,g,v,y,b,w;!function(_){var k,E,x="object"==typeof kt?kt:"object"==typeof self?self:"object"==typeof this?this:{};function S(t,e){return t!==x&&("function"==typeof Object.create?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(n,r){return t[n]=e?e(n,r):r}}k=S(x,S(t.exports)),E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},e=function(t,e){function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},i=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},o=function(t,e){return function(n,r){e(n,r,t)}},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},l=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},h=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},d=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t},f=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},p=function(t){return this instanceof p?(this.v=t,this):new p(t)},m=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof p?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}},g=function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:p(t[r](e)),done:"return"===r}:i?i(e):e}:i}},v=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=l(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}},y=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},b=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},w=function(t){return t&&t.__esModule?t:{default:t}},k("__extends",e),k("__assign",n),k("__rest",r),k("__decorate",i),k("__param",o),k("__metadata",a),k("__awaiter",s),k("__generator",u),k("__exportStar",c),k("__values",l),k("__read",h),k("__spread",d),k("__spreadArrays",f),k("__await",p),k("__asyncGenerator",m),k("__asyncDelegator",g),k("__asyncValues",v),k("__makeTemplateObject",y),k("__importStar",b),k("__importDefault",w)}()}));xt(Tt);var Ct=St((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(t,e){if(!t)throw i(e)},i=function(t){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},s=function(t){try{return a.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=u(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var h=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,d.prototype.create),i}return Tt.__extends(e,t),e}(Error),d=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?f(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new h(i,s),c=0,l=Object.keys(r);c<l.length;c++){var d=l[c];"_"!==d.slice(-1)&&(d in u&&console.warn('Overwriting FirebaseError base field "'+d+'" can cause unexpected behavior.'),u[d]=r[d])}return u},t}();function f(t,e){return t.replace(p,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var p=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function m(t){return JSON.parse(t)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(s(o[0])||""),n=m(s(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var v=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=b),void 0===r.error&&(r.error=b),void 0===r.complete&&(r.complete=b);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function b(){}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function w(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=n,e.Deferred=c,e.ErrorFactory=d,e.FirebaseError=h,e.Sha1=v,e.assert=r,e.assertionError=i,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=a,e.base64Decode=s,e.base64Encode=function(t){var e=o(t);return a.encodeByteArray(e,!0)},e.contains=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new y(t,e);return n.subscribe.bind(n)},e.decode=g,e.deepCopy=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){return u(void 0,t)},e.deepExtend=u,e.errorPrefix=w,e.getUA=l,e.isAdmin=function(t){var e=g(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return l().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(kt.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return l().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=g(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=g(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var a=o-55296;i++,r(i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(w(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(w(t,e,r)+"must be a valid context object.")}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */,e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(w(t,e,r)+"must be a valid firebase namespace.")}}));xt(Ct);Ct.CONSTANTS,Ct.Deferred,Ct.ErrorFactory,Ct.FirebaseError,Ct.Sha1,Ct.assert,Ct.assertionError,Ct.async,Ct.base64,Ct.base64Decode,Ct.base64Encode,Ct.contains,Ct.createSubscribe,Ct.decode,Ct.deepCopy,Ct.deepExtend,Ct.errorPrefix,Ct.getUA,Ct.isAdmin,Ct.isBrowser,Ct.isBrowserExtension,Ct.isElectron,Ct.isEmpty,Ct.isIE,Ct.isMobileCordova,Ct.isNode,Ct.isNodeSdk,Ct.isReactNative,Ct.isUWP,Ct.isValidFormat,Ct.isValidTimestamp,Ct.issuedAtTime,Ct.jsonEval,Ct.map,Ct.querystring,Ct.querystringDecode,Ct.safeGet,Ct.stringLength,Ct.stringToByteArray,Ct.stringify,Ct.validateArgCount,Ct.validateCallback,Ct.validateContextObject,Ct.validateNamespace;var It=St((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),r=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Ct.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Tt.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=Tt.__values(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Tt.__read(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t;return Tt.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var i=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new r(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=n,e.ComponentContainer=i,e.Provider=r}));xt(It);It.Component,It.ComponentContainer,It.Provider;var At=St((function(t,e){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function n(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Object.defineProperty(e,"__esModule",{value:!0});var r,i=[];(r=e.LogLevel||(e.LogLevel={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";var o=e.LogLevel.INFO,a=function(t,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(!(r<t.logLevel)){var a=(new Date).toISOString();switch(r){case e.LogLevel.DEBUG:case e.LogLevel.VERBOSE:console.log.apply(console,n(["["+a+"]  "+t.name+":"],i));break;case e.LogLevel.INFO:console.info.apply(console,n(["["+a+"]  "+t.name+":"],i));break;case e.LogLevel.WARN:console.warn.apply(console,n(["["+a+"]  "+t.name+":"],i));break;case e.LogLevel.ERROR:console.error.apply(console,n(["["+a+"]  "+t.name+":"],i));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+r+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in e.LogLevel))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.DEBUG],t))},t.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.VERBOSE],t))},t.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.INFO],t))},t.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.WARN],t))},t.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logHandler.apply(this,n([this,e.LogLevel.ERROR],t))},t}();e.Logger=s,e.setLogLevel=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){i.forEach((function(e){e.logLevel=t}))}}));xt(At);At.LogLevel,At.Logger,At.setLogLevel;var Pt=St((function(t,e){
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var n;Object.defineProperty(e,"__esModule",{value:!0});var r,i=((n={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",n["bad-app-name"]="Illegal App name: '{$appName}",n["duplicate-app"]="Firebase App named '{$appName}' already exists",n["app-deleted"]="Firebase App named '{$appName}' already deleted",n["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",n),o=new Ct.ErrorFactory("app","Firebase",i),a="@firebase/app",s=((r={})[a]="fire-core",r["@firebase/analytics"]="fire-analytics",r["@firebase/auth"]="fire-auth",r["@firebase/database"]="fire-rtdb",r["@firebase/functions"]="fire-fn",r["@firebase/installations"]="fire-iid",r["@firebase/messaging"]="fire-fcm",r["@firebase/performance"]="fire-perf",r["@firebase/remote-config"]="fire-rc",r["@firebase/storage"]="fire-gcs",r["@firebase/firestore"]="fire-fst",r["fire-js"]="fire-js",r["firebase-wrapper"]="fire-js-all",r),u=new At.Logger("@firebase/app"),c=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ct.deepCopy(t),this.container=new It.ComponentContainer(e.name),this._addComponent(new It.Component("app",(function(){return o}),"PUBLIC"));try{for(var a=Tt.__values(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){u.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw o.create("app-deleted",{appName:this.name_})},t}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var l=
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function t(){var e=
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var a=i;void 0===a.name&&(a.name="[DEFAULT]");var s=a.name;if("string"!=typeof s||!s)throw o.create("bad-app-name",{appName:String(s)});if(Ct.contains(e,s))throw o.create("duplicate-app",{appName:s});var u=new t(n,a,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=s[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){var l=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&l.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&c&&l.push("and"),c&&l.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void u.warn(l.join(" "))}a(new It.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},apps:null,SDK_VERSION:"7.8.0",INTERNAL:{registerComponent:a,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!Ct.contains(e,t))throw o.create("no-app",{appName:t});return e[t]}function a(a){var s,c,l=a.name;if(n.has(l))return u.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?r[l]:null;if(n.set(l,a),"PUBLIC"===a.type){var h=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[l])throw o.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==a.serviceProps&&Ct.deepExtend(h,a.serviceProps),r[l]=h,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,l);return n.apply(this,a.multipleInstances?t:[])}}try{for(var d=Tt.__values(Object.keys(e)),f=d.next();!f.done;f=d.next()){var p=f.value;e[p]._addComponent(a)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(s)throw s.error}}return"PUBLIC"===a.type?r[l]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r)}(c);return e.INTERNAL=Tt.__assign(Tt.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Ct.deepExtend(e,t)},createSubscribe:Ct.createSubscribe,ErrorFactory:Ct.ErrorFactory,deepExtend:Ct.deepExtend}),e}(),h=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e,n=t.getComponent();return"VERSION"===(null===(e=n)||void 0===e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if(Ct.isBrowser()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=l.initializeApp;l.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ct.isNode()&&u.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),f.apply(void 0,t)};var p=l;!function(t,e){t.INTERNAL.registerComponent(new It.Component("platform-logger",(function(t){return new h(t)}),"PRIVATE")),t.registerVersion(a,"0.5.3",e),t.registerVersion("fire-js","")}(p),e.default=p,e.firebase=p}));xt(Pt);Pt.firebase;var Mt,Nt=(Mt=Pt)&&"object"==typeof Mt&&"default"in Mt?Mt.default:Mt;
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Nt.registerVersion("firebase","7.8.0","app");var Lt=Nt;(function(){var t,e=Pt.default,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:void 0!==kt&&null!=kt?kt:this;function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.o=function(t){var e=this.f();t.La(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.La(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.La=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).La(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).La(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self;function u(t){return"string"==typeof t}function c(t){return"boolean"==typeof t}var l=/^[\w+/_-]+[=]{0,2}$/,h=null;function d(){}function f(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){return null===t}function m(t){return"array"==f(t)}function g(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==f(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function k(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:k).apply(null,arguments)}function x(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.gd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function I(t){if(Error.captureStackTrace)Error.captureStackTrace(this,I);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function A(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");I.call(this,n+t[r])}function P(t,e){throw new A("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function N(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}T(I,Error),I.prototype.name="CustomError",T(A,I),A.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var D=new M((function(){return new O}),(function(t){t.reset()}));function R(){var t=Ht,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function O(){this.next=this.b=this.a=null}function B(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}L.prototype.add=function(t,e){var n=D.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},O.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},O.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(u(t))return u(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},F=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=u(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=u(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function $(t,e){return 0<=U(t,e)}function V(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function z(t,e){!function(t,e){for(var n=u(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function H(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function K(t){for(var e in t)return!1;return!0}function Z(t){var e,n={};for(e in t)n[e]=t[e];return n}var Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Q.length;o++)n=Q[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function X(t,e){this.a=t===et&&e||"",this.b=tt}function J(t){return t instanceof X&&t.constructor===X&&t.b===tt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}X.prototype.qa=!0,X.prototype.pa=function(){return this.a},X.prototype.toString=function(){return"Const{"+this.a+"}"};var tt={},et={},nt=new X(et,"");function rt(){this.a="",this.b=ut}function it(t){return t instanceof rt&&t.constructor===rt&&t.b===ut?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function ot(t,e){var n=J(t);if(!st.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ct(t=n.replace(at,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof X?J(t):encodeURIComponent(String(t))})))}rt.prototype.qa=!0,rt.prototype.pa=function(){return this.a.toString()},rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var at=/%{(\w+)}/g,st=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ut={};function ct(t){var e=new rt;return e.a=t,e}var lt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ht=/&/g,dt=/</g,ft=/>/g,pt=/"/g,mt=/'/g,gt=/\x00/g,vt=/[\x00&<>"']/;function yt(t,e){return-1!=t.indexOf(e)}function bt(t,e){return t<e?-1:t>e?1:0}function wt(){this.a="",this.b=Tt}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}wt.prototype.qa=!0,wt.prototype.pa=function(){return this.a.toString()},wt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Et=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){return t instanceof wt?t:(t="object"==typeof t&&t.qa?t.pa():String(t),Et.test(t)||(t="about:invalid#zClosurez"),Ct(t))}var St,Tt={};function Ct(t){var e=new wt;return e.a=t,e}Ct("about:blank");t:{var It=s.navigator;if(It){var At=It.userAgent;if(At){St=At;break t}}St=""}function Mt(t){return yt(St,t)}function Nt(){this.a="",this.b=Dt}function Lt(t){return t instanceof Nt&&t.constructor===Nt&&t.b===Dt?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}Nt.prototype.qa=!0,Nt.prototype.pa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function Rt(t){var e=new Nt;return e.a=t,e}Rt("<!DOCTYPE html>");var Ot,Bt,Ut=Rt("");function Ft(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function jt(t){return vt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ht,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(dt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ft,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(pt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(mt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(gt,"&#0;"))),t}function qt(t){s.setTimeout((function(){throw t}),0)}function $t(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Mt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=ct(J(nt));B(t,"HTMLIFrameElement"),t.src=it(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Lt(Ut)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=E((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!Mt("Trident")&&!Mt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){s.setTimeout(t,0)}}function Vt(t,e){Bt||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);Bt=function(){t.then(Gt)}}else Bt=function(){var t=Gt;!v(s.setImmediate)||s.Window&&s.Window.prototype&&!Mt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Ot||(Ot=$t()),Ot(t)):s.setImmediate(t)}}(),zt||(Bt(),zt=!0),Ht.add(t,e)}Rt("<br>");var zt=!1,Ht=new L;function Gt(){for(var t;t=R();){try{t.a.call(t.b)}catch(t){qt(t)}N(D,t)}zt=!1}function Wt(t,e){if(this.a=Kt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,(function(t){ae(n,Zt,t)}),(function(t){if(!(t instanceof fe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ae(n,Qt,t)}))}catch(t){ae(this,Qt,t)}}var Kt=0,Zt=2,Qt=3;function Yt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Yt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Xt=new M((function(){return new Yt}),(function(t){t.reset()}));function Jt(t,e,n){var r=Xt.get();return r.g=t,r.b=e,r.f=n,r}function te(t){if(t instanceof Wt)return t;var e=new Wt(d);return ae(e,Zt,t),e}function ee(t){return new Wt((function(e,n){n(t)}))}function ne(t,e,n){se(t,e,n,null)||Vt(x(e,t))}function re(t){return new Wt((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ne(t[o],x(i,o,!0),x(i,o,!1));else e(r)}))}function ie(t,e){t.b||t.a!=Zt&&t.a!=Qt||ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function oe(t,e,n,r){var i=Jt(null,null,null);return i.a=new Wt((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof fe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,ie(t,i),i.a}function ae(t,e,n){t.a==Kt&&(t===n&&(e=Qt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,se(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,ue(t),e!=Qt||n instanceof fe||function(t,e){t.g=!0,Vt((function(){t.g&&de.call(null,e)}))}(t,n)))}function se(t,e,n,r){if(t instanceof Wt)return ie(t,Jt(e||d,n||null,r)),!0;if(C(t))return t.then(e,n,r),!0;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function ue(t){t.h||(t.h=!0,Vt(t.Zb,t))}function ce(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function le(t,e,n,r){if(n==Qt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,he(e,n,r);else try{e.c?e.g.call(e.f):he(e,n,r)}catch(t){de.call(null,t)}N(Xt,e)}function he(t,e,n){e==Zt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Wt.prototype.then=function(t,e,n){return oe(this,v(t)?t:null,v(e)?e:null,n)},Wt.prototype.$goog_Thenable=!0,(t=Wt.prototype).ka=function(t,e){return(t=Jt(t,t,e)).c=!0,ie(this,t),this},t.s=function(t,e){return oe(this,null,t,e)},t.cancel=function(t){this.a==Kt&&Vt((function(){!function t(e,n){if(e.a==Kt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==Kt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):ce(r),le(r,o,Qt,n)))}e.c=null}else ae(e,Qt,n)}(this,new fe(t))}),this)},t.Oc=function(t){this.a=Kt,ae(this,Zt,t)},t.Pc=function(t){this.a=Kt,ae(this,Qt,t)},t.Zb=function(){for(var t;t=ce(this);)le(this,t,this.a,this.i);this.h=!1};var de=qt;function fe(t){I.call(this,t)}function pe(){this.va=this.va,this.la=this.la}T(fe,I),fe.prototype.name="cancel";function me(t){if(!t.va&&(t.va=!0,t.za(),0))t[b]||(t[b]=++w)}function ge(t){return ge[" "](t),t}pe.prototype.va=!1,pe.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},ge[" "]=d;var ve,ye,be=Mt("Opera"),we=Mt("Trident")||Mt("MSIE"),_e=Mt("Edge"),ke=_e||we,Ee=Mt("Gecko")&&!(yt(St.toLowerCase(),"webkit")&&!Mt("Edge"))&&!(Mt("Trident")||Mt("MSIE"))&&!Mt("Edge"),xe=yt(St.toLowerCase(),"webkit")&&!Mt("Edge");function Se(){var t=s.document;return t?t.documentMode:void 0}t:{var Te="",Ce=(ye=St,Ee?/rv:([^\);]+)(\)|;)/.exec(ye):_e?/Edge\/([\d\.]+)/.exec(ye):we?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ye):xe?/WebKit\/(\S+)/.exec(ye):be?/(?:Version)[ \/]?(\S+)/.exec(ye):void 0);if(Ce&&(Te=Ce?Ce[1]:""),we){var Ie=Se();if(null!=Ie&&Ie>parseFloat(Te)){ve=String(Ie);break t}}ve=Te}var Ae,Pe={};function Me(t){return function(t,e){var n=Pe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=lt(String(ve)).split("."),r=lt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=bt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||bt(0==a[2].length,0==s[2].length)||bt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}Ae=s.document&&we?Se():void 0;var Ne=Object.freeze||function(t){return t},Le=!we||9<=Number(Ae),De=we&&!Me("9"),Re=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",d,e),s.removeEventListener("test",d,e)}catch(t){}return t}();function Oe(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function Be(t,e){if(Oe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ee){t:{try{ge(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=u(t.pointerType)?t.pointerType:Ue[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Oe.prototype.preventDefault=function(){this.Mb=!1},T(Be,Oe);var Ue=Ne({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,De)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Be.prototype.f=function(){return this.a};var Fe="closure_listenable_"+(1e6*Math.random()|0),je=0;function qe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Pa=i,this.key=++je,this.ta=this.Ka=!1}function $e(t){t.ta=!0,t.listener=null,t.proxy=null,t.src=null,t.Pa=null}function Ve(t){this.src=t,this.a={},this.b=0}function ze(t,e){var n=e.type;n in t.a&&V(t.a[n],e)&&($e(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function He(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ta&&o.listener==e&&o.capture==!!n&&o.Pa==r)return i}return-1}Ve.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=He(t,e,r,i);return-1<a?(e=t[a],n||(e.Ka=!1)):((e=new qe(e,this.src,o,!!r,i)).Ka=n,t.push(e)),e};var Ge="closure_lm_"+(1e6*Math.random()|0),We={};function Ke(t,e,n,r,i){if(r&&r.once)Qe(t,e,n,r,i);else if(m(e))for(var o=0;o<e.length;o++)Ke(t,e[o],n,r,i);else n=an(n),t&&t[Fe]?un(t,e,n,y(r)?!!r.capture:!!r,i):Ze(t,e,n,!1,r,i)}function Ze(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i,s=rn(t);if(s||(t[Ge]=s=new Ve(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=nn,e=Le?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Re||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Je(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Qe(t,e,n,r,i){if(m(e))for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);else n=an(n),t&&t[Fe]?cn(t,e,n,y(r)?!!r.capture:!!r,i):Ze(t,e,n,!0,r,i)}function Ye(t,e,n,r,i){if(m(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=an(n),t&&t[Fe]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=He(o=t.a[e],n,r,i))&&($e(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=rn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=He(e,n,r,i)),(n=-1<t?e[t]:null)&&Xe(n))}function Xe(t){if("number"!=typeof t&&t&&!t.ta){var e=t.src;if(e&&e[Fe])ze(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Je(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rn(e))?(ze(n,t),0==n.b&&(n.src=null,e[Ge]=null)):$e(t)}}}function Je(t){return t in We?We[t]:We[t]="on"+t}function tn(t,e,n,r){var i=!0;if((t=rn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ta&&(o=en(o,r),i=i&&!1!==o)}return i}function en(t,e){var n=t.listener,r=t.Pa||t.src;return t.Ka&&Xe(t),n.call(r,e)}function nn(t,e){if(t.ta)return!0;if(!Le){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=tn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=tn(r[i],t,!1,e),n=n&&o}return n}return en(t,new Be(e,this))}function rn(t){return(t=t[Ge])instanceof Ve?t:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function an(t){return v(t)?t:(t[on]||(t[on]=function(e){return t.handleEvent(e)}),t[on])}function sn(){pe.call(this),this.u=new Ve(this),this.Sb=this,this.Xa=null}function un(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function cn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function ln(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&ze(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function hn(t,e,n){if(v(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function dn(t){var e=null;return new Wt((function(n,r){-1==(e=hn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw s.clearTimeout(e),t}))}function fn(t){if(t.U&&"function"==typeof t.U)return t.U();if(u(t))return t.split("");if(g(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function pn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(g(t)||u(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function mn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];vn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)vn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function vn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(sn,pe),sn.prototype[Fe]=!0,sn.prototype.addEventListener=function(t,e,n,r){Ke(this,t,e,n,r)},sn.prototype.removeEventListener=function(t,e,n,r){Ye(this,t,e,n,r)},sn.prototype.dispatchEvent=function(t){var e,n=this.Xa;if(n)for(e=[];n;n=n.Xa)e.push(n);n=this.Sb;var r=t.type||t;if(u(t))t=new Oe(t,n);else if(t instanceof Oe)t.target=t.target||n;else{var i=t;Y(t=new Oe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=ln(a,r,!0,t)&&i}if(i=ln(a=t.b=n,r,!0,t)&&i,i=ln(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=ln(a=t.b=e[o],r,!1,t)&&i;return i},sn.prototype.za=function(){if(sn.qb.za.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)$e(n[r]);delete e.a[t],e.b--}}this.Xa=null},(t=mn.prototype).U=function(){gn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return gn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return vn(this.b,t)?this.b[t]:e},t.set=function(t,e){vn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof bn?(this.h=void 0!==e?e:t.h,wn(this,t.f),this.i=t.i,this.b=t.b,_n(this,t.l),this.c=t.c,kn(this,qn(t.a)),this.g=t.g):t&&(n=String(t).match(yn))?(this.h=!!e,wn(this,n[1]||"",!0),this.i=Cn(n[2]||""),this.b=Cn(n[3]||"",!0),_n(this,n[4]),this.c=Cn(n[5]||"",!0),kn(this,n[6]||"",!0),this.g=Cn(n[7]||"")):(this.h=!!e,this.a=new Rn(null,this.h))}function wn(t,e,n){t.f=n?Cn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function _n(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function kn(t,e,n){e instanceof Rn?(t.a=e,function(t,e){e&&!t.f&&(On(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Un(this,e),jn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=In(e,Ln)),t.a=new Rn(e,t.h))}function En(t,e,n){t.a.set(e,n)}function xn(t,e){return t.a.get(e)}function Sn(t){return t instanceof bn?new bn(t):new bn(t,void 0)}function Tn(t,e){var n=new bn(null,void 0);return wn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Cn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function In(t,e,n){return u(t)?(t=encodeURI(t).replace(e,An),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function An(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}bn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(In(e,Pn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(In(e,Pn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(In(n,"/"==n.charAt(0)?Nn:Mn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",In(n,Dn)),t.join("")},bn.prototype.resolve=function(t){var e=new bn(this),n=!!t.f;n?wn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)_n(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(yt(i,"./")||yt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?kn(e,qn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Pn=/[#\/\?@]/g,Mn=/[#\?:]/g,Nn=/[#\?]/g,Ln=/[#\?@]/g,Dn=/#/g;function Rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function On(t){t.a||(t.a=new mn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Bn(t){var e=pn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Rn(null,void 0);t=fn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];m(o)?jn(n,i,o):n.add(i,o)}return n}function Un(t,e){On(t),e=$n(t,e),vn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,vn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&gn(t)))}function Fn(t,e){return On(t),e=$n(t,e),vn(t.a.b,e)}function jn(t,e,n){Un(t,e),0<n.length&&(t.c=null,t.a.set($n(t,e),G(n)),t.b+=n.length)}function qn(t){var e=new Rn;return e.c=t.c,t.a&&(e.a=new mn(t.a),e.b=t.b),e}function $n(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=Rn.prototype).add=function(t,e){On(this),this.c=null,t=$n(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){On(this),this.a.forEach((function(n,r){F(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){On(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.U=function(t){On(this);var e=[];if(u(t))Fn(this,t)&&(e=H(e,this.a.get($n(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},t.set=function(t,e){return On(this),this.c=null,Fn(this,t=$n(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Vn=!we||9<=Number(Ae);function zn(t){var e=document;return u(t)?e.getElementById(t):t}function Hn(t,e){W(e,(function(e,n){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Gn.hasOwnProperty(n)?t.setAttribute(Gn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var Gn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wn(t,e,n){function r(n){n&&e.appendChild(u(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!g(o)||y(o)&&0<o.nodeType?r(o):F(Kn(o)?G(o):o,r)}}function Kn(t){if(t&&"number"==typeof t.length){if(y(t))return"function"==typeof t.item||"string"==typeof t.item;if(v(t))return"function"==typeof t.item}return!1}function Zn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(m(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),Jn(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Jn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,t,e),e.join("")}function Qn(){}var Yn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Jn(t,e){e.push('"',t.replace(Xn,(function(t){var e=Yn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Yn[t]=e),e})),'"')}function tr(){var t=br();return we&&!!Ae&&11==Ae||/Edge\/\d+/.test(t)}function er(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function nr(t,e){e=e||s.window;var n="about:blank";t&&(n=_t(xt(t)).toString()),e.location.href=n}function rr(t){return!!((t=(t||br()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ir(t){t=t||s.window;try{t.close()}catch(t){}}function or(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(e.target=r,yt(n,"crios/")&&(e.target="_blank")),gr(br())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof wt?n:xt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((Mt("iPhone")&&!Mt("iPod")&&!Mt("iPad")||Mt("iPad")||Mt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(B(a=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof wt||e instanceof wt||(e="object"==typeof e&&e.qa?e.pa():String(e),Et.test(e)||(e="about:invalid#zClosurez"),e=Ct(e)),a.href=_t(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=_t(e).toString(),a&&(ke&&yt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Rt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">'),a.document.write(Lt(t)),a.document.close())):(a=r.open(_t(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ur(){var t=null;return new Wt((function(e){"complete"==s.document.readyState?e():(t=function(){e()},Qe(window,"load",t))})).s((function(e){throw Ye(window,"load",t),e}))}function cr(t){return t=t||br(),!("file:"!==xr()&&"ionic:"!==xr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function hr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function dr(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=dr();return"ReactNative"===t||"Node"===t}var pr="Firefox",mr="Chrome";function gr(t){var e=t.toLowerCase();return yt(e,"opera/")||yt(e,"opr/")||yt(e,"opios/")?"Opera":yt(e,"iemobile")?"IEMobile":yt(e,"msie")||yt(e,"trident/")?"IE":yt(e,"edge/")?"Edge":yt(e,"firefox/")?pr:yt(e,"silk/")?"Silk":yt(e,"blackberry")?"Blackberry":yt(e,"webos")?"Webos":!yt(e,"safari/")||yt(e,"chrome/")||yt(e,"crios/")||yt(e,"android")?!yt(e,"chrome/")&&!yt(e,"crios/")||yt(e,"edge/")?yt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":mr:"Safari"}var vr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function yr(t,e){e=e||[];var n,r=[],i={};for(n in vr)i[vr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=dr())?r=gr(i=br()):"Worker"===r&&(r=gr(i=br())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function br(){return s.navigator&&s.navigator.userAgent||""}function wr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function _r(){try{var t=s.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!tr()||!!s.indexedDB}catch(t){return hr()&&!!s.indexedDB}return!1}function kr(){return(Er()||"chrome-extension:"===xr()||cr())&&!fr()&&_r()&&!hr()}function Er(){return"http:"===xr()||"https:"===xr()}function xr(){return s.location&&s.location.protocol||null}function Sr(t){return!rr(t=t||br())&&gr(t)!=pr}function Tr(t){return void 0===t?null:Zn(t)}function Cr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ir(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function Pr(t){return"Safari"!=gr(t=t||br())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Mr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Nr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=br(),e=dr(),this.b=rr(t)||"ReactNative"===e}function Lr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Rr(){return!(!wr("fireauth.oauthhelper",s)&&!wr("fireauth.iframe",s))}Nr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Er()&&"chrome-extension:"!==xr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Or,Br={};function Ur(t){Br[t]||(Br[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Fr={};Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:2}),Or=2==Fr.abcd}catch(ye){Or=!1}function jr(t,e,n){Or?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function $r(t){var e={};return qr(e,t),e}function Vr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,Vr(t[n]));return e}function zr(t){var e={},n=t[Gr],r=t[Wr];if(!(t=t[Kr])||t!=Hr&&!n)throw Error("Invalid provider user info!");e[Qr]=r||null,e[Zr]=n||null,jr(this,Xr,t),jr(this,Yr,Vr(e))}var Hr="EMAIL_SIGNIN",Gr="email",Wr="newEmail",Kr="requestType",Zr="email",Qr="fromEmail",Yr="data",Xr="operation";function Jr(t,e){this.code=ei+t,this.message=e||ni[t]||""}function ti(t){var e=t&&t.code;return e?new Jr(e.substring(ei.length),t.message):null}T(Jr,Error),Jr.prototype.A=function(){return{code:this.code,message:this.message}},Jr.prototype.toJSON=function(){return this.A()};var ei="auth/",ni={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ri(t){var e=xn(t=Sn(t),ii)||null,n=xn(t,oi)||null,r=xn(t,ui)||null;if(r=r&&li[r]||null,!e||!n||!r)throw new Jr("argument-error",ii+", "+oi+"and "+ui+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:xn(t,ai)||null,languageCode:xn(t,si)||null,tenantId:xn(t,ci)||null})}var ii="apiKey",oi="oobCode",ai="continueUrl",si="languageCode",ui="mode",ci="tenantId",li={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Hr,verifyEmail:"VERIFY_EMAIL"};function hi(t){try{return new ri(t)}catch(t){return null}}function di(t){var e=t[vi];if(void 0===e)throw new Jr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Jr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[fi];if(n&&"object"==typeof n){e=n[wi];var r=n[yi];if(n=n[bi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Jr("argument-error",yi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Jr("argument-error",bi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Jr("argument-error",wi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Jr("missing-android-pkg-name")}}else if(void 0!==n)throw new Jr("argument-error",fi+" property must be a non null object when specified.");if(this.f=null,(e=t[gi])&&"object"==typeof e){if("string"==typeof(e=e[_i])&&e.length)this.f=e;else if(void 0!==e)throw new Jr("argument-error",_i+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Jr("argument-error",gi+" property must be a non null object when specified.");if(void 0!==(e=t[mi])&&"boolean"!=typeof e)throw new Jr("argument-error",mi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Jr("argument-error",pi+" property must be a non empty string when specified.");this.i=t||null}var fi="android",pi="dynamicLinkDomain",mi="handleCodeInApp",gi="iOS",vi="url",yi="installApp",bi="minimumVersion",wi="packageName",_i="bundleId";function ki(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ei=null,xi=null;function Si(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=xi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ei){Ei={},xi={};for(var t=0;65>t;t++)Ei[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),xi[Ei[t]]=t,62<=t&&(xi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Ti(t){this.f=t.sub,this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Ci(t){return(t=Ii(t))&&t.sub&&t.iss&&t.aud&&t.exp?new Ti(t):null}function Ii(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Si(t))}catch(t){}return null}Ti.prototype.R=function(){return this.c},Ti.prototype.g=function(){return this.b};var Ai,Pi={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Mi(t){for(var e in Pi)if(Pi[e].id===t)return{firebaseEndpoint:(t=Pi[e]).cb,secureTokenEndpoint:t.ib};return null}Ai=Mi("__EID__")?"__EID__":void 0;var Ni="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Li=["client_id","response_type","scope","redirect_uri","state"],Di={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Li},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Li},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Li},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ni},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Ri(t){for(var e in Di)if(Di[e].Fa==t)return Di[e];return null}function Oi(t){var e={};e["facebook.com"]=qi,e["google.com"]=Vi,e["github.com"]=$i,e["twitter.com"]=zi;var n=t&&t[Ui];try{if(n)return e[n]?new e[n](t):new ji(t);if(void 0!==t[Bi])return new Fi(t)}catch(t){}return null}var Bi="idToken",Ui="providerId";function Fi(t){var e=t[Ui];if(!e&&t[Bi]){var n=Ci(t[Bi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),jr(this,"providerId",e),jr(this,"isNewUser",n)}function ji(t){Fi.call(this,t),jr(this,"profile",Vr((t=Ir(t.rawUserInfo||"{}"))||{}))}function qi(t){if(ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function $i(t){if(ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function Vi(t){if(ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function Hi(t){var e=Sn(t),n=xn(e,"link"),r=xn(Sn(n),"link");return e=xn(e,"deep_link_id"),xn(Sn(e),"link")||e||r||n||t}function Gi(){}function Wi(t,e){return t.then((function(t){if(t[Ra]){var n=Ci(t[Ra]);if(!n||e!=n.f)throw new Jr("user-mismatch");return t}throw new Jr("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==ei+"user-not-found"?new Jr("user-mismatch"):t}))}function Ki(t,e){if(!e)throw new Jr("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function Zi(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Qi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Ki(t.providerId,t.pendingToken)}catch(t){}return null}function Yi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Jr("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function Xi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Ji(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Yi(t.providerId,e,t.signInMethod)}catch(t){}}return null}function to(t,e){this.Fc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(Ri(t)||{}).Ea||null,this.bb=null}function eo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Jr("argument-error",'SAML provider IDs must be prefixed with "saml."');to.call(this,t,[])}function no(t){to.call(this,t,Li),this.a=[]}function ro(){no.call(this,"facebook.com")}function io(t){if(!t)throw new Jr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new ro).credential({accessToken:e})}function oo(){no.call(this,"github.com")}function ao(t){if(!t)throw new Jr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new oo).credential({accessToken:e})}function so(){no.call(this,"google.com"),this.ya("profile")}function uo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new so).credential({idToken:n,accessToken:e})}function co(){to.call(this,"twitter.com",Ni)}function lo(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Jr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Yi("twitter.com",n,"twitter.com")}function ho(t,e,n){this.a=t,this.c=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===po.EMAIL_LINK_SIGN_IN_METHOD?po.EMAIL_LINK_SIGN_IN_METHOD:po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function fo(t){return t&&t.email&&t.password?new ho(t.email,t.password,t.signInMethod):null}function po(){qr(this,{providerId:"password",isOAuthProvider:!1})}function mo(t,e){if(!(e=go(e)))throw new Jr("argument-error","Invalid email link!");return new ho(t,e.code,po.EMAIL_LINK_SIGN_IN_METHOD)}function go(t){return(t=hi(t=Hi(t)))&&t.operation===Hr?t:null}function vo(t){if(!(t.Va&&t.Ua||t.Ha&&t.ba))throw new Jr("internal-error");this.a=t,jr(this,"providerId","phone"),jr(this,"signInMethod","phone")}function yo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return F(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new vo(e)}return null}function bo(t){return t.a.Ha&&t.a.ba?{temporaryProof:t.a.Ha,phoneNumber:t.a.ba}:{sessionInfo:t.a.Va,code:t.a.Ua}}function wo(t){try{this.a=t||e.auth()}catch(t){throw new Jr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function _o(t,e){if(!t)throw new Jr("missing-verification-id");if(!e)throw new Jr("missing-verification-code");return new vo({Va:t,Ua:e})}function ko(t){if(t.temporaryProof&&t.phoneNumber)return new vo({Ha:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return uo(o,n);case"facebook.com":return io(n);case"github.com":return ao(n);case"twitter.com":return lo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Ki(e,a):new Yi(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new no(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Eo(t){if(!t.isOAuthProvider)throw new Jr("invalid-oauth-provider")}function xo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Jr("invalid-auth-event");if(this.g&&this.a)throw new Jr("invalid-auth-event");if(this.g&&!this.f)throw new Jr("invalid-auth-event")}function So(t){return(t=t||{}).type?new xo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&ti(t.error),t.postBody,t.tenantId):null}function To(){this.b=null,this.a=[]}T(ji,Fi),T(qi,ji),T($i,ji),T(Vi,ji),T(zi,ji),Ki.prototype.na=function(t){return Ja(t,Zi(this))},Ki.prototype.b=function(t,e){var n=Zi(this);return n.idToken=e,ts(t,n)},Ki.prototype.f=function(t,e){return Wi(es(t,Zi(this)),e)},Ki.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Yi.prototype.na=function(t){return Ja(t,Xi(this))},Yi.prototype.b=function(t,e){var n=Xi(this);return n.idToken=e,ts(t,n)},Yi.prototype.f=function(t,e){return Wi(es(t,Xi(this)),e)},Yi.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},to.prototype.Ga=function(t){return this.zb=Z(t),this},T(eo,to),T(no,to),no.prototype.ya=function(t){return $(this.a,t)||this.a.push(t),this},no.prototype.Hb=function(){return G(this.a)},no.prototype.credential=function(t,e){var n;if(!(n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Jr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Yi(this.providerId,n,this.providerId)},T(ro,no),jr(ro,"PROVIDER_ID","facebook.com"),jr(ro,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(oo,no),jr(oo,"PROVIDER_ID","github.com"),jr(oo,"GITHUB_SIGN_IN_METHOD","github.com"),T(so,no),jr(so,"PROVIDER_ID","google.com"),jr(so,"GOOGLE_SIGN_IN_METHOD","google.com"),T(co,to),jr(co,"PROVIDER_ID","twitter.com"),jr(co,"TWITTER_SIGN_IN_METHOD","twitter.com"),ho.prototype.na=function(t){return this.signInMethod==po.EMAIL_LINK_SIGN_IN_METHOD?Ps(t,cs,{email:this.a,oobCode:this.c}):Ps(t,Ts,{email:this.a,password:this.c})},ho.prototype.b=function(t,e){return this.signInMethod==po.EMAIL_LINK_SIGN_IN_METHOD?Ps(t,ls,{idToken:e,email:this.a,oobCode:this.c}):Ps(t,ws,{idToken:e,email:this.a,password:this.c})},ho.prototype.f=function(t,e){return Wi(this.na(t),e)},ho.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},qr(po,{PROVIDER_ID:"password"}),qr(po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),vo.prototype.na=function(t){return t.Wa(bo(this))},vo.prototype.b=function(t,e){var n=bo(this);return n.idToken=e,Ps(t,Is,n)},vo.prototype.f=function(t,e){var n=bo(this);return n.operation="REAUTH",Wi(t=Ps(t,As,n),e)},vo.prototype.A=function(){var t={providerId:"phone"};return this.a.Va&&(t.verificationId=this.a.Va),this.a.Ua&&(t.verificationCode=this.a.Ua),this.a.Ha&&(t.temporaryProof=this.a.Ha),this.a.ba&&(t.phoneNumber=this.a.ba),t},wo.prototype.Wa=function(t,e){var n=this.a.b;return te(e.verify()).then((function(r){if(!u(r))throw new Jr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Ps(t,ys,e)}(n,{phoneNumber:t,recaptchaToken:r}).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new Jr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},qr(wo,{PROVIDER_ID:"phone"}),qr(wo,{PHONE_SIGN_IN_METHOD:"phone"}),xo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},xo.prototype.R=function(){return this.h},xo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Co,Io=null;function Ao(t){var e="unauthorized-domain",n=void 0,r=Sn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Jr.call(this,e,n)}function Po(t,e,n){Jr.call(this,t,n),(t=e||{}).Ab&&jr(this,"email",t.Ab),t.ba&&jr(this,"phoneNumber",t.ba),t.credential&&jr(this,"credential",t.credential),t.Qb&&jr(this,"tenantId",t.Qb)}function Mo(t){if(t.code){var e=t.code||"";0==e.indexOf(ei)&&(e=e.substring(ei.length));var n={credential:ko(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new Jr(e,t.message||void 0);return new Po(e,n,t.message)}return null}function No(){}function Lo(t){return t.c||(t.c=t.b())}function Do(){}function Ro(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Oo(){}function Bo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.fc,this),this.a.onerror=E(this.Ib,this),this.a.onprogress=E(this.gc,this),this.a.ontimeout=E(this.kc,this)}function Uo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Fo(t,e,n){this.reset(t,e,n,void 0,void 0)}function jo(t){this.f=t,this.b=this.c=this.a=null}function qo(t,e){this.name=t,this.value=e}T(Ao,Jr),T(Po,Jr),Po.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&Y(t,e),t},Po.prototype.toJSON=function(){return this.A()},No.prototype.c=null,T(Do,No),Do.prototype.a=function(){var t=Ro(this);return t?new ActiveXObject(t):new XMLHttpRequest},Do.prototype.b=function(){var t={};return Ro(this)&&(t[0]=!0,t[1]=!0),t},Co=new Do,T(Oo,No),Oo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Bo;throw Error("Unsupported browser")},Oo.prototype.b=function(){return{}},(t=Bo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Uo(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Uo(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Uo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Fo.prototype.a=null,Fo.prototype.reset=function(t,e,n,r,i){delete this.a},qo.prototype.toString=function(){return this.name};var $o=new qo("SEVERE",1e3),Vo=new qo("WARNING",900),zo=new qo("CONFIG",700),Ho=new qo("FINE",500);jo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(P("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new Fo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Go={},Wo=null;function Ko(t){var e;if(Wo||(Wo=new jo(""),Go[""]=Wo,Wo.c=zo),!(e=Go[t])){e=new jo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Ko(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Go[t]=e}return e}function Zo(t,e){t&&t.log(Ho,e,void 0)}function Qo(t){this.f=t}function Yo(t){sn.call(this),this.o=t,this.readyState=Xo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Ko("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(Qo,No),Qo.prototype.a=function(){return new Yo(this.f)},Qo.prototype.b=function(t){return function(){return t}}({}),T(Yo,sn);var Xo=0;function Jo(t){t.c.read().then(t.ec.bind(t)).catch(t.Oa.bind(t))}function ta(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ea(t)}function ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function na(t){sn.call(this),this.headers=new mn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=ra,this.v=this.P=!1}(t=Yo.prototype).open=function(t,e){if(this.readyState!=Xo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ea(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ta(this,!1)),this.readyState=Xo},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ea(this)),this.a&&(this.readyState=3,ea(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Jo(this)):t.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ta(this,!0):ea(this),3==this.readyState&&Jo(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,ta(this,!0))},t.hc=function(t){this.a&&(this.response=t,ta(this,!0))},t.Oa=function(t){var e=this.h;e&&e.log(Vo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ta(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Vo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Vo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},T(na,sn);var ra="";na.prototype.b=Ko("goog.net.XhrIo");var ia=/^https?$/i,oa=["POST","PUT"];function aa(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.O=n,t.I=!1,t.c=!0,t.a=t.B?t.B.a():Co.a(),t.w=t.B?Lo(t.B):Lo(Co),t.a.onreadystatechange=E(t.Lb,t);try{Zo(t.b,ma(t,"Opening Xhr")),t.J=!0,t.a.open(n,String(e),!0),t.J=!1}catch(e){return Zo(t.b,ma(t,"Error opening Xhr: "+e.message)),void ua(t,e)}e=r||"";var o=new mn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(g(t)||u(t))F(t,e,void 0);else for(var n=pn(t),r=fn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=sa,n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:u(t)?t.charAt(e):t[e]}(o.X()),r=s.FormData&&e instanceof s.FormData,!$(oa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{da(t),0<t.g&&(t.v=function(t){return we&&Me(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Zo(t.b,ma(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ia,t)):t.o=hn(t.Ia,t.g,t)),Zo(t.b,ma(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Zo(t.b,ma(t,"Send error: "+e.message)),ua(t,e)}}function sa(t){return"content-type"==t.toLowerCase()}function ua(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ca(t),ha(t)}function ca(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function la(t){if(t.c&&void 0!==a)if(t.w[1]&&4==fa(t)&&2==pa(t))Zo(t.b,ma(t,"Local request error detected and ignored"));else if(t.i&&4==fa(t))hn(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==fa(t)){Zo(t.b,ma(t,"Request complete")),t.c=!1;try{var e,n=pa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(yn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ia.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<fa(t)?t.a.statusText:""}catch(e){Zo(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+pa(t)+"]",ca(t)}}finally{ha(t)}}}function ha(t,e){if(t.a){da(t);var n=t.a,r=t.w[0]?d:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log($o,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function da(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(s.clearTimeout(t.o),t.o=null)}function fa(t){return t.a?t.a.readyState:0}function pa(t){try{return 2<fa(t)?t.a.status:-1}catch(t){return-1}}function ma(t,e){return e+" ["+t.O+" "+t.l+" "+pa(t)+"]"}function ga(t){var e=Ca;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function va(t,e,n){t.a=!0,t.c=n,t.f=!e,_a(t)}function ya(t){if(t.a){if(!t.u)throw new ka(t);t.u=!1}}function ba(t,e,n,r){t.g.push([e,n,r]),t.a&&_a(t)}function wa(t){return q(t.g,(function(t){return v(t[1])}))}function _a(t){if(t.h&&t.a&&wa(t)){var e=t.h,n=Sa[e];n&&(s.clearTimeout(n.a),delete Sa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(C(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,wa(t)||(n=!0)}}t.c=e,r&&(u=E(t.m,t,!0),r=E(t.m,t,!1),e instanceof ga?(ba(e,u,r),e.w=!0):e.then(u,r)),n&&(e=new xa(e),Sa[e.a]=e,t.h=e.a)}function ka(){I.call(this)}function Ea(){I.call(this)}function xa(t){this.a=s.setTimeout(E(this.c,this),0),this.b=t}(t=na.prototype).Ia=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Zo(this.b,ma(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Zo(this.b,ma(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ha(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ha(this,!0)),na.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?la(this):this.yc())},t.yc=function(){la(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ra:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log($o,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Zo(this.b,"Can not get response: "+t.message),null}},ga.prototype.cancel=function(t){if(this.a)this.c instanceof ga&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new Ea(this),ya(this),va(this,!1,t))}},ga.prototype.m=function(t,e){this.i=!1,va(this,t,e)},ga.prototype.then=function(t,e,n){var r,i,o=new Wt((function(t,e){r=t,i=e}));return ba(this,r,(function(t){t instanceof Ea?o.cancel():i(t)})),o.then(t,e,n)},ga.prototype.$goog_Thenable=!0,T(ka,I),ka.prototype.message="Deferred has already fired",ka.prototype.name="AlreadyCalledError",T(Ea,I),Ea.prototype.message="Deferred was canceled",Ea.prototype.name="CanceledError",xa.prototype.c=function(){throw delete Sa[this.a],this.b};var Sa={};function Ta(t){var e,n=document,r=it(t).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},a=new ga(o);return e=window.setTimeout((function(){Ia(i,!0);var t=new Ma(Pa,"Timeout reached for loading script "+r);ya(a),va(a,!1,t)}),5e3),o.Ia=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ia(i,!1,e),ya(a),va(a,!0,null))},i.onerror=function(){Ia(i,!0,e);var t=new Ma(Aa,"Error while loading script "+r);ya(a),va(a,!1,t)},Y(o={},{type:"text/javascript",charset:"UTF-8"}),Hn(i,o),function(t,e){B(t,"HTMLScriptElement"),t.src=it(e),null===h&&(h=(e=(e=s.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ca(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&Ia(t,!0,this.Ia)}}function Ia(t,e,n){null!=n&&s.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Aa=0,Pa=1;function Ma(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),I.call(this,n),this.code=t}function Na(t){this.f=t}function La(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||Oa,this.g=Z(t.secureTokenHeaders||Ba),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||Ua,this.a=Z(t.firebaseHeaders||Fa),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==dr(),!(r=s.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!hr())throw new Jr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new Qo(self):fr()?this.f=new Na(r):this.f=new Oo,this.b=null}T(Ma,I),T(Na,No),Na.prototype.a=function(){return new this.f},Na.prototype.b=function(){return{}};var Da,Ra="idToken",Oa=new Nr(3e4,6e4),Ba={"Content-Type":"application/x-www-form-urlencoded"},Ua=new Nr(3e4,6e4),Fa={"Content-Type":"application/json"};function ja(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function qa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function $a(t,e,n,r,i,o,a){(function(){var t=br();return!((t=gr(t)!=mr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!we||!Ae||9<Ae)})()||hr()?t=E(t.o,t):(Da||(Da=new Wt((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[za]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ba(t,null,e,void 0)}(Ta(ot(Va,{onload:za})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=E(t.m,t)),t(e,n,r,i,o,a)}La.prototype.R=function(){return this.b},La.prototype.o=function(t,e,n,r,i,o){if(hr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new Jr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new na(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}un(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Zo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),cn(a,"ready",(function(){u&&clearTimeout(u),me(this)})),cn(a,"timeout",(function(){u&&clearTimeout(u),me(this),e&&e(null)})),aa(a,t,n,r,i)};var Va=new X(et,"https://apis.google.com/js/client.js?onload=%{onload}"),za="__fcb"+Math.floor(1e6*Math.random()).toString();function Ha(t){if(!u(t=t.email)||!sr.test(t))throw new Jr("invalid-email")}function Ga(t){"email"in t&&Ha(t)}function Wa(t){if(!t[Ra])throw new Jr("internal-error")}function Ka(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Jr("internal-error")}else{if(!t.sessionInfo)throw new Jr("missing-verification-id");if(!t.code)throw new Jr("missing-verification-code")}}La.prototype.m=function(t,e,n,r,i){var o=this;Da.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},La.prototype.ob=function(){return Ps(this,_s,{})},La.prototype.rb=function(t,e){return Ps(this,bs,{idToken:t,email:e})},La.prototype.sb=function(t,e){return Ps(this,ws,{idToken:t,password:e})};var Za={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Qa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Jr("internal-error")}function Ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Fn(t=new Rn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Xa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Mo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Mo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Mo(t)):t.errorMessage&&(e=Ms(t.errorMessage)),e)throw e;if(!t[Ra])throw new Jr("internal-error")}function Ja(t,e){return e.returnIdpCredential=!0,Ps(t,ks,e)}function ts(t,e){return e.returnIdpCredential=!0,Ps(t,xs,e)}function es(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ps(t,Es,e)}function ns(t){if(!t.oobCode)throw new Jr("invalid-action-code")}(t=La.prototype).tb=function(t,e){var n={idToken:t},r=[];return W(Za,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ps(this,bs,n)},t.kb=function(t,e){return Y(t={requestType:"PASSWORD_RESET",email:t},e),Ps(this,ps,t)},t.lb=function(t,e){return Y(t={requestType:"EMAIL_SIGNIN",email:t},e),Ps(this,ds,t)},t.jb=function(t,e){return Y(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ps(this,fs,t)},t.Wa=function(t){return Ps(this,Cs,t)},t.ab=function(t,e){return Ps(this,vs,{oobCode:t,newPassword:e})},t.Ma=function(t){return Ps(this,is,{oobCode:t})},t.Ya=function(t){return Ps(this,rs,{oobCode:t})};var rs={endpoint:"setAccountInfo",D:ns,fa:"email",F:!0},is={endpoint:"resetPassword",D:ns,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Jr("internal-error")},F:!0},os={endpoint:"signupNewUser",D:function(t){if(Ha(t),!t.password)throw new Jr("weak-password")},K:Wa,T:!0,F:!0},as={endpoint:"createAuthUri",F:!0},ss={endpoint:"deleteAccount",V:["idToken"]},us={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!m(t.deleteProvider))throw new Jr("internal-error")}},cs={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Ha,K:Wa,T:!0,F:!0},ls={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Ha,K:Wa,T:!0},hs={endpoint:"getAccountInfo"},ds={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Jr("internal-error");Ha(t)},fa:"email",F:!0},fs={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Jr("internal-error")},fa:"email",F:!0},ps={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Jr("internal-error");Ha(t)},fa:"email",F:!0},ms={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},gs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new Jr("internal-error")}},vs={endpoint:"resetPassword",D:ns,fa:"email",F:!0},ys={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},bs={endpoint:"setAccountInfo",V:["idToken"],D:Ga,T:!0},ws={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(Ga(t),!t.password)throw new Jr("weak-password")},K:Wa,T:!0},_s={endpoint:"signupNewUser",K:Wa,T:!0,F:!0},ks={endpoint:"verifyAssertion",D:Qa,Ra:Ya,K:Xa,T:!0,F:!0},Es={endpoint:"verifyAssertion",D:Qa,Ra:Ya,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Jr("user-not-found");if(t.errorMessage)throw Ms(t.errorMessage);if(!t[Ra])throw new Jr("internal-error")},T:!0,F:!0},xs={endpoint:"verifyAssertion",D:function(t){if(Qa(t),!t.idToken)throw new Jr("internal-error")},Ra:Ya,K:Xa,T:!0},Ss={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Jr("invalid-custom-token")},K:Wa,T:!0,F:!0},Ts={endpoint:"verifyPassword",D:function(t){if(Ha(t),!t.password)throw new Jr("wrong-password")},K:Wa,T:!0,F:!0},Cs={endpoint:"verifyPhoneNumber",D:Ka,K:Wa,F:!0},Is={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Jr("internal-error");Ka(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Mo(t);Wa(t)}},As={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ka,K:Wa,F:!0};function Ps(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.V))return ee(new Jr("internal-error"));var r,i=e.Kb||"POST";return te(n).then(e.D).then((function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o){var a=Sn(t.h+e);En(a,"key",t.c),o&&En(a,"cb",S().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&En(a,u,r[u]);return new Wt((function(e,o){$a(t,a.toString(),(function(t){t?t.error?o(Ns(t,i||{})):e(t):o(new Jr("network-request-failed"))}),n,s?void 0:Zn(Cr(r)),t.a,t.i.get())}))}(t,e.endpoint,i,n,e.Yb,e.wb||!1)})).then((function(t){return r=t,e.Ra?e.Ra(n,r):r})).then(e.K).then((function(){if(!e.fa)return r;if(!(e.fa in r))throw new Jr("internal-error");return r[e.fa]}))}function Ms(t){return Ns({error:{errors:[{message:t}],code:400,message:t}})}function Ns(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Jr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Jr(r[i],e);return!e&&t&&(e=Tr(t)),new Jr("internal-error",e)}function Ls(t){this.b=t,this.a=null,this.gb=function(t){return(Bs||(Bs=new Wt((function(t,e){function n(){Mr(),wr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Mr(),e(Error("Network Error"))},timeout:Rs.get()})}if(wr("gapi.iframes.Iframe"))t();else if(wr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){wr("gapi.load")?n():e(Error("Network Error"))},te(Ta(r=ot(Ds,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw Bs=null,t})))).then((function(){return new Wt((function(e,n){wr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Os.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Ds=new X(et,"https://apis.google.com/js/api.js?onload=%{onload}"),Rs=new Nr(3e4,6e4),Os=new Nr(5e3,15e3),Bs=null;function Us(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Tn(this.i,"/__/auth/iframe"),En(this.a,"apiKey",this.g),En(this.a,"appName",this.h),this.b=null,this.c=[]}function Fs(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function js(t){try{return e.app(t).auth().Ca()}catch(t){return[]}}function qs(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function $s(t){var e=er();return function(t){return Ps(t,ms,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Sn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Sn(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:ar.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ao(er())}))}function Vs(t){return t.l?t.l:(t.l=ur().then((function(){if(!t.o){var e=t.c,n=t.h,r=js(t.b),i=new Us(t.u,t.f,t.b);i.f=e,i.b=n,i.c=G(r||[]),t.o=i.toString()}t.i=new Ls(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.gb.then((function(){t.a.register("authEvent",e,wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=So(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",te(n)}return n.status="ERROR",te(n)}))}(t)})),t.l)}function zs(t){return t.m||(t.v=t.c?yr(t.c,js(t.b)):null,t.m=new La(t.f,Mi(t.h),t.v)),t.m}function Hs(t,e,n,r,i,o,a,s,u,c,l){return(t=new Fs(t,e,n,r,i)).l=o,t.g=a,t.i=s,t.b=Z(u||null),t.f=c,t.nb(l).toString()}function Gs(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Jr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ws(t){this.b=t,this.a={},this.f=E(this.c,this)}Us.prototype.toString=function(){return this.f?En(this.a,"v",this.f):Un(this.a.a,"v"),this.b?En(this.a,"eid",this.b):Un(this.a.a,"eid"),this.c.length?En(this.a,"fw",this.c.join(",")):Un(this.a.a,"fw"),this.a.toString()},Fs.prototype.nb=function(t){return this.h=t,this},Fs.prototype.toString=function(){var t=Tn(this.o,"/__/auth/handler");if(En(t,"apiKey",this.m),En(t,"appName",this.c),En(t,"authType",this.u),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().ha()}catch(t){r=null}for(var i in n.bb=r,En(t,"providerId",this.a.providerId),r=Cr((n=this.a).zb))r[i]=r[i].toString();i=n.Fc,r=Z(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.eb&&n.bb&&!r[n.eb]&&(r[n.eb]=n.bb),K(r)||En(t,"customParameters",Tr(r))}if("function"==typeof this.a.Hb&&((n=this.a.Hb()).length&&En(t,"scopes",n.join(","))),this.l?En(t,"redirectUrl",this.l):Un(t.a,"redirectUrl"),this.g?En(t,"eventId",this.g):Un(t.a,"eventId"),this.i?En(t,"v",this.i):Un(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!xn(t,s)&&En(t,s,this.b[s]);return this.h?En(t,"tid",this.h):Un(t.a,"tid"),this.f?En(t,"eid",this.f):Un(t.a,"eid"),(s=js(this.c)).length&&En(t,"fw",s.join(",")),t.toString()},(t=qs.prototype).Fb=function(t,e,n){var r=new Jr("popup-closed-by-user"),i=new Jr("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){(function(t){var e={type:"webStorageSupport"};return Vs(t).then((function(){return function(t,e){return t.gb.then((function(){return new Wt((function(n){t.a.send(e.type,e,n,wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&ir(t),e(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(t){return new Wt((function(e){return function n(){dn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return dn(n).then((function(){e(r)}))}))},t.Ob=function(){var t=br();return!Sr(t)&&!Pr(t)},t.Jb=function(){return!1},t.Db=function(t,e,n,r,i,o,a,s){if(!t)return ee(new Jr("popup-blocked"));if(a&&!Sr())return this.ia().s((function(e){ir(t),i(e)})),r(),te();this.a||(this.a=$s(zs(this)));var u=this;return this.a.then((function(){var e=u.ia().s((function(e){throw ir(t),i(e),e}));return r(),e})).then((function(){(Eo(n),a)||nr(Hs(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Eb=function(t,e,n,r){this.a||(this.a=$s(zs(this)));var i=this;return this.a.then((function(){Eo(e),nr(Hs(i.u,i.f,i.b,t,e,er(),n,i.c,void 0,i.h,r))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ia=function(){var t=this;return Vs(this).then((function(){return t.i.gb})).s((function(){throw t.a=null,new Jr("network-request-failed")}))},t.Rb=function(){return!0},t.Aa=function(t){this.g.push(t)},t.Na=function(t){z(this.g,(function(e){return e==t}))},(t=Gs.prototype).get=function(t){return te(this.a.getItem(t)).then((function(t){return t&&Ir(t)}))},t.set=function(t,e){return te(this.a.setItem(t,Tr(e)))},t.S=function(t){return te(this.a.removeItem(t))},t.$=function(){},t.ea=function(){};var Ks,Zs=[];function Qs(t,e,n){K(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ys(t){this.a=t}function Xs(t){this.c=t,this.b=!1,this.a=[]}function Js(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return ee(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Wt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return tu(t,c),e})).s((function(e){throw tu(t,c),e}))}function tu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(t.a,(function(t){return t==e}))}}function eu(){if(!iu())throw new Jr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;hr()&&self?(this.l=function(){var t=hr()?self:null;if(F(Zs,(function(n){n.b==t&&(e=n)})),!e){var e=new Ws(t);Zs.push(e)}return e}(),Qs(this.l,"keyChanged",(function(e,n){return cu(t).then((function(e){return 0<e.length&&F(t.a,(function(t){t(e)})),{keyProcessed:$(e,n.key)}}))})),Qs(this.l,"ping",(function(){return te(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?te().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):te(null)}().then((function(e){(t.h=e)&&(t.g=new Xs(new Ys(e)),Js(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&$(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function nu(t){return new Wt((function(e,n){var r=t.u.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Wt((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return nu(t)})).then((function(t){e(t)})).s((function(t){n(t)}))}}))}function ru(t){return t.m||(t.m=nu(t)),t.m}function iu(){try{return!!s.indexedDB}catch(t){return!1}}function ou(t){return t.objectStore("firebaseLocalStorage")}function au(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function su(t){return new Wt((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function uu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Js(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):te()}function cu(t){return ru(t).then((function(t){var e=ou(au(t,!1));return e.getAll?su(e.getAll()):new Wt((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function lu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function hu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=te().then((function(){if(iu()){var t=Ar(),r="__sak"+t;return Ks||(Ks=new eu),(n=Ks).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.$((function(t){F(e.a,(function(e){e(t)}))})),t}))}function du(){this.a={},this.type="inMemory"}function fu(){if(!function(){var t="Node"==dr();if(!(t=pu()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==dr())throw new Jr("internal-error","The LocalStorage compatibility library was not found.");throw new Jr("web-storage-unsupported")}this.a=pu()||e.INTERNAL.node.localStorage,this.type="localStorage"}function pu(){try{var t=s.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function mu(){this.type="nullStorage"}function gu(){if(!function(){var t="Node"==dr();if(!(t=vu()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==dr())throw new Jr("internal-error","The SessionStorage compatibility library was not found.");throw new Jr("web-storage-unsupported")}this.a=vu()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function vu(){try{var t=s.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function yu(){var t={};t.Browser=_u,t.Node=ku,t.ReactNative=Eu,t.Worker=xu,this.a=t[dr()]}Ws.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];F(r,(function(e){i.push(te().then((function(){return e(t.origin,t.data.data)})))})),re(i).then((function(r){var i=[];F(r,(function(t){i.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})})),F(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Ys.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Xs.prototype.close=function(){for(;0<this.a.length;)tu(this,this.a[0]);this.b=!0},(t=eu.prototype).set=function(t,e){var n,r=!1,i=this;return ru(this).then((function(e){return su((e=ou(au(n=e,!0))).get(t))})).then((function(o){var a=ou(au(n,!0));return o?(o.value=e,su(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,su(a.add(o)))})).then((function(){return i.c[t]=e,uu(i,t)})).ka((function(){r&&i.b--}))},t.get=function(t){return ru(this).then((function(e){return su(ou(au(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.S=function(t){var e=!1,n=this;return ru(this).then((function(r){return e=!0,n.b++,su(ou(au(r,!0)).delete(t))})).then((function(){return delete n.c[t],uu(n,t)})).ka((function(){e&&n.b--}))},t.$=function(t){0==this.a.length&&function(t){lu(t),function e(){t.f=setTimeout((function(){t.i=cu(t).then((function(e){0<e.length&&F(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ea=function(t){z(this.a,(function(e){return e==t})),0==this.a.length&&lu(this)},(t=hu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.S=function(t){return this.b.then((function(e){return e.S(t)}))},t.$=function(t){this.a.push(t)},t.ea=function(t){z(this.a,(function(e){return e==t}))},(t=du.prototype).get=function(t){return te(this.a[t])},t.set=function(t,e){return this.a[t]=e,te()},t.S=function(t){return delete this.a[t],te()},t.$=function(){},t.ea=function(){},(t=fu.prototype).get=function(t){var e=this;return te().then((function(){return Ir(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return te().then((function(){var r=Tr(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return te().then((function(){e.a.removeItem(t)}))},t.$=function(t){s.window&&Ke(s.window,"storage",t)},t.ea=function(t){s.window&&Ye(s.window,"storage",t)},(t=mu.prototype).get=function(){return te(null)},t.set=function(){return te()},t.S=function(){return te()},t.$=function(){},t.ea=function(){},(t=gu.prototype).get=function(t){var e=this;return te().then((function(){return Ir(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return te().then((function(){var r=Tr(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return te().then((function(){e.a.removeItem(t)}))},t.$=function(){},t.ea=function(){};var bu,wu,_u={C:fu,Ta:gu},ku={C:fu,Ta:gu},Eu={C:Gs,Ta:mu},xu={C:fu,Ta:mu},Su={ad:"local",NONE:"none",cd:"session"};function Tu(){var t=!(Pr(br())||!lr()),e=Sr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},bu||(bu=new yu),t=bu;try{this.g=!tr()&&Rr()||!s.indexedDB?new t.a.C:new hu(hr()?new du:new t.a.C)}catch(t){this.g=new du,this.h=!0}try{this.i=new t.a.Ta}catch(t){this.i=new du}this.u=new du,this.f=E(this.Pb,this),this.b={}}function Cu(){return wu||(wu=new Tu),wu}function Iu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Au(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Pu(t,e,n){return n=Au(e,n),"local"==e.C&&(t.b[n]=null),Iu(t,e.C).S(n)}function Mu(t){t.c&&(clearInterval(t.c),t.c=null)}function Nu(t){this.a=t,this.b=Cu()}(t=Tu.prototype).get=function(t,e){return Iu(this,t.C).get(Au(t,e))},t.set=function(t,e,n){var r=Au(t,n),i=this,o=Iu(this,t.C);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.C&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=Au(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),K(this.a)&&(Iu(this,"local").$(this.f),this.h||(tr()||!Rr())&&s.indexedDB||!this.l||function(t){Mu(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Be({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Au(t,e),this.a[t]&&(z(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),K(this.a)&&(Iu(this,"local").ea(this.f),Mu(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Iu(this,"local").ea(this.f):Mu(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.$a(e))},we&&Ae&&10==Ae&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else F(t,E(this.$a,this))},t.$a=function(t){this.a[t]&&F(this.a[t],(function(t){t()}))};var Lu,Du={name:"authEvent",C:"local"};function Ru(){this.a=Cu()}function Ou(t,e){this.b=Bu,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0!==Lu||(Lu=s.Int32Array?new Int32Array(zu):zu),this.reset()}T(Ou,(function(){this.b=-1}));for(var Bu=64,Uu=Bu-1,Fu=[],ju=0;ju<Uu;ju++)Fu[ju]=0;var qu=H(128,Fu);function $u(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Lu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Vu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(u(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&($u(t),i=0);else{if(!g(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&($u(t),i=0)}}t.c=i,t.g+=n}Ou.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):G(this.h)};var zu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Hu(){Ou.call(this,8,Gu)}T(Hu,Ou);var Gu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Wu(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new Ru,this.g=new Nu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ku(t){return new Jr("invalid-cordova-configuration",t)}function Zu(t){var e=new Hu;Vu(e,t),t=[];var n=8*e.g;56>e.c?Vu(e,qu,56-e.c):Vu(e,qu,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for($u(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return j(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Qu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Yu(t){return t.f||(t.f=t.ia().then((function(){return new Wt((function(e){t.Aa((function n(r){return e(r),t.Na(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Xu(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Hi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ir(xn(o=Sn(i),"firebaseError")||null))?ti(o):null)?new xo(r.c,r.b,null,null,o,null,r.R()):new xo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Qu(t,i)}))}var n=new xo("unknown",null,null,null,new Jr("no-auth-event")),r=!1,i=dn(500).then((function(){return Xu(t).then((function(){r||Qu(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(wr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Io||(Io=new To),function(t){var e=Io;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=wr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Xu(t){var e=null;return function(t){return t.b.get(Du,t.a).then((function(t){return So(t)}))}(t.g).then((function(n){return e=n,Pu((n=t.g).b,Du,n.a)})).then((function(){return e}))}function Ju(t){this.a=t,this.b=Cu()}(t=Wu.prototype).ia=function(){return this.Da?this.Da:this.Da=(cr(void 0)?ur().then((function(){return new Wt((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ee(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof wr("universalLinks.subscribe",s))throw Ku("cordova-universal-links-plugin-fix is not installed");if(void 0===wr("BuildInfo.packageName",s))throw Ku("cordova-plugin-buildinfo is not installed");if("function"!=typeof wr("cordova.plugins.browsertab.openUrl",s))throw Ku("cordova-plugin-browsertab is not installed");if("function"!=typeof wr("cordova.InAppBrowser.open",s))throw Ku("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Jr("cordova-not-ready")}))},t.Fb=function(t,e){return e(new Jr("operation-not-supported-in-this-environment")),te()},t.Db=function(){return ee(new Jr("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(t,e,n,r){if(this.c)return ee(new Jr("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=te().then((function(){return Eo(e),Yu(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new xo(e,r,null,o,new Jr("no-auth-event"),null,i),u=wr("BuildInfo.packageName",s);if("string"!=typeof u)throw new Jr("invalid-cordova-configuration");var c=wr("BuildInfo.displayName",s),l={};if(br().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!br().toLowerCase().match(/android/))return ee(new Jr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Zu(o),l.sessionId=o;var h=Hs(t.u,t.i,t.l,e,n,null,r,t.m,l,t.o,i);return t.ia().then((function(){var e=t.h;return t.v.a.set(Du,a.A(),e)})).then((function(){var e=wr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new Jr("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=wr("cordova.plugins.browsertab.openUrl",s)))throw new Jr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=wr("cordova.InAppBrowser.open",s)))throw new Jr("invalid-cordova-configuration");e=br(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Wt((function(t,e){u=function(){var e=wr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),c=function(){a||(a=dn(2e3).then((function(){e(new Jr("redirect-cancelled-by-user"))})))},l=function(){Lr()&&c()},o.addEventListener("resume",c,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(t){return Xu(i).then((function(){throw t}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Na(u),i.c=null}))},t.Aa=function(t){this.b.push(t),Yu(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new xo("unknown",null,null,null,new Jr("no-auth-event")),t(e))}))},t.Na=function(t){z(this.b,(function(e){return e==t}))};var tc={name:"pendingRedirect",C:"session"};function ec(t){return Pu(t.b,tc,t.a)}function nc(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=E(this.o,this),this.b=new gc,this.w=new _c,this.g=new Ju(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=rc(this.B,this.u,this.m,Ai)}function rc(t,n,r,i){var o=e.SDK_VERSION||null;return cr()?new Wu(t,n,r,o,i):new qs(t,n,r,o,i)}function ic(t){t.f||(t.f=!0,t.a.Aa(t.l));var e=t.a;return t.a.ia().s((function(n){throw t.a==e&&t.reset(),n}))}function oc(t){t.a.Ob()&&ic(t).s((function(e){var n=new xo("unknown",null,null,null,new Jr("operation-not-supported-in-this-environment"));hc(e)&&t.o(n)})),t.a.Jb()||vc(t.b)}function ac(t,e){$(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(tc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?ec(t.g).then((function(){ic(t).s((function(e){var n=new xo("unknown",null,null,null,new Jr("operation-not-supported-in-this-environment"));hc(e)&&t.o(n)}))})):oc(t)})).s((function(){oc(t)}))}function sc(t,e){z(t.h,(function(t){return t==e}))}nc.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=rc(this.B,this.u,this.m),this.i={}},nc.prototype.o=function(t){if(!t)throw new Jr("invalid-auth-event");if(6e5<=S()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=S())),e=!0;break}}return vc(this.b),e};var uc=new Nr(2e3,1e4),cc=new Nr(3e4,6e4);function lc(t,e,n,r,i,o,a){return t.a.Db(e,n,r,(function(){t.f||(t.f=!0,t.a.Aa(t.l))}),(function(){t.reset()}),i,o,a)}function hc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function dc(t,e,n,r,i){var o;return function(t){return t.b.set(tc,"pending",t.a)}(t.g).then((function(){return t.a.Eb(e,n,r,i).s((function(e){if(hc(e))throw new Jr("operation-not-supported-in-this-environment");return o=e,ec(t.g).then((function(){throw o}))})).then((function(){return t.a.Rb()?new Wt((function(){})):ec(t.g).then((function(){return t.oa()})).then((function(){})).s((function(){}))}))}))}function fc(t,e,n,r,i){return t.a.Fb(r,(function(t){e.ja(n,null,t,i)}),uc.get())}nc.prototype.oa=function(){return this.b.oa()};var pc={};function mc(t,e,n){var r=e+":"+n;return pc[r]||(pc[r]=new nc(t,e,n)),pc[r]}function gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function vc(t){t.g||(t.g=!0,wc(t,!1,null,null))}function yc(t){t.g&&!t.i&&wc(t,!1,null,null)}function bc(t,e){if(t.b=function(){return te(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function wc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ee(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):bc(t,n):bc(t,{user:null}),t.f=[],t.c=[]}function _c(){}function kc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function Ec(t,e){this.a=e,jr(this,"verificationId",t)}function xc(t,e,n,r){return new wo(t).Wa(e,n).then((function(t){return new Ec(t,r)}))}function Sc(t){var e=Ii(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Jr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Tc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Cc(t){this.f=t,this.b=this.a=null,this.c=0}function Ic(t,e){var n=e[Ra],r=e.refreshToken;e=Ac(e.expiresIn),t.b=n,t.c=e,t.a=r}function Ac(t){return S()+1e3*parseInt(t,10)}function Pc(t,e){return function(t,e){return new Wt((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?$a(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Ns(t)):t.access_token&&t.refresh_token?n(t):r(new Jr("internal-error")):r(new Jr("network-request-failed"))}),"POST",Bn(e).toString(),t.g,t.u.get()):r(new Jr("internal-error"))}))}(t.f,e).then((function(e){return t.b=e.access_token,t.c=Ac(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Mc(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function Nc(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Lc(t,e){for(var n in Oe.call(this,t),e)this[n]=e[n]}function Dc(t,n,r){this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=e.SDK_VERSION?yr(e.SDK_VERSION):null,this.a=new La(this.l,Mi(Ai),t),this.b=new Cc(this.a),qc(this,n[Ra]),Ic(this.b,n),jr(this,"refreshToken",this.b.a),zc(this,r||{}),sn.call(this),this.J=!1,this.o&&kr()&&(this.i=mc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new Tc((function(){return t.G(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-S()-3e5;return 0<e?e:0}))}(this),this.W=E(this.Ja,this);var i=this;this.ga=null,this.xa=function(t){i.ua(t.g)},this.Z=null,this.P=[],this.wa=function(t){Oc(i,t.c)},this.Y=null}function Rc(t,e){t.Z&&Ye(t.Z,"languageCodeChanged",t.xa),(t.Z=e)&&Ke(e,"languageCodeChanged",t.xa)}function Oc(t,n){t.P=n,qa(t.a,e.SDK_VERSION?yr(e.SDK_VERSION,t.P):null)}function Bc(t,e){t.Y&&Ye(t.Y,"frameworkChanged",t.wa),(t.Y=e)&&Ke(e,"frameworkChanged",t.wa)}function Uc(t){try{return e.app(t.m).auth()}catch(e){throw new Jr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Fc(t){t.B||t.w.b||(t.w.start(),Ye(t,"tokenChanged",t.W),Ke(t,"tokenChanged",t.W))}function jc(t){Ye(t,"tokenChanged",t.W),t.w.stop()}function qc(t,e){t.ma=e,jr(t,"_lat",e)}function $c(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return re(e).then((function(){return t}))}function Vc(t){t.i&&!t.J&&(t.J=!0,ac(t.i,t))}function zc(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Mc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Hc(){}function Gc(t){return te().then((function(){if(t.B)throw new Jr("app-deleted")}))}function Wc(t){return j(t.providerData,(function(t){return t.providerId}))}function Kc(t,e){e&&(Zc(t,e.providerId),t.providerData.push(e))}function Zc(t,e){z(t.providerData,(function(t){return t.providerId==e}))}function Qc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function Yc(t,e){t!=e&&(qr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?jr(t,"metadata",function(t){return new Mc(t.a,t.b)}(e.metadata)):jr(t,"metadata",new Mc),F(e.providerData,(function(e){Kc(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),jr(t,"refreshToken",t.b.a))}function Xc(t){return t.G().then((function(e){var n=t.isAnonymous;return function(t,e){return Ps(t.a,hs,{idToken:e}).then(E(t.zc,t))}(t,e).then((function(){return n||Qc(t,"isAnonymous",!1),e}))}))}function Jc(t,e){e[Ra]&&t.ma!=e[Ra]&&(Ic(t.b,e),t.dispatchEvent(new Lc("tokenChanged")),qc(t,e[Ra]),Qc(t,"refreshToken",t.b.a))}function tl(t,e){return Xc(t).then((function(){if($(Wc(t),e))return $c(t).then((function(){throw new Jr("provider-already-linked")}))}))}function el(t,e,n){return $r({user:t,credential:ko(e),additionalUserInfo:e=Oi(e),operationType:n})}function nl(t,e){return Jc(t,e),t.reload().then((function(){return t}))}function rl(t,n,r,i,o){if(!kr())return ee(new Jr("operation-not-supported-in-this-environment"));if(t.h&&!o)return ee(t.h);var a=Ri(r.providerId),s=Ar(t.uid+":::"),u=null;(!Sr()||lr())&&t.o&&r.isOAuthProvider&&(u=Hs(t.o,t.l,t.m,n,r,null,s,e.SDK_VERSION||null,null,null,t.tenantId));var c=or(u,a&&a.sa,a&&a.ra);return i=i().then((function(){if(ol(t),!o)return t.G().then((function(){}))})).then((function(){return lc(t.i,c,n,r,s,!!u,t.tenantId)})).then((function(){return new Wt((function(e,r){t.ja(n,null,new Jr("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=s,t.c=fc(t.i,t,n,c,s)}))})).then((function(t){return c&&ir(c),t?$r(t):null})).s((function(t){throw c&&ir(c),t})),al(t,i,o)}function il(t,e,n,r,i){if(!kr())return ee(new Jr("operation-not-supported-in-this-environment"));if(t.h&&!i)return ee(t.h);var o=null,a=Ar(t.uid+":::");return r=r().then((function(){if(ol(t),!i)return t.G().then((function(){}))})).then((function(){return t.ca=a,$c(t)})).then((function(e){return t.da&&(e=(e=t.da).b.set(cl,t.A(),e.a)),e})).then((function(){return dc(t.i,e,n,a,t.tenantId)})).s((function(e){if(o=e,t.da)return ll(t.da);throw o})).then((function(){if(o)throw o})),al(t,r,i)}function ol(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new Jr("internal-error");throw new Jr("auth-domain-config-required")}}function al(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),ee(t.h)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Lc("userInvalidated")),t.h=e),e}))}(t,e,n);return t.I.push(r),r.ka((function(){V(t.I,r)})),r}function sl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Ra]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-S())/1e3;var r=new Dc(e,n,t);return t.providerData&&F(t.providerData,(function(t){t&&Kc(r,$r(t))})),t.redirectEventId&&(r.ca=t.redirectEventId),r}function ul(t){this.a=t,this.b=Cu()}gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(wc(this,!0,null,t.a),te()):e.Ba(n,r)?function(t,e,n){n=n.Ba(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.R(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){wc(t,s,e,null)})).s((function(e){wc(t,s,null,e)}))}(this,t,e):ee(new Jr("invalid-auth-event")):(wc(this,!1,null,null),te())}else ee(new Jr("invalid-auth-event"))},gc.prototype.oa=function(){var t=this;return new Wt((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Jr("timeout");t.a&&t.a.cancel(),t.a=dn(cc.get()).then((function(){t.b||(t.g=!0,wc(t,!0,null,e))}))}(t))}))},_c.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),te()):e.Ba(n,r)?function(t,e){var n=t.b,r=t.c;e.Ba(r,n)(t.g,t.f,t.R(),t.i).then((function(t){e.ja(r,t,null,n)})).s((function(t){e.ja(r,null,t,n)}))}(t,e):ee(new Jr("invalid-auth-event"))}else ee(new Jr("invalid-auth-event"))},Ec.prototype.confirm=function(t){return t=_o(this.verificationId,t),this.a(t)},Tc.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=dn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=s.document,e=null;return Lr()||!t?te():new Wt((function(n){e=function(){Lr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},Tc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Cc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Cc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ee(new Jr("user-token-expired")):t||!this.b||S()>this.c-3e4?this.a?Pc(this,{grant_type:"refresh_token",refresh_token:this.a}):te(null):te({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Mc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(Lc,Oe),T(Dc,sn),Dc.prototype.ua=function(t){this.ga=t,ja(this.a,t)},Dc.prototype.ha=function(){return this.ga},Dc.prototype.Ca=function(){return G(this.P)},Dc.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},jr(Dc.prototype,"providerId","firebase"),(t=Dc.prototype).reload=function(){var t=this;return al(this,Gc(this).then((function(){return Xc(t).then((function(){return $c(t)})).then(Hc)})))},t.dc=function(t){return this.G(t).then((function(t){return new Sc(t)}))},t.G=function(t){var e=this;return al(this,Gc(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new Jr("internal-error");return t.accessToken!=e.ma&&(qc(e,t.accessToken),e.dispatchEvent(new Lc("tokenChanged"))),Qc(e,"refreshToken",t.refreshToken),t.accessToken})))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new Jr("internal-error");zc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?j(t,(function(t){return new Nc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Kc(this,e[n]);Qc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(t){return Ur("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(t)},t.hb=function(t){var e=this,n=null;return al(this,t.f(this.a,this.uid).then((function(t){return Jc(e,t),n=el(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.rc=function(t){return Ur("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(t)},t.fb=function(t){var e=this,n=null;return al(this,tl(this,t.providerId).then((function(){return e.G()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=el(e,t,"link"),nl(e,t)})).then((function(){return n})))},t.sc=function(t,e){var n=this;return al(this,tl(this,"phone").then((function(){return xc(Uc(n),t,e,E(n.fb,n))})))},t.Bc=function(t,e){var n=this;return al(this,te().then((function(){return xc(Uc(n),t,e,E(n.hb,n))})),!0)},t.rb=function(t){var e=this;return al(this,this.G().then((function(n){return e.a.rb(n,t)})).then((function(t){return Jc(e,t),e.reload()})))},t.Sc=function(t){var e=this;return al(this,this.G().then((function(n){return t.b(e.a,n)})).then((function(t){return Jc(e,t),e.reload()})))},t.sb=function(t){var e=this;return al(this,this.G().then((function(n){return e.a.sb(n,t)})).then((function(t){return Jc(e,t),e.reload()})))},t.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Gc(this);var e=this;return al(this,this.G().then((function(n){return e.a.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Jc(e,t),Qc(e,"displayName",t.displayName||null),Qc(e,"photoURL",t.photoUrl||null),F(e.providerData,(function(t){"password"===t.providerId&&(jr(t,"displayName",e.displayName),jr(t,"photoURL",e.photoURL))})),$c(e)})).then(Hc))},t.Qc=function(t){var e=this;return al(this,Xc(this).then((function(n){return $(Wc(e),t)?function(t,e,n){return Ps(t,us,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return F(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),F(Wc(e),(function(t){n[t]||Zc(e,t)})),n[wo.PROVIDER_ID]||jr(e,"phoneNumber",null),$c(e)})):$c(e).then((function(){throw new Jr("no-such-provider")}))})))},t.delete=function(){var t=this;return al(this,this.G().then((function(e){return Ps(t.a,ss,{idToken:e})})).then((function(){t.dispatchEvent(new Lc("userDeleted"))}))).then((function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Rc(t,null),Bc(t,null),t.I=[],t.B=!0,jc(t),jr(t,"refreshToken",null),t.i&&sc(t.i,t)}))},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},t.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?E(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?E(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?E(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?E(this.Cb,this):null},t.tc=function(t){var e=this;return rl(this,"linkViaPopup",t,(function(){return tl(e,t.providerId).then((function(){return $c(e)}))}),!1)},t.Cc=function(t){return rl(this,"reauthViaPopup",t,(function(){return te()}),!0)},t.uc=function(t){var e=this;return il(this,"linkViaRedirect",t,(function(){return tl(e,t.providerId)}),!1)},t.Dc=function(t){return il(this,"reauthViaRedirect",t,(function(){return te()}),!0)},t.Bb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return al(this,this.G().then((function(n){return ts(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=el(i,t,"link"),nl(i,t)})).then((function(){return o})))},t.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return al(this,te().then((function(){return Wi(es(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=el(i,t,"reauthenticate"),Jc(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.jb=function(t){var e=this,n=null;return al(this,this.G().then((function(e){return n=e,void 0===t||K(t)?{}:ki(new di(t))})).then((function(t){return e.a.jb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.toJSON=function(){return this.A()},t.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Y(t,this.metadata.A()),F(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),t};var cl={name:"redirectUser",C:"session"};function ll(t){return Pu(t.b,cl,t.a)}function hl(t){this.a=t,this.b=Cu(),this.c=null,this.f=function(t){var e=pl("local"),n=pl("session"),r=pl("none");return function(t,e,n){var r=Au(e,n),i=Iu(t,e.C);return t.get(e,n).then((function(o){var a=null;try{a=Ir(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(fl,t.a).then((function(t){return t?pl(t):e}))}))}))})).then((function(e){return t.c=e,dl(t,e.C)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(pl("local"),this.a,E(this.g,this))}function dl(t,e){var n,r=[];for(n in Su)Su[n]!==e&&r.push(Pu(t.b,pl(Su[n]),t.a));return r.push(Pu(t.b,fl,t.a)),function(t){return new Wt((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)ne(t[s],x(o,s),a);else e(i)}))}(r)}hl.prototype.g=function(){var t=this,e=pl("local");yl(this,(function(){return te().then((function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null})).then((function(n){if(n)return dl(t,"local").then((function(){t.c=e}))}))}))};var fl={name:"persistence",C:"session"};function pl(t){return{name:"authUser",C:t}}function ml(t,e){return yl(t,(function(){return t.b.set(t.c,e.A(),t.a)}))}function gl(t){return yl(t,(function(){return Pu(t.b,t.c,t.a)}))}function vl(t,e){return yl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),sl(t||{})}))}))}function yl(t,e){return t.f=t.f.then(e,e),t.f}function bl(t){if(this.l=!1,jr(this,"settings",new kc),jr(this,"app",t),!Cl(this).options||!Cl(this).options.apiKey)throw new Jr("invalid-api-key");t=e.SDK_VERSION?yr(e.SDK_VERSION):null,this.b=new La(Cl(this).options&&Cl(this).options.apiKey,Mi(Ai),t),this.O=[],this.m=[],this.J=[],this.Ub=e.INTERNAL.createSubscribe(E(this.oc,this)),this.W=void 0,this.Vb=e.INTERNAL.createSubscribe(E(this.pc,this)),Sl(this,null),this.h=new hl(Cl(this).options.apiKey+":"+Cl(this).name),this.w=new ul(Cl(this).options.apiKey+":"+Cl(this).name),this.Y=Ml(this,function(t){var e=Cl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(cl,t.a).then((function(t){return t&&e&&(t.authDomain=e),sl(t||{})}))}(t.w,Cl(t).options.authDomain).then((function(e){return(t.B=e)&&(e.da=t.w),ll(t.w)}));return Ml(t,e)}(t).then((function(){return vl(t.h,e)})).then((function(e){return e?(e.da=t.w,t.B&&(t.B.ca||null)==(e.ca||null)?e:e.reload().then((function(){return ml(t.h,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:gl(t.h)}))):null})).then((function(e){Sl(t,e||null)}));return Ml(t,n)}(this)),this.i=Ml(this,function(t){return t.Y.then((function(){return El(t)})).s((function(){})).then((function(){if(!t.l)return t.ma()})).s((function(){})).then((function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(pl("local"),e.a,t.ma)}}))}(this)),this.ga=!1,this.ma=E(this.Nc,this),this.ub=E(this.aa,this),this.wa=E(this.bc,this),this.xa=E(this.mc,this),this.Ja=E(this.nc,this),this.a=null,function(t){var e=Cl(t).options.authDomain,n=Cl(t).options.apiKey;e&&kr()&&(t.Tb=t.Y.then((function(){if(!t.l){if(t.a=mc(e,n,Cl(t).name),ac(t.a,t),Il(t)&&Vc(Il(t)),t.B){Vc(t.B);var r=t.B;r.ua(t.ha()),Rc(r,t),Oc(r=t.B,t.I),Bc(r,t),t.B=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.vc,this),this.o=0,sn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.ua(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function wl(t){Oe.call(this,"languageCodeChanged"),this.g=t}function _l(t){Oe.call(this,"frameworkChanged"),this.c=t}function kl(t){return t.Tb||ee(new Jr("auth-domain-config-required"))}function El(t){if(!kr())return ee(new Jr("operation-not-supported-in-this-environment"));var e=kl(t).then((function(){return t.a.oa()})).then((function(t){return t?$r(t):null}));return Ml(t,e)}function xl(t,e){var n={};return n.apiKey=Cl(t).options.apiKey,n.authDomain=Cl(t).options.authDomain,n.appName=Cl(t).name,t.Y.then((function(){return function(t,e,n,r){var i=new Dc(t,e);return n&&(i.da=n),r&&Oc(i,r),i.reload().then((function(){return i}))}(n,e,t.w,t.Ca())})).then((function(e){return Il(t)&&e.uid==Il(t).uid?(Yc(Il(t),e),t.aa(e)):(Sl(t,e),Vc(e),t.aa(e))})).then((function(){Pl(t)}))}function Sl(t,e){Il(t)&&(function(t,e){z(t.O,(function(t){return t==e}))}(Il(t),t.ub),Ye(Il(t),"tokenChanged",t.wa),Ye(Il(t),"userDeleted",t.xa),Ye(Il(t),"userInvalidated",t.Ja),jc(Il(t))),e&&(e.O.push(t.ub),Ke(e,"tokenChanged",t.wa),Ke(e,"userDeleted",t.xa),Ke(e,"userInvalidated",t.Ja),0<t.o&&Fc(e)),jr(t,"currentUser",e),e&&(e.ua(t.ha()),Rc(e,t),Oc(e,t.I),Bc(e,t))}function Tl(t,e){var n=null,r=null;return Ml(t,e.then((function(e){return n=ko(e),r=Oi(e),xl(t,e)})).then((function(){return $r({user:Il(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Cl(t){return t.app}function Il(t){return t.currentUser}function Al(t){return Il(t)&&Il(t)._lat||null}function Pl(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Al(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](Al(t))}}function Ml(t,e){return t.O.push(e),e.ka((function(){V(t.O,e)})),e}function Nl(){}function Ll(){this.a={},this.b=1e12}hl.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Jr("invalid-persistence-type"),n=new Jr("unsupported-persistence-type");t:{for(r in Su)if(Su[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(dr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(t),yl(this,(function(){return t!=n.c.C?n.b.get(n.c,n.a).then((function(r){return e=r,dl(n,t)})).then((function(){if(n.c=pl(t),e)return n.b.set(n.c,e,n.a)})):te()}))},T(bl,sn),T(wl,Oe),T(_l,Oe),(t=bl.prototype).mb=function(t){return Ml(this,t=this.h.mb(t))},t.ua=function(t){this.Z===t||this.l||(this.Z=t,ja(this.b,this.Z),this.dispatchEvent(new wl(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var t=s.navigator;this.ua(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.I.push(t),qa(this.b,e.SDK_VERSION?yr(e.SDK_VERSION,this.I):null),this.dispatchEvent(new _l(this.I))},t.Ca=function(){return G(this.I)},t.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:Cl(this).options.apiKey,authDomain:Cl(this).options.authDomain,appName:Cl(this).name,currentUser:Il(this)&&Il(this).A()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?E(this.ac,this):null},t.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Ja(i.b,t).then((function(t){return o=ko(t),a=Oi(t),t}));return Ml(this,t=i.Y.then((function(){return s})).then((function(t){return xl(i,t)})).then((function(){return $r({user:Il(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},t.Lc=function(t){if(!kr())return ee(new Jr("operation-not-supported-in-this-environment"));var n=this,r=Ri(t.providerId),i=Ar(),o=null;(!Sr()||lr())&&Cl(this).options.authDomain&&t.isOAuthProvider&&(o=Hs(Cl(this).options.authDomain,Cl(this).options.apiKey,Cl(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null,null,null,this.R()));var a=or(o,r&&r.sa,r&&r.ra);return Ml(this,r=kl(this).then((function(e){return lc(e,a,"signInViaPopup",t,i,!!o,n.R())})).then((function(){return new Wt((function(t,e){n.ja("signInViaPopup",null,new Jr("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=fc(n.a,n,"signInViaPopup",a,i)}))})).then((function(t){return a&&ir(a),t?$r(t):null})).s((function(t){throw a&&ir(a),t})))},t.Mc=function(t){if(!kr())return ee(new Jr("operation-not-supported-in-this-environment"));var e=this;return Ml(this,kl(this).then((function(){return function(t){return yl(t,(function(){return t.b.set(fl,t.c.C,t.a)}))}(e.h)})).then((function(){return dc(e.a,"signInViaRedirect",t,void 0,e.R())})))},t.oa=function(){var t=this;return El(this).then((function(e){return t.a&&yc(t.a.b),e})).s((function(e){throw t.a&&yc(t.a.b),e}))},t.Rc=function(t){if(!t)return ee(new Jr("null-user"));if(this.P!=t.tenantId)return ee(new Jr("tenant-id-mismatch"));var e=this,n={};n.apiKey=Cl(this).options.apiKey,n.authDomain=Cl(this).options.authDomain,n.appName=Cl(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[Ra]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-S())/1e3,e=new Dc(e,o),n&&(e.da=n),r&&Oc(e,r),Yc(e,t),e}(t,n,e.w,e.Ca());return Ml(this,this.i.then((function(){if(Cl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Il(e)&&t.uid==Il(e).uid?(Yc(Il(e),t),e.aa(t)):(Sl(e,r),Vc(r),e.aa(r))})).then((function(){Pl(e)})))},t.pb=function(){var t=this;return Ml(this,this.i.then((function(){return t.a&&yc(t.a.b),Il(t)?(Sl(t,null),gl(t.h).then((function(){Pl(t)}))):te()})))},t.Nc=function(){var t=this;return vl(this.h,Cl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Il(t)&&e){n=Il(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Yc(Il(t),e),Il(t).G();(Il(t)||e)&&(Sl(t,e),e&&(Vc(e),e.da=t.w),t.a&&ac(t.a,t),Pl(t))}}))},t.aa=function(t){return ml(this.h,t)},t.bc=function(){Pl(this),this.aa(Il(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Il(e))}))},t.pc=function(t){var e=this;!function(t,e){t.J.push(e),Ml(t,t.i.then((function(){!t.l&&$(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Al(t)))})))}(this,(function(){t.next(Il(e))}))},t.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){v(t)?t(Il(r)):v(t.next)&&t.next(Il(r))})),this.Ub(t,e,n)},t.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),v(t)?t(Il(r)):v(t.next)&&t.next(Il(r))})),this.Vb(t,e,n)},t.cc=function(t){var e=this;return Ml(this,this.i.then((function(){return Il(e)?Il(e).G(t).then((function(t){return{accessToken:t}})):null})))},t.Hc=function(t){var e=this;return this.i.then((function(){return Tl(e,Ps(e.b,Ss,{token:t}))})).then((function(t){var n=t.user;return Qc(n,"isAnonymous",!1),e.aa(n),t}))},t.Ic=function(t,e){var n=this;return this.i.then((function(){return Tl(n,Ps(n.b,Ts,{email:t,password:e}))}))},t.Xb=function(t,e){var n=this;return this.i.then((function(){return Tl(n,Ps(n.b,os,{email:t,password:e}))}))},t.Sa=function(t){var e=this;return this.i.then((function(){return Tl(e,t.na(e.b))}))},t.Gc=function(t){return Ur("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(t)},t.ob=function(){var t=this;return this.i.then((function(){var e=Il(t);if(e&&e.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Tl(t,t.b.ob()).then((function(e){var n=e.user;return Qc(n,"isAnonymous",!0),t.aa(n),e}))}))},t.getUid=function(){return Il(this)&&Il(this).uid||null},t.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&Il(this)&&Fc(Il(this))},t.Ec=function(t){var e=this;F(this.m,(function(n){n==t&&e.o--})),0>this.o&&(this.o=0),0==this.o&&Il(this)&&jc(Il(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Ml(this,this.i.then((function(){e.l||$(e.m,t)&&t(Al(e))})))},t.removeAuthTokenListener=function(t){z(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(pl("local"),t.a,this.ma),this.a&&(sc(this.a,this),yc(this.a.b)),Promise.resolve()},t.$b=function(t){return Ml(this,function(t,e){return Ps(t,as,{identifier:e,continueUri:Er()?er():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.qc=function(t){return!!go(t)},t.lb=function(t,e){var n=this;return Ml(this,te().then((function(){var t=new di(e);if(!t.c)throw new Jr("argument-error",mi+" must be true when sending sign in link to email");return ki(t)})).then((function(e){return n.b.lb(t,e)})).then((function(){})))},t.Uc=function(t){return this.Ma(t).then((function(t){return t.data.email}))},t.ab=function(t,e){return Ml(this,this.b.ab(t,e).then((function(){})))},t.Ma=function(t){return Ml(this,this.b.Ma(t).then((function(t){return new zr(t)})))},t.Ya=function(t){return Ml(this,this.b.Ya(t).then((function(){})))},t.kb=function(t,e){var n=this;return Ml(this,te().then((function(){return void 0===e||K(e)?{}:ki(new di(e))})).then((function(e){return n.b.kb(t,e)})).then((function(){})))},t.Kc=function(t,e){return Ml(this,xc(this,t,e,E(this.Sa,this)))},t.Jc=function(t,e){var n=this;return Ml(this,te().then((function(){var r=e||er(),i=mo(t,r);if(!(r=go(r)))throw new Jr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Jr("tenant-id-mismatch");return n.Sa(i)})))},Nl.prototype.render=function(){},Nl.prototype.reset=function(){},Nl.prototype.getResponse=function(){},Nl.prototype.execute=function(){};var Dl=null;function Rl(t,e){return(e=Ol(e))&&t.a[e]||null}function Ol(t){return(t=void 0===t?1e12:t)?t.toString():null}function Bl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=zn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ke(this.f,"click",this.i)}function Ul(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Fl(){}Ll.prototype.render=function(t,e){return this.a[this.b.toString()]=new Bl(t,e),this.b++},Ll.prototype.reset=function(t){var e=Rl(this,t);t=Ol(t),e&&t&&(e.delete(),delete this.a[t])},Ll.prototype.getResponse=function(t){return(t=Rl(this,t))?t.getResponse():null},Ll.prototype.execute=function(t){(t=Rl(this,t))&&t.execute()},Bl.prototype.getResponse=function(){return Ul(this),this.b},Bl.prototype.execute=function(){Ul(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Bl.prototype.delete=function(){Ul(this),this.g=!0,clearTimeout(this.a),this.a=null,Ye(this.f,"click",this.i)},Fl.prototype.g=function(){return Dl||(Dl=new Ll),te(Dl)},Fl.prototype.c=function(){};var jl=null;function ql(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var $l=new X(et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Vl=new Nr(3e4,6e4);ql.prototype.g=function(t){var e=this;return new Wt((function(n,r){var i=setTimeout((function(){r(new Jr("network-request-failed"))}),Vl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new Jr("internal-error"));delete s[e.a]},te(Ta(ot($l,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new Jr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},ql.prototype.c=function(){this.b--};var zl=null;function Hl(t,e,n,r,i,o,a){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a?(jl||(jl=new Fl),a=jl):(zl||(zl=new ql),a=zl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Kl])throw new Jr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Zl],!s.document)throw new Jr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!zn(e)||!this.i&&zn(e).hasChildNodes())throw new Jr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new La(t,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Gl];this.a[Gl]=function(t){if(Ql(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=wr(c,s);"function"==typeof e&&e(t)}};var l=this.a[Wl];this.a[Wl]=function(){if(Ql(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=wr(l,s);"function"==typeof t&&t()}}}var Gl="callback",Wl="expired-callback",Kl="sitekey",Zl="size";function Ql(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Yl(t,e){return t.h.push(e),e.ka((function(){V(t.h,e)})),e}function Xl(t){if(t.B)throw new Jr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Jl(t,n,r){var i=!1;try{this.b=r||e.app()}catch(t){throw new Jr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Jr("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ca()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=e.SDK_VERSION?yr(e.SDK_VERSION,a):null,Hl.call(this,r,t,n,(function(){try{var t=o.b.auth().ha()}catch(e){t=null}return t}),a,Mi(Ai),i)}function th(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Jr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],0>i||i>=eh.length)throw new Jr("internal-error","Argument validator received an unsupported number of arguments.");n=eh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new Jr("argument-error",t+" failed: "+r)}(t=Hl.prototype).Da=function(){var t=this;return this.f?this.f:this.f=Yl(this,te().then((function(){if(Er()&&!hr())return ur();throw new Jr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.v())})).then((function(e){return t.g=e,Ps(t.o,gs,{})})).then((function(e){t.a[Kl]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){Xl(this);var t=this;return Yl(this,this.Da().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=zn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!Vn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',jt(a.name),'"'),a.type){o.push(' type="',jt(a.type),'"');var s={};Y(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(u(a)?o.className=a:m(a)?o.className=a.join(" "):Hn(o,a)),2<r.length&&Wn(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Xl(this);var t=this;return Yl(this,this.render().then((function(e){return new Wt((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){z(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Xl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Xl(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=zn(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Jl,Hl);var eh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function nh(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:u}}function rh(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:c}}function ih(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:y}}function oh(t,e){return{name:t||"",M:"a function",optional:!!e,N:v}}function ah(t,e){return{name:t||"",M:"null",optional:!!e,N:p}}function sh(t){return{name:t?t+"Credential":"credential",M:t?"a valid "+t+" credential":"a valid credential",optional:!1,N:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.na||!n)}}}function uh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&u(t.type)&&v(t.verify))}}}function ch(t,e,n,r){return{name:n||"",M:t.M+" or "+e.M,optional:!!r,N:function(n){return t.N(n)||e.N(n)}}}function lh(t,e){for(var n in e){var r=e[n].name;t[r]=fh(r,t[n],e[n].j)}}function hh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:x((function(t){return this[t]}),n),set:x((function(t,e,n,r){th(t,[n],[r],!0),this[e]=r}),r,n,e[n].Za),enumerable:!0})}}function dh(t,e,n,r){t[e]=fh(e,n,r)}function fh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return th(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}lh(bl.prototype,{Ya:{name:"applyActionCode",j:[nh("code")]},Ma:{name:"checkActionCode",j:[nh("code")]},ab:{name:"confirmPasswordReset",j:[nh("code"),nh("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[nh("email"),nh("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[nh("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[nh("emailLink")]},wc:{name:"onAuthStateChanged",j:[ch(ih(),oh(),"nextOrObserver"),oh("opt_error",!0),oh("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[ch(ih(),oh(),"nextOrObserver"),oh("opt_error",!0),oh("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[nh("email"),ch(ih("opt_actionCodeSettings",!0),ah(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[nh("email"),ih("actionCodeSettings")]},mb:{name:"setPersistence",j:[nh("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[sh()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[sh()]},Hc:{name:"signInWithCustomToken",j:[nh("token")]},Ic:{name:"signInWithEmailAndPassword",j:[nh("email"),nh("password")]},Jc:{name:"signInWithEmailLink",j:[nh("email"),nh("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[nh("phoneNumber"),uh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[ch({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Dc)}},ah(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[nh(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[nh("code")]}}),hh(bl.prototype,{lc:{name:"languageCode",Za:ch(nh(),ah(),"languageCode")},ti:{name:"tenantId",Za:ch(nh(),ah(),"tenantId")}}),bl.Persistence=Su,bl.Persistence.LOCAL="local",bl.Persistence.SESSION="session",bl.Persistence.NONE="none",lh(Dc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[rh("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[rh("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[sh()]},fb:{name:"linkWithCredential",j:[sh()]},sc:{name:"linkWithPhoneNumber",j:[nh("phoneNumber"),uh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[sh()]},hb:{name:"reauthenticateWithCredential",j:[sh()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[nh("phoneNumber"),uh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[ch(ih("opt_actionCodeSettings",!0),ah(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[nh(null,!0)]},Qc:{name:"unlink",j:[nh("provider")]},rb:{name:"updateEmail",j:[nh("email")]},sb:{name:"updatePassword",j:[nh("password")]},Sc:{name:"updatePhoneNumber",j:[sh("phone")]},tb:{name:"updateProfile",j:[ih("profile")]}}),lh(Ll.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),lh(Nl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),lh(Wt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),hh(kc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:rh("appVerificationDisabledForTesting")}}),lh(Ec.prototype,{confirm:{name:"confirm",j:[nh("verificationCode")]}}),dh(Gi,"fromJSON",(function(t){t=u(t)?JSON.parse(t):t;for(var e,n=[Ji,fo,yo,Qi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[ch(nh(),ih(),"json")]),dh(po,"credential",(function(t,e){return new ho(t,e)}),[nh("email"),nh("password")]),lh(ho.prototype,{A:{name:"toJSON",j:[nh(null,!0)]}}),lh(ro.prototype,{ya:{name:"addScope",j:[nh("scope")]},Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),dh(ro,"credential",io,[ch(nh(),ih(),"token")]),dh(po,"credentialWithLink",mo,[nh("email"),nh("emailLink")]),lh(oo.prototype,{ya:{name:"addScope",j:[nh("scope")]},Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),dh(oo,"credential",ao,[ch(nh(),ih(),"token")]),lh(so.prototype,{ya:{name:"addScope",j:[nh("scope")]},Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),dh(so,"credential",uo,[ch(nh(),ch(ih(),ah()),"idToken"),ch(nh(),ah(),"accessToken",!0)]),lh(co.prototype,{Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),dh(co,"credential",lo,[ch(nh(),ih(),"token"),nh("secret",!0)]),lh(no.prototype,{ya:{name:"addScope",j:[nh("scope")]},credential:{name:"credential",j:[ch(nh(),ch(ih(),ah()),"optionsOrIdToken"),ch(nh(),ah(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[ih("customOAuthParameters")]}}),lh(Yi.prototype,{A:{name:"toJSON",j:[nh(null,!0)]}}),lh(Ki.prototype,{A:{name:"toJSON",j:[nh(null,!0)]}}),dh(wo,"credential",_o,[nh("verificationId"),nh("verificationCode")]),lh(wo.prototype,{Wa:{name:"verifyPhoneNumber",j:[nh("phoneNumber"),uh()]}}),lh(vo.prototype,{A:{name:"toJSON",j:[nh(null,!0)]}}),lh(Jr.prototype,{toJSON:{name:"toJSON",j:[nh(null,!0)]}}),lh(Po.prototype,{toJSON:{name:"toJSON",j:[nh(null,!0)]}}),lh(Ao.prototype,{toJSON:{name:"toJSON",j:[nh(null,!0)]}}),lh(Jl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),dh(ri,"parseLink",hi,[nh("link")]),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Hr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:bl,AuthCredential:Gi,Error:Jr};dh(t,"EmailAuthProvider",po,[]),dh(t,"FacebookAuthProvider",ro,[]),dh(t,"GithubAuthProvider",oo,[]),dh(t,"GoogleAuthProvider",so,[]),dh(t,"TwitterAuthProvider",co,[]),dh(t,"OAuthProvider",no,[nh("providerId")]),dh(t,"SAMLAuthProvider",eo,[nh("providerId")]),dh(t,"PhoneAuthProvider",wo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof bl)}}]),dh(t,"RecaptchaVerifier",Jl,[ch(nh(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),ih("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof e.app.App)}}]),dh(t,"ActionCodeURL",ri,[]),e.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new bl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),e.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:E((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:E(t.cc,t),addAuthTokenListener:E(t.Wb,t),removeAuthTokenListener:E(t.Ec,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.registerVersion("@firebase/auth","0.13.4"),e.INTERNAL.extendNamespace({User:Dc})}()}).apply(void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Dt=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(Pt),Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ot=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Tt.__extends(e,t),e}(Error);
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bt=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t;return Tt.__generator(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t,e;return Tt.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ut(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Ft=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Ut(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Ut(t,(function(t){return e.decode(t)})):t},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jt=function(){function t(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new Ft,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new Bt(e,n),this.cancelAllRequests=new Promise((function(t){i.deleteService=function(){return t()}}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+n+"/"+t:"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Tt.__awaiter(this,void 0,void 0,(function(){var r,i;return Tt.__generator(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return Tt.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return Tt.__generator(this,(function(h){switch(h.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o=new Headers,[4,this.contextProvider.getContext()];case 1:return(a=h.sent()).authToken&&o.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&o.append("Firebase-Instance-ID-Token",a.instanceIdToken),s=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,o),(d=s,new Promise((function(t,e){setTimeout((function(){e(new Ot("deadline-exceeded","deadline-exceeded"))}),d)}))),this.cancelAllRequests])];case 2:if(!(u=h.sent()))throw new Ot("cancelled","Firebase Functions instance was deleted.");if(c=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!Rt[s])return new Ot("internal","internal");r=Rt[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Ot(r,i,o)}(u.status,u.json,this.serializer))throw c;if(!u.json)throw new Ot("internal","Response is not valid JSON object.");if(void 0===(l=u.json.data)&&(l=u.json.result),void 0===l)throw new Ot("internal","Response is missing data field.");return[2,{data:this.serializer.decode(l)}]}var d}))}))},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qt(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new jt(n,r,i,e)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
!function(t){var e={Functions:jt};t.INTERNAL.registerComponent(new It.Component("functions",qt,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(Dt),Dt.registerVersion("@firebase/functions","0.4.31");var $t=St((function(t){(function(){var e,n=n||{},r=this||self;function i(t){return"string"==typeof t}function o(t){return"number"==typeof t}function a(t,e){t=t.split("."),e=e||r;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function s(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function c(t){return"array"==u(t)}function l(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),f=0;function p(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:m).apply(null,arguments)}function v(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var y=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.wb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.ka=function(){if(!this.j&&(this.j=!0,this.G(),0))this[d]||(this[d]=++f)},w.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(i(t))return i(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},k=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,o=i(t)?t.split(""):t,a=0;a<r;a++)a in o&&e.call(n,o[a],a,t)};function E(t){return Array.prototype.concat.apply([],arguments)}function x(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var T,C=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function I(t,e){return-1!=t.indexOf(e)}function A(t,e){return t<e?-1:t>e?1:0}t:{var P=r.navigator;if(P){var M=P.userAgent;if(M){T=M;break t}}T=""}function N(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e,n={};for(e in t)n[e]=t[e];return n}var D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<D.length;o++)n=D[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function O(t){return O[" "](t),t}O[" "]=s;var B,U,F=I(T,"Opera"),j=I(T,"Trident")||I(T,"MSIE"),q=I(T,"Edge"),$=q||j,V=I(T,"Gecko")&&!(I(T.toLowerCase(),"webkit")&&!I(T,"Edge"))&&!(I(T,"Trident")||I(T,"MSIE"))&&!I(T,"Edge"),z=I(T.toLowerCase(),"webkit")&&!I(T,"Edge");function H(){var t=r.document;return t?t.documentMode:void 0}t:{var G="",W=(U=T,V?/rv:([^\);]+)(\)|;)/.exec(U):q?/Edge\/([\d\.]+)/.exec(U):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):z?/WebKit\/(\S+)/.exec(U):F?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(W&&(G=W?W[1]:""),j){var K=H();if(null!=K&&K>parseFloat(G)){B=String(K);break t}}B=G}var Z,Q={};function Y(t){return function(t,e){var n=Q;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=C(String(B)).split("."),r=C(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=A(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||A(0==a[2].length,0==s[2].length)||A(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}Z=r.document&&j?H():void 0;var X=!j||9<=Number(Z),J=j&&!Y("9"),tt=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{r.addEventListener("test",s,e),r.removeEventListener("test",s,e)}catch(t){}return t}();function et(t,e){this.type=t,this.a=this.target=e,this.Ha=!0}function nt(t,e){if(et.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(V){t:{try{O(e.nodeName);var o=!0;break t}catch(t){}o=!1}o||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=i(t.pointerType)?t.pointerType:rt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}et.prototype.b=function(){this.Ha=!1},b(nt,et);var rt={2:"touch",3:"pen",4:"mouse"};nt.prototype.b=function(){nt.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,J)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var it="closure_listenable_"+(1e6*Math.random()|0),ot=0;function at(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ot,this.X=this.Z=!1}function st(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ut(t){this.src=t,this.a={},this.b=0}function ct(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(st(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function lt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ut.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=lt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new at(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),dt={};function ft(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(c(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=_t(r),e&&e[it]?e.za(n,r,h(i)?!!i.capture:!!i,o):pt(e,n,r,!0,i,o)}(t,e,n,r,i);if(c(e)){for(var o=0;o<e.length;o++)ft(t,e[o],n,r,i);return null}return n=_t(n),t&&t[it]?t.ya(e,n,h(r)?!!r.capture:!!r,i):pt(t,e,n,!1,r,i)}function pt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i;if(a&&!X)return null;var s=bt(t);if(s||(t[ht]=s=new ut(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=yt,e=X?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function mt(t){if(!o(t)&&t&&!t.X){var e=t.src;if(e&&e[it])ct(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bt(e))?(ct(n,t),0==n.b&&(n.src=null,e[ht]=null)):st(t)}}}function gt(t){return t in dt?dt[t]:dt[t]="on"+t}function vt(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&mt(t),n.call(r,e)}function yt(t,e){return!!t.X||(X?vt(t,new nt(e,this)):vt(t,e=new nt(e||a("window.event"),this)))}function bt(t){return(t=t[ht])instanceof ut?t:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(t){return"function"==u(t)?t:(t[wt]||(t[wt]=function(e){return t.handleEvent(e)}),t[wt])}function kt(){w.call(this),this.c=new ut(this),this.J=this,this.B=null}function Et(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&ct(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ha}b(kt,w),kt.prototype[it]=!0,(e=kt.prototype).addEventListener=function(t,e,n,r){ft(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(c(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=h(i)?!!i.capture:!!i,r=_t(r),e&&e[it]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=lt(a=e.a[n],r,i,o))&&(st(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--)))):e&&(e=bt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=lt(n,r,i,o)),(r=-1<e?n[e]:null)&&mt(r))}(this,t,e,n,r)},e.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(i(t))t=new et(t,n);else if(t instanceof et)t.target=t.target||n;else{var o=t;R(t=new et(r,n),o)}if(o=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.a=e[a];o=Et(s,r,!0,t)&&o}if(o=Et(s=t.a=n,r,!0,t)&&o,o=Et(s,r,!1,t)&&o,e)for(a=0;a<e.length;a++)o=Et(s=t.a=e[a],r,!1,t)&&o;return o},e.G=function(){if(kt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)st(n[r]);delete e.a[t],e.b--}}this.B=null},e.ya=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},e.za=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xt=r.JSON.stringify;function St(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Tt(){this.b=this.a=null}St.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Ct,It=new St((function(){return new Pt}),(function(t){t.reset()}));function At(){var t=Dt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pt(){this.next=this.b=this.a=null}function Mt(t){r.setTimeout((function(){throw t}),0)}function Nt(t,e){Ct||function(){var t=r.Promise.resolve(void 0);Ct=function(){t.then(Rt)}}(),Lt||(Ct(),Lt=!0),Dt.add(t,e)}Tt.prototype.add=function(t,e){var n=It.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,Dt=new Tt;function Rt(){for(var t;t=At();){try{t.a.call(t.b)}catch(t){Mt(t)}var e=It;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Ot(t,e){kt.call(this),this.b=t||1,this.a=e||r,this.f=g(this.eb,this),this.g=y()}function Bt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Ut(t,e,n){if("function"==u(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function Ft(t,e,n){w.call(this),this.f=null!=n?g(t,n):t,this.c=e,this.b=g(this.Za,this),this.a=[]}function jt(t){t.U=Ut(t.b,t.c),t.f.apply(null,t.a)}function qt(t){w.call(this),this.b=t,this.a={}}b(Ot,kt),(e=Ot.prototype).ba=!1,e.L=null,e.eb=function(){if(this.ba){var t=y()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Bt(this),this.start()))}},e.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=y())},e.G=function(){Ot.N.G.call(this),Bt(this),delete this.a},b(Ft,w),(e=Ft.prototype).ea=!1,e.U=null,e.Sa=function(t){this.a=arguments,this.U?this.ea=!0:jt(this)},e.G=function(){Ft.N.G.call(this),this.U&&(r.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},e.Za=function(){this.U=null,this.ea&&(this.ea=!1,jt(this))},b(qt,w);var $t=[];function Vt(t,e,n,r){c(n)||(n&&($t[0]=n.toString()),n=$t);for(var i=0;i<n.length;i++){var o=ft(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function zt(t){N(t.a,(function(t,e){this.a.hasOwnProperty(e)&&mt(t)}),t),t.a={}}function Ht(){}qt.prototype.G=function(){qt.N.G.call(this),zt(this)},qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=null;function Wt(){return Gt=Gt||new kt}function Kt(t){et.call(this,"serverreachability",t)}function Zt(t){var e=Wt();e.dispatchEvent(new Kt(e,t))}function Qt(t){et.call(this,"statevent",t)}function Yt(t){var e=Wt();e.dispatchEvent(new Qt(e,t))}function Xt(t){et.call(this,"timingevent",t)}function Jt(t,e){if("function"!=u(t))throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){t()}),e)}b(Kt,et),b(Qt,et),b(Xt,et);var te={NO_ERROR:0,fb:1,mb:2,lb:3,ib:4,kb:5,nb:6,Ka:7,TIMEOUT:8,qb:9},ee={hb:"complete",ub:"success",La:"error",Ka:"abort",sb:"ready",tb:"readystatechange",TIMEOUT:"timeout",ob:"incrementaldata",rb:"progress",jb:"downloadprogress",vb:"uploadprogress"};function ne(){}function re(t){var e;return(e=t.a)||(e=t.a={}),e}function ie(){}ne.prototype.a=null;var oe,ae={OPEN:"a",gb:"b",La:"c",pb:"d"};function se(){et.call(this,"d")}function ue(){et.call(this,"c")}function ce(){}function le(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new qt(this),this.O=he,t=$?125:void 0,this.P=new Ot(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}b(se,et),b(ue,et),b(ce,ne),oe=new ce;var he=45e3,de={},fe={};function pe(t,e,n){t.F=1,t.f=Fe(Ne(e)),t.l=n,t.H=!0,ge(t,null)}function me(t,e,n,r){t.F=1,t.f=Fe(Ne(e)),t.l=null,t.H=n,ge(t,r)}function ge(t,e){t.v=y(),be(t),t.D=Ne(t.f),Ue(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Ft(g(t.Ia,t,t.a),t.J)),Vt(t.I,t.a,"readystatechange",t.bb),e=t.h?L(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Zt(1)}function ve(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=ye(t,n);if(i==fe){4==e&&(t.c=4,Yt(14),r=!1);break}if(i==de){t.c=4,Yt(15),r=!1;break}xe(t,i)}4==e&&0==n.length&&(t.c=1,Yt(16),r=!1),t.b=t.b&&r,r||(Ee(t),ke(t))}function ye(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?fe:(n=Number(e.substring(n,r)),isNaN(n)?de:(r+=1)+n>e.length?fe:(e=e.substr(r,n),t.A=r+n,e))}function be(t){t.R=y()+t.O,we(t,t.O)}function we(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=Jt(g(t.$a,t),e)}function _e(t){t.i&&(r.clearTimeout(t.i),t.i=null)}function ke(t){t.g.Ba()||t.m||t.g.ma(t)}function Ee(t){_e(t);var e=t.B;e&&"function"==typeof e.ka&&e.ka(),t.B=null,Bt(t.P),zt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function xe(t,e){try{t.g.Ea(t,e),Zt(4)}catch(t){}}function Se(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||i(t))k(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(l(t)||i(t)){n=[];for(var r=t.length,o=0;o<r;o++)n.push(o)}else for(o in n=[],r=0,t)n[r++]=o;o=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(i(t))return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var a=0;a<o;a++)e.call(void 0,r[a],n&&n[a],t)}}function Te(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Te)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ce(t,e){Ae(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ie(t))}function Ie(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ae(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ae(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(e=le.prototype).setTimeout=function(t){this.O=t},e.bb=function(t){t=t.target;var e=this.B;e&&3==Mn(t)?e.Sa():this.Ia(t)},e.Ia=function(t){try{if(t==this.a)t:{var e=Mn(this.a),n=this.a.xa(),r=this.a.T();if(!(3>e||3==e&&!$&&!this.a.aa())){this.m||4!=e||7==n||Zt(8==n||0>=r?3:2),_e(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Nn(this.a,"X-HTTP-Initial-Response");if(a&&!S(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,Yt(12),Ee(this),ke(this);break t}this.s=!0,xe(this,s)}this.H?(ve(this,e,o),$&&this.b&&3==e&&(Vt(this.I,this.P,"tick",this.ab),this.P.start())):xe(this,o),4==e&&Ee(this),this.b&&!this.m&&(4==e?this.g.ma(this):(this.b=!1,be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Yt(12)):(this.c=0,Yt(13)),Ee(this),ke(this)}}}catch(t){}},e.ab=function(){if(this.a){var t=Mn(this.a),e=this.a.aa();this.A<e.length&&(_e(this),ve(this,t,e),this.b&&4!=t&&be(this))}},e.cancel=function(){this.m=!0,Ee(this)},e.$a=function(){this.i=null;var t=y();0<=t-this.R?(2!=this.F&&(Zt(3),Yt(17)),Ee(this),this.c=2,ke(this)):we(this,this.R-t)},(e=Te.prototype).C=function(){Ie(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.K=function(){return Ie(this),this.a.concat()},e.get=function(t,e){return Ae(this.b,t)?this.b[t]:e},e.set=function(t,e){Ae(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Me(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Me){this.a=void 0!==e?e:t.a,Le(this,t.f),this.j=t.j,De(this,t.c),Re(this,t.h),this.g=t.g,e=t.b;var n=new Ke;n.c=e.c,e.a&&(n.a=new Te(e.a),n.b=e.b),Oe(this,n),this.i=t.i}else t&&(n=String(t).match(Pe))?(this.a=!!e,Le(this,n[1]||"",!0),this.j=je(n[2]||""),De(this,n[3]||"",!0),Re(this,n[4]),this.g=je(n[5]||"",!0),Oe(this,n[6]||"",!0),this.i=je(n[7]||"")):(this.a=!!e,this.b=new Ke(null,this.a))}function Ne(t){return new Me(t)}function Le(t,e,n){t.f=n?je(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function De(t,e,n){t.c=n?je(e,!0):e}function Re(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Oe(t,e,n){e instanceof Ke?(t.b=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qe(this,e),Xe(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=qe(e,Ge)),t.b=new Ke(e,t.a))}function Be(t,e,n){t.b.set(e,n)}function Ue(t,e,n){c(n)||(n=[String(n)]),Xe(t.b,e,n)}function Fe(t){return Be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^y()).toString(36)),t}function je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qe(t,e,n){return i(t)?(t=encodeURI(t).replace(e,$e),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $e(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Me.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qe(e,Ve,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(qe(e,Ve,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(qe(n,"/"==n.charAt(0)?He:ze,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",qe(n,We)),t.join("")};var Ve=/[#\/\?@]/g,ze=/[#\?:]/g,He=/[#\?]/g,Ge=/[#\?@]/g,We=/#/g;function Ke(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new Te,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qe(t,e){Ze(t),e=Je(t,e),Ae(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ce(t.a,e))}function Ye(t,e){return Ze(t),e=Je(t,e),Ae(t.a.b,e)}function Xe(t,e,n){Qe(t,e),0<n.length&&(t.c=null,t.a.set(Je(t,e),x(n)),t.b+=n.length)}function Je(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function tn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function en(t){var e=t.a.F.a;if(null!=e)Yt(4),e?(Yt(10),zn(t.a,t,!1)):(Yt(11),zn(t.a,t,!0));else{t.b=new le(t,void 0,void 0),t.b.h=t.h,e=Zn(e=t.a,e.Y()?t.f:null,t.i),Yt(4),Ue(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Be(e,n,r),me(t.b,e,!1,t.f)}}function nn(){this.a=this.b=null}function rn(){this.a=new Te}function on(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[d]||(t[d]=++f)):e.charAt(0)+t}function an(t,e){this.b=t,this.a=e}function sn(t){this.g=t||un,r.PerformanceNavigationTiming?t=0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(r.a&&r.a.Ca&&r.a.Ca()&&r.a.Ca().xb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new rn),this.b=null,this.c=[]}(e=Ke.prototype).add=function(t,e){Ze(this),this.c=null,t=Je(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.forEach=function(t,e){Ze(this),this.a.forEach((function(n,r){k(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.K=function(){Ze(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.C=function(t){Ze(this);var e=[];if(i(t))Ye(this,t)&&(e=E(e,this.a.get(Je(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=E(e,t[n])}return e},e.set=function(t,e){return Ze(this),this.c=null,Ye(this,t=Je(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},(e=tn.prototype).M=null,e.$=function(t){return this.a.$(t)},e.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},e.Ba=function(){return!1},e.Ea=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Nn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Nn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void Wn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Wn(e,2)}else 1==this.M&&(this.g?Yt(6):"11111"==e?(Yt(5),this.g=!0,(!j||10<=Number(Z))&&(this.c=200,this.b.cancel(),Yt(11),zn(this.a,this,!0))):(Yt(7),this.g=!1))},e.ma=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,en(this)):1==this.M&&(this.g?(Yt(11),zn(this.a,this,!0)):(Yt(10),zn(this.a,this,!1)));else{0==this.M?Yt(8):1==this.M&&Yt(9);var t=this.a;t.m=this.c,Wn(t,2)}},e.Y=function(){return this.a.Y()},e.la=function(){return this.a.la()},rn.prototype.add=function(t){this.a.set(on(t),t)},rn.prototype.C=function(){return this.a.C()};var un=10;function cn(t,e){!t.a&&(I(e,"spdy")||I(e,"quic")||I(e,"h2"))&&(t.f=t.g,t.a=new rn,t.b&&(fn(t,t.b),t.b=null))}function ln(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function hn(t){return t.b?1:t.a?t.a.a.c:0}function dn(t,e){return t.b?t=t.b==e:t.a?(e=on(e),t=Ae(t.a.a.b,e)):t=!1,t}function fn(t,e){t.a?t.a.add(e):t.b=e}function pn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=on(e),n=Ae(t.a.a.b,n)),n&&Ce(t.a.a,on(e)))}function mn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return k(t.a.C(),(function(t){e=e.concat(t.j)})),e}return x(t.c)}function gn(){}function vn(){this.a=new gn}function yn(t,e,n){var r=n||"";try{Se(t,(function(t,n){var i=t;h(t)&&(i=xt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function bn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}sn.prototype.cancel=function(){this.c=mn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(k(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},gn.prototype.stringify=function(t){return r.JSON.stringify(t,void 0)},gn.prototype.parse=function(t){return r.JSON.parse(t,void 0)};var wn=r.JSON.parse;function _n(t){kt.call(this),this.headers=new Te,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=kn,this.D=this.F=!1}b(_n,kt);var kn="",En=/^https?$/i,xn=["POST","PUT"];function Sn(t){return"content-type"==t.toLowerCase()}function Tn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cn(t),An(t)}function Cn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function In(t){if(t.b&&void 0!==n&&(!t.s[1]||4!=Mn(t)||2!=t.T()))if(t.l&&4==Mn(t))Ut(t.Da,0,t);else if(t.dispatchEvent("readystatechange"),4==Mn(t)){t.b=!1;try{var e,i=t.T();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var a;if(a=0===i){var s=String(t.A).match(Pe)[1]||null;if(!s&&r.self&&r.self.location){var u=r.self.location.protocol;s=u.substr(0,u.length-1)}a=!En.test(s?s.toLowerCase():"")}e=a}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<Mn(t)?t.a.statusText:""}catch(t){c=""}t.f=c+" ["+t.T()+"]",Cn(t)}}finally{An(t)}}}function An(t,e){if(t.a){Pn(t);var n=t.a,r=t.s[0]?s:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Pn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(r.clearTimeout(t.m),t.m=null)}function Mn(t){return t.a?t.a.readyState:0}function Nn(t,e){return t.a?t.a.getResponseHeader(e):null}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return N(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),i(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var o=""}else o=t.substring(r+1,n);n=(t=[t.substr(0,r),o,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Be(t,e,n),t}function Dn(t){this.f=[],this.F=new nn,this.ga=this.oa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Pa=this.P=0,this.Na=!!a("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.na=!0,this.m=this.qa=this.O=-1,this.S=this.v=this.A=0,this.Ma=a("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Qa=a("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Oa=a("internalChannelParams.forwardChannelMaxRetries",t)||2,this.pa=a("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ja=t&&t.yb||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new sn(t&&t.concurrentRequestLimit),this.ja=new vn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.na=!1),this.fa=void 0}function Rn(t){if(On(t),3==t.u){var e=t.P++,n=Ne(t.B);Be(n,"SID",t.H),Be(n,"RID",e),Be(n,"TYPE","terminate"),jn(t,n),(e=new le(t,e,void 0)).F=2,e.f=Fe(Ne(n)),n=!1,r.navigator&&r.navigator.sendBeacon&&(n=r.navigator.sendBeacon(e.f.toString(),"")),!n&&r.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=y(),be(e)}Kn(t)}function On(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(r.clearTimeout(t.l),t.l=null),Hn(t),t.b.cancel(),t.h&&(o(t.h)&&r.clearTimeout(t.h),t.h=null)}function Bn(t,e){t.f.push(new an(t.Pa++,e)),3==t.u&&Un(t)}function Un(t){ln(t.b)||t.h||(t.h=!0,Nt(t.Ga,t),t.A=0)}function Fn(t,e){var n;n=e?e.W:t.P++;var r=Ne(t.B);Be(r,"SID",t.H),Be(r,"RID",n),Be(r,"AID",t.O),jn(t,r),t.g&&t.i&&Ln(r,t.g,t.i),n=new le(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=qn(t,n,1e3),n.setTimeout(Math.round(.5*t.pa)+Math.round(.5*t.pa*Math.random())),fn(t.b,n),pe(n,r,e)}function jn(t,e){t.c&&Se({},(function(t,n){Be(e,n,t)}))}function qn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?g(t.c.Ra,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{yn(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function $n(t){t.a||t.l||(t.S=1,Nt(t.Fa,t),t.v=0)}function Vn(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=Jt(g(t.Fa,t),Gn(t,t.v)),t.v++,!0)}function zn(t,e,n){var r=e.l;r&&cn(t.b,r),t.ia=t.na&&n,t.m=e.c,t.B=Zn(t,null,t.ha),Un(t)}function Hn(t){null!=t.s&&(r.clearTimeout(t.s),t.s=null)}function Gn(t,e){var n=t.Ma+Math.floor(Math.random()*t.Qa);return t.la()||(n*=2),n*e}function Wn(t,e){if(2==e){var n=null;t.c&&(n=null);var i=g(t.cb,t);n||(n=new Me("//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||Le(n,"https"),Fe(n)),function(t,e){var n=new Ht;if(r.Image){var i=new Image;i.onload=v(bn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=v(bn,n,i,"TestLoadImage: error",!1,e),i.onabort=v(bn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=v(bn,n,i,"TestLoadImage: timeout",!1,e),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Yt(2);t.u=0,t.c&&t.c.sa(e),Kn(t),On(t)}function Kn(t){t.u=0,t.m=-1,t.c&&(0==mn(t.b).length&&0==t.f.length||(t.b.c.length=0,x(t.f),t.f.length=0),t.c.ra())}function Zn(t,e,n){var i=function(t){return t instanceof Me?Ne(t):new Me(t,void 0)}(n);if(""!=i.c)e&&De(i,e+"."+i.c),Re(i,i.h);else{var o=r.location;i=function(t,e,n,r){var i=new Me(null,void 0);return t&&Le(i,t),e&&De(i,e),n&&Re(i,n),r&&(i.g=r),i}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,n)}return t.V&&N(t.V,(function(t,e){Be(i,e,t)})),e=t.j,n=t.I,e&&n&&Be(i,e,n),Be(i,"VER",t.va),jn(t,i),i}function Qn(){}function Yn(){if(j&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function Xn(t,e){kt.call(this),this.a=new Dn(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))e=i;else(r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.wa&&(t?t["X-WebChannel-Client-Profile"]=e.wa:t={"X-WebChannel-Client-Profile":e.wa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new er(this)}function Jn(t){se.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function tr(){ue.call(this),this.status=1}function er(t){this.a=t}(e=_n.prototype).ca=function(t,e,n,a){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?re(this.H):re(oe),this.a.onreadystatechange=g(this.Da,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Tn(this,t)}t=n||"";var s=new Te(this.headers);a&&Se(a,(function(t,e){s.set(e,t)})),a=function(t){t:{for(var e=Sn,n=t.length,r=i(t)?t.split(""):t,o=0;o<n;o++)if(o in r&&e.call(void 0,r[o],o,t)){e=o;break t}e=-1}return 0>e?null:i(t)?t.charAt(e):t[e]}(s.K()),n=r.FormData&&t instanceof r.FormData,!(0<=_(xn,e))||a||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pn(this),0<this.o&&((this.D=function(t){return j&&Y(9)&&o(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.Aa,this)):this.m=Ut(this.Aa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Tn(this,t)}},e.Aa=function(){void 0!==n&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),An(this))},e.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),An(this,!0)),_n.N.G.call(this)},e.Da=function(){this.j||(this.w||this.l||this.g?In(this):this.Ya())},e.Ya=function(){In(this)},e.T=function(){try{return 2<Mn(this)?this.a.status:-1}catch(t){return-1}},e.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},e.Ta=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wn(e)}},e.xa=function(){return this.h},e.Wa=function(){return i(this.f)?this.f:String(this.f)},(e=Dn.prototype).va=8,e.u=1,e.Ba=function(){return 0==this.u},e.Ga=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new le(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?R(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var o=e=0;o<this.f.length;o++){var a=this.f[o];if(void 0===(a="__data__"in a.a&&i(a=a.a.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=o;break t}if(4096===e||o===this.f.length-1){e=o+1;break t}}e=1e3}else e=1e3;e=qn(this,n,e),Be(o=Ne(this.B),"RID",t),Be(o,"CVER",22),this.o&&this.j&&Be(o,"X-HTTP-Session-Id",this.j),jn(this,o),this.g&&r&&Ln(o,this.g,r),fn(this.b,n),this.W?(Be(o,"$req",e),Be(o,"SID","null"),n.S=!0,pe(n,o,null)):pe(n,o,e),this.u=2}}else 3==this.u&&(t?Fn(this,t):0==this.f.length||ln(this.b)||Fn(this))},e.Fa=function(){this.l=null,this.a=new le(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Ne(this.oa);Be(t,"RID","rpc"),Be(t,"SID",this.H),Be(t,"CI",this.ia?"0":"1"),Be(t,"AID",this.O),jn(this,t),Be(t,"TYPE","xmlhttp"),this.g&&this.i&&Ln(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),me(this.a,t,!0,this.ga)},e.Ea=function(t,e){if(0!=this.u&&(this.a==t||dn(this.b,t)))if(this.m=t.o,!t.s&&dn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(c(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Hn(this),this.a.cancel(),this.a=null}Vn(this),Yt(18)}}else this.qa=e[1],0<this.qa-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=Jt(g(this.Xa,this),6e3));if(1>=hn(this.b)&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else Wn(this,11)}else if((t.s||this.a==t)&&Hn(this),!S(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.va=i),null!=(r=r[5])&&o(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Nn(r,"X-Client-Wire-Protocol"))&&cn(this.b,i),this.j&&(r=Nn(r,"X-HTTP-Session-Id")))&&(this.I=r,Be(this.B,this.j,r)),this.u=3,this.c&&this.c.ua(),r=t,this.oa=Zn(this,this.Y()?this.ga:null,this.ha),r.s?(pn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(_e(r),be(r)),this.a=r):$n(this),0<this.f.length&&Un(this)}else"stop"!=r[0]&&"close"!=r[0]||Wn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Wn(this,7):Rn(this):"noop"!=r[0]&&this.c&&this.c.ta(r),this.v=0)}},e.Xa=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Vn(this),Yt(19))},e.ma=function(t){var e=null;if(this.a==t){Hn(this),this.a=null;var n=2}else{if(!dn(this.b,t))return;e=t.j,pn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)if(1==n){e=t.l?t.l.length:0,t=y()-t.v;var r=this.A;(n=Wt()).dispatchEvent(new Xt(n,e,t,r)),Un(this)}else $n(this);else if(3==(r=t.c)||0==r&&0<this.m||!(1==n&&function(t,e){return!(hn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.f=e.j.concat(t.f),!0):!(1==t.u||2==t.u||t.A>=(t.Na?0:t.Oa))&&(t.h=Jt(g(t.Ga,t,e),Gn(t,t.A)),t.A++,!0))}(this,t)||2==n&&Vn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Wn(this,5);break;case 4:Wn(this,10);break;case 3:Wn(this,6);break;default:Wn(this,2)}},e.cb=function(t){Yt(t?2:1)},e.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new _n(this.Ja)).F=this.R,t},e.la=function(){return!!this.c&&!0},e.Y=function(){return this.R},(e=Qn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.Ra=function(){},Yn.prototype.a=function(t,e){return new Xn(t,e)},b(Xn,kt),(e=Xn.prototype).addEventListener=function(t,e,n,r){Xn.N.addEventListener.call(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){Xn.N.removeEventListener.call(this,t,e,n,r)},e.Ua=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Yt(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new tn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Ln(e,t.g,t.i)),(t=t.w).i=n,e=Zn(t.a,null,t.i),Yt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,en(t)):(Ue(e,"MODE","init"),!t.a.o&&t.a.j&&Ue(e,"X-HTTP-Session-Id",t.a.j),t.b=new le(t,void 0,void 0),t.b.h=t.h,me(t.b,e,!1,null),t.M=0)},e.close=function(){Rn(this.a)},e.Va=function(t){if(i(t)){var e={};e.__data__=t,Bn(this.a,e)}else this.h?((e={}).__data__=xt(t),Bn(this.a,e)):Bn(this.a,t)},e.G=function(){this.a.c=null,delete this.f,Rn(this.a),delete this.a,Xn.N.G.call(this)},b(Jn,se),b(tr,ue),b(er,Qn),er.prototype.ua=function(){this.a.dispatchEvent("a")},er.prototype.ta=function(t){this.a.dispatchEvent(new Jn(t))},er.prototype.sa=function(t){this.a.dispatchEvent(new tr(t))},er.prototype.ra=function(){this.a.dispatchEvent("b")};var nr=v((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),Yn);Yn.prototype.createWebChannel=Yn.prototype.a,Xn.prototype.send=Xn.prototype.Va,Xn.prototype.open=Xn.prototype.Ua,Xn.prototype.close=Xn.prototype.close,te.NO_ERROR=0,te.TIMEOUT=8,te.HTTP_ERROR=6,ee.COMPLETE="complete",ie.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",kt.prototype.listen=kt.prototype.ya,_n.prototype.listenOnce=_n.prototype.za,_n.prototype.getLastError=_n.prototype.Wa,_n.prototype.getLastErrorCode=_n.prototype.xa,_n.prototype.getStatus=_n.prototype.T,_n.prototype.getResponseJson=_n.prototype.Ta,_n.prototype.getResponseText=_n.prototype.aa,_n.prototype.send=_n.prototype.ca,t.exports={createWebChannelTransport:nr,ErrorCode:te,EventType:ee,WebChannel:ie,XhrIo:_n}}).call(void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),Vt=($t.createWebChannelTransport,$t.ErrorCode,$t.EventType,$t.WebChannel,$t.XhrIo,St((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(Pt),i=r.SDK_VERSION,o=new At.Logger("@firebase/firestore");
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function a(){return o.logLevel===At.LogLevel.DEBUG?n.DEBUG:o.logLevel===At.LogLevel.SILENT?n.SILENT:n.ERROR}function s(t){switch(t){case n.DEBUG:o.logLevel=At.LogLevel.DEBUG;break;case n.ERROR:o.logLevel=At.LogLevel.ERROR;break;case n.SILENT:o.logLevel=At.LogLevel.SILENT;break;default:o.error("Firestore ("+i+"): Invalid value passed to `setLogLevel`")}}function u(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(o.logLevel<=At.LogLevel.DEBUG){var a=n.map(l);o.debug.apply(o,Tt.__spreadArrays(["Firestore ("+i+") ["+t+"]: "+e],a))}}function c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(o.logLevel<=At.LogLevel.ERROR){var r=e.map(l);o.error.apply(o,Tt.__spreadArrays(["Firestore ("+i+"): "+t],r))}}function l(t){if("string"==typeof t)return t;var e=f.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function h(t){var e="FIRESTORE ("+i+") INTERNAL ASSERTION FAILED: "+t;throw c(e),new Error(e)}function d(t,e){t||h(e)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(n||(n={}));var f=function(){function t(){}return t.setPlatform=function(e){t.platform&&h("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||h("Platform not set"),t.platform},t}();function p(){return f.getPlatform().emptyByteString}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},g=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Tt.__extends(e,t),e}(Error);
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function v(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new g(m.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function b(t,e){return void 0!==t?t:e}function w(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function _(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k(t){for(var e in d(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function E(t,e){if(0!==e.length)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+V(e.length,"argument")+".")}function x(t,e,n){if(e.length!==n)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires "+V(n,"argument")+", but was called with "+V(e.length,"argument")+".")}function S(t,e,n){if(e.length<n)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires at least "+V(n,"argument")+", but was called with "+V(e.length,"argument")+".")}function T(t,e,n,r){if(e.length<n||e.length>r)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+V(e.length,"argument")+".")}function C(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+V(r,"element")+".")}function I(t,e,n,r){R(t,e,$(n)+" argument",r)}function A(t,e,n,r){void 0!==r&&I(t,e,n,r)}function P(t,e,n,r){R(t,e,n+" option",r)}function M(t,e,n,r){void 0!==r&&P(t,e,n,r)}function N(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+B(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+B(r[o]))}(t,e,n,r,i)}function L(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(B(u))}var c=B(r);throw new g(m.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function D(t,e,n,r){if(!e.some((function(t){return t===r})))throw new g(m.INVALID_ARGUMENT,"Invalid value "+B(r)+" provided to function "+t+"() for its "+$(n)+" argument. Acceptable values: "+e.join(", "))}function R(t,e,n,r){if(!("object"===e?O(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=B(r);throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function O(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function B(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":h("Unknown wrong type: "+typeof t)}function U(t,e,n){if(void 0===n)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+$(e)+" argument, but it was undefined.")}function F(t,e,n){_(e,(function(e,r){if(n.indexOf(e)<0)throw new g(m.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function j(t,e,n,r){var i=B(r);return new g(m.INVALID_ARGUMENT,"Function "+t+"() requires its "+$(n)+" argument to be a "+e+", but it was: "+i)}function q(t,e,n){if(n<=0)throw new g(m.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+$(e)+" argument to be a positive number, but it was: "+n+".")}function $(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function V(t,e){return t+" "+e+(1===t?"":"s")}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var z=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return d(20===e.length,"Invalid auto ID: "+e),e},t}();function H(t,e){return t<e?-1:t>e?1:0}function G(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function W(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function K(){if("undefined"==typeof Uint8Array)throw new g(m.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Z(){if(!f.getPlatform().base64Available)throw new g(m.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Q,Y=function(){function t(t){Z(),this._binaryString=t}return t.fromBase64String=function(e){x("Blob.fromBase64String",arguments,1),I("Blob.fromBase64String","string",1,e),Z();try{var n=f.getPlatform().atob(e);return new t(n)}catch(t){throw new g(m.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(x("Blob.fromUint8Array",arguments,1),K(),!(e instanceof Uint8Array))throw j("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,(function(t){return String.fromCharCode(t)})).join("");return new t(n)},t.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),Z(),f.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){x("Blob.toUint8Array",arguments,0),K();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._approximateByteSize=function(){return 2*this._binaryString.length},t.prototype._compareTo=function(t){return H(this._binaryString,t._binaryString)},t}(),X=v(Y,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),J=function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},tt=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return H(this.projectId,t.projectId)||H(this.database,t.database)},t}(),et=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),nt=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&h("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&h("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,d(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return d(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return d(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return d(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new g(m.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.EMPTY_PATH=new e([]),e}(nt),it=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return it.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new g(m.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new g(m.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new g(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new g(m.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(nt),at=function(){function t(e){this.path=e,d(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===rt.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return rt.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new rt(e.slice()))},t.fromPathString=function(e){return new t(rt.fromString(e))},t.EMPTY=new t(new rt([])),t}(),st=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction"}(Q||(Q={}));var ut=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new g(m.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),ct=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(t){})):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then((function(){return e.operationInProgress=!0,t().catch((function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw c("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.operationInProgress=!1,t}))}));return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),d(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var i=ut.createAndSchedule(this,t,e,n,(function(t){return r.removeDelayedOperation(t)}));return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&h("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){d(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then((function(){d(t===Q.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==Q.All&&i.timerId===t)break}return e.drain()}))},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);d(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}();function lt(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=dt(e)),e=ht(t.get(n),e);return dt(e)}function ht(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function dt(t){return t+""}function ft(t){var e=t.length;if(d(e>=2,"Invalid path "+t),2===e)return d(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),rt.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&h('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:h('Invalid encoded resource path: "'+t+'"')}o=a+2}return new rt(r)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var pt=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new g(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new g(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new g(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new g(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?H(this.nanoseconds,t.nanoseconds):H(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),mt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new pt(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new pt(0,0)),t}(),gt=function(){function t(t,e){this.comparator=t,this.root=e||yt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new vt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new vt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new vt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new vt(this.root,t,this.comparator,!0)},t}(),vt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){d(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),yt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw h("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw h("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw h("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),bt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw h("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw h("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw h("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw h("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw h("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new yt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */yt.EMPTY=new bt;
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var wt=function(){function t(t){this.comparator=t,this.data=new gt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach((function(t){n=n.add(t)})),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new _t(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new _t(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),_t=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),kt=new gt(at.comparator);function Et(){return kt}function xt(){return Et()}var St=new gt(at.comparator);function Mt(){return St}var Nt=new gt(at.comparator);function Lt(){return Nt}var Dt=new wt(at.comparator);function Rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Dt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ot=new wt(H);function Bt(){return Ot}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ut=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,d(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&d(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;d(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},t.prototype.applyToLocalView=function(t,e){e&&d(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(t)&&(e=s.applyToLocalView(e,e,this.localWriteTime))}for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Rt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&G(this.mutations,t.mutations)&&G(this.baseMutations,t.baseMutations)},t}(),Ft=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){d(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Lt(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),jt=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&h("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++){r(o[i])}return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),qt="SimpleDb",Vt=function(){function t(e){this.db=e,12.2===t.getIOSVersion(Ct.getUA())&&c("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return d(t.isAvailable(),"IndexedDB not supported in current environment."),u(qt,"Opening database:",e),new jt((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new g(m.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new g(m.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(t){u(qt,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,Xe).next((function(){u(qt,"Database upgrade to version "+Xe+" complete")}))}})).toPromise()},t.delete=function(t){return u(qt,"Removing database:",t),Wt(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=Ct.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},t.getStore=function(t,e){return t.store(e)},t.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return Tt.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,s,c;return Tt.__generator(this,(function(l){switch(l.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),o=0,a=function(){var t,a,c,l;return Tt.__generator(this,(function(h){switch(h.label){case 0:++o,t=Ht.open(s.db,r?"readonly":"readwrite",e),h.label=1;case 1:return h.trys.push([1,3,,4]),(a=n(t).catch((function(e){return t.abort(e),jt.reject(e)})).toPromise()).catch((function(){})),[4,t.completionPromise];case 2:return h.sent(),[2,{value:a}];case 3:return c=h.sent(),l=i&&"FirebaseError"!==c.name&&o<3,u(qt,"Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),zt=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Wt(this.dbCursor.delete())},t}(),Ht=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new st,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=Zt(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(u(qt,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return d(!!e,"Object store not part of transaction: "+t),new Gt(e)},t}(),Gt=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(u(qt,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(u(qt,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Wt(n)},t.prototype.add=function(t){return u(qt,"ADD",this.store.name,t,t),Wt(this.store.add(t))},t.prototype.get=function(t){var e=this;return Wt(this.store.get(t)).next((function(n){return void 0===n&&(n=null),u(qt,"GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return u(qt,"DELETE",this.store.name,t),Wt(this.store.delete(t))},t.prototype.count=function(){return u(qt,"COUNT",this.store.name),Wt(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.deleteAll=function(t,e){u(qt,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(t,e,n){return n.delete()}))},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new jt((function(n,r){e.onerror=function(t){var e=Zt(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.iterateCursor=function(t,e){var n=[];return new jt((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new zt(i),a=e(i.primaryKey,i.value,o);if(a instanceof jt){var s=a.catch((function(t){return o.done(),jt.reject(t)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return jt.waitFor(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(d(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Wt(t){return new jt((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Zt(t.target.error);n(e)}}))}var Kt=!1;function Zt(t){var e=Vt.getIOSVersion(Ct.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new g("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Kt||(Kt=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qt=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return d(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return te(t).iterate({index:rn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next((function(e){return e.lastStreamToken=Jt(n),ne(t).put(e)}))},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next((function(t){return t.lastStreamToken}))},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next((function(n){return n.lastStreamToken=Jt(e),ne(t).put(n)}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ee(t),a=te(t);return a.add({}).next((function(s){d("number"==typeof s,"Auto-generated key is not a number");for(var u=new Ut(s,e,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new wt((function(t,e){return H(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var m=p[f],g=on.key(i.userId,m.key.path,s);h=h.add(m.key.path.popLast()),l.push(a.put(c)),l.push(o.put(g,on.PLACEHOLDER))}return h.forEach((function(e){l.push(i.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),jt.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return te(t).get(e).next((function(t){return t?(d(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null}))},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?jt.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return te(t).iterate({index:rn.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(d(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return te(t).iterate({index:rn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return te(t).loadAll(rn.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.fromDbMutationBatch(t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=on.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ee(t).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=ft(u);if(s===n.userId&&e.path.isEqual(l))return te(t).get(c).next((function(t){if(!t)throw h("Dangling document-mutation reference found: "+r+" which points to "+c);d(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new wt(H),i=[];return e.forEach((function(e){var o=on.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=ee(t).iterate({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=ft(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),jt.waitFor(i).next((function(){return n.lookupMutationBatches(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;d(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),d(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=on.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new wt(H);return ee(t).iterate({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=ft(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(t,s)}))},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(te(t).get(e).next((function(t){if(null===t)throw h("Dangling document-mutation reference found, which points to "+e);d(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))})))})),jt.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Xt(t.simpleDbTransaction,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.removeCachedMutationKeys(e.batchId)})),jt.forEach(r,(function(e){return n.referenceDelegate.removeMutationReference(t,e)}))}))},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return jt.resolve();var r=IDBKeyRange.lowerBound(on.prefixForUser(e.userId)),i=[];return ee(t).iterate({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ft(t[1]);i.push(o)}else r.done()})).next((function(){d(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.canonicalString()})))}))}))},t.prototype.containsKey=function(t,e){return Yt(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return ne(t).get(this.userId).next((function(t){return t||new nn(e.userId,-1,"")}))},t}();function Yt(t,e,n){var r=on.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return ee(t).iterate({range:o,keysOnly:!0},(function(t,n,r){var o=t[0],s=t[1];t[2];o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Xt(t,e,n){var r=t.store(rn.store),i=t.store(on.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){d(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=on.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return jt.waitFor(o).next((function(){return c}))}function Jt(t){return t instanceof Uint8Array?(d(Vt.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function te(t){return qn.getStore(t,rn.store)}function ee(t){return qn.getStore(t,on.store)}function ne(t){return qn.getStore(t,nn.store)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var re;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(re||(re={}));var ie=function(){function t(t,e){this.generatorId=t,d((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},t.prototype.after=function(t){return this.seek(t+2),this.next()},t.prototype.seek=function(t){d((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forTargetCache=function(){return new t(re.QueryCache,2)},t.forSyncEngine=function(){return new t(re.SyncEngine)},t}(),oe=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=ie.forTargetCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next((function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next((function(t){return mt.fromTimestamp(new pt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return ue(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.saveTargetData(t,e).next((function(){return n.retrieveMetadata(t).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(e,r),n.saveMetadata(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.saveTargetData(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return ae(t).delete(e.targetId)})).next((function(){return n.retrieveMetadata(t)})).next((function(e){return d(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.saveMetadata(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ae(t).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return jt.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){var n=this;return ae(t).iterate((function(t,r){var i=n.serializer.fromDbTarget(r);e(i)}))},t.prototype.retrieveMetadata=function(t){return se(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,qn.getStore(n,dn.store)).put(dn.key,e);var n},t.prototype.saveTargetData=function(t,e){return ae(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromTargetData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.retrieveMetadata(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ae(t).iterate({range:i,index:ln.queryTargetsIndexName},(function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=ce(t);return e.forEach((function(e){var a=lt(e.path);i.push(o.put(new hn(n,a))),i.push(r.referenceDelegate.addReference(t,e))})),jt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=ce(t);return jt.forEach(e,(function(e){var o=lt(e.path);return jt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ce(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ce(t),i=Rt();return r.iterate({range:n,keysOnly:!0},(function(t,e,n){var r=ft(t[1]),o=new at(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=lt(e.path),r=IDBKeyRange.bound([n],[W(n)],!1,!0),i=0;return ce(t).iterate({index:hn.documentTargetsIndex,keysOnly:!0,range:r},(function(t,e,n){var r=t[0];t[1];0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.getTargetDataForTarget=function(t,e){var n=this;return ae(t).get(e).next((function(t){return t?n.serializer.fromDbTarget(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ae(t){return qn.getStore(t,ln.store)}function se(t){return Vt.getStore(t,dn.store).get(dn.key).next((function(t){return d(null!==t,"Missing metadata row."),t}))}function ue(t){return se(t).next((function(t){return t.highestListenSequenceNumber}))}function ce(t){return qn.getStore(t,hn.store)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var le,he=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new wt(ot.comparator);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach((function(n){n.isPrefixOf(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),de=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),fe=function(t,e){this.version=t,this.transformResults=e};!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t[t.Verify=4]="Verify"}(le||(le={}));var pe,me,ge=function(){function t(t,e){this.updateTime=t,this.exists=e,d(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof je&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof je:(d(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),ve=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&d(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof je?t.version:mt.MIN},t}(),ye=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=le.Set,i}return Tt.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),d(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new je(this.key,n,{hasCommittedMutations:!0},this.value)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ve.getPostMutationVersion(t);return new je(this.key,r,{hasLocalMutations:!0},this.value)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(ve),be=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=le.Patch,o}return Tt.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),d(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new $e(this.key,e.version);var n=this.patchDocument(t);return new je(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ve.getPostMutationVersion(t),i=this.patchDocument(t);return new je(this.key,r,{hasLocalMutations:!0},i)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof je?t.data():Be.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}})),t},e}(ve),we=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=le.Transform,r.precondition=ge.exists(!0),r}return Tt.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),d(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new $e(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data(),r);return new je(this.key,i,{hasCommittedMutations:!0},o)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data(),i);return new je(this.key,r.version,{hasLocalMutations:!0},o)},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof je?t.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(e=null==e?Be.EMPTY.set(i.field,a):e.set(i.field,a))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&G(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){return d(t instanceof je,"Unknown MaybeDocument type "+t),d(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.serverTransformResults=function(t,e){var n=[];d(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof je&&(a=t.field(i.field)),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;e instanceof je&&(u=e.field(a.field)),null===u&&n instanceof je&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,t))}return r},e.prototype.transformObject=function(t,e){d(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},e}(ve),_e=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=le.Delete,r}return Tt.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),d(null==e.transformResults,"Transform results received by DeleteMutation."),new qe(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&d(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new qe(this.key,mt.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ve),ke=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=le.Verify,r}return Tt.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){h("VerifyMutation should only be used in Transactions.")},e.prototype.applyToLocalView=function(t,e,n){h("VerifyMutation should only be used in Transactions.")},e.prototype.extractBaseValue=function(t){h("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ve);!function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(pe||(pe={})),function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(me||(me={}));var Ee=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(me.Estimate,n);case"previous":return new t(me.Previous,n);case"none":case void 0:return new t(me.Default,n);default:return h("fromSnapshotOptions() called with invalid options.")}},t}(),xe=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return d(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),H(this.typeOrder,t.typeOrder)},t}(),Se=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=pe.NullValue,e.internalValue=null,e}return Tt.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 4},e.INSTANCE=new e,e}(xe),Te=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.BooleanValue,n}return Tt.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?H(this,t):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 4},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(xe),Ce=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.NumberValue,n}return Tt.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue,r=t.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(t);var n,r},e.prototype.approximateByteSize=function(){return 8},e}(xe);function Ie(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ie(this.internalValue,t.internalValue)},e}(Ce),Pe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ie(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Ce),Me=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.StringValue,n}return Tt.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?H(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 2*this.internalValue.length},e}(xe),Ne=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.TimestampValue,n}return Tt.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Le?-1:this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 16},e}(xe),Le=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=pe.TimestampValue,r}return Tt.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===me.Estimate?new Ne(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===me.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Ne?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},e}(xe),De=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.BlobValue,n}return Tt.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},e}(xe),Re=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=pe.RefValue,r}return Tt.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:at.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},e}(xe),Oe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.GeoPointValue,n}return Tt.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 16},e}(xe),Be=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.ObjectValue,n}return Tt.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal((function(n,r){e[n]=r.value(t)})),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=H(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return H(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(d(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(d(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){d(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach((function(t){n=n instanceof e?n.internalValue.get(t):null})),n},e.prototype.fieldMask=function(){var t=new wt(ot.comparator);return this.internalValue.forEach((function(n,r){var i=new ot([n]);if(r instanceof e){var o=r.fieldMask().fields;o.isEmpty()?t=t.add(i):o.forEach((function(e){t=t.add(i.child(e))}))}else t=t.add(i)})),he.fromSet(t)},e.prototype.approximateByteSize=function(){var t=0;return this.internalValue.inorderTraversal((function(e,n){t+=e.length+n.approximateByteSize()})),t},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new gt(H)),e}(xe),Ue=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=pe.ArrayValue,n}return Tt.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++){if(n[e].isEqual(t))return!0}return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return H(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.internalValue.reduce((function(t,e){return t+e.approximateByteSize()}),0)},e.prototype.toString=function(){return"["+this.internalValue.map((function(t){return t.toString()})).join(",")+"]"},e}(xe),Fe=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return at.comparator(t.key,e.key)},t}(),je=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,d(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return Tt.__extends(e,t),e.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);if(void 0===n){var r=this.getProtoField(t);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(e,n)}return n},e.prototype.data=function(){var t=this;if(!this.objectValue){var e=Be.EMPTY;_(this.proto.fields||{},(function(n,r){e=e.set(new ot([n]),t.converter(r))})),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.getProtoField=function(t){d(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):h("Trying to compare documents on fields that don't exist")},e}(Fe),qe=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Tt.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Fe),$e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Fe),Ve=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){_(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return k(this.inner)},t}(),ze=function(){function t(){this.changes=new Ve((function(t){return t.toString()})),this.changesApplied=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return d(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){d(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},t.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?jt.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){d(!this.changesApplied,"Changes have already been applied.")},t}(),He=function(){function t(t,e){this.serializer=t,this.indexManager=e}return t.prototype.addEntry=function(t,e,n){return We(t).put(Ke(e),n)},t.prototype.removeEntry=function(t,e){var n=We(t),r=Ke(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.setMetadata(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return We(t).get(Ke(e)).next((function(t){return n.maybeDecodeDocument(t)}))},t.prototype.getSizedEntry=function(t,e){var n=this;return We(t).get(Ke(e)).next((function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:Ze(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=xt();return this.forEachDbEntry(t,e,(function(t,e){var i=n.maybeDecodeDocument(e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.getSizedEntries=function(t,e){var n=this,r=xt(),i=new gt(at.comparator);return this.forEachDbEntry(t,e,(function(t,e){var o=n.maybeDecodeDocument(e);o?(r=r.insert(t,o),i=i.insert(t,Ze(e))):(r=r.insert(t,null),i=i.insert(t,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return jt.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return We(t).iterate({range:r},(function(t,e,r){for(var a=at.fromSegments(t);o&&at.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this;d(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Mt(),o=e.path.length+1,a={};if(n.isEqual(mt.MIN)){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=un.collectionReadTimeIndex}return We(t).iterate(a,(function(t,n,a){if(t.length===o){var s=r.serializer.fromDbRemoteDocument(n);e.path.isPrefixOf(s.key.path)?s instanceof je&&e.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.getNewDocumentChanges=function(t,e){var n=this,r=Et(),i=this.serializer.toDbTimestampKey(e),o=We(t),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:un.readTimeIndex,range:a},(function(t,e){var o=n.serializer.fromDbRemoteDocument(e);r=r.insert(o.key,o),i=e.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},t.prototype.getLastReadTime=function(t){var e=this,n=We(t),r=mt.MIN;return n.iterate({index:un.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.fromDbTimestampKey(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ge(t).get(cn.key).next((function(t){return d(!!t,"Missing document cache metadata"),t}))},t.prototype.setMetadata=function(t,e){return Ge(t).put(cn.key,e)},t.prototype.maybeDecodeDocument=function(t){if(t){var e=this.serializer.fromDbRemoteDocument(t);return e instanceof qe&&e.version.isEqual(mt.forDeletedDoc())?null:e}return null},t.RemoteDocumentChangeBuffer=function(t){function e(e,n){var r=t.call(this)||this;return r.documentCache=e,r.trackRemovals=n,r.documentSizes=new Ve((function(t){return t.toString()})),r}return Tt.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new wt((function(t,e){return H(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.documentSizes.get(o);if(d(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){d(!e.readTime.isEqual(mt.MIN),"Cannot add a document with a read time of zero");var u=e.documentCache.serializer.toDbRemoteDocument(a,e.readTime);i=i.add(o.path.popLast());var c=Ze(u);r+=c-s,n.push(e.documentCache.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=e.documentCache.serializer.toDbRemoteDocument(new qe(o,mt.forDeletedDoc()),e.readTime);n.push(e.documentCache.addEntry(t,o,l))}else n.push(e.documentCache.removeEntry(t,o))})),i.forEach((function(r){n.push(e.documentCache.indexManager.addToCollectionParentIndex(t,r))})),n.push(this.documentCache.updateMetadata(t,r)),jt.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next((function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next((function(t){var e=t.maybeDocuments;return t.sizeMap.forEach((function(t,e){n.documentSizes.set(t,e)})),e}))},e}(ze),t}();function Ge(t){return qn.getStore(t,cn.store)}function We(t){return qn.getStore(t,un.store)}function Ke(t){return t.path.toArray()}function Ze(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw h("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qe=function(){function t(){this.collectionParentIndex=new Ye}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),jt.resolve()},t.prototype.getCollectionParents=function(t,e){return jt.resolve(this.collectionParentIndex.getEntries(e))},t}(),Ye=function(){function t(){this.index={}}return t.prototype.add=function(t){d(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new wt(rt.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new wt(rt.comparator)).toArray()},t}(),Xe=9,Je=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;d(n<r&&n>=0&&r<=Xe,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Ht(e);n<1&&r>=1&&(function(t){t.createObjectStore(en.store)}(t),function(t){t.createObjectStore(nn.store,{keyPath:nn.keyPath}),t.createObjectStore(rn.store,{keyPath:rn.keyPath,autoIncrement:!0}).createIndex(rn.userMutationsIndex,rn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(on.store)}(t),pn(t),function(t){t.createObjectStore(un.store)}(t));var a=jt.resolve();return n<3&&r>=3&&(0!==n&&(!function(t){t.deleteObjectStore(hn.store),t.deleteObjectStore(ln.store),t.deleteObjectStore(dn.store)}(t),pn(t)),a=a.next((function(){return function(t){var e=t.store(dn.store),n=new dn(0,0,mt.MIN.toTimestamp(),0);return e.put(dn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(rn.store).loadAll().next((function(n){t.deleteObjectStore(rn.store),t.createObjectStore(rn.store,{keyPath:rn.keyPath,autoIncrement:!0}).createIndex(rn.userMutationsIndex,rn.userMutationsKeyPath,{unique:!0});var r=e.store(rn.store),i=n.map((function(t){return r.put(t)}));return jt.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(mn.store,{keyPath:mn.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(cn.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(un.store);e.createIndex(un.readTimeIndex,un.readTimeIndexPath,{unique:!1}),e.createIndex(un.collectionReadTimeIndex,un.collectionReadTimeIndexPath,{unique:!1})}(e)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(un.store).iterate((function(t,n){e+=Ze(n)})).next((function(){var n=new cn(e);return t.store(cn.store).put(cn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(nn.store),r=t.store(rn.store);return n.loadAll().next((function(n){return jt.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(rn.userMutationsIndex,i).next((function(r){return jt.forEach(r,(function(r){d(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return Xt(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(hn.store),n=t.store(un.store);return ue(t).next((function(t){var r=[];return n.iterate((function(n,i){var o=new rt(n),a=function(t){return[0,lt(t)]}(o);r.push(e.get(a).next((function(n){return n?jt.resolve():function(n){return e.put(new hn(0,lt(n),t))}(o)})))})).next((function(){return jt.waitFor(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(fn.store,{keyPath:fn.keyPath});var n=e.store(fn.store),r=new Ye,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:lt(i)})}};return e.store(un.store).iterate({keysOnly:!0},(function(t,e){var n=new rt(t);return i(n.popLast())})).next((function(){return e.store(on.store).iterate({keysOnly:!0},(function(t,e){t[0];var n=t[1],r=(t[2],ft(n));return i(r.popLast())}))}))},t}();var tn=function(t,e){this.seconds=t,this.nanoseconds=e},en=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();var nn=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),rn=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();var on=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,lt(e)]},t.key=function(t,e,n){return[t,lt(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();var an=function(t,e){this.path=t,this.readTime=e},sn=function(t,e){this.path=t,this.version=e},un=function(){function t(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),cn=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();var ln=function(){function t(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),hn=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,d(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),dn=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),fn=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function pn(t){t.createObjectStore(hn.store,{keyPath:hn.keyPath}).createIndex(hn.documentTargetsIndex,hn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ln.store,{keyPath:ln.keyPath}).createIndex(ln.queryTargetsIndexName,ln.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(dn.store)}var mn=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}();var gn,vn=[nn.store,rn.store,on.store,un.store,ln.store,en.store,dn.store,hn.store],yn=Tt.__spreadArrays(vn,[mn.store]),bn=Tt.__spreadArrays(yn,[cn.store]),wn=Tt.__spreadArrays(bn,[fn.store]),_n=function(){function t(){this.collectionParentsCache=new Ye}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(d(e.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.collectionParentsCache.add(e)}));var o={collectionId:r,parent:lt(i)};return kn(t).put(o)}return jt.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[W(e),""],!1,!0);return kn(t).loadAll(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ft(o.parent))}return n}))},t}();function kn(t){return qn.getStore(t,fn.store)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(gn||(gn={}));var En=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=mt.MIN),void 0===o&&(o=mt.MIN),void 0===a&&(a=p()),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.target.isEqual(t.target)},t}(),xn=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=at.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new qe(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=at.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new $e(e,n)}return h("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t,e){var n=this.toDbTimestampKey(e),r=t.key.path.popLast().toArray();if(t instanceof je){var i=t.proto?t.proto:this.remoteSerializer.toDocument(t),o=t.hasCommittedMutations;return new un(null,null,i,o,n,r)}if(t instanceof qe){var a=t.key.path.toArray(),s=this.toDbTimestamp(t.version);o=t.hasCommittedMutations;return new un(null,new an(a,s),null,o,n,r)}if(t instanceof $e){a=t.key.path.toArray();var u=this.toDbTimestamp(t.version);return new un(new sn(a,u),null,null,!0,n,r)}return h("Unexpected MaybeDocument")},t.prototype.toDbTimestampKey=function(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]},t.prototype.fromDbTimestampKey=function(t){var e=new pt(t[0],t[1]);return mt.fromTimestamp(e)},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new tn(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new pt(t.seconds,t.nanoseconds);return mt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.remoteSerializer.toMutation(t)})),i=e.mutations.map((function(t){return n.remoteSerializer.toMutation(t)}));return new rn(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.remoteSerializer.fromMutation(t)})),r=t.mutations.map((function(t){return e.remoteSerializer.fromMutation(t)})),i=pt.fromMillis(t.localWriteTimeMs);return new Ut(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach((function(t){e.push(lt(t.path))})),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Rt(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new at(ft(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):mt.MIN,i=t.resumeToken;return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new En(e,t.targetId,gn.Listen,t.lastListenSequenceNumber,n,r,i)},t.prototype.toDbTarget=function(t){d(gn.Listen===t.purpose,"Only queries with purpose "+gn.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion),i=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion);return e=t.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.target):this.remoteSerializer.toQueryTarget(t.target),t.resumeToken instanceof Uint8Array?(d(Vt.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new ln(t.targetId,t.target.canonicalId(),r,n,t.sequenceNumber,i,e)},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Sn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.getDocumentInternal(t,e,r)}))},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++){t=i[r].applyToLocalView(e,t)}return t}))},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=xt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++){e=o[i].applyToLocalView(t,e)}r=r.insert(t,e)})),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e)}))},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=Et();return i.forEach((function(t,e){e||(e=new qe(t,mt.forDeletedDoc())),o=o.insert(t,e)})),o}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new at(e)).next((function(t){var e=Mt();return t instanceof je&&(e=e.insert(t.key,t)),e}))},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e,n){var r=this;d(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=Mt();return this.indexManager.getCollectionParents(t,i).next((function(a){return jt.forEach(a,(function(a){var s=e.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.addMissingBaseDocuments(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof je?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=Rt(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof be&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof je&&(c=c.insert(t,e))})),c}))},t}(),Tn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cn=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),In=function(){function t(){this.refsByKey=new wt(An.compareByKey),this.refsByTarget=new wt(An.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new An(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.removeRef(new An(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.removeReferencesForId=function(t){var e=this,n=at.EMPTY,r=new An(n,t),i=new An(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(t){e.removeRef(t),o.push(t.key)})),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach((function(e){return t.removeRef(e)}))},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=at.EMPTY,n=new An(e,t),r=new An(e,t+1),i=Rt();return this.refsByTarget.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new An(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),An=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return at.comparator(t.key,e.key)||H(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return H(t.targetOrBatchId,e.targetOrBatchId)||at.comparator(t.key,e.key)},t}(),Pn=function(){function t(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new In,this.targetDataByTarget=new gt(H),this.targetIdByTarget=new Ve((function(t){return t.canonicalId()})),this.lastDocumentChangeReadTime=mt.MIN,d(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.localDocuments=new Sn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return t.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},t.prototype.handleUserChange=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n,r,i=this;return Tt.__generator(this,(function(o){switch(o.label){case 0:return e=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,e=i.persistence.getMutationQueue(t),n=new Sn(i.remoteDocuments,e,i.persistence.getIndexManager()),e.getAllMutationBatches(r)})).next((function(t){for(var e=[],i=[],a=Rt(),s=0,u=o;s<u.length;s++){var c=u[s];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var d=h[l];a=a.add(d.key)}}for(var f=0,p=t;f<p.length;f++){c=p[f];i.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++){d=g[m];a=a.add(d.key)}}return n.getDocuments(r,a).next((function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=e,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},t.prototype.localWrite=function(t){var e,n=this,r=pt.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Rt());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=c.extractBaseValue(e.get(c.key));null!=l&&a.push(new be(c.key,l,l.fieldMask(),ge.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,t)}))})).then((function(t){var n=t.applyToLocalDocumentSet(e);return{batchId:t.batchId,changes:n}}))},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.mutationQueue.lookupMutationKeys(n,t).next((function(t){return t?e.localDocuments.getDocuments(n,t):jt.resolve(null)}))}))},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next((function(){return e.applyWriteToRemoteDocuments(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next((function(t){return d(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.mutationQueue.getLastStreamToken(e)}))},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.mutationQueue.setLastStreamToken(n,t)}))},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.targetCache.getLastRemoteSnapshotVersion(e)}))},t.prototype.applyRemoteEvent=function(e){var n=this,r=e.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];w(e.targetChanges,(function(e,a){var u=i.get(e);if(u){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,e).next((function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,e)})));var c=a.resumeToken;if(c.length>0){var l=u.withResumeToken(c,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(e,l),t.shouldPersistTargetData(u,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}}));var c=Et(),l=Rt();if(e.documentUpdates.forEach((function(t,e){l=l.add(t)})),s.push(a.getEntries(o,l).next((function(t){e.documentUpdates.forEach((function(i,l){var h=t.get(i);l instanceof qe&&l.version.isEqual(mt.MIN)?(a.removeEntry(i,r),c=c.insert(i,l)):null==h||l.version.compareTo(h.version)>0||0===l.version.compareTo(h.version)&&h.hasPendingWrites?(d(!mt.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(l,r),c=c.insert(i,l)):u("LocalStore","Ignoring outdated watch update for ",i,". Current version:",h.version," Watch version:",l.version),e.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(mt.MIN)){var h=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(t){return d(r.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(h)}return jt.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,c)}))})).then((function(t){return n.targetDataByTarget=i,t}))},t.shouldPersistTargetData=function(t,e,n){return d(e.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);d(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return jt.forEach(t,(function(t){return jt.forEach(t.removedKeys,(function(t){return e.persistence.referenceDelegate.removeReference(n,t)}))}))}))},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)}))},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.localDocuments.getDocument(n,t)}))},t.prototype.allocateTarget=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return e.targetCache.getTargetData(n,t).next((function(i){return i?(r=i,jt.resolve(r)):e.targetCache.allocateTargetId(n).next((function(i){return r=new En(t,i,gn.Listen,n.currentSequenceNumber),e.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.targetDataByTarget.get(n.targetId)&&(e.targetDataByTarget=e.targetDataByTarget.insert(n.targetId,n),e.targetIdByTarget.set(t,n.targetId)),n}))},t.prototype.getTargetData=function(t,e){var n=this.targetIdByTarget.get(e);return void 0!==n?jt.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(t,e)},t.prototype.releaseTarget=function(t,e){var n=this,r=this.targetDataByTarget.get(t);d(null!==r,"Tried to release nonexistent target: "+t);var i=e?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(t);return e?jt.resolve():jt.forEach(o,(function(t){return n.persistence.referenceDelegate.removeReference(i,t)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(r.target)}))},t.prototype.executeQuery=function(t,e){var n=this,r=mt.MIN,i=Rt();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,t.toTarget()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,t,e?r:mt.MIN,e?i:Rt())})).next((function(t){return{documents:t,remoteKeys:i}}))}))},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.targetCache.getMatchingKeysForTargetId(n,t)}))},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=jt.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(t,r)})).next((function(t){var o=t,a=e.docVersions.get(r);d(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o,e.commitVersion):d(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(t,i)}))},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.collect(n,e.targetDataByTarget)}))},t.prototype.getTarget=function(t){var e=this,n=this.targetDataByTarget.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e.targetCache.getTargetDataForTarget(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.remoteDocuments.getNewDocumentChanges(e,t.lastDocumentChangeReadTime)})).then((function(e){var n=e.changedDocs,r=e.readTime;return t.lastDocumentChangeReadTime=r,n}))},t.prototype.synchronizeLastDocumentChangeReadTime=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t,e=this;return Tt.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.remoteDocuments.getLastReadTime(t)}))];case 1:return t.lastDocumentChangeReadTime=n.sent(),[2]}}))}))},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mn(t){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(e){if(t.code!==m.FAILED_PRECONDITION||t.message!==Tn)throw t;return u("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nn(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=H(n,i);return 0===a?H(r,o):a}var Ln=function(){function t(t){this.maxElements=t,this.buffer=new wt(Nn),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Nn(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Dn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rn=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),On=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){d(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Rn.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;d(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;u("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Q.LruGarbageCollection,e,(function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then((function(){return t.scheduleGC()})).catch(Mn)}))},t}(),Bn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return jt.resolve(et.INVALID);var r=new Ln(e);return this.delegate.forEachTarget(t,(function(t){return r.addElement(t.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,(function(t){return r.addElement(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Rn.COLLECTION_DISABLED?(u("LruGarbageCollector","Garbage collection skipped; disabled"),jt.resolve(Dn)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(u("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Dn):n.runGarbageCollection(t,e)}))},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var r,i,o,s,c,l,h,d=this,f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>d.params.maximumSequenceNumbersToCollect?(u("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+d.params.maximumSequenceNumbersToCollect+" from "+e),i=d.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),d.nthSequenceNumber(t,i)})).next((function(n){return r=n,c=Date.now(),d.removeTargets(t,r,e)})).next((function(e){return o=e,l=Date.now(),d.removeOrphanedDocuments(t,r)})).next((function(t){(h=Date.now(),a()<=n.DEBUG)&&u("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+i+" in "+(c-s)+"ms\n\tRemoved "+o+" targets in "+(l-c)+"ms\n\tRemoved "+t+" documents in "+(h-l)+"ms\nTotal Duration: "+(h-f)+"ms");return jt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})}))},t}(),Un="IndexedDbPersistence",Fn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",jn=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return Tt.__extends(e,t),e}(Cn),qn=function(){function t(e,n,r,i,o,a,s,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new zn(this,o),this.dbName=n+t.MAIN_DATABASE,this.serializer=new xn(s),this.document=i.document,this.targetCache=new oe(this.referenceDelegate,this.serializer),this.indexManager=new _n,this.remoteDocumentCache=new He(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new g(m.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof jn)return Vt.getStore(t.simpleDbTransaction,e);throw h("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e){return Tt.__awaiter(this,void 0,void 0,(function(){var n;return Tt.__generator(this,(function(r){switch(r.label){case 0:if(!t.isAvailable())throw new g(m.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return d(!this.started,"IndexedDbPersistence double-started!"),d(null!==this.window,"Expected 'window' to be defined"),Vt.openOrCreate(this.dbName,Xe,new Je(this.serializer)).then((function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()})).then((function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[dn.store],(function(t){return ue(t)}))})).then((function(e){t.listenSequence=new et(e,t.sequenceNumberSyncer)})).then((function(){t._started=!0})).catch((function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)}))},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return Tt.__awaiter(e,void 0,void 0,(function(){return Tt.__generator(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener((function(n){return Tt.__awaiter(e,void 0,void 0,(function(){return Tt.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget((function(){return Tt.__awaiter(e,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite-idempotent",wn,(function(e){return Vn(e).put(new mn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next((function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget((function(){return t.primaryStateListener(!1)})))}))})).next((function(){return t.canActAsPrimary(e)})).next((function(n){return t.isPrimary&&!n?t.releasePrimaryLeaseIfHeld(e).next((function(){return!1})):!!n&&t.acquireOrExtendPrimaryLease(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return u(Un,"Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.queue.enqueueAndForget((function(){return t.primaryStateListener(e)})),t.isPrimary=e}))},t.prototype.verifyPrimaryLease=function(t){var e=this;return $n(t).get(en.key).next((function(t){return jt.resolve(e.isLocalClient(t))}))},t.prototype.removeClientMetadata=function(t){return Vn(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var e=this;return Tt.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=t.getStore(n,mn.store);return r.loadAll().next((function(t){var n=e.filterActiveClients(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return jt.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Q.ClientMetadataRefresh,4e3,(function(){return t.updateClientMetadataAndTryBecomePrimary().then((function(){return t.maybeGarbageCollectMultiClientState()})).then((function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return $n(t).get(en.key).next((function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new g(m.FAILED_PRECONDITION,Fn);return!1}}return!(!e.networkEnabled||!e.inForeground)||Vn(t).loadAll().next((function(t){return void 0===e.filterActiveClients(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&u(Un,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t=this;return Tt.__generator(this,(function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[en.store,mn.store],(function(e){return t.releasePrimaryLeaseIfHeld(e).next((function(){return t.removeClientMetadata(e)}))}))];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter((function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)}))},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[mn.store],(function(e){return Vn(e).loadAll().next((function(e){return t.filterActiveClients(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return Tt.__awaiter(this,void 0,void 0,(function(){var n;return Tt.__generator(this,(function(r){switch(r.label){case 0:return t.isAvailable()?(n=e+t.MAIN_DATABASE,[4,Vt.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return d(this.started,"Cannot initialize MutationQueue before persistence is started."),Qt.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getTargetCache=function(){return d(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},t.prototype.getRemoteDocumentCache=function(){return d(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return d(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;u(Un,"Starting transaction:",t);var i,o=e.endsWith("idempotent"),a=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,wn,(function(o){return i=new jn(o,r.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.verifyPrimaryLease(o).next((function(t){return!!t||r.canActAsPrimary(o)})).next((function(e){if(!e)throw c("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new g(m.FAILED_PRECONDITION,Tn);return n(i)})).next((function(t){return r.acquireOrExtendPrimaryLease(o).next((function(){return t}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return $n(t).get(en.key).next((function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new g(m.FAILED_PRECONDITION,Fn)}))},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new en(this.clientId,this.allowTabSynchronization,Date.now());return $n(t).put(en.key,e)},t.isAvailable=function(){return Vt.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=$n(t);return n.get(en.key).next((function(t){return e.isLocalClient(t)?(u(Un,"Releasing primary lease."),n.delete(en.key)):jt.resolve()}))},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e)&&(!(t>n)||(c("Detected an update time that is in the future: "+t+" > "+n),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(d(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(d("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return u(Un,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return c(Un,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){c("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function $n(t){return t.store(en.store)}function Vn(t){return t.store(mn.store)}var zn=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new Bn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,(function(t,n){return e(n)}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Hn(t,e)},t.prototype.removeReference=function(t,e){return Hn(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Hn(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?jt.resolve(!0):function(t,e){var n=!1;return ne(t).iterateSerial((function(r){return Yt(t,r,e).next((function(t){return t&&(n=!0),jt.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(t,(function(a,s){if(s<=e){var u=n.isPinned(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),ce(t).delete([0,lt(a.path)])}))}));i.push(u)}})).next((function(){return jt.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Hn(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=ce(t),i=et.INVALID;return r.iterate({index:hn.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==et.INVALID&&e(new at(ft(n)),i),i=s,n=a):i=et.INVALID})).next((function(){i!==et.INVALID&&e(new at(ft(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Hn(t,e){return ce(t).put(function(t,e){return new hn(0,lt(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gn=Number,Wn=Gn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Kn=Gn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Zn=Gn.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Qn(t){return null==t}function Yn(t){return Zn(t)&&t<=Kn&&t>=Wn}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Xn,Jn=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){t+=i[r].canonicalId(),t+=","}Qn(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t=this.path.canonicalString();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Qn(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&(!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)))},t.prototype.isDocumentQuery=function(){return at.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t.First="F",t.Last="L"}(Xn||(Xn={}));var tr=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Xn.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[dr]:this.memoizedOrderBy=[new hr(t),dr];else{d(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:cr.ASCENDING;this.memoizedOrderBy.push(a===cr.ASCENDING?dr:fr)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){d(null==this.getInequalityFilterField()||!(e instanceof rr)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),d(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){d(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.withLimitToFirst=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Xn.First,this.startAt,this.endAt)},t.prototype.withLimitToLast=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Xn.Last,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},t.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},t.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},t.prototype.isEqual=function(t){return this.toTarget().isEqual(t.toTarget())&&this.limitType===t.limitType},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return d(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimitToFirst=function(){return!Qn(this.limit)&&this.limitType===Xn.First},t.prototype.hasLimitToLast=function(){return!Qn(this.limit)&&this.limitType===Xn.Last},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof rr&&n.isInequality())return n.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof rr&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Xn.First)this.memoizedTarget=new Jn(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===cr.DESCENDING?cr.ASCENDING:cr.DESCENDING;t.push(new hr(r.field,i))}var o=this.endAt?new lr(this.endAt.position,!this.endAt.before):null,a=this.startAt?new lr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Jn(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.memoizedTarget},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):at.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){d(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),er=function(){},nr=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return h("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),rr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return Tt.__extends(e,t),e.create=function(t,n,r){if(t.isKeyField())return n===nr.IN?(d(r instanceof Ue,"Comparing on key with IN, but filter value not an ArrayValue"),d(r.internalValue.every((function(t){return t instanceof Re})),"Comparing on key with IN, but an array value was not a RefValue"),new or(t,r)):(d(r instanceof Re,"Comparing on key, but filter value not a RefValue"),d(n!==nr.ARRAY_CONTAINS&&n!==nr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new ir(t,n,r));if(r.isEqual(Se.INSTANCE)){if(n!==nr.EQUAL)throw new g(m.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Pe.NAN)){if(n!==nr.EQUAL)throw new g(m.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===nr.ARRAY_CONTAINS?new ar(t,r):n===nr.IN?(d(r instanceof Ue,"IN filter has invalid value: "+r.toString()),new sr(t,r)):n===nr.ARRAY_CONTAINS_ANY?(d(r instanceof Ue,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new ur(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case nr.LESS_THAN:return t<0;case nr.LESS_THAN_OR_EQUAL:return t<=0;case nr.EQUAL:return 0===t;case nr.GREATER_THAN:return t>0;case nr.GREATER_THAN_OR_EQUAL:return t>=0;default:return h("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[nr.LESS_THAN,nr.LESS_THAN_OR_EQUAL,nr.GREATER_THAN,nr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(er),ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=at.comparator(t.key,e.key);return this.matchesComparison(n)},e}(rr),or=function(t){function e(e,n){var r=t.call(this,e,nr.IN,n)||this;return r.value=n,r}return Tt.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some((function(e){return t.key.isEqual(e.key)}))},e}(rr),ar=function(t){function e(e,n){return t.call(this,e,nr.ARRAY_CONTAINS,n)||this}return Tt.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ue&&e.contains(this.value)},e}(rr),sr=function(t){function e(e,n){var r=t.call(this,e,nr.IN,n)||this;return r.value=n,r}return Tt.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(rr),ur=function(t){function e(e,n){var r=t.call(this,e,nr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return Tt.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ue&&n.internalValue.some((function(t){return e.value.contains(t)}))},e}(rr),cr=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),lr=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){d(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())d(o instanceof Re,"Bound has a non-key value where the key path is being used."),n=at.comparator(o.key,e.key);else{var a=e.field(i.field);d(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===cr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},t}(),hr=function(){function t(t,e){this.field=t,void 0===e&&(e=cr.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?je.compareByKey(t,e):je.compareByField(this.field,t,e);switch(this.dir){case cr.ASCENDING:return n;case cr.DESCENDING:return-1*n;default:return h("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),dr=new hr(ot.keyField(),cr.ASCENDING),fr=new hr(ot.keyField(),cr.DESCENDING),pr=function(){function t(){}return t.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},t.prototype.getDocumentsMatchingQuery=function(t,e,r,i){var o=this;return d(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),e.matchesAllDocuments()?this.executeFullCollectionScan(t,e):r.isEqual(mt.MIN)?this.executeFullCollectionScan(t,e):this.localDocumentsView.getDocuments(t,i).next((function(s){var c=o.applyQuery(e,s);return(e.hasLimitToFirst()||e.hasLimitToLast())&&o.needsRefill(e.limitType,c,i,r)?o.executeFullCollectionScan(t,e):(a()<=n.DEBUG&&u("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),e.toString()),o.localDocumentsView.getDocumentsMatchingQuery(t,e,r).next((function(t){return c.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.applyQuery=function(t,e){var n=new wt((function(e,n){return t.docComparator(e,n)}));return e.forEach((function(e,r){r instanceof je&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.needsRefill=function(t,e,n,r){if(n.size!==e.size)return!0;var i=t===Xn.First?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.executeFullCollectionScan=function(t,e){return a()<=n.DEBUG&&u("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.localDocumentsView.getDocumentsMatchingQuery(t,e,mt.MIN)},t}(),mr=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=p(),this.batchesByDocumentKey=new wt(An.compareByKey)}return t.prototype.checkEmpty=function(t){return jt.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");d(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return d(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,jt.resolve()},t.prototype.getLastStreamToken=function(t){return jt.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,jt.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){d(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&d(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Ut(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new An(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return jt.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return jt.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return d(null!=n,"Failed to find local mutation batch."),jt.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),i=r<0?0:r;return jt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return jt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return jt.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new An(e,0),i=new An(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(t){d(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);d(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),jt.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new wt(H);return e.forEach((function(t){var e=new An(t,0),i=new An(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],(function(e){d(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)}))})),jt.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){d(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;at.isDocumentKey(i)||(i=i.child(""));var o=new An(new at(i),0),a=new wt(H);return this.batchesByDocumentKey.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)}),o),jt.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;d(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return jt.forEach(e.mutations,(function(i){var o=new An(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)})).next((function(){n.batchesByDocumentKey=r}))},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new An(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return jt.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&d(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),jt.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return d(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return d(n.batchId===t,"If found batch must match"),n},t}();var gr,vr=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new gt(at.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){d(!n.isEqual(mt.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return jt.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=xt();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),jt.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){d(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Mt(),i=new at(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof je&&e.matches(c)&&(r=r.insert(c.key,c))}return jt.resolve(r)},t.prototype.forEachDocumentKey=function(t,e){return jt.forEach(this.docs,(function(t){return e(t)}))},t.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.getLastReadTime=function(t){return jt.resolve(mt.MIN)},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return jt.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return Tt.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i?n.push(e.documentCache.addEntry(t,i,e.readTime)):e.documentCache.removeEntry(r)})),jt.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(ze),t}(),yr=function(){function t(t){this.persistence=t,this.targets=new Ve((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=mt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new In,this.targetCount=0,this.targetIdGenerator=ie.forTargetCache()}return t.prototype.forEachTarget=function(t,e){return this.targets.forEach((function(t,n){return e(n)})),jt.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return jt.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return jt.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,jt.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),jt.resolve()},t.prototype.saveTargetData=function(t){this.targets.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return d(!this.targets.has(e.target),"Adding a target that already exists"),this.saveTargetData(e),this.targetCount+=1,jt.resolve()},t.prototype.updateTargetData=function(t,e){return d(this.targets.has(e.target),"Updating a non-existent target"),this.saveTargetData(e),jt.resolve()},t.prototype.removeTargetData=function(t,e){return d(this.targetCount>0,"Removing a target from an empty cache"),d(this.targets.has(e.target),"Removing a non-existent target from the cache"),this.targets.delete(e.target),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,jt.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),jt.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return jt.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.targets.get(e)||null;return jt.resolve(n)},t.prototype.getTargetDataForTarget=function(t,e){return h("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.addReference(t,e))})),jt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.removeReference(t,e))})),jt.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),jt.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return jt.resolve(n)},t.prototype.containsKey=function(t,e){return jt.resolve(this.references.containsKey(e))},t}(),br=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new et(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new yr(this);this.indexManager=new Qe,this.remoteDocumentCache=new vr(this.indexManager,(function(t){return n.referenceDelegate.documentSize(t)}))}return t.createLruPersistence=function(e,n){return new t(e,(function(t){return new kr(t,n)}))},t.createEagerPersistence=function(e){return new t(e,(function(t){return new _r(t)}))},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new mr(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.targetCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;u("MemoryPersistence","Starting transaction:",t);var i=new wr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(t){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.mutationQueuesContainKey=function(t,e){return jt.or((n=this.mutationQueues,r=[],_(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.containsKey(t,e)}})));var n,r},t}(),wr=function(t){function e(e){var n=t.call(this)||this;return n.currentSequenceNumber=e,n}return Tt.__extends(e,t),e}(Cn),_r=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw h("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),jt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),jt.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),jt.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.orphanedDocuments.add(t)}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jt.forEach(this.orphanedDocuments,(function(r){return e.isReferenced(t,r).next((function(t){t||n.removeEntry(r)}))})).next((function(){return e._orphanedDocuments=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next((function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)}))},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return jt.or([function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return jt.resolve(n.inMemoryPins.containsKey(e))}])},t}(),kr=function(){function t(t,e){this.persistence=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ve((function(t){return lt(t.path)})),this.garbageCollector=new Bn(this,e)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return jt.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return jt.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(t,r,i).next((function(t){return t?jt.resolve():e(i)}))}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(t,(function(i){return n.isPinned(t,i,e).next((function(t){t||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(t)})).next((function(){return r}))},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),jt.resolve()},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),jt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),jt.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),jt.resolve()},t.prototype.documentSize=function(t){var e=t.key.toString().length;return t instanceof je&&(e+=t.data().approximateByteSize()),e},t.prototype.isPinned=function(t,e,n){var r=this;return jt.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return jt.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getTargetCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return jt.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),Er=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&u("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return e.lastAttemptTime=Date.now(),t()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}(gr||(gr={}));var xr,Sr,Tr=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=gr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Er(t,e)}return t.prototype.isStarted=function(){return this.state===gr.Starting||this.state===gr.Open||this.state===gr.Backoff},t.prototype.isOpen=function(){return this.state===gr.Open},t.prototype.start=function(){this.state!==gr.Error?(d(this.state===gr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(gr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.inhibitBackoff=function(){d(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=gr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return t.handleIdleCloseTimer()})))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){return this.isOpen()?[2,this.close(gr.Initial)]:[2]}))}))},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(n){switch(n.label){case 0:return d(this.isStarted(),"Only started streams should be closed."),d(t===gr.Error||Qn(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==gr.Error?this.backoff.reset():e&&e.code===m.RESOURCE_EXHAUSTED?(c(e.toString()),c("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===m.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;d(this.state===gr.Initial,"Must be in initial state to auth"),this.state=gr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(e){t.closeCount===n&&t.startStream(e)}),(function(n){e((function(){var e=new g(m.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)}))}))},t.prototype.startStream=function(t){var e=this;d(this.state===gr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen((function(){n((function(){return d(e.state===gr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=gr.Open,e.listener.onOpen()}))})),this.stream.onClose((function(t){n((function(){return e.handleStreamClose(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.performBackoff=function(){var t=this;d(this.state===gr.Error,"Should only perform backoff when in Error state"),this.state=gr.Backoff,this.backoff.backoffAndRun((function(){return Tt.__awaiter(t,void 0,void 0,(function(){return Tt.__generator(this,(function(t){return d(this.state===gr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=gr.Initial,this.start(),d(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.handleStreamClose=function(t){return d(this.isStarted(),"Can't handle server close on non-started stream"),u("PersistentStream","close with error: "+t),this.stream=null,this.close(gr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget((function(){return e.closeCount===t?n():(u("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Cr=function(t){function e(e,n,r,i,o){var a=t.call(this,e,Q.ListenStreamConnectionBackoff,Q.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return Tt.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Tr),Ir=function(t){function e(e,n,r,i,o){var a=t.call(this,e,Q.WriteStreamConnectionBackoff,Q.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=p(),a}return Tt.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(d(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return d(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){d(this.isOpen(),"Writing handshake requires an opened stream"),d(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;d(this.isOpen(),"Writing mutations requires an opened stream"),d(this.handshakeComplete_,"Handshake must be complete before writing mutations"),d(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map((function(t){return e.serializer.toMutation(t)}))};this.sendRequest(n)},e}(Tr),Ar=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new Ir(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new Cr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map((function(t){return e.serializer.toMutation(t)}))};return this.invokeRPC("Commit",n).then((function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map((function(t){return e.serializer.toName(t)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Et();n.forEach((function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);d(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(t,e,r)})).catch((function(t){throw t.code===m.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(t,e,r)})).catch((function(t){throw t.code===m.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t}(),Pr=function(){function t(t){this.datastore=t,this.readVersions=Lt(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n=this;return Tt.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new g(m.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof qe||t instanceof je?n.recordVersion(t):h("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new _e(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t,e=this;return Tt.__generator(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new ke(t,e.precondition(t)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof je)e=t.version;else{if(!(t instanceof qe))throw h("Document in a transaction was a "+t.constructor.name);e=mt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new g(m.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?ge.updateTime(e):ge.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(mt.forDeletedDoc()))throw new g(m.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ge.updateTime(e)}return ge.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){d(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(xr||(xr={})),function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(Sr||(Sr={}));
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Mr,Nr=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=xr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(xr.Unknown),d(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Q.OnlineStateTimeout,1e4,(function(){return t.onlineStateTimer=null,d(t.state===xr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(xr.Offline),Promise.resolve()})))},t.prototype.handleWatchStreamFailure=function(t){this.state===xr.Online?(this.setAndBroadcast(xr.Unknown),d(0===this.watchStreamFailures,"watchStreamFailures must be 0"),d(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(xr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===xr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(c(e),this.shouldWarnClientIsOffline=!1):u("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}();function Lr(t){switch(t){case m.OK:return h("Treated status OK as error");case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0;default:return h("Unknown status code: "+t)}}function Dr(t){if(void 0===t)return c("GRPC error has no .code"),m.UNKNOWN;switch(t){case Mr.OK:return m.OK;case Mr.CANCELLED:return m.CANCELLED;case Mr.UNKNOWN:return m.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return m.INTERNAL;case Mr.UNAVAILABLE:return m.UNAVAILABLE;case Mr.UNAUTHENTICATED:return m.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case Mr.NOT_FOUND:return m.NOT_FOUND;case Mr.ALREADY_EXISTS:return m.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return m.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case Mr.ABORTED:return m.ABORTED;case Mr.OUT_OF_RANGE:return m.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return m.UNIMPLEMENTED;case Mr.DATA_LOSS:return m.DATA_LOSS;default:return h("Unknown status code: "+t)}}function Rr(t){if(void 0===t)return Mr.OK;switch(t){case m.OK:return Mr.OK;case m.CANCELLED:return Mr.CANCELLED;case m.UNKNOWN:return Mr.UNKNOWN;case m.DEADLINE_EXCEEDED:return Mr.DEADLINE_EXCEEDED;case m.RESOURCE_EXHAUSTED:return Mr.RESOURCE_EXHAUSTED;case m.INTERNAL:return Mr.INTERNAL;case m.UNAVAILABLE:return Mr.UNAVAILABLE;case m.UNAUTHENTICATED:return Mr.UNAUTHENTICATED;case m.INVALID_ARGUMENT:return Mr.INVALID_ARGUMENT;case m.NOT_FOUND:return Mr.NOT_FOUND;case m.ALREADY_EXISTS:return Mr.ALREADY_EXISTS;case m.PERMISSION_DENIED:return Mr.PERMISSION_DENIED;case m.FAILED_PRECONDITION:return Mr.FAILED_PRECONDITION;case m.ABORTED:return Mr.ABORTED;case m.OUT_OF_RANGE:return Mr.OUT_OF_RANGE;case m.UNIMPLEMENTED:return Mr.UNIMPLEMENTED;case m.DATA_LOSS:return Mr.DATA_LOSS;default:return h("Unknown status code: "+t)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(Mr||(Mr={}));
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Or,Br,Ur=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||at.comparator(e.key,n.key)}:function(t,e){return at.comparator(t.key,e.key)},this.keyedMap=Mt(),this.sortedSet=new gt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(Or||(Or={})),function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(Br||(Br={}));var Fr,jr=function(){function t(){this.changeMap=new gt(at.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Or.Added&&n.type===Or.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Or.Metadata&&n.type!==Or.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Or.Modified&&n.type===Or.Modified?this.changeMap=this.changeMap.insert(e,{type:Or.Modified,doc:t.doc}):t.type===Or.Modified&&n.type===Or.Added?this.changeMap=this.changeMap.insert(e,{type:Or.Added,doc:t.doc}):t.type===Or.Removed&&n.type===Or.Added?this.changeMap=this.changeMap.remove(e):t.type===Or.Removed&&n.type===Or.Modified?this.changeMap=this.changeMap.insert(e,{type:Or.Removed,doc:n.doc}):t.type===Or.Added&&n.type===Or.Removed?this.changeMap=this.changeMap.insert(e,{type:Or.Modified,doc:t.doc}):h("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal((function(e,n){t.push(n)})),t},t}(),qr=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:Or.Added,doc:t})})),new t(e,n,Ur.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),$r=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Vr.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(mt.MIN,i,Bt(),Et(),Rt())},t}(),Vr=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(p(),n,Rt(),Rt(),Rt())},t}(),zr=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},Hr=function(t,e){this.targetId=t,this.existenceFilter=e};!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(Fr||(Fr={}));var Gr=function(t,e,n,r){void 0===n&&(n=p()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Wr=function(){function t(){this.pendingResponses=0,this.documentChanges=Qr(),this._resumeToken=p(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Rt(),e=Rt(),n=Rt();return this.documentChanges.forEach((function(r,i){switch(i){case Or.Added:t=t.add(r);break;case Or.Modified:e=e.add(r);break;case Or.Removed:n=n.add(r);break;default:h("Encountered invalid change type: "+i)}})),new Vr(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Qr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Kr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Et(),this.pendingDocumentTargetMapping=Zr(),this.pendingTargetResets=new wt(H)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof je?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof qe&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ensureTargetState(n);switch(t.state){case Fr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Fr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Fr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),d(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Fr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Fr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:h("Unknown target watch change state: "+t.state)}}))},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):w(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.targetDataForActiveTarget(e);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new at(i.path);this.removeDocumentFromTarget(e,o,new qe(o,mt.forDeletedDoc()))}else d(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};w(this.targetStates,(function(r,i){var o=e.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new at(o.target.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new qe(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Rt();this.pendingDocumentTargetMapping.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.targetDataForActiveTarget(t);return!n||n.purpose===gn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new $r(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Et(),this.pendingDocumentTargetMapping=Zr(),this.pendingTargetResets=new wt(H),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Or.Modified:Or.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Or.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Wr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new wt(H),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.targetDataForActiveTarget(t);return e||u("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.targetDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getTargetDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;d(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Wr,this.metadataProvider.getRemoteKeysForTarget(t).forEach((function(n){e.removeDocumentFromTarget(t,n,null)}))},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Zr(){return new gt(at.comparator)}function Qr(){return new gt(at.comparator)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yr=function(){function t(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(t){n.enqueueAndForget((function(){return Tt.__awaiter(o,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(u("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Nr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t;return Tt.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(xr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(xr.Offline),[2]}}))}))},t.prototype.disableNetworkInternal=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(u("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},t.prototype.shutdown=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return u("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(xr.Unknown),[2]}}))}))},t.prototype.listen=function(t){y(this.listenTargets,t.targetId)||(this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t))},t.prototype.unlisten=function(t){d(y(this.listenTargets,t),"unlisten called on target no currently watched: "+t),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),k(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(xr.Unknown))},t.prototype.getTargetDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){d(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Kr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!k(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t=this;return Tt.__generator(this,(function(e){return w(this.listenTargets,(function(e,n){t.sendWatchRequest(n)})),[2]}))}))},t.prototype.onWatchStreamClose=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(e){return void 0===t&&d(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(xr.Unknown),[2]}))}))},t.prototype.onWatchStreamChange=function(t,e){return Tt.__awaiter(this,void 0,void 0,(function(){var n;return Tt.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(xr.Online),t instanceof Gr&&t.state===Fr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof zr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Hr?this.watchChangeAggregator.handleExistenceFilter(t):(d(t instanceof Gr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(mt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.raiseWatchSnapshot=function(t){var e=this;d(!t.isEqual(mt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return w(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.withResumeToken(r.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(p(),n.snapshotVersion),e.sendUnwatchRequest(t);var r=new En(n.target,t,gn.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;d(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return Tt.__awaiter(e,void 0,void 0,(function(){return Tt.__generator(this,(function(e){return y(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]}))}))}))})),r},t.prototype.fillWritePipeline=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t,e;return Tt.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){d(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){d(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){return this.writeStream.writeHandshake(),[2]}))}))},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}})).catch(Mn)},t.prototype.onMutationResult=function(t,e){var n=this;d(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Ft.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},t.prototype.onWriteStreamClose=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e=this;return Tt.__generator(this,(function(n){return void 0===t&&d(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then((function(){e.shouldStartWriteStream()&&e.startWriteStream()}))]):[2]}))}))},t.prototype.handleHandshakeError=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(e){return Lr(t.code)?(u("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=p(),[2,this.localStore.setLastStreamToken(p()).catch(Mn)]):[2]}))}))},t.prototype.handleWriteError=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n=this;return Tt.__generator(this,(function(r){return Lr(i=t.code)&&i!==m.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},t.prototype.createTransaction=function(){return new Pr(this.datastore)},t.prototype.restartNetwork=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(xr.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.handleCredentialChange=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(u("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.applyPrimaryState=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(xr.Unknown),e.label=4;case 4:return[2]}}))}))},t}(),Xr=function(){function t(t,e){if(x("GeoPoint",arguments,2),I("GeoPoint","number",1,t),I("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new g(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new g(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return H(this._lat,t._lat)||H(this._long,t._long)},t}(),Jr=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new Le(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ti=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ri(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Ue(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&G(e.elements,this.elements)},t}(),ei=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ri(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Ue(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&G(e.elements,this.elements)},t}(),ni=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);if(n instanceof Ae&&this.operand instanceof Ae){var r=n.internalValue+this.operand.internalValue;return new Ae(r)}r=n.internalValue+this.operand.internalValue;return new Pe(r)},t.prototype.applyToRemoteDocument=function(t,e){return d(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof Ce?t:new Ae(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function ri(t){return t instanceof Ue?t.internalValue.slice():[]}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ii,oi,ai=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),si=((ii={})[cr.ASCENDING.name]="ASCENDING",ii[cr.DESCENDING.name]="DESCENDING",ii),ui=((oi={})[nr.LESS_THAN.name]="LESS_THAN",oi[nr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",oi[nr.GREATER_THAN.name]="GREATER_THAN",oi[nr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",oi[nr.EQUAL.name]="EQUAL",oi[nr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",oi[nr.IN.name]="IN",oi[nr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",oi),ci=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function li(t,e){d(!Qn(t),e+" is missing")}function hi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):h("can't parse "+t)}var di=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?m.UNKNOWN:Dr(t.code);return new g(e,t.message||"")},t.prototype.toInt32Value=function(t){return this.options.useProto3Json||Qn(t)?t:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Qn(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);d(!!t,"Cannot deserialize null or undefined timestamp.");var e=hi(t.seconds||"0"),n=t.nanos||0;return new pt(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=ci.exec(t);if(d(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new pt(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(d(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Y.fromBase64String(t)):(d(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Y.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return d(!!t,"Trying to deserialize version that isn't set"),mt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=rt.fromString(t);return d(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return d(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),d(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new at(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?rt.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new rt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new rt(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return d(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Se)return{nullValue:"NULL_VALUE"};if(t instanceof Te)return{booleanValue:t.value()};if(t instanceof Ae)return{integerValue:""+t.value()};if(t instanceof Pe){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Me?{stringValue:t.value()}:t instanceof Be?{mapValue:this.toMapValue(t)}:t instanceof Ue?{arrayValue:this.toArrayValue(t)}:t instanceof Ne?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Oe?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof De?{bytesValue:this.toBytes(t.value())}:t instanceof Re?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:h("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return Se.INSTANCE;if("booleanValue"in t)return Te.of(t.booleanValue);if("integerValue"in t)return new Ae(hi(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Pe.NAN;if("Infinity"===t.doubleValue)return Pe.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Pe.NEGATIVE_INFINITY}return new Pe(t.doubleValue)}if("stringValue"in t)return new Me(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t){li(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Ue(n.map((function(t){return e.fromValue(t)})))}if("timestampValue"in t)return li(t.timestampValue,"timestampValue"),new Ne(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t){li(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new Oe(new Xr(r,i))}if("bytesValue"in t){li(t.bytesValue,"bytesValue");var o=this.fromBlob(t.bytesValue);return new De(o)}if("referenceValue"in t){li(t.referenceValue,"referenceValue");var a=this.fromResourceName(t.referenceValue),s=new tt(a.get(1),a.get(3)),u=new at(this.extractLocalPathFromResourceName(a));return new Re(s,u)}return h("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return d(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),i=this.fromVersion(t.updateTime);return new je(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.fromValue(t)}))},t.prototype.toFields=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.toValue(r)})),n},t.prototype.fromFields=function(t){var e=this,n=t,r=Be.EMPTY;return _(n,(function(t,n){r=r.set(new ot([t]),e.fromValue(n))})),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.toValue(t))})),{values:n}},t.prototype.fromFound=function(t){var e=this;d(!!t.found,"Tried to deserialize a found document from a missing document."),li(t.found.name,"doc.found.name"),li(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new je(n,r,{},void 0,t.found,(function(t){return e.fromValue(t)}))},t.prototype.fromMissing=function(t){d(!!t.missing,"Tried to deserialize a missing document from a found document."),d(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new qe(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):h("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Fr.Added:return"ADD";case Fr.Current:return"CURRENT";case Fr.NoChange:return"NO_CHANGE";case Fr.Removed:return"REMOVE";case Fr.Reset:return"RESET";default:return h("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Hr)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof zr){if(t.newDoc instanceof je){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof qe){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Gr){var n=void 0;return t.cause&&(n={code:Rr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return h("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){li(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Gr(r,i,o,s||null)}else if("documentChange"in t){li(t.documentChange,"documentChange");var u=t.documentChange;li(u.document,"documentChange.name"),li(u.document.name,"documentChange.document.name"),li(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),d=new je(c,l,{},void 0,u.document,(function(t){return n.fromValue(t)})),f=u.targetIds||[],p=u.removedTargetIds||[];e=new zr(f,p,d.key,d)}else if("documentDelete"in t){li(t.documentDelete,"documentDelete");var m=t.documentDelete;li(m.document,"documentDelete.document");c=this.fromName(m.document),l=m.readTime?this.fromVersion(m.readTime):mt.forDeletedDoc(),d=new qe(c,l),p=m.removedTargetIds||[];e=new zr([],p,d.key,d)}else if("documentRemove"in t){li(t.documentRemove,"documentRemove");var g=t.documentRemove;li(g.document,"documentRemove");c=this.fromName(g.document),p=g.removedTargetIds||[];e=new zr([],p,c,null)}else{if(!("filter"in t))return h("Unknown change type "+JSON.stringify(t));li(t.filter,"filter");var v=t.filter;li(v.targetId,"filter.targetId");var y=v.count||0,b=new ai(y),w=v.targetId;e=new Hr(w,b)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Fr.NoChange:"ADD"===t?Fr.Added:"REMOVE"===t?Fr.Removed:"CURRENT"===t?Fr.Current:"RESET"===t?Fr.Reset:h("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return mt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?mt.MIN:e.readTime?this.fromVersion(e.readTime):mt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof ye)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof _e)e={delete:this.toName(t.key)};else if(t instanceof be)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else if(t instanceof we)e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.toFieldTransform(t)}))}};else{if(!(t instanceof ke))return h("Unknown mutation type "+t.type);e={verify:this.toName(t.key)}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ge.NONE;if(t.update){li(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new be(r,i,o,n)}return new ye(r,i,n)}if(t.delete){r=this.fromName(t.delete);return new _e(r,n)}if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map((function(t){return e.fromFieldTransform(t)}));return d(!0===n.exists,'Transforms only support precondition "exists == true"'),new we(r,a)}if(t.verify){r=this.fromName(t.verify);return new ke(r,n)}return h("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return d(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:h("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ge.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ge.exists(t.exists):ge.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(mt.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map((function(t){return n.fromValue(t)}))),new fe(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(d(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.fromWriteResult(t,e)}))):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof Jr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ti)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof ei)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof ni)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw h("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)d("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=Jr.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ti(r.map((function(t){return e.fromValue(t)})))}else if("removeAllFromArray"in t){r=t.removeAllFromArray.values||[];n=new ei(r.map((function(t){return e.fromValue(t)})))}else if("increment"in t){var i=this.fromValue(t.increment);d(i instanceof Ce,"NUMERIC_ADD transform requires a NumberValue"),n=new ni(i)}else h("Unknown transform proto: "+JSON.stringify(t));var o=ot.fromServerFormat(t.fieldPath);return new de(o,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;d(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return tr.atPath(this.fromQueryPath(n)).toTarget()},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(d(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(d(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){d(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new tr(e,i,s,a,u,Xn.First,c,l).toTarget()},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case gn.Listen:return null;case gn.ExistenceFilterMismatch:return"existence-filter-mismatch";case gn.LimboResolution:return"limbo-document";default:return h("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.target;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof rr?e.toUnaryOrFieldFilter(t):h("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.fromFilter(t)})).reduce((function(t,e){return t.concat(e)})):h("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.toPropertyOrder(t)}))},t.prototype.fromOrder=function(t){var e=this;return t.map((function(t){return e.fromPropertyOrder(t)}))},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.toValue(t)}))}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.fromValue(t)}));return new lr(r,n)},t.prototype.toDirection=function(t){return si[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return cr.ASCENDING;case"DESCENDING":return cr.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return ui[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return nr.EQUAL;case"GREATER_THAN":return nr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return nr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return nr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return nr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return nr.ARRAY_CONTAINS;case"IN":return nr.IN;case"ARRAY_CONTAINS_ANY":return nr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return h("Unspecified operator");default:return h("Unknown operator")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ot.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new hr(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(t){return rr.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(t){if(t.op===nr.EQUAL){if(t.value.isEqual(Pe.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(Se.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return rr.create(e,nr.EQUAL,Pe.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return rr.create(n,nr.EQUAL,Se.INSTANCE);case"OPERATOR_UNSPECIFIED":return h("Unspecified filter");default:return h("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map((function(t){return ot.fromServerFormat(t)}));return he.fromArray(e)},t}(),fi=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},pi=function(){function t(t){this.syncEngine=t,this.queries=new Ve((function(t){return t.canonicalId()})),this.onlineState=xr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);(r||(n=!0,r=new fi,this.queries.set(e,r)),r.listeners.push(t),d(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return Tt.__generator(this,(function(o){return e=t.query,n=!1,(r=this.queries.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]}))}))},t.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++){u[s].onViewSnapshot(i)&&(e=!0)}a.viewSnap=i}}e&&this.raiseSnapshotsInSyncEvent()},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){o[i].applyOnlineStateChange(t)&&(e=!0)}})),e&&this.raiseSnapshotsInSyncEvent()},t.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},t.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},t.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(t){t.next()}))},t}(),mi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=xr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(d(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Or.Metadata&&e.push(i)}t=new qr(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},t.prototype.shouldRaiseInitialEvent=function(t,e){if(d(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==xr.Offline;return this.options.waitForSyncWhenOnline&&n?(d(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===xr.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){d(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=qr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),gi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}return t.fromSnapshot=function(e,n){for(var r=Rt(),i=Rt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Or.Added:r=r.add(s.doc.key);break;case Or.Removed:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),vi=function(t){this.key=t},yi=function(t){this.key=t},bi=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Rt(),this.mutatedKeys=Rt(),this.documentSet=new Ur(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new jr,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=e instanceof je?e:null;h&&(d(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),m=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:Or.Metadata,doc:h}),m=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:Or.Modified,doc:h}),m=!0,(u&&n.query.docComparator(h,u)>0||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:Or.Added,doc:h}),m=!0):l&&!h&&(r.track({type:Or.Removed,doc:l}),m=!0,(u||c)&&(s=!0));m&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Or.Removed,doc:l})}return d(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;d(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case Or.Added:return 1;case Or.Modified:case Or.Metadata:return 2;case Or.Removed:return 0;default:return h("Unknown ChangeType: "+t)}};return n(t)-n(e)}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t.type,e.type)||r.query.docComparator(t.doc,e.doc)})),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Br.Synced:Br.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new qr(this.query,t.documentSet,i,o,t.mutatedKeys,s===Br.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===xr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new jr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.add(t)})),t.modifiedDocuments.forEach((function(t){return d(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")})),t.removedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)})),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Rt(),this.documentSet.forEach((function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))}));var n=[];return e.forEach((function(e){t.limboDocuments.has(e)||n.push(new yi(e))})),this.limboDocuments.forEach((function(t){e.has(t)||n.push(new vi(t))})),n},t.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=Rt();var e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)},t.prototype.computeInitialSnapshot=function(){return qr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Br.Local)},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wi=function(){function t(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new Er(this.asyncQueue,Q.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun((function(){return Tt.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return Tt.__generator(this,(function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.handleTransactionError(t)}))}))})).catch((function(t){n.handleTransactionError(t)})),[2]}))}))}))},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!Qn(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return e.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Lr(e)}return!1},t}(),_i=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ki=function(t){this.key=t,this.receivedDocument=!1},Ei=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ve((function(t){return t.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new gt(at.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new In,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ie.forSyncEngine(),this.isPrimary=void 0,this.onlineState=xr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){d(null!==t,"SyncEngine listener cannot be null"),d(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o;return Tt.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(t.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(t,e,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}}))}))},t.prototype.initializeViewAndComputeSnapshot=function(t,e,n){return Tt.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Tt.__generator(this,(function(c){switch(c.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return r=c.sent(),i=new bi(t,r.remoteKeys),o=i.computeDocChanges(r.documents),a=Vr.createSynthesizedTargetChangeForCurrentChange(e,n&&this.onlineState!==xr.Offline),d(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),d(!!s.snapshot,"applyChanges for new view should always return a snapshot"),u=new _i(t,e,i),this.queryViewsByQuery.set(t,u),this.queriesByTarget[e]||(this.queriesByTarget[e]=[]),this.queriesByTarget[e].push(t),[2,s.snapshot]}}))}))},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n;return Tt.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t.query,!0)];case 1:return e=r.sent(),n=t.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(t.targetId,n.limboChanges),[2,n]}}))}))},t.prototype.unlisten=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return Tt.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),d(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),(n=this.queriesByTarget[e.targetId]).length>1?(this.queriesByTarget[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.queryViewsByQuery.delete(t),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseTarget(e.targetId,!1).then((function(){r.sharedClientState.clearQueryState(e.targetId),r.remoteStore.unlisten(e.targetId),r.removeAndCleanupTarget(e.targetId)})).catch(Mn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(e.targetId),[4,this.localStore.releaseTarget(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return Tt.__awaiter(this,void 0,void 0,(function(){var n;return Tt.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new wi(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n=this;return Tt.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),_(t.targetChanges,(function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(d(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?r.receivedDocument=!0:e.modifiedDocuments.size>0?d(r.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(d(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Mn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===Sr.RemoteStore||!this.isPrimary&&e===Sr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(e,r){var i=r.view.applyOnlineStateChange(t);d(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return Tt.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return Tt.__generator(this,(function(u){switch(u.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new gt(at.comparator)).insert(r,new qe(r,mt.forDeletedDoc())),o=Rt().add(r),a=new $r(mt.MIN,{},new wt(H),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(t,!1).then((function(){return s.removeAndCleanupTarget(t,e)})).catch(Mn)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},t.prototype.applyBatchState=function(t,e,n){return Tt.__awaiter(this,void 0,void 0,(function(){var r;return Tt.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(u("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):h("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},t.prototype.applySuccessfulWrite=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n;return Tt.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),e=t.batch.batchId,this.processUserCallback(e,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Mn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.rejectFailedWrite=function(t,e){return Tt.__awaiter(this,void 0,void 0,(function(){var n;return Tt.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Mn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.registerPendingWritesCallback=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n;return Tt.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||u("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}}))}))},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach((function(t){t.resolve()})),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach((function(e){e.forEach((function(e){e.reject(new g(m.CANCELLED,t))}))})),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new gt(H)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(d(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupTarget=function(t,e){var n=this;void 0===e&&(e=null),this.sharedClientState.removeLocalQueryTarget(t),d(this.queriesByTarget[t]&&0!==this.queriesByTarget[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.queriesByTarget[t];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),e&&this.syncEngineListener.onWatchError(o,e)}if(delete this.queriesByTarget[t],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(t);this.limboDocumentRefs.removeReferencesForId(t),a.forEach((function(t){n.limboDocumentRefs.containsKey(t)||n.removeLimboTarget(t)}))}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i instanceof vi)this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i);else if(i instanceof yi){u("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else h("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){u("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=tr.atPath(e.path);this.limboResolutionsByTarget[n]=new ki(e),this.remoteStore.listen(new En(r.toTarget(),n,gn.LimboResolution,et.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return Tt.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return Tt.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(t){var n=t.documents;return s.view.computeDocChanges(n,e)})):e})).then((function(t){var i=e&&e.targetChanges[s.targetId],a=s.view.applyChanges(t,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=gi.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},t.prototype.assertSubscribed=function(t){d(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n;return Tt.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},t.prototype.applyPrimaryState=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u=this;return Tt.__generator(this,(function(c){switch(c.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),w(this.queriesByTarget,(function(t,e){u.sharedClientState.isLocalQueryTarget(t)?a.push(t):s=s.then((function(){return u.removeAndCleanupTarget(t),u.localStore.releaseTarget(t,!0)})),u.remoteStore.unlisten(t)})),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},t.prototype.resetLimboDocuments=function(){var t=this;w(this.limboResolutionsByTarget,(function(e){t.remoteStore.unlisten(e)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new gt(at.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,p;return Tt.__generator(this,(function(m){switch(m.label){case 0:e=[],n=[],r=0,i=t,m.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return m.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=m.sent(),u=0,c=s,m.label=4;case 4:return u<c.length?(l=c[u],d(!!(h=this.queryViewsByQuery.get(l)),"No query view found for "+l),[4,this.synchronizeViewAndComputeSnapshot(h)]):[3,7];case 5:(f=m.sent()).snapshot&&n.push(f.snapshot),m.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return d(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return d(!!(p=m.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return a=m.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:m.sent(),m.label=12;case 12:e.push(a),m.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,e]}}))}))},t.prototype.synthesizeTargetToQuery=function(t){return new tr(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,Xn.First,t.startAt,t.endAt)},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return Tt.__awaiter(this,void 0,void 0,(function(){var r,i;return Tt.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return u("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=$r.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(t,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(t,n),[3,7];case 6:h("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},t.prototype.applyActiveTargetsChange=function(t,e){return Tt.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h=this;return Tt.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,f.label=1;case 1:return n<r.length?(l=r[n],d(!this.queriesByTarget[l],"Trying to add an already active target"),[4,this.localStore.getTarget(l)]):[3,6];case 2:return d(!!(i=f.sent()),"Query data for active target "+l+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(t){return Tt.__generator(this,(function(e){switch(e.label){case 0:return s.queriesByTarget[t]?[4,s.localStore.releaseTarget(t,!1).then((function(){h.remoteStore.unlisten(t),h.removeAndCleanupTarget(t)})).catch(Mn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},s=this,u=0,c=e,f.label=7;case 7:return u<c.length?(l=c[u],[5,a(l)]):[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];if(e&&e.receivedDocument)return Rt().add(e.key);var n=Rt(),r=this.queriesByTarget[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);d(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},t}(),xi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}();function Si(t,e){return d(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function Ti(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ci(t,e){return"firestore_targets_"+t+"_"+e}
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ii="SharedClientState",Ai=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,d(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new g(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(c(Ii,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Pi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,d(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new g(r.error.code,r.error.message)),i?new t(e,r.state,o):(c(Ii,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Bt(),a=0;i&&a<r.activeTargetIds.length;++a)i=Yn(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(c(Ii,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ni=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in xr&&"string"==typeof n.clientId?new t(n.clientId,xr[n.onlineState]):(c(Ii,"Failed to parse online state: "+e),null)},t}(),Li=function(){function t(){this.activeTargetIds=Bt()}return t.prototype.addQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Di=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new g(m.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=Si(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.activeClients[this.localClientId]=new Li,this.clientStateKeyRe=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.onlineStateKey=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return Tt.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return Tt.__generator(this,(function(f){switch(f.label){case 0:return d(!this.started,"WebStorageSharedClientState already started"),d(null!==this.syncEngine,"syncEngine property must be set before calling start()"),d(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(Si(this.persistenceKey,r)))&&(o=Mi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,c=this.earlyEvents;u<c.length;u++)l=c[u],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Bt();return _(this.activeClients,(function(e,n){t=t.unionWith(n.activeTargetIds)})),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ci(this.persistenceKey,t));if(n){var r=Pi.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ci(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.removeMutationState(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return u(Ii,"READ",t,e),e},t.prototype.setItem=function(t,e){u(Ii,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){u(Ii,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(u(Ii,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void c("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return Tt.__awaiter(e,void 0,void 0,(function(){var e,n,r,i,o,a;return Tt.__generator(this,(function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(d(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=et.INVALID;if(null!=t)try{var n=JSON.parse(t);d("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){c(Ii,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==et.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Ai(this.currentUser,t,e,n),i=Ti(this.persistenceKey,this.currentUser,t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=Ti(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:xr[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=Ci(this.persistenceKey,t),i=new Pi(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return d(null!==n,"Cannot parse client state key '"+t+"'"),Mi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);d(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ai.fromWebStorageEntry(new xi(i),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);d(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Pi.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return Ni.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(u(Ii,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]}))}))},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach((function(t){return Tt.__awaiter(n,void 0,void 0,(function(){return Tt.__generator(this,(function(e){return r.has(t)||o.push(t),[2]}))}))})),r.forEach((function(t){return Tt.__awaiter(n,void 0,void 0,(function(){return Tt.__generator(this,(function(e){return i.has(t)||a.push(t),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}();var Ri=function(){function t(){this.localState=new Li,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Li,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Oi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return Rn.withCacheSize(this.cacheSizeBytes)},t}(),Bi=function(){},Ui=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=z.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new st,r=new st,i=!1;return this.credentials.setChangeListener((function(o){i?e.asyncQueue.enqueueAndForget((function(){return e.handleCredentialChange(o)})):(i=!0,e.initializePersistence(t,r,o).then((function(t){return e.initializeRest(o,t)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.enableNetwork()}))},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Oi?this.startIndexedDbPersistence(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()})):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof g?t.code===m.FAILED_PRECONDITION||t.code===m.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code||11===t.code)},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new g(m.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=qn.buildStoragePrefix(this.databaseInfo),i=new di(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return Tt.__awaiter(n,void 0,void 0,(function(){var n,o;return Tt.__generator(this,(function(a){switch(a.label){case 0:if(e.synchronizeTabs&&!Di.isAvailable(this.platform))throw new g(m.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new Di(this.asyncQueue,this.platform,r,this.clientId,t):new Ri,[4,qn.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}}))}))}))},t.prototype.startMemoryPersistence=function(){return this.persistence=br.createEagerPersistence(this.clientId),this.sharedClientState=new Ri,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return u("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return Tt.__awaiter(n,void 0,void 0,(function(){var n,i,o,a,s,u,c=this;return Tt.__generator(this,(function(l){switch(l.label){case 0:return n=new pr,this.localStore=new Pn(this.persistence,n,t),[4,this.localStore.start()];case 1:return l.sent(),e&&(this.lruScheduler=new On(e,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),a=new Ar(this.asyncQueue,r,this.credentials,o),s=function(t){return c.syncEngine.applyOnlineStateChange(t,Sr.RemoteStore)},u=function(t){return c.syncEngine.applyOnlineStateChange(t,Sr.SharedClientState)},this.remoteStore=new Yr(this.localStore,a,this.asyncQueue,s,i),this.syncEngine=new Ei(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new pi(this.syncEngine),[4,this.sharedClientState.start()];case 2:return l.sent(),[4,this.remoteStore.start()];case 3:return l.sent(),[4,this.persistence.setPrimaryStateListener((function(t){return Tt.__awaiter(c,void 0,void 0,(function(){return Tt.__generator(this,(function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return Tt.__awaiter(c,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),u("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return Tt.__awaiter(t,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new st;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.registerPendingWritesCallback(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var i=new mi(t,e,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},t.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.unlisten(t)}))},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.localStore.readDocument(t)})).then((function(t){if(t instanceof je)return t;if(t instanceof qe)return null;throw new g(m.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return Tt.__awaiter(e,void 0,void 0,(function(){var e,n,r;return Tt.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return e=i.sent(),n=new bi(t,e.remoteKeys),r=n.computeDocChanges(e.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new st;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.write(t,n)})),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()}))},t.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(t.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new st;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()})),n.promise},t}(),Fi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ji=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];C("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(I("FieldPath","string",n,t[n]),0===t[n].length)throw new g(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ot.keyField().canonicalString()),t}(),qi=new RegExp("[~\\*/\\[\\]]");
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var $i=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Vi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){d(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(xi.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){d(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),zi=function(){function t(t){var e=this;this.tokenListener=null,this.currentUser=xi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),t.get().then((function(t){e.auth=t,e.tokenListener&&e.auth.addAuthTokenListener(e.tokenListener)}),(function(){})))}return t.prototype.getToken=function(){var t=this;d(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.tokenCounter!==e)throw new g(m.ABORTED,"getToken aborted due to token change.");return n?(d("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new $i(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){d(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){d(null!=this.tokenListener,"removeChangeListener() called twice"),d(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.auth&&this.auth.getUid();return d(null===t||"string"==typeof t,"Received invalid UID: "+t),new xi(t)},t}(),Hi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=xi.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Gi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Hi(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(xi.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Wi(t){if(!t)return new Vi;switch(t.type){case"gapi":var e=t.client;return d(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Gi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new g(m.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ki(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,["next","error","complete"])}var Zi,Qi=function(){function t(t){this._methodName=t}return t.delete=function(){return E("FieldValue.delete",arguments),Yi.instance},t.serverTimestamp=function(){return E("FieldValue.serverTimestamp",arguments),Xi.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S("FieldValue.arrayUnion",arguments,1),new Ji(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S("FieldValue.arrayRemove",arguments,1),new to(t)},t.increment=function(t){return I("FieldValue.increment","number",1,t),x("FieldValue.increment",arguments,1),new eo(t)},t.prototype.isEqual=function(t){return this===t},t}(),Yi=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return Tt.__extends(e,t),e.instance=new e,e}(Qi),Xi=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return Tt.__extends(e,t),e.instance=new e,e}(Qi),Ji=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return Tt.__extends(e,t),e}(Qi),to=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return Tt.__extends(e,t),e}(Qi),eo=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return Tt.__extends(e,t),e}(Qi),no=v(Qi,"Use FieldValue.<field>() instead."),ro=/^__.*__$/,io=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new be(t,this.data,this.fieldMask,e)):n.push(new ye(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new we(t,this.fieldTransforms)),n},t}(),oo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new be(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new we(t,this.fieldTransforms)),n},t}();function ao(t){switch(t){case Zi.Set:case Zi.MergeSet:case Zi.Update:return!0;case Zi.Argument:case Zi.ArrayArgument:return!1;default:throw h("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t[t.ArrayArgument=4]="ArrayArgument"}(Zi||(Zi={}));var so=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new g(m.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(0===t.length)throw this.createError("Document fields must not be empty");if(ao(this.dataSource)&&ro.test(t))throw this.createError('Document fields cannot begin and end with "__"')},t}(),uo=function(t,e){this.databaseId=t,this.key=e},co=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new so(Zi.Set,t,ot.EMPTY_PATH);ho("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new io(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new so(Zi.MergeSet,t,ot.EMPTY_PATH);ho("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new wt(ot.comparator),u=0,c=n;u<c.length;u++){var l=c[u],d=void 0;if(l instanceof ji)d=l._internalPath;else{if("string"!=typeof l)throw h("Expected stringOrFieldPath to be a string or a FieldPath");d=po(t,l)}if(!r.contains(d))throw new g(m.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");s=s.add(d)}i=he.fromSet(s),o=r.fieldTransforms.filter((function(t){return i.covers(t.field)}))}else i=he.fromArray(r.fieldMask),o=r.fieldTransforms;return new io(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new so(Zi.Update,t,ot.EMPTY_PATH);ho("Data must be an object, but it was:",r,e);var i=new wt(ot.comparator),o=Be.EMPTY;_(e,(function(e,a){var s=po(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Yi)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=he.fromSet(i);return new oo(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new so(Zi.Update,t,ot.EMPTY_PATH),o=[fo(t,e)],a=[n];if(r.length%2!=0)throw new g(m.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(fo(t,r[s])),a.push(r[s+1]);var u=new wt(ot.comparator),c=Be.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),d=this.runPreConverter(a[s],h);if(d instanceof Yi)u=u.add(l);else{var f=this.parseData(d,h);null!=f&&(u=u.add(l),c=c.set(l,f))}}var p=he.fromSet(u);return new oo(c,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e,n){void 0===n&&(n=!1);var r=new so(n?Zi.ArrayArgument:Zi.Argument,t,ot.EMPTY_PATH),i=this.parseData(e,r);return d(null!=i,"Parsed data should not be null."),d(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=mo(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(lo(t=this.runPreConverter(t,e)))return ho("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Qi)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement&&e.dataSource!==Zi.ArrayArgument)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new gt(H);return k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_(t,(function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))})),new Be(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=Se.INSTANCE),n.push(s),r++}return new Ue(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!ao(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Yi){if(e.dataSource!==Zi.MergeSet)throw e.dataSource===Zi.Update?(d(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Xi)e.fieldTransforms.push(new de(e.path,Jr.instance));else if(t instanceof Ji){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ti(n);e.fieldTransforms.push(new de(e.path,r))}else if(t instanceof to){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ei(n);e.fieldTransforms.push(new de(e.path,i))}else if(t instanceof eo){var o=this.parseQueryValue("FieldValue.increment",t._operand),a=new ni(o);e.fieldTransforms.push(new de(e.path,a))}else h("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Se.INSTANCE;if("number"==typeof t)return Yn(t)?new Ae(t):new Pe(t);if("boolean"==typeof t)return Te.of(t);if("string"==typeof t)return new Me(t);if(t instanceof Date)return new Ne(pt.fromDate(t));if(t instanceof pt)return new Ne(new pt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Xr)return new Oe(t);if(t instanceof Y)return new De(t);if(t instanceof uo)return new Re(t.databaseId,t.key);throw e.createError("Unsupported field value: "+B(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map((function(e,r){var i=new so(Zi.Argument,t,ot.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))}))},t}();function lo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Xr||t instanceof Y||t instanceof uo||t instanceof Qi)}function ho(t,e,n){if(!lo(n)||!O(n)){var r=B(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function fo(t,e){if(e instanceof ji)return e._internalPath;if("string"==typeof e)return po(t,e);throw new g(m.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function po(t,e){try{return function(t){if(t.search(qi)>=0)throw new g(m.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ji.bind.apply(ji,Tt.__spreadArrays([void 0],t.split("."))))}catch(e){throw new g(m.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=mo(e);throw new g(m.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function mo(t){return t instanceof Error?t.message:t.toString()}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var go=Rn.COLLECTION_DISABLED,vo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new g(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else P("settings","non-empty string","host",t.host),this.host=t.host,M("settings","boolean","ssl",t.ssl),this.ssl=b(t.ssl,!0);if(F("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),M("settings","object","credentials",t.credentials),this.credentials=t.credentials,M("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?c("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&c("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=b(t.timestampsInSnapshots,!0),M("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Rn.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==go&&t.cacheSizeBytes<Rn.MINIMUM_CACHE_SIZE_BYTES)throw new g(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Rn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}M("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),yo=function(){function t(e,n){var r=this;if(this._firebaseApp=null,this._queue=new ct,this.INTERNAL={delete:function(){return Tt.__awaiter(r,void 0,void 0,(function(){return Tt.__generator(this,(function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var i=e;this._firebaseApp=i,this._databaseId=t.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new zi(n)}else{var o=e;if(!o.projectId)throw new g(m.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new tt(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new Vi}this._settings=new vo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(x("Firestore.settings",arguments,1),I("Firestore.settings","object",1,t),y(t,"persistence"))throw new g(m.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new vo(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new g(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=Wi(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new g(m.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&c("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=b(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Oi(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=qn.buildStoragePrefix(this.makeDatabaseInfo()),n=new st;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return Tt.__awaiter(t,void 0,void 0,(function(){var t;return Tt.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new g(m.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,qn.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.ensureClientConfigured(),Ki(t))return this.onSnapshotsInSyncInternal(t);I("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.onSnapshotsInSyncInternal(e)},t.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new Fi({next:function(){t.next&&t.next()},error:function(t){throw h("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Bi),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new J(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){d(!!this._settings.host,"FirestoreSettings.host is not set"),d(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new Ui(f.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new co((function(e){if(e instanceof _o){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new g(m.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new uo(t,e._key)}return e}))},t.databaseIdFromApp=function(t){var e=t.options;if(!y(e,"projectId"))throw new g(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new g(m.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new tt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new g(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return x("Firestore.collection",arguments,1),I("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Co(rt.fromString(t),this)},t.prototype.doc=function(t){return x("Firestore.doc",arguments,1),I("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),_o.forPath(rt.fromString(t),this)},t.prototype.collectionGroup=function(t){if(x("Firestore.collectionGroup",arguments,1),I("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new g(m.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new So(new tr(rt.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return x("Firestore.runTransaction",arguments,1),I("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction((function(n){return t(new bo(e,n))}))},t.prototype.batch=function(){return this.ensureClientConfigured(),new wo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(a()){case n.DEBUG:return"debug";case n.ERROR:return"error";case n.SILENT:return"silent";default:return h("Unknown log level: "+a())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(x("Firestore.setLogLevel",arguments,1),I("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":s(n.DEBUG);break;case"error":s(n.ERROR);break;case"silent":s(n.SILENT);break;default:throw new g(m.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),bo=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;x("Transaction.get",arguments,1);var n=Mo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return h("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof qe)return new Eo(e._firestore,n._key,null,!1,!1,n._converter);if(r instanceof je)return new Eo(e._firestore,n._key,r,!1,!1,n._converter);throw h("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){T("Transaction.set",arguments,2,3);var r=Mo("Transaction.set",t,this._firestore);n=Io("Transaction.set",n);var i=Lo(r._converter,e,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof ji?(S("Transaction.update",arguments,3),r=Mo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(x("Transaction.update",arguments,2),r=Mo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){x("Transaction.delete",arguments,1);var e=Mo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),wo=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){T("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Mo("WriteBatch.set",t,this._firestore);n=Io("WriteBatch.set",n);var i=Lo(r._converter,e,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,ge.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof e||e instanceof ji?(S("WriteBatch.update",arguments,3),r=Mo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(x("WriteBatch.update",arguments,2),r=Mo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ge.exists(!0))),this},t.prototype.delete=function(t){x("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Mo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new _e(e._key,ge.NONE)),this},t.prototype.commit=function(){return Tt.__awaiter(this,void 0,void 0,(function(){return Tt.__generator(this,(function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new g(m.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),_o=function(){function t(t,e,n){this._key=t,this.firestore=e,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n,r){if(e.length%2!=0)throw new g(m.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new at(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Co(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(x("DocumentReference.collection",arguments,1),I("DocumentReference.collection","non-empty string",1,t),!t)throw new g(m.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=rt.fromString(t);return new Co(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)&&this._converter===e._converter},t.prototype.set=function(t,e){T("DocumentReference.set",arguments,1,2),e=Io("DocumentReference.set",e);var n=Lo(this._converter,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,e.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,ge.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ji?(S("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(x("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ge.exists(!0)))},t.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this._firestoreClient.write([new _e(this._key,ge.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];T("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Ki(t[i])||(F("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),M("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Ki(t[i])?n=t[i]:(I("DocumentReference.onSnapshot","function",i,t[i]),A("DocumentReference.onSnapshot","function",i+1,t[i+1]),A("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Fi({next:function(t){if(e.next){d(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Eo(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(tr.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return T("DocumentReference.get",arguments,0,1),Po("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then((function(t){n(new Eo(e.firestore,e._key,t,!0,t instanceof je&&t.hasLocalMutations,e._converter))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new g(m.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new g(m.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this._key,this.firestore,e)},t}(),ko=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Eo=function(){function t(t,e,n,r,i,o){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return t.prototype.data=function(t){if(T("DocumentSnapshot.data",arguments,0,1),t=Ao("DocumentSnapshot.data",t),this._document){if(this._converter){var e=new xo(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(e,t)}return this.toJSObject(this._document.data(),Ee.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},t.prototype.get=function(t,e){if(T("DocumentSnapshot.get",arguments,1,2),e=Ao("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(fo("DocumentSnapshot.get",t));if(null!==n)return this.toJSValue(n,Ee.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new _o(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ko(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))&&this._converter===e._converter},t.prototype.toJSObject=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.toJSValue(i,e)})),r},t.prototype.toJSValue=function(t,e){if(t instanceof Be)return this.toJSObject(t,e);if(t instanceof Ue)return this.toJSArray(t,e);if(t instanceof Re){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||c("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new _o(n,this._firestore,this._converter)}return t.value(e)},t.prototype.toJSArray=function(t,e){var n=this;return t.internalValue.map((function(t){return n.toJSValue(t,e)}))},t}(),xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tt.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return d(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Eo),So=function(){function t(t,e,n){this._query=t,this.firestore=e,this._converter=n}return t.prototype.where=function(e,n,r){x("Query.where",arguments,3),U("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];D("Query.where",o,2,n);var a=fo("Query.where",e),s=nr.fromString(n);if(a.isKeyField()){if(s===nr.ARRAY_CONTAINS||s===nr.ARRAY_CONTAINS_ANY)throw new g(m.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===nr.IN){this.validateDisjunctiveFilterElements(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.parseDocumentIdValue(h))}i=new Ue(u)}else i=this.parseDocumentIdValue(r)}else s!==nr.IN&&s!==nr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===nr.IN);var d=rr.create(a,s,i);return this.validateNewFilter(d),new t(this._query.addFilter(d),this.firestore,this._converter)},t.prototype.orderBy=function(e,n){var r;if(T("Query.orderBy",arguments,1,2),A("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=cr.ASCENDING;else{if("desc"!==n)throw new g(m.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=cr.DESCENDING}if(null!==this._query.startAt)throw new g(m.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new g(m.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=fo("Query.orderBy",e),o=new hr(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore,this._converter)},t.prototype.limit=function(e){return x("Query.limit",arguments,1),I("Query.limit","number",1,e),q("Query.limit",1,e),new t(this._query.withLimitToFirst(e),this.firestore,this._converter)},t.prototype.limitToLast=function(e){return x("Query.limitToLast",arguments,1),I("Query.limitToLast","number",1,e),q("Query.limitToLast",1,e),new t(this._query.withLimitToLast(e),this.firestore,this._converter)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];S("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore,this._converter)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];S("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore,this._converter)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];S("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore,this._converter)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];S("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore,this._converter)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.withConverter=function(e){return new t(this._query,this.firestore,e)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(U(t,1,e),e instanceof Eo){if(n.length>0)throw new g(m.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new g(m.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Re(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof Le)throw new g(m.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new g(m.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new lr(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new g(m.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new g(m.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(rt.fromString(a));if(!at.isDocumentKey(s))throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new at(s);i.push(new Re(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,a);i.push(c)}}return new lr(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];T("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Ki(t[i])||(F("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),M("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Ki(t[i])?n=t[i]:(I("Query.onSnapshot","function",i,t[i]),A("Query.onSnapshot","function",i+1,t[i+1]),A("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Fi({next:function(t){e.next&&e.next(new To(n.firestore,n._query,t,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.validateHasExplicitOrderByForLimitToLast=function(t){if(t.hasLimitToLast()&&0===t.explicitOrderBy.length)throw new g(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return T("Query.get",arguments,0,1),Po("Query.get",t),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then((function(t){n(new To(e.firestore,e._query,t,e._converter))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new g(m.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(rt.fromString(t));if(!at.isDocumentKey(e))throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Re(this.firestore._databaseId,new at(e))}if(t instanceof _o){var n=t;return new Re(this.firestore._databaseId,n._key)}throw new g(m.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+B(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new g(m.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new g(m.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new g(m.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new g(m.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(t){if(t instanceof rr){var e=[nr.ARRAY_CONTAINS,nr.ARRAY_CONTAINS_ANY],n=[nr.IN,nr.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new g(m.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(t.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(e)),null!=s)throw s===t.op?new g(m.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new g(m.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new g(m.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),To=function(){function t(t,e,n,r){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new ko(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;T("QuerySnapshot.forEach",arguments,1,2),I("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach((function(r){t.call(e,n.convertToDocumentImpl(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new So(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(F("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),M("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new g(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(e){var a=new xo(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r);return d(e.type===Or.Added,"Invalid event type for first snapshot"),d(!i||n.query.docComparator(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(t){return e||t.type!==Or.Metadata})).map((function(e){var i=new xo(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r),o=-1,s=-1;return e.type!==Or.Added&&(d((o=a.indexOf(e.doc.key))>=0,"Index for document not found"),a=a.delete(e.doc.key)),e.type!==Or.Removed&&(s=(a=a.add(e.doc)).indexOf(e.doc.key)),{type:No(e.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,e,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw j("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)&&this._converter===e._converter},t.prototype.convertToDocumentImpl=function(t){return new xo(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key),this._converter)},t}();Tt.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(To.prototype.docChanges,t,{get:function(){return function(){throw new g(m.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var Co=function(t){function e(e,n,r){var i=t.call(this,tr.atPath(e),n,r)||this;if(i._path=e,e.length%2!=1)throw new g(m.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return i}return Tt.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new _o(new at(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(T("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=z.newId()),I("CollectionReference.doc","non-empty string",1,t),""===t)throw new g(m.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=rt.fromString(t);return _o.forPath(this._query.path.child(e),this.firestore,this._converter)},e.prototype.add=function(t){x("CollectionReference.add",arguments,1),I("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this._path,this.firestore,t)},e}(So);function Io(t,e){if(void 0===e)return{merge:!1};if(F(t,e,["merge","mergeFields"]),M(t,"boolean","merge",e.merge),N(t,"mergeFields","a string or a FieldPath",e.mergeFields,(function(t){return"string"==typeof t||t instanceof ji})),void 0!==e.mergeFields&&void 0!==e.merge)throw new g(m.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ao(t,e){return void 0===e?{}:(F(t,e,["serverTimestamps"]),L(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Po(t,e){A(t,"object",1,e),e&&(F(t,e,["source"]),L(t,0,"source",e.source,["default","server","cache"]))}function Mo(t,e,n){if(e instanceof _o){if(e.firestore!==n)throw new g(m.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw j(t,"DocumentReference",1,e)}function No(t){switch(t){case Or.Added:return"added";case Or.Modified:case Or.Metadata:return"modified";case Or.Removed:return"removed";default:return h("Unknown change type: "+t)}}function Lo(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var Do=v(yo,"Use firebase.firestore() instead."),Ro=v(bo,"Use firebase.firestore().runTransaction() instead."),Oo=v(wo,"Use firebase.firestore().batch() instead."),Bo=v(_o,"Use firebase.firestore().doc() instead."),Uo=v(Eo),Fo=v(xo),jo=v(So),qo=v(To),$o=v(Co,"Use firebase.firestore().collection() instead."),Vo={Firestore:Do,GeoPoint:Xr,Timestamp:pt,Blob:X,Transaction:Ro,WriteBatch:Oo,DocumentReference:Bo,DocumentSnapshot:Uo,Query:jo,QueryDocumentSnapshot:Fo,QuerySnapshot:qo,CollectionReference:$o,FieldPath:ji,FieldValue:no,setLogLevel:yo.setLogLevel,CACHE_SIZE_UNLIMITED:go};function zo(t){t.INTERNAL.registerComponent(new It.Component("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new yo(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(t){d(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Vo)))}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ho=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),Go=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){u("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++){(0,e[t])(0)}},t.prototype.onNetworkUnavailable=function(){u("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++){(0,e[t])(1)}},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Wo=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){d(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){d(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){d(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){d(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){d(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){d(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),Ko="Connection",Zo={BatchGetDocuments:"batchGet",Commit:"commit"},Qo="gl-js/ fire/"+i,Yo=function(){function t(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Qo},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise((function(o,a){var s=new $t.XhrIo;s.listenOnce($t.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case $t.ErrorCode.NO_ERROR:var e=s.getResponseJson();u(Ko,"XHR received:",JSON.stringify(e)),o(e);break;case $t.ErrorCode.TIMEOUT:u(Ko,'RPC "'+t+'" timed out'),a(new g(m.DEADLINE_EXCEEDED,"Request time out"));break;case $t.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(u(Ko,'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=(c=r.status,l=c.toLowerCase().replace("_","-"),Object.values(m).indexOf(l)>=0?l:m.UNKNOWN);a(new g(i,r.message))}else a(new g(m.UNKNOWN,"Server responded with status "+s.getStatus()))}else u(Ko,'RPC "'+t+'" failed'),a(new g(m.UNAVAILABLE,"Connection failed."));break;default:h('RPC "'+t+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{u(Ko,'RPC "'+t+'" completed.')}var c,l}));var c=Tt.__assign({},e);delete c.database;var l=JSON.stringify(c);u(Ko,"XHR sending: ",i+" "+l);var d={"Content-Type":"text/plain"};r.modifyHeadersForRequest(d,n),s.send(i,"POST",l,d,15)}))},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=$t.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),Ct.isReactNative()||Ct.isElectron()||Ct.isIE()||Ct.isUWP()||Ct.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");u(Ko,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,c=!1,l=new Wo({sendFn:function(t){c?u(Ko,"Not sending because WebChannel is closed:",t):(s||(u(Ko,"Opening WebChannel transport."),a.open(),s=!0),u(Ko,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),h=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h($t.WebChannel.EventType.OPEN,(function(){c||u(Ko,"WebChannel transport opened.")})),h($t.WebChannel.EventType.CLOSE,(function(){c||(c=!0,u(Ko,"WebChannel transport closed"),l.callOnClose())})),h($t.WebChannel.EventType.ERROR,(function(t){c||(c=!0,u(Ko,"WebChannel transport errored:",t),l.callOnClose(new g(m.UNAVAILABLE,"The operation could not be completed")))})),h($t.WebChannel.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];d(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){u(Ko,"WebChannel received error:",i);var o=i.status,s=function(t){var e=Mr[t];if(void 0!==e)return Dr(e)}(o),h=i.message;void 0===s&&(s=m.INTERNAL,h="Unknown error status: "+o+" with message "+i.message),c=!0,l.callOnClose(new g(s,h)),a.close()}else u(Ko,"WebChannel received:",n),l.callOnMessage(n)}})),setTimeout((function(){l.callOnOpen()}),0),l},t.prototype.makeUrl=function(t){var e=Zo[t];return d(void 0!==e,"Unknown REST mapping for: "+t),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+e},t}(),Xo=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new Yo(t))},t.prototype.newConnectivityMonitor=function(){return Go.isAvailable()?new Go:new Ho},t.prototype.newSerializer=function(t){return new di(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
f.setPlatform(new Xo);
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Jo(t){zo(t),t.registerVersion("@firebase/firestore","1.10.0")}Jo(r),e.registerFirestore=Jo})));xt(Vt);Vt.registerFirestore;var zt=St((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(Pt),r=function(){function t(t,e){this.code_=E(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return E(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),i="unknown",o="object-not-found",a="quota-exceeded",s="unauthenticated",u="unauthorized",c="retry-limit-exceeded",l="canceled",h="invalid-url",d="invalid-default-bucket",f="no-default-bucket",p="cannot-slice-blob",m="server-file-wrong-size",g="no-download-url",v="invalid-argument",y="invalid-argument-count",b="app-deleted",w="invalid-root-operation",_="invalid-format",k="internal-error";
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function E(t){return"storage/"+t}function x(){return new r(i,"An unknown error occurred, please check the error payload for server response.")}function S(){return new r(l,"User canceled the upload/download.")}function T(){return new r(p,"Cannot slice blob for upload. Please retry the upload.")}function C(){return new r(g,"The given file does not have any download URLs.")}function I(t,e,n){return new r(v,"Invalid argument in `"+e+"` at index "+t+": "+n)}function A(){return new r(b,"The Firebase app was deleted.")}function P(t,e){return new r(_,"String does not match format '"+t+"': "+e)}function M(t){throw new r(k,"Internal error: "+t)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var N={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function L(t){switch(t){case N.RAW:case N.BASE64:case N.BASE64URL:case N.DATA_URL:return;default:throw"Expected one of the event types: ["+N.RAW+", "+N.BASE64+", "+N.BASE64URL+", "+N.DATA_URL+"]."}}var D=function(t,e){this.data=t,this.contentType=e||null};function R(t,e){switch(t){case N.RAW:return new D(O(e));case N.BASE64:case N.BASE64URL:return new D(B(t,e));case N.DATA_URL:return new D((n=new U(e)).base64?B(N.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw P(N.DATA_URL,"Malformed data URL.")}return O(e)}(n.rest),function(t){return new U(t).contentType}(e))}var n;throw x()}function O(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function B(t,e){switch(t){case N.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw P(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case N.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw P(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw P(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var U=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw P(N.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */};var F,j={STATE_CHANGED:"state_changed"},q="running",$="pausing",V="paused",z="success",H="canceling",G="canceled",W="error",K={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Z(t){switch(t){case q:case $:case H:return K.RUNNING;case V:return K.PAUSED;case z:return K.SUCCESS;case G:return K.CANCELED;case W:default:return K.ERROR}}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Q(t){return null!=t}function Y(t){return void 0!==t}function X(t){return"function"==typeof t}function J(t){return"object"==typeof t}function tt(t){return J(t)&&null!==t}function et(t){return"string"==typeof t||t instanceof String}function nt(t){return rt(t)&&Number.isInteger(t)}function rt(t){return"number"==typeof t||t instanceof Number}function it(t){return ot()&&t instanceof Blob}function ot(){return"undefined"!=typeof Blob}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(F||(F={}));
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var at=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=F.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=F.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=F.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw M("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Q(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Q(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw M("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw M("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw M("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Q(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Q(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),st=function(){function t(){}return t.prototype.createXhrIo=function(){return new at},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ut(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ut();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ot())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var lt=function(){function t(t,e){var n=0,r="";it(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(it(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ot()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(ct.apply(null,r))}var i=e.map((function(t){return et(t)?R(N.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),ht=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new r(d,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null;var i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],s=0;s<a.length;s++){var u=a[s],c=u.regex.exec(e);if(c){var l=c[u.indices.bucket],d=c[u.indices.path];d||(d=""),n=new t(l,d),u.postModify(n);break}}if(null==n)throw function(t){return new r(h,"Invalid URL '"+t+"'.")}(e);return n},t}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function dt(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return J(n=e)&&!Array.isArray(n)?e:null}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ft(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function pt(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mt(t){return"https://firebasestorage.googleapis.com/v0"+t}function gt(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vt(t,e){return e}var yt=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||vt},bt=null;function wt(){if(bt)return bt;var t=[];t.push(new yt("bucket")),t.push(new yt("generation")),t.push(new yt("metageneration")),t.push(new yt("name","fullPath",!0));var e=new yt("name");e.xform=function(t,e){return function(t){return!et(t)||t.length<2?t:pt(t)}(e)},t.push(e);var n=new yt("size");return n.xform=function(t,e){return Q(e)?Number(e):e},t.push(n),t.push(new yt("timeCreated")),t.push(new yt("updated")),t.push(new yt("md5Hash",null,!0)),t.push(new yt("cacheControl",null,!0)),t.push(new yt("contentDisposition",null,!0)),t.push(new yt("contentEncoding",null,!0)),t.push(new yt("contentLanguage",null,!0)),t.push(new yt("contentType",null,!0)),t.push(new yt("metadata","customMetadata",!0)),bt=t}function _t(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new ht(n,r);return e.makeStorageReference(i)}})}(r,t),r}function kt(t,e,n){var r=dt(e);return null===r?null:_t(t,r,n)}function Et(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function xt(t){if(!J(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!J(n))throw"Expected object for 'customMetadata' mapping."}else if(tt(n))throw"Mapping for '"+e+"' cannot be an object."}}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function St(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},i=t.bucket();if(null===i)throw new r(f,"No default bucket found. Did you set the 'storageBucket' property when initializing the app?");if(e.prefixes)for(var o=0,a=e.prefixes;o<a.length;o++){var s=a[o].replace(/\/$/,""),u=t.makeStorageReference(new ht(i,s));n.prefixes.push(u)}if(e.items)for(var c=0,l=e.items;c<l.length;c++){var h=l[c];u=t.makeStorageReference(new ht(i,h.name));n.items.push(u)}return n}function Ct(t){if(!J(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!nt(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!et(t.pageToken))throw"Expected pageToken to be string."}}var At=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mt(t){if(!t)throw x()}function Nt(t,e){return function(n,r){var i=kt(t,r,e);return Mt(null!==i),i}}function Lt(t){return function(e,n){var r=function(t,e){var n=dt(e);return null===n?null:St(t,n)}(t,n);return Mt(null!==r),r}}function Dt(t,e){return function(n,r){var i=kt(t,r,e);return Mt(null!==i),function(t,e){var n=dt(e);if(null===n)return null;if(!et(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return mt("/b/"+i(n)+"/o/"+i(r))+gt({alt:"media",token:e})}))[0]}(i,r)}}function Rt(t){return function(e,n){var i,o,c;return 401===e.getStatus()?i=new r(s,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(c=t.bucket,i=new r(a,"Quota for bucket '"+c+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(o=t.path,i=new r(u,"User does not have permission to access '"+o+"'.")):i=n,i.setServerResponseProp(n.serverResponseProp()),i}}function Ot(t){var e=Rt(t);return function(n,i){var a,s=e(n,i);return 404===n.getStatus()&&(a=t.path,s=new r(o,"Object '"+a+"' does not exist.")),s.setServerResponseProp(i.serverResponseProp()),s}}function Bt(t,e,n){var r=mt(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new At(r,"GET",Nt(t,n),i);return o.errorHandler=Ot(e),o}function Ut(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=mt(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime(),u=new At(a,"GET",Lt(t),s);return u.urlParams=o,u.errorHandler=Rt(e),u}function Ft(t,e,n){var r=mt(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new At(r,"GET",Dt(t,n),i);return o.errorHandler=Ot(e),o}function jt(t,e,n,r){var i=mt(e.fullServerUrl()),o=Et(n,r),a=t.maxOperationRetryTime(),s=new At(i,"PATCH",Nt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Ot(e),s}function qt(t,e){var n=mt(e.fullServerUrl()),r=t.maxOperationRetryTime();var i=new At(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Ot(e),i}function $t(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Vt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function zt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Mt(!1)}return Mt(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Ht(t,e,n,i,o,a,s,u){var c=new Vt(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw new r(m,"Server recorded incorrect upload file size, please retry the upload.");var l=c.total-c.current,h=l;o>0&&(h=Math.min(h,o));var d=c.current,f=d+h,p={"X-Goog-Upload-Command":h===l?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},g=i.slice(d,f);if(null===g)throw T();var v=e.maxUploadRetryTime(),y=new At(n,"POST",(function(t,n){var r,o=zt(t,["active","final"]),s=c.current+h,u=i.size();return r="final"===o?Nt(e,a)(t,n):null,new Vt(s,u,"final"===o,r)}),v);return y.headers=p,y.body=g.uploadData(),y.progressCallback=u||null,y.errorHandler=Rt(t),y}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gt=function(t,e,n){if(X(t)||Q(e)||Q(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Wt=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Kt(t,e,n){for(var i=e.length,o=e.length,a=0;a<e.length;a++)if(e[a].optional){i=a;break}var s,u,c,l,h,d;if(!(i<=n.length&&n.length<=o))throw s=i,u=o,c=t,l=n.length,s===u?(h=s,d=1===s?"argument":"arguments"):(h="between "+s+" and "+u,d="arguments"),new r(y,"Invalid argument count in `"+c+"`: Expected "+h+" "+d+", received "+l+".");for(a=0;a<n.length;a++)try{e[a].validator(n[a])}catch(e){throw e instanceof Error?I(a,t,e.message):I(a,t,e)}}var Zt=function(t,e){var n=this;this.validator=function(e){n.optional&&!Y(e)||t(e)},this.optional=!!e};function Qt(t,e){function n(t){if(!et(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new Zt(r,e)}function Yt(){return new Zt((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||ot()&&t instanceof Blob))throw"Expected Blob or File."}))}function Xt(t){return new Zt(xt,t)}function Jt(t){return new Zt(Ct,t)}function te(){return new Zt((function(t){if(!(rt(t)&&t>=0))throw"Expected a number 0 or greater."}))}function ee(t,e){return new Zt((function(e){if(!(null===e||Q(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function ne(t){return new Zt((function(t){if(!(null===t||X(t)))throw"Expected a Function."}),t)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function re(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ie=function(){function t(t,e,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=q,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(l)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(W))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(l)?a.completeTransitions_():(a.error_=t,a.transition_(W))},this.promise_=new Promise((function(t,e){a.resolve_=t,a.reject_=e,a.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===q&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case q:t(n);break;case H:e.transition_(G);break;case $:e.transition_(V)}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=$t(e,r,i),s={name:a.fullPath},u=mt(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Et(a,n),h=t.maxUploadRetryTime(),d=new At(u,"POST",(function(t){var e;zt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Mt(!1)}return Mt(et(e)),e}),h);return d.urlParams=s,d.headers=c,d.body=l,d.errorHandler=Rt(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new At(n,"POST",(function(t){var e=zt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Mt(!1)}n||Mt(!1);var i=Number(n);return Mt(!isNaN(i)),new Vt(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Rt(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new Vt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=Ht(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(W)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(z)):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=Bt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(z)}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=$t(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Et(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=lt.getBlob(c,r,l);if(null===h)throw T();var d={name:u.fullPath},f=mt(o),p=t.maxUploadRetryTime(),m=new At(f,"POST",Nt(t,n),p);return m.urlParams=d,m.headers=a,m.body=h.uploadData(),m.errorHandler=Rt(e),m}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(z)}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case H:case $:this.state_=t,null!==this.request_&&this.request_.cancel();break;case q:var e=this.state_===V;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case V:this.state_=t,this.notifyObservers_();break;case G:this.error_=S(),this.state_=t,this.notifyObservers_();break;case W:case z:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case $:this.transition_(V);break;case H:this.transition_(G);break;case q:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Z(this.state_);return new Wt(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==j.STATE_CHANGED)throw"Expected one of the event types: ["+j.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=ne(!0).validator,s=ee(null,!0).validator;function u(t){try{return void a(t)}catch(t){}try{if(s(t),!(Y(t.next)||Y(t.error)||Y(t.complete)))throw"";return}catch(t){throw o}}var c=[Qt(i),ee(u,!0),ne(!0),ne(!0)];Kt("on",c,arguments);var l=this;function h(t){return function(e,n,i){null!==t&&Kt("on",t,arguments);var o=new Gt(e,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function d(t){if(null===t)throw o;u(t)}var f=[ee(d),ne(!0),ne(!0)],p=!(Y(e)||Y(n)||Y(r));return p?h(f):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Z(this.state_)){case K.SUCCESS:re(this.resolve_.bind(null,this.snapshot))();break;case K.CANCELED:case K.ERROR:re(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Z(this.state_)){case K.RUNNING:case K.PAUSED:t.next&&re(t.next.bind(t,this.snapshot))();break;case K.SUCCESS:t.complete&&re(t.complete.bind(t))();break;case K.CANCELED:case K.ERROR:t.error&&re(t.error.bind(t,this.error_))();break;default:t.error&&re(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){Kt("resume",[],arguments);var t=this.state_===V||this.state_===$;return t&&this.transition_(q),t},t.prototype.pause=function(){Kt("pause",[],arguments);var t=this.state_===q;return t&&this.transition_($),t},t.prototype.cancel=function(){Kt("cancel",[],arguments);var t=this.state_===q||this.state_===$;return t&&this.transition_(H),t},t}(),oe=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof ht?e:ht.makeFromUrl(e)}return t.prototype.toString=function(){return Kt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return wt()},t.prototype.child=function(t){Kt("child",[Qt()],arguments);var e=ft(this.location.path,t),n=new ht(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new ht(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new ht(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return pt(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),Kt("put",[Yt(),Xt(!0)],arguments),this.throwIfRoot_("put"),new ie(this,this.authWrapper,this.location,this.mappings(),new lt(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=N.RAW),Kt("putString",[Qt(),Qt(L,!0),Xt(!0)],arguments),this.throwIfRoot_("putString");var r=R(e,t),i=Object.assign({},n);return!Q(i.contentType)&&Q(r.contentType)&&(i.contentType=r.contentType),new ie(this,this.authWrapper,this.location,this.mappings(),new lt(r.data,!0),i)},t.prototype.delete=function(){var t=this;return Kt("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=qt(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){Kt("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Tt.__awaiter(this,void 0,void 0,(function(){var n,r,i,o;return Tt.__generator(this,(function(a){switch(a.label){case 0:return n={pageToken:e},[4,this.list(n)];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){Kt("list",[Jt(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=Ut(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return Kt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=Bt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return Kt("updateMetadata",[Xt()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=jt(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return Kt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=Ft(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw C();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new r(w,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),ae=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),se=function(){function t(){this.map=new Map,this.id=-9007199254740991}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},t.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},t}(),ue=function(){function t(e,n,r,i,o,a){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var s=this.app_.options;Q(s)&&(this.bucket_=t.extractBucket_(s))}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=a,this.service_=o,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new se}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:ht.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw A();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new ae(A());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ce=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var i,o=t.resolve_,a=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var u=t.callback_(s,s.getResponseText());Y(u)?o(u):o()}catch(t){a(t)}else null!==s?((i=x()).setServerResponseProp(s.getResponseText()),t.errorCallback_?a(t.errorCallback_(s,i)):a(i)):n.canceled?a(i=t.appDelete_?A():S()):a(i=new r(c,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new le(!1,null,!0)):this.backoffId_=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,s())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Tt.__spreadArrays([null,t],e));else{var i,h=s()||o;if(h)c.call.apply(c,Tt.__spreadArrays([null,t],e));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i)}}var d=!1;function f(t){d||(d=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout((function(){o=!0,f(!0)}),n),f}((function(e,n){if(n)e(!1,new le(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===F.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new le(a,n))}else{var s=n.getErrorCode()===F.ABORT;e(!1,new le(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),le=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function he(t,e,r){var i=gt(t.urlParams),o=t.url+i,a=Object.assign({},t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,e),function(t){var e=void 0!==n?n.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(a),new ce(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var de=function(){function t(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new ue(t,e,(function(t,e){return new oe(t,e)}),he,this,n),this.app_=t,null!=r)this.bucket_=ht.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new ht(i,""))}this.internals_=new fe(this)}return t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(Kt("ref",[Qt(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new oe(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{ht.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}}return Kt("refFromURL",[Qt(e,!1)],arguments),new oe(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){Kt("setMaxUploadRetryTime",[te()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){Kt("setMaxOperationRetryTime",[te()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),fe=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}();function pe(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new de(n,r,new st,e)}function me(t){var e={TaskState:K,TaskEvent:j,StringFormat:N,Storage:de,Reference:oe};t.INTERNAL.registerComponent(new It.Component("storage",pe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.3.25")}me(n),e.registerStorage=me}));xt(zt);zt.registerStorage;Lt.initializeApp({apiKey:"AIzaSyD_45MNWrQTmuTRihzYixmEdng5aEqPZog",authDomain:"avtokartaclub.firebaseapp.com",databaseURL:"https://avtokartaclub.firebaseio.com",projectId:"avtokartaclub",storageBucket:"avtokartaclub.appspot.com",messagingSenderId:"945284768758",appId:"1:945284768758:web:6476f85af52e50c08cddd7"});Lt.auth(),new Lt.auth.GoogleAuthProvider;const Ht=Lt.firestore(),Gt=Lt.storage();function Wt(t){let e;const n=t[6].default,r=l(n,t,t[5],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&32&e&&r.p(h(n,t,t[5],null),d(n,t[5],e,null))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Kt(t){let e,n,r=t[0]&&Wt(t);return{c(){r&&r.c(),e=T()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),lt(r,1)):(r=Wt(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function Zt(t,e,n){let{firebase:r}=e,{perf:i=!1}=e,{analytics:o=!1}=e,a=!1;const s=G();var u,c;r=r||window.firebase,u="firebase",c=r,V().$$.context.set(u,c),z(()=>{if(!r)throw Error("No firebase app was provided. You must provide an initialized Firebase app or make it available globally.");i&&r.performance(),o&&r.analytics(),s("initializeApp",{firebase:r}),n(0,a=!0)});let{$$slots:l={},$$scope:h}=e;return t.$set=t=>{"firebase"in t&&n(1,r=t.firebase),"perf"in t&&n(2,i=t.perf),"analytics"in t&&n(3,o=t.analytics),"$$scope"in t&&n(5,h=t.$$scope)},[a,r,i,o,s,h,l]}class Qt extends wt{constructor(t){super(),bt(this,t,Zt,Kt,s,{firebase:1,perf:2,analytics:3})}}const Yt=[];function Xt(t,e){return{subscribe:Jt(t,e).subscribe}}function Jt(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!Yt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),Yt.push(n,e)}if(t){for(let t=0;t<Yt.length;t+=2)Yt[t][0](Yt[t+1]);Yt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const u=[a,s];return i.push(u),1===i.length&&(r=n(o)||t),a(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}function te(e,n,r){const i=!Array.isArray(e),s=i?[e]:e,c=n.length<2;return Xt(r,e=>{let r=!1;const l=[];let h=0,d=t;const f=()=>{if(h)return;d();const r=n(i?l[0]:l,e);c?e(r):d=a(r)?r:t},p=s.map((t,e)=>u(t,t=>{l[e]=t,h&=~(1<<e),r&&f()},()=>{h|=1<<e}));return r=!0,f(),function(){o(p),d()}})}function ee(){return t="firebase",V().$$.context.get(t);var t}function ne(t){const e=ee();if(!e)throw new Error("Missing Firebase app in context. Are you inside a 'FirebaseApp' component?");if(t){const n=e[t];if(n&&n())return n();throw new Error(`Firebase ${t} not found. You may be missing "import 'firebase/${t}'" `)}return e}const re=t=>({user:1&t}),ie=t=>({user:t[0],auth:t[1].auth}),oe=t=>({user:1&t}),ae=t=>({user:t[0],auth:t[1].auth}),se=t=>({user:1&t}),ue=t=>({user:t[0],auth:t[1].auth}),ce=t=>({user:1&t}),le=t=>({user:t[0],auth:t[1].auth});function he(t){let e;const n=t[6]["signed-out"],r=l(n,t,t[5],ae);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&33&e&&r.p(h(n,t,t[5],ae),d(n,t[5],e,oe))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function de(t){let e;const n=t[6].default,r=l(n,t,t[5],ue);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&33&e&&r.p(h(n,t,t[5],ue),d(n,t[5],e,se))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function fe(t){let e,n,r,i,o;const a=t[6].before,s=l(a,t,t[5],le),u=[de,he],c=[];function f(t,e){return t[0]?0:1}n=f(t),r=c[n]=u[n](t);const p=t[6].after,m=l(p,t,t[5],ie);return{c(){s&&s.c(),e=S(),r.c(),i=S(),m&&m.c()},m(t,r){s&&s.m(t,r),w(t,e,r),c[n].m(t,r),w(t,i,r),m&&m.m(t,r),o=!0},p(t,[e]){s&&s.p&&33&e&&s.p(h(a,t,t[5],le),d(a,t[5],e,ce));let o=n;n=f(t),n===o?c[n].p(t,e):(ut(),ht(c[o],1,1,()=>{c[o]=null}),ct(),r=c[n],r||(r=c[n]=u[n](t),r.c()),lt(r,1),r.m(i.parentNode,i)),m&&m.p&&33&e&&m.p(h(p,t,t[5],ie),d(p,t[5],e,re))},i(t){o||(lt(s,t),lt(r),lt(m,t),o=!0)},o(t){ht(s,t),ht(r),ht(m,t),o=!1},d(t){s&&s.d(t),t&&_(e),c[n].d(t),t&&_(i),m&&m.d(t)}}}function pe(t,e,n){let r,{persist:i=null}=e,o=function(t={persist:null}){const e=ne("auth");let n=null;const{persist:r}=t;r&&(n=JSON.parse(t.persist.getItem("sveltefire_user")));const i=Jt(n,()=>{const n=e.onAuthStateChanged(e=>{a(e),r&&t.persist.setItem("sveltefire_user",JSON.stringify(e))});return()=>n}),{subscribe:o,set:a}=i;return{subscribe:o,auth:e}}({persist:i});c(t,o,t=>n(0,r=t));const a=G();let s;z(()=>{s=o.subscribe(t=>{a("user",{user:t})})}),H(()=>s());let{$$slots:u={},$$scope:l}=e;return t.$set=t=>{"persist"in t&&n(2,i=t.persist),"$$scope"in t&&n(5,l=t.$$scope)},[r,o,i,s,a,l,u]}class me extends wt{constructor(t){super(),bt(this,t,pe,fe,s,{persist:2})}}function ge(t){const e=ne("performance").trace(t);return e.start(),e}async function ve(t){return 2===t.state&&t.stop(),null}function ye(t,e){const n=ne("firestore"),{startWith:r,log:i,traceId:o,maxWait:a,once:s}={maxWait:1e4,...e},u="string"==typeof t?n.doc(t):t,c=o&&ge(o);let l,h,d=void 0!==typeof r,f=!0,p=null;const m=(t,e)=>{d=!1,f=!1,h&&clearTimeout(h),p=e||null,y(t),c&&ve(c)},g=Jt(r,()=>(h=a&&setTimeout(()=>d&&m(null,new Error(`Timeout at ${a}. Using fallback slot.`)),a),l=u.onSnapshot(t=>{const e=t.data()||f&&r||null;i&&(console.groupCollapsed(`Doc ${t.id}`),console.log(`Path: ${u.path}`),console.log("Snapshot:",t),console.groupEnd()),m(e),s&&l()},t=>{console.error(t),m(null,t)}),()=>l())),{subscribe:v,set:y}=g;return{subscribe:v,firestore:n,ref:u,get loading(){return d},get error(){return p}}}function be(t,e,n){const r=ne("firestore"),{startWith:i,log:o,traceId:a,maxWait:s,once:u,idField:c,refField:l}={idField:"id",refField:"ref",maxWait:1e4,...n},h="string"==typeof t?r.collection(t):t,d=e&&e(h),f=a&&ge(a);let p,m,g=void 0!==typeof i,v=null,y={};const b=(t,e)=>{g=!1,m&&clearTimeout(m),v=e||null,y=(t=>t&&t.length?{first:t[0],last:t[t.length-1]}:{})(t),k(t),f&&ve(f)},w=Jt(i,()=>(m=s&&setTimeout(()=>g&&b(null,new Error(`Timeout at ${s}. Using fallback slot.`)),s),p=(d||h).onSnapshot(t=>{const e=t.docs.map(t=>({...t.data(),...c?{[c]:t.id}:null,...l?{[l]:t.ref}:null}));if(o){const n=g?"New Query":"Updated Query";console.groupCollapsed(`${n} ${h.id} | ${e.length} hits`),console.log(`${h.path}`),console.log("Snapshot: ",t),console.groupEnd()}b(e),u&&p()},t=>{console.error(t),b(null,t)}),()=>p())),{subscribe:_,set:k}=w;return{subscribe:_,firestore:r,ref:h,get loading(){return g},get error(){return v},get meta(){return y}}}const we=t=>({data:2&t,ref:1&t,error:1&t}),_e=t=>({data:t[1],ref:t[0].ref,error:t[0].error}),ke=t=>({data:2&t,ref:1&t,error:1&t}),Ee=t=>({data:t[1],ref:t[0].ref,error:t[0].error}),xe=t=>({data:2&t,ref:1&t,error:1&t}),Se=t=>({data:t[1],ref:t[0].ref,error:t[0].error}),Te=t=>({data:2&t,ref:1&t,error:1&t}),Ce=t=>({data:t[1],ref:t[0].ref,error:t[0].error}),Ie=t=>({data:2&t,ref:1&t,error:1&t}),Ae=t=>({data:t[1],ref:t[0].ref,error:t[0].error});function Pe(t){let e;const n=t[12].fallback,r=l(n,t,t[11],Ee);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&2051&e&&r.p(h(n,t,t[11],Ee),d(n,t[11],e,ke))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Me(t){let e;const n=t[12].loading,r=l(n,t,t[11],Se);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&2051&e&&r.p(h(n,t,t[11],Se),d(n,t[11],e,xe))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Ne(t){let e;const n=t[12].default,r=l(n,t,t[11],Ce);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&2051&e&&r.p(h(n,t,t[11],Ce),d(n,t[11],e,Te))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Le(t){let e,n,r,i,o;const a=t[12].before,s=l(a,t,t[11],Ae),u=[Ne,Me,Pe],c=[];function f(t,e){return t[1]?0:t[0].loading?1:2}n=f(t),r=c[n]=u[n](t);const p=t[12].after,m=l(p,t,t[11],_e);return{c(){s&&s.c(),e=S(),r.c(),i=S(),m&&m.c()},m(t,r){s&&s.m(t,r),w(t,e,r),c[n].m(t,r),w(t,i,r),m&&m.m(t,r),o=!0},p(t,[e]){s&&s.p&&2051&e&&s.p(h(a,t,t[11],Ae),d(a,t[11],e,Ie));let o=n;n=f(t),n===o?c[n].p(t,e):(ut(),ht(c[o],1,1,()=>{c[o]=null}),ct(),r=c[n],r||(r=c[n]=u[n](t),r.c()),lt(r,1),r.m(i.parentNode,i)),m&&m.p&&2051&e&&m.p(h(p,t,t[11],_e),d(p,t[11],e,we))},i(t){o||(lt(s,t),lt(r),lt(m,t),o=!0)},o(t){ht(s,t),ht(r),ht(m,t),o=!1},d(t){s&&s.d(t),t&&_(e),c[n].d(t),t&&_(i),m&&m.d(t)}}}function De(e,n,r){let i,o=t,a=()=>(o(),o=u(m,t=>r(1,i=t)),m);e.$$.on_destroy.push(()=>o());let{path:s}=n,{log:c=!1}=n,{traceId:l=""}=n,{startWith:h}=n,{maxWait:d=1e4}=n,{once:f=!1}=n;const p={startWith:h,traceId:l,log:c,maxWait:d,once:f};let m=ye(s,p);a();const g=G();let v;z(()=>g("ref",{ref:m.ref})),H(()=>v());let{$$slots:y={},$$scope:b}=n;return e.$set=t=>{"path"in t&&r(2,s=t.path),"log"in t&&r(3,c=t.log),"traceId"in t&&r(4,l=t.traceId),"startWith"in t&&r(5,h=t.startWith),"maxWait"in t&&r(6,d=t.maxWait),"once"in t&&r(7,f=t.once),"$$scope"in t&&r(11,b=t.$$scope)},e.$$.update=()=>{261&e.$$.dirty&&(v&&(v(),a(r(0,m=ye(s,p))),g("ref",{ref:m.ref})),r(8,v=m.subscribe(t=>{g("data",{data:t})})))},[m,i,s,c,l,h,d,f,v,p,g,b,y]}class Re extends wt{constructor(t){super(),bt(this,t,De,Le,s,{path:2,log:3,traceId:4,startWith:5,maxWait:6,once:7})}}const Oe=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),Be=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last}),Ue=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),Fe=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last}),je=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),qe=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last}),$e=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),Ve=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last}),ze=t=>({data:2&t,ref:1&t,error:1&t,first:1&t,last:1&t}),He=t=>({data:t[1],ref:t[0].ref,error:t[0].error,first:t[0].meta.first,last:t[0].meta.last});function Ge(t){let e;const n=t[13].fallback,r=l(n,t,t[12],Fe);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&4099&e&&r.p(h(n,t,t[12],Fe),d(n,t[12],e,Ue))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function We(t){let e;const n=t[13].loading,r=l(n,t,t[12],qe);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&4099&e&&r.p(h(n,t,t[12],qe),d(n,t[12],e,je))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Ke(t){let e;const n=t[13].default,r=l(n,t,t[12],Ve);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&4099&e&&r.p(h(n,t,t[12],Ve),d(n,t[12],e,$e))},i(t){e||(lt(r,t),e=!0)},o(t){ht(r,t),e=!1},d(t){r&&r.d(t)}}}function Ze(t){let e,n,r,i,o;const a=t[13].before,s=l(a,t,t[12],He),u=[Ke,We,Ge],c=[];function f(t,e){return t[1]?0:t[0].loading?1:2}n=f(t),r=c[n]=u[n](t);const p=t[13].after,m=l(p,t,t[12],Be);return{c(){s&&s.c(),e=S(),r.c(),i=S(),m&&m.c()},m(t,r){s&&s.m(t,r),w(t,e,r),c[n].m(t,r),w(t,i,r),m&&m.m(t,r),o=!0},p(t,[e]){s&&s.p&&4099&e&&s.p(h(a,t,t[12],He),d(a,t[12],e,ze));let o=n;n=f(t),n===o?c[n].p(t,e):(ut(),ht(c[o],1,1,()=>{c[o]=null}),ct(),r=c[n],r||(r=c[n]=u[n](t),r.c()),lt(r,1),r.m(i.parentNode,i)),m&&m.p&&4099&e&&m.p(h(p,t,t[12],Be),d(p,t[12],e,Oe))},i(t){o||(lt(s,t),lt(r),lt(m,t),o=!0)},o(t){ht(s,t),ht(r),ht(m,t),o=!1},d(t){s&&s.d(t),t&&_(e),c[n].d(t),t&&_(i),m&&m.d(t)}}}function Qe(e,n,r){let i,o=t,a=()=>(o(),o=u(g,t=>r(1,i=t)),g);e.$$.on_destroy.push(()=>o());let{path:s}=n,{query:c=null}=n,{traceId:l=""}=n,{log:h=!1}=n,{startWith:d}=n,{maxWait:f=1e4}=n,{once:p=!1}=n;const m={startWith:d,traceId:l,log:h,maxWait:f,once:p};let g=be(s,c,m);a();const v=G();let y;z(()=>v("ref",{ref:g.ref})),H(()=>y());let{$$slots:b={},$$scope:w}=n;return e.$set=t=>{"path"in t&&r(2,s=t.path),"query"in t&&r(3,c=t.query),"traceId"in t&&r(4,l=t.traceId),"log"in t&&r(5,h=t.log),"startWith"in t&&r(6,d=t.startWith),"maxWait"in t&&r(7,f=t.maxWait),"once"in t&&r(8,p=t.once),"$$scope"in t&&r(12,w=t.$$scope)},e.$$.update=()=>{525&e.$$.dirty&&(y&&(y(),a(r(0,g=be(s,c,m))),v("ref",{ref:g.ref})),r(9,y=g.subscribe(t=>{v("data",{data:t})})))},[g,i,s,c,l,h,d,f,p,y,m,v,w,b]}class Ye extends wt{constructor(t){super(),bt(this,t,Qe,Ze,s,{path:2,query:3,traceId:4,log:5,startWith:6,maxWait:7,once:8})}}function Xe(t){let e,n;var r=t[0];function i(t){return{props:{params:t[1]}}}if(r)var o=new r(i(t));return{c(){o&&mt(o.$$.fragment),e=T()},m(t,r){o&&gt(o,t,r),w(t,e,r),n=!0},p(t,[n]){const a={};if(2&n&&(a.params=t[1]),r!==(r=t[0])){if(o){ut();const t=o;ht(t.$$.fragment,1,0,()=>{vt(t,1)}),ct()}r?(mt((o=new r(i(t))).$$.fragment),lt(o.$$.fragment,1),gt(o,e.parentNode,e)):o=null}else r&&o.$set(a)},i(t){n||(o&&lt(o.$$.fragment,t),n=!0)},o(t){o&&ht(o.$$.fragment,t),n=!1},d(t){t&&_(e),o&&vt(o,t)}}}function Je(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const tn=Xt(Je(),(function(t){const e=()=>{t(Je())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));te(tn,t=>t.location),te(tn,t=>t.querystring);function en(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t},0)}function nn(e,n,r){let i,o=t;c(e,tn,t=>r(4,i=t)),e.$$.on_destroy.push(()=>o());let{routes:a={}}=n,{prefix:s=""}=n;class u{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:r}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,o,a=[],s="",u=t.split("/");for(u[0]||u.shift();i=u.shift();)"*"===(n=i[0])?(a.push("wild"),s+="/(.*)"):":"===n?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),s+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(s+=(~r?"?":"")+"\\"+i.substring(o))):s+="/"+i;return{keys:a,pattern:new RegExp("^"+s+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=r}match(t){s&&t.startsWith(s)&&(t=t.substr(s.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let r=0;for(;r<this._keys.length;)n[this._keys[r]]=e[++r]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const l=a instanceof Map?a:Object.entries(a),h=[];for(const[t,e]of l)h.push(new u(t,e));let d=null,f={};const p=G(),m=(t,e)=>{setTimeout(()=>{p(t,e)},0)};return e.$set=t=>{"routes"in t&&r(2,a=t.routes),"prefix"in t&&r(3,s=t.prefix)},e.$$.update=()=>{if(17&e.$$.dirty){r(0,d=null);let t=0;for(;!d&&t<h.length;){const e=h[t].match(i.location);if(e){const n={component:h[t].component,name:h[t].component.name,location:i.location,querystring:i.querystring,userData:h[t].userData};if(!h[t].checkConditions(n)){m("conditionsFailed",n);break}r(0,d=h[t].component),r(1,f=e),m("routeLoaded",n)}t++}}},[d,f,a,s]}class rn extends wt{constructor(t){super(),bt(this,t,nn,Xe,s,{routes:2,prefix:3})}}function on(t){const e=t-1;return e*e*e+1}function an(t){return-.5*(Math.cos(Math.PI*t)-1)}function sn(t,{delay:n=0,duration:r=400,easing:i=e}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>`opacity: ${t*o}`}}function un(t,{delay:e=0,duration:n=400,easing:r=on,x:i=0,y:o=0,opacity:a=0}){const s=getComputedStyle(t),u=+s.opacity,c="none"===s.transform?"":s.transform,l=u*(1-a);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${u-l*e}`}}function cn(t,{delay:e=0,duration:n=400,easing:r=on}){const i=getComputedStyle(t),o=+i.opacity,a=parseFloat(i.height),s=parseFloat(i.paddingTop),u=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),l=parseFloat(i.marginBottom),h=parseFloat(i.borderTopWidth),d=parseFloat(i.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>"overflow: hidden;"+`opacity: ${Math.min(20*t,1)*o};`+`height: ${t*a}px;`+`padding-top: ${t*s}px;`+`padding-bottom: ${t*u}px;`+`margin-top: ${t*c}px;`+`margin-bottom: ${t*l}px;`+`border-top-width: ${t*h}px;`+`border-bottom-width: ${t*d}px;`}}function ln(t,{delay:e=0,duration:n=400,easing:r=on,start:i=0,opacity:o=0}){const a=getComputedStyle(t),s=+a.opacity,u="none"===a.transform?"":a.transform,c=1-i,l=s*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${u} scale(${1-c*e});\n\t\t\topacity: ${s-l*e}\n\t\t`}}function hn(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/close.svg")&&I(n,"src","./icons/close.svg"),I(n,"alt","menu"),I(n,"class","mt-1 mr-1 w-10 h-10 cursor-pointer")},m(t,r){w(t,n,r),i=C(n,"click",e[15])},p:t,d(t){t&&_(n),i()}}}function dn(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/menu.svg")&&I(n,"src","./icons/menu.svg"),I(n,"alt","menu"),I(n,"class","mt-1 mr-1 w-10 h-10 cursor-pointer")},m(t,r){w(t,n,r),i=C(n,"click",e[14])},p:t,d(t){t&&_(n),i()}}}function fn(t){let e,n,r,i,o,a,s,u,c,l,h;const d=new Qt({props:{firebase:Lt,$$slots:{default:[_n]},$$scope:{ctx:t}}});return{c(){e=E("div"),n=E("div"),mt(d.$$.fragment),r=S(),i=E("br"),o=S(),a=E("hr"),s=S(),u=E("ul"),u.innerHTML='<li class="svelte-11l0w09"><a href="#/help">?</a></li> \n            <li class="svelte-11l0w09"><a href="/">Карта</a></li> \n            <li class="svelte-11l0w09"><a href="#/profile">Профиль</a></li> \n            <li class="svelte-11l0w09"><a href="#/about">Информация</a></li> \n            <li class="svelte-11l0w09"><a href="#/addservice">Добавить сервис</a></li> \n            <li class="svelte-11l0w09"><a href="#/cryptowallet">Крипто-кошелёк</a></li> \n            <li class="svelte-11l0w09"><a href="#/partners">Партнерам</a></li> \n            <li class="svelte-11l0w09"><a href="#/ico">ICO</a></li>',I(n,"class","user-auth"),I(u,"class","menu-list mt-4 svelte-11l0w09"),I(e,"class","menu-container svelte-11l0w09")},m(c,f){w(c,e,f),b(e,n),gt(d,n,null),b(e,r),b(e,i),b(e,o),b(e,a),b(e,s),b(e,u),l=!0,h=C(u,"click",t[19])},p(t,e){const n={};8388622&e&&(n.$$scope={dirty:e,ctx:t}),d.$set(n)},i(t){l||(lt(d.$$.fragment,t),J(()=>{c||(c=pt(e,sn,{duration:400},!0)),c.run(1)}),l=!0)},o(t){ht(d.$$.fragment,t),c||(c=pt(e,sn,{duration:400},!1)),c.run(0),l=!1},d(t){t&&_(e),vt(d),t&&c&&c.end(),h()}}}function pn(t){let e,n=t[20].displayName+"";return{c(){e=x(n)},m(t,n){w(t,e,n)},p(t,r){1048576&r&&n!==(n=t[20].displayName+"")&&P(e,n)},d(t){t&&_(e)}}}function mn(t){let e;return{c(){e=E("div"),e.innerHTML="<p>загрузка...</p>",I(e,"slot","loading")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function gn(t){let e,n,r,i,o=t[22].balance+"";return{c(){e=E("div"),n=E("span"),r=x("Баланс: "),i=x(o),I(n,"class"," text-logo-orange")},m(t,o){w(t,e,o),b(e,n),b(n,r),b(n,i)},p(t,e){4194304&e&&o!==(o=t[22].balance+"")&&P(i,o)},d(t){t&&_(e)}}}function vn(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v;return{c(){e=E("div"),n=E("div"),r=E("p"),r.textContent="Завершите регистрацию:",i=S(),a=E("p"),a.textContent="Придумайте имя пользователя на латинице и введите промокод.",s=S(),u=E("input"),c=S(),l=E("input"),h=S(),d=E("span"),f=x(t[3]),p=S(),m=E("p"),g=E("button"),g.textContent="Завершить",I(r,"class","my-2 font-semibold text-red-600 text-lg"),I(a,"class"," text-sm"),I(u,"class","menu-input mt-2"),I(u,"type","text"),I(u,"placeholder","Имя пользователя"),I(l,"class","menu-input"),I(l,"type","text"),I(l,"placeholder","Промокод"),I(d,"class"," text-sm block"),I(g,"class","p-1 my-2 bg-teal-500 text-white rounded"),I(n,"class","mt-2 p-1 bg-gray-100 text-teal-900"),I(e,"slot","fallback")},m(o,y){w(o,e,y),b(e,n),b(n,r),b(n,i),b(n,a),b(n,s),b(n,u),M(u,t[1]),b(n,c),b(n,l),M(l,t[2]),b(n,h),b(n,d),b(d,f),b(n,p),b(n,m),b(m,g),v=[C(u,"input",t[16]),C(u,"input",t[4]),C(l,"input",t[17]),C(l,"input",t[5]),C(g,"click",t[6])]},p(t,e){2&e&&u.value!==t[1]&&M(u,t[1]),4&e&&l.value!==t[2]&&M(l,t[2]),8&e&&P(f,t[3])},d(t){t&&_(e),o(v)}}}function yn(t){let e,n,r=null!=t[22]&&gn(t);return{c(){e=S(),r&&r.c(),n=S()},m(t,i){w(t,e,i),r&&r.m(t,i),w(t,n,i)},p(t,e){null!=t[22]?r?r.p(t,e):(r=gn(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(t){t&&_(e),r&&r.d(t),t&&_(n)}}}function bn(t){let e;return{c(){e=E("div"),e.innerHTML='<div><span class=" text-orange-500">\n                                Для правильной работы приложения, необходимо авторизоваться.\n                            </span></div>',I(e,"slot","signed-out")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function wn(t){let e,n,r,i,o,a,s,u,c,l,h=null!=t[20].displayName&&pn(t);const d=new Re({props:{path:`users/${t[20].uid}`,$$slots:{default:[yn,({data:t})=>({22:t}),({data:t})=>t?4194304:0],fallback:[vn,({data:t})=>({22:t}),({data:t})=>t?4194304:0],loading:[mn,({data:t})=>({22:t}),({data:t})=>t?4194304:0]},$$scope:{ctx:t}}});function f(...e){return t[18](t[21],...e)}return{c(){e=E("div"),n=E("span"),h&&h.c(),r=S(),i=E("div"),mt(d.$$.fragment),o=S(),a=E("div"),s=E("button"),s.textContent="Выйти",u=S(),I(n,"class"," text-logo-green"),I(e,"class","user-info"),I(i,"class","account-info"),I(s,"class","p-1 px-3 mt-4 bg-gray-800 text-gray-200 rounded")},m(t,p){w(t,e,p),b(e,n),h&&h.m(n,null),w(t,r,p),w(t,i,p),gt(d,i,null),w(t,o,p),w(t,a,p),b(a,s),w(t,u,p),c=!0,l=C(s,"click",f)},p(e,r){null!=(t=e)[20].displayName?h?h.p(t,r):(h=pn(t),h.c(),h.m(n,null)):h&&(h.d(1),h=null);const i={};1048576&r&&(i.path=`users/${t[20].uid}`),12582926&r&&(i.$$scope={dirty:r,ctx:t}),d.$set(i)},i(t){c||(lt(d.$$.fragment,t),c=!0)},o(t){ht(d.$$.fragment,t),c=!1},d(t){t&&_(e),h&&h.d(),t&&_(r),t&&_(i),vt(d),t&&_(o),t&&_(a),t&&_(u),l()}}}function _n(t){let e;const n=new me({props:{$$slots:{default:[wn,({user:t,auth:e})=>({20:t,21:e}),({user:t,auth:e})=>(t?1048576:0)|(e?2097152:0)],"signed-out":[bn,({user:t,auth:e})=>({20:t,21:e}),({user:t,auth:e})=>(t?1048576:0)|(e?2097152:0)]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};9437198&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function kn(t){let e,n,r,i,o,a;function s(t,e){return t[0]?hn:dn}let u=s(t),c=u(t),l=t[0]&&fn(t);return{c(){e=E("div"),n=E("div"),n.innerHTML='<div class="mt-2 -ml-6"><img class="w-12 h-12" src="./icons/main-logo.png" alt="logo"></div> \n        <div class="ml-2 mt-1"><span class=" text-logo-red text-xl font-semibold">Avto</span><span class=" text-logo-green text-xl font-semibold">karta</span><span class=" text-logo-orange text-xl font-semibold">.club</span></div>',r=S(),i=E("div"),c.c(),o=S(),l&&l.c(),I(n,"class","justify-center flex flex-row items-center"),I(i,"class","header-menu absolute top-0 right-0 p-2 text-center"),I(e,"class","header fixed z-10 h-16 top-0 w-full bg-gray-900")},m(t,s){w(t,e,s),b(e,n),b(e,r),b(e,i),c.m(i,null),b(e,o),l&&l.m(e,null),a=!0},p(t,[n]){u===(u=s(t))&&c?c.p(t,n):(c.d(1),c=u(t),c&&(c.c(),c.m(i,null))),t[0]?l?(l.p(t,n),lt(l,1)):(l=fn(t),l.c(),lt(l,1),l.m(e,null)):l&&(ut(),ht(l,1,1,()=>{l=null}),ct())},i(t){a||(lt(l),a=!0)},o(t){ht(l),a=!1},d(t){t&&_(e),c.d(),l&&l.d()}}}function En(t,e,n){let r,i,o=!1,a="",s="",u=!1,c="Имя пользователя не менее 6 символов.";Lt.auth().onAuthStateChanged((function(t){t?i=t:console.log("no user login")}));let l=Lt.functions().httpsCallable("addNewUser");function h(){l({referrer:r,username:a}).then((function(t){console.log("registration",t)})).catch((function(t){console.log(t.code,t.message,t.details)}))}return[o,a,s,c,function(){a.length>=6?(n(3,c="Имя пользователя свободно."),Ht.collection("users").where("username","==",a).get().then((function(t){t.forEach((function(t){n(3,c="Это имя занято, придумайте другое.")}))})).catch((function(t){console.log("Error getting documents: ",t)}))):n(3,c="Имя пользователя не менее 6 символов.")},function(){s.length>=6?(u=!1,Ht.collection("users").where("username","==",s).get().then((function(t){t.forEach((function(t){r=t.id,u=!0}))})).catch((function(t){console.log("Error getting documents: ",t)}))):u=!1},function(){a.length&&s.length>=6?u?(h(),alert("Регистрация занимает несколько минут. Пока идёт регистрация, ознакомьтесь с полезной информацией."),en("/about"),n(0,o=!1)):alert("Неверный промокод!"):alert("Придумайте имя пользователя и введите промокод.")},r,u,i,void 0,void 0,l,h,()=>n(0,o=!0),()=>n(0,o=!1),function(){a=this.value,n(1,a)},function(){s=this.value,n(2,s)},t=>t.signOut(),()=>n(0,o=!1)]}class xn extends wt{constructor(t){super(),bt(this,t,En,kn,s,{})}}var Sn,Tn,Cn,In=St((function(t,e){
/* @preserve
     * Leaflet 1.6.0, a JS library for interactive maps. http://leafletjs.com
     * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
     */
!function(t){var e=Object.freeze;function n(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}}function u(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function c(){return!1}function l(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function f(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?r(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var _=0;function k(t){var e=+new Date,n=Math.max(0,16-(e-_));return _=e+n,window.setTimeout(t,n)}var E=window.requestAnimationFrame||w("RequestAnimationFrame")||k,x=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function S(t,e,n){if(!n||E!==k)return E.call(window,i(t,e));t.call(e)}function T(t){t&&x.call(window,t)}var C=(Object.freeze||Object)({freeze:e,extend:n,create:r,bind:i,lastId:o,stamp:a,throttle:s,wrapNum:u,falseFn:c,formatNum:l,trim:h,splitWords:d,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:b,requestFn:E,cancelFn:x,requestAnimFrame:S,cancelAnimFrame:T});function I(){}I.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);for(var a in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(r(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},I.include=function(t){return n(this.prototype,t),this},I.mergeOptions=function(t){return n(this.prototype.options,t),this},I.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=d(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=d(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=c,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=c;delete this._events[t]}},fire:function(t,e,r){if(!this.listens(t,r))return this;var i=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=i((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var P=I.extend(A);function M(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var N=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof M?t:v(t)?new M(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new M(t.x,t.y):new M(t,e,n)}function R(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function O(t,e){return!t||t instanceof R?t:new R(t,e)}function B(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function U(t,e){return t instanceof B?t:new B(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function j(t,e,n){return t instanceof F?t:v(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new M(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new M(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},R.prototype={extend:function(t){return t=D(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof M?D(t):O(t))instanceof R?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=O(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=O(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},B.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof B))return t?this.extend(j(t)||U(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new B(new F(e.lat-r,e.lng-i),new F(n.lat+r,n.lng+i))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof F||"lat"in t?j(t):U(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof B?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=U(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=U(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=U(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=j(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+l(this.lat,t)+", "+l(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,j(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return U([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var q,$={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new R(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new B(new F(o.lat-r,o.lng-i),new F(a.lat-r,a.lng-i))}},V=n({},$,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),z={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new M(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(q=6378137*Math.PI,new R([-q,-q],[q,q]))};function H(t,e,n,r){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function G(t,e,n,r){return new H(t,e,n,r)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new M((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var W=n({},V,{code:"EPSG:3857",projection:z,transformation:function(){var t=.5/(Math.PI*z.R);return G(t,.5,-t,.5)}()}),K=n({},W,{code:"EPSG:900913"});function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var n,r,i,o,a,s,u="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)u+=(r?"L":"M")+(s=a[r]).x+" "+s.y;u+=e?It?"z":"x":""}return u||"M0 0"}var Y=document.documentElement.style,X="ActiveXObject"in window,J=X&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=Pt("webkit"),nt=Pt("android"),rt=Pt("android 2")||Pt("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=nt&&Pt("Google")&&it<537&&!("AudioNode"in window),at=!!window.opera,st=Pt("chrome"),ut=Pt("gecko")&&!et&&!at&&!X,ct=!st&&Pt("safari"),lt=Pt("phantom"),ht="OTransition"in Y,dt=0===navigator.platform.indexOf("Win"),ft=X&&"transition"in Y,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,mt="MozPerspective"in Y,gt=!window.L_DISABLE_3D&&(ft||pt||mt)&&!ht&&!lt,vt="undefined"!=typeof orientation||Pt("mobile"),yt=vt&&et,bt=vt&&pt,wt=!window.PointerEvent&&window.MSPointerEvent,_t=!(et||!window.PointerEvent&&!wt),kt=!window.L_NO_TOUCH&&(_t||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Et=vt&&at,xt=vt&&ut,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t},Ct=!!document.createElement("canvas").getContext,It=!(!document.createElementNS||!Z("svg").createSVGRect),At=!It&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Pt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Mt=(Object.freeze||Object)({ie:X,ielt9:J,edge:tt,webkit:et,android:nt,android23:rt,androidStock:ot,opera:at,chrome:st,gecko:ut,safari:ct,phantom:lt,opera12:ht,win:dt,ie3d:ft,webkit3d:pt,gecko3d:mt,any3d:gt,mobile:vt,mobileWebkit:yt,mobileWebkit3d:bt,msPointer:wt,pointer:_t,touch:kt,mobileOpera:Et,mobileGecko:xt,retina:St,passiveEvents:Tt,canvas:Ct,svg:It,vml:At}),Nt=wt?"MSPointerDown":"pointerdown",Lt=wt?"MSPointerMove":"pointermove",Dt=wt?"MSPointerUp":"pointerup",Rt=wt?"MSPointerCancel":"pointercancel",Ot=["INPUT","SELECT","OPTION"],Bt={},Ut=!1,Ft=0;function jt(t,e,n,r){return"touchstart"===e?function(t,e,n){var r=i((function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Ot.indexOf(t.target.tagName)<0))return;Be(t)}zt(t,e)}));t["_leaflet_touchstart"+n]=r,t.addEventListener(Nt,r,!1),Ut||(document.documentElement.addEventListener(Nt,qt,!0),document.documentElement.addEventListener(Lt,$t,!0),document.documentElement.addEventListener(Dt,Vt,!0),document.documentElement.addEventListener(Rt,Vt,!0),Ut=!0)}(t,n,r):"touchmove"===e?function(t,e,n){var r=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&zt(t,e)};t["_leaflet_touchmove"+n]=r,t.addEventListener(Lt,r,!1)}(t,n,r):"touchend"===e&&function(t,e,n){var r=function(t){zt(t,e)};t["_leaflet_touchend"+n]=r,t.addEventListener(Dt,r,!1),t.addEventListener(Rt,r,!1)}(t,n,r),this}function qt(t){Bt[t.pointerId]=t,Ft++}function $t(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function Vt(t){delete Bt[t.pointerId],Ft--}function zt(t,e){for(var n in t.touches=[],Bt)t.touches.push(Bt[n]);t.changedTouches=[t],e(t)}var Ht=wt?"MSPointerDown":_t?"pointerdown":"touchstart",Gt=wt?"MSPointerUp":_t?"pointerup":"touchend",Wt="_leaflet_";function Kt(t,e,n){var r,i,o=!1;function a(t){var e;if(_t){if(!tt||"mouse"===t.pointerType)return;e=Ft}else e=t.touches.length;if(!(e>1)){var n=Date.now(),a=n-(r||n);i=t.touches?t.touches[0]:t,o=a>0&&a<=250,r=n}}function s(t){if(o&&!i.cancelBubble){if(_t){if(!tt||"mouse"===t.pointerType)return;var n,a,s={};for(a in i)n=i[a],s[a]=n&&n.bind?n.bind(i):n;i=s}i.type="dblclick",i.button=0,e(i),r=null}}return t[Wt+Ht+n]=a,t[Wt+Gt+n]=s,t[Wt+"dblclick"+n]=e,t.addEventListener(Ht,a,!!Tt&&{passive:!1}),t.addEventListener(Gt,s,!!Tt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Zt(t,e){var n=t[Wt+Ht+e],r=t[Wt+Gt+e],i=t[Wt+"dblclick"+e];return t.removeEventListener(Ht,n,!!Tt&&{passive:!1}),t.removeEventListener(Gt,r,!!Tt&&{passive:!1}),tt||t.removeEventListener("dblclick",i,!1),this}var Qt,Yt,Xt,Jt,te,ee=ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ne=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),re="webkitTransition"===ne||"OTransition"===ne?ne+"End":"transitionend";function ie(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function ae(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function ue(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ce(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function le(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=me(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function de(t,e){if(void 0!==t.classList)for(var n=d(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!he(t,e)){var o=me(t);pe(t,(o?o+" ":"")+e)}}function fe(t,e){void 0!==t.classList?t.classList.remove(e):pe(t,h((" "+me(t)+" ").replace(" "+e+" "," ")))}function pe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function me(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ge(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ye(t,e,n){var r=e||new M(0,0);t.style[ee]=(ft?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function be(t,e){t._leaflet_pos=e,gt?ye(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function we(t){return t._leaflet_pos||new M(0,0)}if("onselectstart"in document)Qt=function(){Ae(window,"selectstart",Be)},Yt=function(){Me(window,"selectstart",Be)};else{var _e=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qt=function(){if(_e){var t=document.documentElement.style;Xt=t[_e],t[_e]="none"}},Yt=function(){_e&&(document.documentElement.style[_e]=Xt,Xt=void 0)}}function ke(){Ae(window,"dragstart",Be)}function Ee(){Me(window,"dragstart",Be)}function xe(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Se(),Jt=t,te=t.style.outline,t.style.outline="none",Ae(window,"keydown",Se))}function Se(){Jt&&(Jt.style.outline=te,Jt=void 0,te=void 0,Me(window,"keydown",Se))}function Te(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Ce(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ie=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ne,TRANSITION_END:re,get:ie,getStyle:oe,create:ae,remove:se,empty:ue,toFront:ce,toBack:le,hasClass:he,addClass:de,removeClass:fe,setClass:pe,getClass:me,setOpacity:ge,testProp:ve,setTransform:ye,setPosition:be,getPosition:we,disableTextSelection:Qt,enableTextSelection:Yt,disableImageDrag:ke,enableImageDrag:Ee,preventOutline:xe,restoreOutline:Se,getSizedParentNode:Te,getScale:Ce});function Ae(t,e,n,r){if("object"==typeof e)for(var i in e)Ne(t,i,e[i],n);else for(var o=0,a=(e=d(e)).length;o<a;o++)Ne(t,e[o],n,r);return this}var Pe="_leaflet_events";function Me(t,e,n,r){if("object"==typeof e)for(var i in e)Le(t,i,e[i],n);else if(e)for(var o=0,a=(e=d(e)).length;o<a;o++)Le(t,e[o],n,r);else{for(var s in t[Pe])Le(t,s,t[Pe][s]);delete t[Pe]}return this}function Ne(t,e,n,r){var i=e+a(n)+(r?"_"+a(r):"");if(t[Pe]&&t[Pe][i])return this;var o=function(e){return n.call(r||t,e||window.event)},s=o;_t&&0===e.indexOf("touch")?jt(t,e,o,i):!kt||"dblclick"!==e||!Kt||_t&&st?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!!Tt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,Ge(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&nt&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=$e&&n-$e;r&&r>100&&r<500||t.target._simulatedClick&&!t._simulated?Ue(t):($e=n,e(t))}(t,s)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):Kt(t,o,i),t[Pe]=t[Pe]||{},t[Pe][i]=o}function Le(t,e,n,r){var i=e+a(n)+(r?"_"+a(r):""),o=t[Pe]&&t[Pe][i];if(!o)return this;_t&&0===e.indexOf("touch")?function(t,e,n){var r=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Nt,r,!1):"touchmove"===e?t.removeEventListener(Lt,r,!1):"touchend"===e&&(t.removeEventListener(Dt,r,!1),t.removeEventListener(Rt,r,!1))}(t,e,i):!kt||"dblclick"!==e||!Zt||_t&&st?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",o,!!Tt&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o):Zt(t,i),t[Pe][i]=null}function De(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Re(t){return Ne(t,"mousewheel",De),this}function Oe(t){return Ae(t,"mousedown touchstart dblclick",De),Ne(t,"click",ze),this}function Be(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ue(t){return Be(t),De(t),this}function Fe(t,e){if(!e)return new M(t.clientX,t.clientY);var n=Ce(e),r=n.boundingClientRect;return new M((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var je=dt&&st?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function qe(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/je:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var $e,Ve={};function ze(t){Ve[t.type]=!0}function He(t){var e=Ve[t.type];return Ve[t.type]=!1,e}function Ge(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var We=(Object.freeze||Object)({on:Ae,off:Me,stopPropagation:De,disableScrollPropagation:Re,disableClickPropagation:Oe,preventDefault:Be,stop:Ue,getMousePosition:Fe,getWheelDelta:qe,fakeStop:ze,skipped:He,isExternalTarget:Ge,addListener:Ae,removeListener:Me}),Ke=P.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=we(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),be(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ze=P.extend({options:{crs:W,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ne&&gt&&!Et&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ae(this._proxy,re,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(j(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof M?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():U(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),r=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=U(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=D(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ke,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){de(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!gt)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=j(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),c=i.distanceTo(r)||1;function l(t){var e=(u*u-s*s+2.0164*(t?-1:1)*2.0164*c*c)/(2*(t?u:s)*2.0164*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function d(t){return(Math.exp(t)+Math.exp(-t))/2}var f=l(0);function p(t){return s*(d(f)*(h(e=f+1.42*t)/d(e))-h(f))/2.0164;var e}var m=Date.now(),g=(l(1)-f)/1.42,v=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-m)/v,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*g;o<=1?(this._flyToFrame=S(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(p(u)/c)),a),this.getScaleZoom(s/function(t){return s*(d(f)/d(f+1.42*t))}(u),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=U(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,U(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),o=this.project(i),a=this.project(t),s=this.getPixelBounds(),u=s.getSize().divideBy(2),c=O([s.min.add(n),s.max.subtract(r)]);if(!c.contains(a)){this._enforcingBounds=!0;var l=o.subtract(a),h=D(a.x+l.x,a.y+l.y);(a.x<c.min.x||a.x>c.max.x)&&(h.x=o.x-l.x,l.x>0?h.x+=u.x-n.x:h.x-=u.x-r.x),(a.y<c.min.y||a.y>c.max.y)&&(h.y=o.y-l.y,l.y>0?h.y+=u.y-n.y:h.y-=u.y-r.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=e.divideBy(2).round(),a=r.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new F(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ae("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new B(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=U(t),n=D(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),c=O(this.project(s,r),this.project(a,r)).getSize(),l=gt?this.options.zoomSnap:1,h=u.x/c.x,d=u.y/c.y,f=e?Math.max(h,d):Math.min(h,d);return r=this.getScaleZoom(f,r),l&&(r=Math.round(r/(l/100))*(l/100),r=e?Math.ceil(r/l)*l:Math.floor(r/l)*l),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new R(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(j(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(U(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return Fe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ae(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt,de(t,"leaflet-container"+(kt?" leaflet-touch":"")+(St?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(ct?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),be(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(de(t.markerPane,"leaflet-zoom-hide"),de(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){be(this._mapPane,new M(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){be(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Me:Ae;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),gt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=S((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!Ge(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||s||i||!Ge(o,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||xe(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if("click"===t.type){var i=n({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,e))).length){var o=r[0];"contextmenu"===e&&o.listens(e,!0)&&Be(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<r.length;u++)if(r[u].fire(e,a,!0),a.originalEvent._stopped||!1===r[u].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return we(this._mapPane)||new M(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return O([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new R(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new R(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=O(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new M(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=gt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){fe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=ee,n=this._proxy.style[e];ye(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ye(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i)||(S((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,de(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&fe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),S((function(){this._moveEnd(!0)}),this))}}),Qe=I.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return de(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ye=function(t){return new Qe(t)};Ze.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ae("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=ae("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xe=Qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Qe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){de(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(de(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):fe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return fe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Oe(e),Re(e);var r=this._section=ae("section",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Ae(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=ae("a",t+"-toggle",e);i.href="#",i.title="Layers",kt?(Ae(i,"click",Ue),Ae(i,"click",this.expand,this)):Ae(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ae("div",t+"-base",r),this._separator=ae("div",t+"-separator",r),this._overlaysList=ae("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ue(this._baseLayersList),ue(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+a(this),r),this._layerControlInputs.push(e),e.layerId=a(t.layer),Ae(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Je=Qe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ae("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=ae("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Oe(o),Ae(o,"click",Ue),Ae(o,"click",i,this),Ae(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";fe(this._zoomInButton,e),fe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&de(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&de(this._zoomInButton,e)}});Ze.mergeOptions({zoomControl:!0}),Ze.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))}));var tn=Qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ae("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ae("div",e,n)),t.imperial&&(this._iScale=ae("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),en=Qe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),Oe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ze.mergeOptions({attributionControl:!0}),Ze.addInitHook((function(){this.options.attributionControl&&(new en).addTo(this)})),Qe.Layers=Xe,Qe.Zoom=Je,Qe.Scale=tn,Qe.Attribution=en,Ye.layers=function(t,e,n){return new Xe(t,e,n)},Ye.zoom=function(t){return new Je(t)},Ye.scale=function(t){return new tn(t)},Ye.attribution=function(t){return new en(t)};var nn=I.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,e){return t.addHandler(e,this),this};var rn,on={Events:A},an=kt?"touchstart mousedown":"mousedown",sn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},un={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},cn=P.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ae(this._dragStartTarget,an,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cn._dragging===this&&this.finishDrag(),Me(this._dragStartTarget,an,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")&&!(cn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(cn._dragging=this,this._preventOutline&&xe(this._element),ke(),Qt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Te(this._element);this._startPoint=new M(e.clientX,e.clientY),this._parentScale=Ce(n),Ae(document,un[t.type],this._onMove,this),Ae(document,sn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new M(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Be(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=we(this._element).subtract(n),de(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),de(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=S(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),be(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in fe(document.body,"leaflet-dragging"),this._lastTarget&&(fe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),un)Me(document,un[t],this._onMove,this),Me(document,sn[t],this._onUp,this);Ee(),Yt(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,cn._dragging=!1}});function ln(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,o){var a,s,u,c=0;for(s=i+1;s<=o-1;s++)(u=mn(e[s],e[i],e[o],!0))>c&&(a=s,c=u);c>r&&(n[a]=1,t(e,n,r,i,a),t(e,n,r,a,o))}(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)a=t[r],s=t[i],u=void 0,c=void 0,u=s.x-a.x,c=s.y-a.y,u*u+c*c>e&&(n.push(t[r]),i=r);var a,s,u,c;return i<o-1&&n.push(t[o-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(mn(t,e,n,!0))}function dn(t,e,n,r,i){var o,a,s,u=r?rn:pn(t,n),c=pn(e,n);for(rn=c;;){if(!(u|c))return[t,e];if(u&c)return!1;s=pn(a=fn(t,e,o=u||c,n,i),n),o===u?(t=a,u=s):(e=a,c=s)}}function fn(t,e,n,r,i){var o,a,s=e.x-t.x,u=e.y-t.y,c=r.min,l=r.max;return 8&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):4&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):2&n?(o=l.x,a=t.y+u*(l.x-t.x)/s):1&n&&(o=c.x,a=t.y+u*(c.x-t.x)/s),new M(o,a,i)}function pn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function mn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,u=n.y-a,c=s*s+u*u;return c>0&&((i=((t.x-o)*s+(t.y-a)*u)/c)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=u*i)),s=t.x-o,u=t.y-a,r?s*s+u*u:new M(o,a)}function gn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(t)}var yn=(Object.freeze||Object)({simplify:ln,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return mn(t,e,n)},clipSegment:dn,_getEdgeIntersection:fn,_getBitCode:pn,_sqClosestPointOnSegment:mn,isFlat:gn,_flat:vn});function bn(t,e,n){var r,i,o,a,s,u,c,l,h,d=[1,4,2,8];for(i=0,c=t.length;i<c;i++)t[i]._code=pn(t[i],e);for(a=0;a<4;a++){for(l=d[a],r=[],i=0,o=(c=t.length)-1;i<c;o=i++)s=t[i],u=t[o],s._code&l?u._code&l||((h=fn(u,s,l,e,n))._code=pn(h,e),r.push(h)):(u._code&l&&((h=fn(u,s,l,e,n))._code=pn(h,e),r.push(h)),r.push(s));t=r}return t}var wn=(Object.freeze||Object)({clipPolygon:bn}),_n={project:function(t){return new M(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new R([-180,-90],[180,90])},kn={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new M(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),u=0,c=.1;u<15&&Math.abs(c)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new F(s*n,t.x*n/r)}},En=(Object.freeze||Object)({LonLat:_n,Mercator:kn,SphericalMercator:z}),xn=n({},V,{code:"EPSG:3395",projection:kn,transformation:function(){var t=.5/(Math.PI*kn.R);return G(t,.5,-t,.5)}()}),Sn=n({},V,{code:"EPSG:4326",projection:_n,transformation:G(1/180,1,-1/180,.5)}),Tn=n({},$,{projection:_n,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});$.Earth=V,$.EPSG3395=xn,$.EPSG3857=W,$.EPSG900913=K,$.EPSG4326=Sn,$.Simple=Tn;var Cn=P.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ze.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var In=Cn.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),An=In.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),In.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),In.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new B;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Pn=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=D(r),o=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return St&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Mn=Pn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Mn.imagePath||(Mn.imagePath=this._detectIconPath()),(this.options.imagePath||Mn.imagePath)+Pn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Nn=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new cn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),de(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&fe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=we(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=O(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!u.contains(o)){var c=D((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),be(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=S(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=we(e._icon),i=e._map.layerPointToLatLng(r);n&&be(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=Cn.extend({options:{icon:new Mn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),de(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(de(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&be(this._icon,t),this._shadow&&be(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(de(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ge(this._icon,t),this._shadow&&ge(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Dn=Cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Rn=Dn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Dn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new R(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),On=Rn.extend({initialize:function(t,e,r){if("number"==typeof e&&(e=n({},r,{radius:e})),f(this,e),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Dn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===V.distance){var i=Math.PI/180,o=this._mRadius/V.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),c=n.unproject(u).lat,l=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(c*i))/(Math.cos(e*i)*Math.cos(c*i)))/i;(isNaN(l)||0===l)&&(l=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(l)?0:u.x-n.project([c,t-l]).x,this._radiusY=u.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),Bn=Dn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=mn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],c=1,l=u.length;c<l;c++){var h=o(t,e=u[c-1],n=u[c],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if(i=s[t],o=s[t+1],(r+=n=i.distanceTo(o))>e)return a=(r-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new B,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=gn(t),r=0,i=t.length;r<i;r++)n?(e[r]=j(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new M(t,t);this._pxBounds=new R([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof F,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,u=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=dn(s[n],s[n+1],t,n,!0))&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=ln(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&hn(t,s[i],s[r])<=u)return!0;return!1}});Bn._flat=vn;var Un=Bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,u,c=this._rings[0],l=c.length;if(!l)return null;for(o=a=s=0,t=0,e=l-1;t<l;e=t++)n=c[t],r=c[e],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return u=0===o?c[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=Bn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Bn.prototype._setLatLngs.call(this,t),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new M(e,e);if(t=new R(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=bn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,u,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(u=(e=this._parts[i]).length)-1;o<u;a=o++)n=e[o],r=e[a],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||Bn.prototype._containsPoint.call(this,t,!0)}}),Fn=An.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=v(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=jn(t,o);return a?(a.feature=Wn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function jn(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],c=e&&e.pointToLayer,l=e&&e.coordsToLatLng||$n;if(!s&&!a)return null;switch(a.type){case"Point":return qn(c,t,n=l(s),e);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=l(s[i]),u.push(qn(c,t,n,e));return new An(u);case"LineString":case"MultiLineString":return r=Vn(s,"LineString"===a.type?0:1,l),new Bn(r,e);case"Polygon":case"MultiPolygon":return r=Vn(s,"Polygon"===a.type?1:2,l),new Un(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=jn({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new An(u);default:throw new Error("Invalid GeoJSON object.")}}function qn(t,e,n,r){return t?t(e,n):new Ln(n,r&&r.markersInheritOptions&&r)}function $n(t){return new F(t[1],t[0],t[2])}function Vn(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?Vn(t[o],e-1,n):(n||$n)(t[o]),i.push(r);return i}function zn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[l(t.lng,e),l(t.lat,e),l(t.alt,e)]:[l(t.lng,e),l(t.lat,e)]}function Hn(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?Hn(t[o],e-1,n,r):zn(t[o],r));return!e&&n&&i.push(i[0]),i}function Gn(t,e){return t.feature?n({},t.feature,{geometry:e}):Wn(e)}function Wn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Kn={toGeoJSON:function(t){return Gn(this,{type:"Point",coordinates:zn(this.getLatLng(),t)})}};function Zn(t,e){return new Fn(t,e)}Ln.include(Kn),On.include(Kn),Rn.include(Kn),Bn.include({toGeoJSON:function(t){var e=!gn(this._latlngs);return Gn(this,{type:(e?"Multi":"")+"LineString",coordinates:Hn(this._latlngs,e?1:0,!1,t)})}}),Un.include({toGeoJSON:function(t){var e=!gn(this._latlngs),n=e&&!gn(this._latlngs[0]),r=Hn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Gn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),In.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Gn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=Wn(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?Gn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Qn=Zn,Yn=Cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=U(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(de(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ce(this._image),this},bringToBack:function(){return this._map&&le(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=U(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");de(e,"leaflet-image-layer"),this._zoomAnimated&&de(e,"leaflet-zoom-animated"),this.options.className&&de(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ye(this._image,n,e)},_reset:function(){var t=this._image,e=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();be(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Xn=Yn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(de(e,"leaflet-image-layer"),this._zoomAnimated&&de(e,"leaflet-zoom-animated"),this.options.className&&de(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=ae("source");s.src=this._url[a],e.appendChild(s)}}}}),Jn=Yn.extend({_initImage:function(){var t=this._image=this._url;de(t,"leaflet-image-layer"),this._zoomAnimated&&de(t,"leaflet-zoom-animated"),this.options.className&&de(t,this.options.className),t.onselectstart=c,t.onmousemove=c}}),tr=Cn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ge(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ge(this._container,0),this._removeTimeout=setTimeout(i(se,void 0,this._container),200)):se(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ce(this._container),this},bringToBack:function(){return this._map&&le(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Cn||(n=e,e=t),e instanceof An)for(var r in t._layers){e=t._layers[r];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?be(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),er=tr.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){tr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Dn||this._source.on("preclick",De))},onRemove:function(t){tr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Dn||this._source.off("preclick",De))},getEvents:function(){var t=tr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",n),Oe(n),Re(this._contentNode),Ae(n,"contextmenu",De),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ae("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",Ae(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight;i&&r>i?(e.height=i+"px",de(t,"leaflet-popup-scrolled")):fe(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();be(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new M(this._containerLeft,-n-this._containerBottom);i._add(we(this._container));var o=t.layerPointToContainerPoint(i),a=D(this.options.autoPanPadding),s=D(this.options.autoPanPaddingTopLeft||a),u=D(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),l=0,h=0;o.x+r+u.x>c.x&&(l=o.x+r-c.x+u.x),o.x-l-s.x<0&&(l=o.x-s.x),o.y+n+u.y>c.y&&(h=o.y+n-c.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(l||h)&&t.fire("autopanstart").panBy([l,h])}},_onCloseButtonClick:function(t){this._close(),Ue(t)},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ze.mergeOptions({closePopupOnClick:!0}),Ze.include({openPopup:function(t,e,n){return t instanceof er||(t=new er(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Cn.include({bindPopup:function(t,e){return t instanceof er?(f(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new er(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Ue(t),e instanceof Dn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var nr=tr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){tr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){tr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=tr.prototype.getEvents.call(this);return kt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=D(this.options.offset),c=this._getAnchor();"top"===o?t=t.add(D(-a/2+u.x,-s+u.y+c.y,!0)):"bottom"===o?t=t.subtract(D(a/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(D(a/2+u.x,s/2-c.y+u.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",t=t.add(D(u.x+c.x,c.y-s/2+u.y,!0))):(o="left",t=t.subtract(D(a+c.x-u.x,s/2-c.y-u.y,!0))),fe(n,"leaflet-tooltip-right"),fe(n,"leaflet-tooltip-left"),fe(n,"leaflet-tooltip-top"),fe(n,"leaflet-tooltip-bottom"),de(n,"leaflet-tooltip-"+o),be(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ge(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ze.include({openTooltip:function(t,e,n){return t instanceof nr||(t=new nr(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Cn.include({bindTooltip:function(t,e){return t instanceof nr?(f(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new nr(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),kt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var rr=Pn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ue(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=D(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Pn.Default=Mn;var ir=Cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof M?t:new M(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){ge(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);ge(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(se(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new M(+i,+o);s.z=+a;var u=this._tileCoordsToKey(s),c=this._tiles[u];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new M(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();gt?ye(t.el,i,r):be(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new R(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,u=new R(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var l=this._tiles[c].coords;l.z===this._tileZoom&&u.contains(new M(l.x,l.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var d=i.min.x;d<=i.max.x;d++){var f=new M(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:a.push(f)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return U(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new B(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new M(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){de(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,J&&this.options.opacity<1&&ge(t,this.options.opacity),nt&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&S(i(this._tileReady,this,t,null,o)),be(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(ge(n.el,0),T(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(de(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new M(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new R(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),or=ir.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&St&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ae(n,"load",i(this._tileOnLoad,this,e,n)),Ae(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:St?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=r),e["-y"]=r}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){J?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=b,se(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return ot||e.el.setAttribute("src",b),ir.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==b))return ir.prototype._tileReady.call(this,t,e,n)}});function ar(t,e){return new or(t,e)}var sr=or.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=n({},this.defaultWmsParams);for(var i in e)i in this.options||(r[i]=e[i]);var o=(e=f(this,e)).detectRetina&&St?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,or.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=O(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===Sn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=or.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});or.WMS=sr,ar.wms=function(t,e){return new sr(t,e)};var ur=Cn.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&de(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=we(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);gt?ye(this._container,s,n):be(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new R(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cr=ur.extend({getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ur.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ae(t,"mousemove",this._onMouseMove,this),Ae(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ae(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,se(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=St?2:1;be(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",St&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ur.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],u[r?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(ze(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(fe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(de(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function lr(t){return Ct?new cr(t):null}var hr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),dr={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ur.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hr("shape");de(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=hr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=hr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ce(t._container)},_bringToBack:function(t){le(t._container)}},fr=At?hr:Z,pr=ur.extend({getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=fr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),be(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=fr("path");t.options.className&&de(e,t.options.className),t.options.interactive&&de(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ce(t._path)},_bringToBack:function(t){le(t._path)}});function mr(t){return It||At?new pr(t):null}At&&pr.include(dr),Ze.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&lr(t)||mr(t)}});var gr=Un.extend({initialize:function(t,e){Un.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=U(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});pr.create=fr,pr.pointsToPath=Q,Fn.geometryToLayer=jn,Fn.coordsToLatLng=$n,Fn.coordsToLatLngs=Vn,Fn.latLngToCoords=zn,Fn.latLngsToCoords=Hn,Fn.getFeature=Gn,Fn.asFeature=Wn,Ze.mergeOptions({boxZoom:!0});var vr=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Qt(),ke(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ae(document,{contextmenu:Ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),de(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new R(this._point,this._startPoint),n=e.getSize();be(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(se(this._box),fe(this._container,"leaflet-crosshair")),Yt(),Ee(),Me(document,{contextmenu:Ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ze.addInitHook("addHandler","boxZoom",vr),Ze.mergeOptions({doubleClickZoom:!0});var yr=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Ze.addInitHook("addHandler","doubleClickZoom",yr),Ze.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var br=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new cn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}de(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){fe(this._map._container,"leaflet-grab"),fe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=U(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),u=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),l=s.multiplyBy(c/u),h=c/(n.inertiaDeceleration*a),d=l.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),S((function(){e.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Ze.addInitHook("addHandler","dragging",br),Ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wr=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ae(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=D(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Ue(t)}}});Ze.addInitHook("addHandler","keyboard",wr),Ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _r=nn.extend({addHooks:function(){Ae(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=qe(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Ue(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ze.addInitHook("addHandler","scrollWheelZoom",_r),Ze.mergeOptions({tap:!0,tapTolerance:15});var kr=nn.extend({addHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Be(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new M(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Ae(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Me(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&fe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new M(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});kt&&!_t&&Ze.addInitHook("addHandler","tap",kr),Ze.mergeOptions({touchZoom:kt&&!rt,bounceAtZoomLimits:!0});var Er=nn.extend({addHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend",this._onTouchEnd,this),Be(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var s=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=S(s,this,!0),Be(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Me(document,"touchmove",this._onTouchMove),Me(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ze.addInitHook("addHandler","touchZoom",Er),Ze.BoxZoom=vr,Ze.DoubleClickZoom=yr,Ze.Drag=br,Ze.Keyboard=wr,Ze.ScrollWheelZoom=_r,Ze.Tap=kr,Ze.TouchZoom=Er,Object.freeze=e,t.version="1.6.0",t.Control=Qe,t.control=Ye,t.Browser=Mt,t.Evented=P,t.Mixin=on,t.Util=C,t.Class=I,t.Handler=nn,t.extend=n,t.bind=i,t.stamp=a,t.setOptions=f,t.DomEvent=We,t.DomUtil=Ie,t.PosAnimation=Ke,t.Draggable=cn,t.LineUtil=yn,t.PolyUtil=wn,t.Point=M,t.point=D,t.Bounds=R,t.bounds=O,t.Transformation=H,t.transformation=G,t.Projection=En,t.LatLng=F,t.latLng=j,t.LatLngBounds=B,t.latLngBounds=U,t.CRS=$,t.GeoJSON=Fn,t.geoJSON=Zn,t.geoJson=Qn,t.Layer=Cn,t.LayerGroup=In,t.layerGroup=function(t,e){return new In(t,e)},t.FeatureGroup=An,t.featureGroup=function(t){return new An(t)},t.ImageOverlay=Yn,t.imageOverlay=function(t,e,n){return new Yn(t,e,n)},t.VideoOverlay=Xn,t.videoOverlay=function(t,e,n){return new Xn(t,e,n)},t.SVGOverlay=Jn,t.svgOverlay=function(t,e,n){return new Jn(t,e,n)},t.DivOverlay=tr,t.Popup=er,t.popup=function(t,e){return new er(t,e)},t.Tooltip=nr,t.tooltip=function(t,e){return new nr(t,e)},t.Icon=Pn,t.icon=function(t){return new Pn(t)},t.DivIcon=rr,t.divIcon=function(t){return new rr(t)},t.Marker=Ln,t.marker=function(t,e){return new Ln(t,e)},t.TileLayer=or,t.tileLayer=ar,t.GridLayer=ir,t.gridLayer=function(t){return new ir(t)},t.SVG=pr,t.svg=mr,t.Renderer=ur,t.Canvas=cr,t.canvas=lr,t.Path=Dn,t.CircleMarker=Rn,t.circleMarker=function(t,e){return new Rn(t,e)},t.Circle=On,t.circle=function(t,e,n){return new On(t,e,n)},t.Polyline=Bn,t.polyline=function(t,e){return new Bn(t,e)},t.Polygon=Un,t.polygon=function(t,e){return new Un(t,e)},t.Rectangle=gr,t.rectangle=function(t,e){return new gr(t,e)},t.Map=Ze,t.map=function(t,e){return new Ze(t,e)};var xr=window.L;t.noConflict=function(){return window.L=xr,this},window.L=t}(e)}));function An(t,e,n){const r=t.slice();return r[12]=e[n],r}function Pn(e){let n;return{c(){n=E("p"),n.textContent="У вас нет зарегистрированных машин, для регистрации спецтехники зайдите в свой профиль."},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function Mn(t){let e,n=t[11],r=[];for(let e=0;e<n.length;e+=1)r[e]=Dn(An(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=T()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(2054&i){let o;for(n=t[11],o=0;o<n.length;o+=1){const a=An(t,n,o);r[o]?r[o].p(a,i):(r[o]=Dn(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){k(r,t),t&&_(e)}}}function Nn(t){let e,n,r,i;function o(...e){return t[9](t[12],...e)}return{c(){e=E("i"),e.textContent="Отдыхает ...",n=S(),r=E("button"),r.textContent="На линию",I(r,"class","btn-green")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"click",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Ln(t){let e,n,r,i;function o(...e){return t[8](t[12],...e)}return{c(){e=E("i"),e.textContent="На линии ...",n=S(),r=E("button"),r.textContent="Завершить",I(r,"class","btn-orange")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"click",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Dn(t){let e,n,r,i,o,a,s,u=t[12].model+"";function c(t,e){return t[12].online?Ln:Nn}let l=c(t),h=l(t);return{c(){e=E("div"),n=E("div"),r=E("span"),i=x(u),o=S(),a=E("div"),h.c(),s=S(),I(r,"class"," text-teal-500"),I(e,"class","flex flex-row justify-around items-center")},m(t,u){w(t,e,u),b(e,n),b(n,r),b(r,i),b(e,o),b(e,a),h.m(a,null),b(e,s)},p(t,e){2048&e&&u!==(u=t[12].model+"")&&P(i,u),l===(l=c(t))&&h?h.p(t,e):(h.d(1),h=l(t),h&&(h.c(),h.m(a,null)))},d(t){t&&_(e),h.d()}}}function Rn(t){let e;return{c(){e=E("span"),e.textContent="Не удалось загрузить...",I(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function On(t){let e;function n(t,e){return t[11].length>0?Mn:Pn}let r=n(t),i=r(t);return{c(){i.c(),e=S()},m(t,n){i.m(t,n),w(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&_(e)}}}function Bn(t){let e,n,r,i,o,a,s;const u=new Ye({props:{path:"rentalCars",query:function(...e){return t[7](t[10],...e)},$$slots:{default:[On,({data:t})=>({11:t}),({data:t})=>t?2048:0],fallback:[Rn,({data:t})=>({11:t}),({data:t})=>t?2048:0]},$$scope:{ctx:t}}});return{c(){e=E("div"),n=E("span"),r=E("img"),o=S(),mt(u.$$.fragment),r.src!==(i="./icons/close.svg")&&I(r,"src","./icons/close.svg"),I(r,"alt","x"),I(n,"class","float-right")},m(i,c){w(i,e,c),b(e,n),b(n,r),w(i,o,c),gt(u,i,c),a=!0,s=C(r,"click",t[6])},p(e,n){t=e;const r={};34816&n&&(r.$$scope={dirty:n,ctx:t}),u.$set(r)},i(t){a||(lt(u.$$.fragment,t),a=!0)},o(t){ht(u.$$.fragment,t),a=!1},d(t){t&&_(e),t&&_(o),vt(u,t),s()}}}function Un(t){let e;const n=new me({props:{$$slots:{default:[Bn,({user:t})=>({10:t}),({user:t})=>t?1024:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};32768&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Fn(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[Un]},$$scope:{ctx:t}}});return{c(){e=E("div"),mt(r.$$.fragment),I(e,"class","p-2")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,[e]){const n={};32768&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function jn(t,e,n){let{region:r}=e,{city:i}=e,{latlng:o}=e;const a=G();function s(t){t.update({online:!0,location:[o.lat,o.lng],region:r,city:i}).then((function(){a("alert",{message:"Вы на линии (отмечены на карте)"})})).catch((function(t){a("alert",{message:`Ошибка: ${t}`})}))}function u(t){t.update({online:!1}).then((function(){a("alert",{message:"Работа завершена."})})).catch((function(t){a("alert",{message:`Ошибка: ${t}`})}))}return t.$set=t=>{"region"in t&&n(3,r=t.region),"city"in t&&n(4,i=t.city),"latlng"in t&&n(5,o=t.latlng)},[a,s,u,r,i,o,()=>a("close"),(t,e)=>e.where("owner","==",t.uid),t=>u(t.ref),t=>s(t.ref)]}Sn=L.Marker.prototype._initIcon,Tn=L.Marker.prototype._setPos,Cn="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),L.Marker.include({_initIcon:function(){Sn.call(this)},_setPos:function(t){Tn.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,Cn?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}});class qn extends wt{constructor(t){super(),bt(this,t,jn,Fn,s,{region:3,city:4,latlng:5})}}function $n(t,e,n){const r=t.slice();return r[16]=e[n],r}function Vn(t){let e,n,r,i,o,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,C,A,M,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K=t[16].address+"",Z=t[16].routes+"",Q=t[16].desc+"",Y=t[16].price+"",X=t[16].paymentMethod+"",J=t[16].setDriver==t[13].uid&&1!=t[16].completed&&zn(),tt=t[16].childSeat&&Hn(),et=null==t[16].completed&&Gn(t),nt=t[16].setDriver==t[13].uid&&1!=t[16].driverArrived?Zn(t):void 0,rt=t[16].onway&&1!=t[16].completed&&Qn(t),it=t[16].completed&&Yn();return{c(){e=E("li"),n=E("div"),J&&J.c(),r=S(),i=E("p"),o=E("span"),o.textContent="Откуда:",a=S(),s=x(K),u=S(),c=E("p"),l=E("span"),l.textContent="Куда:",h=S(),d=x(Z),f=S(),p=E("p"),m=E("span"),m.textContent="Примечание:",g=S(),v=x(Q),y=S(),tt&&tt.c(),k=S(),T=E("p"),C=E("span"),A=x("Цена:  "),M=x(Y),N=x(" руб."),L=S(),D=E("p"),R=E("span"),O=x("Способ оплаты:  "),B=x(X),U=S(),et&&et.c(),F=S(),j=E("hr"),q=S(),$=E("div"),nt&&nt.c(),V=S(),rt&&rt.c(),z=S(),it&&it.c(),H=S(),G=E("hr"),W=S(),I(o,"class","font-semibold"),I(l,"class","font-semibold"),I(m,"class","font-semibold"),I(C,"class","font-semibold text-orange-500"),I(R,"class","font-semibold text-green-500"),I(n,"class","mt-2 text-sm"),I($,"class","my-2 flex flex-row justify-around")},m(t,_){w(t,e,_),b(e,n),J&&J.m(n,null),b(n,r),b(n,i),b(i,o),b(i,a),b(i,s),b(n,u),b(n,c),b(c,l),b(c,h),b(c,d),b(n,f),b(n,p),b(p,m),b(p,g),b(p,v),b(n,y),tt&&tt.m(n,null),b(n,k),b(n,T),b(T,C),b(C,A),b(C,M),b(C,N),b(n,L),b(n,D),b(D,R),b(R,O),b(R,B),b(e,U),et&&et.m(e,null),b(e,F),b(e,j),b(e,q),b(e,$),nt&&nt.m($,null),b($,V),rt&&rt.m($,null),b(e,z),it&&it.m(e,null),b(e,H),b(e,G),b(e,W)},p(t,i){t[16].setDriver==t[13].uid&&1!=t[16].completed?J||(J=zn(),J.c(),J.m(n,r)):J&&(J.d(1),J=null),16384&i&&K!==(K=t[16].address+"")&&P(s,K),16384&i&&Z!==(Z=t[16].routes+"")&&P(d,Z),16384&i&&Q!==(Q=t[16].desc+"")&&P(v,Q),t[16].childSeat?tt||(tt=Hn(),tt.c(),tt.m(n,k)):tt&&(tt.d(1),tt=null),16384&i&&Y!==(Y=t[16].price+"")&&P(M,Y),16384&i&&X!==(X=t[16].paymentMethod+"")&&P(B,X),null==t[16].completed?et?et.p(t,i):(et=Gn(t),et.c(),et.m(e,F)):et&&(et.d(1),et=null),t[16].setDriver==t[13].uid&&1!=t[16].driverArrived?nt?nt.p(t,i):(nt=Zn(t),nt.c(),nt.m($,V)):nt&&(nt.d(1),nt=null),t[16].onway&&1!=t[16].completed?rt?rt.p(t,i):(rt=Qn(t),rt.c(),rt.m($,null)):rt&&(rt.d(1),rt=null),t[16].completed?it||(it=Yn(),it.c(),it.m(e,H)):it&&(it.d(1),it=null)},d(t){t&&_(e),J&&J.d(),tt&&tt.d(),et&&et.d(),nt&&nt.d(),rt&&rt.d(),it&&it.d()}}}function zn(t){let e;return{c(){e=E("p"),e.textContent="Заказ принят! Направляйтесь к клиенту!",I(e,"class"," font-semibold text-lg text-green-600")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Hn(t){let e;return{c(){e=E("p"),e.innerHTML='<span class="font-semibold text-red-600"> Детское кресло! </span>'},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Gn(t){let e,n,r,i,o,s,u,c,l,h,d,f,p;function m(t,e){return t[16].setDriver?Kn:Wn}let g=m(t),v=g(t);return{c(){e=E("div"),n=E("div"),r=E("button"),r.innerHTML='<img class="w-8 h-8" src="./icons/place.svg" alt="placeMarker">',i=S(),o=E("div"),s=E("button"),u=E("a"),c=E("img"),d=S(),f=E("div"),v.c(),I(r,"class","order-btn bg-teal-400 svelte-13op47i"),I(c,"class","w-8 h-8"),c.src!==(l="./icons/phone.svg")&&I(c,"src","./icons/phone.svg"),I(c,"alt","placeMarker"),I(u,"href",h="tel:"+t[16].phone),I(s,"class","order-btn bg-green-400 svelte-13op47i"),I(e,"class","mt-3 mb-2 text-center flex flex-row justify-around")},m(l,h){w(l,e,h),b(e,n),b(n,r),b(e,i),b(e,o),b(o,s),b(s,u),b(u,c),b(e,d),b(e,f),v.m(f,null),p=C(r,"click",(function(){a(t[3](t[15].path,t[16]))&&t[3](t[15].path,t[16]).apply(this,arguments)}))},p(e,n){t=e,16384&n&&h!==(h="tel:"+t[16].phone)&&I(u,"href",h),g===(g=m(t))&&v?v.p(t,n):(v.d(1),v=g(t),v&&(v.c(),v.m(f,null)))},d(t){t&&_(e),v.d(),p()}}}function Wn(t){let e,n;return{c(){e=E("button"),e.innerHTML='<img class="w-8 h-8" src="./icons/check.svg" alt="getOrder">',I(e,"class","order-btn bg-white svelte-13op47i")},m(r,i){w(r,e,i),n=C(e,"click",(function(){a(ar(t[15].path,t[16],t[13].uid))&&ar(t[15].path,t[16],t[13].uid).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),n()}}}function Kn(t){let e,n;return{c(){e=E("button"),e.innerHTML='<img class="w-8 h-8" src="./icons/close_white.svg" alt="getOrder">',I(e,"class","order-btn bg-red-500 svelte-13op47i")},m(r,i){w(r,e,i),n=C(e,"click",(function(){a(sr(t[15].path,t[16],t[13].uid))&&sr(t[15].path,t[16],t[13].uid).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),n()}}}function Zn(t){let e,n,r;return{c(){e=E("div"),n=E("button"),n.textContent="На месте",I(n,"class","btn-orange"),I(e,"class"," text-center")},m(i,o){w(i,e,o),b(e,n),r=C(n,"click",(function(){a(t[4](t[15].path,t[16],t[13].uid))&&t[4](t[15].path,t[16],t[13].uid).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),r()}}}function Qn(t){let e,n,r;return{c(){e=E("div"),n=E("button"),n.textContent="Завершить",I(n,"class"," text-white bg-red-600"),I(e,"class"," text-center")},m(i,o){w(i,e,o),b(e,n),r=C(n,"click",(function(){a(t[5](t[15].path,t[16],t[13].uid))&&t[5](t[15].path,t[16],t[13].uid).apply(this,arguments)}),{once:!0})},p(e,n){t=e},d(t){t&&_(e),r()}}}function Yn(t){let e;return{c(){e=E("p"),e.textContent="Заказ завершен. Баланс обновится через несколько минут.",I(e,"class"," text-gray-700")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Xn(t){let e,n=1!=t[16].payed&&Vn(t);return{c(){n&&n.c(),e=T()},m(t,r){n&&n.m(t,r),w(t,e,r)},p(t,r){1!=t[16].payed?n?n.p(t,r):(n=Vn(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function Jn(t){let e;return{c(){e=E("div"),e.innerHTML='<div class="p-2 ml-20 rounded-lg bg-gray-100 shadow-lg">\n                    Загрузка...\n                </div>',I(e,"slot","loading")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function tr(t){let e;return{c(){e=E("div"),e.innerHTML='<div class="p-2 ml-20 rounded-lg bg-gray-100 shadow-lg">\n                    Невозможно загрузить данные...\n                </div>',I(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function er(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,x;function T(...e){return t[10](t[13],...e)}function A(...e){return t[11](t[13],...e)}function P(...e){return t[12](t[13],...e)}let M=t[14],N=[];for(let e=0;e<M.length;e+=1)N[e]=Xn($n(t,M,e));return{c(){e=E("div"),n=E("div"),r=E("div"),i=E("button"),i.textContent="Выйти на линию",a=S(),s=E("button"),s.textContent="Закончить работу",u=S(),c=E("button"),c.textContent="Отметиться на карте",l=S(),h=E("p"),h.textContent="Текущие заказы:",d=S(),f=E("hr"),p=S(),m=E("div"),g=E("ul");for(let t=0;t<N.length;t+=1)N[t].c();v=S(),y=S(),I(i,"class","p-1 bg-green-500 text-sm text-white rounded shadow"),I(s,"class","p-1 mt-1 bg-red-500 text-sm text-white rounded shadow"),I(c,"class","p-1 mt-1 bg-orange-500 text-sm text-white rounded shadow"),I(r,"class"," text-center"),I(h,"class","mt-3 font-semibold text-center"),I(m,"class"," h-80 overflow-y-auto"),I(n,"class","p-2 bg-gray-100 rounded-lg shadow-lg h-auto w-full"),I(e,"class","taxi-orders-container z-0 fixed ml-12 mr-2")},m(t,o){w(t,e,o),b(e,n),b(n,r),b(r,i),b(r,a),b(r,s),b(r,u),b(r,c),b(n,l),b(n,h),b(n,d),b(n,f),b(n,p),b(n,m),b(m,g);for(let t=0;t<N.length;t+=1)N[t].m(g,null);w(t,v,o),w(t,y,o),x=[C(i,"click",T),C(s,"click",A),C(c,"click",P)]},p(e,n){if(t=e,57400&n){let e;for(M=t[14],e=0;e<M.length;e+=1){const r=$n(t,M,e);N[e]?N[e].p(r,n):(N[e]=Xn(r),N[e].c(),N[e].m(g,null))}for(;e<N.length;e+=1)N[e].d(1);N.length=M.length}},d(t){t&&_(e),k(N,t),t&&_(v),t&&_(y),o(x)}}}function nr(t){let e;const n=new Ye({props:{path:`taxiOrders/region/${t[0]}/city/${t[1]}`,query:ur,$$slots:{default:[er,({data:t,ref:e})=>({14:t,15:e}),({data:t,ref:e})=>(t?16384:0)|(e?32768:0)],fallback:[tr,({data:t,ref:e})=>({14:t,15:e}),({data:t,ref:e})=>(t?16384:0)|(e?32768:0)],loading:[Jn,({data:t,ref:e})=>({14:t,15:e}),({data:t,ref:e})=>(t?16384:0)|(e?32768:0)]},$$scope:{ctx:t}}});return n.$on("data",or),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};3&e&&(r.path=`taxiOrders/region/${t[0]}/city/${t[1]}`),581632&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function rr(t){let e;const n=new me({props:{$$slots:{default:[nr,({user:t})=>({13:t}),({user:t})=>t?8192:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};532483&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function ir(t){let e;const n=new Qt({props:{firebase:Lt,$$slots:{default:[rr]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,[e]){const r={};524291&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function or(){new Audio("./sounds/notification.mp3").play()}function ar(t,e,n){let r=Ht.collection(t).doc(e.id);Ht.runTransaction((function(t){return t.get(r).then((function(e){if(!e.exists)throw"Document does not exist!";let i=e.data().setDriver;return i=n,i==n?(t.update(r,{setDriver:n,active:!1}),i):Promise.reject("Ошибка!")}))})).then((function(t){new Audio("./sounds/sms-alert.mp3").play()})).catch((function(t){console.error(t)}))}function sr(t,e,n){Ht.collection(t).doc(e.id).update({active:!0,setDriver:Lt.firestore.FieldValue.delete()})}const ur=t=>t.orderBy("date").limit(10);function cr(t,e,n){let{latlng:r}=e,{region:i}=e,{city:o}=e;const a=G();function s(t){Ht.collection("taxiDrivers").doc(t).update({location:[r.lat,r.lng]}).then((function(){alert("Вы отмечены на карте! Ожидайте клиентов!")})).catch((function(t){console.error("Error updating document: ",t)}))}let u=Lt.functions().httpsCallable("completeTaxiOrder");function c(t,e,n,r){u({orderRef:t,orderID:e,clientUID:n,price:r}).then((function(t){console.log("completeTaxiOrder",t)})).catch((function(t){console.log(t.code,t.message,t.details)}))}return t.$set=t=>{"latlng"in t&&n(6,r=t.latlng),"region"in t&&n(0,i=t.region),"city"in t&&n(1,o=t.city)},[i,o,s,function(t,e){a("lookOrderPlace",{location:e.location})},function(t,e,n){a("driverArrived",{order:e,ref:t})},function(t,e,n){let r=Ht.collection(t).doc(e.id);"Автокарта"===e.paymentMethod?(r.update({completed:!0}),c(t,e.id,e.clientUID,e.price)):r.update({completed:!0,payed:!0})},r,a,u,c,t=>{return e=t.uid,void Ht.collection("taxiDrivers").doc(e).update({online:!0}).then((function(){alert("Вы на линии. Удачи!")})).catch((function(t){console.error("Error updating document: ",t)}));var e},t=>{return e=t.uid,void Ht.collection("taxiDrivers").doc(e).update({online:!1}).then((function(){alert("Работа завершена! Спасибо!")})).catch((function(t){console.error("Error updating document: ",t)}));var e},t=>s(t.uid)]}class lr extends wt{constructor(t){super(),bt(this,t,cr,ir,s,{latlng:6,region:0,city:1})}}function hr(t,e,n){const r=t.slice();return r[32]=e[n],r}function dr(t){let e;return{c(){e=E("div"),e.innerHTML='<p class="text-center italic">\n                            Заказов нет\n                        </p>'},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function fr(t){let e,n,r,i,o,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,C,A,M,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y=t[32].address+"",X=t[32].routes+"",J=t[32].desc+"",tt=t[32].price+"",et=t[32].paymentMethod+"",nt=t[32].setDriver&&1!=t[32].onway&&pr(t),rt=t[32].driverArrived&&1!=t[32].onway&&gr(),it=t[32].driverArrived&&1!=t[32].accepted&&vr(t),ot=t[32].accepted&&1!=t[32].onway&&yr(t),at=1!=t[32].driverArrived&&br(t),st=t[32].completed&&null==t[32].rating&&wr(t);return{c(){e=E("div"),n=E("div"),nt&&nt.c(),r=S(),rt&&rt.c(),i=S(),it&&it.c(),o=S(),ot&&ot.c(),a=S(),s=E("div"),u=E("p"),c=E("span"),c.textContent="Откуда:",l=S(),h=x(Y),d=S(),f=E("p"),p=E("span"),p.textContent="Куда:",m=S(),g=x(X),v=S(),y=E("p"),k=E("span"),k.textContent="Примечание:",T=S(),C=x(J),A=S(),M=E("p"),N=E("span"),L=x("Цена:  "),D=x(tt),R=x(" руб."),O=S(),B=E("p"),U=E("span"),F=x("Способ оплаты:  "),j=x(et),q=S(),$=E("div"),at&&at.c(),V=S(),z=E("hr"),H=S(),G=E("div"),st&&st.c(),W=S(),K=E("hr"),Z=S(),I(c,"class","font-semibold"),I(p,"class","font-semibold"),I(k,"class","font-semibold"),I(N,"class","font-semibold text-orange-600"),I(U,"class","font-semibold text-green-500"),I(s,"class","mt-2"),I(n,"class","mt-2 text-sm"),I($,"class","mt-2 mb-2 text-center"),I(G,"class","my-2 text-center")},m(t,_){w(t,e,_),b(e,n),nt&&nt.m(n,null),b(n,r),rt&&rt.m(n,null),b(n,i),it&&it.m(n,null),b(n,o),ot&&ot.m(n,null),b(n,a),b(n,s),b(s,u),b(u,c),b(u,l),b(u,h),b(s,d),b(s,f),b(f,p),b(f,m),b(f,g),b(s,v),b(s,y),b(y,k),b(y,T),b(y,C),b(s,A),b(s,M),b(M,N),b(N,L),b(N,D),b(N,R),b(s,O),b(s,B),b(B,U),b(U,F),b(U,j),b(e,q),b(e,$),at&&at.m($,null),b(e,V),b(e,z),b(e,H),b(e,G),st&&st.m(G,null),b(G,W),b(G,K),b(e,Z),Q=!0},p(t,e){t[32].setDriver&&1!=t[32].onway?nt?(nt.p(t,e),lt(nt,1)):(nt=pr(t),nt.c(),lt(nt,1),nt.m(n,r)):nt&&(ut(),ht(nt,1,1,()=>{nt=null}),ct()),t[32].driverArrived&&1!=t[32].onway?rt?rt.p(t,e):(rt=gr(),rt.c(),rt.m(n,i)):rt&&(rt.d(1),rt=null),t[32].driverArrived&&1!=t[32].accepted?it?it.p(t,e):(it=vr(t),it.c(),it.m(n,o)):it&&(it.d(1),it=null),t[32].accepted&&1!=t[32].onway?ot?ot.p(t,e):(ot=yr(t),ot.c(),ot.m(n,a)):ot&&(ot.d(1),ot=null),(!Q||1073741824&e[0])&&Y!==(Y=t[32].address+"")&&P(h,Y),(!Q||1073741824&e[0])&&X!==(X=t[32].routes+"")&&P(g,X),(!Q||1073741824&e[0])&&J!==(J=t[32].desc+"")&&P(C,J),(!Q||1073741824&e[0])&&tt!==(tt=t[32].price+"")&&P(D,tt),(!Q||1073741824&e[0])&&et!==(et=t[32].paymentMethod+"")&&P(j,et),1!=t[32].driverArrived?at?at.p(t,e):(at=br(t),at.c(),at.m($,null)):at&&(at.d(1),at=null),t[32].completed&&null==t[32].rating?st?st.p(t,e):(st=wr(t),st.c(),st.m(G,W)):st&&(st.d(1),st=null)},i(t){Q||(lt(nt),Q=!0)},o(t){ht(nt),Q=!1},d(t){t&&_(e),nt&&nt.d(),rt&&rt.d(),it&&it.d(),ot&&ot.d(),at&&at.d(),st&&st.d()}}}function pr(t){let e;const n=new Re({props:{path:`taxiDrivers/${t[32].setDriver}`,$$slots:{default:[mr,({data:t})=>({35:t}),({data:t})=>[0,t?16:0]]},$$scope:{ctx:t}}});return n.$on("data",Br),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1073741824&e[0]&&(r.path=`taxiDrivers/${t[32].setDriver}`),1073741824&e[0]|48&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function mr(t){let e,n,r,i,o,s,u,c,l,h,d,f,p,m,g,v,y,k,T,A,M,N,L,D,R,O,B,U,F,j,q=t[35].name+"",$=t[35].lastName+"",V=t[35].carBrand+"",z=t[35].carNumber+"";return{c(){e=E("div"),n=E("p"),r=E("span"),r.textContent="Заказ принял:",i=S(),o=x(q),s=S(),u=x($),c=S(),l=E("p"),h=E("span"),h.textContent="Автомобиль:",d=S(),f=x(V),p=S(),m=x(z),g=S(),v=E("div"),y=E("img"),T=S(),A=E("div"),M=E("div"),N=E("button"),N.innerHTML='<img class="w-8 h-8" src="./icons/place.svg" alt="placeMarker">',L=S(),D=E("div"),R=E("button"),O=E("a"),B=E("img"),I(r,"class"," font-normal text-gray-800"),I(n,"class","font-semibold text-base text-green-700"),I(h,"class"," font-normal text-gray-800"),I(l,"class","font-semibold text-base text-orange-600"),I(y,"class","w-full h-32 object-cover object-none object-center"),y.src!==(k=t[35].driverAuto.frontside)&&I(y,"src",k),I(y,"alt","auto"),I(v,"class","mt-2 content-center"),I(N,"class","order-btn bg-teal-400 svelte-1tziu4s"),I(B,"class","w-8 h-8"),B.src!==(U="./icons/phone.svg")&&I(B,"src","./icons/phone.svg"),I(B,"alt","phone"),I(O,"href",F="tel:"+t[35].phone),I(O,"alt","phone"),I(R,"class","order-btn ml-4 bg-green-400 svelte-1tziu4s"),I(A,"class","mt-2 flex flex-row justify-around")},m(_,k){w(_,e,k),b(e,n),b(n,r),b(n,i),b(n,o),b(n,s),b(n,u),b(e,c),b(e,l),b(l,h),b(l,d),b(l,f),b(l,p),b(l,m),b(e,g),b(e,v),b(v,y),b(e,T),b(e,A),b(A,M),b(M,N),b(A,L),b(A,D),b(D,R),b(R,O),b(O,B),j=C(N,"click",(function(){a(t[6](t[32].setDriver))&&t[6](t[32].setDriver).apply(this,arguments)}))},p(e,n){t=e,16&n[1]&&q!==(q=t[35].name+"")&&P(o,q),16&n[1]&&$!==($=t[35].lastName+"")&&P(u,$),16&n[1]&&V!==(V=t[35].carBrand+"")&&P(f,V),16&n[1]&&z!==(z=t[35].carNumber+"")&&P(m,z),16&n[1]&&y.src!==(k=t[35].driverAuto.frontside)&&I(y,"src",k),16&n[1]&&F!==(F="tel:"+t[35].phone)&&I(O,"href",F)},d(t){t&&_(e),j()}}}function gr(e){let n,r;return{c(){n=E("p"),n.textContent="Водитель подъехал и ждёт вас!",I(n,"class","mt-4 font-semibold text-orange-600 text-lg text-center")},m(t,e){w(t,n,e),r=C(n,"load",Br())},p:t,d(t){t&&_(n),r()}}}function vr(t){let e,n,r;return{c(){e=E("p"),n=E("button"),n.textContent="Выхожу",I(n,"class","btn-orange"),I(e,"class","text-center")},m(i,o){w(i,e,o),b(e,n),r=C(n,"click",(function(){a(t[7](t[31].path,t[32]))&&t[7](t[31].path,t[32]).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),r()}}}function yr(t){let e,n,r;function i(...e){return t[16](t[32],...e)}return{c(){e=E("p"),n=E("button"),n.textContent="Поехали",I(n,"class","btn-green"),I(e,"class","text-center")},m(t,o){w(t,e,o),b(e,n),r=C(n,"click",i)},p(e,n){t=e},d(t){t&&_(e),r()}}}function br(t){let e,n;return{c(){e=E("button"),e.textContent="Отменить заказ",I(e,"class","px-2 text-white bg-red-600 shadow-lg")},m(r,i){w(r,e,i),n=C(e,"click",(function(){a(t[5](t[31].path,t[32]))&&t[5](t[31].path,t[32]).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),n()}}}function wr(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g;function v(t,e){return t[3]>=1?kr:_r}let y=v(t),k=y(t);function x(t,e){return t[3]>=2?xr:Er}let T=x(t),A=T(t);function P(t,e){return t[3]>=3?Tr:Sr}let N=P(t),L=N(t);function D(t,e){return t[3]>=4?Ir:Cr}let R=D(t),O=R(t);function B(t,e){return 5==t[3]?Pr:Ar}let U=B(t),F=U(t);function j(...e){return t[28](t[31],t[32],...e)}return{c(){e=E("p"),e.textContent="Оцените поездку:",n=S(),r=E("div"),i=E("div"),k.c(),a=S(),A.c(),s=S(),L.c(),u=S(),O.c(),c=S(),F.c(),l=S(),h=E("div"),d=E("input"),f=S(),p=E("div"),m=E("button"),m.textContent="Отправить",I(e,"class"," font-semibold text-center text-lg"),I(i,"class","star-container svelte-1tziu4s"),I(d,"type","text"),I(d,"placeholder","Ваш отзыв"),I(d,"class","border rounded-lg"),I(h,"class","mt-1"),I(m,"class","btn-orange"),I(p,"class","mt-2"),I(r,"class","rating-container svelte-1tziu4s")},m(o,v){w(o,e,v),w(o,n,v),w(o,r,v),b(r,i),k.m(i,null),b(i,a),A.m(i,null),b(i,s),L.m(i,null),b(i,u),O.m(i,null),b(i,c),F.m(i,null),b(r,l),b(r,h),b(h,d),M(d,t[2]),b(r,f),b(r,p),b(p,m),g=[C(d,"input",t[27]),C(m,"click",j)]},p(e,n){y===(y=v(t=e))&&k?k.p(t,n):(k.d(1),k=y(t),k&&(k.c(),k.m(i,a))),T===(T=x(t))&&A?A.p(t,n):(A.d(1),A=T(t),A&&(A.c(),A.m(i,s))),N===(N=P(t))&&L?L.p(t,n):(L.d(1),L=N(t),L&&(L.c(),L.m(i,u))),R===(R=D(t))&&O?O.p(t,n):(O.d(1),O=R(t),O&&(O.c(),O.m(i,c))),U===(U=B(t))&&F?F.p(t,n):(F.d(1),F=U(t),F&&(F.c(),F.m(i,null))),4&n[0]&&d.value!==t[2]&&M(d,t[2])},d(t){t&&_(e),t&&_(n),t&&_(r),k.d(),A.d(),L.d(),O.d(),F.d(),o(g)}}}function _r(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[18])},p:t,d(t){t&&_(n),i()}}}function kr(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[17])},p:t,d(t){t&&_(n),i()}}}function Er(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[20])},p:t,d(t){t&&_(n),i()}}}function xr(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[19])},p:t,d(t){t&&_(n),i()}}}function Sr(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[22])},p:t,d(t){t&&_(n),i()}}}function Tr(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[21])},p:t,d(t){t&&_(n),i()}}}function Cr(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[24])},p:t,d(t){t&&_(n),i()}}}function Ir(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[23])},p:t,d(t){t&&_(n),i()}}}function Ar(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[26])},p:t,d(t){t&&_(n),i()}}}function Pr(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1tziu4s")},m(t,r){w(t,n,r),i=C(n,"click",e[25])},p:t,d(t){t&&_(n),i()}}}function Mr(t){let e,n,r=!t[32].payed&&fr(t);return{c(){r&&r.c(),e=T()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,n){t[32].payed?r&&(ut(),ht(r,1,1,()=>{r=null}),ct()):r?(r.p(t,n),lt(r,1)):(r=fr(t),r.c(),lt(r,1),r.m(e.parentNode,e))},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function Nr(t){let e;return{c(){e=E("div"),e.textContent="Невозможно загрузить данные...",I(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Lr(t){let e,n,r,i,o,a,s,u,c,l,h,d,f,p,m,g=0==t[30].length&&dr(),v=t[30],y=[];for(let e=0;e<v.length;e+=1)y[e]=Mr(hr(t,v,e));const T=t=>ht(y[t],1,1,()=>{y[t]=null});return{c(){e=E("div"),n=E("div"),r=E("p"),i=x("Текущие заказы: \r\n\r\n                        "),o=E("span"),a=E("img"),u=S(),c=E("hr"),l=S(),g&&g.c(),h=S(),d=E("div");for(let t=0;t<y.length;t+=1)y[t].c();f=S(),a.src!==(s="./icons/close.svg")&&I(a,"src","./icons/close.svg"),I(a,"alt","x"),I(a,"class","cursor-pointer"),I(o,"class"," float-right"),I(r,"class","font-semibold text-center"),I(e,"class","w-full")},m(s,v){w(s,e,v),b(e,n),b(n,r),b(r,i),b(r,o),b(o,a),b(n,u),b(n,c),b(e,l),g&&g.m(e,null),b(e,h),b(e,d);for(let t=0;t<y.length;t+=1)y[t].m(d,null);w(s,f,v),p=!0,m=C(a,"click",t[15])},p(t,n){if(0==t[30].length?g||(g=dr(),g.c(),g.m(e,h)):g&&(g.d(1),g=null),1073742316&n[0]|17&n[1]){let e;for(v=t[30],e=0;e<v.length;e+=1){const r=hr(t,v,e);y[e]?(y[e].p(r,n),lt(y[e],1)):(y[e]=Mr(r),y[e].c(),lt(y[e],1),y[e].m(d,null))}for(ut(),e=v.length;e<y.length;e+=1)T(e);ct()}},i(t){if(!p){for(let t=0;t<v.length;t+=1)lt(y[t]);p=!0}},o(t){y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)ht(y[t]);p=!1},d(t){t&&_(e),g&&g.d(),k(y,t),t&&_(f),m()}}}function Dr(t){let e;const n=new Ye({props:{path:`taxiOrders/region/${t[0]}/city/${t[1]}`,query:function(...e){return t[14](t[29],...e)},$$slots:{default:[Lr,({data:t,ref:e})=>({30:t,31:e}),({data:t,ref:e})=>[t?1073741824:0,e?1:0]],fallback:[Nr,({data:t,ref:e})=>({30:t,31:e}),({data:t,ref:e})=>[t?1073741824:0,e?1:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(e,r){t=e;const i={};3&r[0]&&(i.path=`taxiOrders/region/${t[0]}/city/${t[1]}`),1073741836&r[0]|33&r[1]&&(i.$$scope={dirty:r,ctx:t}),n.$set(i)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Rr(t){let e;const n=new me({props:{$$slots:{default:[Dr,({user:t})=>({29:t}),({user:t})=>[t?536870912:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};15&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Or(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[Rr]},$$scope:{ctx:t}}});return{c(){e=E("div"),mt(r.$$.fragment),I(e,"class","p-2 w-full z-0 bg-white")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};15&e[0]|32&e[1]&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function Br(){new Audio("./sounds/car_horn_beep_x3_short.mp3").play()}function Ur(t,e,n){let r,i,o,{region:a}=e,{city:s}=e;Lt.auth().onAuthStateChanged((function(t){t?r=t:console.log("no user login")}));const u=G();function c(t,e){setTimeout((function n(){Ht.collection(t).doc(e.id).get().then((function(r){r.data().onway||(u("checkOnWay",{ref:t,order:e}),setTimeout(n,5e3))}))}),5e3)}function l(t,e,n){Ht.collection(e).doc(n.id).update({rating:t}).then((function(){Ht.collection(`taxiDrivers/${n.setDriver}/ratings/`).add({date:Lt.firestore.FieldValue.serverTimestamp(),rating:t,review:i}).then((function(){})).catch((function(t){console.error("Error updating document: ",t)}))})).catch((function(t){console.error("Error updating document: ",t)}))}return t.$set=t=>{"region"in t&&n(0,a=t.region),"city"in t&&n(1,s=t.city)},[a,s,i,o,u,function(t,e){Ht.collection(t).doc(e.id).delete().then((function(){u("alert",{message:"Заказ отменен!"})})).catch((function(t){console.error("Error removing document: ",t)}))},function(t){Ht.collection("taxiDrivers").doc(t).get({source:"server"}).then((function(t){let e=t.data().location;u("findDriverLocation",{location:e}),u("close")})).catch((function(t){console.log("Error getting document:",t)}))},function(t,e){Ht.collection(t).doc(e.id).update({accepted:!0}).then((function(){c(t,e),u("alert",{message:"Водитель оповещён."})})).catch((function(t){console.error("Error updating document: ",t)}))},l,r,void 0,t=>t.where("clientUID","==",r.uid).where("active","==",!0),t=>t.where("clientUID","==",r.uid).where("completed","==",!0),c,(t,e)=>e.where("clientUID","==",t.uid),()=>u("close"),t=>t.ref.update({onway:!0}),()=>n(3,o=1),()=>n(3,o=1),()=>n(3,o=2),()=>n(3,o=2),()=>n(3,o=3),()=>n(3,o=3),()=>n(3,o=4),()=>n(3,o=4),()=>n(3,o=5),()=>n(3,o=5),function(){i=this.value,n(2,i)},(t,e)=>l(o,t.path,e)]}class Fr extends wt{constructor(t){super(),bt(this,t,Ur,Or,s,{region:0,city:1},[-1,-1])}}function jr(e){let n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,A,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,dt,ft,pt,mt,gt,vt,yt,bt,wt,_t,kt,Et,xt=e[0].address+"",St=e[0].desc+"",Tt=e[0].price+"";return{c(){n=E("div"),r=E("p"),r.textContent="Скорректируйте адрес и укажите цену",i=S(),a=E("div"),s=E("label"),s.textContent="Детское кресло:",u=S(),c=E("input"),l=S(),h=E("div"),d=E("label"),d.textContent="Номер мобильного:",f=S(),p=E("input"),m=S(),g=E("div"),v=E("label"),v.textContent="Примечание:",y=S(),k=E("input"),T=S(),A=E("div"),L=E("label"),L.textContent="Пункт назначения:",D=S(),R=E("input"),O=S(),B=E("div"),U=E("label"),U.textContent="Цена в рублях:",F=S(),j=E("input"),q=S(),$=E("div"),V=E("label"),V.textContent="Способ оплаты:",z=S(),H=E("select"),G=E("option"),W=E("option"),W.textContent="Наличные",K=E("option"),K.textContent="Автокарта",Z=E("option"),Z.textContent="Сбербанк-онлайн",Q=E("option"),Q.textContent="Киви-кошелёк",Y=S(),X=E("div"),tt=E("button"),tt.textContent="Отмена",et=S(),nt=E("button"),nt.textContent="Оформить заказ",rt=S(),it=E("div"),ot=E("p"),at=E("span"),at.textContent="Текущий адрес:",st=S(),ut=E("span"),ct=x(xt),lt=S(),ht=E("p"),dt=E("span"),dt.textContent="Примечание:",ft=S(),pt=E("span"),mt=x(St),gt=S(),vt=E("p"),yt=E("span"),yt.textContent="Цена:",bt=S(),wt=E("span"),_t=x(Tt),kt=x(" руб."),I(r,"class","my-1 text-center font-semibold text-gray-900"),I(c,"type","checkbox"),I(a,"class","mt-3"),I(p,"type","text"),I(p,"placeholder","+71234567890"),I(p,"class","p-1 bg-gray-200 rounded"),I(h,"class","mt-3"),I(k,"type","text"),I(k,"class","p-1 bg-gray-200 rounded"),I(g,"class","mt-2"),I(R,"type","text"),I(R,"class","p-1 bg-gray-200 rounded"),I(A,"class","mt-2"),I(j,"type","text"),I(j,"class","p-1 bg-gray-200 rounded"),I(B,"class","mt-2"),G.__value="false",G.value=G.__value,W.__value="Наличные",W.value=W.__value,K.__value="Автокарта",K.value=K.__value,Z.__value="Сбербанк-онлайн",Z.value=Z.__value,Q.__value="Киви-кошелёк",Q.value=Q.__value,I(H,"class","p-1 bg-white border rounded-lg"),void 0===e[0].paymentMethod&&J(()=>e[16].call(H)),I($,"class","mt-2"),I(tt,"class","btn-gray"),I(nt,"class","btn-orange"),I(X,"class","mt-4"),I(at,"class"," font-semibold"),I(dt,"class"," font-semibold"),I(yt,"class"," font-semibold"),I(it,"class","mt-4 text-sm"),I(n,"class","p-2 z-0 w-full bg-white rounded shadow-lg")},m(t,o){w(t,n,o),b(n,r),b(n,i),b(n,a),b(a,s),b(a,u),b(a,c),c.checked=e[0].childSeat,b(n,l),b(n,h),b(h,d),b(h,f),b(h,p),M(p,e[0].phone),b(n,m),b(n,g),b(g,v),b(g,y),b(g,k),M(k,e[0].desc),b(n,T),b(n,A),b(A,L),b(A,D),b(A,R),M(R,e[0].routes),b(n,O),b(n,B),b(B,U),b(B,F),b(B,j),M(j,e[0].price),b(n,q),b(n,$),b($,V),b($,z),b($,H),b(H,G),b(H,W),b(H,K),b(H,Z),b(H,Q),N(H,e[0].paymentMethod),b(n,Y),b(n,X),b(X,tt),b(X,et),b(X,nt),b(n,rt),b(n,it),b(it,ot),b(ot,at),b(ot,st),b(ot,ut),b(ut,ct),b(it,lt),b(it,ht),b(ht,dt),b(ht,ft),b(ht,pt),b(pt,mt),b(it,gt),b(it,vt),b(vt,yt),b(vt,bt),b(vt,wt),b(wt,_t),b(wt,kt),Et=[C(c,"change",e[11]),C(p,"input",e[12]),C(k,"input",e[13]),C(R,"input",e[14]),C(j,"input",e[15]),C(H,"change",e[16]),C(tt,"click",e[1]),C(nt,"click",e[2])]},p(t,[e]){1&e&&(c.checked=t[0].childSeat),1&e&&p.value!==t[0].phone&&M(p,t[0].phone),1&e&&k.value!==t[0].desc&&M(k,t[0].desc),1&e&&R.value!==t[0].routes&&M(R,t[0].routes),1&e&&j.value!==t[0].price&&M(j,t[0].price),1&e&&N(H,t[0].paymentMethod),1&e&&xt!==(xt=t[0].address+"")&&P(ct,xt),1&e&&St!==(St=t[0].desc+"")&&P(mt,St),1&e&&Tt!==(Tt=t[0].price+"")&&P(_t,Tt)},i:t,o:t,d(t){t&&_(n),o(Et)}}}function qr(t,e,n){let{address:r}=e,{clientUID:i}=e,{clientName:o}=e,{LatLng:a}=e,{region:s}=e,{city:u}=e,c={date:Lt.firestore.FieldValue.serverTimestamp(),address:r,location:[a.lat,a.lng],childSeat:!1,phone:"+7",desc:" ",clientUID:i,clientName:o,routes:" ",price:0,paymentMethod:void 0,active:!0};const l=G();return t.$set=t=>{"address"in t&&n(3,r=t.address),"clientUID"in t&&n(4,i=t.clientUID),"clientName"in t&&n(5,o=t.clientName),"LatLng"in t&&n(6,a=t.LatLng),"region"in t&&n(7,s=t.region),"city"in t&&n(8,u=t.city)},[c,function(){l("closeDialog")},function(){if("Автокарта"===c.paymentMethod){let e;Ht.collection("users").doc(i).get().then((function(n){const r=n.data();e=r.balance,e-c.price<0?(l("alert",{message:"Недостаточно средств."}),l("closeDialog")):t()})).catch((function(t){l("alert",{message:`Ошибка: ${t}`}),l("closeDialog")}))}else t();function t(){Ht.collection(`taxiOrders/region/${s}/city/${u}`).add(c).then((function(t){l("alert",{message:"Ваш заказ оформлен!"}),l("closeDialog")})).catch((function(t){console.error("Error adding document: ",t)}))}},r,i,o,a,s,u,void 0,l,function(){c.childSeat=this.checked,n(0,c)},function(){c.phone=this.value,n(0,c)},function(){c.desc=this.value,n(0,c)},function(){c.routes=this.value,n(0,c)},function(){c.price=this.value,n(0,c)},function(){c.paymentMethod=D(this),n(0,c)}]}class $r extends wt{constructor(t){super(),bt(this,t,qr,jr,s,{address:3,clientUID:4,clientName:5,LatLng:6,region:7,city:8})}}function Vr(t,e,n){const r=t.slice();return r[15]=e[n],r}function zr(t){let e;return{c(){e=x(t[1])},m(t,n){w(t,e,n)},p(t,n){2&n&&P(e,t[1])},d(t){t&&_(e)}}}function Hr(t){let e,n,r,i,o,a,s,u,c,l,h,d,f=t[15].name+"",p=t[15].date.toDate().toLocaleString("ru",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})+"";function m(...e){return t[9](t[15],...e)}function g(t,e){return t[15].from==t[12].uid?Kr:t[15].to==t[12].displayName?Wr:Gr}let v=g(t),y=v(t);return{c(){e=E("li"),n=E("div"),r=E("p"),i=E("span"),o=x(f),a=x(":"),s=S(),u=E("span"),c=x(p),l=S(),y.c(),h=S(),I(i,"class","font-semibold cursor-pointer"),I(u,"class","text-sm float-right"),I(r,"class","text-gray-700"),I(n,"class","mt-2")},m(t,f){w(t,e,f),b(e,n),b(n,r),b(r,i),b(i,o),b(i,a),b(r,s),b(r,u),b(u,c),b(n,l),y.m(n,null),b(e,h),d=C(i,"click",m)},p(e,r){t=e,8192&r&&f!==(f=t[15].name+"")&&P(o,f),8192&r&&p!==(p=t[15].date.toDate().toLocaleString("ru",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})+"")&&P(c,p),v===(v=g(t))&&y?y.p(t,r):(y.d(1),y=v(t),y&&(y.c(),y.m(n,null)))},d(t){t&&_(e),y.d(),d()}}}function Gr(t){let e,n,r=t[15].text+"";return{c(){e=E("p"),n=x(r),I(e,"class","message def svelte-w3jngd")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[15].text+"")&&P(n,r)},d(t){t&&_(e)}}}function Wr(t){let e,n,r=t[15].text+"";return{c(){e=E("p"),n=x(r),I(e,"class","message to-me svelte-w3jngd")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[15].text+"")&&P(n,r)},d(t){t&&_(e)}}}function Kr(t){let e,n,r=t[15].text+"";return{c(){e=E("p"),n=x(r),I(e,"class","message my svelte-w3jngd")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[15].text+"")&&P(n,r)},d(t){t&&_(e)}}}function Zr(t){let e,n=null!=t[15].date?Hr(t):void 0;return{c(){n&&n.c(),e=T()},m(t,r){n&&n.m(t,r),w(t,e,r)},p(t,r){null!=t[15].date?n?n.p(t,r):(n=Hr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function Qr(t){let e,n=t[13],r=[];for(let e=0;e<n.length;e+=1)r[e]=Zr(Vr(t,n,e));return{c(){e=E("ul");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){w(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(12304&i){let o;for(n=t[13],o=0;o<n.length;o+=1){const a=Vr(t,n,o);r[o]?r[o].p(a,i):(r[o]=Zr(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&_(e),k(r,t)}}}function Yr(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v=t[1]!=t[2]&&zr(t);const y=new Ye({props:{path:`chat/region/${t[0]}/city/${t[2]}`,query:ti,$$slots:{default:[Qr,({data:t,ref:e})=>({13:t,14:e}),({data:t,ref:e})=>(t?8192:0)|(e?16384:0)]},$$scope:{ctx:t}}});function k(...e){return t[11](t[12],...e)}return{c(){e=E("div"),n=E("div"),r=E("div"),i=x(t[2]),a=S(),v&&v.c(),s=S(),mt(y.$$.fragment),u=S(),c=E("hr"),l=S(),h=E("div"),d=E("input"),f=S(),p=E("button"),p.textContent="Отправить",I(r,"class"," p-1 text-sm"),I(n,"id","messages"),I(n,"class","p-2 bg-gray-200 rounded-lg shadow-lg h-80 w-full overflow-y-auto"),I(d,"class","p-1 bg-white"),I(d,"type","text"),I(h,"class","w-full"),I(e,"class","taxi-orders-container z-0 fixed ml-12 mr-2")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(r,i),b(r,a),v&&v.m(r,null),b(n,s),gt(y,n,null),b(n,u),b(n,c),b(e,l),b(e,h),b(h,d),M(d,t[3].text),b(h,f),b(h,p),m=!0,g=[C(d,"input",t[10]),C(p,"click",k)]},p(e,n){t=e,(!m||4&n)&&P(i,t[2]),t[1]!=t[2]?v?v.p(t,n):(v=zr(t),v.c(),v.m(r,null)):v&&(v.d(1),v=null);const o={};5&n&&(o.path=`chat/region/${t[0]}/city/${t[2]}`),274448&n&&(o.$$scope={dirty:n,ctx:t}),y.$set(o),8&n&&d.value!==t[3].text&&M(d,t[3].text)},i(t){m||(lt(y.$$.fragment,t),m=!0)},o(t){ht(y.$$.fragment,t),m=!1},d(t){t&&_(e),v&&v.d(),vt(y),o(g)}}}function Xr(t){let e;const n=new me({props:{$$slots:{default:[Yr,({user:t})=>({12:t}),({user:t})=>t?4096:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};266271&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Jr(t){let e;const n=new Qt({props:{firebase:Lt,$$slots:{default:[Xr]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,[e]){const r={};262175&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}const ti=t=>t.orderBy("date","desc").limit(30);function ei(t,e,n){let{region:r}=e,{district:i}=e,{city:o}=e;const a=G();let s,u={date:Lt.firestore.FieldValue.serverTimestamp(),from:null,name:null,to:"all",text:" "},c="all",l=(new Date).getTime()-1e4;function h(t){s=(new Date).getTime(),s-l>1e4?(n(3,u.from=t.uid,u),n(3,u.name=t.displayName,u),n(3,u.to=c,u),Ht.collection(`chat/region/${r}/city/${o}`).add(u).then((function(t){l=(new Date).getTime(),n(4,c="all")})).catch((function(t){console.error("Error adding document: ",t)}))):alert("Действует ограничение, 1 сообщение/10 секунд.")}return t.$set=t=>{"region"in t&&n(0,r=t.region),"district"in t&&n(1,i=t.district),"city"in t&&n(2,o=t.city)},[r,i,o,u,c,h,s,l,a,t=>n(4,c=t.name),function(){u.text=this.value,n(3,u)},t=>h(t)]}class ni extends wt{constructor(t){super(),bt(this,t,ei,Jr,s,{region:0,district:1,city:2})}}function ri(t,e,n){const r=t.slice();return r[25]=e[n],r}function ii(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,x,T,A,P,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K;return{c(){e=E("div"),n=E("div"),n.innerHTML='<p class=" text-center text-white font-semibold">\n                                Что случилось?\n                            </p>',r=S(),i=E("div"),a=E("p"),a.textContent="На вас напали",s=S(),u=E("input"),c=S(),l=E("input"),h=S(),d=E("button"),d.textContent="Угроза жизни",f=S(),p=E("p"),p.textContent="При нажатии на кнопку с баланса спишется 1000 руб.",m=S(),g=E("div"),v=E("p"),v.textContent="ДТП или требуется медицинская помощь",y=S(),k=E("input"),x=S(),T=E("input"),A=S(),P=E("button"),P.textContent="Мед. помощь",N=S(),L=E("p"),L.textContent="При нажатии на кнопку с баланса спишется 500 руб.",D=S(),R=E("div"),O=E("p"),O.textContent="Требуется техническая помощь (поломка авто)",B=S(),U=E("input"),F=S(),j=E("input"),q=S(),$=E("button"),$.textContent="Тех. помощь",V=S(),z=E("p"),z.textContent="При нажатии на кнопку с баланса спишется 100 руб.",H=S(),G=E("div"),W=E("button"),W.textContent="Отмена",I(n,"class","header"),I(a,"class","m-2 font-semibold"),I(u,"type","text"),I(u,"class","svelte-6u4x5v"),I(l,"type","text"),I(l,"placeholder","Опишите проблему"),I(l,"class","svelte-6u4x5v"),I(d,"class","m-1 p-1 bg-red-600 text-white"),I(p,"class"," text-sm text-red-600"),I(i,"class","help-block svelte-6u4x5v"),I(v,"class","m-2 font-semibold"),I(k,"type","text"),I(k,"class","svelte-6u4x5v"),I(T,"type","text"),I(T,"placeholder","Опишите проблему"),I(T,"class","svelte-6u4x5v"),I(P,"class","m-1 p-1 bg-red-600 text-white"),I(L,"class"," text-sm text-red-600"),I(g,"class","help-block svelte-6u4x5v"),I(O,"class","m-2 font-semibold"),I(U,"type","text"),I(U,"class","svelte-6u4x5v"),I(j,"type","text"),I(j,"placeholder","Опишите проблему"),I(j,"class","svelte-6u4x5v"),I($,"class","m-1 p-1 bg-gray-800 text-white"),I(z,"class"," text-sm text-red-600"),I(R,"class","help-block svelte-6u4x5v"),I(W,"class","p-1 bg-orange-600 text-white rounded-lg"),I(G,"class","mt-2 text-center")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(i,s),b(i,u),M(u,t[2]),b(i,c),b(i,l),M(l,t[1]),b(i,h),b(i,d),b(i,f),b(i,p),b(e,m),b(e,g),b(g,v),b(g,y),b(g,k),M(k,t[2]),b(g,x),b(g,T),M(T,t[1]),b(g,A),b(g,P),b(g,N),b(g,L),b(e,D),b(e,R),b(R,O),b(R,B),b(R,U),M(U,t[2]),b(R,F),b(R,j),M(j,t[1]),b(R,q),b(R,$),b(R,V),b(R,z),b(e,H),b(e,G),b(G,W),K=[C(u,"input",t[9]),C(l,"input",t[10]),C(d,"click",t[11]),C(d,"click",t[12]),C(k,"input",t[13]),C(T,"input",t[14]),C(P,"click",t[15]),C(P,"click",t[16]),C(U,"input",t[17]),C(j,"input",t[18]),C($,"click",t[19]),C($,"click",t[20]),C(W,"click",t[21])]},p(t,e){4&e&&u.value!==t[2]&&M(u,t[2]),2&e&&l.value!==t[1]&&M(l,t[1]),4&e&&k.value!==t[2]&&M(k,t[2]),2&e&&T.value!==t[1]&&M(T,t[1]),4&e&&U.value!==t[2]&&M(U,t[2]),2&e&&j.value!==t[1]&&M(j,t[1])},d(t){t&&_(e),o(K)}}}function oi(t){let e,n=t[23],r=[];for(let e=0;e<n.length;e+=1)r[e]=ai(ri(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=T()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(8388608&i){let o;for(n=t[23],o=0;o<n.length;o+=1){const a=ri(t,n,o);r[o]?r[o].p(a,i):(r[o]=ai(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){k(r,t),t&&_(e)}}}function ai(t){let e,n,r,i,o,a,s,u,c,l=t[25].message+"";function h(...e){return t[8](t[25],...e)}return{c(){e=E("div"),n=E("div"),r=E("p"),i=x(l),o=S(),a=E("div"),s=E("button"),s.textContent="Отменить",u=S(),I(a,"class","text-center"),I(e,"class","p-2 bg-white rounded-lg")},m(t,l){w(t,e,l),b(e,n),b(n,r),b(r,i),b(e,o),b(e,a),b(a,s),b(e,u),c=C(s,"click",h)},p(e,n){t=e,8388608&n&&l!==(l=t[25].message+"")&&P(i,l)},d(t){t&&_(e),c()}}}function si(t){let e;function n(t,e){return t[23].length>=1?oi:ii}let r=n(t),i=r(t);return{c(){i.c(),e=T()},m(t,n){i.m(t,n),w(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&_(e)}}}function ui(t){let e;const n=new Ye({props:{path:`icons/sos/${t[0]}`,query:function(...e){return t[7](t[22],...e)},$$slots:{default:[si,({data:t,ref:e})=>({23:t,24:e}),({data:t,ref:e})=>(t?8388608:0)|(e?16777216:0)]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(e,r){t=e;const i={};1&r&&(i.path=`icons/sos/${t[0]}`),276824070&r&&(i.$$scope={dirty:r,ctx:t}),n.$set(i)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function ci(t){let e;const n=new me({props:{$$slots:{default:[ui,({user:t})=>({22:t}),({user:t})=>t?4194304:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};268435463&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function li(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[ci]},$$scope:{ctx:t}}});return{c(){e=E("div"),mt(r.$$.fragment),I(e,"class","p-1 w-full bg-gray-900 rounded-lg shadow-lg")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,[e]){const n={};268435463&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function hi(t,e,n){let{region:r}=e,{getUserAccount:i}=e;const o=G();let a="",s=i.phone,u=Lt.functions().httpsCallable("balanceDecrement");function c(t){let e;"life"===t?e=1e3:"medical"===t?e=500:"technical"===t&&(e=100),u({amount:e}).then((function(t){console.log("balanceDecrement",t)})).catch((function(t){console.log(t.code,t.message,t.details)}))}return t.$set=t=>{"region"in t&&n(0,r=t.region),"getUserAccount"in t&&n(5,i=t.getUserAccount)},[r,a,s,o,c,i,u,(t,e)=>e.where("author","==",t.uid),t=>t.ref.delete(),function(){s=this.value,n(2,s)},function(){a=this.value,n(1,a)},()=>o("danger",{message:a,type:"life",phone:s}),()=>c("life"),function(){s=this.value,n(2,s)},function(){a=this.value,n(1,a)},()=>o("danger",{message:a,type:"medical",phone:s}),()=>c("medical"),function(){s=this.value,n(2,s)},function(){a=this.value,n(1,a)},()=>o("danger",{message:a,type:"technical",phone:s}),()=>c("technical"),()=>o("close")]}class di extends wt{constructor(t){super(),bt(this,t,hi,li,s,{region:0,getUserAccount:5})}}function fi(e){let n,r,i,a,s,u,c,l,h,d,f,p,m,g;return{c(){n=E("div"),r=E("div"),r.innerHTML='<p class="text-center font-semibold">\n            Добавить тему для обсуждения:\n        </p>',i=S(),a=E("div"),s=E("input"),u=S(),c=E("div"),l=E("textarea"),h=S(),d=E("div"),f=E("button"),f.textContent="Отмена",p=S(),m=E("button"),m.textContent="Добавить",I(s,"type","text"),I(s,"class","mt-2 border"),I(s,"placeholder","Заголовок"),I(s,"maxlength","50"),I(l,"class","mt-2 p-2 bg-gray-100 border rounded-lg w-full"),I(l,"cols","50"),I(l,"rows","10"),I(l,"placeholder","Ваше сообщение"),I(l,"maxlength","300"),I(f,"class","btn-gray"),I(m,"class","btn-orange"),I(d,"class","text-center"),I(n,"class","p-2 bg-white rounded-lg shadow-lg w-full")},m(t,o){w(t,n,o),b(n,r),b(n,i),b(n,a),b(a,s),M(s,e[0]),b(n,u),b(n,c),b(c,l),M(l,e[1]),b(n,h),b(n,d),b(d,f),b(d,p),b(d,m),g=[C(s,"input",e[10]),C(l,"input",e[11]),C(f,"click",e[12]),C(m,"click",e[13])]},p(t,[e]){1&e&&s.value!==t[0]&&M(s,t[0]),2&e&&M(l,t[1])},i:t,o:t,d(t){t&&_(n),o(g)}}}function pi(t,e,n){let{user:r}=e,{latlng:i}=e,{region:o}=e,{city:a}=e;const s=G();let u,c="",l="";function h(){Ht.collection("topics").where("owner","==",r.uid).get().then((function(t){t.empty?(u=!1,console.log("hasTopic",u)):(u=!0,console.log("hasTopic",u))})).catch((function(t){console.log("Error getting documents: ",t)}))}function d(){!1===u?Ht.collection("topics").add({date:Lt.firestore.FieldValue.serverTimestamp(),region:o,city:a,header:c,text:l,location:[i.lat,i.lng],owner:r.uid,username:r.displayName}).then((function(t){s("alert",{message:"Тема для обсуждения добавлена. Обновите карту."}),s("close")})).catch((function(t){console.error("Error adding document: ",t)})):s("alert",{message:"У вас уже есть открытая тема. Одновременно можно открыть только одну тему."})}h();return t.$set=t=>{"user"in t&&n(4,r=t.user),"latlng"in t&&n(5,i=t.latlng),"region"in t&&n(6,o=t.region),"city"in t&&n(7,a=t.city)},[c,l,s,d,r,i,o,a,u,h,function(){c=this.value,n(0,c)},function(){l=this.value,n(1,l)},()=>s("close"),()=>d()]}class mi extends wt{constructor(t){super(),bt(this,t,pi,fi,s,{user:4,latlng:5,region:6,city:7})}}function gi(e){let n,r,i,a,s,u,c,l,h;return{c(){n=E("div"),r=E("button"),r.innerHTML='<img src="./icons/police-car.png" alt="police" class="svelte-1rxkpub">',i=S(),a=E("div"),s=E("button"),s.innerHTML='<img src="./icons/speed-camera.png" alt="camera" class="svelte-1rxkpub">',u=S(),c=E("div"),l=E("button"),l.innerHTML='<img src="./icons/road-camera.png" alt="rcamera" class="svelte-1rxkpub">',I(r,"class","svelte-1rxkpub"),I(n,"class","fixed -mt-32"),I(s,"class","svelte-1rxkpub"),I(a,"class","fixed -ml-16 -mt-32"),I(l,"class","svelte-1rxkpub"),I(c,"class","fixed ml-16 -mt-32")},m(t,o){w(t,n,o),b(n,r),w(t,i,o),w(t,a,o),b(a,s),w(t,u,o),w(t,c,o),b(c,l),h=[C(r,"click",e[6]),C(r,"click",e[7]),C(s,"click",e[8]),C(s,"click",e[9]),C(l,"click",e[10]),C(l,"click",e[11])]},p:t,d(t){t&&_(n),t&&_(i),t&&_(a),t&&_(u),t&&_(c),o(h)}}}function vi(e){let n,r,i,a,s,u,c,l,h;return{c(){n=E("div"),r=E("button"),r.innerHTML='<img src="./icons/road-construction.png" alt="rc" class="svelte-1rxkpub">',i=S(),a=E("div"),s=E("button"),s.innerHTML='<img src="./icons/road-closed.png" alt="closed" class="svelte-1rxkpub">',u=S(),c=E("div"),l=E("button"),l.innerHTML='<img src="./icons/car-crash.png" alt="dtp" class="svelte-1rxkpub">',I(r,"class","svelte-1rxkpub"),I(n,"class","fixed ml-16"),I(s,"class","svelte-1rxkpub"),I(a,"class","fixed ml-16 -mt-16"),I(l,"class","svelte-1rxkpub"),I(c,"class","fixed ml-16 -mt-32")},m(t,o){w(t,n,o),b(n,r),w(t,i,o),w(t,a,o),b(a,s),w(t,u,o),w(t,c,o),b(c,l),h=[C(r,"click",e[13]),C(r,"click",e[14]),C(s,"click",e[15]),C(s,"click",e[16]),C(l,"click",e[17]),C(l,"click",e[18])]},p:t,d(t){t&&_(n),t&&_(i),t&&_(a),t&&_(u),t&&_(c),o(h)}}}function yi(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,x,T,A,P,M,N,L,D,R=t[1]&&gi(t),O=t[0]&&vi(t);return{c(){e=E("div"),n=E("div"),r=E("button"),r.innerHTML='<img src="./icons/button-cancel.png" alt="close" class="svelte-1rxkpub">',i=S(),a=E("div"),s=E("button"),s.innerHTML='<img src="./icons/police-car.png" alt="police" class="svelte-1rxkpub">',u=S(),R&&R.c(),c=S(),l=E("div"),h=E("button"),h.innerHTML='<img src="./icons/road-1.png" alt="road" class="svelte-1rxkpub">',d=S(),O&&O.c(),f=S(),p=E("div"),m=E("button"),m.innerHTML='<img src="./icons/chat-3.png" alt="add" class="svelte-1rxkpub">',g=S(),v=E("div"),y=E("button"),y.innerHTML='<img src="./icons/taxi-24.png" alt="taxiCall" class="svelte-1rxkpub">',k=S(),x=E("div"),T=E("button"),T.innerHTML='<img src="./icons/location-info.png" alt="address" class="svelte-1rxkpub">',A=S(),P=E("div"),M=E("button"),M.innerHTML='<img src="./icons/sos-button.png" alt="sos" class="svelte-1rxkpub">',I(r,"class","svelte-1rxkpub"),I(n,"class","close"),I(s,"class","svelte-1rxkpub"),I(a,"class","menu-item svelte-1rxkpub"),I(h,"class","svelte-1rxkpub"),I(l,"class","menu-item svelte-1rxkpub"),I(m,"class","svelte-1rxkpub"),I(p,"class","menu-item svelte-1rxkpub"),I(y,"class","svelte-1rxkpub"),I(v,"class","menu-item svelte-1rxkpub"),I(T,"class","svelte-1rxkpub"),I(x,"class","menu-item svelte-1rxkpub"),I(M,"class","svelte-1rxkpub"),I(P,"class","menu-item svelte-1rxkpub"),I(e,"class","container svelte-1rxkpub")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(e,i),b(e,a),b(a,s),b(a,u),R&&R.m(a,null),b(e,c),b(e,l),b(l,h),b(l,d),O&&O.m(l,null),b(e,f),b(e,p),b(p,m),b(e,g),b(e,v),b(v,y),b(e,k),b(e,x),b(x,T),b(e,A),b(e,P),b(P,M),L=!0,D=[C(r,"click",t[4]),C(s,"click",t[5]),C(h,"click",t[12]),C(m,"click",t[19]),C(m,"click",t[20]),C(y,"click",t[21]),C(y,"click",t[22]),C(T,"click",t[23]),C(T,"click",t[24]),C(M,"click",t[25]),C(M,"click",t[26])]},p(t,[e]){t[1]?R?R.p(t,e):(R=gi(t),R.c(),R.m(a,null)):R&&(R.d(1),R=null),t[0]?O?O.p(t,e):(O=vi(t),O.c(),O.m(l,null)):O&&(O.d(1),O=null)},i(t){L||(J(()=>{N||(N=pt(e,ln,{duration:500,easing:an},!0)),N.run(1)}),L=!0)},o(t){N||(N=pt(e,ln,{duration:500,easing:an},!1)),N.run(0),L=!1},d(t){t&&_(e),R&&R.d(),O&&O.d(),t&&N&&N.end(),o(D)}}}function bi(){let t=document.querySelectorAll(".menu-item");for(var e=0,n=t.length;e<n;e++)t[e].style.left=(50-35*Math.cos(-.5*Math.PI-1/n*2*e*Math.PI)).toFixed(4)+"%",t[e].style.top=(50+35*Math.sin(-.5*Math.PI-1/n*2*e*Math.PI)).toFixed(4)+"%"}function wi(t,e,n){const r=G();let i,o;z(bi);return[i,o,r,function(){r("closeMenu")},()=>r("closeMenu"),()=>n(1,o=!0),()=>r("police"),()=>r("closeMenu"),()=>r("mCamera"),()=>r("closeMenu"),()=>r("sCamera"),()=>r("closeMenu"),()=>n(0,i=!0),()=>r("rConstruction"),()=>r("closeMenu"),()=>r("rClosed"),()=>r("closeMenu"),()=>r("dtp"),()=>r("closeMenu"),()=>r("add"),()=>r("closeMenu"),()=>r("taxiCall"),()=>r("closeMenu"),()=>r("getAddress"),()=>r("closeMenu"),()=>r("sos"),()=>r("closeMenu")]}class _i extends wt{constructor(t){super(),bt(this,t,wi,yi,s,{})}}var ki=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},Ei=Object.prototype.toString;function xi(t){return"[object Array]"===Ei.call(t)}function Si(t){return void 0===t}function Ti(t){return null!==t&&"object"==typeof t}function Ci(t){return"[object Function]"===Ei.call(t)}function Ii(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),xi(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var Ai={isArray:xi,isArrayBuffer:function(t){return"[object ArrayBuffer]"===Ei.call(t)},isBuffer:function(t){return null!==t&&!Si(t)&&null!==t.constructor&&!Si(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:Ti,isUndefined:Si,isDate:function(t){return"[object Date]"===Ei.call(t)},isFile:function(t){return"[object File]"===Ei.call(t)},isBlob:function(t){return"[object Blob]"===Ei.call(t)},isFunction:Ci,isStream:function(t){return Ti(t)&&Ci(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Ii,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)Ii(arguments[r],n);return e},deepMerge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]="object"==typeof n?t({},n):n}for(var r=0,i=arguments.length;r<i;r++)Ii(arguments[r],n);return e},extend:function(t,e,n){return Ii(e,(function(e,r){t[r]=n&&"function"==typeof e?ki(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function Pi(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Mi=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(Ai.isURLSearchParams(e))r=e.toString();else{var i=[];Ai.forEach(e,(function(t,e){null!=t&&(Ai.isArray(t)?e+="[]":t=[t],Ai.forEach(t,(function(t){Ai.isDate(t)?t=t.toISOString():Ai.isObject(t)&&(t=JSON.stringify(t)),i.push(Pi(e)+"="+Pi(t))})))})),r=i.join("&")}if(r){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t};function Ni(){this.handlers=[]}Ni.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},Ni.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Ni.prototype.forEach=function(t){Ai.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var Li=Ni,Di=function(t,e,n){return Ai.forEach(n,(function(n){t=n(t,e)})),t},Ri=function(t){return!(!t||!t.__CANCEL__)},Oi=function(t,e){Ai.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))},Bi=function(t,e,n,r,i){return function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,n,r,i)},Ui=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Fi=Ai.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=Ai.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0},ji=Ai.isStandardBrowserEnv()?{write:function(t,e,n,r,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),Ai.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Ai.isString(r)&&a.push("path="+r),Ai.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},qi=function(t){return new Promise((function(e,n){var r=t.data,i=t.headers;Ai.isFormData(r)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(t.auth){var a=t.auth.username||"",s=t.auth.password||"";i.Authorization="Basic "+btoa(a+":"+s)}var u,c,l=(u=t.baseURL,c=t.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(u,c):c);if(o.open(t.method.toUpperCase(),Mi(l,t.params,t.paramsSerializer),!0),o.timeout=t.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r,i,a,s,u,c="getAllResponseHeaders"in o?(r=o.getAllResponseHeaders(),u={},r?(Ai.forEach(r.split("\n"),(function(t){if(s=t.indexOf(":"),i=Ai.trim(t.substr(0,s)).toLowerCase(),a=Ai.trim(t.substr(s+1)),i){if(u[i]&&Ui.indexOf(i)>=0)return;u[i]="set-cookie"===i?(u[i]?u[i]:[]).concat([a]):u[i]?u[i]+", "+a:a}})),u):u):null,l={data:t.responseType&&"text"!==t.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:c,config:t,request:o};!function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(Bi("Request failed with status code "+n.status,n.config,null,n.request,n))}(e,n,l),o=null}},o.onabort=function(){o&&(n(Bi("Request aborted",t,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(Bi("Network Error",t,null,o)),o=null},o.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(Bi(e,t,"ECONNABORTED",o)),o=null},Ai.isStandardBrowserEnv()){var h=ji,d=(t.withCredentials||Fi(l))&&t.xsrfCookieName?h.read(t.xsrfCookieName):void 0;d&&(i[t.xsrfHeaderName]=d)}if("setRequestHeader"in o&&Ai.forEach(i,(function(t,e){void 0===r&&"content-type"===e.toLowerCase()?delete i[e]:o.setRequestHeader(e,t)})),Ai.isUndefined(t.withCredentials)||(o.withCredentials=!!t.withCredentials),t.responseType)try{o.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&o.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){o&&(o.abort(),n(t),o=null)})),void 0===r&&(r=null),o.send(r)}))},$i={"Content-Type":"application/x-www-form-urlencoded"};function Vi(t,e){!Ai.isUndefined(t)&&Ai.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var zi,Hi={adapter:("undefined"!=typeof XMLHttpRequest?zi=qi:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(zi=qi),zi),transformRequest:[function(t,e){return Oi(e,"Accept"),Oi(e,"Content-Type"),Ai.isFormData(t)||Ai.isArrayBuffer(t)||Ai.isBuffer(t)||Ai.isStream(t)||Ai.isFile(t)||Ai.isBlob(t)?t:Ai.isArrayBufferView(t)?t.buffer:Ai.isURLSearchParams(t)?(Vi(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ai.isObject(t)?(Vi(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};Hi.headers={common:{Accept:"application/json, text/plain, */*"}},Ai.forEach(["delete","get","head"],(function(t){Hi.headers[t]={}})),Ai.forEach(["post","put","patch"],(function(t){Hi.headers[t]=Ai.merge($i)}));var Gi=Hi;function Wi(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Ki=function(t){return Wi(t),t.headers=t.headers||{},t.data=Di(t.data,t.headers,t.transformRequest),t.headers=Ai.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Ai.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||Gi.adapter)(t).then((function(e){return Wi(t),e.data=Di(e.data,e.headers,t.transformResponse),e}),(function(e){return Ri(e)||(Wi(t),e&&e.response&&(e.response.data=Di(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},Zi=function(t,e){e=e||{};var n={},r=["url","method","params","data"],i=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];Ai.forEach(r,(function(t){void 0!==e[t]&&(n[t]=e[t])})),Ai.forEach(i,(function(r){Ai.isObject(e[r])?n[r]=Ai.deepMerge(t[r],e[r]):void 0!==e[r]?n[r]=e[r]:Ai.isObject(t[r])?n[r]=Ai.deepMerge(t[r]):void 0!==t[r]&&(n[r]=t[r])})),Ai.forEach(o,(function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])}));var a=r.concat(i).concat(o),s=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return Ai.forEach(s,(function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])})),n};function Qi(t){this.defaults=t,this.interceptors={request:new Li,response:new Li}}Qi.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=Zi(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[Ki,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},Qi.prototype.getUri=function(t){return t=Zi(this.defaults,t),Mi(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},Ai.forEach(["delete","get","head","options"],(function(t){Qi.prototype[t]=function(e,n){return this.request(Ai.merge(n||{},{method:t,url:e}))}})),Ai.forEach(["post","put","patch"],(function(t){Qi.prototype[t]=function(e,n,r){return this.request(Ai.merge(r||{},{method:t,url:e,data:n}))}}));var Yi=Qi;function Xi(t){this.message=t}Xi.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Xi.prototype.__CANCEL__=!0;var Ji=Xi;function to(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new Ji(t),e(n.reason))}))}to.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},to.source=function(){var t;return{token:new to((function(e){t=e})),cancel:t}};var eo=to;function no(t){var e=new Yi(t),n=ki(Yi.prototype.request,e);return Ai.extend(n,Yi.prototype,e),Ai.extend(n,e),n}var ro=no(Gi);ro.Axios=Yi,ro.create=function(t){return no(Zi(ro.defaults,t))},ro.Cancel=Ji,ro.CancelToken=eo,ro.isCancel=Ri,ro.all=function(t){return Promise.all(t)},ro.spread=function(t){return function(e){return t.apply(null,e)}};var io=ro,oo=ro;io.default=oo;var ao=io,so=St((function(t){!function(){var e=window.CustomEvent;function n(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement}return null}function r(t){t&&t.blur&&t!==document.body&&t.blur()}function i(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1}function o(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function a(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]})}else{var e,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===t){var o="DOMNodeRemoved";n|=i.type.substr(0,o.length)===o,window.clearTimeout(e),e=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(e){t.addEventListener(e,i)}))}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),n}).prototype=window.Event.prototype),a.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var e=document.createElement("div");this.dialog_.insertBefore(e,this.dialog_.firstChild),e.tabIndex=-1,e.focus(),this.dialog_.removeChild(e)}var n=document.createEvent("MouseEvents");n.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(n),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_),!t){var e=["button","input","keygen","select","textarea"].map((function(t){return t+":not([disabled])"}));e.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(e.join(", "))}r(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){if(t<e)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t,this.backdrop_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(t){for(;t&&t!==document.body;){var e=window.getComputedStyle(t),n=function(t,n){return!(void 0===e[t]||e[t]===n)};if(e.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===e.isolation||"fixed"===e.position||"touch"===e.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var s={reposition:function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,n=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,n)+"px"},isInlinePositionSetByStylesheet:function(t){for(var e=0;e<document.styleSheets.length;++e){var n=document.styleSheets[e],r=null;try{r=n.cssRules}catch(t){}if(r)for(var o=0;o<r.length;++o){var a=r[o],s=null;try{s=document.querySelectorAll(a.selectorText)}catch(t){}if(s&&i(s,t)){var u=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(t){return"absolute"===window.getComputedStyle(t).position&&(!("auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom)&&!s.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){if((window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new a(t)},registerDialog:function(t){t.showModal||s.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(e){var n=[];e.forEach((function(t){for(var e,r=0;e=t.removedNodes[r];++r)e instanceof Element&&("dialog"===e.localName&&n.push(e),n=n.concat(e.querySelectorAll("dialog")))})),n.length&&t(n)})))}};if(s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var t,e=this.zIndexHigh_,n=0;t=this.pendingDialogStack[n];++n)t.updateZIndex(--e,--e),0===n&&(this.overlay.style.zIndex=--e);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=n(t);){for(var e,r=0;e=this.pendingDialogStack[r];++r)if(e.dialog===t)return 0===r;t=t.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(t){if(!this.containedByTopDialog_(t.target)&&(t.preventDefault(),t.stopPropagation(),r(t.target),void 0!==this.forwardTab_)){var e=this.pendingDialogStack[0];return e.dialog.compareDocumentPosition(t.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(n)&&r.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},s.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach((function(e){-1!==t.indexOf(e.dialog)?e.downgradeModal():e.maybeHideModal()}))},s.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e)&&(1===this.pendingDialogStack.unshift(t)&&this.blockDocument(),this.updateStacking(),!0)},s.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);-1!==e&&(this.pendingDialogStack.splice(e,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var u=document.createElement("form");if(u.setAttribute("method","dialog"),"dialog"!==u.method){var c=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(c){var l=c.get;c.get=function(){return o(this)?"dialog":l.call(this)};var h=c.set;c.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):h.call(this,t)},Object.defineProperty(HTMLFormElement.prototype,"method",c)}}document.addEventListener("click",(function(t){if(s.formSubmitter=null,s.useValue=null,!t.defaultPrevented){var e=t.target;if(e&&o(e.form)){if(!("submit"===e.type&&["button","input"].indexOf(e.localName)>-1)){if("input"!==e.localName||"image"!==e.type)return;s.useValue=t.offsetX+","+t.offsetY}n(e)&&(s.formSubmitter=e)}}}),!1);var d=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!o(this))return d.call(this);var t=n(this);t&&t.close()},document.addEventListener("submit",(function(t){var e=t.target;if(o(e)){t.preventDefault();var r=n(e);if(r){var i=s.formSubmitter;i&&i.form===e?r.close(s.useValue||i.value):r.close(),s.formSubmitter=null}}}),!0)}s.forceRegisterDialog=s.forceRegisterDialog,s.registerDialog=s.registerDialog,"object"==typeof t.exports?t.exports=s:window.dialogPolyfill=s}()})),uo=St((function(t){!function(){var e=Lt;void 0!==e.default&&(e=e.default),function(){var e=window.CustomEvent;function n(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement}return null}function r(t){t&&t.blur&&t!==document.body&&t.blur()}function i(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1}function o(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function a(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]})}else{var e,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===t){var o="DOMNodeRemoved";n|=i.type.substr(0,o.length)===o,window.clearTimeout(e),e=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(e){t.addEventListener(e,i)}))}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),n}).prototype=window.Event.prototype),a.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var e=document.createElement("div");this.dialog_.insertBefore(e,this.dialog_.firstChild),e.tabIndex=-1,e.focus(),this.dialog_.removeChild(e)}var n=document.createEvent("MouseEvents");n.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(n),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_),!t){var e=["button","input","keygen","select","textarea"].map((function(t){return t+":not([disabled])"}));e.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(e.join(", "))}r(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){if(t<e)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t,this.backdrop_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(t){for(;t&&t!==document.body;){var e=window.getComputedStyle(t),n=function(t,n){return!(void 0===e[t]||e[t]===n)};if(e.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===e.isolation||"fixed"===e.position||"touch"===e.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var s={reposition:function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,n=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,n)+"px"},isInlinePositionSetByStylesheet:function(t){for(var e=0;e<document.styleSheets.length;++e){var n=document.styleSheets[e],r=null;try{r=n.cssRules}catch(t){}if(r)for(var o=0;o<r.length;++o){var a=r[o],s=null;try{s=document.querySelectorAll(a.selectorText)}catch(t){}if(s&&i(s,t)){var u=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(t){return"absolute"===window.getComputedStyle(t).position&&(!("auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom)&&!s.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){if((window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new a(t)},registerDialog:function(t){t.showModal||s.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(e){var n=[];e.forEach((function(t){for(var e,r=0;e=t.removedNodes[r];++r)e instanceof Element&&("dialog"===e.localName&&n.push(e),n=n.concat(e.querySelectorAll("dialog")))})),n.length&&t(n)})))}};if(s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var t,e=this.zIndexHigh_,n=0;t=this.pendingDialogStack[n];++n)t.updateZIndex(--e,--e),0===n&&(this.overlay.style.zIndex=--e);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=n(t);){for(var e,r=0;e=this.pendingDialogStack[r];++r)if(e.dialog===t)return 0===r;t=t.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(t){if(!this.containedByTopDialog_(t.target)&&(t.preventDefault(),t.stopPropagation(),r(t.target),void 0!==this.forwardTab_)){var e=this.pendingDialogStack[0];return e.dialog.compareDocumentPosition(t.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(n)&&r.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},s.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach((function(e){-1!==t.indexOf(e.dialog)?e.downgradeModal():e.maybeHideModal()}))},s.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e)&&(1===this.pendingDialogStack.unshift(t)&&this.blockDocument(),this.updateStacking(),!0)},s.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);-1!==e&&(this.pendingDialogStack.splice(e,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var u=document.createElement("form");if(u.setAttribute("method","dialog"),"dialog"!==u.method){var c=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(c){var l=c.get;c.get=function(){return o(this)?"dialog":l.call(this)};var h=c.set;c.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):h.call(this,t)},Object.defineProperty(HTMLFormElement.prototype,"method",c)}}document.addEventListener("click",(function(t){if(s.formSubmitter=null,s.useValue=null,!t.defaultPrevented){var e=t.target;if(e&&o(e.form)){if(!("submit"===e.type&&["button","input"].indexOf(e.localName)>-1)){if("input"!==e.localName||"image"!==e.type)return;s.useValue=t.offsetX+","+t.offsetY}n(e)&&(s.formSubmitter=e)}}}),!1);var d=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!o(this))return d.call(this);var t=n(this);t&&t.close()},document.addEventListener("submit",(function(t){var e=t.target;if(o(e)){t.preventDefault();var r=n(e);if(r){var i=s.formSubmitter;i&&i.form===e?r.close(s.useValue||i.value):r.close(),s.formSubmitter=null}}}),!0)}s.forceRegisterDialog=s.forceRegisterDialog,s.registerDialog=s.registerDialog,"object"==typeof t.exports?t.exports=s:window.dialogPolyfill=s}();var n,r,i,o,a={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};(a=function(){var t=[],e=[];function n(e,n){for(var r=0;r<t.length;r++)if(t[r].className===e)return void 0!==n&&(t[r]=n),t[r];return!1}function r(t){var e=t.getAttribute("data-upgraded");return null===e?[""]:e.split(",")}function i(t,e){return-1!==r(t).indexOf(e)}function o(t,e,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(t,{bubbles:e,cancelable:n});var r=document.createEvent("Events");return r.initEvent(t,e,n),r}function a(e,r){if(void 0===e&&void 0===r)for(var i=0;i<t.length;i++)a(t[i].className,t[i].cssClass);else{var o=e;if(void 0===r){var u=n(o);u&&(r=u.cssClass)}for(var c=document.querySelectorAll("."+r),l=0;l<c.length;l++)s(c[l],o)}}function s(a,s){if(!("object"==typeof a&&a instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var u=o("mdl-componentupgrading",!0,!0);if(a.dispatchEvent(u),!u.defaultPrevented){var c=r(a),l=[];if(s)i(a,s)||l.push(n(s));else{var h=a.classList;t.forEach((function(t){h.contains(t.cssClass)&&-1===l.indexOf(t)&&!i(a,t.className)&&l.push(t)}))}for(var d,f=0,p=l.length;f<p;f++){if(!(d=l[f]))throw new Error("Unable to find a registered component for the given class.");c.push(d.className),a.setAttribute("data-upgraded",c.join(","));var m=new d.classConstructor(a);m.mdlComponentConfigInternal_=d,e.push(m);for(var g=0,v=d.callbacks.length;g<v;g++)d.callbacks[g](a);d.widget&&(a[d.className]=m);var y=o("mdl-componentupgraded",!0,!1);a.dispatchEvent(y)}}}function u(t){if(t){var n=e.indexOf(t);e.splice(n,1);var r=t.element_.getAttribute("data-upgraded").split(","),i=r.indexOf(t.mdlComponentConfigInternal_.classAsString);r.splice(i,1),t.element_.setAttribute("data-upgraded",r.join(","));var a=o("mdl-componentdowngraded",!0,!1);t.element_.dispatchEvent(a)}}return{upgradeDom:a,upgradeElement:s,upgradeElements:function t(e){Array.isArray(e)||(e=e instanceof Element?[e]:Array.prototype.slice.call(e));for(var n,r=0,i=e.length;r<i;r++)(n=e[r])instanceof HTMLElement&&(s(n),n.children.length>0&&t(n.children))},upgradeAllRegistered:function(){for(var e=0;e<t.length;e++)a(t[e].className)},registerUpgradedCallback:function(t,e){var r=n(t);r&&r.callbacks.push(e)},register:function(e){var r=!0;void 0===e.widget&&void 0===e.widget||(r=e.widget||e.widget);var i={classConstructor:e.constructor||e.constructor,className:e.classAsString||e.classAsString,cssClass:e.cssClass||e.cssClass,widget:r,callbacks:[]};if(t.forEach((function(t){if(t.cssClass===i.cssClass)throw new Error("The provided cssClass has already been registered: "+t.cssClass);if(t.className===i.className)throw new Error("The provided className has already been registered")})),e.constructor.prototype.hasOwnProperty("mdlComponentConfigInternal_"))throw new Error("MDL component classes must not have mdlComponentConfigInternal_ defined as a property.");n(e.classAsString,i)||t.push(i)},downgradeElements:function(t){var n=function(t){e.filter((function(e){return e.element_===t})).forEach(u)};if(t instanceof Array||t instanceof NodeList)for(var r=0;r<t.length;r++)n(t[r]);else{if(!(t instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");n(t)}}}}()).ComponentConfigPublic,a.ComponentConfig,a.Component,a.upgradeDom=a.upgradeDom,a.upgradeElement=a.upgradeElement,a.upgradeElements=a.upgradeElements,a.upgradeAllRegistered=a.upgradeAllRegistered,a.registerUpgradedCallback=a.registerUpgradedCallback,a.register=a.register,a.downgradeElements=a.downgradeElements,window.componentHandler=a,window.componentHandler=a,window.addEventListener("load",(function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),a.upgradeAllRegistered()):(a.upgradeElement=function(){},a.register=function(){})})),n=function(t){this.element_=t,this.init()},window.MaterialButton=n,n.prototype.Constant_={},n.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},n.prototype.blurHandler_=function(t){t&&this.element_.blur()},n.prototype.disable=function(){this.element_.disabled=!0},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.element_.disabled=!1},n.prototype.enable=n.prototype.enable,n.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var t=document.createElement("span");t.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),t.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(t)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},a.register({constructor:n,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0}),r=function(t){this.element_=t,this.init()},window.MaterialProgress=r,r.prototype.Constant_={},r.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},r.prototype.setProgress=function(t){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=t+"%")},r.prototype.setProgress=r.prototype.setProgress,r.prototype.setBuffer=function(t){this.bufferbar_.style.width=t+"%",this.auxbar_.style.width=100-t+"%"},r.prototype.setBuffer=r.prototype.setBuffer,r.prototype.init=function(){if(this.element_){var t=document.createElement("div");t.className="progressbar bar bar1",this.element_.appendChild(t),this.progressbar_=t,(t=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(t),this.bufferbar_=t,(t=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(t),this.auxbar_=t,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},a.register({constructor:r,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0}),i=function(t){this.element_=t,this.init()},window.MaterialSpinner=i,i.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},i.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},i.prototype.createLayer=function(t){var e=document.createElement("div");e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+t);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[n,r,i],a=0;a<o.length;a++){var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[a].appendChild(s)}e.appendChild(n),e.appendChild(r),e.appendChild(i),this.element_.appendChild(e)},i.prototype.createLayer=i.prototype.createLayer,i.prototype.stop=function(){this.element_.classList.remove("is-active")},i.prototype.stop=i.prototype.stop,i.prototype.start=function(){this.element_.classList.add("is-active")},i.prototype.start=i.prototype.start,i.prototype.init=function(){if(this.element_){for(var t=1;t<=this.Constant_.MDL_SPINNER_LAYER_COUNT;t++)this.createLayer(t);this.element_.classList.add("is-upgraded")}},a.register({constructor:i,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0}),o=function(t){this.element_=t,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()},window.MaterialTextfield=o,o.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},o.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},o.prototype.onKeyDown_=function(t){var e=t.target.value.split("\n").length;13===t.keyCode&&e>=this.maxRows&&t.preventDefault()},o.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},o.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},o.prototype.onReset_=function(t){this.updateClasses_()},o.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},o.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},o.prototype.checkDisabled=o.prototype.checkDisabled,o.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},o.prototype.checkFocus=o.prototype.checkFocus,o.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},o.prototype.checkValidity=o.prototype.checkValidity,o.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},o.prototype.checkDirty=o.prototype.checkDirty,o.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},o.prototype.disable=o.prototype.disable,o.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},o.prototype.enable=o.prototype.enable,o.prototype.change=function(t){this.input_.value=t||"",this.updateClasses_()},o.prototype.change=o.prototype.change,o.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var t=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),t&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},a.register({constructor:o,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0}),function(){var t,n,r="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var i;t:{var o={};try{o.__proto__={zb:!0},i=o.zb;break t}catch(re){}i=!1}n=i?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var a=n;function s(t,e){if(t.prototype=r(e.prototype),t.prototype.constructor=t,a)a(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.M=e.prototype}var u="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},c="undefined"!=typeof window&&window===this?this:void 0!==kt&&null!=kt?kt:this;function l(t,e){if(e){var n=c;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&u(n,t,{configurable:!0,writable:!0,value:e})}}function h(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function d(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:h(t)}}l("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),l("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(e=e||0)&&(e=Math.max(e+r,0));e<r;e++){var i=n[e];if(i===t||Object.is(i,t))return!0}return!1}})),l("Promise",(function(t){function e(t){this.f=0,this.h=void 0,this.a=[];var e=this.j();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.f=function(t){if(null==this.a){this.a=[];var e=this;this.h((function(){e.s()}))}this.a.push(t)};var i=c.setTimeout;n.prototype.h=function(t){i(t,0)},n.prototype.s=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.j(t)}}}this.a=null},n.prototype.j=function(t){this.h((function(){throw t}))},e.prototype.j=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.L),reject:t(this.s)}},e.prototype.L=function(t){if(t===this)this.s(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.N(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.I(t):this.i(t)}},e.prototype.I=function(t){var e=void 0;try{e=t.then}catch(t){return void this.s(t)}"function"==typeof e?this.O(e,t):this.i(t)},e.prototype.s=function(t){this.w(2,t)},e.prototype.i=function(t){this.w(1,t)},e.prototype.w=function(t,e){if(0!=this.f)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.f);this.f=t,this.h=e,this.C()},e.prototype.C=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)o.f(this.a[t]);this.a=null}};var o=new n;return e.prototype.N=function(t){var e=this.j();t.Ia(e.resolve,e.reject)},e.prototype.O=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ia(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ia=function(t,e){function n(){switch(r.f){case 1:t(r.h);break;case 2:e(r.h);break;default:throw Error("Unexpected state: "+r.f)}}var r=this;null==this.a?o.f(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=d(t),o=i.next();!o.done;o=i.next())r(o.value).Ia(e,n)}))},e.all=function(t){var n=d(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Ia(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var f=this;function p(t){return void 0!==t}function m(t){return"string"==typeof t}var g=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function b(t){t.V=void 0,t.Ya=function(){return t.V?t.V:t.V=new t}}function w(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function _(t){return"array"==w(t)}function k(t){var e=w(t);return"array"==e||"object"==e&&"number"==typeof t.length}function E(t){return"function"==w(t)}function x(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var S="closure_uid_"+(1e9*Math.random()>>>0),T=0;function C(t,e,n){return t.call.apply(t.bind,arguments)}function I(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function A(t,e,n){return(A=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?C:I).apply(null,arguments)}function P(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function M(t,e){for(var n in e)t[n]=e[n]}var N,L=Date.now||function(){return+new Date};function D(t,e){t=t.split(".");var n,r=f;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)!t.length&&p(e)?r[n]=e:r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}}function R(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.uc=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function B(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function U(t,e){throw new B("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}R(O,Error),O.prototype.name="CustomError",R(B,O),B.prototype.name="AssertionError";var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(m(t))return m(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=m(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o=m(t)?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},$=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=m(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},V=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=m(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function z(t,e,n){for(var r=t.length,i=m(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&e.call(n,i[o],o,t))return o;return-1}function H(t,e){return 0<=F(t,e)}function G(t,e){var n;return(n=0<=(e=F(t,e)))&&W(t,e),n}function W(t,e){return 1==Array.prototype.splice.call(t,e,1).length}function K(t,e){!function(t,e){for(var n=m(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&W(t,r)&&0}))}function Z(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Y(t,e,n,r){return Array.prototype.splice.apply(t,X(arguments,1))}function X(t,e,n){return 2>=arguments.length?Array.prototype.slice.call(t,e):Array.prototype.slice.call(t,e,n)}var J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,at=/[\x00&<>"']/;function st(t,e){return t<e?-1:t>e?1:0}function ut(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function ct(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function lt(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}var ft="StopIteration"in f?f.StopIteration:{message:"StopIteration",stack:""};function pt(){}function mt(t){if(t instanceof pt)return t;if("function"==typeof t.ha)return t.ha(!1);if(k(t)){var e=0,n=new pt;return n.next=function(){for(;;){if(e>=t.length)throw ft;if(e in t)return t[e++];e++}},n}throw Error("Not implemented")}function gt(t){if(k(t))return Q(t);t=mt(t);var e=[];return function(t,e){if(k(t))try{j(t,e,void 0)}catch(t){if(t!==ft)throw t}else{t=mt(t);try{for(;;)e.call(void 0,t.next(),void 0,t)}catch(t){if(t!==ft)throw t}}}(t,(function(t){e.push(t)})),e}function vt(t,e){this.f={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof vt)for(n=t.ja(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function yt(t){if(t.h!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];bt(t.f,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.h!=t.a.length){var i={};for(n=e=0;e<t.a.length;)bt(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function bt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}pt.prototype.next=function(){throw ft},pt.prototype.ha=function(){return this},(t=vt.prototype).la=function(){yt(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.f[this.a[e]]);return t},t.ja=function(){return yt(this),this.a.concat()},t.clear=function(){this.f={},this.j=this.h=this.a.length=0},t.get=function(t,e){return bt(this.f,t)?this.f[t]:e},t.set=function(t,e){bt(this.f,t)||(this.h++,this.a.push(t),this.j++),this.f[t]=e},t.forEach=function(t,e){for(var n=this.ja(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},t.ha=function(t){yt(this);var e=0,n=this.j,r=this,i=new pt;return i.next=function(){if(n!=r.j)throw Error("The map has changed since the iterator was created");if(e>=r.a.length)throw ft;var i=r.a[e++];return t?i:r.f[i]},i};var wt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _t(t,e,n,r){for(var i=n.length;0<=(e=t.indexOf(n,e))&&e<r;){var o=t.charCodeAt(e-1);if((38==o||63==o)&&(!(o=t.charCodeAt(e+i))||61==o||38==o||35==o))return e;e+=i+1}return-1}var Et=/#|$/;function xt(t,e){var n=t.search(Et),r=_t(t,0,e,n);if(0>r)return null;var i=t.indexOf("&",r);return(0>i||i>n)&&(i=n),r+=e.length+1,decodeURIComponent(t.substr(r,i-r).replace(/\+/g," "))}var St=/[?&]($|#)/;function Tt(t,e){var n;this.h=this.w=this.j="",this.C=null,this.s=this.f="",this.i=!1,t instanceof Tt?(this.i=p(e)?e:t.i,Ct(this,t.j),this.w=t.w,this.h=t.h,It(this,t.C),this.f=t.f,At(this,zt(t.a)),this.s=t.s):t&&(n=String(t).match(wt))?(this.i=!!e,Ct(this,n[1]||"",!0),this.w=Nt(n[2]||""),this.h=Nt(n[3]||"",!0),It(this,n[4]),this.f=Nt(n[5]||"",!0),At(this,n[6]||"",!0),this.s=Nt(n[7]||"")):(this.i=!!e,this.a=new jt(null,this.i))}function Ct(t,e,n){t.j=n?Nt(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function It(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.C=e}else t.C=null}function At(t,e,n){e instanceof jt?(t.a=e,function(t,e){e&&!t.j&&(qt(t),t.h=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($t(this,e),$t(this,n),0<t.length&&(this.h=null,this.a.set(Ht(this,n),Q(t)),this.f+=t.length))}),t)),t.j=e}(t.a,t.i)):(n||(e=Lt(e,Ut)),t.a=new jt(e,t.i))}function Pt(t){return t instanceof Tt?new Tt(t):new Tt(t,void 0)}function Mt(t,e){return t instanceof Tt||(t=Pt(t)),e instanceof Tt||(e=Pt(e)),t.resolve(e)}function Nt(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lt(t,e,n){return m(t)?(t=encodeURI(t).replace(e,Dt),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Dt(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tt.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lt(e,Rt,!0),":");var n=this.h;return(n||"file"==e)&&(t.push("//"),(e=this.w)&&t.push(Lt(e,Rt,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&t.push(":",String(n))),(n=this.f)&&(this.h&&"/"!=n.charAt(0)&&t.push("/"),t.push(Lt(n,"/"==n.charAt(0)?Bt:Ot,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.s)&&t.push("#",Lt(n,Ft)),t.join("")},Tt.prototype.resolve=function(t){var e=new Tt(this),n=!!t.j;n?Ct(e,t.j):n=!!t.w,n?e.w=t.w:n=!!t.h,n?e.h=t.h:n=null!=t.C;var r=t.f;if(n)It(e,t.C);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.h&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.a.toString(),n?At(e,zt(t.a)):n=!!t.s,n&&(e.s=t.s),e};var Rt=/[#\/\?@]/g,Ot=/[#\?:]/g,Bt=/[#\?]/g,Ut=/[#\?@]/g,Ft=/#/g;function jt(t,e){this.f=this.a=null,this.h=t||null,this.j=!!e}function qt(t){t.a||(t.a=new vt,t.f=0,t.h&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.h,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $t(t,e){qt(t),e=Ht(t,e),bt(t.a.f,e)&&(t.h=null,t.f-=t.a.get(e).length,bt((t=t.a).f,e)&&(delete t.f[e],t.h--,t.j++,t.a.length>2*t.h&&yt(t)))}function Vt(t,e){return qt(t),e=Ht(t,e),bt(t.a.f,e)}function zt(t){var e=new jt;return e.h=t.h,t.a&&(e.a=new vt(t.a),e.f=t.f),e}function Ht(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Gt(t){this.a=Pt(t)}function Wt(t){return t.a.a.get(Qt.Qa)||null}function Kt(t,e){e?t.a.a.set(Qt.PROVIDER_ID,e):$t(t.a.a,Qt.PROVIDER_ID)}(t=jt.prototype).add=function(t,e){qt(this),this.h=null,t=Ht(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.f+=1,this},t.clear=function(){this.a=this.h=null,this.f=0},t.forEach=function(t,e){qt(this),this.a.forEach((function(n,r){j(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.ja=function(){qt(this);for(var t=this.a.la(),e=this.a.ja(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.la=function(t){qt(this);var e=[];if(m(t))Vt(this,t)&&(e=Z(e,this.a.get(Ht(this,t))));else{t=this.a.la();for(var n=0;n<t.length;n++)e=Z(e,t[n])}return e},t.set=function(t,e){return qt(this),this.h=null,Vt(this,t=Ht(this,t))&&(this.f-=this.a.get(t).length),this.a.set(t,[e]),this.f+=1,this},t.get=function(t,e){return t&&0<(t=this.la(t)).length?String(t[0]):e},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var t=[],e=this.a.ja(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.la(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.h=t.join("&")},Gt.prototype.toString=function(){return this.a.toString()};var Zt,Qt={Qa:"ui_auid",kc:"apiKey",Ra:"ui_sd",wb:"mode",ab:"oobCode",PROVIDER_ID:"ui_pid",Ta:"ui_sid",xb:"tenantId"};t:{var Yt=f.navigator;if(Yt){var Xt=Yt.userAgent;if(Xt){Zt=Xt;break t}}Zt=""}function Jt(t){return-1!=Zt.indexOf(t)}function te(){return(Jt("Chrome")||Jt("CriOS"))&&!Jt("Edge")}function ee(t){return ee[" "](t),t}ee[" "]=y;var ne,re,ie=Jt("Opera"),oe=Jt("Trident")||Jt("MSIE"),ae=Jt("Edge"),se=ae||oe,ue=Jt("Gecko")&&!(-1!=Zt.toLowerCase().indexOf("webkit")&&!Jt("Edge"))&&!(Jt("Trident")||Jt("MSIE"))&&!Jt("Edge"),ce=-1!=Zt.toLowerCase().indexOf("webkit")&&!Jt("Edge"),le=ce&&Jt("Mobile"),he=Jt("Macintosh");function de(){var t=f.document;return t?t.documentMode:void 0}t:{var fe="",pe=(re=Zt,ue?/rv:([^\);]+)(\)|;)/.exec(re):ae?/Edge\/([\d\.]+)/.exec(re):oe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(re):ce?/WebKit\/(\S+)/.exec(re):ie?/(?:Version)[ \/]?(\S+)/.exec(re):void 0);if(pe&&(fe=pe?pe[1]:""),oe){var me=de();if(null!=me&&me>parseFloat(fe)){ne=String(me);break t}}ne=fe}var ge,ve={};function ye(t){return function(t,e){var n=ve;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=J(String(ne)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=st(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||st(0==a[2].length,0==s[2].length)||st(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var be=f.document;function we(t,e){this.a=t===Ee&&e||"",this.f=ke}function _e(t){return t instanceof we&&t.constructor===we&&t.f===ke?t.a:(U("expected object of type Const, got '"+t+"'"),"type_error:Const")}ge=be&&oe?de()||("CSS1Compat"==be.compatMode?parseInt(ne,10):5):void 0,we.prototype.ma=!0,we.prototype.ka=function(){return this.a},we.prototype.toString=function(){return"Const{"+this.a+"}"};var ke={},Ee={};function xe(){this.a="",this.h=Te}function Se(t){return t instanceof xe&&t.constructor===xe&&t.h===Te?t.a:(U("expected object of type TrustedResourceUrl, got '"+t+"' of type "+w(t)),"type_error:TrustedResourceUrl")}xe.prototype.ma=!0,xe.prototype.ka=function(){return this.a.toString()},xe.prototype.f=function(){return 1},xe.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Te={};function Ce(t){var e=new xe;return e.a=t,e}function Ie(){this.a="",this.h=Le}function Ae(t){return Pe(t).toString()}function Pe(t){return t instanceof Ie&&t.constructor===Ie&&t.h===Le?t.a:(U("expected object of type SafeUrl, got '"+t+"' of type "+w(t)),"type_error:SafeUrl")}Ie.prototype.ma=!0,Ie.prototype.ka=function(){return this.a.toString()},Ie.prototype.f=function(){return 1},Ie.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Me=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ne(t){return t instanceof Ie?t:(t="object"==typeof t&&t.ma?t.ka():String(t),Me.test(t)||(t="about:invalid#zClosurez"),De(t))}var Le={};function De(t){var e=new Ie;return e.a=t,e}function Re(){this.a="",this.f=Oe}De("about:blank"),Re.prototype.ma=!0;var Oe={};function Be(){this.a="",this.j=Fe,this.h=null}function Ue(t){return t instanceof Be&&t.constructor===Be&&t.j===Fe?t.a:(U("expected object of type SafeHtml, got '"+t+"' of type "+w(t)),"type_error:SafeHtml")}Re.prototype.ka=function(){return this.a},Re.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},Be.prototype.f=function(){return this.h},Be.prototype.ma=!0,Be.prototype.ka=function(){return this.a.toString()},Be.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Fe={};function je(t,e){var n=new Be;return n.a=t,n.h=e,n}je("<!DOCTYPE html>",0);var qe=je("",0);je("<br>",0);var $e,Ve,ze=(Ve=!1,function(){return Ve||($e=function(){if("undefined"==typeof document)return!1;var t=document.createElement("div"),e=document.createElement("div");return e.appendChild(document.createElement("div")),t.appendChild(e),!!t.firstChild&&(e=t.firstChild.firstChild,t.innerHTML=Ue(qe),!e.parentElement)}(),Ve=!0),$e});function He(t,e){this.a=p(t)?t:0,this.f=p(e)?e:0}function Ge(t,e){this.width=t,this.height=e}function We(t){return t?new rn(tn(t)):N||(N=new rn)}function Ke(t,e){var n=e||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+t):Qe(document,t,e)}function Ze(t,e){var n=e||document;if(n.getElementsByClassName)t=n.getElementsByClassName(t)[0];else{n=document;var r=e||n;t=r.querySelectorAll&&r.querySelector&&t?r.querySelector(t?"."+t:""):Qe(n,t,e)[0]||null}return t||null}function Qe(t,e,n){var r;if((t=n||t).querySelectorAll&&t.querySelector&&e)return t.querySelectorAll(e?"."+e:"");if(e&&t.getElementsByClassName){var i=t.getElementsByClassName(e);return i}if(i=t.getElementsByTagName("*"),e){var o={};for(n=r=0;t=i[n];n++){var a=t.className;"function"==typeof a.split&&H(a.split(/\s+/),e)&&(o[r++]=t)}return o.length=r,o}return i}He.prototype.toString=function(){return"("+this.a+", "+this.f+")"},He.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.f=Math.ceil(this.f),this},He.prototype.floor=function(){return this.a=Math.floor(this.a),this.f=Math.floor(this.f),this},He.prototype.round=function(){return this.a=Math.round(this.a),this.f=Math.round(this.f),this},(t=Ge.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var Ye={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Xe(t){return t.scrollingElement?t.scrollingElement:(ce||"CSS1Compat"!=t.compatMode)&&t.body||t.documentElement}function Je(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function tn(t){return 9==t.nodeType?t:t.ownerDocument||t.document}function en(t,e){if("textContent"in t)t.textContent=e;else if(3==t.nodeType)t.data=String(e);else if(t.firstChild&&3==t.firstChild.nodeType){for(;t.lastChild!=t.firstChild;)t.removeChild(t.lastChild);t.firstChild.data=String(e)}else{for(var n;n=t.firstChild;)t.removeChild(n);t.appendChild(tn(t).createTextNode(String(e)))}}function nn(t,e){return e?function(t,e){for(;t;){if(e(t))return t;t=t.parentNode}return null}(t,(function(t){return!e||m(t.className)&&H(t.className.split(/\s+/),e)})):null}function rn(t){this.a=t||f.document||document}rn.prototype.R=function(){return m(void 0)?this.a.getElementById(void 0):void 0};var on={Ec:!0},an={Gc:!0},sn={Dc:!0},un={Fc:!0};function cn(){throw Error("Do not instantiate directly")}function ln(t,e,n,r){if(t=t(e||dn,void 0,n),r=(r||We()).a.createElement("DIV"),(t=function(t){if(!x(t))return ut(String(t));if(t instanceof cn){if(t.fa===on)return t.content;if(t.fa===un)return ut(t.content)}return U("Soy template output is unsafe for use as HTML: "+t),"zSoyz"}(t)).match(hn),t=je(t,null),ze())for(;r.lastChild;)r.removeChild(r.lastChild);return r.innerHTML=Ue(t),1==r.childNodes.length&&(1==(t=r.firstChild).nodeType&&(r=t)),r}cn.prototype.va=null,cn.prototype.toString=function(){return this.content};var hn=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,dn={};function fn(){cn.call(this)}function pn(t){return null!=t&&t.fa===on?t:t instanceof Be?yn(Ue(t).toString(),t.f()):yn(ut(String(String(t))),function(t){if(null!=t)switch(t.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(t))}function mn(){cn.call(this)}function gn(t,e){this.content=String(t),this.va=null!=e?e:null}function vn(t){return new gn(t,void 0)}R(fn,cn),fn.prototype.fa=on,R(mn,cn),mn.prototype.fa=an,mn.prototype.va=1,R(gn,cn),gn.prototype.fa=un;var yn=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t,n){return t=new e(String(t)),void 0!==n&&(t.va=n),t}}(fn),bn=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t){return new e(String(t))}}(mn);function wn(t){return(t=String(t))?new gn(t,void 0):""}var _n=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t,n){return(t=String(t))?(t=new e(t),void 0!==n&&(t.va=n),t):""}}(fn);function kn(t){return null!=t&&t.fa===on?String(String(t.content).replace(Ln,"").replace(Dn,"&lt;")).replace(An,Tn):ut(String(t))}function En(t){return null!=t&&t.fa===an?t=String(t).replace(Pn,In):t instanceof Ie?t=String(Ae(t)).replace(Pn,In):(t=String(t),Nn.test(t)?t=t.replace(Pn,In):(U("Bad value `%s` for |filterNormalizeUri",[t]),t="#zSoyz")),t}function xn(t){return null!=t&&t.fa===sn?t=t.content:null==t?t="":t instanceof Re?t instanceof Re&&t.constructor===Re&&t.f===Oe?t=t.a:(U("expected object of type SafeStyle, got '"+t+"' of type "+w(t)),t="type_error:SafeStyle"):(t=String(t),Mn.test(t)||(U("Bad value `%s` for |filterCssValue",[t]),t="zSoyz")),t}var Sn={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Tn(t){return Sn[t]}var Cn={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function In(t){return Cn[t]}var An=/[\x00\x22\x27\x3c\x3e]/g,Pn=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,Mn=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,Nn=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Ln=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Dn=/</g;function Rn(){return vn("Enter a valid phone number")}function On(){return vn("Unable to send password reset code to specified email")}function Bn(){return vn("Something went wrong. Please try again.")}function Un(){return vn("This email already exists without any means of sign-in. Please reset the password to recover.")}function Fn(t){var e="";switch((t=t||{}).code){case"invalid-argument":e+="Client specified an invalid argument.";break;case"invalid-configuration":e+="Client specified an invalid project configuration.";break;case"failed-precondition":e+="Request can not be executed in the current system state.";break;case"out-of-range":e+="Client specified an invalid range.";break;case"unauthenticated":e+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":e+="Client does not have sufficient permission.";break;case"not-found":e+="Specified resource is not found.";break;case"aborted":e+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":e+="The resource that a client tried to create already exists.";break;case"resource-exhausted":e+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":e+="Request cancelled by the client.";break;case"data-loss":e+="Unrecoverable data loss or data corruption.";break;case"unknown":e+="Unknown server error.";break;case"internal":e+="Internal server error.";break;case"not-implemented":e+="API method not implemented by the server.";break;case"unavailable":e+="Service unavailable.";break;case"deadline-exceeded":e+="Request deadline exceeded.";break;case"auth/user-disabled":e+="The user account has been disabled by an administrator.";break;case"auth/timeout":e+="The operation has timed out.";break;case"auth/too-many-requests":e+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":e+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":e+="A network error has occurred. Try again later.";break;case"restart-process":e+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":e+="No sign-in provider is available for the given email, please try with a different email."}return vn(e)}function jn(){return vn("Please login again to perform this operation")}function qn(t,e,n){var r=Error.call(this);if(this.message=r.message,"stack"in r&&(this.stack=r.stack),this.code=$n+t,!(t=e)){switch(t="",this.code){case"firebaseui/merge-conflict":t+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:t+=Bn()}t=vn(t).toString()}this.message=t||"",this.credential=n||null}s(qn,Error),qn.prototype.aa=function(){return{code:this.code,message:this.message}},qn.prototype.toJSON=function(){return this.aa()};var $n="firebaseui/";function Vn(){this.O=this.O,this.C=this.C}function zn(t,e){t.O?p(void 0)?e.call(void 0):e():(t.C||(t.C=[]),t.C.push(p(void 0)?A(e,void 0):e))}function Hn(t){t&&"function"==typeof t.o&&t.o()}Vn.prototype.O=!1,Vn.prototype.o=function(){if(!this.O&&(this.O=!0,this.m(),0))this[S]||(this[S]=++T)},Vn.prototype.m=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var Gn=Object.freeze||function(t){return t},Wn=!oe||9<=Number(ge),Kn=oe&&!ye("9"),Zn=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",y,e),f.removeEventListener("test",y,e)}catch(t){}return t}();function Qn(t,e){this.type=t,this.f=this.target=e,this.h=!1,this.sb=!0}function Yn(t,e){if(Qn.call(this,t?t.type:""),this.relatedTarget=this.f=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.f=e,e=t.relatedTarget){if(ue){t:{try{ee(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.j=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=m(t.pointerType)?t.pointerType:Xn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qn.prototype.stopPropagation=function(){this.h=!0},Qn.prototype.preventDefault=function(){this.sb=!1},R(Yn,Qn);var Xn=Gn({2:"touch",3:"pen",4:"mouse"});Yn.prototype.stopPropagation=function(){Yn.M.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Yn.prototype.preventDefault=function(){Yn.M.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Kn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Jn="closure_listenable_"+(1e6*Math.random()|0),tr=0;function er(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++tr,this.sa=this.Ha=!1}function nr(t){t.sa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function rr(t){this.src=t,this.a={},this.f=0}function ir(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(nr(e),0==t.a[n].length&&(delete t.a[n],t.f--))}function or(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.sa&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}rr.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.f++);var a=or(t,e,r,i);return-1<a?(e=t[a],n||(e.Ha=!1)):((e=new er(e,this.src,o,!!r,i)).Ha=n,t.push(e)),e};var ar="closure_lm_"+(1e6*Math.random()|0),sr={};function ur(t,e,n,r,i){if(r&&r.once)return lr(t,e,n,r,i);if(_(e)){for(var o=0;o<e.length;o++)ur(t,e[o],n,r,i);return null}return n=br(n),t&&t[Jn]?t.I.add(String(e),n,!1,x(r)?!!r.capture:!!r,i):cr(t,e,n,!1,r,i)}function cr(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=x(i)?!!i.capture:!!i,s=vr(t);if(s||(t[ar]=s=new rr(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=gr,e=Wn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Zn||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function lr(t,e,n,r,i){if(_(e)){for(var o=0;o<e.length;o++)lr(t,e[o],n,r,i);return null}return n=br(n),t&&t[Jn]?t.I.add(String(e),n,!0,x(r)?!!r.capture:!!r,i):cr(t,e,n,!0,r,i)}function hr(t,e,n,r,i){if(_(e))for(var o=0;o<e.length;o++)hr(t,e[o],n,r,i);else r=x(r)?!!r.capture:!!r,n=br(n),t&&t[Jn]?(t=t.I,(e=String(e).toString())in t.a&&(-1<(n=or(o=t.a[e],n,r,i))&&(nr(o[n]),W(o,n),0==o.length&&(delete t.a[e],t.f--)))):t&&(t=vr(t))&&(e=t.a[e.toString()],t=-1,e&&(t=or(e,n,r,i)),(n=-1<t?e[t]:null)&&dr(n))}function dr(t){if("number"!=typeof t&&t&&!t.sa){var e=t.src;if(e&&e[Jn])ir(e.I,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vr(e))?(ir(n,t),0==n.f&&(n.src=null,e[ar]=null)):nr(t)}}}function fr(t){return t in sr?sr[t]:sr[t]="on"+t}function pr(t,e,n,r){var i=!0;if((t=vr(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.sa&&(o=mr(o,r),i=i&&!1!==o)}return i}function mr(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&dr(t),n.call(r,e)}function gr(t,e){if(t.sa)return!0;if(!Wn){if(!e)t:{e=["window","event"];for(var n=f,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Yn(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.f;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;!e.h&&0<=i;i--){e.f=r[i];var o=pr(r[i],t,!0,e);n=n&&o}for(i=0;!e.h&&i<r.length;i++)e.f=r[i],o=pr(r[i],t,!1,e),n=n&&o}return n}return mr(t,new Yn(e,this))}function vr(t){return(t=t[ar])instanceof rr?t:null}var yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function br(t){return E(t)?t:(t[yr]||(t[yr]=function(e){return t.handleEvent(e)}),t[yr])}function wr(){Vn.call(this),this.I=new rr(this),this.yb=this,this.Fa=null}function _r(t,e){var n,r=t.Fa;if(r)for(n=[];r;r=r.Fa)n.push(r);if(t=t.yb,r=e.type||e,m(e))e=new Qn(e,t);else if(e instanceof Qn)e.target=e.target||t;else{var i=e;dt(e=new Qn(r,t),i)}if(i=!0,n)for(var o=n.length-1;!e.h&&0<=o;o--){var a=e.f=n[o];i=kr(a,r,!0,e)&&i}if(e.h||(i=kr(a=e.f=t,r,!0,e)&&i,e.h||(i=kr(a,r,!1,e)&&i)),n)for(o=0;!e.h&&o<n.length;o++)i=kr(a=e.f=n[o],r,!1,e)&&i;return i}function kr(t,e,n,r){if(!(e=t.I.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.sa&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&ir(t.I,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.sb}R(wr,Vn),wr.prototype[Jn]=!0,wr.prototype.$a=function(t){this.Fa=t},wr.prototype.removeEventListener=function(t,e,n,r){hr(this,t,e,n,r)},wr.prototype.m=function(){if(wr.M.m.call(this),this.I){var t,e=this.I;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nr(n[r]);delete e.a[t],e.f--}}this.Fa=null};var Er={},xr=0;function Sr(t,e){if(!t)throw Error("Event target element must be provided!");if(t=Cr(t),Er[t]&&Er[t].length)for(var n=0;n<Er[t].length;n++)_r(Er[t][n],e)}function Tr(t){var e=Cr(t.R());Er[e]&&Er[e].length&&(function(t,e){0<=(e=z(t,e,void 0))&&W(t,e)}(Er[e],(function(e){return e==t})),Er[e].length||delete Er[e])}function Cr(t){return void 0===t.a&&(t.a=xr,xr++),t.a}function Ir(t){if(!t)throw Error("Event target element must be provided!");wr.call(this),this.a=t}function Ar(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function Pr(t,e){this.h=t,this.j=e,this.f=0,this.a=null}function Mr(t,e){t.j(e),100>t.f&&(t.f++,e.next=t.a,t.a=e)}function Nr(){this.f=this.a=null}s(Ir,wr),Ir.prototype.R=function(){return this.a},Ir.prototype.register=function(){var t=Cr(this.R());Er[t]?H(Er[t],this)||Er[t].push(this):Er[t]=[this]},Pr.prototype.get=function(){if(0<this.f){this.f--;var t=this.a;this.a=t.next,t.next=null}else t=this.h();return t};var Lr,Dr,Rr=new Pr((function(){return new Br}),(function(t){t.reset()}));function Or(){var t=qr,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.f=null),e.next=null),e}function Br(){this.next=this.f=this.a=null}function Ur(t){f.setTimeout((function(){throw t}),0)}function Fr(t,e){Dr||function(){if(f.Promise&&f.Promise.resolve){var t=f.Promise.resolve(void 0);Dr=function(){t.then($r)}}else Dr=function(){var t=$r;!E(f.setImmediate)||f.Window&&f.Window.prototype&&!Jt("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(Lr||(Lr=function(){var t=f.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Jt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=A((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!Jt("Trident")&&!Jt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(p(n.next)){var t=(n=n.next).hb;n.hb=null,t()}},function(t){r.next={hb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){f.setTimeout(t,0)}}()),Lr(t)):f.setImmediate(t)}}(),jr||(Dr(),jr=!0),qr.add(t,e)}Nr.prototype.add=function(t,e){var n=Rr.get();n.set(t,e),this.f?this.f.next=n:this.a=n,this.f=n},Br.prototype.set=function(t,e){this.a=t,this.f=e,this.next=null},Br.prototype.reset=function(){this.next=this.f=this.a=null};var jr=!1,qr=new Nr;function $r(){for(var t;t=Or();){try{t.a.call(t.f)}catch(t){Ur(t)}Mr(Rr,t)}jr=!1}function Vr(t){if(this.a=zr,this.w=void 0,this.j=this.f=this.h=null,this.s=this.i=!1,t!=y)try{var e=this;t.call(void 0,(function(t){ti(e,Hr,t)}),(function(t){if(!(t instanceof ai))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ti(e,Gr,t)}))}catch(t){ti(this,Gr,t)}}var zr=0,Hr=2,Gr=3;function Wr(){this.next=this.context=this.f=this.j=this.a=null,this.h=!1}Wr.prototype.reset=function(){this.context=this.f=this.j=this.a=null,this.h=!1};var Kr=new Pr((function(){return new Wr}),(function(t){t.reset()}));function Zr(t,e,n){var r=Kr.get();return r.j=t,r.f=e,r.context=n,r}function Qr(t){if(t instanceof Vr)return t;var e=new Vr(y);return ti(e,Hr,t),e}function Yr(t){return new Vr((function(e,n){n(t)}))}function Xr(t,e){t.f||t.a!=Hr&&t.a!=Gr||ei(t),t.j?t.j.next=e:t.f=e,t.j=e}function Jr(t,e,n,r){var i=Zr(null,null,null);return i.a=new Vr((function(t,o){i.j=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.f=n?function(e){try{var i=n.call(r,e);!p(i)&&e instanceof ai?o(e):t(i)}catch(t){o(t)}}:o})),i.a.h=t,Xr(t,i),i.a}function ti(t,e,n){if(t.a==zr){t===n&&(e=Gr,n=new TypeError("Promise cannot resolve to itself")),t.a=1;t:{var r=n,i=t.gc,o=t.hc;if(r instanceof Vr){Xr(r,Zr(i||y,o||null,t));var a=!0}else if(Ar(r))r.then(i,o,t),a=!0;else{if(x(r))try{var s=r.then;if(E(s)){!function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(r,s,i,o,t),a=!0;break t}}catch(e){o.call(t,e),a=!0;break t}a=!1}}a||(t.w=n,t.a=e,t.h=null,ei(t),e!=Gr||n instanceof ai||function(t,e){t.s=!0,Fr((function(){t.s&&oi.call(null,e)}))}(t,n))}}function ei(t){t.i||(t.i=!0,Fr(t.Gb,t))}function ni(t){var e=null;return t.f&&(e=t.f,t.f=e.next,e.next=null),t.f||(t.j=null),e}function ri(t,e,n,r){if(n==Gr&&e.f&&!e.h)for(;t&&t.s;t=t.h)t.s=!1;if(e.a)e.a.h=null,ii(e,n,r);else try{e.h?e.j.call(e.context):ii(e,n,r)}catch(t){oi.call(null,t)}Mr(Kr,e)}function ii(t,e,n){e==Hr?t.j.call(t.context,n):t.f&&t.f.call(t.context,n)}Vr.prototype.then=function(t,e,n){return Jr(this,E(t)?t:null,E(e)?e:null,n)},Vr.prototype.$goog_Thenable=!0,(t=Vr.prototype).ec=function(t,e){return(t=Zr(t,t,e)).h=!0,Xr(this,t),this},t.ta=function(t,e){return Jr(this,null,t,e)},t.cancel=function(t){this.a==zr&&Fr((function(){!function t(e,n){if(e.a==zr)if(e.h){var r=e.h;if(r.f){for(var i=0,o=null,a=null,s=r.f;s&&(s.h||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==zr&&1==i?t(r,n):(a?((i=a).next==r.j&&(r.j=i),i.next=i.next.next):ni(r),ri(r,o,Gr,n)))}e.h=null}else ti(e,Gr,n)}(this,new ai(t))}),this)},t.gc=function(t){this.a=zr,ti(this,Hr,t)},t.hc=function(t){this.a=zr,ti(this,Gr,t)},t.Gb=function(){for(var t;t=ni(this);)ri(this,t,this.a,this.w);this.i=!1};var oi=Ur;function ai(t){O.call(this,t)}function si(t,e,n){e||(e={}),n=n||window;var r=t instanceof Ie?t:Ne(void 0!==t.href?t.href:String(t));t=e.target||t.target;var i=[];for(o in e)switch(o){case"width":case"height":case"top":case"left":i.push(o+"="+e[o]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(o+"="+(e[o]?1:0))}var o=i.join(",");return(Jt("iPhone")&&!Jt("iPod")&&!Jt("iPad")||Jt("iPad")||Jt("iPod"))&&n.navigator&&n.navigator.standalone&&t&&"_self"!=t?(o=n.document.createElement("A"),r instanceof Ie||r instanceof Ie||(r="object"==typeof r&&r.ma?r.ka():String(r),Me.test(r)||(r="about:invalid#zClosurez"),r=De(r)),o.href=Pe(r),o.setAttribute("target",t),e.noreferrer&&o.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),o.dispatchEvent(e),n={}):e.noreferrer?(n=n.open("",t,o),e=Ae(r),n&&(se&&-1!=e.indexOf(";")&&(e="'"+e.replace(/'/g,"%27")+"'"),n.opener=null,e=je('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ut(e)+'">',null),n.document.write(Ue(e)),n.document.close())):(n=n.open(Ae(r),t,o))&&e.noopener&&(n.opener=null),n}function ui(t){window.location.assign(Ae(Ne(t)))}function ci(){try{return!!(window.opener&&window.opener.location&&window.opener.location.assign&&window.opener.location.hostname===window.location.hostname&&window.opener.location.protocol===window.location.protocol)}catch(t){}return!1}function li(t){si(t,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function hi(t,e){if(null==(t=x(t)&&1==t.nodeType?t:document.querySelector(String(t))))throw Error(e||"Cannot find element.");return t}function di(){return window.location.href}function fi(t){var e=xi;this.s=[],this.O=e,this.N=t||null,this.j=this.a=!1,this.h=void 0,this.I=this.l=this.w=!1,this.i=0,this.f=null,this.C=0}function pi(t,e,n){t.a=!0,t.h=n,t.j=!e,yi(t)}function mi(t){if(t.a){if(!t.I)throw new bi(t);t.I=!1}}function gi(t,e,n){t.s.push([e,n,void 0]),t.a&&yi(t)}function vi(t){return V(t.s,(function(t){return E(t[1])}))}function yi(t){if(t.i&&t.a&&vi(t)){var e=t.i,n=ki[e];n&&(f.clearTimeout(n.a),delete ki[e]),t.i=0}t.f&&(t.f.C--,delete t.f),e=t.h;for(var r=n=!1;t.s.length&&!t.w;){var i=t.s.shift(),o=i[0],a=i[1];if(i=i[2],o=t.j?a:o)try{var s=o.call(i||t.N,e);p(s)&&(t.j=t.j&&(s==e||s instanceof Error),t.h=e=s),(Ar(e)||"function"==typeof f.Promise&&e instanceof f.Promise)&&(r=!0,t.w=!0)}catch(r){e=r,t.j=!0,vi(t)||(n=!0)}}t.h=e,r&&(s=A(t.L,t,!0),r=A(t.L,t,!1),e instanceof fi?(gi(e,s,r),e.l=!0):e.then(s,r)),n&&(e=new _i(e),ki[e.a]=e,t.i=e.a)}function bi(){O.call(this)}function wi(){O.call(this)}function _i(t){this.a=f.setTimeout(A(this.h,this),0),this.f=t}R(ai,O),ai.prototype.name="cancel",fi.prototype.cancel=function(t){if(this.a)this.h instanceof fi&&this.h.cancel();else{if(this.f){var e=this.f;delete this.f,t?e.cancel(t):(e.C--,0>=e.C&&e.cancel())}this.O?this.O.call(this.N,this):this.I=!0,this.a||(t=new wi(this),mi(this),pi(this,!1,t))}},fi.prototype.L=function(t,e){this.w=!1,pi(this,t,e)},fi.prototype.then=function(t,e,n){var r,i,o=new Vr((function(t,e){r=t,i=e}));return gi(this,r,(function(t){t instanceof wi?o.cancel():i(t)})),o.then(t,e,n)},fi.prototype.$goog_Thenable=!0,R(bi,O),bi.prototype.message="Deferred has already fired",bi.prototype.name="AlreadyCalledError",R(wi,O),wi.prototype.message="Deferred was canceled",wi.prototype.name="CanceledError",_i.prototype.h=function(){throw delete ki[this.a],this.f};var ki={};function Ei(t){var e,n=document,r=Se(t).toString(),i=document.createElement("SCRIPT"),o={tb:i,ub:void 0},a=new fi(o);return e=window.setTimeout((function(){Si(i,!0);var t=new Ii(Ci,"Timeout reached for loading script "+r);mi(a),pi(a,!1,t)}),5e3),o.ub=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Si(i,!1,e),mi(a),pi(a,!0,null))},i.onerror=function(){Si(i,!0,e);var t=new Ii(Ti,"Error while loading script "+r);mi(a),pi(a,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),function(t,e){ct(e,(function(e,n){e&&"object"==typeof e&&e.ma&&(e=e.ka()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Ye.hasOwnProperty(n)?t.setAttribute(Ye[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}(i,o),function(t,e){t.src=Se(e),null===v&&(v=(e=(e=f.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&g.test(e)?e:""),(e=v)&&t.setAttribute("nonce",e)}(i,t),function(t){var e=(t||document).getElementsByTagName("HEAD");return e&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function xi(){if(this&&this.tb){var t=this.tb;t&&"SCRIPT"==t.tagName&&Si(t,!0,this.ub)}}function Si(t,e,n){null!=n&&f.clearTimeout(n),t.onload=y,t.onerror=y,t.onreadystatechange=y,e&&window.setTimeout((function(){Je(t)}),0)}var Ti=0,Ci=1;function Ii(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Ai(t){this.a=t||f.googleyolo,this.f=null,this.h=!1}R(Ii,O),Ai.prototype.cancel=function(){this.a&&this.h&&(this.f=this.a.cancelLastOperation().catch((function(){})))},b(Ai);var Pi=new we(Ee,"https://smartlock.google.com/client"),Mi="illegalConcurrentRequest",Ni="userCanceled";function Li(){this.a=null}function Di(t,e){this.a=t,this.f=e||function(t){throw t}}function Ri(t,e,n){this.reset(t,e,n,void 0,void 0)}function Oi(t){this.s=t,this.a=this.h=this.j=this.f=null}function Bi(t,e){this.name=t,this.value=e}Li.prototype.load=function(){var t=this;if(this.a)return this.a;var e=Ce(_e(Pi));return f.googleyolo?Qr():this.a=function(){var t=null;return new Vr((function(e){"complete"==f.document.readyState?e():(t=function(){e()},lr(window,"load",t))})).ta((function(e){throw hr(window,"load",t),e}))}().then((function(){if(!f.googleyolo)return new Vr((function(n,r){var i=setTimeout((function(){t.a=null,r(Error("Network error!"))}),1e4);f.onGoogleYoloLoad=function(){clearTimeout(i),n()},Qr(Ei(e)).ta((function(e){clearTimeout(i),t.a=null,r(e)}))}))}))},b(Li),Di.prototype.confirm=function(t){return Qr(this.a.confirm(t)).ta(this.f)},Ri.prototype.a=null,Ri.prototype.reset=function(t,e,n,r,i){this.h=r||L(),this.j=t,this.s=e,this.f=n,delete this.a},Bi.prototype.toString=function(){return this.name};var Ui=new Bi("SEVERE",1e3),Fi=new Bi("WARNING",900),ji=new Bi("CONFIG",700);Oi.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.j?e.j:e.f?t(e.f):(U("Root logger has no level set."),null)}(this).value)for(E(e)&&(e=e()),t=new Ri(t,String(e),this.s),n&&(t.a=n),n=this;n;){var r=n,i=t;if(r.a)for(var o=0;e=r.a[o];o++)e(i);n=n.f}};var qi={},$i=null;function Vi(){$i||($i=new Oi(""),qi[""]=$i,$i.j=ji)}function zi(){this.a=L()}var Hi=null;function Gi(t){this.j=t||"",Hi||(Hi=new zi),this.s=Hi}function Wi(t){return 10>t?"0"+t:String(t)}function Ki(t){Gi.call(this,t)}function Zi(){this.s=A(this.h,this),this.a=new Ki,this.a.f=!1,this.a.h=!1,this.f=this.a.a=!1,this.j={}}zi.prototype.set=function(t){this.a=t},zi.prototype.reset=function(){this.set(L())},zi.prototype.get=function(){return this.a},Gi.prototype.a=!0,Gi.prototype.f=!0,Gi.prototype.h=!1,R(Ki,Gi),Zi.prototype.h=function(t){if(!this.j[t.f]){var e=function(t,e){var n=[];if(n.push(t.j," "),t.f){var r=new Date(e.h);n.push("[",Wi(r.getFullYear()-2e3)+Wi(r.getMonth()+1)+Wi(r.getDate())+" "+Wi(r.getHours())+":"+Wi(r.getMinutes())+":"+Wi(r.getSeconds())+"."+Wi(Math.floor(r.getMilliseconds()/10)),"] ")}return n.push("[",function(t,e){e=(t=(t.h-e)/1e3).toFixed(3);var n=0;if(1>t)n=2;else for(;100>t;)n++,t*=10;for(;0<n--;)e=" "+e;return e}(e,t.s.get()),"s] "),n.push("[",e.f,"] "),n.push(e.s),t.h&&(e=e.a)&&n.push("\n",e instanceof Error?e.message:e.toString()),t.a&&n.push("\n"),n.join("")}(this.a,t);if(Yi)!function(t,e,n,r){t[e]?t[e](n,r||""):t.log(n,r||"")}(Yi,function(t){if(t){if(t.value>=Ui.value)return"error";if(t.value>=Fi.value)return"warn";if(t.value>=ji.value)return"log"}return"debug"}(t.j),e,t.a)}};var Qi,Yi=f.console;function Xi(t,e){Qi&&Qi.log(Ui,t,e)}Qi=function t(e){var n;if(Vi(),!(n=qi[e])){n=new Oi(e);var r=e.lastIndexOf("."),i=e.substr(r+1);(r=t(e.substr(0,r))).h||(r.h={}),r.h[i]=n,n.f=r,qi[e]=n}return n}("firebaseui");var Ji=new Zi;if(1!=Ji.f){var to;Vi(),to=$i;var eo=Ji.s;to.a||(to.a=[]),to.a.push(eo),Ji.f=!0}function no(t){Qi&&Qi.log(Fi,t,void 0)}function ro(t,e,n,r){this.a=t,this.h=e||null,this.j=n||null,this.f=r||null}function io(t){return t.email?new ro(t.email,t.displayName,t.photoUrl,t.providerId):null}function oo(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function ao(t){t=(t.a.cookie||"").split(";");for(var e,n,r=[],i=[],o=0;o<t.length;o++)-1==(e=(n=J(t[o])).indexOf("="))?(r.push(""),i.push(n)):(r.push(n.substring(0,e)),i.push(n.substring(e+1)));return{keys:r,values:i}}ro.prototype.aa=function(){return{email:this.a,displayName:this.h,photoUrl:this.j,providerId:this.f}},(t=oo.prototype).set=function(t,e,n,r,i,o){if(/[;=\s]/.test(t))throw Error('Invalid cookie name "'+t+'"');if(/[;\r\n]/.test(e))throw Error('Invalid cookie value "'+e+'"');p(n)||(n=-1),i=i?";domain="+i:"",r=r?";path="+r:"",o=o?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(L()+1e3*n).toUTCString(),this.a.cookie=t+"="+e+i+r+n+o},t.get=function(t,e){for(var n,r=t+"=",i=(this.a.cookie||"").split(";"),o=0;o<i.length;o++){if(0==(n=J(i[o])).lastIndexOf(r,0))return n.substr(r.length);if(n==t)return""}return e},t.ja=function(){return ao(this).keys},t.la=function(){return ao(this).values},t.clear=function(){for(var t=ao(this).keys,e=t.length-1;0<=e;e--){var n=t[e];this.get(n),this.set(n,"",0,void 0,void 0)}};var so=new oo;function uo(){}function co(t,e,n,r){this.h=null!=t?t:-1,this.f=e||null,this.a=n||null,this.j=!!r}function lo(t,e){this.f=t,this.a=e||null}function ho(t){if(t&&t.email){var n=t.credential&&e.auth.AuthCredential.fromJSON(t.credential);return new lo(t.email,n)}return null}function fo(t){this.a=t||null}function po(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);255<i&&(e[n++]=255&i,i>>=8),e[n++]=i}return e}function mo(t){return $(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}function go(t){for(this.i=t,this.f=this.i.length/4,this.j=this.f+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(vo*(this.j+1)),t=0;t<this.f;t++)this.a[t]=[this.i[4*t],this.i[4*t+1],this.i[4*t+2],this.i[4*t+3]];var e=Array(4);for(t=this.f;t<vo*(this.j+1);t++){if(e[0]=this.a[t-1][0],e[1]=this.a[t-1][1],e[2]=this.a[t-1][2],e[3]=this.a[t-1][3],0==t%this.f){var n=e,r=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=r,xo(e),e[0]^=Co[t/this.f][0],e[1]^=Co[t/this.f][1],e[2]^=Co[t/this.f][2],e[3]^=Co[t/this.f][3]}else 6<this.f&&4==t%this.f&&xo(e);this.a[t]=Array(4),this.a[t][0]=this.a[t-this.f][0]^e[0],this.a[t][1]=this.a[t-this.f][1]^e[1],this.a[t][2]=this.a[t-this.f][2]^e[2],this.a[t][3]=this.a[t-this.f][3]^e[3]}}s(co,uo),co.prototype.set=function(t,e){so.set(t,e,this.h,this.f,this.a,this.j)},co.prototype.get=function(t){return so.get(t)||null},co.prototype.ra=function(t){var e=this.f,n=this.a;so.get(t),so.set(t,"",0,e,n)},lo.prototype.aa=function(){return{email:this.f,credential:this.a&&this.a.toJSON()}},fo.prototype.aa=function(){return{tenantId:this.a}},go.prototype.w=16;var vo=go.prototype.w/4;function yo(t,e){for(var n,r=0;r<vo;r++)for(var i=0;4>i;i++)n=e[n=4*i+r],t.h[r][i]=n}function bo(t){for(var e=[],n=0;n<vo;n++)for(var r=0;4>r;r++)e[4*r+n]=t.h[n][r];return e}function wo(t,e){for(var n=0;4>n;n++)for(var r=0;4>r;r++)t.h[n][r]^=t.a[4*e+r][n]}function _o(t,e){for(var n=0;4>n;n++)for(var r=0;4>r;r++)t.h[n][r]=e[t.h[n][r]]}function ko(t){for(var e=1;4>e;e++)for(var n=0;4>n;n++)t.s[e][n]=t.h[e][n];for(e=1;4>e;e++)for(n=0;4>n;n++)t.h[e][n]=t.s[e][(n+e)%vo]}function Eo(t){for(var e=1;4>e;e++)for(var n=0;4>n;n++)t.s[e][(n+e)%vo]=t.h[e][n];for(e=1;4>e;e++)for(n=0;4>n;n++)t.h[e][n]=t.s[e][n]}function xo(t){t[0]=So[t[0]],t[1]=So[t[1]],t[2]=So[t[2]],t[3]=So[t[3]]}var So=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],To=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Co=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Io=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Ao=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],Po=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Mo=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],No=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Lo=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function Do(t,e){t=new go(Oo(t));for(var n,r=Y(e=po(e),0,16),i="";r.length;){n=16-r.length;for(var o=0;o<n;o++)r.push(0);for(yo(n=t,r),wo(n,0),r=1;r<n.j;++r){_o(n,So),ko(n),o=n.h;for(var a=n.s[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=Io[a[0]]^Ao[a[1]]^a[2]^a[3],o[1][s]=a[0]^Io[a[1]]^Ao[a[2]]^a[3],o[2][s]=a[0]^a[1]^Io[a[2]]^Ao[a[3]],o[3][s]=Ao[a[0]]^a[1]^a[2]^Io[a[3]];wo(n,r)}_o(n,So),ko(n),wo(n,n.j),i+=mo(bo(n)),r=Y(e,0,16)}return i}function Ro(t,e){t=new go(Oo(t));for(var n=[],r=0;r<e.length;r+=2)n.push(parseInt(e.substring(r,r+2),16));var i=Y(n,0,16);for(e="";i.length;){for(yo(r=t,i),wo(r,r.j),i=1;i<r.j;++i){Eo(r),_o(r,To),wo(r,r.j-i);for(var o=r.h,a=r.s[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=Lo[a[0]]^Mo[a[1]]^No[a[2]]^Po[a[3]],o[1][s]=Po[a[0]]^Lo[a[1]]^Mo[a[2]]^No[a[3]],o[2][s]=No[a[0]]^Po[a[1]]^Lo[a[2]]^Mo[a[3]],o[3][s]=Mo[a[0]]^No[a[1]]^Po[a[2]]^Lo[a[3]]}if(Eo(r),_o(r,To),wo(r,0),8192>=(r=bo(r)).length)r=String.fromCharCode.apply(null,r);else{for(i="",o=0;o<r.length;o+=8192)i+=String.fromCharCode.apply(null,X(r,o,o+8192));r=i}e+=r,i=Y(n,0,16)}return e.replace(/(\x00)+$/,"")}function Oo(t){for(var e=32-(t=po(t.substring(0,32))).length,n=0;n<e;n++)t.push(0);return t}function Bo(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(_(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),qo(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":qo(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Uo,t,e),e.join("")}function Uo(){}var Fo={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},jo=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function qo(t,e){e.push('"',t.replace(jo,(function(t){var e=Fo[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Fo[t]=e),e})),'"')}function $o(t){this.a=t}function Vo(){}function zo(t){this.a=t}function Ho(t){if(!t.a)return!1;try{return t.a.setItem("__sak","1"),t.a.removeItem("__sak"),!0}catch(t){return!1}}function Go(){var t=null;try{t=window.localStorage||null}catch(t){}this.a=t}function Wo(){var t=null;try{t=window.sessionStorage||null}catch(t){}this.a=t}function Ko(t,e){this.f=t,this.a=e+"::"}$o.prototype.set=function(t,e){p(e)?this.a.set(t,Bo(e)):this.a.ra(t)},$o.prototype.get=function(t){try{var e=this.a.get(t)}catch(t){return}if(null!==e)try{return JSON.parse(e)}catch(t){throw"Storage: Invalid value was encountered"}},R(Vo,uo),Vo.prototype.clear=function(){var t=gt(this.ha(!0)),e=this;j(t,(function(t){e.ra(t)}))},R(zo,Vo),(t=zo.prototype).set=function(t,e){try{this.a.setItem(t,e)}catch(t){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},t.get=function(t){if(!m(t=this.a.getItem(t))&&null!==t)throw"Storage mechanism: Invalid value was encountered";return t},t.ra=function(t){this.a.removeItem(t)},t.ha=function(t){var e=0,n=this.a,r=new pt;return r.next=function(){if(e>=n.length)throw ft;var r=n.key(e++);if(t)return r;if(!m(r=n.getItem(r)))throw"Storage mechanism: Invalid value was encountered";return r},r},t.clear=function(){this.a.clear()},t.key=function(t){return this.a.key(t)},R(Go,zo),R(Wo,zo),R(Ko,Vo),Ko.prototype.set=function(t,e){this.f.set(this.a+t,e)},Ko.prototype.get=function(t){return this.f.get(this.a+t)},Ko.prototype.ra=function(t){this.f.ra(this.a+t)},Ko.prototype.ha=function(t){var e=this.f.ha(!0),n=this,r=new pt;return r.next=function(){for(var r=e.next();r.substr(0,n.a.length)!=n.a;)r=e.next();return t?r.substr(n.a.length):n.f.get(r)},r};var Zo=new Go,Qo=new $o(Ho(Zo)?new Ko(Zo,"firebaseui"):null),Yo=new Wo,Xo=new $o(Ho(Yo)?new Ko(Yo,"firebaseui"):null),Jo={name:"pendingEmailCredential",storage:Xo},ta={name:"redirectStatus",storage:Xo},ea={name:"redirectUrl",storage:Xo},na={name:"rememberAccount",storage:Xo},ra={name:"rememberedAccounts",storage:Qo},ia={name:"emailForSignIn",storage:new $o(new co(3600,"/"))},oa={name:"pendingEncryptedCredential",storage:new $o(new co(3600,"/"))};function aa(t,e){return t.storage.get(e?t.name+":"+e:t.name)}function sa(t,e){t.storage.a.ra(e?t.name+":"+e:t.name)}function ua(t,e,n){t.storage.set(n?t.name+":"+n:t.name,e)}function ca(t){return aa(ea,t)||null}function la(t,e){ua(ea,t,e)}function ha(t,e){ua(na,t,e)}function da(t){return t=aa(ra,t)||[],t=$(t,(function(t){return io(t)})),q(t,(function(t){return null!=t}))}function fa(t){return ho(t=aa(Jo,t)||null)}function pa(t){sa(Jo,t)}function ma(t,e){ua(Jo,t.aa(),e)}function ga(t){return(t=aa(ta,t)||null)&&void 0!==t.tenantId?new fo(t.tenantId):null}function va(t,e){ua(ta,t.aa(),e)}function ya(){this.V={}}function ba(t,e,n){if(e.toLowerCase()in t.V)throw Error("Configuration "+e+" has already been defined.");t.V[e.toLowerCase()]=n}function wa(t,e,n){if(!(e.toLowerCase()in t.V))throw Error("Configuration "+e+" is not defined.");t.V[e.toLowerCase()]=n}function _a(t,e){if(!(t=t.get(e)))throw Error("Configuration "+e+" is required.");return t}function ka(){this.f=void 0,this.a={}}function Ea(t,e,n,r){for(var i=0;i<e.length;i++){var o=e.charAt(i);t.a[o]||(t.a[o]=new ka),t=t.a[o]}if(r&&void 0!==t.f)throw Error('The collection already contains the key "'+e+'"');t.f=n}function xa(t){for(this.a=t,this.f=new ka,t=0;t<this.a.length;t++){var e=this.f.get("+"+this.a[t].b);e?e.push(this.a[t]):this.f.add("+"+this.a[t].b,[this.a[t]])}}function Sa(t,e){var n={},r=0;for(void 0!==(t=t.f).f&&(n[r]=t.f);r<e.length;r++){var i=e.charAt(r);if(!(i in t.a))break;void 0!==(t=t.a[i]).f&&(n[r]=t.f)}for(var o in n)if(n.hasOwnProperty(o))return n[o];return[]}function Ta(t){for(var e=0;e<Pa.length;e++)if(Pa[e].c===t)return Pa[e];return null}function Ca(t){t=t.toUpperCase();for(var e=[],n=0;n<Pa.length;n++)Pa[n].g===t&&e.push(Pa[n]);return e}function Ia(t){if(0<t.length&&"+"==t.charAt(0)){t=t.substring(1);for(var e=[],n=0;n<Pa.length;n++)Pa[n].b==t&&e.push(Pa[n]);t=e}else t=Ca(t);return t}function Aa(t){t.sort((function(t,e){return t.name.localeCompare(e.name,"en")}))}ya.prototype.get=function(t){if(!(t.toLowerCase()in this.V))throw Error("Configuration "+t+" is not defined.");return this.V[t.toLowerCase()]},(t=ka.prototype).set=function(t,e){Ea(this,t,e,!1)},t.add=function(t,e){Ea(this,t,e,!0)},t.get=function(t){t:{for(var e=this,n=0;n<t.length;n++)if(!(e=e.a[t.charAt(n)])){t=void 0;break t}t=e}return t?t.f:void 0},t.la=function(){var t=[];return function t(e,n){for(var r in void 0!==e.f&&n.push(e.f),e.a)t(e.a[r],n)}(this,t),t},t.ja=function(){var t=[];return function t(e,n,r){for(var i in void 0!==e.f&&r.push(n),e.a)t(e.a[i],n+i,r)}(this,"",t),t},t.clear=function(){this.a={},this.f=void 0};var Pa=[{name:"Afghanistan",c:"93-AF-0",b:"93",g:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",g:"AX"},{name:"Albania",c:"355-AL-0",b:"355",g:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",g:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",g:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",g:"AD"},{name:"Angola",c:"244-AO-0",b:"244",g:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",g:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",g:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",g:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",g:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",g:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",g:"AC"},{name:"Australia",c:"61-AU-0",b:"61",g:"AU"},{name:"Austria",c:"43-AT-0",b:"43",g:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",g:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",g:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",g:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",g:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",g:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",g:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",g:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",g:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",g:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",g:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",g:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",g:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",g:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",g:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",g:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",g:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",g:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",g:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",g:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",g:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",g:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",g:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",g:"CM"},{name:"Canada",c:"1-CA-0",b:"1",g:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",g:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",g:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",g:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",g:"CF"},{name:"Chad",c:"235-TD-0",b:"235",g:"TD"},{name:"Chile",c:"56-CL-0",b:"56",g:"CL"},{name:"China",c:"86-CN-0",b:"86",g:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",g:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",g:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",g:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",g:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",g:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",g:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",g:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",g:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",g:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",g:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",g:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",g:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",g:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",g:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",g:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",g:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",g:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",g:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",g:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",g:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",g:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",g:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",g:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",g:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",g:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",g:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",g:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",g:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",g:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",g:"FI"},{name:"France",c:"33-FR-0",b:"33",g:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",g:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",g:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",g:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",g:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",g:"GE"},{name:"Germany",c:"49-DE-0",b:"49",g:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",g:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",g:"GI"},{name:"Greece",c:"30-GR-0",b:"30",g:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",g:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",g:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",g:"GP"},{name:"Guam",c:"1-GU-0",b:"1",g:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",g:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",g:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",g:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",g:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",g:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",g:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",g:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",g:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",g:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",g:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",g:"IS"},{name:"India",c:"91-IN-0",b:"91",g:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",g:"ID"},{name:"Iran",c:"98-IR-0",b:"98",g:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",g:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",g:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",g:"IM"},{name:"Israel",c:"972-IL-0",b:"972",g:"IL"},{name:"Italy",c:"39-IT-0",b:"39",g:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",g:"JM"},{name:"Japan",c:"81-JP-0",b:"81",g:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",g:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",g:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",g:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",g:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",g:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",g:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",g:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",g:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",g:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",g:"KG"},{name:"Laos",c:"856-LA-0",b:"856",g:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",g:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",g:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",g:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",g:"LR"},{name:"Libya",c:"218-LY-0",b:"218",g:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",g:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",g:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",g:"LU"},{name:"Macau",c:"853-MO-0",b:"853",g:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",g:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",g:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",g:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",g:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",g:"MV"},{name:"Mali",c:"223-ML-0",b:"223",g:"ML"},{name:"Malta",c:"356-MT-0",b:"356",g:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",g:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",g:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",g:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",g:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",g:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",g:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",g:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",g:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",g:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",g:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",g:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",g:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",g:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",g:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",g:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",g:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",g:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",g:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",g:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",g:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",g:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",g:"NI"},{name:"Niger",c:"227-NE-0",b:"227",g:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",g:"NG"},{name:"Niue",c:"683-NU-0",b:"683",g:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",g:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",g:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",g:"MP"},{name:"Norway",c:"47-NO-0",b:"47",g:"NO"},{name:"Oman",c:"968-OM-0",b:"968",g:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",g:"PK"},{name:"Palau",c:"680-PW-0",b:"680",g:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",g:"PS"},{name:"Panama",c:"507-PA-0",b:"507",g:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",g:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",g:"PY"},{name:"Peru",c:"51-PE-0",b:"51",g:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",g:"PH"},{name:"Poland",c:"48-PL-0",b:"48",g:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",g:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",g:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",g:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",g:"RE"},{name:"Romania",c:"40-RO-0",b:"40",g:"RO"},{name:"Russia",c:"7-RU-0",b:"7",g:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",g:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",g:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",g:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",g:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",g:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",g:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",g:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",g:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",g:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",g:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",g:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",g:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",g:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",g:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",g:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",g:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",g:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",g:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",g:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",g:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",g:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",g:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",g:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",g:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",g:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",g:"SS"},{name:"Spain",c:"34-ES-0",b:"34",g:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",g:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",g:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",g:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",g:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",g:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",g:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",g:"CH"},{name:"Syria",c:"963-SY-0",b:"963",g:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",g:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",g:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",g:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",g:"TH"},{name:"Togo",c:"228-TG-0",b:"228",g:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",g:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",g:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",g:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",g:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",g:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",g:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",g:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",g:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",g:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",g:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",g:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",g:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",g:"GB"},{name:"United States",c:"1-US-0",b:"1",g:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",g:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",g:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",g:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",g:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",g:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",g:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",g:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",g:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",g:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",g:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",g:"ZW"}];Aa(Pa);var Ma=new xa(Pa);function Na(t,e){this.a=t,this.za=e}function La(t){t=J(t);var e=Sa(Ma,t);return 0<e.length?new Na("1"==e[0].b?"1-US-0":e[0].c,J(t.substr(e[0].b.length+1))):null}function Da(t){var e=Ta(t.a);if(!e)throw Error("Country ID "+t.a+" not found.");return"+"+e.b+t.za}function Ra(t,e){for(var n=0;n<t.length;n++)if(!H(Oa,t[n])&&(null!==Ba&&t[n]in Ba||H(e,t[n])))return t[n];return null}var Oa=["emailLink","password","phone"],Ba={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function Ua(){this.a=new ya,ba(this.a,"acUiConfig"),ba(this.a,"autoUpgradeAnonymousUsers"),ba(this.a,"callbacks"),ba(this.a,"credentialHelper",fs),ba(this.a,"immediateFederatedRedirect",!1),ba(this.a,"popupMode",!1),ba(this.a,"privacyPolicyUrl"),ba(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),ba(this.a,"queryParameterForWidgetMode","mode"),ba(this.a,"signInFlow"),ba(this.a,"signInOptions"),ba(this.a,"signInSuccessUrl"),ba(this.a,"siteName"),ba(this.a,"tosUrl"),ba(this.a,"widgetUrl")}function Fa(t){var e=t.a.get("widgetUrl")||di();return ja(t,e)}function ja(t,e){t=Qa(t);for(var n,r=e.search(Et),i=0,o=[];0<=(n=_t(e,i,t,r));)o.push(e.substring(i,n)),i=Math.min(e.indexOf("&",n)+1||r,r);return o.push(e.substr(i)),e=o.join("").replace(St,"$1"),(t+=r="="+encodeURIComponent("select"))?(0>(r=e.indexOf("#"))&&(r=e.length),0>(i=e.indexOf("?"))||i>r?(i=r,n=""):n=e.substring(i+1,r),r=(e=[e.substr(0,i),n,e.substr(r)])[1],e[1]=t?r?r+"&"+t:t:r,t=e[0]+(e[1]?"?"+e[1]:"")+e[2]):t=e,t}function qa(t){var e=!!t.a.get("autoUpgradeAnonymousUsers");return e&&!as(t)&&Xi('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),e}function $a(t){t=t.a.get("signInOptions")||[];for(var e=[],n=0;n<t.length;n++){var r=t[n];(r=x(r)?r:{provider:r}).provider&&e.push(r)}return e}function Va(t,e){t=$a(t);for(var n=0;n<t.length;n++)if(t[n].provider===e)return t[n];return null}function za(t){return $($a(t),(function(t){return t.provider}))}function Ha(t,e){t=Ga(t);for(var n=0;n<t.length;n++)if(t[n].providerId===e)return t[n];return null}function Ga(t){return $($a(t),(function(t){return Ba[t.provider]||H(ws,t.provider)?{providerId:t.provider}:{providerId:t.provider,rb:t.providerName||null,Ga:t.buttonColor||null,Na:t.iconUrl?Ae(Ne(t.iconUrl)):null,Nb:t.loginHintKey||null}}))}function Wa(t,e){return _(t=(t=Va(t,e))&&t.scopes)?t:[]}function Ka(t,n){return x(t=(t=Va(t,n))&&t.customParameters)?(t=lt(t),n===e.auth.GoogleAuthProvider.PROVIDER_ID&&delete t.login_hint,n===e.auth.GithubAuthProvider.PROVIDER_ID&&delete t.login,t):null}function Za(t){if(!(t=Va(t,e.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var n=t.whitelistedCountries,r=t.blacklistedCountries;if(void 0!==n&&(!_(n)||0==n.length))throw Error("WhitelistedCountries must be a non-empty array.");if(void 0!==r&&!_(r))throw Error("BlacklistedCountries must be an array.");if(n&&r)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!n&&!r)return Pa;if(t=[],n){r={};for(var i=0;i<n.length;i++)for(var o=Ia(n[i]),a=0;a<o.length;a++)r[o[a].c]=o[a];for(var s in r)r.hasOwnProperty(s)&&t.push(r[s])}else{for(s={},n=0;n<r.length;n++)for(o=Ia(r[n]),i=0;i<o.length;i++)s[o[i].c]=o[i];for(o=0;o<Pa.length;o++)null!==s&&Pa[o].c in s||t.push(Pa[o])}return t}function Qa(t){return _a(t.a,"queryParameterForWidgetMode")}function Ya(t){var e=t.a.get("tosUrl")||null;if(t=t.a.get("privacyPolicyUrl")||null,e&&!t&&no("Privacy Policy URL is missing, the link will not be displayed."),e&&t){if(E(e))return e;if("string"==typeof e)return function(){li(e)}}return null}function Xa(t){var e=t.a.get("tosUrl")||null,n=t.a.get("privacyPolicyUrl")||null;if(n&&!e&&no("Term of Service URL is missing, the link will not be displayed."),e&&n){if(E(n))return n;if("string"==typeof n)return function(){li(n)}}return null}function Ja(t){return!(t=Va(t,e.auth.EmailAuthProvider.PROVIDER_ID))||void 0===t.requireDisplayName||!!t.requireDisplayName}function ts(t){return!(!(t=Va(t,e.auth.EmailAuthProvider.PROVIDER_ID))||t.signInMethod!==e.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function es(t){var e=!!t.a.get("immediateFederatedRedirect"),n=za(t);return t=ns(t),e&&1==n.length&&!H(Oa,n[0])&&t==vs}function ns(t){for(var e in t=t.a.get("signInFlow"),ys)if(ys[e]==t)return ys[e];return vs}function rs(t){return ss(t).uiShown||null}function is(t){return ss(t).signInSuccess||null}function os(t){return ss(t).signInSuccessWithAuthResult||null}function as(t){return ss(t).signInFailure||null}function ss(t){return t.a.get("callbacks")||{}}function us(t){if("http:"!==(window.location&&window.location.protocol)&&"https:"!==(window.location&&window.location.protocol))return ms;for(var e in t=t.a.get("credentialHelper"),gs)if(gs[e]==t)return gs[e];return fs}var cs,ls,hs,ds,fs="accountchooser.com",ps="googleyolo",ms="none",gs={jc:fs,mc:ps,NONE:ms},vs="redirect",ys={pc:"popup",qc:vs},bs={lc:"callback",RECOVER_EMAIL:"recoverEmail",rc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",sc:"select",tc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},ws=["anonymous"],_s=["sitekey","tabindex","callback","expired-callback"],ks={};function Es(t,e,n,r){ks[t].apply(null,Array.prototype.slice.call(arguments,1))}var xs=null;function Ss(t){return!(!t||-32e3!=t.code||"Service unavailable"!=t.message)}function Ts(t,e,n,r){xs||(t={callbacks:{empty:t,select:function(t,r){t&&t.account&&e?e(io(t.account)):n&&n(!Ss(r))},store:t,update:t},language:"en",providers:void 0,ui:r},"undefined"!=typeof accountchooser&&accountchooser.Api&&accountchooser.Api.init?xs=accountchooser.Api.init(t):(xs=new Is(t),function(){var t=xs;E(t.a.callbacks.empty)&&t.a.callbacks.empty()}()))}function Cs(t,e,n){function r(){var t=Mt(window.location.href,n).toString();xs.select($(e||[],(function(t){return t.aa()})),{clientCallbackUrl:t})}e&&e.length?r():xs.checkEmpty((function(e,n){e||n?t(!Ss(n)):r()}))}function Is(t){this.a=t,this.a.callbacks=this.a.callbacks||{}}(t=Is.prototype).store=function(){E(this.a.callbacks.store)&&this.a.callbacks.store(void 0,As)},t.select=function(){E(this.a.callbacks.select)&&this.a.callbacks.select(void 0,As)},t.update=function(){E(this.a.callbacks.update)&&this.a.callbacks.update(void 0,As)},t.checkDisabled=function(t){t(!0)},t.checkEmpty=function(t){t(void 0,As)},t.checkAccountExist=function(t,e){e(void 0,As)},t.checkShouldUpdate=function(t,e){e(void 0,As)};var As={code:-32e3,message:"Service unavailable",data:"Service is unavailable."},Ps=/MSIE ([\d.]+).*Windows NT ([\d.]+)/,Ms=/Firefox\/([\d.]+)/,Ns=/Opera[ \/]([\d.]+)(.*Version\/([\d.]+))?/,Ls=/Chrome\/([\d.]+)/,Ds=/((Windows NT ([\d.]+))|(Mac OS X ([\d_]+))).*Version\/([\d.]+).*Safari/,Rs=/Mac OS X;.*(?!(Version)).*Safari/,Os=/Android ([\d.]+).*Safari/,Bs=/OS ([\d_]+) like Mac OS X.*Mobile.*Safari/,Us=/Konqueror\/([\d.]+)/,Fs=/MSIE ([\d.]+).*Windows Phone OS ([\d.]+)/;function js(t,e){for(t=t.split(e||"."),this.a=[],e=0;e<t.length;e++)this.a.push(parseInt(t[e],10))}function qs(t,e){return 0<=function(t,e){e instanceof js||(e=new js(String(e)));for(var n=Math.max(t.a.length,e.a.length),r=0;r<n;r++){var i=t.a[r],o=e.a[r];if(void 0!==i&&void 0!==o&&i!==o)return i-o;if(void 0===i)return-1;if(void 0===o)return 1}return 0}(t,e)}function $s(t){return t.classList?t.classList:m(t=t.className)&&t.match(/\S+/g)||[]}function Vs(t,e){return t.classList?t.classList.contains(e):H($s(t),e)}function zs(t,e){t.classList?t.classList.add(e):Vs(t,e)||(t.className+=0<t.className.length?" "+e:e)}function Hs(t,e){t.classList?t.classList.remove(e):Vs(t,e)&&(t.className=q($s(t),(function(t){return t!=e})).join(" "))}function Gs(t){var e=t.type;switch(m(e)&&e.toLowerCase()){case"checkbox":case"radio":return t.checked?t.value:null;case"select-one":return 0<=(e=t.selectedIndex)?t.options[e].value:null;case"select-multiple":e=[];for(var n,r=0;n=t.options[r];r++)n.selected&&e.push(n.value);return e.length?e:null;default:return null!=t.value?t.value:null}}function Ws(t,e){var n=t.type;switch(m(n)&&n.toLowerCase()){case"checkbox":case"radio":t.checked=e;break;case"select-one":if(t.selectedIndex=-1,m(e))for(var r=0;n=t.options[r];r++)if(n.value==e){n.selected=!0;break}break;case"select-multiple":for(m(e)&&(e=[e]),r=0;n=t.options[r];r++)if(n.selected=!1,e)for(var i,o=0;i=e[o];o++)n.value==i&&(n.selected=!0);break;default:t.value=null!=e?e:""}}function Ks(t,e,n,r,i,o){if(ce&&!ye("525"))return!0;if(he&&i)return Zs(t);if(i&&!r)return!1;if(!ue&&("number"==typeof e&&(e=Qs(e)),(!n||he)&&(17==e||18==e||he&&91==e)||he&&16==e&&(r||o)))return!1;if((ce||ae)&&r&&n)switch(t){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(oe&&r&&e==t)return!1;switch(t){case 13:return!ue||!o&&!i&&!(n&&r);case 27:return!(ce||ae||ue)}return(!ue||!(r||i||o))&&Zs(t)}function Zs(t){if(48<=t&&57>=t||96<=t&&106>=t||65<=t&&90>=t||(ce||ae)&&0==t)return!0;switch(t){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return ue;default:return!1}}function Qs(t){if(ue)t=function(t){switch(t){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return t}}(t);else if(he&&ce)switch(t){case 93:t=91}return t}function Ys(t){wr.call(this),this.a=t,ur(t,"keydown",this.f,!1,this),ur(t,"click",this.h,!1,this)}function Xs(t,e){var n=new tu(e);if(_r(t,n)){n=new Js(e);try{_r(t,n)}finally{e.stopPropagation()}}}function Js(t){Yn.call(this,t.a),this.type="action"}function tu(t){Yn.call(this,t.a),this.type="beforeaction"}function eu(t){wr.call(this),this.a=t,t=oe?"focusout":"blur",this.f=ur(this.a,oe?"focusin":"focus",this,!oe),this.h=ur(this.a,t,this,!oe)}function nu(t,e){wr.call(this),this.f=t||1,this.a=e||f,this.h=A(this.fc,this),this.j=L()}function ru(t){t.Ka=!1,t.$&&(t.a.clearTimeout(t.$),t.$=null)}function iu(t){Vn.call(this),this.f=t,this.a={}}R(Ys,wr),Ys.prototype.f=function(t){(13==t.keyCode||ce&&3==t.keyCode)&&Xs(this,t)},Ys.prototype.h=function(t){Xs(this,t)},Ys.prototype.m=function(){Ys.M.m.call(this),hr(this.a,"keydown",this.f,!1,this),hr(this.a,"click",this.h,!1,this),delete this.a},R(Js,Yn),R(tu,Yn),R(eu,wr),eu.prototype.handleEvent=function(t){var e=new Yn(t.a);e.type="focusin"==t.type||"focus"==t.type?"focusin":"focusout",_r(this,e)},eu.prototype.m=function(){eu.M.m.call(this),dr(this.f),dr(this.h),delete this.a},R(nu,wr),(t=nu.prototype).Ka=!1,t.$=null,t.fc=function(){if(this.Ka){var t=L()-this.j;0<t&&t<.8*this.f?this.$=this.a.setTimeout(this.h,this.f-t):(this.$&&(this.a.clearTimeout(this.$),this.$=null),_r(this,"tick"),this.Ka&&(ru(this),this.start()))}},t.start=function(){this.Ka=!0,this.$||(this.$=this.a.setTimeout(this.h,this.f),this.j=L())},t.m=function(){nu.M.m.call(this),ru(this),delete this.a},R(iu,Vn);var ou=[];function au(t,e,n,r){_(n)||(n&&(ou[0]=n.toString()),n=ou);for(var i=0;i<n.length;i++){var o=ur(e,n[i],r||t.handleEvent,!1,t.f||t);if(!o)break;t.a[o.key]=o}}function su(t){ct(t.a,(function(t,e){this.a.hasOwnProperty(e)&&dr(t)}),t),t.a={}}function uu(t){wr.call(this),this.a=null,this.f=t,t=oe||ae||ce&&!ye("531")&&"TEXTAREA"==t.tagName,this.h=new iu(this),au(this.h,this.f,t?["keydown","paste","cut","drop","input"]:"input",this)}function cu(t){null!=t.a&&(f.clearTimeout(t.a),t.a=null)}function lu(t){return(t=new Yn(t.a)).type="input",t}function hu(t,e){wr.call(this),t&&(this.Pa&&gu(this),this.qa=t,this.Oa=ur(this.qa,"keypress",this,e),this.Za=ur(this.qa,"keydown",this.Ib,e,this),this.Pa=ur(this.qa,"keyup",this.Jb,e,this))}iu.prototype.m=function(){iu.M.m.call(this),su(this)},iu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},R(uu,wr),uu.prototype.handleEvent=function(t){if("input"==t.type)oe&&ye(10)&&0==t.keyCode&&0==t.j||(cu(this),_r(this,lu(t)));else if("keydown"!=t.type||function(t){if(t.altKey&&!t.ctrlKey||t.metaKey||112<=t.keyCode&&123>=t.keyCode)return!1;if(Zs(t.keyCode))return!0;switch(t.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!ue;default:return 166>t.keyCode||183<t.keyCode}}(t)){var e="keydown"==t.type?this.f.value:null;oe&&229==t.keyCode&&(e=null);var n=lu(t);cu(this),this.a=function(t,e){if(E(t))e&&(t=A(t,e));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=A(t.handleEvent,t)}return 2147483647<Number(0)?-1:f.setTimeout(t,0)}((function(){this.a=null,this.f.value!=e&&_r(this,n)}),this)}},uu.prototype.m=function(){uu.M.m.call(this),this.h.o(),cu(this),delete this.f},R(hu,wr),(t=hu.prototype).qa=null,t.Oa=null,t.Za=null,t.Pa=null,t.T=-1,t.W=-1,t.Va=!1;var du={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},fu={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},pu=!ce||ye("525"),mu=he&&ue;function gu(t){t.Oa&&(dr(t.Oa),dr(t.Za),dr(t.Pa),t.Oa=null,t.Za=null,t.Pa=null),t.qa=null,t.T=-1,t.W=-1}function vu(t,e,n,r){Yn.call(this,r),this.type="key",this.keyCode=t,this.j=e,this.repeat=n}function yu(t,e,n,r){this.top=t,this.right=e,this.bottom=n,this.left=r}function bu(t,e){var n=tn(t);return n.defaultView&&n.defaultView.getComputedStyle&&(t=n.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""}function wu(t){try{var e=t.getBoundingClientRect()}catch(t){return{left:0,top:0,right:0,bottom:0}}return oe&&t.ownerDocument.body&&(t=t.ownerDocument,e.left-=t.documentElement.clientLeft+t.body.clientLeft,e.top-=t.documentElement.clientTop+t.body.clientTop),e}function _u(t){var e=tn(t),n=new He(0,0),r=e?tn(e):document;return t==(r=!oe||9<=Number(ge)||"CSS1Compat"==We(r).a.compatMode?r.documentElement:r.body)?n:(t=wu(t),e=Xe(r=We(e).a),r=r.parentWindow||r.defaultView,e=oe&&ye("10")&&r.pageYOffset!=e.scrollTop?new He(e.scrollLeft,e.scrollTop):new He(r.pageXOffset||e.scrollLeft,r.pageYOffset||e.scrollTop),n.a=t.left+e.a,n.f=t.top+e.f,n)}(t=hu.prototype).Ib=function(t){(ce||ae)&&(17==this.T&&!t.ctrlKey||18==this.T&&!t.altKey||he&&91==this.T&&!t.metaKey)&&(this.W=this.T=-1),-1==this.T&&(t.ctrlKey&&17!=t.keyCode?this.T=17:t.altKey&&18!=t.keyCode?this.T=18:t.metaKey&&91!=t.keyCode&&(this.T=91)),pu&&!Ks(t.keyCode,this.T,t.shiftKey,t.ctrlKey,t.altKey,t.metaKey)?this.handleEvent(t):(this.W=Qs(t.keyCode),mu&&(this.Va=t.altKey))},t.Jb=function(t){this.W=this.T=-1,this.Va=t.altKey},t.handleEvent=function(t){var e=t.a,n=e.altKey;if(oe&&"keypress"==t.type)var r=this.W,i=13!=r&&27!=r?e.keyCode:0;else(ce||ae)&&"keypress"==t.type?(r=this.W,i=0<=e.charCode&&63232>e.charCode&&Zs(r)?e.charCode:0):ie&&!ce?i=Zs(r=this.W)?e.keyCode:0:("keypress"==t.type?(mu&&(n=this.Va),e.keyCode==e.charCode?32>e.keyCode?(r=e.keyCode,i=0):(r=this.W,i=e.charCode):(r=e.keyCode||this.W,i=e.charCode||0)):(r=e.keyCode||this.W,i=e.charCode||0),he&&63==i&&224==r&&(r=191));var o=r=Qs(r);r?63232<=r&&r in du?o=du[r]:25==r&&t.shiftKey&&(o=9):e.keyIdentifier&&e.keyIdentifier in fu&&(o=fu[e.keyIdentifier]),ue&&pu&&"keypress"==t.type&&!Ks(o,this.T,t.shiftKey,t.ctrlKey,n,t.metaKey)||(t=o==this.T,this.T=o,(e=new vu(o,i,t,e)).altKey=n,_r(this,e))},t.R=function(){return this.qa},t.m=function(){hu.M.m.call(this),gu(this)},R(vu,Yn),yu.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},yu.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},yu.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},yu.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var ku={thin:2,medium:4,thick:6};function Eu(t,e){if("none"==(t.currentStyle?t.currentStyle[e+"Style"]:null))return 0;var n=t.currentStyle?t.currentStyle[e+"Width"]:null;if(n in ku)t=ku[n];else if(/^\d+px?$/.test(n))t=parseInt(n,10);else{e=t.style.left;var r=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,t.style.left=n,n=t.style.pixelLeft,t.style.left=e,t.runtimeStyle.left=r,t=+n}return t}function xu(){}function Su(t){wr.call(this),this.s=t||We(),this.eb=null,this.na=!1,this.f=null,this.L=void 0,this.oa=this.Ca=this.X=null}function Tu(t,e){return t.f?Ze(e,t.f||t.s.a):null}function Cu(t){return t.L||(t.L=new iu(t)),t.L}function Iu(t,e){t.Ca&&j(t.Ca,e,void 0)}function Au(t,e){var n=nn(t,"firebaseui-textfield");e?(Hs(t,"firebaseui-input-invalid"),zs(t,"firebaseui-input"),n&&Hs(n,"firebaseui-textfield-invalid")):(Hs(t,"firebaseui-input"),zs(t,"firebaseui-input-invalid"),n&&zs(n,"firebaseui-textfield-invalid"))}function Pu(t,e,n){zn(t,P(Hn,e=new uu(e))),au(Cu(t),e,"input",n)}function Mu(t,e,n){zn(t,P(Hn,e=new hu(e))),au(Cu(t),e,"key",(function(t){13==t.keyCode&&(t.stopPropagation(),t.preventDefault(),n(t))}))}function Nu(t,e,n){zn(t,P(Hn,e=new Ys(e))),au(Cu(t),e,"action",(function(t){t.stopPropagation(),t.preventDefault(),n(t)}))}function Lu(t){zs(t,"firebaseui-hidden")}function Du(t,e){e&&en(t,e),Hs(t,"firebaseui-hidden")}function Ru(t){return!Vs(t,"firebaseui-hidden")&&"none"!=t.style.display}function Ou(t){var e=(t=t||{}).email,n=t.disabled,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return r=t.vc?r+"Enter new email address":r+"Email",r+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+kn(null!=e?e:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',yn(r)}function Bu(t){var e='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return e=(t=(t=t||{}).label)?e+pn(t):e+"Next",yn(e+"</button>")}function Uu(){var t=""+Bu({label:wn("Sign In")});return yn(t)}function Fu(){var t=""+Bu({label:wn("Save")});return yn(t)}function ju(){var t=""+Bu({label:wn("Continue")});return yn(t)}function qu(t){var e='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return e=(t=(t=t||{}).label)?e+pn(t):e+"Choose password",yn(e+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function $u(){var t='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return yn((t+="Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function Vu(){return yn('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function zu(t){var e='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return e=(t=(t=t||{}).label)?e+pn(t):e+"Cancel",yn(e+"</button>")}function Hu(t){var e="";return t.G&&t.F&&(e+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),yn(e)}function Gu(t){var e="";return t.G&&t.F&&(e+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),yn(e)}function Wu(t){return t='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+pn(t.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',yn(t)}function Ku(t){var e=t.content;return t=t.Bb,yn('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(t?" "+kn(t):"")+'">'+pn(e)+"</dialog>")}function Zu(t){var e=t.message;return yn(Ku({content:_n('<div class="firebaseui-dialog-icon-wrapper"><div class="'+kn(t.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+pn(e)+"</div>")}))}function Qu(t){for(var e='<div class="firebaseui-list-box-actions">',n=(t=t.items).length,r=0;r<n;r++){var i=t[r];e+='<button type="button" data-listboxid="'+kn(i.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(i.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+kn(i.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+pn(i.label)+"</div></button>"}return e=""+Ku({Bb:wn("firebaseui-list-box-dialog"),content:_n(e+"</div>")}),yn(e)}function Yu(t){return yn((t=t||{}).vb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function Xu(t,e){return vn((t=(t=t||{}).ga).rb?t.rb:e.ib[t.providerId]?""+e.ib[t.providerId]:0==(""+t.providerId).indexOf("saml.")?(""+t.providerId).substring(5):0==(""+t.providerId).indexOf("oidc.")?(""+t.providerId).substring(5):""+t.providerId)}function Ju(t){nc(t,"upgradeElement")}function tc(t){nc(t,"downgradeElements")}b(xu),xu.prototype.a=0,R(Su,wr),(t=Su.prototype).Kb=xu.Ya(),t.R=function(){return this.f},t.$a=function(t){if(this.X&&this.X!=t)throw Error("Method not supported");Su.M.$a.call(this,t)},t.lb=function(){this.f=this.s.a.createElement("DIV")},t.render=function(t){if(this.na)throw Error("Component already rendered");this.f||this.lb(),t?t.insertBefore(this.f,null):this.s.a.body.appendChild(this.f),this.X&&!this.X.na||this.v()},t.v=function(){this.na=!0,Iu(this,(function(t){!t.na&&t.R()&&t.v()}))},t.ya=function(){Iu(this,(function(t){t.na&&t.ya()})),this.L&&su(this.L),this.na=!1},t.m=function(){this.na&&this.ya(),this.L&&(this.L.o(),delete this.L),Iu(this,(function(t){t.o()})),this.f&&Je(this.f),this.X=this.f=this.oa=this.Ca=null,Su.M.m.call(this)},t.removeChild=function(t,e){if(t){var n=m(t)?t:t.eb||(t.eb=":"+(t.Kb.a++).toString(36));if(this.oa&&n?t=(null!==(t=this.oa)&&n in t?t[n]:void 0)||null:t=null,n&&t){var r=this.oa;if(n in r&&delete r[n],G(this.Ca,t),e&&(t.ya(),t.f&&Je(t.f)),null==(e=t))throw Error("Unable to set parent component");e.X=null,Su.M.$a.call(e,null)}}if(!t)throw Error("Child is not in parent component");return t},Wu.A="firebaseui.auth.soy2.element.infoBar",Zu.A="firebaseui.auth.soy2.element.progressDialog",Qu.A="firebaseui.auth.soy2.element.listBoxDialog",Yu.A="firebaseui.auth.soy2.element.busyIndicator";var ec=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function nc(t,e){t&&window.componentHandler&&window.componentHandler[e]&&j(ec,(function(n){Vs(t,n)&&window.componentHandler[e](t),j(Ke(n,t),(function(t){window.componentHandler[e](t)}))}))}function rc(t,e,n){if(ic.call(this),document.body.appendChild(t),t.showModal||window.dialogPolyfill.registerDialog(t),t.showModal(),Ju(t),e&&Nu(this,t,(function(e){var n=t.getBoundingClientRect();(e.clientX<n.left||n.left+n.width<e.clientX||e.clientY<n.top||n.top+n.height<e.clientY)&&ic.call(this)})),!n){var r=this.R().parentElement||this.R().parentNode;if(r){var i=this;this.da=function(){if(t.open){var e=t.getBoundingClientRect().height,n=r.getBoundingClientRect().height,o=r.getBoundingClientRect().top-document.body.getBoundingClientRect().top,a=r.getBoundingClientRect().left-document.body.getBoundingClientRect().left,s=t.getBoundingClientRect().width,u=r.getBoundingClientRect().width;t.style.top=(o+(n-e)/2).toString()+"px",e=a+(u-s)/2,t.style.left=e.toString()+"px",t.style.right=(document.body.getBoundingClientRect().width-e-s).toString()+"px"}else window.removeEventListener("resize",i.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function ic(){var t=oc.call(this);t&&(tc(t),t.open&&t.close(),Je(t),this.da&&window.removeEventListener("resize",this.da))}function oc(){return Ze("firebaseui-id-dialog")}function ac(){Je(sc.call(this))}function sc(){return Tu(this,"firebaseui-id-info-bar")}function uc(){return Tu(this,"firebaseui-id-dismiss-info-bar")}var cc={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},ib:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function lc(t,e,n){for(var r in Qn.call(this,t,e),n)this[r]=n[r]}function hc(t,e,n,r,i){Su.call(this,n),this.gb=t,this.fb=e,this.Da=!1,this.Ea=r||null,this.w=this.ca=null,this.Y=lt(cc),dt(this.Y,i||{})}function dc(t){return t.R().parentElement||t.R().parentNode}function fc(t,e,n){Mu(t,e,(function(){n.focus()}))}function pc(t,e,n){Mu(t,e,(function(){n()}))}function mc(t,e,n){e=(t=t||{}).Wa;var r=t.ia;return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Ou(t)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?zu(null):"")+Bu(null)+'</div></div><div class="firebaseui-card-footer">'+(r?Gu(n):Hu(n))+"</div></form></div>",yn(t)}function gc(t,e,n){return e=(t=t||{}).ia,t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+Ou(t)+$u()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+Vu()+'</div><div class="firebaseui-form-actions">'+Uu()+'</div></div><div class="firebaseui-card-footer">'+(e?Gu(n):Hu(n))+"</div></form></div>",yn(t)}function vc(t,e,n){var r=(t=t||{}).Sb;e=t.Ua;var i=t.ia,o='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+Ou(t);return r?(t='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+kn(null!=(t=(t=t||{}).name)?t:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',t=yn(t)):t="",n=o+t+qu(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?zu(null):"")+Fu()+'</div></div><div class="firebaseui-card-footer">'+(i?Gu(n):Hu(n))+"</div></form></div>",yn(n)}function yc(t,e,n){return e=(t=t||{}).Ua,t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+Ou(t)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?zu(null):"")+Bu({label:wn("Send")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(t)}function bc(t,e,n){e=t.H;var r="";return r+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="Follow the instructions sent to <strong>"+pn(t.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',e&&(r+='<div class="firebaseui-form-actions">'+Bu({label:wn("Done")})+"</div>"),r+='</div><div class="firebaseui-card-footer">'+Hu(n)+"</div></div>",yn(r)}function wc(t,e,n){return yn('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+Yu(null)+"</div></div>")}function _c(t,e,n){return yn('<div class="firebaseui-container firebaseui-id-page-spinner">'+Yu({vb:!0})+"</div>")}function kc(){return yn('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function Ec(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(t="A sign-in email with additional instructions was sent to <strong>"+pn(t.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+yn('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+zu({label:wn("Back")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function xc(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+yn('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+zu({label:wn("Back")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(t)}function Sc(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+Ou(t)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu(null)+Bu(null)+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(t)}function Tc(){var t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu({label:wn("Dismiss")})+"</div></div></div>";return yn(t)}function Cc(){var t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu({label:wn("Dismiss")})+"</div></div></div>";return yn(t)}function Ic(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(t="You’ve already used <strong>"+pn(t.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+$u()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+Vu()+'</div><div class="firebaseui-form-actions">'+Uu()+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Ac(t,e,n){var r=t.email;return e="",t=wn(t=""+Xu(t,n)),e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(r="You’ve already used <strong>"+pn(r)+"</strong>. You can connect your <strong>"+pn(t)+"</strong> account with <strong>"+pn(r)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(t="For this flow to successfully connect your "+pn(t)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Uu()+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Pc(t,e,n){e="";var r=""+Xu(t,n);return e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(t="You originally intended to connect <strong>"+pn(r=wn(r))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(r="If you still want to connect your <strong>"+pn(r)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ju()+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Mc(t,e,n){var r=t.email;return e="",t=wn(t=""+Xu(t,n)),e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(r="You’ve already used <strong>"+pn(r)+"</strong>. Sign in with "+pn(t)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Bu({label:wn("Sign in with "+t)})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Nc(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="To continue sign in with <strong>"+pn(t.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu(null)+Bu({label:wn("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Lc(t){var e="";return e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+('<p class="firebaseui-text">for <strong>'+pn(t.email)+"</strong></p>")+qu(function(t){function e(){}var n={label:wn("New password")};for(var r in e.prototype=t,t=new e,n)t[r]=n[r];return t}(t))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Fu()+"</div></div></form></div>",yn(e)}function Dc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Rc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Oc(t){var e=t.H,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="Your sign-in email address has been changed back to <strong>"+pn(t.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></form></div>",yn(n)}function Bc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Uc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function Fc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function jc(t){var e=t.H,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="You can now sign in with your new email <strong>"+pn(t.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(n)}function qc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function $c(t){var e=t.factorId,n=t.phoneNumber;t=t.H;var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(e){case"phone":r+=e="The <strong>"+pn(e)+" "+pn(n)+"</strong> was removed as a second authentication step.";break;default:r+="The device or app was removed as a second authentication step."}return r+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></form></div>",yn(r)}function Vc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).H?'<div class="firebaseui-form-actions">'+ju()+"</div>":"")+"</div></div>",yn(t)}function zc(t){var e=t.Ab;return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+pn(t.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',e&&(t+=Bu({label:wn("Retry")})),yn(t+"</div></div></div>")}function Hc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+pn(t.errorMessage)+"</p></div></div>",yn(t)}function Gc(t,e,n){var r=t.Pb;return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(t="Continue with "+pn(t.ic)+"?")+'</h2><p class="firebaseui-text">'+(r="You originally wanted to sign in with "+pn(r))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu(null)+Bu({label:wn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form></div>",yn(e)}function Wc(t,e,n){var r='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';e=(t=t.Rb).length;for(var i=0;i<e;i++){var o={ga:t[i]},a=n,s=(o=o||{}).ga,u=o,c="";switch((u=u||{}).ga.providerId){case"google.com":c+="firebaseui-idp-google";break;case"github.com":c+="firebaseui-idp-github";break;case"facebook.com":c+="firebaseui-idp-facebook";break;case"twitter.com":c+="firebaseui-idp-twitter";break;case"phone":c+="firebaseui-idp-phone";break;case"anonymous":c+="firebaseui-idp-anonymous";break;case"password":c+="firebaseui-idp-password";break;default:c+="firebaseui-idp-generic"}u=(u='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+kn(vn(c))+' firebaseui-id-idp-button" data-provider-id="'+kn(s.providerId)+'" style="background-color:')+kn(xn(vn((c=(c=(c=o)||{}).ga).Ga?c.Ga:a.wa[c.providerId]?""+a.wa[c.providerId]:0==c.providerId.indexOf("saml.")?""+a.wa.saml:0==c.providerId.indexOf("oidc.")?""+a.wa.oidc:""+a.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var l=o;c=a,l=(l=l||{}).ga,c=bn(l.Na?En(l.Na):c.xa[l.providerId]?En(c.xa[l.providerId]):0==l.providerId.indexOf("saml.")?En(c.xa.saml):0==l.providerId.indexOf("oidc.")?En(c.xa.oidc):En(c.xa.password)),u=u+kn(En(c))+'"></span>',"password"==s.providerId?u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with email</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Email</span>':"phone"==s.providerId?u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with phone</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Phone</span>':"anonymous"==s.providerId?u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Continue as guest</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Guest</span>':u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">'+(s="Sign in with "+pn(Xu(o,a)))+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+pn(Xu(o,a))+"</span>",r+='<li class="firebaseui-list-item">'+(o=yn(u+"</button>"))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Gu(n)+"</div></div>",yn(r)}function Kc(t,e,n){var r,i=(t=t||{}).Fb,o=t.Wa;return e=t.ia,t='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+kn(null!=(t=(t=t||{}).za)?t:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',r=(t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+yn(t))+(r=i?yn('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(o?zu(null):"")+Bu({label:wn("Verify")})+'</div></div><div class="firebaseui-card-footer">',e?(e='<p class="firebaseui-tos firebaseui-phone-tos">',e=n.G&&n.F?e+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':e+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=yn(e+"</p>")):n=yn('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+Hu(n),yn(r+n+"</div></form></div>")}function Zc(t,e,n){var r="";return t='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+pn(e=(t=t||{}).phoneNumber)+"</a>",pn(e),e=r,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+t+"</p>"+(r=yn('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zu(null)+Bu({label:wn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Hu(n)+"</div></form>",t=yn('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),yn(e+(n+t+"</div>"))}function Qc(){return yn('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function Yc(t,e,n){var r='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';e=(t=t.dc).length;for(var i=0;i<e;i++){var o=t[i],a="",s="Sign in to "+pn(o.displayName),u=pn(o.displayName),c=o.tenantId?o.tenantId:"top-level-project";a+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+kn(c=wn(c))+' firebaseui-id-tenant-selection-button"'+(o.tenantId?'data-tenant-id="'+kn(o.tenantId)+'"':"")+'style="background-color:'+kn(xn(o.Ga))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+kn(En(o.Na))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">'+s+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+u+"</span></button>",r+='<li class="firebaseui-list-item">'+(o=yn(a))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Gu(n)+"</div></div>",yn(r)}function Xc(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Ou(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Bu(null)+'</div></div><div class="firebaseui-card-footer">'+Gu(n)+"</div></form></div>",yn(t)}function Jc(){return Tu(this,"firebaseui-id-submit")}function tl(){return Tu(this,"firebaseui-id-secondary-link")}function el(t,e){Nu(this,Jc.call(this),(function(e){t(e)}));var n=tl.call(this);n&&e&&Nu(this,n,(function(t){e(t)}))}function nl(){return Tu(this,"firebaseui-id-password")}function rl(){return Tu(this,"firebaseui-id-password-error")}function il(){var t=nl.call(this),e=rl.call(this);Pu(this,t,(function(){Ru(e)&&(Au(t,!0),Lu(e))}))}function ol(){var t=nl.call(this),e=rl.call(this);return Gs(t)?(Au(t,!0),Lu(e),e=!0):(Au(t,!1),Du(e,vn("Enter your password").toString()),e=!1),e?Gs(t):null}function al(t,e,n,r,i,o){hc.call(this,Ic,{email:t},o,"passwordLinking",{G:r,F:i}),this.B=e,this.J=n}R(lc,Qn),R(hc,Su),(t=hc.prototype).lb=function(){var t=ln(this.gb,this.fb,this.Y,this.s);Ju(t),this.f=t},t.v=function(){if(hc.M.v.call(this),Sr(dc(this),new lc("pageEnter",dc(this),{pageId:this.Ea})),this.cb()&&this.Y.G){var t=this.Y.G;Nu(this,this.cb(),(function(){t()}))}if(this.bb()&&this.Y.F){var e=this.Y.F;Nu(this,this.bb(),(function(){e()}))}},t.ya=function(){Sr(dc(this),new lc("pageExit",dc(this),{pageId:this.Ea})),hc.M.ya.call(this)},t.m=function(){window.clearTimeout(this.ca),this.fb=this.gb=this.ca=null,this.Da=!1,this.w=null,tc(this.R()),hc.M.m.call(this)},t.K=function(t,e,n,r){function i(){if(o.O)return null;o.Da=!1,window.clearTimeout(o.ca),o.ca=null,o.w&&(tc(o.w),Je(o.w),o.w=null)}var o=this;return o.Da?null:(function(t){t.Da=!0;var e=Vs(t.R(),"firebaseui-use-spinner");t.ca=window.setTimeout((function(){t.R()&&null===t.w&&(t.w=ln(Yu,{vb:e},null,t.s),t.R().appendChild(t.w),Ju(t.w))}),500)}(o),t.apply(null,e).then(n,r).then(i,i))},M(hc.prototype,{a:function(t){ac.call(this);var e=ln(Wu,{message:t},null,this.s);this.R().appendChild(e),Nu(this,uc.call(this),(function(){Je(e)}))},xc:ac,zc:sc,yc:uc,Z:function(t,e){t=ln(Zu,{Ma:t,message:e},null,this.s),rc.call(this,t)},h:ic,Db:oc,Bc:function(){return Tu(this,"firebaseui-tos")},cb:function(){return Tu(this,"firebaseui-tos-link")},bb:function(){return Tu(this,"firebaseui-pp-link")},Cc:function(){return Tu(this,"firebaseui-tos-list")}}),mc.A="firebaseui.auth.soy2.page.signIn",gc.A="firebaseui.auth.soy2.page.passwordSignIn",vc.A="firebaseui.auth.soy2.page.passwordSignUp",yc.A="firebaseui.auth.soy2.page.passwordRecovery",bc.A="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",wc.A="firebaseui.auth.soy2.page.callback",_c.A="firebaseui.auth.soy2.page.spinner",kc.A="firebaseui.auth.soy2.page.blank",Ec.A="firebaseui.auth.soy2.page.emailLinkSignInSent",xc.A="firebaseui.auth.soy2.page.emailNotReceived",Sc.A="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",Tc.A="firebaseui.auth.soy2.page.differentDeviceError",Cc.A="firebaseui.auth.soy2.page.anonymousUserMismatch",Ic.A="firebaseui.auth.soy2.page.passwordLinking",Ac.A="firebaseui.auth.soy2.page.emailLinkSignInLinking",Pc.A="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",Mc.A="firebaseui.auth.soy2.page.federatedLinking",Nc.A="firebaseui.auth.soy2.page.unsupportedProvider",Lc.A="firebaseui.auth.soy2.page.passwordReset",Dc.A="firebaseui.auth.soy2.page.passwordResetSuccess",Rc.A="firebaseui.auth.soy2.page.passwordResetFailure",Oc.A="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",Bc.A="firebaseui.auth.soy2.page.emailChangeRevokeFailure",Uc.A="firebaseui.auth.soy2.page.emailVerificationSuccess",Fc.A="firebaseui.auth.soy2.page.emailVerificationFailure",jc.A="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",qc.A="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",$c.A="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",Vc.A="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",zc.A="firebaseui.auth.soy2.page.recoverableError",Hc.A="firebaseui.auth.soy2.page.unrecoverableError",Gc.A="firebaseui.auth.soy2.page.emailMismatch",Wc.A="firebaseui.auth.soy2.page.providerSignIn",Kc.A="firebaseui.auth.soy2.page.phoneSignInStart",Zc.A="firebaseui.auth.soy2.page.phoneSignInFinish",Qc.A="firebaseui.auth.soy2.page.signOut",Yc.A="firebaseui.auth.soy2.page.selectTenant",Xc.A="firebaseui.auth.soy2.page.providerMatchByEmail",s(al,hc),al.prototype.v=function(){this.S(),this.P(this.B,this.J),pc(this,this.i(),this.B),this.i().focus(),hc.prototype.v.call(this)},al.prototype.m=function(){this.B=null,hc.prototype.m.call(this)},al.prototype.j=function(){return Gs(Tu(this,"firebaseui-id-email"))},M(al.prototype,{i:nl,D:rl,S:il,u:ol,ea:Jc,ba:tl,P:el});var sl=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function ul(){return Tu(this,"firebaseui-id-email")}function cl(){return Tu(this,"firebaseui-id-email-error")}function ll(t){var e=ul.call(this),n=cl.call(this);Pu(this,e,(function(){Ru(n)&&(Au(e,!0),Lu(n))})),t&&Mu(this,e,(function(){t()}))}function hl(){return J(Gs(ul.call(this))||"")}function dl(){var t=ul.call(this),e=cl.call(this),n=Gs(t)||"";return n?sl.test(n)?(Au(t,!0),Lu(e),e=!0):(Au(t,!1),Du(e,vn("That email address isn't correct").toString()),e=!1):(Au(t,!1),Du(e,vn("Enter your email address to continue").toString()),e=!1),e?J(Gs(t)):null}function fl(t,e,n,r,i,o,a){hc.call(this,gc,{email:n,ia:!!o},a,"passwordSignIn",{G:r,F:i}),this.B=t,this.J=e}function pl(t,e,n,r,i,o){hc.call(this,t,e,r,i||"notice",o),this.i=n||null}function ml(t,e,n,r,i){pl.call(this,bc,{email:t,H:!!e},e,i,"passwordRecoveryEmailSent",{G:n,F:r})}function gl(t,e){pl.call(this,Uc,{H:!!t},t,e,"emailVerificationSuccess")}function vl(t,e){pl.call(this,Fc,{H:!!t},t,e,"emailVerificationFailure")}function yl(t,e,n){pl.call(this,jc,{email:t,H:!!e},e,n,"verifyAndChangeEmailSuccess")}function bl(t,e){pl.call(this,qc,{H:!!t},t,e,"verifyAndChangeEmailFailure")}function wl(t,e){pl.call(this,Vc,{H:!!t},t,e,"revertSecondFactorAdditionFailure")}function _l(t){pl.call(this,Qc,void 0,void 0,t,"signOut")}function kl(t,e){pl.call(this,Dc,{H:!!t},t,e,"passwordResetSuccess")}function El(t,e){pl.call(this,Rc,{H:!!t},t,e,"passwordResetFailure")}function xl(t,e){pl.call(this,Bc,{H:!!t},t,e,"emailChangeRevokeFailure")}function Sl(t,e,n){pl.call(this,zc,{errorMessage:t,Ab:!!e},e,n,"recoverableError")}function Tl(t,e){pl.call(this,Hc,{errorMessage:t},void 0,e,"unrecoverableError")}s(fl,hc),fl.prototype.v=function(){this.S(),this.ea(),this.ba(this.B,this.J),fc(this,this.l(),this.i()),pc(this,this.i(),this.B),Gs(this.l())?this.i().focus():this.l().focus(),hc.prototype.v.call(this)},fl.prototype.m=function(){this.J=this.B=null,hc.prototype.m.call(this)},M(fl.prototype,{l:ul,U:cl,S:ll,P:hl,j:dl,i:nl,D:rl,ea:il,u:ol,ua:Jc,pa:tl,ba:el}),R(pl,hc),pl.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),pl.M.v.call(this)},pl.prototype.m=function(){this.i=null,pl.M.m.call(this)},M(pl.prototype,{l:Jc,B:tl,u:el}),R(ml,pl),R(gl,pl),R(vl,pl),R(yl,pl),R(bl,pl),R(wl,pl),R(_l,pl),R(kl,pl),R(El,pl),R(xl,pl),R(Sl,pl),R(Tl,pl);var Cl=!1,Il=null;function Al(t,e){Cl=!!e,Il||("undefined"==typeof accountchooser&&function(){var t=window.navigator&&window.navigator.userAgent;if(t){var e;if(e=t.match(Ns)){var n=new js(e[3]||e[1]);return!(0<=t.indexOf("Opera Mini"))&&(0<=t.indexOf("Opera Mobi")?0<=t.indexOf("Android")&&qs(n,"10.1"):qs(n,"8.0"))}if(e=t.match(Ms))return qs(new js(e[1]),"2.0");if(e=t.match(Ls))return qs(new js(e[1]),"6.0");if(e=t.match(Ds))return n=new js(e[6]),t=e[3]&&new js(e[3]),e=e[5]&&new js(e[5],"_"),(!(!t||!qs(t,"6.0"))||!(!e||!qs(e,"10.5.6")))&&qs(n,"3.0");if(e=t.match(Os))return qs(new js(e[1]),"3.0");if(e=t.match(Bs))return qs(new js(e[1],"_"),"4.0");if(e=t.match(Us))return qs(new js(e[1]),"4.7");if(e=t.match(Fs))return n=new js(e[1]),t=new js(e[2]),qs(n,"7.0")&&qs(t,"7.0");if(e=t.match(Ps))return n=new js(e[1]),t=new js(e[2]),qs(n,"7.0")&&qs(t,"6.0");if(t.match(Rs))return!1}return!0}()?(e=Ce(_e(new we(Ee,"//www.gstatic.com/accountchooser/client.js"))),Il=Qr(Ei(e)).ta((function(){}))):Il=Qr()),Il.then(t,t)}function Pl(t,e){(t=ss(t=md(t)).accountChooserInvoked||null)?t(e):e()}function Ml(t,e,n){(t=ss(t=md(t)).accountChooserResult||null)?t(e,n):n()}function Nl(t,e,n,r){function i(){var e=t();e&&(e=rs(md(e)))&&e()}Ts((function(){var o=t();o&&function(t,e,n,r,i){r?(Es("callback",t,e),Cl&&n()):Pl(t,(function(){va(new fo(t.a.tenantId||null),od(t)),Cs((function(r){sa(ta,od(t)),Ml(t,r?"empty":"unavailable",(function(){Es("signIn",t,e),(r||Cl)&&n()}))}),da(od(t)),i)}))}(o,e,i,n,r)}),(function(n){var r=t();r&&function(t,e,n,r){function i(t){t=Ol(t),ql(e,n,void 0,t),r()}Ml(e,"accountSelected",(function(){ha(!1,od(e));var o=Fl(e);dd(e,rd(e).fetchSignInMethodsForEmail(t.a).then((function(i){Vl(e,n,i,t.a,t.h||void 0,void 0,o),r()}),i))}))}(n,r,e,i)}),(function(n){var r=t();r&&function(t,e,n,r){Ml(e,t?"addAccount":"unavailable",(function(){Es("signIn",e,n),(t||Cl)&&r()}))}(n,r,e,i)}),t()&&function(t){return t.a.get("acUiConfig")||null}(md(t())))}function Ll(t,e,n,r){function i(n){if(!n.name||"cancel"!=n.name){t:{var r=n.message;try{var i=((JSON.parse(r).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(i&&i.length){var o=!0;break t}}catch(t){}o=!1}if(o)n=dc(e),e.o(),ql(t,n,void 0,vn("Your sign-in session has expired. Please try again.").toString());else{if(o=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;o=Ol(n)}e.a(o)}}}if(fd(t),r)return Dl(t,n),Qr();if(!n.credential)throw Error("No credential found!");if(!(r=rd(t).currentUser||n.user))throw Error("User not logged in.");r=new ro(r.email,r.displayName,r.photoURL,"password"==n.credential.providerId?null:n.credential.providerId),null!=aa(na,od(t))&&!aa(na,od(t))||function(t,e){var n=da(e),r=z(n,(function(e){return e.a==t.a&&(e.f||null)==(t.f||null)}));-1<r&&W(n,r),n.unshift(t),ua(ra,$(n,(function(t){return t.aa()})),e)}(r,od(t)),sa(na,od(t));try{var o=function(t,e){return gd(t),ld(t,(function(n){if(t.j&&!t.j.isAnonymous&&qa(md(t))&&!rd(t).currentUser)return yd(t).then((function(){return"password"==e.credential.providerId&&(e.credential=null),e}));if(n)return yd(t).then((function(){return n.linkWithCredential(e.credential)})).then((function(t){return e.user=t.user,e.credential=t.credential,e.operationType=t.operationType,e.additionalUserInfo=t.additionalUserInfo,e}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return bd(t,n,e.credential)}));if(!e.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return yd(t).then((function(){return id(t).updateCurrentUser(e.user)})).then((function(){return e.user=id(t).currentUser,e.operationType="signIn",e.credential&&e.credential.providerId&&"password"==e.credential.providerId&&(e.credential=null),e}))}))}(t,n)}catch(t){return Xi(t.code||t.message,t),e.a(t.code||t.message),Qr()}return n=o.then((function(e){Dl(t,e)}),i).then(void 0,i),dd(t,o),Qr(n)}function Dl(t,e){if(!e.user)throw Error("No user found");var n=os(md(t));if(is(md(t))&&n&&no("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=os(md(t));var r=ca(od(t))||void 0;sa(ea,od(t));var i=!1;ci()?(n&&!n(e,r)||(i=!0,window.opener.location.assign(Ae(Ne(Rl(t,r))))),n||window.close()):n&&!n(e,r)||(i=!0,ui(Rl(t,r))),i||t.reset()}else{n=e.user,e=e.credential,r=is(md(t)),i=ca(od(t))||void 0,sa(ea,od(t));var o=!1;ci()?(r&&!r(n,e,i)||(o=!0,window.opener.location.assign(Ae(Ne(Rl(t,i))))),r||window.close()):r&&!r(n,e,i)||(o=!0,ui(Rl(t,i))),o||t.reset()}}function Rl(t,e){if(!(t=e||md(t).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return t}function Ol(t){var e={code:t.code},n="";switch((e=e||{}).code){case"auth/email-already-in-use":n+="The email address is already used by another account";break;case"auth/requires-recent-login":n+=jn();break;case"auth/too-many-requests":n+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":n+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":n+="That email address doesn't match an existing account";break;case"auth/user-token-expired":n+=jn();break;case"auth/weak-password":n+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":n+="The email and password you entered don't match";break;case"auth/network-request-failed":n+="A network error has occurred";break;case"auth/invalid-phone-number":n+=Rn();break;case"auth/invalid-verification-code":n+=vn("Wrong code. Try again.");break;case"auth/code-expired":n+="This code is no longer valid";break;case"auth/expired-action-code":n+="This code has expired.";break;case"auth/invalid-action-code":n+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(e=vn(n).toString())return e;try{return JSON.parse(t.message),Xi("Internal error: "+t.message,void 0),Bn().toString()}catch(e){return t.message}}function Bl(t,n,r,i){function o(){va(new fo(t.a.tenantId||null),od(t)),dd(t,n.K(A(t.cc,t),[c],(function(){if("file:"===(window.location&&window.location.protocol))return dd(t,Jh(t).then((function(e){n.o(),sa(ta,od(t)),Es("callback",t,u,Qr(e))}),a))}),s))}function a(e){if(sa(ta,od(t)),!e.name||"cancel"!=e.name)switch(e.code){case"auth/popup-blocked":o();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":n.a(Ol(e));break;default:n.o(),Es("callback",t,u,Yr(e))}}function s(e){sa(ta,od(t)),e.name&&"cancel"==e.name||(Xi("signInWithRedirect: "+e.code,void 0),e=Ol(e),"blank"==n.Ea&&es(md(t))?(n.o(),Es("providerSignIn",t,u,e)):n.a(e))}var u=dc(n),c=function(t,n,r){var i=Ba[n]&&e.auth[Ba[n]]?new e.auth[Ba[n]]:0==n.indexOf("saml.")?new e.auth.SAMLAuthProvider(n):new e.auth.OAuthProvider(n);if(!i)throw Error("Invalid Firebase Auth provider!");var o=Wa(md(t),n);if(i.addScope)for(var a=0;a<o.length;a++)i.addScope(o[a]);return o=Ka(md(t),n)||{},r&&((t=n==e.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":n==e.auth.GithubAuthProvider.PROVIDER_ID?"login":(t=Ha(md(t),n))&&t.Nb)&&(o[t]=r)),i.setCustomParameters&&i.setCustomParameters(o),i}(t,r,i);ns(md(t))==vs?o():dd(t,function(t,e){return gd(t),ld(t,(function(n){return n&&!fa(od(t))?n.linkWithPopup(e).then((function(t){return t}),(function(e){if(e&&"auth/email-already-in-use"==e.code&&e.email&&e.credential)throw e;return bd(t,e)})):rd(t).signInWithPopup(e)}))}(t,c).then((function(e){n.o(),Es("callback",t,u,Qr(e))}),a))}function Ul(t,n,r){var i,o,a=function(t,e){var n=null;return j($a(t),(function(t){t.authMethod===e&&(n=t.provider)})),n}(md(t),r&&r.authMethod||null);return r&&r.idToken&&a===e.auth.GoogleAuthProvider.PROVIDER_ID?(Wa(md(t),e.auth.GoogleAuthProvider.PROVIDER_ID).length?(Bl(t,n,a,r.id),r=Qr(!0)):(i=e.auth.GoogleAuthProvider.credential(r.idToken),o=!1,i=n.K(A(t.$b,t),[i],(function(e){var r=dc(n);n.o(),Es("callback",t,r,Qr(e)),o=!0}),(function(e){if(!(e.name&&"cancel"==e.name||e&&"auth/credential-already-in-use"==e.code))if(e&&"auth/email-already-in-use"==e.code&&e.email&&e.credential){var r=dc(n);n.o(),Es("callback",t,r,Yr(e))}else e=Ol(e),n.a(e)})),dd(t,i),r=i.then((function(){return o}),(function(){return!1}))),r):(r&&n.a(vn("The selected credential for the authentication provider is not supported!").toString()),Qr(!1))}function Fl(t){return 1==(t=za(md(t))).length&&t[0]==e.auth.EmailAuthProvider.PROVIDER_ID}function jl(t){return 1==(t=za(md(t))).length&&t[0]==e.auth.PhoneAuthProvider.PROVIDER_ID}function ql(t,e,n,r){Fl(t)?r?Es("signIn",t,e,n,r):Hl(t,e,n):t&&jl(t)&&!r?Es("phoneSignInStart",t,e):t&&es(md(t))&&!r?Es("federatedRedirect",t,e,n):Es("providerSignIn",t,e,r,n)}function $l(t,e,n,r){var i=dc(e);dd(t,e.K(A(rd(t).fetchSignInMethodsForEmail,rd(t)),[n],(function(o){ha(us(md(t))==fs,od(t)),e.o(),Vl(t,i,o,n,void 0,r)}),(function(t){t=Ol(t),e.a(t)})))}function Vl(t,n,r,i,o,a,s){r.length||ts(md(t))?!r.length&&ts(md(t))?Es("sendEmailLinkForSignIn",t,n,i,(function(){Es("signIn",t,n)})):H(r,e.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Es("passwordSignIn",t,n,i,s):1==r.length&&r[0]===e.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Es("sendEmailLinkForSignIn",t,n,i,(function(){Es("signIn",t,n)})):(r=Ra(r,za(md(t))))?(ma(new lo(i),od(t)),Es("federatedSignIn",t,n,i,r,a)):Es("unsupportedProvider",t,n,i):Es("passwordSignUp",t,n,i,o,void 0,s)}function zl(t,e,n,r,i,o){var a=dc(e);dd(t,e.K(A(t.Hb,t),[n,o],(function(){e.o(),Es("emailLinkSignInSent",t,a,n,r,o)}),i))}function Hl(t,e,n){us(md(t))==fs?Al((function(){xs?Pl(t,(function(){va(new fo(t.a.tenantId||null),od(t)),Cs((function(r){sa(ta,od(t)),Ml(t,r?"empty":"unavailable",(function(){n?Es("prefilledEmailSignIn",t,e,n):Es("signIn",t,e)}))}),da(od(t)),Fa(md(t)))})):(gd(t),Nl(nd,e,!1,Fa(md(t))))}),!1):(Cl=!1,Pl(t,(function(){Ml(t,"unavailable",(function(){n?Es("prefilledEmailSignIn",t,e,n):Es("signIn",t,e)}))})))}function Gl(){return xt(di(),"oobCode")}function Wl(){var t=xt(di(),"continueUrl");return t?function(){ui(t)}:null}function Kl(t,e){var n=hi(e,"Could not find the FirebaseUI widget element on the page.");switch(e=function(t){var e=di();return(e=xt(e,t=_a(md(t).a,"queryParameterForSignInSuccessUrl")))?Ae(Ne(e)):null}(t),function(t){var e=di();for(var n in e=xt(e,t=Qa(md(t)))||"",bs)if(bs[n].toLowerCase()==e.toLowerCase())return bs[n];return"callback"}(t)){case"callback":e&&la(e,od(t)),t.ob()?Es("callback",t,n):ql(t,n,ad(t));break;case"resetPassword":Es("passwordReset",t,n,Gl(),Wl());break;case"recoverEmail":Es("emailChangeRevocation",t,n,Gl());break;case"revertSecondFactorAddition":Es("revertSecondFactorAddition",t,n,Gl());break;case"verifyEmail":Es("emailVerification",t,n,Gl(),Wl());break;case"verifyAndChangeEmail":Es("verifyAndChangeEmail",t,n,Gl(),Wl());break;case"signIn":Es("emailLinkSignInCallback",t,n,di()),vd();break;case"select":if(e&&la(e,od(t)),xs){ql(t,n);break}return void Al((function(){gd(t),Nl(nd,n,!0)}),!0);default:throw Error("Unhandled widget operation.")}(e=rs(md(t)))&&e()}function Zl(t,e){hc.call(this,Cc,void 0,e,"anonymousUserMismatch"),this.i=t}function Ql(t){hc.call(this,wc,void 0,t,"callback")}function Yl(t,e,n){if(n.user){var r={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},i=fa(od(t)),o=i&&i.f;if(o&&!function(t,e){if(e==t.email)return!0;if(t.providerData)for(var n=0;n<t.providerData.length;n++)if(e==t.providerData[n].email)return!0;return!1}(n.user,o))!function(t,e,n){var r=dc(e);dd(t,yd(t).then((function(){e.o(),Es("emailMismatch",t,r,n)}),(function(t){t.name&&"cancel"==t.name||(t=Ol(t.code),e.a(t))})))}(t,e,r);else{var a=i&&i.a;a?dd(t,n.user.linkWithCredential(a).then((function(n){r={user:n.user,credential:a,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},Xl(t,e,r)}),(function(n){Jl(t,e,n)}))):Xl(t,e,r)}}else n=dc(e),e.o(),pa(od(t)),ql(t,n)}function Xl(t,e,n){pa(od(t)),Ll(t,e,n)}function Jl(t,e,n){var r=dc(e);pa(od(t)),n=Ol(n),e.o(),ql(t,r,void 0,n)}function th(t,n,r,i){var o=dc(n);dd(t,rd(t).fetchSignInMethodsForEmail(r).then((function(a){n.o(),a.length?H(a,e.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Es("passwordLinking",t,o,r):1==a.length&&a[0]===e.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Es("emailLinkSignInLinking",t,o,r):(a=Ra(a,za(md(t))))?Es("federatedLinking",t,o,r,a,i):(pa(od(t)),Es("unsupportedProvider",t,o,r)):(pa(od(t)),Es("passwordRecovery",t,o,r,!1,Un().toString()))}),(function(e){Jl(t,n,e)})))}function eh(t,e){hc.call(this,Tc,void 0,e,"differentDeviceError"),this.i=t}function nh(t,e,n,r){hc.call(this,Oc,{email:t,H:!!n},r,"emailChangeRevoke"),this.l=e,this.i=n||null}function rh(){return Tu(this,"firebaseui-id-new-password")}function ih(){return Tu(this,"firebaseui-id-password-toggle")}function oh(){this.Sa=!this.Sa;var t=ih.call(this),e=rh.call(this);this.Sa?(e.type="text",zs(t,"firebaseui-input-toggle-off"),Hs(t,"firebaseui-input-toggle-on")):(e.type="password",zs(t,"firebaseui-input-toggle-on"),Hs(t,"firebaseui-input-toggle-off")),e.focus()}function ah(){return Tu(this,"firebaseui-id-new-password-error")}function sh(){this.Sa=!1;var t=rh.call(this);t.type="password";var e=ah.call(this);Pu(this,t,(function(){Ru(e)&&(Au(t,!0),Lu(e))}));var n=ih.call(this);zs(n,"firebaseui-input-toggle-on"),Hs(n,"firebaseui-input-toggle-off"),function(t,e,n){zn(t,P(Hn,e=new eu(e))),au(Cu(t),e,"focusin",n)}(this,t,(function(){zs(n,"firebaseui-input-toggle-focus"),Hs(n,"firebaseui-input-toggle-blur")})),function(t,e,n){zn(t,P(Hn,e=new eu(e))),au(Cu(t),e,"focusout",n)}(this,t,(function(){zs(n,"firebaseui-input-toggle-blur"),Hs(n,"firebaseui-input-toggle-focus")})),Nu(this,n,A(oh,this))}function uh(){var t=rh.call(this),e=ah.call(this);return Gs(t)?(Au(t,!0),Lu(e),e=!0):(Au(t,!1),Du(e,vn("Enter your password").toString()),e=!1),e?Gs(t):null}function ch(t,e,n){hc.call(this,Lc,{email:t},n,"passwordReset"),this.l=e}function lh(t,e,n,r,i){hc.call(this,$c,{factorId:t,phoneNumber:n||null,H:!!r},i,"revertSecondFactorAdditionSuccess"),this.l=e,this.i=r||null}function hh(t,e,n,r){"auth/weak-password"==(r&&r.code)?(t=Ol(r),Au(n.i(),!1),Du(n.B(),t),n.i().focus()):(n&&n.o(),(n=new El).render(e),td(t,n))}function dh(t,e){try{var n="number"==typeof t.selectionStart}catch(t){n=!1}n?(t.selectionStart=e,t.selectionEnd=e):oe&&!ye("9")&&("textarea"==t.type&&(e=t.value.substring(0,e).replace(/(\r\n|\r|\n)/g,"\n").length),(t=t.createTextRange()).collapse(!0),t.move("character",e),t.select())}function fh(t,e,n,r,i,o){hc.call(this,Sc,{email:n},o,"emailLinkSignInConfirmation",{G:r,F:i}),this.l=t,this.u=e}function ph(t,e,n,r,i){hc.call(this,Pc,{ga:t},i,"emailLinkSignInLinkingDifferentDevice",{G:n,F:r}),this.i=e}function mh(t){hc.call(this,kc,void 0,t,"blank")}function gh(t,n,r,i,o){var a=new mh,s=new Gt(r),u=s.a.a.get(Qt.ab)||"",c=s.a.a.get(Qt.Ta)||"",l="1"===s.a.a.get(Qt.Ra),h=Wt(s),d=s.a.a.get(Qt.PROVIDER_ID)||null;s=s.a.a.get(Qt.xb)||null,pd(t,s);var f=!aa(ia,od(t)),p=i||function(t,e){var n=null;if(e=aa(ia,e))try{var r=Ro(t,e),i=JSON.parse(r);n=i&&i.email||null}catch(t){}return n}(c,od(t)),m=(i=function(t,e){var n=null;if(e=aa(oa,e))try{var r=Ro(t,e);n=JSON.parse(r)}catch(t){}return ho(n||null)}(c,od(t)))&&i.a;d&&m&&m.providerId!==d&&(m=null),a.render(n),td(t,a),dd(t,a.K((function(){var e=Qr(null);e=h&&f||f&&l?Yr(Error("anonymous-user-not-found")):function(t,e){var n=Wt(new Gt(e));return n?(e=new Vr((function(e,r){var i=id(t).onAuthStateChanged((function(t){i(),t&&t.isAnonymous&&t.uid===n?e(t):t&&t.isAnonymous&&t.uid!==n?r(Error("anonymous-user-mismatch")):r(Error("anonymous-user-not-found"))}));dd(t,i)})),dd(t,e),e):Qr(null)}(t,r).then((function(t){if(d&&!m)throw Error("pending-credential-not-found");return t}));var n=null;return e.then((function(e){return n=e,o?null:rd(t).checkActionCode(u)})).then((function(){return n}))}),[],(function(i){p?function(t,n,r,i,o,a){var s=dc(n);n.Z("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",vn("Signing in...").toString());var u=null;o=(a?function(t,n,r,i,o){gd(t);var a=o||null,s=e.auth.EmailAuthProvider.credentialWithLink(r,i);return r=a?rd(t).signInWithEmailLink(r,i).then((function(t){return t.user.linkWithCredential(a)})).then((function(){return yd(t)})).then((function(){return bd(t,{code:"auth/email-already-in-use"},a)})):rd(t).fetchSignInMethodsForEmail(r).then((function(e){return e.length?bd(t,{code:"auth/email-already-in-use"},s):n.linkWithCredential(s)})),dd(t,r),r}(t,a,r,i,o):function(t,e,n,r){gd(t);var i,o=r||null;return e=rd(t).signInWithEmailLink(e,n).then((function(t){if(i={user:t.user,credential:null,operationType:t.operationType,additionalUserInfo:t.additionalUserInfo},o)return t.user.linkWithCredential(o).then((function(t){i={user:t.user,credential:o,operationType:i.operationType,additionalUserInfo:t.additionalUserInfo}}))})).then((function(){yd(t)})).then((function(){return id(t).updateCurrentUser(i.user)})).then((function(){return i.user=id(t).currentUser,i})),dd(t,e),e}(t,r,i,o)).then((function(e){sa(oa,od(t)),sa(ia,od(t)),n.h(),n.Z("firebaseui-icon-done",vn("Signed in!").toString()),u=setTimeout((function(){n.h(),Ll(t,n,e,!0)}),1e3),dd(t,(function(){n&&(n.h(),n.o()),clearTimeout(u)}))}),(function(e){if(n.h(),n.o(),!e.name||"cancel"!=e.name){var o=Ol(e);"auth/email-already-in-use"==e.code||"auth/credential-already-in-use"==e.code?(sa(oa,od(t)),sa(ia,od(t))):"auth/invalid-email"==e.code?(o=vn("The email provided does not match the current sign-in session.").toString(),Es("emailLinkConfirmation",t,s,i,vh,null,o)):ql(t,s,r,o)}})),dd(t,o)}(t,a,p,r,m,i):l?(a.o(),Es("differentDeviceError",t,n)):(a.o(),Es("emailLinkConfirmation",t,n,r,vh))}),(function(e){var i=void 0;if(!e||!e.name||"cancel"!=e.name)switch(a.o(),e&&e.message){case"anonymous-user-not-found":Es("differentDeviceError",t,n);break;case"anonymous-user-mismatch":Es("anonymousUserMismatch",t,n);break;case"pending-credential-not-found":Es("emailLinkNewDeviceLinking",t,n,r,yh);break;default:e&&(i=Ol(e)),ql(t,n,void 0,i)}})))}function vh(t,e,n,r){gh(t,e,r,n,!0)}function yh(t,e,n){gh(t,e,n)}function bh(t,e,n,r,i,o){hc.call(this,Ac,{email:t,ga:e},o,"emailLinkSignInLinking",{G:r,F:i}),this.i=n}function wh(t,e,n,r,i,o){hc.call(this,Ec,{email:t},o,"emailLinkSignInSent",{G:r,F:i}),this.u=e,this.i=n}function _h(t,e,n,r,i,o,a){hc.call(this,Gc,{ic:t,Pb:e},a,"emailMismatch",{G:i,F:o}),this.l=n,this.i=r}function kh(t,e,n,r,i){hc.call(this,xc,void 0,i,"emailNotReceived",{G:n,F:r}),this.l=t,this.i=e}function Eh(t,e,n,r,i,o){hc.call(this,Mc,{email:t,ga:e},o,"federatedLinking",{G:r,F:i}),this.i=n}function xh(t,e,n,r,i,o){hc.call(this,yc,{email:n,Ua:!!e},o,"passwordRecovery",{G:r,F:i}),this.l=t,this.u=e}function Sh(){return Tu(this,"firebaseui-id-name")}function Th(){return Tu(this,"firebaseui-id-name-error")}function Ch(t,e,n,r,i,o,a,s,u){hc.call(this,vc,{email:r,Sb:t,name:i,Ua:!!n,ia:!!s},u,"passwordSignUp",{G:o,F:a}),this.B=e,this.J=n,this.D=t}function Ih(t,n){var r=Ja(md(t)),i=n.j(),o=null;r&&(o=n.P());var a=n.S();if(i){if(r){if(!o)return void n.u().focus();o=ut(o)}if(a){var s=e.auth.EmailAuthProvider.credential(i,a);dd(t,n.K(A(t.Xb,t),[i,a],(function(e){var i={user:e.user,credential:s,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo};return r?(e=e.user.updateProfile({displayName:o}).then((function(){return Ll(t,n,i)})),dd(t,e),e):Ll(t,n,i)}),(function(e){if(!e.name||"cancel"!=e.name){var r=Ol(e);switch(e.code){case"auth/email-already-in-use":return function(t,e,n,r){function i(){var t=Ol(r);Au(e.i(),!1),Du(e.U(),t),e.i().focus()}var o=rd(t).fetchSignInMethodsForEmail(n).then((function(r){r.length?i():(r=dc(e),e.o(),Es("passwordRecovery",t,r,n,!1,Un().toString()))}),(function(){i()}));return dd(t,o),o}(t,n,i,e);case"auth/too-many-requests":r=vn("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Au(n.l(),!1),Du(n.ba(),r);break;default:Xi(e="setAccountInfo: "+Bo(e),void 0),n.a(r)}}})))}else n.l().focus()}else n.i().focus()}function Ah(){return Tu(this,"firebaseui-id-phone-confirmation-code")}function Ph(){return Tu(this,"firebaseui-id-phone-confirmation-code-error")}function Mh(){return Tu(this,"firebaseui-id-resend-countdown")}function Nh(t,e,n,r,i,o,a,s,u){hc.call(this,Zc,{phoneNumber:i},u,"phoneSignInFinish",{G:a,F:s}),this.kb=o,this.i=new nu(1e3),this.D=o,this.S=t,this.l=e,this.J=n,this.P=r}s(Zl,hc),Zl.prototype.v=function(){var t=this;Nu(this,this.l(),(function(){t.i()})),this.l().focus(),hc.prototype.v.call(this)},Zl.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(Zl.prototype,{l:tl}),ks.anonymousUserMismatch=function(t,e){var n=new Zl((function(){n.o(),ql(t,e)}));n.render(e),td(t,n)},s(Ql,hc),Ql.prototype.K=function(t,e,n,r){return t.apply(null,e).then(n,r)},ks.callback=function(t,e,n){var r=new Ql;r.render(e),td(t,r),e=n||Jh(t),dd(t,e.then((function(e){Yl(t,r,e)}),(function(e){if(e&&("auth/account-exists-with-different-credential"==e.code||"auth/email-already-in-use"==e.code)&&e.email&&e.credential)ma(new lo(e.email,e.credential),od(t)),th(t,r,e.email);else if(e&&"auth/user-cancelled"==e.code){var n=fa(od(t)),i=Ol(e);n&&n.a?th(t,r,n.f,i):n?$l(t,r,n.f,i):Jl(t,r,e)}else e&&"auth/credential-already-in-use"==e.code||(e&&"auth/operation-not-supported-in-this-environment"==e.code&&Fl(t)?Yl(t,r,{user:null,credential:null}):Jl(t,r,e))})))},s(eh,hc),eh.prototype.v=function(){var t=this;Nu(this,this.l(),(function(){t.i()})),this.l().focus(),hc.prototype.v.call(this)},eh.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(eh.prototype,{l:tl}),ks.differentDeviceError=function(t,e){var n=new eh((function(){n.o(),ql(t,e)}));n.render(e),td(t,n)},s(nh,hc),nh.prototype.v=function(){var t=this;Nu(this,Tu(this,"firebaseui-id-reset-password-link"),(function(){t.l()})),this.i&&(this.B(this.i),this.u().focus()),hc.prototype.v.call(this)},nh.prototype.m=function(){this.l=this.i=null,hc.prototype.m.call(this)},M(nh.prototype,{u:Jc,D:tl,B:el}),s(ch,hc),ch.prototype.v=function(){this.J(),this.D(this.l),pc(this,this.i(),this.l),this.i().focus(),hc.prototype.v.call(this)},ch.prototype.m=function(){this.l=null,hc.prototype.m.call(this)},M(ch.prototype,{i:rh,B:ah,P:ih,J:sh,u:uh,U:Jc,S:tl,D:el}),s(lh,hc),lh.prototype.v=function(){var t=this;Nu(this,Tu(this,"firebaseui-id-reset-password-link"),(function(){t.l()})),this.i&&(this.B(this.i),this.u().focus()),hc.prototype.v.call(this)},lh.prototype.m=function(){this.l=this.i=null,hc.prototype.m.call(this)},M(lh.prototype,{u:Jc,D:tl,B:el}),ks.passwordReset=function(t,e,n,r){dd(t,rd(t).verifyPasswordResetCode(n).then((function(i){var o=new ch(i,(function(){!function(t,e,n,r,i){var o=n.u();o&&dd(t,n.K(A(rd(t).confirmPasswordReset,rd(t)),[r,o],(function(){n.o();var r=new kl(i);r.render(e),td(t,r)}),(function(r){hh(t,e,n,r)})))}(t,e,o,n,r)}));o.render(e),td(t,o)}),(function(){hh(t,e)})))},ks.emailChangeRevocation=function(t,e,n){var r=null;dd(t,rd(t).checkActionCode(n).then((function(e){return r=e.data.email,rd(t).applyActionCode(n)})).then((function(){!function(t,e,n){var r=new nh(n,(function(){dd(t,r.K(A(rd(t).sendPasswordResetEmail,rd(t)),[n],(function(){r.o(),(r=new ml(n,void 0,Ya(md(t)),Xa(md(t)))).render(e),td(t,r)}),(function(){r.a(On().toString())})))}));r.render(e),td(t,r)}(t,e,r)}),(function(){var n=new xl;n.render(e),td(t,n)})))},ks.emailVerification=function(t,e,n,r){dd(t,rd(t).applyActionCode(n).then((function(){var n=new gl(r);n.render(e),td(t,n)}),(function(){var n=new vl;n.render(e),td(t,n)})))},ks.revertSecondFactorAddition=function(t,e,n){var r=null,i=null;dd(t,rd(t).checkActionCode(n).then((function(e){return r=e.data.email,i=e.data.multiFactorInfo,rd(t).applyActionCode(n)})).then((function(){!function(t,e,n,r){var i=new lh(r.factorId,(function(){i.K(A(rd(t).sendPasswordResetEmail,rd(t)),[n],(function(){i.o(),(i=new ml(n,void 0,Ya(md(t)),Xa(md(t)))).render(e),td(t,i)}),(function(){i.a(On().toString())}))}),r.phoneNumber);i.render(e),td(t,i)}(t,e,r,i)}),(function(){var n=new wl;n.render(e),td(t,n)})))},ks.verifyAndChangeEmail=function(t,e,n,r){var i=null;dd(t,rd(t).checkActionCode(n).then((function(e){return i=e.data.email,rd(t).applyActionCode(n)})).then((function(){var n=new yl(i,r);n.render(e),td(t,n)}),(function(){var n=new bl;n.render(e),td(t,n)})))},s(fh,hc),fh.prototype.v=function(){this.B(this.l),this.D(this.l,this.u),this.i().focus(),dh(this.i(),(this.i().value||"").length),hc.prototype.v.call(this)},fh.prototype.m=function(){this.u=this.l=null,hc.prototype.m.call(this)},M(fh.prototype,{i:ul,P:cl,B:ll,J:hl,j:dl,U:Jc,S:tl,D:el}),ks.emailLinkConfirmation=function(t,e,n,r,i,o){var a=new fh((function(){var i=a.j();i?(a.o(),r(t,e,i,n)):a.i().focus()}),(function(){a.o(),ql(t,e,i||void 0)}),i||void 0,Ya(md(t)),Xa(md(t)));a.render(e),td(t,a),o&&a.a(o)},s(ph,hc),ph.prototype.v=function(){this.u(this.i),this.l().focus(),hc.prototype.v.call(this)},ph.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(ph.prototype,{l:Jc,u:el}),ks.emailLinkNewDeviceLinking=function(t,e,n,r){var i=new Gt(n);if(n=i.a.a.get(Qt.PROVIDER_ID)||null,Kt(i,null),n){var o=new ph(Ha(md(t),n),(function(){o.o(),r(t,e,i.toString())}),Ya(md(t)),Xa(md(t)));o.render(e),td(t,o)}else ql(t,e)},s(mh,hc),ks.emailLinkSignInCallback=gh,s(bh,hc),bh.prototype.v=function(){this.u(this.i),this.l().focus(),hc.prototype.v.call(this)},bh.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(bh.prototype,{l:Jc,u:el}),ks.emailLinkSignInLinking=function(t,e,n){var r=fa(od(t));if(pa(od(t)),r){var i=r.a.providerId,o=new bh(n,Ha(md(t),i),(function(){!function(t,e,n,r){var i=dc(e);zl(t,e,n,(function(){ql(t,i,n)}),(function(r){if(!r.name||"cancel"!=r.name){var o=Ol(r);r&&"auth/network-request-failed"==r.code?e.a(o):(e.o(),ql(t,i,n,o))}}),r)}(t,o,n,r)}),Ya(md(t)),Xa(md(t)));o.render(e),td(t,o)}else ql(t,e)},s(wh,hc),wh.prototype.v=function(){var t=this;Nu(this,this.l(),(function(){t.i()})),Nu(this,Tu(this,"firebaseui-id-trouble-getting-email-link"),(function(){t.u()})),this.l().focus(),hc.prototype.v.call(this)},wh.prototype.m=function(){this.i=this.u=null,hc.prototype.m.call(this)},M(wh.prototype,{l:tl}),ks.emailLinkSignInSent=function(t,e,n,r,i){var o=new wh(n,(function(){o.o(),Es("emailNotReceived",t,e,n,r,i)}),(function(){o.o(),r()}),Ya(md(t)),Xa(md(t)));o.render(e),td(t,o)},s(_h,hc),_h.prototype.v=function(){this.B(this.l,this.i),this.u().focus(),hc.prototype.v.call(this)},_h.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(_h.prototype,{u:Jc,D:tl,B:el}),ks.emailMismatch=function(t,e,n){var r=fa(od(t));if(r){var i=new _h(n.user.email,r.f,(function(){var e=i;pa(od(t)),Ll(t,e,n)}),(function(){var e=n.credential.providerId,o=dc(i);i.o(),r.a?Es("federatedLinking",t,o,r.f,e):Es("federatedSignIn",t,o,r.f,e)}),Ya(md(t)),Xa(md(t)));i.render(e),td(t,i)}else ql(t,e)},s(kh,hc),kh.prototype.v=function(){var t=this;Nu(this,this.u(),(function(){t.i()})),Nu(this,this.Ba(),(function(){t.l()})),this.u().focus(),hc.prototype.v.call(this)},kh.prototype.Ba=function(){return Tu(this,"firebaseui-id-resend-email-link")},kh.prototype.m=function(){this.i=this.l=null,hc.prototype.m.call(this)},M(kh.prototype,{u:tl}),ks.emailNotReceived=function(t,e,n,r,i){var o=new kh((function(){zl(t,o,n,r,(function(t){t=Ol(t),o.a(t)}),i)}),(function(){o.o(),ql(t,e,n)}),Ya(md(t)),Xa(md(t)));o.render(e),td(t,o)},s(Eh,hc),Eh.prototype.v=function(){this.u(this.i),this.l().focus(),hc.prototype.v.call(this)},Eh.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(Eh.prototype,{l:Jc,u:el}),ks.federatedLinking=function(t,e,n,r,i){var o=fa(od(t));if(o&&o.a){var a=new Eh(n,Ha(md(t),r),(function(){Bl(t,a,r,n)}),Ya(md(t)),Xa(md(t)));a.render(e),td(t,a),i&&a.a(i)}else ql(t,e)},ks.federatedRedirect=function(t,e,n){var r=new mh;r.render(e),td(t,r),Bl(t,r,e=za(md(t))[0],n)},ks.federatedSignIn=function(t,e,n,r,i){var o=new Eh(n,Ha(md(t),r),(function(){Bl(t,o,r,n)}),Ya(md(t)),Xa(md(t)));o.render(e),td(t,o),i&&o.a(i)},ks.passwordLinking=function(t,e,n){var r=fa(od(t));pa(od(t));var i=r&&r.a;if(i){var o=new al(n,(function(){!function(t,e,n,r){var i=e.u();i?dd(t,e.K(A(t.Wb,t),[n,i],(function(n){return n=n.user.linkWithCredential(r).then((function(n){return Ll(t,e,{user:n.user,credential:r,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})})),dd(t,n),n}),(function(t){if(!t.name||"cancel"!=t.name)switch(t.code){case"auth/wrong-password":Au(e.i(),!1),Du(e.D(),Ol(t));break;case"auth/too-many-requests":e.a(Ol(t));break;default:Xi("signInWithEmailAndPassword: "+t.message,void 0),e.a(Ol(t))}}))):e.i().focus()}(t,o,n,i)}),(function(){o.o(),Es("passwordRecovery",t,e,n)}),Ya(md(t)),Xa(md(t)));o.render(e),td(t,o)}else ql(t,e)},s(xh,hc),xh.prototype.v=function(){this.D(),this.J(this.l,this.u),Gs(this.i())||this.i().focus(),pc(this,this.i(),this.l),hc.prototype.v.call(this)},xh.prototype.m=function(){this.u=this.l=null,hc.prototype.m.call(this)},M(xh.prototype,{i:ul,B:cl,D:ll,P:hl,j:dl,U:Jc,S:tl,J:el}),ks.passwordRecovery=function(t,e,n,r,i){var o=new xh((function(){!function(t,e){var n=e.j();if(n){var r=dc(e);dd(t,e.K(A(rd(t).sendPasswordResetEmail,rd(t)),[n],(function(){e.o();var i=new ml(n,(function(){i.o(),ql(t,r)}),Ya(md(t)),Xa(md(t)));i.render(r),td(t,i)}),(function(t){Au(e.i(),!1),Du(e.B(),Ol(t))})))}else e.i().focus()}(t,o)}),r?void 0:function(){o.o(),ql(t,e)},n,Ya(md(t)),Xa(md(t)));o.render(e),td(t,o),i&&o.a(i)},ks.passwordSignIn=function(t,n,r,i){var o=new fl((function(){!function(t,n){var r=n.j(),i=n.u();if(r)if(i){var o=e.auth.EmailAuthProvider.credential(r,i);dd(t,n.K(A(t.ac,t),[r,i],(function(e){return Ll(t,n,{user:e.user,credential:o,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo})}),(function(t){if(!t.name||"cancel"!=t.name)switch(t.code){case"auth/email-already-in-use":break;case"auth/email-exists":Au(n.l(),!1),Du(n.U(),Ol(t));break;case"auth/too-many-requests":case"auth/wrong-password":Au(n.i(),!1),Du(n.D(),Ol(t));break;default:Xi("verifyPassword: "+t.message,void 0),n.a(Ol(t))}})))}else n.i().focus();else n.l().focus()}(t,o)}),(function(){var e=o.P();o.o(),Es("passwordRecovery",t,n,e)}),r,Ya(md(t)),Xa(md(t)),i);o.render(n),td(t,o)},s(Ch,hc),Ch.prototype.v=function(){this.ea(),this.D&&this.Ja(),this.ua(),this.pa(this.B,this.J),this.D?(fc(this,this.i(),this.u()),fc(this,this.u(),this.l())):fc(this,this.i(),this.l()),this.B&&pc(this,this.l(),this.B),Gs(this.i())?this.D&&!Gs(this.u())?this.u().focus():this.l().focus():this.i().focus(),hc.prototype.v.call(this)},Ch.prototype.m=function(){this.J=this.B=null,hc.prototype.m.call(this)},M(Ch.prototype,{i:ul,U:cl,ea:ll,kb:hl,j:dl,u:Sh,Ac:Th,Ja:function(){var t=Sh.call(this),e=Th.call(this);Pu(this,t,(function(){Ru(e)&&(Au(t,!0),Lu(e))}))},P:function(){var t=Sh.call(this),e=Th.call(this),n=Gs(t);return Au(t,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(Lu(e),e=!0):(Du(e,vn("Enter your account name").toString()),e=!1),e?J(Gs(t)):null},l:rh,ba:ah,mb:ih,ua:sh,S:uh,Mb:Jc,Lb:tl,pa:el}),ks.passwordSignUp=function(t,e,n,r,i,o){var a=new Ch(Ja(md(t)),(function(){Ih(t,a)}),i?void 0:function(){a.o(),ql(t,e)},n,r,Ya(md(t)),Xa(md(t)),o);a.render(e),td(t,a)},s(Nh,hc),Nh.prototype.v=function(){var t=this;this.U(this.kb),ur(this.i,"tick",this.B,!1,this),this.i.start(),Nu(this,Tu(this,"firebaseui-id-change-phone-number-link"),(function(){t.S()})),Nu(this,this.Ba(),(function(){t.P()})),this.Ja(this.l),this.ea(this.l,this.J),this.u().focus(),hc.prototype.v.call(this)},Nh.prototype.m=function(){this.P=this.J=this.l=this.S=null,ru(this.i),hr(this.i,"tick",this.B),this.i=null,hc.prototype.m.call(this)},Nh.prototype.B=function(){--this.D,0<this.D?this.U(this.D):(ru(this.i),hr(this.i,"tick",this.B),this.ua(),this.mb())},M(Nh.prototype,{u:Ah,pa:Ph,Ja:function(t){var e=Ah.call(this),n=Ph.call(this);Pu(this,e,(function(){Ru(n)&&(Au(e,!0),Lu(n))})),t&&Mu(this,e,(function(){t()}))},ba:function(){var t=J(Gs(Ah.call(this))||"");return/^\d{6}$/.test(t)?t:null},Eb:Mh,U:function(t){en(Mh.call(this),vn("Resend code in "+(9<t?"0:":"0:0")+t).toString())},ua:function(){Lu(this.Eb())},Ba:function(){return Tu(this,"firebaseui-id-resend-link")},mb:function(){Du(this.Ba())},Mb:Jc,Lb:tl,ea:el}),ks.phoneSignInFinish=function(t,e,n,r,i,o){var a=new Nh((function(){a.o(),Es("phoneSignInStart",t,e,n)}),(function(){!function(t,e,n,r){function i(t){e.u().focus(),Au(e.u(),!1),Du(e.pa(),t)}var o=e.ba();o?(e.Z("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",vn("Verifying...").toString()),dd(t,e.K(A(r.confirm,r),[o],(function(n){e.h(),e.Z("firebaseui-icon-done",vn("Verified!").toString());var r=setTimeout((function(){e.h(),e.o();var r={user:id(t).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};Ll(t,e,r,!0)}),1e3);dd(t,(function(){e&&e.h(),clearTimeout(r)}))}),(function(r){if(r.name&&"cancel"==r.name)e.h();else{var o=Ol(r);switch(r.code){case"auth/credential-already-in-use":e.h();break;case"auth/code-expired":r=dc(e),e.h(),e.o(),Es("phoneSignInStart",t,r,n,o);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":e.h(),i(o);break;default:e.h(),e.a(o)}}})))):i(vn("Wrong code. Try again.").toString())}(t,a,n,i)}),(function(){a.o(),ql(t,e)}),(function(){a.o(),Es("phoneSignInStart",t,e,n)}),Da(n),r,Ya(md(t)),Xa(md(t)));a.render(e),td(t,a),o&&a.a(o)};var Lh=!(oe||Jt("Safari")&&!(te()||Jt("Coast")||Jt("Opera")||Jt("Edge")||Jt("Firefox")||Jt("FxiOS")||Jt("Silk")||Jt("Android")));function Dh(t,e){return/-[a-z]/.test(e)?null:Lh&&t.dataset?!Jt("Android")||te()||Jt("Firefox")||Jt("FxiOS")||Jt("Opera")||Jt("Silk")||e in t.dataset?void 0===(t=t.dataset[e])?null:t:null:t.getAttribute("data-"+String(e).replace(/([A-Z])/g,"-$1").toLowerCase())}function Rh(t,e,n){var r=this;t=ln(Qu,{items:t},null,this.s),rc.call(this,t,!0,!0),n&&(n=function(t,e){t=(t||document).getElementsByTagName("BUTTON");for(var n=0;n<t.length;n++)if(Dh(t[n],"listboxid")===e)return t[n];return null}(t,n))&&(n.focus(),function(t,e){var n=(e=e||Xe(document))||Xe(document),r=_u(t),i=_u(n);if(!oe||9<=Number(ge)){a=bu(n,"borderLeftWidth");var o=bu(n,"borderRightWidth");s=bu(n,"borderTopWidth"),u=bu(n,"borderBottomWidth"),o=new yu(parseFloat(s),parseFloat(o),parseFloat(u),parseFloat(a))}else{var a=Eu(n,"borderLeft");o=Eu(n,"borderRight");var s=Eu(n,"borderTop"),u=Eu(n,"borderBottom");o=new yu(s,o,u,a)}n==Xe(document)?(a=r.a-n.scrollLeft,r=r.f-n.scrollTop,!oe||10<=Number(ge)||(a+=o.left,r+=o.top)):(a=r.a-i.a-o.left,r=r.f-i.f-o.top),i=t.offsetWidth,o=t.offsetHeight,s=ce&&!i&&!o,p(i)&&!s||!t.getBoundingClientRect?t=new Ge(i,o):t=new Ge((t=wu(t)).right-t.left,t.bottom-t.top),i=n.clientHeight-t.height,o=n.scrollLeft,s=n.scrollTop,n=new He(o+=Math.min(a,Math.max(a-(n.clientWidth-t.width),0)),s+=Math.min(r,Math.max(r-i,0))),e.scrollLeft=n.a,e.scrollTop=n.f}(n,t)),Nu(this,t,(function(t){(t=(t=nn(t.target,"firebaseui-id-list-box-dialog-button"))&&Dh(t,"listboxid"))&&(ic.call(r),e(t))}))}function Oh(){return Tu(this,"firebaseui-id-phone-number")}function Bh(){return Tu(this,"firebaseui-id-country-selector")}function Uh(){return Tu(this,"firebaseui-id-phone-number-error")}function Fh(t,e){var n=t.a,r=jh("1-US-0",n),i=null;if(!(i=e&&jh(e,n)?e:r?"1-US-0":0<n.length?n[0].c:null))throw Error("No available default country");Vh.call(this,i,t)}function jh(t,e){return!(!(t=Ta(t))||!H(e,t))}function qh(t){return"firebaseui-flag-"+t.g}function $h(t){var e=this;Rh.call(this,function(t){return $(t,(function(t){return{id:t.c,Ma:"firebaseui-flag "+qh(t),label:t.name+" ‎+"+t.b}}))}(t.a),(function(n){Vh.call(e,n,t,!0),e.N().focus()}),this.Aa)}function Vh(t,e,n){var r=Ta(t);r&&(n&&((e=Sa(e,n=J(Gs(Oh.call(this))||""))).length&&e[0].b!=r.b&&(n="+"+r.b+n.substr(e[0].b.length+1),Ws(Oh.call(this),n))),e=Ta(this.Aa),this.Aa=t,t=Tu(this,"firebaseui-id-country-selector-flag"),e&&Hs(t,qh(e)),zs(t,qh(r)),en(Tu(this,"firebaseui-id-country-selector-code"),"‎+"+r.b))}function zh(t,e,n,r,i,o,a,s,u,c){hc.call(this,Kc,{Fb:e,za:u||null,Wa:!!n,ia:!!o},c,"phoneSignInStart",{G:r,F:i}),this.J=s||null,this.P=e,this.l=t,this.B=n||null,this.pa=a||null}function Hh(t,e,n,r){try{var i=e.U(hs)}catch(t){return}i?cs?(e.Z("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",vn("Verifying...").toString()),dd(t,e.K(A(t.bc,t),[Da(i),n],(function(n){var r=dc(e);e.Z("firebaseui-icon-done",vn("Code sent!").toString());var o=setTimeout((function(){e.h(),e.o(),Es("phoneSignInFinish",t,r,i,15,n)}),1e3);dd(t,(function(){e&&e.h(),clearTimeout(o)}))}),(function(t){if(e.h(),!t.name||"cancel"!=t.name){grecaptcha.reset(ds),cs=null;var n=t&&t.message||"";if(t.code)switch(t.code){case"auth/too-many-requests":n=vn("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return e.N().focus(),void Du(e.D(),Rn().toString());default:n=Ol(t)}e.a(n)}})))):ls?Du(e.u(),vn("Solve the reCAPTCHA").toString()):!ls&&r&&e.i().click():(e.N().focus(),Du(e.D(),Rn().toString()))}function Gh(t,e,n,r,i){hc.call(this,Wc,{Rb:e},i,"providerSignIn",{G:n,F:r}),this.i=t}function Wh(t,e,n,r,i,o,a){hc.call(this,mc,{email:n,Wa:!!e,ia:!!o},a,"signIn",{G:r,F:i}),this.i=t,this.u=e}function Kh(t,e,n,r,i,o){hc.call(this,Nc,{email:t},o,"unsupportedProvider",{G:r,F:i}),this.l=e,this.i=n}function Zh(t,n){this.Z=!1;var r=Xh(n);if(Yh[r])throw Error('An AuthUI instance already exists for the key "'+r+'"');Yh[r]=this,this.f=t,this.u=null,this.X=!1,Qh(this.f),this.a=e.initializeApp({apiKey:t.app.options.apiKey,authDomain:t.app.options.authDomain},t.app.name+"-firebaseui-temp").auth(),Qh(this.a),this.a.setPersistence&&this.a.setPersistence(e.auth.Auth.Persistence.SESSION),this.oa=n,this.ca=new Ua,this.h=this.O=this.i=this.I=this.N=null,this.s=[],this.Y=!1,this.l=Ai.Ya(),this.j=this.C=null,this.da=this.w=!1}function Qh(t){t&&t.INTERNAL&&t.INTERNAL.logFramework&&t.INTERNAL.logFramework("FirebaseUI-web")}s(zh,hc),zh.prototype.v=function(){this.ea(this.pa,this.J),this.S(this.l,this.B||void 0),this.P||fc(this,this.N(),this.i()),pc(this,this.i(),this.l),this.N().focus(),dh(this.N(),(this.N().value||"").length),hc.prototype.v.call(this)},zh.prototype.m=function(){this.B=this.l=null,hc.prototype.m.call(this)},M(zh.prototype,{Db:oc,N:Oh,D:Uh,ea:function(t,e,n){var r=this,i=Oh.call(this),o=Bh.call(this),a=Uh.call(this),s=t||Ma,u=s.a;if(0==u.length)throw Error("No available countries provided.");Fh.call(r,s,e),Nu(this,o,(function(){$h.call(r,s)})),Pu(this,i,(function(){Ru(a)&&(Au(i,!0),Lu(a));var t=J(Gs(i)||""),e=Ta(this.Aa),n=Sa(s,t);t=jh("1-US-0",u),n.length&&n[0].b!=e.b&&(e=n[0],Vh.call(r,"1"==e.b&&t?"1-US-0":e.c,s))})),n&&Mu(this,i,(function(){n()}))},U:function(t){var e=J(Gs(Oh.call(this))||""),n=(t=t||Ma).a,r=Sa(Ma,e);if(r.length&&!H(n,r[0]))throw Ws(Oh.call(this)),Oh.call(this).focus(),Du(Uh.call(this),vn("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=Ta(this.Aa),r.length&&r[0].b!=n.b&&Vh.call(this,r[0].c,t),r.length&&(e=e.substr(r[0].b.length+1)),e?new Na(this.Aa,e):null},Ja:Bh,ba:function(){return Tu(this,"firebaseui-recaptcha-container")},u:function(){return Tu(this,"firebaseui-id-recaptcha-error")},i:Jc,ua:tl,S:el}),ks.phoneSignInStart=function(t,n,r,i){var o=function(t){var n=null;if(j($a(t),(function(t){t.provider==e.auth.PhoneAuthProvider.PROVIDER_ID&&x(t.recaptchaParameters)&&!_(t.recaptchaParameters)&&(n=lt(t.recaptchaParameters))})),n){var r=[];j(_s,(function(t){void 0!==n[t]&&(r.push(t),delete n[t])})),r.length&&no('The following provided "recaptchaParameters" keys are not allowed: '+r.join(", "))}return n}(md(t))||{};cs=null,ls=!(o&&"invisible"===o.size);var a=jl(t),s=function(t){var n=(t=Va(t,e.auth.PhoneAuthProvider.PROVIDER_ID))&&t.defaultCountry||null;n=n&&Ca(n);var r=null;return t&&"string"==typeof t.loginHint&&(r=La(t.loginHint)),n&&n[0]||r&&Ta(r.a)||null}(md(t)),u=a?function(t){var n=null;return(t=Va(t,e.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"==typeof t.loginHint&&(n=La(t.loginHint)),t&&t.defaultNationalNumber||n&&n.za||null}(md(t)):null;s=r&&r.a||s&&s.c||null,r=r&&r.za||u,(u=Za(md(t)))&&Aa(u),hs=u?new xa(Za(md(t))):Ma;var c=new zh((function(e){Hh(t,c,l,!(!e||!e.keyCode))}),ls,a?null:function(){l.clear(),c.o(),ql(t,n)},Ya(md(t)),Xa(md(t)),a,hs,s,r);c.render(n),td(t,c),i&&c.a(i),o.callback=function(e){c.u()&&Lu(c.u()),cs=e,ls||Hh(t,c,l)},o["expired-callback"]=function(){cs=null};var l=new e.auth.RecaptchaVerifier(ls?c.ba():c.i(),o,id(t).app);dd(t,c.K(A(l.render,l),[],(function(t){ds=t}),(function(e){e.name&&"cancel"==e.name||(e=Ol(e),c.o(),ql(t,n,void 0,e))})))},ks.prefilledEmailSignIn=function(t,e,n){var r=new mh;r.render(e),td(t,r),dd(t,r.K(A(rd(t).fetchSignInMethodsForEmail,rd(t)),[n],(function(i){r.o();var o=!(!Fl(t)||!ad(t));Vl(t,e,i,n,void 0,void 0,o)}),(function(i){i=Ol(i),r.o(),Es("signIn",t,e,n,i)})))},s(Gh,hc),Gh.prototype.v=function(){this.l(this.i),hc.prototype.v.call(this)},Gh.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(Gh.prototype,{l:function(t){function e(e){t(e)}for(var n=this.f?Ke("firebaseui-id-idp-button",this.f||this.s.a):[],r=0;r<n.length;r++){var i=n[r];Nu(this,i,P(e,Dh(i,"providerId")))}}}),ks.providerSignIn=function(t,n,r,i){var o=new Gh((function(r){r==e.auth.EmailAuthProvider.PROVIDER_ID?(o.o(),Hl(t,n,i)):r==e.auth.PhoneAuthProvider.PROVIDER_ID?(o.o(),Es("phoneSignInStart",t,n)):"anonymous"==r?function(t,e){dd(t,e.K(A(t.Zb,t),[],(function(n){return e.o(),Ll(t,e,n,!0)}),(function(t){t.name&&"cancel"==t.name||(Xi("ContinueAsGuest: "+t.code,void 0),t=Ol(t),e.a(t))})))}(t,o):Bl(t,o,r,i),gd(t),t.l.cancel()}),Ga(md(t)),Ya(md(t)),Xa(md(t)));o.render(n),td(t,o),r&&o.a(r),function(t){gd(t);try{(function t(e,n,r){if(e.a&&n){var i=function(){e.h=!0;var i=Promise.resolve(null);return r||(i=e.a.retrieve(n).catch((function(t){if(t.type===Ni||t.type===Mi)throw t;return null}))),i.then((function(t){return t||e.a.hint(n)})).catch((function(i){if(i.type===Ni)e.f=Promise.resolve();else if(i.type===Mi)return e.cancel(),t(e,n,r);return null}))};return e.f?e.f.then(i):i()}if(n)return i=Li.Ya().load().then((function(){return e.a=f.googleyolo,t(e,n,r)})).ta((function(){return null})),Promise.resolve(i);if("undefined"!=typeof Promise)return Promise.resolve(null);throw Error("One-Tap sign in not supported in the current browser!")})(t.l,function(t){var e=[],n=[];j($a(t),(function(t){t.authMethod&&(e.push(t.authMethod),t.clientId&&n.push({uri:t.authMethod,clientId:t.clientId}))}));var r=null;return us(t)===ps&&e.length&&(r={supportedIdTokenProviders:n,supportedAuthMethods:e}),r}(md(t)),function(t){var n;return gd(t),(n=t.Y)||(t=Ka(t=md(t),e.auth.GoogleAuthProvider.PROVIDER_ID),n=!(!t||"select_account"!==t.prompt)),n}(t)).then((function(e){return!!t.h&&Ul(t,t.h,e)}))}catch(t){}}(t)},ks.sendEmailLinkForSignIn=function(t,e,n,r){var i=new Ql;i.render(e),td(t,i),zl(t,i,n,r,(function(r){i.o(),r=Ol(r),Es("signIn",t,e,n,r)}))},s(Wh,hc),Wh.prototype.v=function(){this.B(this.i),this.D(this.i,this.u||void 0),this.l().focus(),dh(this.l(),(this.l().value||"").length),hc.prototype.v.call(this)},Wh.prototype.m=function(){this.u=this.i=null,hc.prototype.m.call(this)},M(Wh.prototype,{l:ul,P:cl,B:ll,J:hl,j:dl,U:Jc,S:tl,D:el}),ks.signIn=function(t,e,n,r){var i=Fl(t),o=new Wh((function(){var e=o,n=e.j()||"";n&&$l(t,e,n)}),i&&us(md(t))!=fs?null:function(){o.o(),ql(t,e,n)},n,Ya(md(t)),Xa(md(t)),i);o.render(e),td(t,o),r&&o.a(r)},s(Kh,hc),Kh.prototype.v=function(){this.B(this.l,this.i),this.u().focus(),hc.prototype.v.call(this)},Kh.prototype.m=function(){this.i=this.l=null,hc.prototype.m.call(this)},M(Kh.prototype,{u:Jc,D:tl,B:el}),ks.unsupportedProvider=function(t,e,n){var r=new Kh(n,(function(){r.o(),Es("passwordRecovery",t,e,n)}),(function(){r.o(),ql(t,e,n)}),Ya(md(t)),Xa(md(t)));r.render(e),td(t,r)};var Yh={};function Xh(t){return t||"[DEFAULT]"}function Jh(t){return gd(t),t.i||(t.i=ld(t,(function(e){return e&&!fa(od(t))?Qr(id(t).getRedirectResult().then((function(t){return t}),(function(e){if(e&&"auth/email-already-in-use"==e.code&&e.email&&e.credential)throw e;return bd(t,e)}))):Qr(rd(t).getRedirectResult().then((function(e){return qa(md(t))&&!e.user&&t.j&&!t.j.isAnonymous?id(t).getRedirectResult():e})))}))),t.i}function td(t,e){gd(t),t.h=e}var ed=null;function nd(){return ed}function rd(t){return gd(t),t.a}function id(t){return gd(t),t.f}function od(t){return gd(t),t.oa}function ad(t){return gd(t),t.N?t.N.emailHint:void 0}function sd(t){return"signIn"===((t=new Gt(t)).a.a.get(Qt.wb)||null)&&!!t.a.a.get(Qt.ab)}function ud(t,e,n,r){gd(t),void 0!==t.f.languageCode&&(t.u=t.f.languageCode);var i="en".replace(/_/g,"-");t.f.languageCode=i,t.a.languageCode=i,t.X=!0,void 0!==t.f.tenantId&&(t.a.tenantId=t.f.tenantId),t.jb(n),t.N=r||null;var o=f.document;t.C?t.C.then((function(){"complete"==o.readyState?cd(t,e):lr(window,"load",(function(){cd(t,e)}))})):"complete"==o.readyState?cd(t,e):lr(window,"load",(function(){cd(t,e)}))}function cd(t,e){var n=hi(e,"Could not find the FirebaseUI widget element on the page.");if(n.setAttribute("lang","en".replace(/_/g,"-")),ed){var r=ed;gd(r),fa(od(r))&&no("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),ed.reset()}ed=t,t.O=n,function(t,e){t.L=null,t.I=new Ir(e),t.I.register(),ur(t.I,"pageEnter",(function(e){if(e=e&&e.pageId,t.L!=e){var n=md(t);(n=ss(n).uiChanged||null)&&n(t.L,e),t.L=e}}))}(t,n),Ho(new Go)&&Ho(new Wo)?Kl(t,e):(e=hi(e,"Could not find the FirebaseUI widget element on the page."),(n=new Tl(vn("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(e),td(t,n)),e=t.h&&"blank"==t.h.Ea&&es(md(t)),ga(od(t))&&!e&&(pd(t,(e=ga(od(t))).a),sa(ta,od(t)))}function ld(t,e){if(t.w)return e(hd(t));if(dd(t,(function(){t.w=!1})),qa(md(t))){var n=new Vr((function(n){dd(t,t.f.onAuthStateChanged((function(r){t.j=r,t.w||(t.w=!0,n(e(hd(t))))})))}));return dd(t,n),n}return t.w=!0,e(null)}function hd(t){return gd(t),qa(md(t))&&t.j&&t.j.isAnonymous?t.j:null}function dd(t,e){if(gd(t),e){t.s.push(e);var n=function(){K(t.s,(function(t){return t==e}))};"function"!=typeof e&&e.then(n,n)}}function fd(t){void 0!==t.f.languageCode&&t.X&&(t.X=!1,t.f.languageCode=t.u)}function pd(t,e){t.f.tenantId=e,t.a.tenantId=e}function md(t){return gd(t),t.ca}function gd(t){if(t.Z)throw Error("AuthUI instance is deleted!")}function vd(){var t=di();if(sd(t)){for(var e in t=new Gt(t),Qt)Qt.hasOwnProperty(e)&&$t(t.a.a,Qt[e]);e={state:"signIn",mode:"emailLink",operation:"clear"};var n=f.document.title;f.history&&f.history.replaceState&&f.history.replaceState(e,n,t.toString())}}function yd(t){return gd(t),rd(t).signOut()}function bd(t,e,n){if(gd(t),e&&e.code&&("auth/email-already-in-use"==e.code||"auth/credential-already-in-use"==e.code)){var r=as(md(t));return Qr().then((function(){return r(new qn("anonymous-upgrade-merge-conflict",null,n||e.credential))})).then((function(){throw t.h&&(t.h.o(),t.h=null),e}))}return Yr(e)}function wd(t,e,n,r){hc.call(this,Xc,void 0,r,"providerMatchByEmail",{G:e,F:n}),this.i=t}function _d(t,e,n,r,i){hc.call(this,Yc,{dc:e},i,"selectTenant",{G:n,F:r}),this.i=t}function kd(t){hc.call(this,_c,void 0,t,"spinner")}function Ed(t){for(var e in this.a=new ya,ba(this.a,"authDomain"),ba(this.a,"displayMode",Md),ba(this.a,"tenants"),ba(this.a,"callbacks"),ba(this.a,"tosUrl"),ba(this.a,"privacyPolicyUrl"),t)if(t.hasOwnProperty(e))try{wa(this.a,e,t[e])}catch(t){Xi('Invalid config: "'+e+'"',void 0)}}function xd(t){return t.a.get("callbacks")||{}}function Sd(t){var e=t.a.get("tosUrl")||null;if(t=t.a.get("privacyPolicyUrl")||null,e&&!t&&no("Privacy Policy URL is missing, the link will not be displayed."),e&&t){if("function"==typeof e)return e;if("string"==typeof e)return function(){li(e)}}return null}function Td(t){var e=t.a.get("tosUrl")||null,n=t.a.get("privacyPolicyUrl")||null;if(n&&!e&&no("Terms of Service URL is missing, the link will not be displayed."),e&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){li(n)}}return null}function Cd(t,e){if(!(t=t.a.get("tenants"))||!t.hasOwnProperty(e)&&!t.hasOwnProperty(Ld))throw Error("Invalid tenant configuration!")}function Id(t,e,n){if(!(t=t.a.get("tenants")))throw Error("Invalid tenant configuration!");var r=[];if(!(t=t[e]||t[Ld]))return Xi("Invalid tenant configuration: "+e+" is not configured!",void 0),r;if(!(e=t.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return e.forEach((function(t){if("string"==typeof t)r.push(t);else if("string"==typeof t.provider){var e=t.hd;e&&n?(e instanceof RegExp?e:new RegExp("@"+e.replace(".","\\.")+"$")).test(n)&&r.push(t.provider):r.push(t.provider)}else Xi(t="Invalid tenant configuration: signInOption "+JSON.stringify(t)+" is invalid!",void 0)})),r}function Ad(t,e,n){return t=function(t,e){var n=Pd,r=void 0===r?{}:r;return Cd(t,e),function(t,e,n){return n=void 0===n?{}:n,Object.keys(t).filter((function(t){return e.includes(t)})).reduce((function(e,n){return e[n]=t[n],e}),n)}((t=t.a.get("tenants"))[e]||t[Ld],n,r)}(t,e),(e=t.signInOptions)&&n&&(e=e.filter((function(t){return"string"==typeof t?n.includes(t):n.includes(t.provider)})),t.signInOptions=e),t}(t=Zh.prototype).ob=function(){return gd(this),!!ga(od(this))||sd(di())},t.start=function(t,e){ud(this,t,e)},t.disableAutoSignIn=function(){gd(this),this.Y=!0},t.reset=function(){gd(this);var t=this;this.O&&this.O.removeAttribute("lang"),this.I&&Tr(this.I),fd(this),this.N=null,vd(),sa(ta,od(this)),gd(this),this.l.cancel(),this.i=Qr({user:null,credential:null}),ed==this&&(ed=null),this.O=null;for(var e=0;e<this.s.length;e++)"function"==typeof this.s[e]?this.s[e]():this.s[e].cancel&&this.s[e].cancel();this.s=[],pa(od(this)),this.h&&(this.h.o(),this.h=null),this.L=null,this.a&&(this.C=yd(this).then((function(){t.C=null}),(function(){t.C=null})))},t.jb=function(t){gd(this);var e,n=this.ca;for(e in t)try{wa(n.a,e,t[e])}catch(t){Xi('Invalid config: "'+e+'"',void 0)}le&&wa(n.a,"popupMode",!1),Za(n),!this.da&&is(md(this))&&(no("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},t.Vb=function(){gd(this);var t=md(this),e=_a(t.a,"widgetUrl"),n=ja(t,e);md(this).a.get("popupMode")?(n=n||"about:blank",(t={width:500,height:600,top:0<(t=(window.screen.availHeight-600)/2)?t:0,left:0<(e=(window.screen.availWidth-500)/2)?e:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=t.target||n.target||"google_popup",t.width=t.width||690,t.height=t.height||500,(t=si(n,t))&&t.focus()):ui(n)},t.Xa=function(){var t=this;return gd(this),this.a.app.delete().then((function(){var e=Xh(od(t));delete Yh[e],t.reset(),t.Z=!0}))},t.Hb=function(t,n){gd(this);var r=this,i=function(){for(var t=32,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();if(!ts(md(this)))return Yr(Error("Email link sign-in should be enabled to trigger email sending."));var o=function(t){if(ts(t)){var n={url:di(),handleCodeInApp:!0};return(t=Va(t,e.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof t.emailLinkSignIn&&dt(n,t.emailLinkSignIn()),n.url=Mt(di(),n.url).toString(),n}return null}(md(this)),a=new Gt(o.url);return function(t,e){e?t.a.a.set(Qt.Ta,e):$t(t.a.a,Qt.Ta)}(a,i),n&&n.a&&(function(t,e,n){ua(oa,Do(t,JSON.stringify(e.aa())),n)}(i,n,od(this)),Kt(a,n.a.providerId)),function(t,e){null!==e?t.a.a.set(Qt.Ra,e?"1":"0"):$t(t.a.a,Qt.Ra)}(a,function(t){return!(!(t=Va(t,e.auth.EmailAuthProvider.PROVIDER_ID))||!t.forceSameDevice)}(md(this))),ld(this,(function(e){return e&&((e=e.uid)?a.a.a.set(Qt.Qa,e):$t(a.a.a,Qt.Qa)),o.url=a.toString(),rd(r).sendSignInLinkToEmail(t,o)})).then((function(){var e=od(r),n={};n.email=t,ua(ia,Do(i,JSON.stringify(n)),e)}),(function(t){throw sa(oa,od(r)),sa(ia,od(r)),t}))},t.ac=function(t,n){gd(this);var r=this;return rd(this).signInWithEmailAndPassword(t,n).then((function(i){return ld(r,(function(o){return o?yd(r).then((function(){return bd(r,{code:"auth/email-already-in-use"},e.auth.EmailAuthProvider.credential(t,n))})):i}))}))},t.Xb=function(t,n){gd(this);var r=this;return ld(this,(function(i){if(i){var o=e.auth.EmailAuthProvider.credential(t,n);return i.linkWithCredential(o)}return rd(r).createUserWithEmailAndPassword(t,n)}))},t.$b=function(t){gd(this);var e=this;return ld(this,(function(n){return n?n.linkWithCredential(t).then((function(t){return t}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return bd(e,n,t)})):rd(e).signInWithCredential(t)}))},t.cc=function(t){gd(this);var e=this,n=this.i;return this.i=null,ld(this,(function(n){return n&&!fa(od(e))?n.linkWithRedirect(t):rd(e).signInWithRedirect(t)})).then((function(){}),(function(t){throw e.i=n,t}))},t.bc=function(t,e){gd(this);var n=this;return ld(this,(function(r){return r?r.linkWithPhoneNumber(t,e).then((function(t){return new Di(t,(function(t){if("auth/credential-already-in-use"==t.code)return bd(n,t);throw t}))})):id(n).signInWithPhoneNumber(t,e).then((function(t){return new Di(t)}))}))},t.Zb=function(){return gd(this),id(this).signInAnonymously()},t.Wb=function(t,e){return gd(this),rd(this).signInWithEmailAndPassword(t,e)},s(wd,hc),wd.prototype.v=function(){this.u(this.i),this.B(this.i),this.l().focus(),dh(this.l(),(this.l().value||"").length),hc.prototype.v.call(this)},wd.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},M(wd.prototype,{l:ul,J:cl,u:ll,D:hl,j:dl,P:Jc,B:el}),s(_d,hc),_d.prototype.v=function(){!function(t,e){function n(t){e(t)}for(var r=t.f?Ke("firebaseui-id-tenant-selection-button",t.f||t.s.a):[],i=0;i<r.length;i++){var o=r[i],a=Dh(o,"tenantId");Nu(t,o,P(n,a))}}(this,this.i),hc.prototype.v.call(this)},_d.prototype.m=function(){this.i=null,hc.prototype.m.call(this)},s(kd,hc);var Pd=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],Md="optionFirst",Nd={oc:Md,nc:"identifierFirst"},Ld="*";function Dd(t,e){var n=this;this.s=hi(t),this.a={},Object.keys(e).forEach((function(t){n.a[t]=new Ed(e[t])})),this.pb=this.f=this.w=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.pb},set:function(t){this.pb=t||null},enumerable:!1})}function Rd(t){t.j&&t.j.reset(),t.nb(),t.f&&t.f.o()}(t=Dd.prototype).Tb=function(t,e){var n=this;Rd(this);var r=t.apiKey;return new Vr((function(t,i){if(n.a.hasOwnProperty(r)){var o=xd(n.a[r]).selectTenantUiHidden||null;if(function(t){for(var e in t=t.a.get("displayMode"),Nd)if(Nd[e]===t)return Nd[e];return Md}(n.a[r])===Md){var a=[];e.forEach((function(t){t=t||"_";var e=n.a[r].a.get("tenants");if(!e)throw Error("Invalid tenant configuration!");(e=e[t]||e[Ld])?t={tenantId:"_"!==t?t:null,displayName:e.displayName,Na:e.iconUrl,Ga:e.buttonColor}:(Xi("Invalid tenant configuration: "+t+" is not configured!",void 0),t=null),t&&a.push(t)}));var s=function(e){e={tenantId:e,providerIds:Id(n.a[r],e||"_")},t(e)};if(1===a.length)return void s(a[0].tenantId);n.f=new _d((function(t){Rd(n),o&&o(),s(t)}),a,Sd(n.a[r]),Td(n.a[r]))}else n.f=new wd((function(){var i=n.f.j();if(i){for(var a=0;a<e.length;a++){var s=Id(n.a[r],e[a]||"_",i);if(0!==s.length)return i={tenantId:e[a],providerIds:s,email:i},Rd(n),o&&o(),void t(i)}n.f.a(Fn({code:"no-matching-tenant-for-email"}).toString())}}),Sd(n.a[r]),Td(n.a[r]));n.f.render(n.s),(i=xd(n.a[r]).selectTenantUiShown||null)&&i()}else{var u=Error("Invalid project configuration: API key is invalid!");u.code="invalid-configuration",n.qb(u),i(u)}}))},t.Ob=function(t,n){if(!this.a.hasOwnProperty(t))throw Error("Invalid project configuration: API key is invalid!");var r=n||void 0;Cd(this.a[t],n||"_");try{this.i=e.app(r).auth()}catch(o){var i=this.a[t].a.get("authDomain");if(!i)throw Error("Invalid project configuration: authDomain is required!");(t=e.initializeApp({apiKey:t,authDomain:i},r)).auth().tenantId=n,this.i=t.auth()}return this.i},t.Yb=function(t,e){var n=this;return new Vr((function(r,i){function o(e,r){n.j=new Zh(t),ud(n.j,n.s,e,r)}var a=t.app.options.apiKey;n.a.hasOwnProperty(a)||i(Error("Invalid project configuration: API key is invalid!"));var s=Ad(n.a[a],t.tenantId||"_",e&&e.providerIds);Rd(n),i={signInSuccessWithAuthResult:function(t){return r(t),!1}};var u,c=xd(n.a[a]).signInUiShown||null,l=!1;i.uiChanged=function(e,r){null===e&&"callback"===r?((e=Ze("firebaseui-id-page-callback",n.s))&&Lu(e),n.h=new kd,n.h.render(n.s)):l||null===e&&"spinner"===r||"blank"===r||(n.h&&(n.h.o(),n.h=null),l=!0,c&&c(t.tenantId))},s.callbacks=i,s.credentialHelper="none",e&&e.email&&(u={emailHint:e.email}),n.j?n.j.Xa().then((function(){o(s,u)})):o(s,u)}))},t.reset=function(){var t=this;return Qr().then((function(){t.j&&t.j.Xa()})).then((function(){t.j=null,Rd(t)}))},t.Ub=function(){var t=this;this.h||this.w||(this.w=window.setTimeout((function(){Rd(t),t.h=new kd,t.f=t.h,t.h.render(t.s),t.w=null}),500))},t.nb=function(){window.clearTimeout(this.w),this.w=null,this.h&&(this.h.o(),this.h=null)},t.Cb=function(){return Rd(this),this.f=new _l,this.f.render(this.s),Qr()},t.qb=function(t){var e,n=this,r=Fn({code:t.code}).toString()||t.message;Rd(this),t.retry&&E(t.retry)&&(e=function(){n.reset(),t.retry()}),this.f=new Sl(r,e),this.f.render(this.s)},t.Qb=function(t){var e=this;return Qr().then((function(){var n=e.i&&e.i.app.options.apiKey;if(!e.a.hasOwnProperty(n))throw Error("Invalid project configuration: API key is invalid!");if(Cd(e.a[n],t.tenantId||"_"),!e.i.currentUser||e.i.currentUser.uid!==t.uid)throw Error("The user being processed does not match the signed in user!");return(n=xd(e.a[n]).beforeSignInSuccess||null)?n(t):t})).then((function(e){if(e.uid!==t.uid)throw Error("User with mismatching UID returned.");return e}))},D("firebaseui.auth.FirebaseUiHandler",Dd),D("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Dd.prototype.Tb),D("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Dd.prototype.Ob),D("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Dd.prototype.Yb),D("firebaseui.auth.FirebaseUiHandler.prototype.reset",Dd.prototype.reset),D("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Dd.prototype.Ub),D("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Dd.prototype.nb),D("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Dd.prototype.Cb),D("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Dd.prototype.qb),D("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Dd.prototype.Qb),D("firebaseui.auth.AuthUI",Zh),D("firebaseui.auth.AuthUI.getInstance",(function(t){return t=Xh(t),Yh[t]?Yh[t]:null})),D("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Zh.prototype.disableAutoSignIn),D("firebaseui.auth.AuthUI.prototype.start",Zh.prototype.start),D("firebaseui.auth.AuthUI.prototype.setConfig",Zh.prototype.jb),D("firebaseui.auth.AuthUI.prototype.signIn",Zh.prototype.Vb),D("firebaseui.auth.AuthUI.prototype.reset",Zh.prototype.reset),D("firebaseui.auth.AuthUI.prototype.delete",Zh.prototype.Xa),D("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Zh.prototype.ob),D("firebaseui.auth.AuthUIError",qn),D("firebaseui.auth.AuthUIError.prototype.toJSON",qn.prototype.toJSON),D("firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM",fs),D("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",ps),D("firebaseui.auth.CredentialHelper.NONE",ms),D("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Vr.prototype.catch=Vr.prototype.ta,Vr.prototype.finally=Vr.prototype.ec}.apply(void 0!==kt?kt:"undefined"!=typeof self?self:window),"undefined"!=typeof window&&(window.dialogPolyfill=so)}(),t.exports=firebaseui})),co=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)lo.call(n,r)&&(t[r]=n[r])}return t},lo=Object.prototype.hasOwnProperty;var ho=Object.prototype.toString,fo={};function po(t){var e=Array.isArray(t);return function(n){var r,i=mo(fo.plainArray,n);if(i)return i;if(e&&n.length!==t.length)return"an array with "+t.length+" items";for(var o=0;o<n.length;o++)if(i=mo((r=o,e?t[r]:t),n[o]))return[o].concat(i)}}function mo(t,e){if(null!=e||t.hasOwnProperty("__required")){var n=t(e);return n?Array.isArray(n)?n:[n]:void 0}}function go(t,e){var n=t.length,r=t[n-1],i=t.slice(0,n-1);return 0===i.length&&(i=["value"]),e=co(e,{path:i}),"function"==typeof r?r(e):yo(e,function(t){return"must be "+function(t){if(/^an? /.test(t))return t;if(/^[aeiou]/i.test(t))return"an "+t;if(/^[a-z]/i.test(t))return"a "+t;return t}(t)+"."}(r))}function vo(t){return t.length<2?t[0]:2===t.length?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function yo(t,e){return(bo(t.path)?"Item at position ":"")+(t.path.join(".")+" "+e)}function bo(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}fo.assert=function(t,e){return e=e||{},function(n){var r=mo(t,n);if(r){var i=go(r,e);throw e.apiName&&(i=e.apiName+": "+i),new Error(i)}}},fo.shape=function(t){var e,n=(e=t,Object.keys(e||{}).map((function(t){return{key:t,value:e[t]}})));return function(t){var e,r=mo(fo.plainObject,t);if(r)return r;for(var i=[],o=0;o<n.length;o++)e=n[o].key,(r=mo(n[o].value,t[e]))&&i.push([e].concat(r));return i.length<2?i[0]:function(t){i=i.map((function(e){return"- "+e[0]+": "+go(e,t).split("\n").join("\n  ")}));var e=t.path.join(".");return"The following properties"+("value"===e?"":" of "+e)+" have invalid values:\n  "+i.join("\n  ")}}},fo.strictShape=function(t){var e=fo.shape(t);return function(n){var r=e(n);if(r)return r;var i=Object.keys(n).reduce((function(e,n){return void 0===t[n]&&e.push(n),e}),[]);return 0!==i.length?function(){return"The following keys are invalid: "+i.join(", ")}:void 0}},fo.arrayOf=function(t){return po(t)},fo.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return po(t)},fo.required=function(t){function e(e){return null==e?function(t){return yo(t,bo(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},fo.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var n=t.map((function(t){return mo(t,e)})).filter(Boolean);if(n.length===t.length)return n.every((function(t){return 1===t.length&&"string"==typeof t[0]}))?vo(n.map((function(t){return t[0]}))):n.reduce((function(t,e){return e.length>t.length?e:t}))}},fo.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},fo.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),e=t.map((function(t){return fo.equal(t)}));return fo.oneOfType.apply(this,e)},fo.range=function(t){var e=t[0],n=t[1];return function(t){if(mo(fo.number,t)||t<e||t>n)return"number between "+e+" & "+n+" (inclusive)"}},fo.any=function(){},fo.boolean=function(t){if("boolean"!=typeof t)return"boolean"},fo.number=function(t){if("number"!=typeof t)return"number"},fo.plainArray=function(t){if(!Array.isArray(t))return"array"},fo.plainObject=function(t){if(e=t,"[object Object]"!==ho.call(e)||null!==(n=Object.getPrototypeOf(e))&&n!==Object.getPrototypeOf({}))return"object";var e,n},fo.string=function(t){if("string"!=typeof t)return"string"},fo.func=function(t){if("function"!=typeof t)return"function"},fo.validate=mo,fo.processMessage=go;var wo=fo;var _o=co(wo,{file:function(t){if("undefined"!=typeof window){if(t instanceof kt.Blob||t instanceof kt.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){if("boolean"==typeof t)return"date";try{var e=new Date(t);if(e.getTime&&isNaN(e.getTime()))return"date"}catch(t){return"date"}},coordinates:function(t){return wo.tuple(wo.number,wo.number)(t)},assertShape:function(t,e){return wo.assert(wo.strictShape(t),e)}});var ko=function(t,e){var n=function(t,n){return-1!==e.indexOf(t)&&void 0!==n};return"function"==typeof e&&(n=e),Object.keys(t).filter((function(e){return n(e,t[e])})).reduce((function(e,n){return e[n]=t[n],e}),{})};var Eo=function(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=e(r,t[r]),n}),{})};var xo=function(t){return Eo(t,(function(t,e){return"boolean"==typeof e?JSON.stringify(e):e}))},So=St((function(t,e){!function(n){var r=e,i=t&&t.exports==r&&t,o="object"==typeof kt&&kt;o.global!==o&&o.window!==o||(n=o);var a=function(t){this.message=t};(a.prototype=new Error).name="InvalidCharacterError";var s=function(t){throw new a(t)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,l={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,r,i,o=t.length%3,a="",c=-1,l=t.length-o;++c<l;)e=t.charCodeAt(c)<<16,n=t.charCodeAt(++c)<<8,r=t.charCodeAt(++c),a+=u.charAt((i=e+n+r)>>18&63)+u.charAt(i>>12&63)+u.charAt(i>>6&63)+u.charAt(63&i);return 2==o?(e=t.charCodeAt(c)<<8,n=t.charCodeAt(++c),a+=u.charAt((i=e+n)>>10)+u.charAt(i>>4&63)+u.charAt(i<<2&63)+"="):1==o&&(i=t.charCodeAt(c),a+=u.charAt(i>>2)+u.charAt(i<<4&63)+"=="),a},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<e;)r=u.indexOf(t.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};if(r&&!r.nodeType)if(i)i.exports=l;else for(var h in l)l.hasOwnProperty(h)&&(r[h]=l[h]);else n.base64=l}(kt)})),To={};function Co(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Io=function(t){if(To[t])return To[t];var e=t.split("."),n=e[0],r=e[1];if(!r)throw new Error("Invalid token");var i=function(t){try{return JSON.parse(So.decode(t))}catch(t){throw new Error("Invalid token")}}(r),o={usage:n,user:i.u};return Co(i,"a")&&(o.authorization=i.a),Co(i,"exp")&&(o.expires=1e3*i.exp),Co(i,"iat")&&(o.created=1e3*i.iat),Co(i,"scopes")&&(o.scopes=i.scopes),Co(i,"client")&&(o.client=i.client),Co(i,"ll")&&(o.lastLogin=i.ll),Co(i,"iu")&&(o.impersonator=i.iu),To[t]=o,o},Ao=St((function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,o),!0;case 6:return l.fn.call(l.context,e,r,i,o,a),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}));function Po(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function Mo(t,e,n){if(!1===n||null===n)return t;var r=/\?/.test(t)?"&":"?",i=encodeURIComponent(e);return void 0!==n&&""!==n&&!0!==n&&(i+="="+Po(n)),""+t+r+i}var No={appendQueryObject:function(t,e){if(!e)return t;var n=t;return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(Array.isArray(r)&&(r=r.filter((function(t){return!!t})).join(",")),n=Mo(n,t,r))})),n},appendQueryParam:Mo,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,(function(t,n){var r=e[n];if(void 0===r)throw new Error("Unspecified route parameter "+n);return"/"+Po(r)})):t}},Lo="https://api.mapbox.com",Do="downloadProgress",Ro="uploadProgress",Oo="error",Bo="response",Uo="HttpError",Fo="RequestAbortedError",jo=1;function qo(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var r=co(n,e.headers),i=Object.keys(r).reduce((function(t,e){return t[e.toLowerCase()]=r[e],t}),{});this.id=jo++,this._options=e,this.emitter=new Ao,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.headers=i}qo.prototype.url=function(t){var e=No.prependOrigin(this.path,this.origin);e=No.appendQueryObject(e,this.query);var n=this.params,r=null==t?this.client.accessToken:t;if(r){e=No.appendQueryParam(e,"access_token",r);var i=Io(r).user;n=co({ownerId:i},n)}return e=No.interpolateRouteParams(e,n),e},qo.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then((function(e){return t.response=e,t.emitter.emit(Bo,e),e}),(function(e){throw t.error=e,t.emitter.emit(Oo,e),e}))},qo.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},qo.prototype.eachPage=function(t){var e=this;function n(n){t(null,n,(function(){delete e._nextPageRequest;var t=n.nextPage();t&&(e._nextPageRequest=t,i(t))}))}function r(e){t(e,null,(function(){}))}function i(t){t.send().then(n,r)}i(this)},qo.prototype.clone=function(){return this._extend()},qo.prototype._extend=function(t){var e=co(this._options,t);return new qo(this.client,e)};var $o=qo;function Vo(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");Io(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||Lo}Vo.prototype.createRequest=function(t){return new $o(this,t)};var zo=Vo;var Ho=function(t){return t?t.split(/,\s*</).reduce((function(t,e){var n=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],r=e[2].split(";"),i=null,o=r.reduce((function(t,e){var n=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return n?"rel"===n.key?(i||(i=n.value),t):(t[n.key]=n.value,t):t}),{});return i?{url:n,rel:i,params:o}:null}(e);return n?(n.rel.split(/\s+/).forEach((function(e){t[e]||(t[e]={url:n.url,params:n.params})})),t):t}),{}):{}};function Go(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(t){this.body=e.body}this.links=Ho(this.headers.link)}Go.prototype.hasNextPage=function(){return!!this.links.next},Go.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var Wo=Go;var Ko=function(t){var e,n=t.type||Uo;if(t.body)try{e=JSON.parse(t.body)}catch(n){e=t.body}else e=null;var r=t.message||null;r||("string"==typeof e?r=e:e&&"string"==typeof e.message?r=e.message:n===Fo&&(r="Request aborted")),this.message=r,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e};var Zo=function(t){var e={};return t?(t.trim().split(/[\r|\n]+/).forEach((function(t){var n=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);e[n.name]=n.value})),e):e},Qo={};function Yo(t){var e=t.total,n=t.loaded;return{total:e,transferred:n,percent:100*n/e}}function Xo(t,e){return new Promise((function(n,r){e.onprogress=function(e){t.emitter.emit(Do,Yo(e))};var i=t.file;i&&(e.upload.onprogress=function(e){t.emitter.emit(Ro,Yo(e))}),e.onerror=function(t){r(t)},e.onabort=function(){var e=new Ko({request:t,type:Fo});r(e)},e.onload=function(){if(delete Qo[t.id],e.status<200||e.status>=400){var i=new Ko({request:t,body:e.response,statusCode:e.status});r(i)}else n(e)};var o=t.body;"string"==typeof o?e.send(o):o?e.send(JSON.stringify(o)):i?e.send(i):e.send(),Qo[t.id]=e})).then((function(e){return function(t,e){return new Wo(t,{body:e.response,headers:Zo(e.getAllResponseHeaders()),statusCode:e.status})}(t,e)}))}function Jo(t,e){var n=t.url(e),r=new window.XMLHttpRequest;return r.open(t.method,n),Object.keys(t.headers).forEach((function(e){r.setRequestHeader(e,t.headers[e])})),r}var ta=function(t){var e=Qo[t.id];e&&(e.abort(),delete Qo[t.id])},ea=function(t){return Promise.resolve().then((function(){var e=Jo(t,t.client.accessToken);return Xo(t,e)}))};function na(t){zo.call(this,t)}na.prototype=Object.create(zo.prototype),na.prototype.constructor=na,na.prototype.sendRequest=ea,na.prototype.abortRequest=ta;var ra=function(t){return new na(t)};var ia=function(t){return function(e){var n;n=zo.prototype.isPrototypeOf(e)?e:ra(e);var r=Object.create(t);return r.client=n,r}},oa={},aa=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];oa.forwardGeocode=function(t){_o.assertShape({query:_o.required(_o.string),mode:_o.oneOf("mapbox.places","mapbox.places-permanent"),countries:_o.arrayOf(_o.string),proximity:_o.coordinates,types:_o.arrayOf(_o.oneOf(aa)),autocomplete:_o.boolean,bbox:_o.arrayOf(_o.number),limit:_o.number,language:_o.arrayOf(_o.string)})(t),t.mode=t.mode||"mapbox.places";var e=xo(co({country:t.countries},ko(t,["proximity","types","autocomplete","bbox","limit","language"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:ko(t,["mode","query"]),query:e})},oa.reverseGeocode=function(t){_o.assertShape({query:_o.required(_o.coordinates),mode:_o.oneOf("mapbox.places","mapbox.places-permanent"),countries:_o.arrayOf(_o.string),types:_o.arrayOf(_o.oneOf(aa)),bbox:_o.arrayOf(_o.number),limit:_o.number,language:_o.arrayOf(_o.string),reverseMode:_o.oneOf("distance","score")})(t),t.mode=t.mode||"mapbox.places";var e=xo(co({country:t.countries},ko(t,["country","types","bbox","limit","language","reverseMode"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:ko(t,["mode","query"]),query:e})};var sa=ia(oa);function ua(t){let e,n,r,i,a,s,u,c,l;return{c(){e=E("div"),n=E("div"),r=E("input"),i=S(),a=E("div"),s=E("button"),s.textContent="Найти",I(r,"class","p-1 w-full rounded outline-none"),I(r,"type","text"),I(r,"placeholder","Адрес"),I(s,"class","p-1 w-full text-white bg-gray-800 rounded"),I(s,"type","button"),I(e,"class","fixed ml-12 -mt-10 bg-white rounded shadow-lg flex flex-row")},m(o,u){w(o,e,u),b(e,n),b(n,r),M(r,t[9]),b(e,i),b(e,a),b(a,s),c=!0,l=[C(r,"input",t[117]),C(s,"click",t[25])]},p(t,e){512&e[0]&&r.value!==t[9]&&M(r,t[9])},i(t){c||(J(()=>{u||(u=pt(e,un,{x:-300,duration:1e3},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(e,un,{x:-300,duration:1e3},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),o(l)}}}function ca(t){let e,n,r=null!=t[2]&&null!=t[2].region&&la(t);return{c(){r&&r.c(),e=T()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,n){null!=t[2]&&null!=t[2].region?r?(r.p(t,n),lt(r,1)):(r=la(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function la(t){let e;const n=new lr({props:{region:t[2].region,city:t[2].city,latlng:t[2].latlng}});return n.$on("lookOrderPlace",t[29]),n.$on("driverArrived",t[32]),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};4&e[0]&&(r.region=t[2].region),4&e[0]&&(r.city=t[2].city),4&e[0]&&(r.latlng=t[2].latlng),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function ha(t){let e;const n=new $r({props:{address:t[1],LatLng:t[0],clientUID:t[7].uid,clientName:t[7].displayName,region:t[2].region,city:t[2].city}});return n.$on("closeDialog",t[119]),n.$on("alert",t[120]),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};2&e[0]&&(r.address=t[1]),1&e[0]&&(r.LatLng=t[0]),128&e[0]&&(r.clientUID=t[7].uid),128&e[0]&&(r.clientName=t[7].displayName),4&e[0]&&(r.region=t[2].region),4&e[0]&&(r.city=t[2].city),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function da(t){let e,n,r=null!=t[2]&&null!=t[2].region&&fa(t);return{c(){r&&r.c(),e=T()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,n){null!=t[2]&&null!=t[2].region?r?(r.p(t,n),lt(r,1)):(r=fa(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function fa(t){let e;const n=new Fr({props:{region:t[2].region,city:t[2].city}});return n.$on("findDriverLocation",t[29]),n.$on("checkOnWay",t[33]),n.$on("alert",t[121]),n.$on("close",t[122]),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};4&e[0]&&(r.region=t[2].region),4&e[0]&&(r.city=t[2].city),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function pa(t){let e,n,r=null!=t[2]&&null!=t[2].region&&ma(t);return{c(){r&&r.c(),e=T()},m(t,i){r&&r.m(t,i),w(t,e,i),n=!0},p(t,n){null!=t[2]&&null!=t[2].region?r?(r.p(t,n),lt(r,1)):(r=ma(t),r.c(),lt(r,1),r.m(e.parentNode,e)):r&&(ut(),ht(r,1,1,()=>{r=null}),ct())},i(t){n||(lt(r),n=!0)},o(t){ht(r),n=!1},d(t){r&&r.d(t),t&&_(e)}}}function ma(t){let e;const n=new ni({props:{region:t[2].region,district:t[2].district,city:t[2].city}});return n.$on("fullscreen",t[123]),{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};4&e[0]&&(r.region=t[2].region),4&e[0]&&(r.district=t[2].district),4&e[0]&&(r.city=t[2].city),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function ga(t){let e,n;const r=new qn({props:{region:t[2].region,city:t[2].city,latlng:t[2].latlng}});return r.$on("close",t[124]),r.$on("alert",t[125]),{c(){e=E("div"),mt(r.$$.fragment),I(e,"id","rentalCarBox"),I(e,"class","absolute top-0 mt-16 w-full bg-white svelte-11f35y3")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};4&e[0]&&(n.region=t[2].region),4&e[0]&&(n.city=t[2].city),4&e[0]&&(n.latlng=t[2].latlng),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function va(t){let e,n;const r=new mi({props:{user:t[7],region:t[2].region,city:t[2].city,latlng:t[0]}});return r.$on("close",t[126]),r.$on("alert",t[127]),{c(){e=E("div"),mt(r.$$.fragment),I(e,"id","addServiceBox"),I(e,"class","absolute top-0 mt-16 w-full svelte-11f35y3")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};128&e[0]&&(n.user=t[7]),4&e[0]&&(n.region=t[2].region),4&e[0]&&(n.city=t[2].city),1&e[0]&&(n.latlng=t[0]),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function ya(t){let e,n;const r=new di({props:{region:t[2].region,getUserAccount:t[8]}});return r.$on("danger",t[21]),r.$on("close",t[128]),{c(){e=E("div"),mt(r.$$.fragment),I(e,"id","sosBox"),I(e,"class","absolute top-0 mt-16 w-full svelte-11f35y3")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};4&e[0]&&(n.region=t[2].region),256&e[0]&&(n.getUserAccount=t[8]),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function ba(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=E("div"),n=E("div"),r=E("p"),i=x(t[4]),o=S(),a=E("p"),s=E("button"),s.textContent="Ок",I(r,"class","text-center"),I(s,"class","btn-orange"),I(a,"class","mt-2 text-center"),I(n,"class","p-3 border bg-white rounded-lg shadow-lg"),I(e,"id","alertBox"),I(e,"class"," fixed top-0 svelte-11f35y3")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=C(s,"click",t[129])},p(t,e){(!c||16&e[0])&&P(i,t[4])},i(t){c||(J(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function wa(e){let n,r,i,a,s,u,c,l,h,d,f,p,m,g;return{c(){n=E("div"),r=E("div"),i=E("button"),i.innerHTML='<img class="object-cover" src="./icons/like.png" alt="like">',s=S(),u=E("div"),c=E("button"),c.innerHTML='<img class="object-cover" src="./icons/button-close-yellow.png" alt="close">',h=S(),d=E("div"),f=E("button"),f.innerHTML='<img class="object-cover" src="./icons/dislike.png" alt="dislike">',I(i,"class","m-2 p-3 w-16 h-16 border border-black rounded-full bg-green-500"),I(c,"class","m-2 p-0 w-12 h-12 bg-transparent rounded-full"),I(f,"class","m-2 p-3 w-16 h-16 border border-black rounded-full bg-red-500"),I(n,"id","dialog"),I(n,"class"," flex flex-row items-center justify-around svelte-11f35y3")},m(t,o){w(t,n,o),b(n,r),b(r,i),b(n,s),b(n,u),b(u,c),b(n,h),b(n,d),b(d,f),m=!0,g=[C(i,"click",e[23]),C(c,"click",e[130]),C(f,"click",e[24]),C(n,"click",e[131])]},p:t,i(t){m||(J(()=>{a||(a=pt(r,un,{x:-100,duration:1e3},!0)),a.run(1)}),J(()=>{l||(l=pt(u,ln,{duration:1e3},!0)),l.run(1)}),J(()=>{p||(p=pt(d,un,{x:100,duration:1e3},!0)),p.run(1)}),m=!0)},o(t){a||(a=pt(r,un,{x:-100,duration:1e3},!1)),a.run(0),l||(l=pt(u,ln,{duration:1e3},!1)),l.run(0),p||(p=pt(d,un,{x:100,duration:1e3},!1)),p.run(0),m=!1},d(t){t&&_(n),t&&a&&a.end(),t&&l&&l.end(),t&&p&&p.end(),o(g)}}}function _a(e){let n;const r=new _i({});return r.$on("closeMenu",e[132]),r.$on("getAddress",e[26]),r.$on("police",e[133]),r.$on("mCamera",e[134]),r.$on("sCamera",e[135]),r.$on("dtp",e[136]),r.$on("rClosed",e[137]),r.$on("rConstruction",e[138]),r.$on("taxiCall",e[27]),r.$on("sos",e[35]),r.$on("add",e[36]),{c(){mt(r.$$.fragment)},m(t,e){gt(r,t,e),n=!0},p:t,i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){vt(r,t)}}}function ka(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,x,T,A,P,M,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,J,tt,et=t[6]&&ua(t),nt=t[11]&&ca(t),rt=t[10]&&ha(t),it=t[12]&&da(t),ot=t[13]&&pa(t),at=t[17]&&ga(t),st=t[16]&&va(t),dt=t[15]&&ya(t),ft=t[3]&&ba(t),pt=t[5]&&wa(t),mt=t[14]&&_a(t);return{c(){var t,o,b;e=E("div"),n=E("div"),r=S(),i=E("div"),a=E("div"),s=E("div"),u=E("button"),u.innerHTML='<img src="./icons/search.png" alt="targetLocation">',c=S(),et&&et.c(),l=S(),h=E("div"),d=E("button"),d.innerHTML='<img src="./icons/fullscreen.png" alt="fullscreen">',f=S(),p=E("div"),m=E("button"),m.innerHTML='<img src="./icons/target.png" alt="targetLocation">',g=S(),v=E("div"),y=E("button"),y.innerHTML='<img src="./icons/taxi-find.png" alt="taxiLocation">',k=S(),x=E("div"),T=E("button"),T.innerHTML='<img src="./icons/taxi-signal.png" alt="taxiOrders">',A=S(),P=E("div"),M=E("button"),M.innerHTML='<img src="./icons/excavator.png" alt="excavator">',N=S(),L=E("div"),D=E("button"),D.innerHTML='<img src="./icons/chat-phone.png" alt="chat">',R=S(),O=E("div"),nt&&nt.c(),B=S(),U=E("div"),rt&&rt.c(),F=S(),j=E("div"),it&&it.c(),q=S(),$=E("div"),ot&&ot.c(),V=S(),at&&at.c(),z=S(),st&&st.c(),H=S(),dt&&dt.c(),G=S(),ft&&ft.c(),W=S(),K=E("div"),pt&&pt.c(),Z=S(),Q=E("div"),mt&&mt.c(),Y=S(),X=E("div"),X.innerHTML='<div id="loader" class="p-4"><img id="loading" class="mx-auto w-8 h-8 svelte-11f35y3" src="./icons/loading.svg" alt="loading"></div> \n        <div id="firebaseui-auth-container"></div>',I(n,"id","map"),t="min-height",o="550px",n.style.setProperty(t,o,b?"important":""),I(n,"class","z-0 w-full h-screen"),I(u,"class","map-btn svelte-11f35y3"),I(u,"type","button"),I(s,"class","mt-2 relative"),I(d,"class","map-btn svelte-11f35y3"),I(d,"type","button"),I(h,"class","mt-2"),I(m,"class","map-btn svelte-11f35y3"),I(m,"type","button"),I(p,"class","mt-2"),I(y,"class","map-btn svelte-11f35y3"),I(y,"type","button"),I(v,"class","mt-2"),I(T,"class","map-btn svelte-11f35y3"),I(T,"type","button"),I(x,"class","mt-2"),I(M,"class","map-btn svelte-11f35y3"),I(M,"type","button"),I(P,"class","mt-2"),I(D,"class","map-btn svelte-11f35y3"),I(D,"type","button"),I(L,"class","mt-2"),I(a,"class","flex flex-col"),I(i,"class","absolute top-0 mt-16 ml-1"),I(O,"class"," absolute top-0 mt-16"),I(U,"class"," absolute top-0 mt-16"),I(j,"id","clientTaxiBox"),I(j,"class"," absolute top-0 mt-16 svelte-11f35y3"),I($,"id","Chat"),I($,"class"," absolute top-0 mt-16"),I(K,"id","marker-dialog"),I(K,"class","svelte-11f35y3"),I(Q,"id","contextmenu"),I(Q,"class","absolute"),I(X,"id","authUI"),I(X,"class","w-full bg-gray-900 shadow-xl svelte-11f35y3"),I(e,"id","main"),I(e,"class","relative")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(a,s),b(s,u),b(s,c),et&&et.m(s,null),b(a,l),b(a,h),b(h,d),b(a,f),b(a,p),b(p,m),b(a,g),b(a,v),b(v,y),b(a,k),b(a,x),b(x,T),b(a,A),b(a,P),b(P,M),b(a,N),b(a,L),b(L,D),b(e,R),b(e,O),nt&&nt.m(O,null),b(e,B),b(e,U),rt&&rt.m(U,null),b(e,F),b(e,j),it&&it.m(j,null),b(e,q),b(e,$),ot&&ot.m($,null),b(e,V),at&&at.m(e,null),b(e,z),st&&st.m(e,null),b(e,H),dt&&dt.m(e,null),b(e,G),ft&&ft.m(e,null),b(e,W),b(e,K),pt&&pt.m(K,null),b(e,Z),b(e,Q),mt&&mt.m(Q,null),b(e,Y),b(e,X),J=!0,tt=[C(window,"contextmenu",t[34]),C(u,"click",t[116]),C(d,"click",t[118]),C(m,"click",t[20]),C(y,"click",t[30]),C(T,"click",t[28]),C(M,"click",t[37]),C(D,"click",t[31])]},p(t,n){t[6]?et?(et.p(t,n),lt(et,1)):(et=ua(t),et.c(),lt(et,1),et.m(s,null)):et&&(ut(),ht(et,1,1,()=>{et=null}),ct()),t[11]?nt?(nt.p(t,n),lt(nt,1)):(nt=ca(t),nt.c(),lt(nt,1),nt.m(O,null)):nt&&(ut(),ht(nt,1,1,()=>{nt=null}),ct()),t[10]?rt?(rt.p(t,n),lt(rt,1)):(rt=ha(t),rt.c(),lt(rt,1),rt.m(U,null)):rt&&(ut(),ht(rt,1,1,()=>{rt=null}),ct()),t[12]?it?(it.p(t,n),lt(it,1)):(it=da(t),it.c(),lt(it,1),it.m(j,null)):it&&(ut(),ht(it,1,1,()=>{it=null}),ct()),t[13]?ot?(ot.p(t,n),lt(ot,1)):(ot=pa(t),ot.c(),lt(ot,1),ot.m($,null)):ot&&(ut(),ht(ot,1,1,()=>{ot=null}),ct()),t[17]?at?(at.p(t,n),lt(at,1)):(at=ga(t),at.c(),lt(at,1),at.m(e,z)):at&&(ut(),ht(at,1,1,()=>{at=null}),ct()),t[16]?st?(st.p(t,n),lt(st,1)):(st=va(t),st.c(),lt(st,1),st.m(e,H)):st&&(ut(),ht(st,1,1,()=>{st=null}),ct()),t[15]?dt?(dt.p(t,n),lt(dt,1)):(dt=ya(t),dt.c(),lt(dt,1),dt.m(e,G)):dt&&(ut(),ht(dt,1,1,()=>{dt=null}),ct()),t[3]?ft?(ft.p(t,n),lt(ft,1)):(ft=ba(t),ft.c(),lt(ft,1),ft.m(e,W)):ft&&(ut(),ht(ft,1,1,()=>{ft=null}),ct()),t[5]?pt?(pt.p(t,n),lt(pt,1)):(pt=wa(t),pt.c(),lt(pt,1),pt.m(K,null)):pt&&(ut(),ht(pt,1,1,()=>{pt=null}),ct()),t[14]?mt?(mt.p(t,n),lt(mt,1)):(mt=_a(t),mt.c(),lt(mt,1),mt.m(Q,null)):mt&&(ut(),ht(mt,1,1,()=>{mt=null}),ct())},i(t){J||(lt(et),lt(nt),lt(rt),lt(it),lt(ot),lt(at),lt(st),lt(dt),lt(ft),lt(pt),lt(mt),J=!0)},o(t){ht(et),ht(nt),ht(rt),ht(it),ht(ot),ht(at),ht(st),ht(dt),ht(ft),ht(pt),ht(mt),J=!1},d(t){t&&_(e),et&&et.d(),nt&&nt.d(),rt&&rt.d(),it&&it.d(),ot&&ot.d(),at&&at.d(),st&&st.d(),dt&&dt.d(),ft&&ft.d(),pt&&pt.d(),mt&&mt.d(),o(tt)}}}const Ea="pk.eyJ1IjoiZGFwcGRldnYiLCJhIjoiY2s3ZWo0dWV4MDYzcjNncHRncnlvdHY2OSJ9.zLk9G0tHK9iU-onN_TjxFw";function xa(t){t.get().then((function(t){const e=t.data(),n=e.votes;if(5===n.length){const t=n.reduce((t,e)=>t+e,0),i=t/n.length;console.log("ave",i,"sum",t),i<0?(r=e.author,Lt.functions().httpsCallable("ratingDecrement")({author:r}).then((function(t){console.log("result",t.data)})).catch((function(t){console.log(t.code,t.message,t.details)})),console.log("dec")):i>1&&(!function(t){Lt.functions().httpsCallable("ratingIncrement")({author:t}).then((function(t){console.log("result",t.data)})).catch((function(t){console.log(t.code,t.message,t.details)}))}(e.author),console.log("inc"))}var r})).catch((function(t){console.log("Error getting document:",t)}))}function Sa(t,e,n){const r=sa({accessToken:Ea});let i,o,a,s,u,c,l,h,d,f,p,m,g,v,y,b,w,_,k,E,x,S,T,C,I,A,P,M,N,L,D,R,O,B,U,F,j,q,$,V,H,G,W,K,Z,Q,Y,X,J,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,dt="none",ft="none",pt="none",mt={latlng:null,region:"none",city:"none",district:"none"},gt=[];function vt(){Ht.collection("users").doc(E.uid).get().then((function(t){const e=t.data();n(8,x=e)})).catch((function(t){console.log("Error getting document:",t)}))}function yt(){f=In.layerGroup([]),p=In.layerGroup([]),m=In.layerGroup([]),g=In.layerGroup([]),v=In.layerGroup([]),y=In.layerGroup([]),gt.push(f,p,m,g,v,y);let t={"Обсуждения":f,"Такси":g,"Сервисы":y,"Спецтехника":v,"Дорожные события":m,"Патрули ГИБДД, камеры":p};i=In.map("map",{zoomControl:!1,layers:[f,p,g,v,y]}).setView([55.80046084146819,49.105174541473396],13),In.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'<span style="font-size: smaller;"> Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a></span>',maxZoom:19,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:Ea}).addTo(i),n(0,o=i.getCenter()),a=i.getBounds(),In.control.zoom({position:"bottomright"}).addTo(i),d=In.control.layers(null,t).setPosition("bottomleft").addTo(i),i.locate({watch:!1,setView:!0,enableHighAccuracy:!0}),i.on("locationfound",St),i.on("locationfound",Ct),i.on("contextmenu",Pt),i.on("zoomend",_t),i.on("moveend",kt)}function bt(){let t=Ht.collection(`icons/police/${dt}`),e=Ht.collection(`icons/mCamera/${dt}`),n=Ht.collection(`icons/sCamera/${dt}`),r=Ht.collection(`icons/roadClosed/${dt}`),i=Ht.collection(`icons/roadConstruction/${dt}`),o=Ht.collection(`icons/DTP/${dt}`),a=Ht.collection(`icons/sos/${dt}`),s=Ht.collection("services").where("region","==",dt).where("district","==",pt),u=Ht.collection("taxiDrivers").where("online","==",!0),c=Ht.collection("topics").where("region","==",dt).where("district","==",pt),l=Ht.collection("rentalCars").where("region","==",dt).where("district","==",pt).where("online","==",!0),h={dbRef:u,layer:g,icon:P};[{dbRef:t,layer:p,icon:N},{dbRef:e,layer:p,icon:L},{dbRef:n,layer:p,icon:D},{dbRef:o,layer:m,icon:R},{dbRef:i,layer:m,icon:O},{dbRef:r,layer:m,icon:B}].forEach(t=>{t.dbRef.get().then((function(e){e.forEach((function(e){let n=e.data(),r=n.added.toDate(),i=(new Date).getTime()-r.getTime();if(n.actual>=.1&&i<=18e7){let i=r.toLocaleString("ru",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}),o=In.marker(n.location,{icon:t.icon,opacity:n.actual,alt:e.id,title:e.ref.parent.path}).bindPopup(`<p> Добавлено ${i} </p>`);o.on("click",Nt),t.layer.addLayer(o)}}))})).catch((function(t){console.log("Error getting documents: ",t)}))}),a.get().then((function(t){t.forEach((function(t){const e=t.data();let n=In.marker(e.location,{icon:T,alt:t.id,title:t.ref.parent.path}).bindPopup(`<p> Сообщение: ${e.message} </p> <p> Телефон: <a href="tel:${e.phone}"> ${e.phone} </a> </p>`);f.addLayer(n)}))})),u.get().then((function(t){t.forEach((function(t){let e=t.data(),n=In.marker(e.location,{icon:P}).bindPopup(`<img src=${e.driverAuto.frontside}> <p>${e.name} ${e.lastName}</p> <p>Рейтинг: ${e.rating}</p> <a href="#/taxidriverpage/${t.id}"> Предложить поездку </a>`);h.layer.addLayer(n)}))})),l.get().then((function(t){t.forEach((function(t){let e,n=t.data();"Экскаватор"===n.type?e=Y:"Бульдозер"===n.type?e=X:"Трактор"===n.type?e=J:"Грейдер"===n.type?e=tt:"Самосвал"===n.type?e=et:"Бетономешалка"===n.type?e=nt:"Бурильная"===n.type?e=rt:"Каток"===n.type?e=it:"Ассенизатор"===n.type?e=ot:"Автокран"===n.type?e=at:"Манипулятор"===n.type?e=st:"Автоподъемник"===n.type?e=ut:"Погрузчик"===n.type?e=ct:"Эвакуатор"===n.type?e=lt:"Другое"===n.type&&(e=ht);let r=In.marker(n.location,{icon:e}).bindPopup(`<img src=${n.imgURL}> <p> ${n.type} ${n.model} </p> <p> Аренда: ${n.price} руб./час</p> <a href="tel:${n.phone}"> Позвонить </a>`);v.addLayer(r)}))})),c.get().then((function(t){t.forEach((function(t){let e=t.data(),n=In.marker(e.location,{icon:Q,alt:t.id,title:t.ref.parent.path}).bindPopup(`<p><b>${e.header}</b></p> <p><i>${e.text}</i></p> <p><a href="#/topic/${t.id}"> Перейти </a></p>`);f.addLayer(n)}))})),s.get().then((function(t){t.forEach((function(t){let e=t.data();if("Шиномонтаж"===e.type){let n=In.marker(e.location,{icon:U}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("Автомойка"===e.type){let n=In.marker(e.location,{icon:F}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("СТО"===e.type){let n=In.marker(e.location,{icon:j}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("Автозапчасти"===e.type){let n=In.marker(e.location,{icon:q}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("Мелкосрочка"===e.type){let n=In.marker(e.location,{icon:$}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("Автостекло/Тонировка"===e.type){let n=In.marker(e.location,{icon:V}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("ГСМ"===e.type){let n=In.marker(e.location,{icon:H}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("Автозаправка"===e.type){let n=In.marker(e.location,{icon:G}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("Авторазбор"===e.type){let n=In.marker(e.location,{icon:W}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}else if("Кафе"===e.type){let n=In.marker(e.location,{icon:K}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Меню и отзывы </a>`);y.addLayer(n)}else if("Отель"===e.type){let n=In.marker(e.location,{icon:Z}).bindPopup(`<p> ${e.name} </p><p> ${e.offer} </p><p> <a href="tel:${e.phone}"> Позвонить </a></p> <p><a href="#/service/${t.id}"> Записаться </a>`);y.addLayer(n)}}))}))}function wt(){S=In.Icon.extend({options:{iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]}}),C=new S({iconUrl:"./icons/placeholder.png"}),I=new S({iconUrl:"./icons/direction-arrow-2.png"}),A=new S({iconUrl:"./icons/location.png"}),T=new S({iconUrl:"./icons/sos-icon.png"}),P=new S({iconUrl:"./icons/taxi.png"}),M=new S({iconUrl:"./icons/taxi-marker.png"}),O=new S({iconUrl:"./icons/road-construction.png"}),B=new S({iconUrl:"./icons/road-closed.png"}),R=new S({iconUrl:"./icons/car-crash.png"}),N=new S({iconUrl:"./icons/police-car.png"}),D=new S({iconUrl:"./icons/road-camera.png"}),L=new S({iconUrl:"./icons/speed-camera.png"}),U=new S({iconUrl:"./icons/tires-3.png"}),F=new S({iconUrl:"./icons/car-wash.png"}),j=new S({iconUrl:"./icons/car-service-2.png"}),q=new S({iconUrl:"./icons/gear.png"}),$=new S({iconUrl:"./icons/technical-support.png"}),V=new S({iconUrl:"./icons/windshield.png"}),H=new S({iconUrl:"./icons/oil.png"}),G=new S({iconUrl:"./icons/gas-station.png"}),W=new S({iconUrl:"./icons/car-lifter.png"}),K=new S({iconUrl:"./icons/cafe-placeholder.png"}),Z=new S({iconUrl:"./icons/hotel-placeholder.png"}),Q=new S({iconUrl:"./icons/chat-4.png"}),Y=new S({iconUrl:"./icons/excavator.png"}),X=new S({iconUrl:"./icons/bulldozer.png"}),J=new S({iconUrl:"./icons/tractor.png"}),tt=new S({iconUrl:"./icons/grader.png"}),et=new S({iconUrl:"./icons/dumper.png"}),nt=new S({iconUrl:"./icons/concrete.png"}),rt=new S({iconUrl:"./icons/bur.png"}),it=new S({iconUrl:"./icons/paver.png"}),ot=new S({iconUrl:"./icons/garbage.png"}),at=new S({iconUrl:"./icons/crane-truck.png"}),st=new S({iconUrl:"./icons/manipulator.png"}),ut=new S({iconUrl:"./icons/car-lift.png"}),ct=new S({iconUrl:"./icons/loader.png"}),lt=new S({iconUrl:"./icons/tow-truck.png"}),ht=new S({iconUrl:"./icons/excavator-2.png"})}function _t(t){l=t.target._zoom,n(0,o=i.getCenter()),a=i.getBounds(),l<=11?gt.forEach(t=>{t.remove()}):l>=17?(gt.forEach(t=>{t.remove()}),gt.forEach(t=>{t.eachLayer((function(t){t.options.icon.options.iconSize=[50,50]})),t.addTo(i)})):l<15?(gt.forEach(t=>{t.remove()}),gt.forEach(t=>{t.eachLayer((function(t){t.options.icon.options.iconSize=[30,30]})),t.addTo(i)})):l<18&&(gt.forEach(t=>{t.remove()}),gt.forEach(t=>{t.eachLayer((function(t){t.options.icon.options.iconSize=[40,40]})),t.addTo(i)}))}function kt(t){let e=dt,a=pt;x&&x.premium&&(n(0,o=i.getCenter()),r.reverseGeocode({query:[o.lng,o.lat]}).send().then(t=>{const n=t.body.features;n.forEach(t=>{"region"===t.place_type[0]?dt=t.text:"district"===t.place_type[0]?pt=t.text:"place"===t.place_type[0]&&(ft=t.text)}),n.some(t=>"district"===t.place_type[0])||(pt=ft),dt==e&&pt==a||(gt.forEach(t=>{t.remove()}),bt())}))}function Et(t){let e=document.getElementById(t);document.fullscreenElement?document.exitFullscreen():e.requestFullscreen().catch(t=>{xt(`Error attempting to enable full-screen mode: ${t.message} (${t.name})`)})}function xt(t){b||(n(4,w=t),n(3,b=!0)),setTimeout(()=>{n(3,b=!1)},5e3)}function St(t){null==h&&(h=In.marker(t.latlng,{icon:C,rotationAngle:0}).addTo(i).bindPopup("Ты здесь!"),n(2,mt.latlng=t.latlng,mt),Rt())}function Tt(t){let e=function(t,e){let n=3.14159,r=t.lat*n/180,i=t.lng*n/180,o=e.lat*n/180,a=e.lng*n/180-i,s=Math.sin(a)*Math.cos(o),u=Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos(a),c=Math.atan2(s,u);return c*=180/n,c=(c+360)%360,c}(t.oldLatLng,t.latlng);h.setRotationAngle(e)}function Ct(t){h.setLatLng(t.latlng),n(2,mt={latlng:t.latlng,region:dt,district:pt,city:ft})}z(yt),z(wt),Lt.auth().onAuthStateChanged((function(t){t?(document.getElementById("loader").style.display="none",n(7,E=t),vt()):new uo.auth.AuthUI(Lt.auth()).start("#firebaseui-auth-container",{callbacks:{signInSuccessWithAuthResult:(t,e)=>!0,uiShown(){document.getElementById("loader").style.display="none"}},signInFlow:"popup",signInSuccessUrl:"https://avtokarta.club",signInOptions:[Lt.auth.EmailAuthProvider.PROVIDER_ID,Lt.auth.PhoneAuthProvider.PROVIDER_ID,Lt.auth.GoogleAuthProvider.PROVIDER_ID]})}));let It,At=!1;function Pt(t){n(0,o=t.latlng)}function Mt(t){let e=0;Ht.collection(`icons/${t}/${dt}`).where("author","==",E.uid).get().then((function(n){e=n.size,e>=5?xt("Вы добавили максимальное кол-во иконок данного типа."):x.mapRating>5?mt.city===ft&&mt.district===pt&&mt.region===dt?Ht.collection(`icons/${t}/${dt}`).add({city:ft,district:pt,added:Lt.firestore.FieldValue.serverTimestamp(),location:[o.lat,o.lng],author:E.uid,actual:.7,voters:[],votes:[]}).then((function(t){bt(),xt("Добавлено.")})).catch((function(t){console.error("Error adding document: ",t)})):xt("Вы находитесь слишком далеко! Обновите местоположение."):xt("Ваш рейтинг слишком мал.")}))}function Nt(t){s=t.target.options.alt,u=t.target.options.title,n(5,_=!0)}let Dt=ao.create({baseURL:"https://nominatim.openstreetmap.org/search/"});function Rt(){r.reverseGeocode({query:[o.lng,o.lat]}).send().then(t=>{const e=t.body.features;e.forEach(t=>{"region"===t.place_type[0]?dt=t.text:"district"===t.place_type[0]?pt=t.text:"place"===t.place_type[0]&&(ft=t.text)}),e.some(t=>"district"===t.place_type[0])||(pt=ft),n(2,mt.region=dt,mt),n(2,mt.city=ft,mt),n(2,mt.district=pt,mt),bt()})}let Ot=!1;let Bt=!1;let Ut=!1;let Ft=!1;let jt=!1;let qt,$t,Vt=!1;return[o,c,mt,b,w,_,k,E,x,It,Ot,Bt,Ut,Ft,jt,Vt,qt,$t,Et,xt,function(){At?(At=!1,h.setIcon(C),i.stopLocate(),h.setRotationAngle(0),xt("Следовать за маркером выключено.")):(At=!0,h.setIcon(I),h.on("move",Tt),i.locate({watch:!0,setView:!0,enableHighAccuracy:!0,maxZoom:17}),xt("Следовать за маркером включено."))},function(t){console.log(t.detail.message,t.detail.type,t.detail.phone),mt.city===ft&&mt.district===pt&&mt.region===dt&&Ht.collection(`icons/sos/${dt}`).add({city:ft,district:pt,added:Lt.firestore.FieldValue.serverTimestamp(),location:[o.lat,o.lng],author:E.uid,message:t.detail.message,phone:t.detail.phone}).then((function(t){bt(),xt("Добавлено.")})).catch((function(t){console.error("Error adding document: ",t)}))},Mt,function(){let t=Ht.collection(`${u}`).doc(`${s}`);function e(e){t.update({actual:Lt.firestore.FieldValue.increment(.11),voters:Lt.firestore.FieldValue.arrayUnion(E.uid),votes:Lt.firestore.FieldValue.arrayUnion(e)}).then((function(){xt("Голос принят!"),xa(t)})).catch((function(t){xt(`Ошибка: ${t.message}`)}))}t.get().then((function(t){const n=t.data();let r=n.voters.some(t=>t===E.uid);const i=n.votes;if(r)xt("Вы уже проголосовали!");else if(i.length>0){e(i[i.length-1]>0?1.2+Math.random()/10:1+Math.random()/10)}else e(1)})).catch((function(t){xt(`Ошибка: ${t.message}`)}))},function(){let t=Ht.collection(`${u}`).doc(`${s}`);function e(e){t.update({actual:Lt.firestore.FieldValue.increment(-.11),voters:Lt.firestore.FieldValue.arrayUnion(E.uid),votes:Lt.firestore.FieldValue.arrayUnion(e)}).then((function(){xt("Голос принят!"),xa(t)})).catch((function(t){xt(`Ошибка: ${t.message}`)}))}t.get().then((function(t){let n=t.data(),r=n.voters.some(t=>t===E.uid);const i=n.votes;if(r)xt("Вы уже проголосовали!");else if(i.length>0){e(i[i.length-1]<0?-1.2-Math.random()/10:-1-Math.random()/10)}else e(-1)})).catch((function(t){xt(`Ошибка: ${t.message}`)}))},async function(){try{const t={swLng:a._southWest.lng-.02,neLat:a._northEast.lat+.02,neLng:a._northEast.lng+.02,swLat:a._southWest.lat-.02},e=(await Dt.get(It,{params:{format:"json",limit:3,addressdetails:1,countrycodes:["ru"],viewbox:`${t.swLng}, ${t.neLat}, ${t.neLng}, ${t.swLat}`,bounded:1}})).data;if(e.length>=1){const t=[e[0].lat,e[0].lon];e.forEach(t=>{In.marker([t.lat,t.lon],{icon:A}).addTo(i).bindPopup(`${t.display_name}`)}),i.flyTo(t,16)}else xt("Ничего не найдено. Попробуйте отдалить карту или изменить запрос.")}catch(t){console.error(t)}},async function(){const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o.lat}&lon=${o.lng}`),e=(await t.json()).display_name;In.popup().setLatLng(o).setContent(e).openOn(i)},async function(){if(x.balance>=100){const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o.lat}&lon=${o.lng}`),e=await t.json();n(1,c=e.display_name),n(10,Ot=!0)}else xt("На вашем счете недостаточно средств. Менее 100 руб.")},function(){Bt?n(11,Bt=!1):Ht.collection("taxiDrivers").doc(E.uid).get().then((function(t){t.exists?(n(11,Bt=!0),Ht.collection(`taxiOrders/region/${dt}/city/${ft}`).where("active","==",!0).get().then((function(t){t.forEach((function(t){let e=t.data();In.marker(e.location,{icon:M,alt:t.id}).addTo(i).bindPopup(`<p> Пункт назначения: ${e.routes}</p> <p> Примечание: ${e.desc}</p> <p> Цена: ${e.price}</p> <a href="tel:${e.phone}"> Позвонить клиенту </a>`)}))}))):xt("Список текущих заказов доступен только для зарегистрированных водителей.")})).catch((function(t){console.log("Error getting document:",t)}))},function(t){i.flyTo(t.detail.location,16),console.log(t.detail)},function(){n(12,Ut=!Ut)},function(){n(13,Ft=!Ft)},function(t){let e=i.distance(t.detail.order.location,mt.latlng);console.log("distance",e),e<=150?Ht.collection(t.detail.ref).doc(t.detail.order.id).update({driverArrived:!0}).then((function(){xt("Клиент оповещен! Ожидайте.")})).catch((function(t){console.error("Error updating document: ",t)})):xt("Вы слишком далеко! Если вы на месте обновите локацию.")},function(t){let e=i.distance(t.detail.order.location,mt.latlng);console.log("distance",e),e>=10?Ht.collection(t.detail.ref).doc(t.detail.order.id).update({onway:!0}).then((function(){xt("Поехали. Не забудьте пристегнуться!")})).catch((function(t){console.error("Error updating document: ",t)})):console.log("waiting")},function(t){t.preventDefault();let e=document.getElementById("contextmenu");e.style.left=t.clientX+"px",e.style.top=t.clientY+"px",n(14,jt=!0)},function(){Vt||n(15,Vt=!0)},function(){l<18?xt("Увеличьте зум до максимума и повторите попытку."):n(16,qt=!0)},function(){n(17,$t=!$t)},i,a,s,u,l,dt,ft,pt,h,d,f,p,m,g,v,y,S,T,C,I,A,P,M,N,L,D,R,O,B,U,F,j,q,$,V,H,G,W,K,Z,Q,Y,X,J,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,At,r,void 0,gt,void 0,void 0,void 0,void 0,vt,yt,bt,wt,_t,kt,St,Tt,Ct,Pt,Nt,Dt,async function(){const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o.lat}&lon=${o.lng}`),e=await t.json();n(1,c=e.display_name)},Rt,()=>n(6,k=!k),function(){It=this.value,n(9,It)},()=>Et("main"),()=>n(10,Ot=!1),t=>xt(t.detail.message),t=>xt(t.detail.message),()=>n(12,Ut=!1),()=>Et("Chat"),()=>n(17,$t=!1),t=>xt(t.detail.message),()=>n(16,qt=!1),t=>xt(t.detail.message),()=>n(15,Vt=!1),()=>n(3,b=!1),()=>n(5,_=!1),()=>n(5,_=!1),()=>n(14,jt=!1),()=>Mt("police"),()=>Mt("mCamera"),()=>Mt("sCamera"),()=>Mt("DTP"),()=>Mt("roadClosed"),()=>Mt("roadConstruction")]}function Ta(e){let n;return{c(){n=E("main"),n.innerHTML='<div class="pt-16"><div class="px-2 pb-2"><h1 class="svelte-1mablq0">\n            Платформа\n        </h1> \n        <p class="svelte-1mablq0">\n            Avtokarta.club - децентрализованная платформа для владельцев автомобилей, \n            спецтехники и бизнеса предоставляющий обслуживание в данной сфере.\n        </p> \n        <h1 class="svelte-1mablq0">\n            Общение\n        </h1> \n        <p class="svelte-1mablq0">\n            Платформа дает возможность свободно обмениваться информацией о текущей\n            обстановке на дорогах: ремонт дорог, ДТП, местоположение радаров и патрулей ГИБДД.\n            Так же, у пользователей платформы, есть возможность, открыть любую тему для обсуждения\n            в том месте карты, где эта тема актуальна.\n        </p> \n        <h1 class="svelte-1mablq0">\n            Такси\n        </h1> \n        <p class="svelte-1mablq0">\n            Платформа дает возможность водителям такси работать без комиссии (при оплате токенами), \n            а клиентам такси устанавливать свою цену за поездку и выбрать удобный способ оплаты:\n            наличные, банковский перевод (Сбербанк онлайн), криптовалюта, токены платформы (1 ТАК = 1 руб.).\n        </p> \n        <h1 class="svelte-1mablq0">\n            Спецтехника\n        </h1> \n        <p class="svelte-1mablq0">\n            Платформа дает возможность владельцам спецтехники удобный способ взаимодействия с клиентами.\n            При поиске необходимой спецтехники, клиенты видят на карте, где находится спецтехника, вид спецтехники, \n            фото, цена аренды и телефон водителя для связи.\n        </p> \n        <h1 class="svelte-1mablq0">\n            Крипто-кошелёк\n        </h1> \n        <p class="svelte-1mablq0">\n            Платформа имеет встроенный крипто-кошелёк блокчейна Ethereum, кторый дает возможность, без сторонних приложений и \n            браузерных расширений, использовать все преимущества блокчейн технологии: обмениваться криптовалютой,\n            токенами, оплачивать товары и услуги. Крипто-кошелёк безопасен в использование и основан на библиотеке\n            Ethers.js (полноценная реализация кошелька Ethereum, рекомендуемая сообществом Ethereum).\n        </p></div></div>',I(n,"class","svelte-1mablq0")},m(t,e){w(t,n,e)},p:t,i:t,o:t,d(t){t&&_(n)}}}function Ca(e){let n,r,i,o,a,s,u,c,l,h,d,f,p,m,g,v,y,k,x;return{c(){n=E("div"),r=E("div"),i=E("p"),i.textContent="Стоимость размещения",o=S(),a=E("p"),a.textContent="100 руб.: Мелкосрочка (частный гараж), Шиномонтаж, Автостекло/Тонировка.",s=S(),u=E("p"),u.textContent="300 руб.: Автозапчасти, Автомойка, Авторазбор, СТО, ГСМ.",c=S(),l=E("p"),l.textContent="500 руб.: Придорожное кафе, Придорожный отель.",h=S(),d=E("p"),d.textContent="1000 руб.: Автозаправка.",f=S(),p=E("p"),p.textContent="Стоимость размещения оплачивается единоразово и списывается с баланса аккаунта.",m=S(),g=E("p"),v=E("button"),v.textContent="Закрыть",I(i,"class","text-center text-lg font-semibold svelte-1gxemwq"),I(a,"class","svelte-1gxemwq"),I(u,"class","svelte-1gxemwq"),I(l,"class","svelte-1gxemwq"),I(d,"class","svelte-1gxemwq"),I(p,"class","svelte-1gxemwq"),I(v,"class","btn-gray"),I(g,"class","mt-2 text-center svelte-1gxemwq"),I(r,"class","p-2 border bg-white rounded-lg shadow-lg"),I(n,"id","priceList"),I(n,"class"," fixed top-0 svelte-1gxemwq")},m(t,y){w(t,n,y),b(n,r),b(r,i),b(r,o),b(r,a),b(r,s),b(r,u),b(r,c),b(r,l),b(r,h),b(r,d),b(r,f),b(r,p),b(r,m),b(r,g),b(g,v),k=!0,x=C(v,"click",e[46])},p:t,i(t){k||(J(()=>{y||(y=pt(r,sn,{duration:500},!0)),y.run(1)}),k=!0)},o(t){y||(y=pt(r,sn,{duration:500},!1)),y.run(0),k=!1},d(t){t&&_(n),t&&y&&y.end(),x()}}}function Ia(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=E("div"),n=E("div"),r=E("p"),i=x(t[7]),o=S(),a=E("p"),s=E("button"),s.textContent="Ок",I(r,"class","text-center svelte-1gxemwq"),I(s,"class","btn-orange"),I(a,"class","mt-2 text-center svelte-1gxemwq"),I(n,"class","p-3 border bg-white rounded-lg shadow-lg"),I(e,"id","alertBox"),I(e,"class"," fixed top-0 svelte-1gxemwq")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=C(s,"click",t[47])},p(t,e){(!c||128&e[0])&&P(i,t[7])},i(t){c||(J(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function Aa(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,A,P,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,tt,et,nt,rt,it,ot,at,st,dt,ft,pt,mt,gt,vt,yt,bt,wt,_t,kt,Et,xt,St,Tt,Ct,It,At,Pt,Mt,Nt,Lt,Dt,Rt,Ot,Bt,Ut,Ft,jt,qt,$t,Vt,zt,Ht,Gt=t[0]&&Ca(t),Wt=t[6]&&Ia(t);return{c(){e=E("div"),n=E("div"),r=S(),i=E("div"),a=E("div"),a.innerHTML='<h1 class=" font-semibold text-center">\n                Добавить сервис\n            </h1>',s=S(),u=E("div"),c=E("label"),c.textContent="Тип сервиса:",l=S(),h=E("select"),d=E("option"),f=E("option"),f.textContent="СТО",p=E("option"),p.textContent="Мелкосрочка (частный гараж)",m=E("option"),m.textContent="Шиномонтаж",g=E("option"),g.textContent="Автомойка",v=E("option"),v.textContent="Автозапчасти",y=E("option"),y.textContent="Автостекло/Тонировка",k=E("option"),k.textContent="Автозаправка",A=E("option"),A.textContent="ГСМ",P=E("option"),P.textContent="Авторазбор",L=E("option"),L.textContent="Придорожное кафе",D=E("option"),D.textContent="Придорожный отель",R=S(),O=E("div"),B=E("p"),U=x("Название:\r\n                "),F=E("input"),j=S(),q=E("div"),$=E("p"),V=x("Виды услуг:\r\n                "),z=E("input"),H=S(),G=E("div"),W=E("p"),W.textContent="Время работы:",K=S(),Z=E("p"),Q=x("Круглосуточно \r\n                "),Y=E("input"),X=S(),tt=E("p"),tt.textContent="Пн - Пт",et=S(),nt=E("p"),rt=x("С\r\n                "),it=E("input"),ot=x("\r\n                до\r\n                "),at=E("input"),st=S(),dt=E("p"),dt.textContent="Суббота",ft=S(),pt=E("p"),mt=x("С\r\n                "),gt=E("input"),vt=x("\r\n                до\r\n                "),yt=E("input"),bt=x("\r\n                Выходной \r\n                "),wt=E("input"),_t=S(),kt=E("p"),kt.textContent="Вокресенье",Et=S(),xt=E("p"),St=x("С\r\n                "),Tt=E("input"),Ct=x("\r\n                до\r\n                "),It=E("input"),At=x("\r\n                Выходной \r\n                "),Pt=E("input"),Mt=S(),Nt=E("div"),Lt=E("p"),Dt=x("Номер телефона: \r\n                "),Rt=E("input"),Ot=S(),Bt=E("div"),Ut=E("button"),Ut.textContent="Стоимость размещения",Ft=S(),jt=E("button"),jt.textContent="Добавить",qt=S(),Gt&&Gt.c(),$t=S(),Wt&&Wt.c(),Vt=T(),I(n,"id","map"),I(n,"class","svelte-1gxemwq"),I(c,"for","service-type"),I(c,"class"," text-gray-700 text-sm font-semibold"),d.__value="",d.value=d.__value,f.__value="СТО",f.value=f.__value,p.__value="Мелкосрочка",p.value=p.__value,m.__value="Шиномонтаж",m.value=m.__value,g.__value="Автомойка",g.value=g.__value,v.__value="Автозапчасти",v.value=v.__value,y.__value="Автостекло/Тонировка",y.value=y.__value,k.__value="Автозаправка",k.value=k.__value,A.__value="ГСМ",A.value=A.__value,P.__value="Авторазбор",P.value=P.__value,L.__value="Кафе",L.value=L.__value,D.__value="Отель",D.value=D.__value,I(h,"name","service-type"),I(h,"id","service-type"),I(h,"class","border rounded-md"),void 0===t[2]&&J(()=>t[31].call(h)),I(u,"class","mt-2"),I(F,"type","text"),I(F,"placeholder","Название сервиса"),I(F,"maxlength","50"),I(B,"class","svelte-1gxemwq"),I(z,"type","text"),I(z,"placeholder","Короткое описание"),I(z,"maxlength","150"),I($,"class","svelte-1gxemwq"),I(W,"class","svelte-1gxemwq"),I(Y,"type","checkbox"),I(Z,"class","svelte-1gxemwq"),I(tt,"class","svelte-1gxemwq"),I(it,"type","time"),I(at,"type","time"),I(nt,"class","svelte-1gxemwq"),I(dt,"class","svelte-1gxemwq"),I(gt,"type","time"),I(yt,"type","time"),I(wt,"type","checkbox"),I(pt,"class","svelte-1gxemwq"),I(kt,"class","svelte-1gxemwq"),I(Tt,"type","time"),I(It,"type","time"),I(Pt,"type","checkbox"),I(xt,"class","svelte-1gxemwq"),I(Rt,"type","text"),I(Lt,"class","svelte-1gxemwq"),I(Ut,"class","btn-white"),I(jt,"class","btn-green"),I(Bt,"class","mt-2 text-center"),I(i,"class","p-2 bg-white rounded-lg shadow-lg w-full"),I(e,"class","mt-16")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(i,s),b(i,u),b(u,c),b(u,l),b(u,h),b(h,d),b(h,f),b(h,p),b(h,m),b(h,g),b(h,v),b(h,y),b(h,k),b(h,A),b(h,P),b(h,L),b(h,D),N(h,t[2]),b(i,R),b(i,O),b(O,B),b(B,U),b(B,F),M(F,t[1]),b(i,j),b(i,q),b(q,$),b($,V),b($,z),M(z,t[3]),b(i,H),b(i,G),b(G,W),b(G,K),b(G,Z),b(Z,Q),b(Z,Y),Y.checked=t[5].alltime,b(G,X),b(G,tt),b(G,et),b(G,nt),b(nt,rt),b(nt,it),M(it,t[5].weekdays[0]),b(nt,ot),b(nt,at),M(at,t[5].weekdays[1]),b(G,st),b(G,dt),b(G,ft),b(G,pt),b(pt,mt),b(pt,gt),M(gt,t[5].sat[0]),b(pt,vt),b(pt,yt),M(yt,t[5].sat[1]),b(pt,bt),b(pt,wt),wt.checked=t[5].saturday,b(G,_t),b(G,kt),b(G,Et),b(G,xt),b(xt,St),b(xt,Tt),M(Tt,t[5].sun[0]),b(xt,Ct),b(xt,It),M(It,t[5].sun[1]),b(xt,At),b(xt,Pt),Pt.checked=t[5].sunday,b(i,Mt),b(i,Nt),b(Nt,Lt),b(Lt,Dt),b(Lt,Rt),M(Rt,t[4]),b(i,Ot),b(i,Bt),b(Bt,Ut),b(Bt,Ft),b(Bt,jt),w(o,qt,_),Gt&&Gt.m(o,_),w(o,$t,_),Wt&&Wt.m(o,_),w(o,Vt,_),zt=!0,Ht=[C(h,"change",t[31]),C(F,"input",t[32]),C(z,"input",t[33]),C(Y,"change",t[34]),C(it,"input",t[35]),C(at,"input",t[36]),C(gt,"input",t[37]),C(yt,"input",t[38]),C(wt,"change",t[39]),C(Tt,"input",t[40]),C(It,"input",t[41]),C(Pt,"change",t[42]),C(Rt,"input",t[43]),C(Ut,"click",t[44]),C(jt,"click",t[45])]},p(t,e){4&e[0]&&N(h,t[2]),2&e[0]&&F.value!==t[1]&&M(F,t[1]),8&e[0]&&z.value!==t[3]&&M(z,t[3]),32&e[0]&&(Y.checked=t[5].alltime),32&e[0]&&M(it,t[5].weekdays[0]),32&e[0]&&M(at,t[5].weekdays[1]),32&e[0]&&M(gt,t[5].sat[0]),32&e[0]&&M(yt,t[5].sat[1]),32&e[0]&&(wt.checked=t[5].saturday),32&e[0]&&M(Tt,t[5].sun[0]),32&e[0]&&M(It,t[5].sun[1]),32&e[0]&&(Pt.checked=t[5].sunday),16&e[0]&&Rt.value!==t[4]&&M(Rt,t[4]),t[0]?Gt?(Gt.p(t,e),lt(Gt,1)):(Gt=Ca(t),Gt.c(),lt(Gt,1),Gt.m($t.parentNode,$t)):Gt&&(ut(),ht(Gt,1,1,()=>{Gt=null}),ct()),t[6]?Wt?(Wt.p(t,e),lt(Wt,1)):(Wt=Ia(t),Wt.c(),lt(Wt,1),Wt.m(Vt.parentNode,Vt)):Wt&&(ut(),ht(Wt,1,1,()=>{Wt=null}),ct())},i(t){zt||(lt(Gt),lt(Wt),zt=!0)},o(t){ht(Gt),ht(Wt),zt=!1},d(t){t&&_(e),t&&_(qt),Gt&&Gt.d(t),t&&_($t),Wt&&Wt.d(t),t&&_(Vt),o(Ht)}}}const Pa="pk.eyJ1IjoiZGFwcGRldnYiLCJhIjoiY2s3ZWo0dWV4MDYzcjNncHRncnlvdHY2OSJ9.zLk9G0tHK9iU-onN_TjxFw";function Ma(t,e,n){const r=sa({accessToken:Pa});let i,o,a,s,u,c,l,h,d,f,p,m,g,v={latlng:null,region:"none",city:"none",district:"none"};function y(){i=In.map("map",{zoomControl:!1}).setView([55.80046084146819,49.105174541473396],13),i.locate({watch:!1,setView:!0,enableHighAccuracy:!0}),In.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'<span style="font-size: smaller;"> Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a></span>',maxZoom:19,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:Pa}).addTo(i),o=i.getCenter(),In.control.zoom({position:"bottomright"}).addTo(i),s=In.Icon.extend({options:{iconSize:[50,50],iconAnchor:[25,25],popupAnchor:[0,-25]}}),u=new s({iconUrl:"./icons/location.png"}),i.on("locationfound",b),i.on("click",_)}function b(t){a=In.marker(t.latlng,{icon:u,draggable:!0}).addTo(i),a.on("move",w),a.on("moveend",k)}function w(t){v.latlng=t.latlng}function _(t){a.setLatLng(t.latlng),v.latlng=t.latlng,k()}function k(){let t=v.latlng;r.reverseGeocode({query:[t.lng,t.lat]}).send().then(t=>{const e=t.body.features;e.forEach(t=>{"region"===t.place_type[0]?c=t.text:"district"===t.place_type[0]?h=t.text:"place"===t.place_type[0]&&(l=t.text)}),e.some(t=>"district"===t.place_type[0])||(h=l),v.region=c,v.city=l,v.district=h,console.log(v)})}z(y),Lt.auth().onAuthStateChanged((function(t){t?f=t:console.log("no user login")}));let E,x,S="+7",T={alltime:!1,saturday:!1,sunday:!1,weekdays:[],sat:[],sun:[]};function C(){let t;let e;Ht.collection("priceList").doc("addService").get().then((function(e){const n=e.data();t=n[m]})).catch((function(t){A(`Ошибка: ${t}`)})),Ht.collection("users").doc(f.uid).get().then((function(n){const r=n.data();e=r.balance,e-t>0?I(t):A("Недостаточно средств.")})).catch((function(t){A(`Ошибка: ${t}`)}))}function I(t){if(v.region&&"none"!=v.city)if(g&&p&&null!=m){Ht.collection("services").add({region:v.region,district:v.district,city:v.city,name:p,type:m,offer:g,phone:S,location:[v.latlng.lat,v.latlng.lng],owner:f.uid,time:{wHours:T}}).then((function(e){M(t),A("Новый сервис добавлен. Данные обновятся через несколько минут.")})).catch((function(t){A(`Ошибка: ${t}`)}))}else A("Заполните все поля.");else A("Установите маркер на местоположение сервиса.")}function A(t){E||(n(7,x=t),n(6,E=!0)),setTimeout(()=>{n(6,E=!1)},5e3)}let P=Lt.functions().httpsCallable("balanceDecrement");function M(t){P({amount:t}).then((function(t){console.log(t)})).catch((function(t){console.log(t.code,t.message,t.details)}))}return[d,p,m,g,S,T,E,x,C,i,o,a,s,u,c,l,h,v,f,r,void 0,void 0,y,b,w,_,k,I,A,P,M,function(){m=D(this),n(2,m)},function(){p=this.value,n(1,p)},function(){g=this.value,n(3,g)},function(){T.alltime=this.checked,n(5,T)},function(){T.weekdays[0]=this.value,n(5,T)},function(){T.weekdays[1]=this.value,n(5,T)},function(){T.sat[0]=this.value,n(5,T)},function(){T.sat[1]=this.value,n(5,T)},function(){T.saturday=this.checked,n(5,T)},function(){T.sun[0]=this.value,n(5,T)},function(){T.sun[1]=this.value,n(5,T)},function(){T.sunday=this.checked,n(5,T)},function(){S=this.value,n(4,S)},()=>n(0,d=!0),()=>C(),()=>n(0,d=!1),()=>n(6,E=!1)]}function Na(t,e,n){const r=t.slice();return r[95]=e[n],r}function La(t,e,n){const r=t.slice();return r[98]=e[n],r}function Da(t,e,n){const r=t.slice();return r[109]=e[n],r}function Ra(t,e,n){const r=t.slice();return r[104]=e[n],r}function Oa(t,e,n){const r=t.slice();return r[113]=e[n],r}function Ba(t){let e,n;return{c(){e=E("span"),n=x(t[4]),I(e,"class"," text-red-600")},m(t,r){w(t,e,r),b(e,n)},p(t,e){16&e[0]&&P(n,t[4])},d(t){t&&_(e)}}}function Ua(t){let e,n;return{c(){e=E("span"),n=x(t[4]),I(e,"class"," text-orange-600")},m(t,r){w(t,e,r),b(e,n)},p(t,e){16&e[0]&&P(n,t[4])},d(t){t&&_(e)}}}function Fa(t){let e,n;return{c(){e=E("span"),n=x(t[4]),I(e,"class"," text-green-600")},m(t,r){w(t,e,r),b(e,n)},p(t,e){16&e[0]&&P(n,t[4])},d(t){t&&_(e)}}}function ja(e){let n,r,i,o;return{c(){n=E("div"),r=E("img"),r.src!==(i="./icons/expand_more.svg")&&I(r,"src","./icons/expand_more.svg"),I(r,"alt","options"),I(r,"class"," mx-auto")},m(t,i){w(t,n,i),b(n,r),o=C(r,"click",e[45])},p:t,d(t){t&&_(n),o()}}}function qa(t){let e,n,r,i,a,s,u,c,l,h,d,f,p=t[21]&&$a(t),m=t[22]&&Za(t),g=t[8]&&Qa(t);return{c(){e=E("div"),n=E("div"),n.textContent="Журнал",r=S(),i=E("div"),i.textContent="Настройки",a=S(),p&&p.c(),s=S(),u=E("div"),u.textContent="Добавить услугу",c=S(),m&&m.c(),l=S(),h=E("div"),h.textContent="Добавить блок",d=S(),g&&g.c(),I(n,"class","option-menu svelte-1rqnpkw"),I(i,"class","option-menu svelte-1rqnpkw"),I(u,"class","option-menu svelte-1rqnpkw"),I(h,"class","option-menu svelte-1rqnpkw")},m(o,v){w(o,e,v),b(e,n),b(e,r),b(e,i),b(e,a),p&&p.m(e,null),b(e,s),b(e,u),b(e,c),m&&m.m(e,null),b(e,l),b(e,h),b(e,d),g&&g.m(e,null),f=[C(n,"click",t[46]),C(i,"click",t[47]),C(u,"click",t[51]),C(h,"click",t[54])]},p(t,n){t[21]?p?p.p(t,n):(p=$a(t),p.c(),p.m(e,s)):p&&(p.d(1),p=null),t[22]?m?m.p(t,n):(m=Za(t),m.c(),m.m(e,l)):m&&(m.d(1),m=null),t[8]?g?g.p(t,n):(g=Qa(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(t){t&&_(e),p&&p.d(),m&&m.d(),g&&g.d(),o(f)}}}function $a(t){let e,n,r,i,o,a,s,u;function c(t,e){return t[91].subServices?za:Va}let l=c(t),h=l(t);function d(t,e){return"granted"==t[28]?Ka:Wa}let f=d(t),p=f(t);return{c(){e=E("div"),n=E("div"),r=E("span"),r.textContent="Предварительная запись через сайт:",i=S(),h.c(),o=S(),a=E("div"),s=E("span"),s.textContent="Уведомления:",u=S(),p.c(),I(r,"class"," text-sm"),I(s,"class"," text-sm"),I(e,"class","mt-1 p-1 border border-dashed")},m(t,c){w(t,e,c),b(e,n),b(n,r),b(n,i),h.m(n,null),b(e,o),b(e,a),b(a,s),b(a,u),p.m(a,null)},p(t,e){l===(l=c(t))&&h?h.p(t,e):(h.d(1),h=l(t),h&&(h.c(),h.m(n,null))),f===(f=d(t))&&p?p.p(t,e):(p.d(1),p=f(t),p&&(p.c(),p.m(a,null)))},d(t){t&&_(e),h.d(),p.d()}}}function Va(e){let n;return{c(){n=E("span"),n.textContent="Сначала добавьте услугу...",I(n,"class"," text-sm text-orange-600 italic")},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function za(t){let e;function n(t,e){return t[91].reception?Ga:Ha}let r=n(t),i=r(t);return{c(){i.c(),e=T()},m(t,n){i.m(t,n),w(t,e,n)},p(t,o){r!==(r=n(t))&&(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&_(e)}}}function Ha(t){let e,n,r,i;function o(...e){return t[49](t[92],...e)}return{c(){e=E("span"),e.textContent="Выключено",n=S(),r=E("button"),r.textContent="включить",I(e,"class"," text-sm text-gray-500"),I(r,"class","btn-green")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"click",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Ga(t){let e,n,r,i;function o(...e){return t[48](t[92],...e)}return{c(){e=E("span"),e.textContent="Включено",n=S(),r=E("button"),r.textContent="отключить",I(e,"class"," text-sm text-green-600"),I(r,"class","btn-gray")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"click",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Wa(e){let n,r,i,o;return{c(){n=E("span"),n.textContent="Выключено",r=S(),i=E("button"),i.textContent="включить",I(n,"class"," text-sm text-gray-500"),I(i,"class","btn-green")},m(t,a){w(t,n,a),w(t,r,a),w(t,i,a),o=C(i,"click",e[50])},p:t,d(t){t&&_(n),t&&_(r),t&&_(i),o()}}}function Ka(e){let n;return{c(){n=E("span"),n.textContent="Включено",I(n,"class"," text-sm text-green-600")},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function Za(t){let e,n,r,i,a;function s(...e){return t[53](t[92],...e)}return{c(){e=E("div"),n=E("input"),r=S(),i=E("button"),i.textContent="добавить",I(n,"type","text"),I(n,"placeholder","Название услуги"),I(n,"class","svelte-1rqnpkw"),I(i,"class","btn-orange"),I(e,"class","pt-1 p-1 border border-dashed")},m(o,u){w(o,e,u),b(e,n),M(n,t[23]),b(e,r),b(e,i),a=[C(n,"input",t[52]),C(i,"click",s)]},p(e,r){t=e,8388608&r[0]&&n.value!==t[23]&&M(n,t[23])},d(t){t&&_(e),o(a)}}}function Qa(t){let e,n,r,i,a,s,u,c,l;function h(t,e){return null!=t[9]?Xa:Ya}let d=h(t),f=d(t),p=null!=t[9]&&Ja(t);return{c(){e=E("div"),n=E("div"),f.c(),r=S(),i=E("div"),a=E("input"),s=S(),u=E("input"),c=S(),p&&p.c(),I(n,"class","image-upload svelte-1rqnpkw"),I(a,"type","text"),I(a,"maxlength","50"),I(a,"class","svelte-1rqnpkw"),I(u,"type","text"),I(u,"maxlength","150"),I(u,"class","svelte-1rqnpkw"),I(i,"class","mt-2 text-center")},m(o,h){w(o,e,h),b(e,n),f.m(n,null),b(e,r),b(e,i),b(i,a),M(a,t[10]),b(i,s),b(i,u),M(u,t[11]),b(i,c),p&&p.m(i,null),l=[C(a,"input",t[56]),C(u,"input",t[57])]},p(t,e){d===(d=h(t))&&f?f.p(t,e):(f.d(1),f=d(t),f&&(f.c(),f.m(n,null))),1024&e[0]&&a.value!==t[10]&&M(a,t[10]),2048&e[0]&&u.value!==t[11]&&M(u,t[11]),null!=t[9]?p?p.p(t,e):(p=Ja(t),p.c(),p.m(i,null)):p&&(p.d(1),p=null)},d(t){t&&_(e),f.d(),p&&p.d(),o(l)}}}function Ya(t){let e,n,r,i;function o(...e){return t[55](t[90],...e)}return{c(){e=E("label"),e.innerHTML='<p class="my-4">Загрузите изображение</p> \n                                        <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1rqnpkw">',n=S(),r=E("input"),I(e,"for","block-foto"),I(r,"type","file"),I(r,"id","block-foto"),I(r,"name","file"),I(r,"class","svelte-1rqnpkw")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Xa(t){let e,n;return{c(){e=E("img"),I(e,"class","img-up svelte-1rqnpkw"),e.src!==(n=t[9])&&I(e,"src",n),I(e,"alt","block-img")},m(t,n){w(t,e,n)},p(t,r){512&r[0]&&e.src!==(n=t[9])&&I(e,"src",n)},d(t){t&&_(e)}}}function Ja(e){let n,r;return{c(){n=E("button"),n.textContent="Добавить",I(n,"class","btn-green")},m(t,i){w(t,n,i),r=C(n,"click",e[33])},p:t,d(t){t&&_(n),r()}}}function ts(t){let e,n,r;function i(...e){return t[58](t[113],...e)}return{c(){e=E("div"),n=E("button"),n.textContent="Удалить блок",I(n,"class","btn-opt"),I(e,"class","mt-1 text-center")},m(t,o){w(t,e,o),b(e,n),r=C(n,"click",i)},p(e,n){t=e},d(t){t&&_(e),r()}}}function es(t){let e,n,r,i,o,a,s,u,c,l,h,d,f,p,m,g,v=t[113].title+"",y=t[113].desc+"",k=t[91].owner==t[1].uid&&ts(t);function T(...e){return t[59](t[103],...e)}return{c(){e=E("div"),n=E("span"),r=x(v),i=S(),o=E("span"),o.innerHTML='<img src="./icons/close_circle.svg" alt="X" class="w-8 h-8">',a=S(),s=E("img"),c=S(),l=E("hr"),h=S(),d=E("div"),f=x(y),p=S(),k&&k.c(),m=S(),I(n,"class","absolute p-1 mt-3 bg-gray-900 text-white font-semibold uppercase opacity-75"),I(o,"class","absolute right-0 m-2 opacity-50"),s.src!==(u=t[113].imgURL)&&I(s,"src",u),I(s,"alt","block-img"),I(s,"class","img-up svelte-1rqnpkw"),I(d,"class","p-2 bg-gray-100 text-black text-sm leading-tight"),I(e,"class"," relative border rounded shadow-md")},m(t,u){w(t,e,u),b(e,n),b(n,r),b(e,i),b(e,o),b(e,a),b(e,s),b(e,c),b(e,l),b(e,h),b(e,d),b(d,f),b(d,p),k&&k.m(d,null),b(e,m),g=C(e,"click",T)},p(e,n){t=e,524288&n[3]&&v!==(v=t[113].title+"")&&P(r,v),524288&n[3]&&s.src!==(u=t[113].imgURL)&&I(s,"src",u),524288&n[3]&&y!==(y=t[113].desc+"")&&P(f,y),t[91].owner==t[1].uid?k?k.p(t,n):(k=ts(t),k.c(),k.m(d,null)):k&&(k.d(1),k=null)},d(t){t&&_(e),k&&k.d(),g()}}}function ns(t){let e,n=t[112],r=[];for(let e=0;e<n.length;e+=1)r[e]=es(Oa(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=T()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(1073741826&i[0]|536870912&i[2]|524288&i[3]){let o;for(n=t[112],o=0;o<n.length;o+=1){const a=Oa(t,n,o);r[o]?r[o].p(a,i):(r[o]=es(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){k(r,t),t&&_(e)}}}function rs(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[61])},p:t,d(t){t&&_(n),i()}}}function is(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[60])},p:t,d(t){t&&_(n),i()}}}function os(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[63])},p:t,d(t){t&&_(n),i()}}}function as(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[62])},p:t,d(t){t&&_(n),i()}}}function ss(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[65])},p:t,d(t){t&&_(n),i()}}}function us(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[64])},p:t,d(t){t&&_(n),i()}}}function cs(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[67])},p:t,d(t){t&&_(n),i()}}}function ls(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[66])},p:t,d(t){t&&_(n),i()}}}function hs(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star_border.svg")&&I(n,"src","./icons/star_border.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[69])},p:t,d(t){t&&_(n),i()}}}function ds(e){let n,r,i;return{c(){n=E("img"),n.src!==(r="./icons/star.svg")&&I(n,"src","./icons/star.svg"),I(n,"alt","star"),I(n,"class","star svelte-1rqnpkw")},m(t,r){w(t,n,r),i=C(n,"click",e[68])},p:t,d(t){t&&_(n),i()}}}function fs(t){let e,n,r,i,o=t[104].rating>=2&&ps(t);return{c(){e=E("img"),r=S(),o&&o.c(),i=T(),e.src!==(n="./icons/star.svg")&&I(e,"src","./icons/star.svg"),I(e,"alt","star"),I(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n),w(t,r,n),o&&o.m(t,n),w(t,i,n)},p(t,e){t[104].rating>=2?o?o.p(t,e):(o=ps(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&_(e),t&&_(r),o&&o.d(t),t&&_(i)}}}function ps(t){let e,n,r,i,o=t[104].rating>=3&&ms(t);return{c(){e=E("img"),r=S(),o&&o.c(),i=T(),e.src!==(n="./icons/star.svg")&&I(e,"src","./icons/star.svg"),I(e,"alt","star"),I(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n),w(t,r,n),o&&o.m(t,n),w(t,i,n)},p(t,e){t[104].rating>=3?o?o.p(t,e):(o=ms(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&_(e),t&&_(r),o&&o.d(t),t&&_(i)}}}function ms(t){let e,n,r,i,o=t[104].rating>=4&&gs(t);return{c(){e=E("img"),r=S(),o&&o.c(),i=T(),e.src!==(n="./icons/star.svg")&&I(e,"src","./icons/star.svg"),I(e,"alt","star"),I(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n),w(t,r,n),o&&o.m(t,n),w(t,i,n)},p(t,e){t[104].rating>=4?o?o.p(t,e):(o=gs(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&_(e),t&&_(r),o&&o.d(t),t&&_(i)}}}function gs(t){let e,n,r,i,o=5==t[104].rating&&vs();return{c(){e=E("img"),r=S(),o&&o.c(),i=T(),e.src!==(n="./icons/star.svg")&&I(e,"src","./icons/star.svg"),I(e,"alt","star"),I(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n),w(t,r,n),o&&o.m(t,n),w(t,i,n)},p(t,e){5==t[104].rating?o||(o=vs(),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&_(e),t&&_(r),o&&o.d(t),t&&_(i)}}}function vs(t){let e,n;return{c(){e=E("img"),e.src!==(n="./icons/star.svg")&&I(e,"src","./icons/star.svg"),I(e,"alt","star"),I(e,"class","star-small svelte-1rqnpkw")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function ys(t){let e,n;function r(...e){return t[71](t[104],...e)}return{c(){e=E("span"),e.textContent="Ответить",I(e,"class"," text-teal-500 text-xs")},m(t,i){w(t,e,i),n=C(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function bs(t){let e,n=t[107],r=[];for(let e=0;e<n.length;e+=1)r[e]=ws(Da(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=T()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(16384&i[3]){let o;for(n=t[107],o=0;o<n.length;o+=1){const a=Da(t,n,o);r[o]?r[o].p(a,i):(r[o]=ws(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){k(r,t),t&&_(e)}}}function ws(t){let e,n,r,i,o,a,s,u=t[109].username+"",c=t[109].text+"";return{c(){e=E("div"),n=E("p"),r=x(u),i=S(),o=E("p"),a=x(c),s=S(),I(n,"class"," font-semibold"),I(o,"class","mt-1"),I(e,"class","reply svelte-1rqnpkw")},m(t,u){w(t,e,u),b(e,n),b(n,r),b(e,i),b(e,o),b(o,a),b(e,s)},p(t,e){16384&e[3]&&u!==(u=t[109].username+"")&&P(r,u),16384&e[3]&&c!==(c=t[109].text+"")&&P(a,c)},d(t){t&&_(e)}}}function _s(t){let e,n=t[107].length>=1&&bs(t);return{c(){n&&n.c(),e=T()},m(t,r){n&&n.m(t,r),w(t,e,r)},p(t,r){t[107].length>=1?n?n.p(t,r):(n=bs(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function ks(t){let e,n,r,i,o,a,s,u,c,l,h,d,f,p=t[104].username+"",m=t[104].text+"",g=t[104].rating>=1&&fs(t),v=t[91].owner==t[1].uid&&ys(t);const y=new Ye({props:{path:t[104].ref.collection("reply"),$$slots:{default:[_s,({data:t,ref:e})=>({107:t,108:e}),({data:t,ref:e})=>[0,0,0,(t?16384:0)|(e?32768:0)]]},$$scope:{ctx:t}}});return{c(){e=E("div"),n=E("p"),r=E("span"),i=x(p),o=S(),a=E("span"),g&&g.c(),s=S(),u=E("p"),c=x(m),l=S(),v&&v.c(),h=S(),mt(y.$$.fragment),d=S(),I(r,"class"," font-semibold"),I(a,"class"," float-right"),I(u,"class","mt-2"),I(e,"class","review svelte-1rqnpkw")},m(t,p){w(t,e,p),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),g&&g.m(a,null),b(e,s),b(e,u),b(u,c),b(u,l),v&&v.m(u,null),b(e,h),gt(y,e,null),b(e,d),f=!0},p(t,e){(!f||256&e[3])&&p!==(p=t[104].username+"")&&P(i,p),t[104].rating>=1?g?g.p(t,e):(g=fs(t),g.c(),g.m(a,null)):g&&(g.d(1),g=null),(!f||256&e[3])&&m!==(m=t[104].text+"")&&P(c,m),t[91].owner==t[1].uid?v?v.p(t,e):(v=ys(t),v.c(),v.m(u,null)):v&&(v.d(1),v=null);const n={};256&e[3]&&(n.path=t[104].ref.collection("reply")),8404992&e[3]&&(n.$$scope={dirty:e,ctx:t}),y.$set(n)},i(t){f||(lt(y.$$.fragment,t),f=!0)},o(t){ht(y.$$.fragment,t),f=!1},d(t){t&&_(e),g&&g.d(),v&&v.d(),vt(y)}}}function Es(t){let e;return{c(){e=E("div"),e.innerHTML="<p>Отзывов нет</p>",I(e,"class","mt-1 p-2 bg-gray-100 border rounded-md text-center")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function xs(t){let e;return{c(){e=E("span"),e.textContent="Не удалось загрузить",I(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Ss(t){let e,n,r,i,o,a,s,u,c,l=t[101],h=[];for(let e=0;e<l.length;e+=1)h[e]=ks(Ra(t,l,e));const d=t=>ht(h[t],1,1,()=>{h[t]=null});function f(...e){return t[72](t[103],...e)}let p=0==t[101].length&&Es();return{c(){e=E("div");for(let t=0;t<h.length;t+=1)h[t].c();n=S(),r=E("div"),i=E("img"),a=S(),p&&p.c(),s=S(),I(e,"class","mt-1"),i.src!==(o="./icons/expand_more.svg")&&I(i,"src","./icons/expand_more.svg"),I(i,"alt","options"),I(i,"class"," mx-auto")},m(t,o){w(t,e,o);for(let t=0;t<h.length;t+=1)h[t].m(e,null);w(t,n,o),w(t,r,o),b(r,i),w(t,a,o),p&&p.m(t,o),w(t,s,o),u=!0,c=C(i,"click",f)},p(n,r){if(t=n,2&r[0]|16&r[1]|536870912&r[2]|16640&r[3]){let n;for(l=t[101],n=0;n<l.length;n+=1){const i=Ra(t,l,n);h[n]?(h[n].p(i,r),lt(h[n],1)):(h[n]=ks(i),h[n].c(),lt(h[n],1),h[n].m(e,null))}for(ut(),n=l.length;n<h.length;n+=1)d(n);ct()}0==t[101].length?p||(p=Es(),p.c(),p.m(s.parentNode,s)):p&&(p.d(1),p=null)},i(t){if(!u){for(let t=0;t<l.length;t+=1)lt(h[t]);u=!0}},o(t){h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)ht(h[t]);u=!1},d(t){t&&_(e),k(h,t),t&&_(n),t&&_(r),t&&_(a),p&&p.d(t),t&&_(s),c()}}}function Ts(e){let n,r,i,o,a,s,u,c;return{c(){n=E("div"),r=E("div"),i=E("div"),o=E("img"),o.src!==(a="./icons/event_note.svg")&&I(o,"src","./icons/event_note.svg"),I(o,"alt","call"),I(o,"class","w-8 h-8 cursor-pointer"),I(i,"class","p-2 rounded-full bg-teal-400"),I(r,"class","mt-3 ml-1 p-2 fixed rounded-full bg-teal-500 shadow-lg"),I(n,"class","absolute bottom-0 left-0 w-20 h-20")},m(t,a){w(t,n,a),b(n,r),b(r,i),b(i,o),u=!0,c=C(o,"click",e[73])},p:t,i(t){u||(J(()=>{s||(s=pt(n,ln,{duration:1e3},!0)),s.run(1)}),u=!0)},o(t){s||(s=pt(n,ln,{duration:1e3},!1)),s.run(0),u=!1},d(t){t&&_(n),t&&s&&s.end(),c()}}}function Cs(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,x,T,A,P,N,L,D,R,O,B,U,F,j,q,$=t[91].subServices,V=[];for(let e=0;e<$.length;e+=1)V[e]=Is(La(t,$,e));return{c(){e=E("div"),n=E("div"),r=E("div"),r.innerHTML='<span class="text-lg font-semibold">\n                                Записаться\n                            </span>',i=S(),a=E("div"),s=E("div"),s.innerHTML="<span>\n                                    Выберите услугу:\n                                </span>",u=S(),c=E("div"),l=E("select"),h=E("option");for(let t=0;t<V.length;t+=1)V[t].c();d=S(),f=E("div"),f.innerHTML="<span>\n                                    Выберите дату:\n                                </span>",p=S(),m=E("div"),g=E("input"),v=S(),y=E("div"),y.innerHTML="<span>\n                                    Выберите время:\n                                </span>",x=S(),T=E("div"),A=E("input"),P=S(),N=E("div"),N.innerHTML="<span>\n                                    Комментарий:\n                                </span>",L=S(),D=E("div"),R=E("input"),O=S(),B=E("div"),U=E("button"),U.textContent="Отмена",F=S(),j=E("button"),j.textContent="Записаться",I(r,"class","text-center"),h.__value="",h.value=h.__value,I(l,"class","p-1 rounded-lg border bg-white"),I(f,"class","mt-1"),I(g,"type","date"),I(g,"class","svelte-1rqnpkw"),I(y,"class","mt-1"),I(A,"type","time"),I(A,"class","svelte-1rqnpkw"),I(N,"class","mt-1"),I(R,"type","text"),I(R,"class","svelte-1rqnpkw"),I(a,"class","mt-1"),I(U,"class","btn-gray"),I(j,"class","btn-orange"),I(n,"class","p-2 bg-gray-100 border rounded-lg shadow-lg"),I(e,"id","receptionBox"),I(e,"class","svelte-1rqnpkw")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(n,i),b(n,a),b(a,s),b(a,u),b(a,c),b(c,l),b(l,h);for(let t=0;t<V.length;t+=1)V[t].m(l,null);b(a,d),b(a,f),b(a,p),b(a,m),b(m,g),M(g,t[25]),b(a,v),b(a,y),b(a,x),b(a,T),b(T,A),M(A,t[26]),b(a,P),b(a,N),b(a,L),b(a,D),b(D,R),M(R,t[27]),b(n,O),b(n,B),b(B,U),b(B,F),b(B,j),q=[C(l,"change",t[74]),C(g,"input",t[75]),C(A,"input",t[76]),C(R,"input",t[77]),C(U,"click",t[78]),C(j,"click",t[37])]},p(t,e){if(536870912&e[2]){let n;for($=t[91].subServices,n=0;n<$.length;n+=1){const r=La(t,$,n);V[n]?V[n].p(r,e):(V[n]=Is(r),V[n].c(),V[n].m(l,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=$.length}33554432&e[0]&&M(g,t[25]),67108864&e[0]&&M(A,t[26]),134217728&e[0]&&R.value!==t[27]&&M(R,t[27])},d(t){t&&_(e),k(V,t),o(q)}}}function Is(t){let e,n,r,i=t[98]+"";return{c(){e=E("option"),n=x(i),e.__value=r=t[98],e.value=e.__value},m(t,r){w(t,e,r),b(e,n)},p(t,o){536870912&o[2]&&i!==(i=t[98]+"")&&P(n,i),536870912&o[2]&&r!==(r=t[98])&&(e.__value=r),e.value=e.__value},d(t){t&&_(e)}}}function As(t){let e,n,r,i,a,s,u,c,l,h,d;const f=new Ye({props:{path:t[92].collection("records"),query:Vs,$$slots:{default:[Rs,({data:t,ref:e})=>({93:t,94:e}),({data:t,ref:e})=>[0,0,0,(t?1:0)|(e?2:0)]]},$$scope:{ctx:t}}});return{c(){e=E("div"),n=E("div"),r=E("div"),r.innerHTML='<span class=" text-lg font-semibold">\n                            Журнал\n                        </span>',i=S(),a=E("input"),s=S(),mt(f.$$.fragment),u=S(),c=E("div"),l=E("button"),l.textContent="Закрыть",I(r,"class","text-center"),I(a,"type","date"),I(a,"class","svelte-1rqnpkw"),I(l,"class","btn-gray"),I(c,"class","mt-2 text-center"),I(n,"class","p-2 bg-gray-100 border rounded-lg shadow-lg"),I(e,"id","recordsBox"),I(e,"class","svelte-1rqnpkw")},m(o,p){w(o,e,p),b(e,n),b(n,r),b(n,i),b(n,a),M(a,t[18]),b(n,s),gt(f,n,null),b(n,u),b(n,c),b(c,l),h=!0,d=[C(a,"input",t[79]),C(l,"click",t[85])]},p(t,e){262144&e[0]&&M(a,t[18]);const n={};1073741824&e[2]&&(n.path=t[92].collection("records")),458752&e[0]|8388609&e[3]&&(n.$$scope={dirty:e,ctx:t}),f.$set(n)},i(t){h||(lt(f.$$.fragment,t),h=!0)},o(t){ht(f.$$.fragment,t),h=!1},d(t){t&&_(e),vt(f),o(d)}}}function Ps(t){let e,n,r,i,o,a,s,u,c,l,h,d,f,p,m,g=t[95].time+"",v=t[95].subservice+"",y=t[95].clientname+"",k=t[95].desc+"",T=!t[95].confirmed&&Ms(t);return{c(){e=E("div"),n=E("div"),r=E("span"),i=x(g),o=S(),a=E("span"),s=x(v),u=S(),c=E("div"),l=x(y),h=S(),d=x(k),f=S(),T&&T.c(),p=S(),I(r,"class"," text-orange-600 font-semibold"),I(a,"class","ml-2 font-semibold"),I(c,"class","mt-1 text-sm"),I(e,"class","mt-1 p-1 border rounded bg-white")},m(g,v){w(g,e,v),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),b(e,u),b(e,c),b(c,l),b(c,h),b(c,d),b(e,f),T&&T.m(e,null),b(e,p),m=C(r,"click",t[80])},p(t,n){1&n[3]&&g!==(g=t[95].time+"")&&P(i,g),1&n[3]&&v!==(v=t[95].subservice+"")&&P(s,v),1&n[3]&&y!==(y=t[95].clientname+"")&&P(l,y),1&n[3]&&k!==(k=t[95].desc+"")&&P(d,k),t[95].confirmed?T&&(T.d(1),T=null):T?T.p(t,n):(T=Ms(t),T.c(),T.m(e,p))},d(t){t&&_(e),T&&T.d(),m()}}}function Ms(t){let e,n,r,i,a,s,u,c=t[17]&&Ns(t),l=null!=t[16]&&Ls(t);function h(...e){return t[83](t[95],...e)}function d(...e){return t[84](t[95],...e)}return{c(){c&&c.c(),e=S(),n=E("div"),l&&l.c(),r=S(),i=E("button"),i.textContent="Принять",a=S(),s=E("button"),s.textContent="Отменить",I(i,"class","btn-opt bg-green-500"),I(s,"class","btn-opt bg-gray-800"),I(n,"class","mt-2 text-center")},m(t,o){c&&c.m(t,o),w(t,e,o),w(t,n,o),l&&l.m(n,null),b(n,r),b(n,i),b(n,a),b(n,s),u=[C(i,"click",h,{once:!0}),C(s,"click",d)]},p(i,o){(t=i)[17]?c?c.p(t,o):(c=Ns(t),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),null!=t[16]?l?l.p(t,o):(l=Ls(t),l.c(),l.m(n,r)):l&&(l.d(1),l=null)},d(t){c&&c.d(t),t&&_(e),t&&_(n),l&&l.d(),o(u)}}}function Ns(t){let e,n,r;return{c(){e=E("div"),n=E("input"),I(n,"type","time"),I(n,"class","svelte-1rqnpkw")},m(i,o){w(i,e,o),b(e,n),M(n,t[16]),r=C(n,"input",t[81])},p(t,e){65536&e[0]&&M(n,t[16])},d(t){t&&_(e),r()}}}function Ls(t){let e,n;function r(...e){return t[82](t[95],...e)}return{c(){e=E("button"),e.textContent="Изменить",I(e,"class","btn-opt bg-orange-500")},m(t,i){w(t,e,i),n=C(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function Ds(t){let e,n=t[95].date==t[18]&&Ps(t);return{c(){n&&n.c(),e=T()},m(t,r){n&&n.m(t,r),w(t,e,r)},p(t,r){t[95].date==t[18]?n?n.p(t,r):(n=Ps(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function Rs(t){let e,n=t[93],r=[];for(let e=0;e<n.length;e+=1)r[e]=Ds(Na(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=T()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(537329664&i[0]|1&i[3]){let o;for(n=t[93],o=0;o<n.length;o+=1){const a=Na(t,n,o);r[o]?r[o].p(a,i):(r[o]=Ds(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){k(r,t),t&&_(e)}}}function Os(t){let e;return{c(){e=E("span"),e.textContent="Не удалось загрузить",I(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Bs(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,A,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,tt,et,nt,rt,it,ot,at,st,dt,ft=t[91].name+"",yt=t[91].offer+"",bt=t[4]<3&&Ba(t),wt=t[4]>=3&&t[4]<4&&Ua(t),_t=t[4]>=4&&Fa(t),kt=t[91].owner==t[1].uid&&ja(t),Et=t[7]&&qa(t);const xt=new Ye({props:{path:t[92].collection("adblocks"),query:t[12],$$slots:{default:[ns,({data:t,last:e})=>({112:t,103:e}),({data:t,last:e})=>[0,0,0,(t?524288:0)|(e?1024:0)]]},$$scope:{ctx:t}}});function St(t,e){return t[5]>=1?is:rs}let Tt=St(t),Ct=Tt(t);function It(t,e){return t[5]>=2?as:os}let At=It(t),Pt=At(t);function Mt(t,e){return t[5]>=3?us:ss}let Nt=Mt(t),Lt=Nt(t);function Dt(t,e){return t[5]>=4?ls:cs}let Rt=Dt(t),Ot=Rt(t);function Bt(t,e){return 5==t[5]?ds:hs}let Ut=Bt(t),Ft=Ut(t);const jt=new Ye({props:{path:t[92].collection("reviews"),query:t[13],$$slots:{default:[Ss,({data:t,ref:e,last:n})=>({101:t,102:e,103:n}),({data:t,ref:e,last:n})=>[0,0,0,(t?256:0)|(e?512:0)|(n?1024:0)]],fallback:[xs,({data:t,ref:e,last:n})=>({101:t,102:e,103:n}),({data:t,ref:e,last:n})=>[0,0,0,(t?256:0)|(e?512:0)|(n?1024:0)]]},$$scope:{ctx:t}}});let qt=t[91].reception&&Ts(t),$t=t[20]&&Cs(t),Vt=t[19]&&As(t);return{c(){e=E("div"),n=E("div"),r=E("div"),i=E("div"),i.innerHTML='<img src="./icons/star.svg" alt="star" class="w-8 h-8">',a=S(),s=E("div"),bt&&bt.c(),u=S(),wt&&wt.c(),c=S(),_t&&_t.c(),l=S(),h=E("div"),d=E("div"),f=E("p"),p=x(ft),m=S(),g=E("div"),v=E("p"),y=x(yt),k=S(),kt&&kt.c(),T=S(),Et&&Et.c(),A=S(),N=E("div"),mt(xt.$$.fragment),L=S(),D=E("div"),R=E("div"),Ct.c(),O=S(),Pt.c(),B=S(),Lt.c(),U=S(),Ot.c(),F=S(),Ft.c(),j=S(),q=E("div"),$=E("input"),V=S(),z=E("button"),z.textContent="Добавить",H=S(),G=E("div"),mt(jt.$$.fragment),W=S(),qt&&qt.c(),K=S(),Z=E("div"),Q=E("div"),Y=E("div"),X=E("a"),tt=E("img"),it=S(),$t&&$t.c(),ot=S(),Vt&&Vt.c(),at=S(),I(s,"class","mt-1 font-semibold text-center"),I(r,"class","p-2 flex flex-col content-center items-center"),I(f,"class","font-semibold text-lg"),I(d,"class","p-2 my-auto mx-auto text-center"),I(h,"class","flex flex-grow"),I(n,"class","p-1 flex flex-row"),I(v,"class","p-2 text-sm text-justify"),I(e,"class","p-2 rounded-lg shadow-lg"),I(N,"class","p-1"),I(R,"class","star-container svelte-1rqnpkw"),I($,"type","text"),I($,"placeholder","Ваш отзыв"),I($,"class","svelte-1rqnpkw"),I(z,"class","btn-orange"),I(q,"class","mt-1 inline-block"),I(D,"class","rating-container svelte-1rqnpkw"),I(G,"class","p-1"),tt.src!==(et="./icons/phone.svg")&&I(tt,"src","./icons/phone.svg"),I(tt,"alt","call"),I(tt,"class","w-8 h-8"),I(X,"href",nt="tel:"+t[91].phone),I(Y,"class","p-2 rounded-full bg-green-400"),I(Q,"class","mt-3 ml-2 p-2 fixed rounded-full bg-green-500 shadow-lg"),I(Z,"class","absolute bottom-0 right-0 w-20 h-20")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(r,i),b(r,a),b(r,s),bt&&bt.m(s,null),b(s,u),wt&&wt.m(s,null),b(s,c),_t&&_t.m(s,null),b(n,l),b(n,h),b(h,d),b(d,f),b(f,p),b(e,m),b(e,g),b(g,v),b(v,y),b(e,k),kt&&kt.m(e,null),b(e,T),Et&&Et.m(e,null),w(o,A,_),w(o,N,_),gt(xt,N,null),w(o,L,_),w(o,D,_),b(D,R),Ct.m(R,null),b(R,O),Pt.m(R,null),b(R,B),Lt.m(R,null),b(R,U),Ot.m(R,null),b(R,F),Ft.m(R,null),b(D,j),b(D,q),b(q,$),M($,t[6]),b(q,V),b(q,z),w(o,H,_),w(o,G,_),gt(jt,G,null),w(o,W,_),qt&&qt.m(o,_),w(o,K,_),w(o,Z,_),b(Z,Q),b(Q,Y),b(Y,X),b(X,tt),w(o,it,_),$t&&$t.m(o,_),w(o,ot,_),Vt&&Vt.m(o,_),w(o,at,_),st=!0,dt=[C($,"input",t[70]),C(z,"click",t[34])]},p(t,n){t[4]<3?bt?bt.p(t,n):(bt=Ba(t),bt.c(),bt.m(s,u)):bt&&(bt.d(1),bt=null),t[4]>=3&&t[4]<4?wt?wt.p(t,n):(wt=Ua(t),wt.c(),wt.m(s,c)):wt&&(wt.d(1),wt=null),t[4]>=4?_t?_t.p(t,n):(_t=Fa(t),_t.c(),_t.m(s,null)):_t&&(_t.d(1),_t=null),(!st||536870912&n[2])&&ft!==(ft=t[91].name+"")&&P(p,ft),(!st||536870912&n[2])&&yt!==(yt=t[91].offer+"")&&P(y,yt),t[91].owner==t[1].uid?kt?kt.p(t,n):(kt=ja(t),kt.c(),kt.m(e,T)):kt&&(kt.d(1),kt=null),t[7]?Et?Et.p(t,n):(Et=qa(t),Et.c(),Et.m(e,null)):Et&&(Et.d(1),Et=null);const r={};1073741824&n[2]&&(r.path=t[92].collection("adblocks")),4096&n[0]&&(r.query=t[12]),2&n[0]|536870912&n[2]|8912896&n[3]&&(r.$$scope={dirty:n,ctx:t}),xt.$set(r),Tt===(Tt=St(t))&&Ct?Ct.p(t,n):(Ct.d(1),Ct=Tt(t),Ct&&(Ct.c(),Ct.m(R,O))),At===(At=It(t))&&Pt?Pt.p(t,n):(Pt.d(1),Pt=At(t),Pt&&(Pt.c(),Pt.m(R,B))),Nt===(Nt=Mt(t))&&Lt?Lt.p(t,n):(Lt.d(1),Lt=Nt(t),Lt&&(Lt.c(),Lt.m(R,U))),Rt===(Rt=Dt(t))&&Ot?Ot.p(t,n):(Ot.d(1),Ot=Rt(t),Ot&&(Ot.c(),Ot.m(R,F))),Ut===(Ut=Bt(t))&&Ft?Ft.p(t,n):(Ft.d(1),Ft=Ut(t),Ft&&(Ft.c(),Ft.m(R,null))),64&n[0]&&$.value!==t[6]&&M($,t[6]);const i={};1073741824&n[2]&&(i.path=t[92].collection("reviews")),8192&n[0]&&(i.query=t[13]),2&n[0]|536870912&n[2]|8388864&n[3]&&(i.$$scope={dirty:n,ctx:t}),jt.$set(i),t[91].reception?qt?(qt.p(t,n),lt(qt,1)):(qt=Ts(t),qt.c(),lt(qt,1),qt.m(K.parentNode,K)):qt&&(ut(),ht(qt,1,1,()=>{qt=null}),ct()),(!st||536870912&n[2]&&nt!==(nt="tel:"+t[91].phone))&&I(X,"href",nt),t[20]?$t?$t.p(t,n):($t=Cs(t),$t.c(),$t.m(ot.parentNode,ot)):$t&&($t.d(1),$t=null),t[19]?Vt?(Vt.p(t,n),lt(Vt,1)):(Vt=As(t),Vt.c(),lt(Vt,1),Vt.m(at.parentNode,at)):Vt&&(ut(),ht(Vt,1,1,()=>{Vt=null}),ct())},i(t){st||(lt(xt.$$.fragment,t),lt(jt.$$.fragment,t),lt(qt),J(()=>{rt||(rt=pt(Z,ln,{duration:1e3},!0)),rt.run(1)}),lt(Vt),st=!0)},o(t){ht(xt.$$.fragment,t),ht(jt.$$.fragment,t),ht(qt),rt||(rt=pt(Z,ln,{duration:1e3},!1)),rt.run(0),ht(Vt),st=!1},d(t){t&&_(e),bt&&bt.d(),wt&&wt.d(),_t&&_t.d(),kt&&kt.d(),Et&&Et.d(),t&&_(A),t&&_(N),vt(xt),t&&_(L),t&&_(D),Ct.d(),Pt.d(),Lt.d(),Ot.d(),Ft.d(),t&&_(H),t&&_(G),vt(jt),t&&_(W),qt&&qt.d(t),t&&_(K),t&&_(Z),t&&rt&&rt.end(),t&&_(it),$t&&$t.d(t),t&&_(ot),Vt&&Vt.d(t),t&&_(at),o(dt)}}}function Us(t){let e;const n=new Re({props:{path:`services/${t[0].id}`,$$slots:{default:[Bs,({data:t,ref:e})=>({91:t,92:e}),({data:t,ref:e})=>[0,0,(t?536870912:0)|(e?1073741824:0)]],fallback:[Os,({data:t,ref:e})=>({91:t,92:e}),({data:t,ref:e})=>[0,0,(t?536870912:0)|(e?1073741824:0)]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1&e[0]&&(r.path=`services/${t[0].id}`),536821746&e[0]|1610612736&e[2]|8388608&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Fs(t){let e;const n=new me({props:{$$slots:{default:[Us,({user:t})=>({90:t}),({user:t})=>[0,0,t?268435456:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};536821747&e[0]|8388608&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function js(t){let e,n,r,i,a,s,u,c,l,h,d,f;return{c(){e=E("div"),n=E("div"),r=E("p"),i=E("input"),a=S(),s=E("p"),u=E("button"),u.textContent="Отмена",c=S(),l=E("button"),l.textContent="Отправить",I(i,"type","text"),I(i,"placeholder","Ответ"),I(i,"class","svelte-1rqnpkw"),I(r,"class","text-center"),I(u,"class","btn-gray"),I(l,"class","btn-orange"),I(s,"class","mt-2 text-center"),I(n,"class","p-3 border bg-white rounded-lg shadow-lg"),I(e,"id","replyReviewBox"),I(e,"class"," fixed top-0 svelte-1rqnpkw")},m(o,h){w(o,e,h),b(e,n),b(n,r),b(r,i),M(i,t[14]),b(n,a),b(n,s),b(s,u),b(s,c),b(s,l),d=!0,f=[C(i,"input",t[86]),C(u,"click",t[87]),C(l,"click",t[88])]},p(t,e){16384&e[0]&&i.value!==t[14]&&M(i,t[14])},i(t){d||(J(()=>{h||(h=pt(n,sn,{duration:200},!0)),h.run(1)}),d=!0)},o(t){h||(h=pt(n,sn,{duration:200},!1)),h.run(0),d=!1},d(t){t&&_(e),t&&h&&h.end(),o(f)}}}function qs(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=E("div"),n=E("div"),r=E("p"),i=x(t[3]),o=S(),a=E("p"),s=E("button"),s.textContent="Ок",I(r,"class","text-center"),I(s,"class","btn-orange"),I(a,"class","mt-2 text-center"),I(n,"class","p-3 border bg-white rounded-lg shadow-lg"),I(e,"id","alertBox"),I(e,"class"," fixed top-0 svelte-1rqnpkw")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=C(s,"click",t[89])},p(t,e){(!c||8&e[0])&&P(i,t[3])},i(t){c||(J(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function $s(t){let e,n,r,i,o;const a=new Qt({props:{firebase:Lt,$$slots:{default:[Fs]},$$scope:{ctx:t}}});let s=t[15]&&js(t),u=t[2]&&qs(t);return{c(){e=E("div"),mt(a.$$.fragment),n=S(),s&&s.c(),r=S(),u&&u.c(),i=T(),I(e,"class","mt-16")},m(t,c){w(t,e,c),gt(a,e,null),w(t,n,c),s&&s.m(t,c),w(t,r,c),u&&u.m(t,c),w(t,i,c),o=!0},p(t,e){const n={};536821747&e[0]|8388608&e[3]&&(n.$$scope={dirty:e,ctx:t}),a.$set(n),t[15]?s?(s.p(t,e),lt(s,1)):(s=js(t),s.c(),lt(s,1),s.m(r.parentNode,r)):s&&(ut(),ht(s,1,1,()=>{s=null}),ct()),t[2]?u?(u.p(t,e),lt(u,1)):(u=qs(t),u.c(),lt(u,1),u.m(i.parentNode,i)):u&&(ut(),ht(u,1,1,()=>{u=null}),ct())},i(t){o||(lt(a.$$.fragment,t),lt(s),lt(u),o=!0)},o(t){ht(a.$$.fragment,t),ht(s),ht(u),o=!1},d(t){t&&_(e),vt(a),t&&_(n),s&&s.d(t),t&&_(r),u&&u.d(t),t&&_(i)}}}const Vs=t=>t.orderBy("time");function zs(t,e,n){let r,i,o,a,{params:s={}}=e,u=Gt.ref();function c(t){i||(n(3,o=t),n(2,i=!0)),setTimeout(()=>{n(2,i=!1)},5e3)}Lt.auth().onAuthStateChanged((function(t){t?n(1,r=t):console.log("no user login")}));let l,h,d,f=0,p="",m="Заголовок",g="Описание",v=t=>t.orderBy("desc").limit(1);function y(t){n(12,v=e=>e.orderBy("desc").startAfter(t.desc).limit(1))}let b=t=>t.orderBy("date","desc").limit(3);function w(t){n(13,b=e=>e.orderBy("date","desc").startAfter(t.date).limit(3))}function _(){let t=[];Ht.collection(`services/${s.id}/reviews`).get().then((function(e){e.forEach((function(e){let n=e.data();t.push(n.rating)}));let r=t.reduce((t,e)=>t+e,0)/t.length;n(4,a=Math.trunc(10*r)/10)}))}function k(t,e){t.stopPropagation(),t.preventDefault();let r=t.target.files[0],i={contentType:r.type};u.child(`users/${e}/service/${s.id}/${r.name}`).put(r,i).then((function(t){t.ref.getDownloadURL().then((function(t){console.log("File available at",t),n(9,d=t)}))})).catch((function(t){console.error("Upload failed:",t)}))}_();let E,x,S,T,C="";function I(t){E=t,n(15,x=!0)}function A(){C.length>15?Ht.collection(`services/${s.id}/reviews/${E}/reply`).add({date:Lt.firestore.FieldValue.serverTimestamp(),text:C,owner:r.uid,username:r.displayName}).then((function(){n(15,x=!1),n(14,C=""),c("Спасибо, ответ добавлен!")})).catch((function(t){console.error("Error updating document: ",t)})):c("Слишком короткий ответ!")}let P,M,N,L,D,R,O,B,U=s.date?s.date:null,F=!!s.records;let j=Notification.permission;function q(){Notification.requestPermission().then((function(t){n(28,j=t),"granted"===j&&V()}))}function $(t,e,r,i){new Notification("К вам записались, клиент ждёт подтверждения.",{body:`${t} записался на ${e}`,icon:"./icons/main-logo.png"}).onclick=t=>{n(18,U=r),n(19,F=!0),t.preventDefault(),window.open(`https://avtokarta.club/#/service/${i}/true/${r}`,"_blank")}}function V(){Ht.collection(`services/${s.id}/records`).onSnapshot((function(t){t.docChanges().forEach((function(t){if("added"===t.type){let e=t.doc.data();e.confirmed||$(e.clientname,e.subservice,e.date,s.id)}}))}))}"granted"===j&&V();return t.$set=t=>{"params"in t&&n(0,s=t.params)},[s,r,i,o,a,f,p,l,h,d,m,g,v,b,C,x,S,T,U,F,P,M,N,L,D,R,O,B,j,c,y,w,k,function(){null!=d&&Ht.collection(`services/${s.id}/adblocks`).add({imgURL:d,title:m,desc:g,owner:r.uid}).then((function(){c("Рекламный блок добавлен! Обновите страницу."),n(7,l=!1),n(8,h=!1),n(9,d=null),n(10,m="Заголовок"),n(11,g="Описание")})).catch((function(t){console.error("Error updating document: ",t)}))},function(){if(p.length>15){Ht.collection(`services/${s.id}/reviews`).where("owner","==",r.uid).get().then((function(t){t.empty?Ht.collection(`services/${s.id}/reviews`).add({date:Lt.firestore.FieldValue.serverTimestamp(),text:p,rating:f,owner:r.uid,username:r.displayName}).then((function(){n(5,f=0),n(6,p=""),c("Спасибо, отзыв добавлен!")})).catch((function(t){console.error("Error updating document: ",t)})):c("Отзыв можно оставить после оплаты услуг сервиса, но только один отзыв разрешается написать без оплаты.")})).catch((function(t){console.log("Error getting documents: ",t)}))}else c("Слишком короткий отзыв!")},I,A,function(){D&&R&&O&&null!=B?Ht.collection(`services/${s.id}/records`).add({clientname:r.displayName,clientUID:r.uid,subservice:D,date:R,time:O,desc:B}).then((function(t){n(20,P=!1),c("Вы записаны, ждите ответа мастера.")})).catch((function(t){c("Ошибка.")})):c("Заполните все поля.")},q,E,u,void 0,_,$,V,()=>n(7,l=!l),()=>n(19,F=!F),()=>n(21,M=!M),t=>t.update({reception:!1}),t=>t.update({reception:!0}),()=>q(),()=>n(22,N=!N),function(){L=this.value,n(23,L)},t=>t.update({subServices:Lt.firestore.FieldValue.arrayUnion(L)}).then(()=>c("Услуга добавлена.")),()=>n(8,h=!h),(t,e)=>k(e,t.uid),function(){m=this.value,n(10,m)},function(){g=this.value,n(11,g)},t=>t.ref.delete(),t=>y(t),()=>n(5,f=1),()=>n(5,f=1),()=>n(5,f=2),()=>n(5,f=2),()=>n(5,f=3),()=>n(5,f=3),()=>n(5,f=4),()=>n(5,f=4),()=>n(5,f=5),()=>n(5,f=5),function(){p=this.value,n(6,p)},t=>I(t.id),t=>w(t),()=>n(20,P=!0),t=>n(24,D=t.target.value),function(){R=this.value,n(25,R)},function(){O=this.value,n(26,O)},function(){B=this.value,n(27,B)},()=>n(20,P=!1),function(){U=this.value,n(18,U)},()=>n(17,T=!T),function(){S=this.value,n(16,S)},t=>t.ref.update({time:S}).then(c("Время изменено.")),t=>t.ref.update({confirmed:!0}).then(c("Принято.")),t=>t.ref.delete().then(c("Отменено.")),()=>n(19,F=!1),function(){C=this.value,n(14,C)},()=>n(15,x=!1),()=>A(),()=>n(2,i=!1)]}var Hs=xt(St((function(t,e){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(!s&&Et)return Et();if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){return i(e[a][1][t]||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var o=Et,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.version="4.0.46"},{}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./utils/properties"),i=(o.isSigner=function(t){return r.isType(t,"Signer")},o);function o(){r.setType(this,"Signer")}n.Signer=i},{"./utils/properties":74}],3:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./utils/bignumber");n.AddressZero="0x0000000000000000000000000000000000000000",n.HashZero="0x0000000000000000000000000000000000000000000000000000000000000000",n.EtherSymbol="Ξ";var i=r.bigNumberify(-1);n.NegativeOne=i;var o=r.bigNumberify(0);n.Zero=o;var a=r.bigNumberify(1);n.One=a;var s=r.bigNumberify(2);n.Two=s;var u=r.bigNumberify("1000000000000000000");n.WeiPerEther=u;var c=r.bigNumberify("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");n.MaxUint256=c},{"./utils/bignumber":63}],4:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("./constants"),u=o(t("./errors")),c=t("./utils/abi-coder"),l=t("./utils/address"),h=t("./utils/bignumber"),d=t("./utils/bytes"),f=t("./utils/interface"),p=t("./utils/properties"),m=t("./providers/abstract-provider"),g=t("./abstract-signer"),v=(i(y,a=g.Signer),y.prototype.getAddress=function(){return Promise.resolve(this.address)},y.prototype._fail=function(t,e){return Promise.resolve().then((function(){u.throwError(t,u.UNSUPPORTED_OPERATION,{operation:e})}))},y.prototype.signMessage=function(t){return this._fail("VoidSigner cannot sign messages","signMessage")},y.prototype.sendTransaction=function(t){return this._fail("VoidSigner cannot sign transactions","sendTransaction")},y.prototype.connect=function(t){return new y(this.address,t)},y);function y(t,e){var n=a.call(this)||this;return p.defineReadOnly(n,"address",t),p.defineReadOnly(n,"provider",e),n}n.VoidSigner=v;var b={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};function w(t,e,n){var r=t.interface.functions[e];return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o={},a=null;if(e.length===r.inputs.length+1&&"object"==typeof e[e.length-1])for(var l in null!=(o=p.shallowCopy(e.pop())).blockTag&&(a=o.blockTag),delete o.blockTag,o)if(!b[l])throw new Error("unknown transaction override "+l);if(e.length!=r.inputs.length)throw new Error("incorrect number of arguments");return["data","to"].forEach((function(t){null!=o[t]&&u.throwError("cannot override "+t,u.UNSUPPORTED_OPERATION,{operation:t})})),o.to=t._deployed(a).then((function(){return t.addressPromise})),function t(e,n,r){if(Array.isArray(r)){var i=[];return r.forEach((function(r,o){var a;a=Array.isArray(n)?n[o]:n[r.name],i.push(t(e,a,r))})),Promise.all(i)}if("address"===r.type)return e.resolveName(n);if("tuple"===r.type)return t(e,n,r.components);var o=r.type.match(/(.*)(\[[0-9]*\]$)/);if(o){if(!Array.isArray(n))throw new Error("invalid value for array");var a=[],s={components:r.components,type:o[1]};return n.forEach((function(n){a.push(t(e,n,s))})),Promise.all(a)}return Promise.resolve(n)}(t.provider,e,r.inputs).then((function(e){if(o.data=r.encode(e),"call"===r.type)return n?Promise.resolve(s.Zero):(t.provider||u.throwError("call (constant functions) require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"call"}),["gasLimit","gasPrice","value"].forEach((function(t){if(null!=o[t])throw new Error("call cannot override "+t)})),null==o.from&&t.signer&&(o.from=t.signer.getAddress()),t.provider.call(o,a).then((function(n){if(d.hexDataLength(n)%32==4&&"0x08c379a0"===d.hexDataSlice(n,0,4)){var i=c.defaultAbiCoder.decode(["string"],d.hexDataSlice(n,4));u.throwError("call revert exception",u.CALL_EXCEPTION,{address:t.address,args:e,method:r.signature,errorSignature:"Error(string)",errorArgs:[i],reason:i,transaction:o})}try{var a=r.decode(n);return 1===r.outputs.length&&(a=a[0]),a}catch(i){throw"0x"===n&&0<r.outputs.length&&u.throwError("call exception",u.CALL_EXCEPTION,{address:t.address,method:r.signature,args:e}),i}})));if("transaction"===r.type)return n?(t.provider||u.throwError("estimate gas require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"estimateGas"}),null==o.from&&t.signer&&(o.from=t.signer.getAddress()),t.provider.estimateGas(o)):(null==o.gasLimit&&null!=r.gas&&(o.gasLimit=h.bigNumberify(r.gas).add(21e3)),t.signer||u.throwError("sending a transaction requires a signer",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=o.from&&u.throwError("cannot override from in a transaction",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.signer.sendTransaction(o).then((function(e){var n=e.wait.bind(e);return e.wait=function(e){return n(e).then((function(e){return e.events=e.logs.map((function(n){var r=p.deepCopy(n),i=t.interface.parseLog(n);return i&&(r.args=i.values,r.decode=i.decode,r.event=i.name,r.eventSignature=i.signature),r.removeListener=function(){return t.provider},r.getBlock=function(){return t.provider.getBlock(e.blockHash)},r.getTransaction=function(){return t.provider.getTransaction(e.transactionHash)},r.getTransactionReceipt=function(){return Promise.resolve(e)},r})),e}))},e})));throw new Error("invalid type - "+r.type)}))}}function _(t){return!t.address||null!=t.topics&&0!==t.topics.length?(t.address||"*")+"@"+(t.topics?t.topics.join(":"):""):"*"}var k=(E.prototype.deployed=function(){return this._deployed()},E.prototype._deployed=function(t){var e=this;return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((function(){return e})):this._deployedPromise=this.provider.getCode(this.address,t).then((function(t){return"0x"===t&&u.throwError("contract not deployed",u.UNSUPPORTED_OPERATION,{contractAddress:e.address,operation:"getDeployed"}),e}))),this._deployedPromise},E.prototype.fallback=function(t){var e=this;this.signer||u.throwError("sending a transaction requires a signer",u.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});var n=p.shallowCopy(t||{});return["from","to"].forEach((function(t){null!=n[t]&&u.throwError("cannot override "+t,u.UNSUPPORTED_OPERATION,{operation:t})})),n.to=this.addressPromise,this.deployed().then((function(){return e.signer.sendTransaction(n)}))},E.prototype.connect=function(t){"string"==typeof t&&(t=new v(t,this.provider));var e=new E(this.address,this.interface,t);return this.deployTransaction&&p.defineReadOnly(e,"deployTransaction",this.deployTransaction),e},E.prototype.attach=function(t){return new E(t,this.interface,this.signer||this.provider)},E.isIndexed=function(t){return f.Interface.isIndexed(t)},E.prototype._getEventFilter=function(t){var e=this;if("string"==typeof t){if("*"===t)return{prepareEvent:function(t){var n=e.interface.parseLog(t);return n&&(t.args=n.values,t.decode=n.decode,t.event=n.name,t.eventSignature=n.signature),[t]},eventTag:"*",filter:{address:this.address}};-1!==t.indexOf("(")&&(t=c.formatSignature(c.parseSignature("event "+t)));var n=this.interface.events[t];n||u.throwError("unknown event - "+t,u.INVALID_ARGUMENT,{argumnet:"eventName",value:t});var r={address:this.address,topics:[n.topic]};return{prepareEvent:function(t){var e=n.decode(t.data,t.topics);t.args=e;var r=Array.prototype.slice.call(e);return r.push(t),r},event:n,eventTag:_(r),filter:r}}var i={address:this.address},o=null;if(t.topics&&t.topics[0])for(var a in i.topics=t.topics,this.interface.events)if(-1!==a.indexOf("(")){var s=this.interface.events[a];if(s.topic===t.topics[0].toLowerCase()){o=s;break}}return{prepareEvent:function(t){if(!o)return[t];var e=o.decode(t.data,t.topics);t.args=e;var n=Array.prototype.slice.call(e);return n.push(t),n},event:o,eventTag:_(i),filter:i}},E.prototype._addEventListener=function(t,e,n){var r=this;function i(n){var i=p.deepCopy(n),o=t.prepareEvent(i);t.event&&(i.decode=t.event.decode,i.event=t.event.name,i.eventSignature=t.event.signature),i.removeListener=function(){r.removeListener(t.filter,e)},i.getBlock=function(){return r.provider.getBlock(n.blockHash)},i.getTransaction=function(){return r.provider.getTransaction(n.transactionHash)},i.getTransactionReceipt=function(){return r.provider.getTransactionReceipt(n.transactionHash)},r.emit.apply(r,[t.filter].concat(o))}this.provider||u.throwError("events require a provider or a signer with a provider",u.UNSUPPORTED_OPERATION,{operation:"once"}),this.provider.on(t.filter,i),this._events.push({eventFilter:t,listener:e,wrappedListener:i,once:n})},E.prototype.on=function(t,e){return this._addEventListener(this._getEventFilter(t),e,!1),this},E.prototype.once=function(t,e){return this._addEventListener(this._getEventFilter(t),e,!0),this},E.prototype.addListener=function(t,e){return this.on(t,e)},E.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.provider)return!1;var i=!1,o=this._getEventFilter(t);return this._events=this._events.filter((function(t){return t.eventFilter.eventTag!==o.eventTag||(setTimeout((function(){t.listener.apply(e,n)}),0),i=!0,!t.once)})),i},E.prototype.listenerCount=function(t){if(!this.provider)return 0;var e=this._getEventFilter(t);return this._events.filter((function(t){return t.eventFilter.eventTag===e.eventTag})).length},E.prototype.listeners=function(t){if(!this.provider)return[];var e=this._getEventFilter(t);return this._events.filter((function(t){return t.eventFilter.eventTag===e.eventTag})).map((function(t){return t.listener}))},E.prototype.removeAllListeners=function(t){var e=this;if(!this.provider)return this;var n=this._getEventFilter(t);return this._events=this._events.filter((function(t){return t.eventFilter.eventTag!==n.eventTag||(e.provider.removeListener(t.eventFilter.filter,t.wrappedListener),!1)})),this},E.prototype.removeListener=function(t,e){var n=this;if(!this.provider)return this;var r=!1,i=this._getEventFilter(t);return this._events=this._events.filter((function(t){return t.eventFilter.eventTag!==i.eventTag||t.listener!==e||(n.provider.removeListener(t.eventFilter.filter,t.wrappedListener),!!r||!(r=!0))})),this},E);function E(t,e,n){var r=this;if(u.checkNew(this,E),f.Interface.isInterface(e)?p.defineReadOnly(this,"interface",e):p.defineReadOnly(this,"interface",new f.Interface(e)),g.Signer.isSigner(n)?(p.defineReadOnly(this,"provider",n.provider),p.defineReadOnly(this,"signer",n)):m.Provider.isProvider(n)?(p.defineReadOnly(this,"provider",n),p.defineReadOnly(this,"signer",null)):u.throwError("invalid signer or provider",u.INVALID_ARGUMENT,{arg:"signerOrProvider",value:n}),p.defineReadOnly(this,"estimate",{}),p.defineReadOnly(this,"functions",{}),p.defineReadOnly(this,"filters",{}),Object.keys(this.interface.events).forEach((function(t){var e=r.interface.events[t];p.defineReadOnly(r.filters,t,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return{address:r.address,topics:e.encodeTopics(t)}}))})),this._events=[],p.defineReadOnly(this,"address",t),this.provider)p.defineReadOnly(this,"addressPromise",this.provider.resolveName(t).then((function(t){if(null==t)throw new Error("name not found");return t})).catch((function(t){throw t})));else try{p.defineReadOnly(this,"addressPromise",Promise.resolve(l.getAddress(t)))}catch(e){u.throwError("provider is required to use non-address contract address",u.INVALID_ARGUMENT,{argument:"addressOrName",value:t})}Object.keys(this.interface.functions).forEach((function(t){var e=w(r,t,!1);null==r[t]?p.defineReadOnly(r,t,e):u.warn("WARNING: Multiple definitions for "+t),null==r.functions[t]&&(p.defineReadOnly(r.functions,t,e),p.defineReadOnly(r.estimate,t,w(r,t,!0)))}))}n.Contract=k;var x=(S.prototype.getDeployTransaction=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={};if(t.length===this.interface.deployFunction.inputs.length+1)for(var r in n=p.shallowCopy(t.pop()))if(!b[r])throw new Error("unknown transaction override "+r);return["data","from","to"].forEach((function(t){null!=n[t]&&u.throwError("cannot override "+t,u.UNSUPPORTED_OPERATION,{operation:t})})),u.checkArgumentCount(t.length,this.interface.deployFunction.inputs.length," in Contract constructor"),n.data=this.interface.deployFunction.encode(this.bytecode,t),n},S.prototype.deploy=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.getDeployTransaction.apply(this,e);return this.signer.sendTransaction(r).then((function(e){var n=new k(l.getContractAddress(e),t.interface,t.signer);return p.defineReadOnly(n,"deployTransaction",e),n}))},S.prototype.attach=function(t){return new k(t,this.interface,this.signer)},S.prototype.connect=function(t){return new S(this.interface,this.bytecode,t)},S.fromSolidity=function(t,e){null==t&&u.throwError("missing compiler output",u.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof t&&(t=JSON.parse(t));var n=t.abi,r=null;return t.bytecode?r=t.bytecode:t.evm&&t.evm.bytecode&&(r=t.evm.bytecode),new S(n,r,e)},S);function S(t,e,n){var r=null;"string"==typeof e?r=e:d.isArrayish(e)?r=d.hexlify(e):"string"==typeof e.object?r=e.object:u.throwError("bytecode must be a valid hex string",u.INVALID_ARGUMENT,{arg:"bytecode",value:e}),"0x"!==r.substring(0,2)&&(r="0x"+r),d.isHexString(r)||u.throwError("bytecode must be a valid hex string",u.INVALID_ARGUMENT,{arg:"bytecode",value:e}),r.length%2!=0&&u.throwError("bytecode must be valid data (even length)",u.INVALID_ARGUMENT,{arg:"bytecode",value:e}),p.defineReadOnly(this,"bytecode",r),f.Interface.isInterface(t)?p.defineReadOnly(this,"interface",t):p.defineReadOnly(this,"interface",new f.Interface(t)),n&&!g.Signer.isSigner(n)&&u.throwError("invalid signer",u.INVALID_ARGUMENT,{arg:"signer",value:null}),p.defineReadOnly(this,"signer",n||null)}n.ContractFactory=x},{"./abstract-signer":2,"./constants":3,"./errors":5,"./providers/abstract-provider":50,"./utils/abi-coder":59,"./utils/address":60,"./utils/bignumber":63,"./utils/bytes":64,"./utils/interface":69,"./utils/properties":74}],5:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./_version");n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.MISSING_NEW="MISSING_NEW",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.NUMERIC_FAULT="NUMERIC_FAULT",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED";var i=!(n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION"),o=!1;function a(t,e,i){if(o)throw new Error("unknown error");e=e||n.UNKNOWN_ERROR,i=i||{};var a=[];Object.keys(i).forEach((function(t){try{a.push(t+"="+JSON.stringify(i[t]))}catch(e){a.push(t+"="+JSON.stringify(i[t].toString()))}})),a.push("version="+r.version);var s=t;a.length&&(t+=" ("+a.join(", ")+")");var u=new Error(t);throw u.reason=s,u.code=e,Object.keys(i).forEach((function(t){u[t]=i[t]})),u}n.throwError=a,n.checkNew=function(t,e){t instanceof e||a("missing new",n.MISSING_NEW,{name:e.name})},n.checkArgumentCount=function(t,e,r){r=r||"",t<e&&a("missing argument"+r,n.MISSING_ARGUMENT,{count:t,expectedCount:e}),e<t&&a("too many arguments"+r,n.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})},n.setCensorship=function(t,e){i&&a("error censorship permanent",n.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),o=!!t,i=!!e},n.checkNormalize=function(){try{if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{"test".normalize(t)}catch(e){throw new Error("missing "+t)}})),String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){a("platform missing String.prototype.normalize",n.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:t.message})}};var s={debug:1,default:2,info:2,warn:3,error:4,off:5},u=s.default;function c(t,e){u>s[t]||console.log.apply(console,e)}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c("warn",t)}n.setLogLevel=function(t){var e=s[t];null!=e?u=e:l("invliad log level - "+t)},n.warn=l,n.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c("info",t)}},{"./_version":1}],6:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./contract");n.Contract=i.Contract,n.ContractFactory=i.ContractFactory,n.VoidSigner=i.VoidSigner;var o=t("./abstract-signer");n.Signer=o.Signer;var a=t("./wallet");n.Wallet=a.Wallet;var s=r(t("./constants"));n.constants=s;var u=r(t("./errors"));n.errors=u;var c=r(t("./providers"));n.providers=c;var l=r(t("./utils"));n.utils=l;var h=r(t("./wordlists"));n.wordlists=h;var d=t("./utils/shims");n.platform=d.platform;var f=t("./_version");n.version=f.version,n.getDefaultProvider=function(t){null==t&&(t="homestead");var e=l.getNetwork(t);return e&&e._defaultProvider||u.throwError("unsupported getDefaultProvider network",u.UNSUPPORTED_OPERATION,{operation:"getDefaultProvider",network:t}),e._defaultProvider(c)}},{"./_version":1,"./abstract-signer":2,"./constants":3,"./contract":4,"./errors":5,"./providers":54,"./utils":68,"./utils/shims":80,"./wallet":88,"./wordlists":89}],7:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("./ethers"));n.ethers=i,function(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}(t("./ethers"))},{"./ethers":6}],8:[function(t,e,n){!function(t){function r(t){return parseInt(t)===t}function i(t){if(!r(t.length))return!1;for(var e=0;e<t.length;e++)if(!r(t[e])||t[e]<0||255<t[e])return!1;return!0}function o(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!i(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(r(t.length)&&i(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function a(t){return new Uint8Array(t)}function s(t,e,n,r,i){null==r&&null==i||(t=t.slice?t.slice(r,i):Array.prototype.slice.call(t,r,i)),e.set(t,n)}var u,c={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var r=t.charCodeAt(n++);37===r?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(r)}return o(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var r=t[n];r<128?(e.push(String.fromCharCode(r)),n++):191<r&&r<224?(e.push(String.fromCharCode((31&r)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&r)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},l=(u="0123456789abcdef",{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(u[(240&r)>>4]+u[15&r])}return e.join("")}}),h={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],p=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],g=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],v=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],b=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],w=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],_=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],k=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],E=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],x=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],T=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function C(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var I=function(t){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:o(t,!0)}),this._prepare()};I.prototype._prepare=function(){var t=h[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,r=4*(t+1),i=this.key.length/4,o=C(this.key);for(e=0;e<i;e++)n=e>>2,this._Ke[n][e%4]=o[e],this._Kd[t-n][e%4]=o[e];for(var a,s=0,u=i;u<r;){if(a=o[i-1],o[0]^=f[a>>16&255]<<24^f[a>>8&255]<<16^f[255&a]<<8^f[a>>24&255]^d[s]<<24,s+=1,8!=i)for(e=1;e<i;e++)o[e]^=o[e-1];else{for(e=1;e<i/2;e++)o[e]^=o[e-1];for(a=o[i/2-1],o[i/2]^=f[255&a]^f[a>>8&255]<<8^f[a>>16&255]<<16^f[a>>24&255]<<24,e=i/2+1;e<i;e++)o[e]^=o[e-1]}for(e=0;e<i&&u<r;)c=u>>2,l=u%4,this._Ke[c][l]=o[e],this._Kd[t-c][l]=o[e++],u++}for(var c=1;c<t;c++)for(var l=0;l<4;l++)a=this._Kd[c][l],this._Kd[c][l]=E[a>>24&255]^x[a>>16&255]^S[a>>8&255]^T[255&a]},I.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],r=C(t),i=0;i<4;i++)r[i]^=this._Ke[0][i];for(var o=1;o<e;o++){for(i=0;i<4;i++)n[i]=m[r[i]>>24&255]^g[r[(i+1)%4]>>16&255]^v[r[(i+2)%4]>>8&255]^y[255&r[(i+3)%4]]^this._Ke[o][i];r=n.slice()}var s,u=a(16);for(i=0;i<4;i++)s=this._Ke[e][i],u[4*i]=255&(f[r[i]>>24&255]^s>>24),u[4*i+1]=255&(f[r[(i+1)%4]>>16&255]^s>>16),u[4*i+2]=255&(f[r[(i+2)%4]>>8&255]^s>>8),u[4*i+3]=255&(f[255&r[(i+3)%4]]^s);return u},I.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],r=C(t),i=0;i<4;i++)r[i]^=this._Kd[0][i];for(var o=1;o<e;o++){for(i=0;i<4;i++)n[i]=b[r[i]>>24&255]^w[r[(i+3)%4]>>16&255]^_[r[(i+2)%4]>>8&255]^k[255&r[(i+1)%4]]^this._Kd[o][i];r=n.slice()}var s,u=a(16);for(i=0;i<4;i++)s=this._Kd[e][i],u[4*i]=255&(p[r[i]>>24&255]^s>>24),u[4*i+1]=255&(p[r[(i+3)%4]>>16&255]^s>>16),u[4*i+2]=255&(p[r[(i+2)%4]>>8&255]^s>>8),u[4*i+3]=255&(p[255&r[(i+1)%4]]^s);return u};var A=function(t){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new I(t)};A.prototype.encrypt=function(t){if((t=o(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),r=0;r<t.length;r+=16)s(t,n,0,r,r+16),s(n=this._aes.encrypt(n),e,r);return e},A.prototype.decrypt=function(t){if((t=o(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),r=0;r<t.length;r+=16)s(t,n,0,r,r+16),s(n=this._aes.decrypt(n),e,r);return e};var P=function(t,e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=a(16);this._lastCipherblock=o(e,!0),this._aes=new I(t)};P.prototype.encrypt=function(t){if((t=o(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),r=0;r<t.length;r+=16){s(t,n,0,r,r+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),s(this._lastCipherblock,e,r)}return e},P.prototype.decrypt=function(t){if((t=o(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),r=0;r<t.length;r+=16){s(t,n,0,r,r+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)e[r+i]=n[i]^this._lastCipherblock[i];s(t,this._lastCipherblock,0,r,r+16)}return e};var M=function(t,e,n){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=a(16);n=n||1,this.segmentSize=n,this._shiftRegister=o(e,!0),this._aes=new I(t)};M.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=o(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)n[r+i]^=e[i];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n},M.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=o(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)n[r+i]^=e[i];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(t,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n};var N=function(t,e){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=a(16);this._lastPrecipher=o(e,!0),this._lastPrecipherIndex=16,this._aes=new I(t)};N.prototype.encrypt=function(t){for(var e=o(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},N.prototype.decrypt=N.prototype.encrypt;var L=function(t){if(!(this instanceof L))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=a(16),this.setValue(t)):this.setBytes(t)};L.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");for(var e=15;0<=e;--e)this._counter[e]=t%256,t>>=8},L.prototype.setBytes=function(t){if(16!=(t=o(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},L.prototype.increment=function(){for(var t=15;0<=t;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var D=function(t,e){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof L||(e=new L(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new I(t)};D.prototype.encrypt=function(t){for(var e=o(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},D.prototype.decrypt=D.prototype.encrypt;var R={AES:I,Counter:L,ModeOfOperation:{ecb:A,cbc:P,cfb:M,ofb:N,ctr:D},utils:{hex:l,utf8:c},padding:{pkcs7:{pad:function(t){var e=16-(t=o(t,!0)).length%16,n=a(t.length+e);s(t,n);for(var r=t.length;r<n.length;r++)n[r]=e;return n},strip:function(t){if((t=o(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(16<e)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,r=0;r<e;r++)if(t[n+r]!==e)throw new Error("PKCS#7 invalid padding byte");var i=a(n);return s(t,i,0,0,n),i}}},_arrayTest:{coerceArray:o,createArray:a,copyArray:s}};void 0!==n?e.exports=R:(t.aesjs&&(R._aesjs=t.aesjs),t.aesjs=R)}(this)},{}],9:[function(t,e,n){!function(e,n){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){function n(){}t.super_=e,n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,(this.red=null)!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var a;"object"==typeof e?e.exports=o:n.BN=o,(o.BN=o).wordSize=26;try{a=t("buffer").Buffer}catch(e){}function s(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var a=t.charCodeAt(o)-48;r<<=4,r|=49<=a&&a<=54?a-49+10:17<=a&&a<=22?a-17+10:15&a}return r}function u(t,e,n,r){for(var i=0,o=Math.min(t.length,n),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=r,i+=49<=s?s-49+10:17<=s?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return 0<t.cmp(e)?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&2<=e&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=t.length-1,o=0;0<=i;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,26<=(s+=24)&&(s-=26,o++);else if("le"===n)for(o=i=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,26<=(s+=24)&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;e<=n;n-=6)i=s(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,26<=(o+=24)&&(o-=26,r++);n+6!==e&&(i=s(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0];for(var r=0,i=this.length=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,c=0,l=n;l<s;l+=r)c=u(t,l,l+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!=a){var h=1;for(c=u(t,l,t.length,e),l=0;l<a;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;r=(n.length=r)-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(a=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);n=0!=(o=s>>>24-i&16777215)||a!==this.length-1?c[6-u.length]+u+n:u+n,26<=(i+=2)&&(i-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&2<=t&&t<=36){var d=l[t],f=h[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(t);n=(p=p.idivn(f)).isZero()?m+n:c[d-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(0<o,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,c=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var e=t,n=0;return 4096<=e&&(n+=13,e>>>=13),64<=e&&(n+=7,e>>>=7),8<=e&&(n+=4,e>>>=4),2<=e&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;n=this.length>t.length?(e=this,t):(e=t,this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&0<=t);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),0<n&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return 0<n&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&0<=t);var n=t/26|0,i=t%26;return this._expand(1+n),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();r=this.length>t.length?(n=this,t):(n=t,this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;r=0<i?(n=this,t):(n=t,this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,c=0,l=0|a[0],h=8191&l,d=l>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],v=8191&g,y=g>>>13,b=0|a[3],w=8191&b,_=b>>>13,k=0|a[4],E=8191&k,x=k>>>13,S=0|a[5],T=8191&S,C=S>>>13,I=0|a[6],A=8191&I,P=I>>>13,M=0|a[7],N=8191&M,L=M>>>13,D=0|a[8],R=8191&D,O=D>>>13,B=0|a[9],U=8191&B,F=B>>>13,j=0|s[0],q=8191&j,$=j>>>13,V=0|s[1],z=8191&V,H=V>>>13,G=0|s[2],W=8191&G,K=G>>>13,Z=0|s[3],Q=8191&Z,Y=Z>>>13,X=0|s[4],J=8191&X,tt=X>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,ct=st>>>13,lt=0|s[8],ht=8191&lt,dt=lt>>>13,ft=0|s[9],pt=8191&ft,mt=ft>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,$))+Math.imul(d,q)|0))<<13)|0;c=((o=Math.imul(d,$))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,$))+Math.imul(m,q)|0,o=Math.imul(m,$);var vt=(c+(r=r+Math.imul(h,z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(d,z)|0))<<13)|0;c=((o=o+Math.imul(d,H)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,q),i=(i=Math.imul(v,$))+Math.imul(y,q)|0,o=Math.imul(y,$),r=r+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var yt=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,$))+Math.imul(_,q)|0,o=Math.imul(_,$),r=r+Math.imul(v,z)|0,i=(i=i+Math.imul(v,H)|0)+Math.imul(y,z)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,K)|0;var bt=(c+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(E,q),i=(i=Math.imul(E,$))+Math.imul(x,q)|0,o=Math.imul(x,$),r=r+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(v,W)|0,i=(i=i+Math.imul(v,K)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,K)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,Y)|0;var wt=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,$))+Math.imul(C,q)|0,o=Math.imul(C,$),r=r+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,K)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,K)|0,r=r+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,tt)|0;var _t=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(d,nt)|0))<<13)|0;c=((o=o+Math.imul(d,rt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(A,q),i=(i=Math.imul(A,$))+Math.imul(P,q)|0,o=Math.imul(P,$),r=r+Math.imul(T,z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(C,z)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(E,W)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,K)|0,r=r+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(v,J)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0;var kt=(c+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(d,ot)|0))<<13)|0;c=((o=o+Math.imul(d,at)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(N,q),i=(i=Math.imul(N,$))+Math.imul(L,q)|0,o=Math.imul(L,$),r=r+Math.imul(A,z)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(P,z)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,K)|0,r=r+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,Y)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(v,nt)|0,i=(i=i+Math.imul(v,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Et=(c+(r=r+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(d,ut)|0))<<13)|0;c=((o=o+Math.imul(d,ct)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(R,q),i=(i=Math.imul(R,$))+Math.imul(O,q)|0,o=Math.imul(O,$),r=r+Math.imul(N,z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(L,z)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(A,W)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,K)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(E,J)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,tt)|0,r=r+Math.imul(w,nt)|0,i=(i=i+Math.imul(w,rt)|0)+Math.imul(_,nt)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(v,ot)|0,i=(i=i+Math.imul(v,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ct)|0;var xt=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,dt)|0)+Math.imul(d,ht)|0))<<13)|0;c=((o=o+Math.imul(d,dt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,q),i=(i=Math.imul(U,$))+Math.imul(F,q)|0,o=Math.imul(F,$),r=r+Math.imul(R,z)|0,i=(i=i+Math.imul(R,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,K)|0,r=r+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,Y)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,tt)|0,r=r+Math.imul(E,nt)|0,i=(i=i+Math.imul(E,rt)|0)+Math.imul(x,nt)|0,o=o+Math.imul(x,rt)|0,r=r+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,at)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,r=r+Math.imul(v,ut)|0,i=(i=i+Math.imul(v,ct)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,dt)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,dt)|0;var St=(c+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((o=o+Math.imul(d,mt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(F,z)|0,o=Math.imul(F,H),r=r+Math.imul(R,W)|0,i=(i=i+Math.imul(R,K)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,K)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,rt)|0,r=r+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,at)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,at)|0,r=r+Math.imul(w,ut)|0,i=(i=i+Math.imul(w,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,r=r+Math.imul(v,ht)|0,i=(i=i+Math.imul(v,dt)|0)+Math.imul(y,ht)|0,o=o+Math.imul(y,dt)|0;var Tt=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;c=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,W),i=(i=Math.imul(U,K))+Math.imul(F,W)|0,o=Math.imul(F,K),r=r+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,Y)|0,r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,r=r+Math.imul(E,ut)|0,i=(i=i+Math.imul(E,ct)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,ct)|0,r=r+Math.imul(w,ht)|0,i=(i=i+Math.imul(w,dt)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,dt)|0;var Ct=(c+(r=r+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,mt)|0)+Math.imul(y,pt)|0))<<13)|0;c=((o=o+Math.imul(y,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,Q),i=(i=Math.imul(U,Y))+Math.imul(F,Q)|0,o=Math.imul(F,Y),r=r+Math.imul(R,J)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(O,J)|0,o=o+Math.imul(O,tt)|0,r=r+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,r=r+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,r=r+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,dt)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,dt)|0;var It=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,J),i=(i=Math.imul(U,tt))+Math.imul(F,J)|0,o=Math.imul(F,tt),r=r+Math.imul(R,nt)|0,i=(i=i+Math.imul(R,rt)|0)+Math.imul(O,nt)|0,o=o+Math.imul(O,rt)|0,r=r+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,dt)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,dt)|0;var At=(c+(r=r+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(x,pt)|0))<<13)|0;c=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,nt),i=(i=Math.imul(U,rt))+Math.imul(F,nt)|0,o=Math.imul(F,rt),r=r+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,at)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,at)|0,r=r+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,ct)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ct)|0,r=r+Math.imul(A,ht)|0,i=(i=i+Math.imul(A,dt)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,dt)|0;var Pt=(c+(r=r+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(C,pt)|0))<<13)|0;c=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(U,ot),i=(i=Math.imul(U,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),r=r+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,ct)|0)+Math.imul(O,ut)|0,o=o+Math.imul(O,ct)|0,r=r+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,dt)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,dt)|0;var Mt=(c+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,mt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(U,ut),i=(i=Math.imul(U,ct))+Math.imul(F,ut)|0,o=Math.imul(F,ct),r=r+Math.imul(R,ht)|0,i=(i=i+Math.imul(R,dt)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,dt)|0;var Nt=(c+(r=r+Math.imul(N,pt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(U,ht),i=(i=Math.imul(U,dt))+Math.imul(F,ht)|0,o=Math.imul(F,dt);var Lt=(c+(r=r+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,mt)|0)+Math.imul(O,pt)|0))<<13)|0;c=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Dt=(c+(r=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(F,pt)|0))<<13)|0;return c=((o=Math.imul(F,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,u[0]=gt,u[1]=vt,u[2]=yt,u[3]=bt,u[4]=wt,u[5]=_t,u[6]=kt,u[7]=Et,u[8]=xt,u[9]=St,u[10]=Tt,u[11]=Ct,u[12]=It,u[13]=At,u[14]=Pt,u[15]=Mt,u[16]=Nt,u[17]=Lt,u[18]=Dt,0!==c&&(u[19]=c,n.length++),n};function p(t,e,n){return(new m).mulp(t,e,n)}function m(t,e){this.x=t,this.y=e}Math.imul||(f=d),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?f(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=67108863&(d=d+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):p(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},m.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},m.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},m.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,d=c,f=0;f<a;f++){var p=n[l+f],m=r[l+f],g=n[l+f+a],v=r[l+f+a],y=h*g-d*v;v=h*v+d*g,g=y,n[l+f]=p+g,r[l+f]=m+v,n[l+f+a]=p-g,r[l+f+a]=m-v,f!==s&&(y=u*h-c*d,d=u*d+c*h,h=y)}},m.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},m.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},m.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,n,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)n[a]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},m.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var f=0;f<r;f++){var p=s[f]*l[f]-u[f]*h[f];u[f]=s[f]*h[f]+u[f]*l[f],s[f]=p}return this.conjugate(s,u,r),this.transform(s,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),p(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&0<=t);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!=n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<n;this.words[e]=u|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!=i){for(e=this.length-1;0<=e;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&0<=t),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;0<=c&&(0!==l||i<=c);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&0<=t);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n||!(this.words[n]&i))},o.prototype.imaskn=function(t){r("number"==typeof t&&0<=t);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!=e&&n++,this.length=Math.min(n,this.length),0!=e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&67108864<=this.words[e];e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,a=t.length+n;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)s=(o=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&o;if(0===s)return this.strip();for(r(-1===s),i=s=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new o(null)).length=1+u,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;0<=h;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/a|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=d)}return s&&s.strip(),r.strip(),"div"!==e&&0!=n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;0<=i;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;0<=n;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(0<d)for(e.iushrn(d);0<d--;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(0<p)for(n.iushrn(p);0<p--;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);0<=e.cmp(n)?(e.isub(n),i.isub(s),a.isub(u)):(n.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=n.clone();0<e.cmpn(1)&&0<n.cmpn(1);){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(0<c)for(e.iushrn(c);0<c--;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(0<h)for(n.iushrn(h);0<h--;)s.isOdd()&&s.iadd(u),s.iushrn(1);0<=e.cmp(n)?(e.isub(n),a.isub(s)):(n.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0;for(var r=n.negative=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(1+n),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),1<this.length)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;0<=n;n--){var r=0|this.words[n],i=0|t.words[n];if(r!=i){r<i?e=-1:i<r&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return 0<=this.cmpn(t)},o.prototype.gte=function(t){return 0<=this.cmp(t)},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new k(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){k.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){for(var e,n=t;this.split(n,this.tmp),(e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength())>this.n;);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):0<r?n.isub(this.p):n.strip(),n},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(y,v),y.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,0===(t.words[r-10]=i)&&10<t.length?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(w,v),i(_,v),_.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new _}return g[t]=e},k.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},k.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},k.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},k.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},k.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return 0<=n.cmp(this.m)&&n.isub(this.m),n._forceRed(this)},k.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return 0<=n.cmp(this.m)&&n.isub(this.m),n},k.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},k.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},k.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},k.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},k.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},k.prototype.isqr=function(t){return this.imul(t,t.clone())},k.prototype.sqr=function(t){return this.mul(t,t)},k.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=a;0!==f.cmp(s);){for(var m=f,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var v=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(v),h=v.redSqr(),f=f.redMul(h),p=g}return d},k.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},k.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;0<=r;r--){for(var c=e.words[r],l=u-1;0<=l;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!=h||0!==a?(a<<=1,a|=h,(4==++s||0===r&&0===l)&&(i=this.mul(i,n[a]),a=s=0)):s=0}u=26}return i},k.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},k.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},i(E,k),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return 0<=i.cmp(this.m)?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return 0<=i.cmp(this.m)?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)},{buffer:11}],10:[function(t,e,n){(function(t){e.exports=function(e){var n=new Uint8Array(e);return(t.crypto||t.msCrypto).getRandomValues(n),n}}).call(this,void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e,n){},{}],12:[function(t,e,n){var r=n;r.version=t("../package.json").version,r.utils=t("./elliptic/utils"),r.rand=t("brorand"),r.curve=t("./elliptic/curve"),r.curves=t("./elliptic/curves"),r.ec=t("./elliptic/ec"),r.eddsa=t("./elliptic/eddsa")},{"../package.json":25,"./elliptic/curve":15,"./elliptic/curves":18,"./elliptic/ec":19,"./elliptic/eddsa":22,"./elliptic/utils":24,brorand:10}],13:[function(t,e,n){var r=t("bn.js"),i=t("../utils"),o=i.getNAF,a=i.getJSF,s=i.assert;function u(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||0<n.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}(e.exports=u).prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var n=t._getDoubles(),r=o(e,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;for(var a=[],u=0;u<r.length;u+=n.step){var c=0;for(e=u+n.step-1;u<=e;e--)c=(c<<1)+r[e];a.push(c)}for(var l=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=i;0<d;d--){for(u=0;u<a.length;u++)(c=a[u])===d?h=h.mixedAdd(n.points[u]):c===-d&&(h=h.mixedAdd(n.points[u].neg()));l=l.add(h)}return l.toP()},u.prototype._wnafMul=function(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var i=r.points,a=o(e,n,this._bitLength),u=this.jpoint(null,null,null),c=a.length-1;0<=c;c--){for(e=0;0<=c&&0===a[c];c--)e++;if(0<=c&&e++,u=u.dblp(e),c<0)break;var l=a[c];s(0!==l),u="affine"===t.type?0<l?u.mixedAdd(i[l-1>>1]):u.mixedAdd(i[-l-1>>1].neg()):0<l?u.add(i[l-1>>1]):u.add(i[-l-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,n,r,i){for(var s=this._wnafT1,u=this._wnafT2,c=this._wnafT3,l=0,h=0;h<r;h++){var d=(S=e[h])._getNAFPoints(t);s[h]=d.wnd,u[h]=d.points}for(h=r-1;1<=h;h-=2){var f=h-1,p=h;if(1===s[f]&&1===s[p]){var m=[e[f],null,null,e[p]];0===e[f].y.cmp(e[p].y)?(m[1]=e[f].add(e[p]),m[2]=e[f].toJ().mixedAdd(e[p].neg())):0===e[f].y.cmp(e[p].y.redNeg())?(m[1]=e[f].toJ().mixedAdd(e[p]),m[2]=e[f].add(e[p].neg())):(m[1]=e[f].toJ().mixedAdd(e[p]),m[2]=e[f].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=a(n[f],n[p]);l=Math.max(v[0].length,l),c[f]=new Array(l),c[p]=new Array(l);for(var y=0;y<l;y++){var b=0|v[0][y],w=0|v[1][y];c[f][y]=g[3*(1+b)+(1+w)],c[p][y]=0,u[f]=m}}else c[f]=o(n[f],s[f],this._bitLength),c[p]=o(n[p],s[p],this._bitLength),l=Math.max(c[f].length,l),l=Math.max(c[p].length,l)}var _=this.jpoint(null,null,null),k=this._wnafT4;for(h=l;0<=h;h--){for(var E=0;0<=h;){var x=!0;for(y=0;y<r;y++)k[y]=0|c[y][h],0!==k[y]&&(x=!1);if(!x)break;E++,h--}if(0<=h&&E++,_=_.dblp(E),h<0)break;for(y=0;y<r;y++){var S,T=k[y];0!==T&&(0<T?S=u[y][T-1>>1]:T<0&&(S=u[y][-T-1>>1].neg()),_="affine"===S.type?_.mixedAdd(S):_.add(S))}}for(h=0;h<r;h++)u[h]=null;return i?_:_.toP()},(u.BasePoint=c).prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},c.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},c.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1==n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}},{"../utils":24,"bn.js":9}],14:[function(t,e,n){e.exports={}},{}],15:[function(t,e,n){var r=n;r.base=t("./base"),r.short=t("./short"),r.mont=t("./mont"),r.edwards=t("./edwards")},{"./base":13,"./edwards":14,"./mont":16,"./short":17}],16:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],17:[function(t,e,n){var r=t("../utils"),i=t("bn.js"),o=t("inherits"),a=t("./base"),s=r.assert;function u(t){a.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,n,r){a.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(t,e,n,r){a.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),(e.exports=u).prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)n=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?n=o[0]:(n=o[1],s(0===this.g.mul(n).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:n,basis:t.basis?t.basis.map((function(t){return{a:new i(t.a,16),b:new i(t.b,16)}})):this._getEndoBasis(n)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),n=new i(2).toRed(e).redInvm(),r=n.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(n);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,n,r,o,a,s,u,c,l,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=t,f=this.n.clone(),p=new i(1),m=new i(0),g=new i(0),v=new i(1),y=0;0!==d.cmpn(0);){var b=f.div(d);c=f.sub(b.mul(d)),l=g.sub(b.mul(p));var w=v.sub(b.mul(m));if(!r&&c.cmp(h)<0)e=u.neg(),n=p,r=c.neg(),o=l;else if(r&&2==++y)break;f=d,d=u=c,g=p,p=l,v=m,m=w}a=c.neg(),s=l;var _=r.sqr().add(o.sqr());return 0<=a.sqr().add(s.sqr()).cmp(_)&&(a=e,s=n),r.negative&&(r=r.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:r,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],r=e[1],i=r.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),a=i.mul(n.a),s=o.mul(r.a),u=i.mul(n.b),c=o.mul(r.b);return{k1:t.sub(a).sub(s),k2:u.add(c).neg()}},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(e&&!o||!e&&o)&&(r=r.redNeg()),this.point(t,r)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),r[2*o]=s,r[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,r,i,2*o,n),l=0;l<2*o;l++)r[l]=null,i[l]=null;return c},o(c,a.BasePoint),u.prototype.point=function(t,e,n){return new c(this,t,e,n)},u.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,r=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};(t.beta=e).precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,n){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],n);if(!e[2])return r;function i(e){return t.point(e[0],e[1],n)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},c.prototype.jmulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,a.BasePoint),u.prototype.jpoint=function(t,e,n){return new l(this,t,e,n)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(n,r)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(e),i=t.x.redMul(n),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),s=r.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),h=r.redMul(c),d=u.redSqr().redIAdd(l).redISub(h).redISub(h),f=u.redMul(h.redISub(d)).redISub(o.redMul(l)),p=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(d,f,p)},l.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,r=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=n.redSub(r),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=n.redMul(u),h=s.redSqr().redIAdd(c).redISub(l).redISub(l),d=s.redMul(l.redISub(h)).redISub(i.redMul(c)),f=this.z.redMul(a);return this.curve.jpoint(h,d,f)},l.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}var r=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(n=0;n<t;n++){var l=o.redSqr(),h=c.redSqr(),d=h.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(u)),p=o.redMul(h),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=f.redMul(g);v=v.redIAdd(v).redISub(d);var y=c.redMul(s);n+1<t&&(u=u.redMul(d)),o=m,s=y,c=v}return this.curve.jpoint(o,c.redMul(i),s)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=u,e=s.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(l).redISub(d);f=f.redIAdd(f);var p=l.redAdd(l).redIAdd(l),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(f).redISub(f),e=p.redMul(f.redISub(t)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,e,n)},l.prototype._threeDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=s.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);t=f.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=f.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,n)},l.prototype._dbl=function(){var t=this.curve.a,e=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=e.redSqr(),a=n.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),c=(u=u.redIAdd(u)).redMul(a),l=s.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),d=a.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=s.redMul(h).redISub(d),p=n.redAdd(n).redMul(r);return this.curve.jpoint(l,f,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),r=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(r),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),l=e.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(s).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(a).redSqr().redISub(n).redISub(s);return this.curve.jpoint(h,d,f)},l.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},l.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),i=n.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(r)).cmpn(0)},l.prototype.eqXToP=function(t){var e=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(n))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),0<=r.cmp(this.curve.p))return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../utils":24,"./base":13,"bn.js":9,inherits:39}],18:[function(t,e,n){var r,i=n,o=t("hash.js"),a=t("./curve"),s=t("./utils").assert;function u(t){"short"===t.type?this.curve=new a.short(t):"edwards"===t.type?this.curve=new a.edwards(t):this.curve=new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var n=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=u,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=t("./precomputed/secp256k1")}catch(t){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},{"./curve":15,"./precomputed/secp256k1":23,"./utils":24,"hash.js":26}],19:[function(t,e,n){var r=t("bn.js"),i=t("hmac-drbg"),o=t("../utils"),a=t("../curves"),s=t("brorand"),u=o.assert,c=t("./key"),l=t("./signature");function h(t){if(!(this instanceof h))return new h(t);"string"==typeof t&&(u(a.hasOwnProperty(t),"Unknown curve "+t),t=a[t]),t instanceof a.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}(e.exports=h).prototype.keyPair=function(t){return new c(this,t)},h.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},h.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},h.prototype.genKeyPair=function(t){t=t||{};for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||s(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new r(2));;){var a=new r(e.generate(n));if(!(0<a.cmp(o)))return a.iaddn(1),this.keyFromPrivate(a)}},h.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return 0<n&&(t=t.ushrn(n)),!e&&0<=t.cmp(this.n)?t.sub(this.n):t},h.prototype.sign=function(t,e,n,o){"object"==typeof n&&(o=n,n=null),o=o||{},e=this.keyFromPrivate(e,n),t=this._truncateToN(new r(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),u=t.toArray("be",a),c=new i({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new r(1)),d=0;;d++){var f=o.k?o.k(d):new r(c.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||0<=f.cmp(h))){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var v=f.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&0<v.cmp(this.nh)&&(v=this.n.sub(v),y^=1),new l({r:g,s:v,recoveryParam:y})}}}}}},h.prototype.verify=function(t,e,n,i){t=this._truncateToN(new r(t,16)),n=this.keyFromPublic(n,i);var o=(e=new l(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||0<=o.cmp(this.n))return!1;if(a.cmpn(1)<0||0<=a.cmp(this.n))return!1;var s,u=a.invm(this.n),c=u.mul(t).umod(this.n),h=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,n.getPublic(),h)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(c,n.getPublic(),h)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(t,e,n,i){u((3&n)===n,"The recovery param is more than two bits"),e=new l(e,i);var o=this.n,a=new r(t),s=e.r,c=e.s,h=1&n,d=n>>1;if(0<=s.cmp(this.curve.p.umod(this.curve.n))&&d)throw new Error("Unable to find sencond key candinate");s=d?this.curve.pointFromX(s.add(this.curve.n),h):this.curve.pointFromX(s,h);var f=e.r.invm(o),p=o.sub(a).mul(f).umod(o),m=c.mul(f).umod(o);return this.g.mulAdd(p,s,m)},h.prototype.getKeyRecoveryParam=function(t,e,n,r){if(null!==(e=new l(e,r)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},{"../curves":18,"../utils":24,"./key":20,"./signature":21,"bn.js":9,brorand:10,"hmac-drbg":38}],20:[function(t,e,n){var r=t("bn.js"),i=t("../utils").assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}(e.exports=o).fromPublic=function(t,e,n){return e instanceof o?e:new o(t,{pub:e,pubEnc:n})},o.fromPrivate=function(t,e,n){return e instanceof o?e:new o(t,{priv:e,privEnc:n})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.mul(this.priv).getX()},o.prototype.sign=function(t,e,n){return this.ec.sign(t,this,e,n)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":24,"bn.js":9}],21:[function(t,e,n){var r=t("bn.js"),i=t("../utils"),o=i.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var n=t[e.place++];if(!(128&n))return n;for(var r=15&n,i=0,o=0,a=e.place;o<r;o++,a++)i<<=8,i|=t[a];return e.place=a,i}function c(t){for(var e=0,n=t.length-1;!t[e]&&!(128&t[e+1])&&e<n;)e++;return 0===e?t:t.slice(e)}function l(t,e){if(e<128)t.push(e);else{var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(e>>>(n<<3)&255);t.push(e)}}(e.exports=a).prototype._importDER=function(t,e){t=i.toArray(t,e);var n=new s;if(48!==t[n.place++])return!1;if(u(t,n)+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var o=u(t,n),a=t.slice(n.place,o+n.place);if(n.place+=o,2!==t[n.place++])return!1;var c=u(t,n);if(t.length!==c+n.place)return!1;var l=t.slice(n.place,c+n.place);return 0===a[0]&&128&a[1]&&(a=a.slice(1)),0===l[0]&&128&l[1]&&(l=l.slice(1)),this.r=new r(a),this.s=new r(l),!(this.recoveryParam=null)},a.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n)),e=c(e),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];l(r,e.length),(r=r.concat(e)).push(2),l(r,n.length);var o=r.concat(n),a=[48];return l(a,o.length),a=a.concat(o),i.encode(a,t)}},{"../utils":24,"bn.js":9}],22:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],23:[function(t,e,n){e.exports=void 0},{}],24:[function(t,e,n){var r=n,i=t("bn.js"),o=t("minimalistic-assert"),a=t("minimalistic-crypto-utils");r.assert=o,r.toArray=a.toArray,r.zero2=a.zero2,r.toHex=a.toHex,r.encode=a.encode,r.getNAF=function(t,e,n){var r=new Array(Math.max(t.bitLength(),n)+1);r.fill(0);for(var i=1<<e+1,o=t.clone(),a=0;a<r.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=(i>>1)-1<u?(i>>1)-u:u,o.isubn(s)):s=0,r[a]=s,o.iushrn(1)}return r},r.getJSF=function(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var r=0,i=0;0<t.cmpn(-r)||0<e.cmpn(-i);){var o,a,s,u=t.andln(3)+r&3,c=e.andln(3)+i&3;3===u&&(u=-1),3===c&&(c=-1),o=0==(1&u)?0:3!=(s=t.andln(7)+r&7)&&5!==s||2!==c?u:-u,n[0].push(o),a=0==(1&c)?0:3!=(s=e.andln(7)+i&7)&&5!==s||2!==u?c:-c,n[1].push(a),2*r===o+1&&(r=1-r),2*i===a+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return n},r.cachedProperty=function(t,e,n){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new i(t,"hex","le")}},{"bn.js":9,"minimalistic-assert":41,"minimalistic-crypto-utils":42}],25:[function(t,e,n){e.exports={version:"6.5.2"}},{}],26:[function(t,e,n){var r=n;r.utils=t("./hash/utils"),r.common=t("./hash/common"),r.sha=t("./hash/sha"),r.ripemd=t("./hash/ripemd"),r.hmac=t("./hash/hmac"),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},{"./hash/common":27,"./hash/hmac":28,"./hash/ripemd":29,"./hash/sha":30,"./hash/utils":37}],27:[function(t,e,n){var r=t("./utils"),i=t("minimalistic-assert");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}(n.BlockHash=o).prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,n=e-(t+this.padLength)%e,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=t>>>24&255,r[i++]=t>>>16&255,r[i++]=t>>>8&255,r[i++]=255&t}else for(r[i++]=255&t,r[i++]=t>>>8&255,r[i++]=t>>>16&255,r[i++]=t>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},{"./utils":37,"minimalistic-assert":41}],28:[function(t,e,n){var r=t("./utils"),i=t("minimalistic-assert");function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,n))}(e.exports=o).prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},{"./utils":37,"minimalistic-assert":41}],29:[function(t,e,n){var r=t("./utils"),i=t("./common"),o=r.rotl32,a=r.sum32,s=r.sum32_3,u=r.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(l,c),(n.ripemd160=l).blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(t,e){for(var n=this.h[0],r=this.h[1],i=this.h[2],c=this.h[3],l=this.h[4],y=n,b=r,w=i,_=c,k=l,E=0;E<80;E++){var x=a(o(u(n,h(E,r,i,c),t[p[E]+e],d(E)),g[E]),l);n=l,l=c,c=o(i,10),i=r,r=x,x=a(o(u(y,h(79-E,b,w,_),t[m[E]+e],f(E)),v[E]),k),y=k,k=_,_=o(w,10),w=b,b=x}x=s(this.h[1],i,_),this.h[1]=s(this.h[2],c,k),this.h[2]=s(this.h[3],l,y),this.h[3]=s(this.h[4],n,b),this.h[4]=s(this.h[0],r,w),this.h[0]=x},l.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":27,"./utils":37}],30:[function(t,e,n){n.sha1=t("./sha/1"),n.sha224=t("./sha/224"),n.sha256=t("./sha/256"),n.sha384=t("./sha/384"),n.sha512=t("./sha/512")},{"./sha/1":31,"./sha/224":32,"./sha/256":33,"./sha/384":34,"./sha/512":35}],31:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],32:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],33:[function(t,e,n){var r=t("../utils"),i=t("../common"),o=t("./common"),a=t("minimalistic-assert"),s=r.sum32,u=r.sum32_4,c=r.sum32_5,l=o.ch32,h=o.maj32,d=o.s0_256,f=o.s1_256,p=o.g0_256,m=o.g1_256,g=i.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}r.inherits(y,g),(e.exports=y).blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=u(m(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],w=this.h[6],_=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var k=c(_,f(y),l(y,b,w),this.k[r],n[r]),E=s(d(i),h(i,o,g));_=w,w=b,b=y,y=s(v,k),v=g,g=o,o=i,i=s(k,E)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],v),this.h[4]=s(this.h[4],y),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],w),this.h[7]=s(this.h[7],_)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":27,"../utils":37,"./common":36,"minimalistic-assert":41}],34:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],35:[function(t,e,n){var r=t("../utils"),i=t("../common"),o=t("minimalistic-assert"),a=r.rotr64_hi,s=r.rotr64_lo,u=r.shr64_hi,c=r.shr64_lo,l=r.sum64,h=r.sum64_hi,d=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,m=r.sum64_5_hi,g=r.sum64_5_lo,v=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function w(t,e,n,r,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function _(t,e,n,r,i,o){var a=e&r^~e&o;return a<0&&(a+=4294967296),a}function k(t,e,n,r,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function E(t,e,n,r,i,o){var a=e&r^e&o^r&o;return a<0&&(a+=4294967296),a}function x(t,e){var n=a(t,e,28)^a(e,t,2)^a(e,t,7);return n<0&&(n+=4294967296),n}function S(t,e){var n=s(t,e,28)^s(e,t,2)^s(e,t,7);return n<0&&(n+=4294967296),n}function T(t,e){var n=a(t,e,14)^a(t,e,18)^a(e,t,9);return n<0&&(n+=4294967296),n}function C(t,e){var n=s(t,e,14)^s(t,e,18)^s(e,t,9);return n<0&&(n+=4294967296),n}function I(t,e){var n=a(t,e,1)^a(t,e,8)^u(t,e,7);return n<0&&(n+=4294967296),n}function A(t,e){var n=s(t,e,1)^s(t,e,8)^c(t,e,7);return n<0&&(n+=4294967296),n}function P(t,e){var n=a(t,e,19)^a(e,t,29)^u(t,e,6);return n<0&&(n+=4294967296),n}function M(t,e){var n=s(t,e,19)^s(e,t,29)^c(t,e,6);return n<0&&(n+=4294967296),n}r.inherits(b,v),(e.exports=b).blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var n=this.W,r=0;r<32;r++)n[r]=t[e+r];for(;r<n.length;r+=2){var i=P(n[r-4],n[r-3]),o=M(n[r-4],n[r-3]),a=n[r-14],s=n[r-13],u=I(n[r-30],n[r-29]),c=A(n[r-30],n[r-29]),l=n[r-32],h=n[r-31];n[r]=f(i,o,a,s,u,c,l,h),n[r+1]=p(i,o,a,s,u,c,l,h)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var n=this.W,r=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],f=this.h[6],p=this.h[7],v=this.h[8],y=this.h[9],b=this.h[10],I=this.h[11],A=this.h[12],P=this.h[13],M=this.h[14],N=this.h[15];o(this.k.length===n.length);for(var L=0;L<n.length;L+=2){var D=M,R=N,O=T(v,y),B=C(v,y),U=w(v,0,b,0,A),F=_(0,y,0,I,0,P),j=this.k[L],q=this.k[L+1],$=n[L],V=n[L+1],z=m(D,R,O,B,U,F,j,q,$,V),H=g(D,R,O,B,U,F,j,q,$,V);D=x(r,i),R=S(r,i),O=k(r,0,a,0,u),B=E(0,i,0,s,0,c);var G=h(D,R,O,B),W=d(D,R,O,B);M=A,N=P,A=b,P=I,b=v,I=y,v=h(f,p,z,H),y=d(p,p,z,H),f=u,p=c,u=a,c=s,a=r,s=i,r=h(z,H,G,W),i=d(z,H,G,W)}l(this.h,0,r,i),l(this.h,2,a,s),l(this.h,4,u,c),l(this.h,6,f,p),l(this.h,8,v,y),l(this.h,10,b,I),l(this.h,12,A,P),l(this.h,14,M,N)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":27,"../utils":37,"minimalistic-assert":41}],36:[function(t,e,n){var r=t("../utils").rotr32;function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function a(t,e,n){return t^e^n}n.ft_1=function(t,e,n,r){return 0===t?i(e,n,r):1===t||3===t?a(e,n,r):2===t?o(e,n,r):void 0},n.ch32=i,n.maj32=o,n.p32=a,n.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},n.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},n.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},n.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},{"../utils":37}],37:[function(t,e,n){var r=t("minimalistic-assert"),i=t("inherits");function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function s(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}n.inherits=i,n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}else for(var r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,a=255&i;o?n.push(o,a):n.push(a)}else for(r=0;r<t.length;r++)n[r]=0|t[r];return n},n.toHex=function(t){for(var e="",n=0;n<t.length;n++)e+=a(t[n].toString(16));return e},n.htonl=o,n.toHex32=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];"little"===e&&(i=o(i)),n+=s(i.toString(16))}return n},n.zero2=a,n.zero8=s,n.join32=function(t,e,n,i){var o=n-e;r(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4){var c;c="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=c>>>0}return a},n.split32=function(t,e){for(var n=new Array(4*t.length),r=0,i=0;r<t.length;r++,i+=4){var o=t[r];"big"===e?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},n.rotr32=function(t,e){return t>>>e|t<<32-e},n.rotl32=function(t,e){return t<<e|t>>>32-e},n.sum32=function(t,e){return t+e>>>0},n.sum32_3=function(t,e,n){return t+e+n>>>0},n.sum32_4=function(t,e,n,r){return t+e+n+r>>>0},n.sum32_5=function(t,e,n,r,i){return t+e+n+r+i>>>0},n.sum64=function(t,e,n,r){var i=t[e],o=r+t[e+1]>>>0,a=(o<r?1:0)+n+i;t[e]=a>>>0,t[e+1]=o},n.sum64_hi=function(t,e,n,r){return(e+r>>>0<e?1:0)+t+n>>>0},n.sum64_lo=function(t,e,n,r){return e+r>>>0},n.sum64_4_hi=function(t,e,n,r,i,o,a,s){var u=0,c=e;return u+=(c=c+r>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+n+i+a+(u+=(c=c+s>>>0)<s?1:0)>>>0},n.sum64_4_lo=function(t,e,n,r,i,o,a,s){return e+r+o+s>>>0},n.sum64_5_hi=function(t,e,n,r,i,o,a,s,u,c){var l=0,h=e;return l+=(h=h+r>>>0)<e?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+s>>>0)<s?1:0,t+n+i+a+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},n.sum64_5_lo=function(t,e,n,r,i,o,a,s,u,c){return e+r+o+s+c>>>0},n.rotr64_hi=function(t,e,n){return(e<<32-n|t>>>n)>>>0},n.rotr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0},n.shr64_hi=function(t,e,n){return t>>>n},n.shr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0}},{inherits:39,"minimalistic-assert":41}],38:[function(t,e,n){var r=t("hash.js"),i=t("minimalistic-crypto-utils"),o=t("minimalistic-assert");function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),n=i.toArray(t.nonce,t.nonceEnc||"hex"),r=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}(e.exports=a).prototype._init=function(t,e,n){var r=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,n,r){"string"!=typeof e&&(r=n,n=e,e=null),t=i.toArray(t,e),n=i.toArray(n,r),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},a.prototype.generate=function(t,e,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=n,n=e,e=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(n),this._reseed++,i.encode(a,e)}},{"hash.js":26,"minimalistic-assert":41,"minimalistic-crypto-utils":42}],39:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){function n(){}t.super_=e,n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],40:[function(t,e,n){(function(t,n){!function(){var r="object"==typeof window?window:{};!r.JS_SHA3_NO_NODE_JS&&"object"==typeof t&&t.versions&&t.versions.node&&(r=n);for(var i=!r.JS_SHA3_NO_COMMON_JS&&"object"==typeof e&&e.exports,o="0123456789abcdef".split(""),a=[0,8,16,24],s=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],u=[224,256,384,512],c=["hex","buffer","arrayBuffer","array"],l=function(t,e,n){return function(r){return new _(t,e,t).update(r)[n]()}},h=function(t,e,n){return function(r,i){return new _(t,e,i).update(r)[n]()}},d=function(t,e){var n=l(t,e,"hex");n.create=function(){return new _(t,e,t)},n.update=function(t){return n.create().update(t)};for(var r=0;r<c.length;++r){var i=c[r];n[i]=l(t,e,i)}return n},f=[{name:"keccak",padding:[1,256,65536,16777216],bits:u,createMethod:d},{name:"sha3",padding:[6,1536,393216,100663296],bits:u,createMethod:d},{name:"shake",padding:[31,7936,2031616,520093696],bits:[128,256],createMethod:function(t,e){var n=h(t,e,"hex");n.create=function(n){return new _(t,e,n)},n.update=function(t,e){return n.create(e).update(t)};for(var r=0;r<c.length;++r){var i=c[r];n[i]=h(t,e,i)}return n}}],p={},m=[],g=0;g<f.length;++g)for(var v=f[g],y=v.bits,b=0;b<y.length;++b){var w=v.name+"_"+y[b];m.push(w),p[w]=v.createMethod(y[b],v.padding)}function _(t,e,n){this.blocks=[],this.s=[],this.padding=e,this.outputBits=n,this.reset=!0,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}_.prototype.update=function(t){var e="string"!=typeof t;e&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t));for(var n,r,i=t.length,o=this.blocks,s=this.byteCount,u=this.blockCount,c=0,l=this.s;c<i;){if(this.reset)for(this.reset=!1,o[0]=this.block,n=1;n<u+1;++n)o[n]=0;if(e)for(n=this.start;c<i&&n<s;++c)o[n>>2]|=t[c]<<a[3&n++];else for(n=this.start;c<i&&n<s;++c)(r=t.charCodeAt(c))<128?o[n>>2]|=r<<a[3&n++]:(r<2048?o[n>>2]|=(192|r>>6)<<a[3&n++]:(r<55296||57344<=r?o[n>>2]|=(224|r>>12)<<a[3&n++]:(r=65536+((1023&r)<<10|1023&t.charCodeAt(++c)),o[n>>2]|=(240|r>>18)<<a[3&n++],o[n>>2]|=(128|r>>12&63)<<a[3&n++]),o[n>>2]|=(128|r>>6&63)<<a[3&n++]),o[n>>2]|=(128|63&r)<<a[3&n++]);if(s<=(this.lastByteIndex=n)){for(this.start=n-s,this.block=o[u],n=0;n<u;++n)l[n]^=o[n];k(l),this.reset=!0}else this.start=n}return this},_.prototype.finalize=function(){var t=this.blocks,e=this.lastByteIndex,n=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[n],e=1;e<n+1;++e)t[e]=0;for(t[n-1]|=2147483648,e=0;e<n;++e)r[e]^=t[e];k(r)},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,a=0,s=0,u="";s<r;){for(a=0;a<e&&s<r;++a,++s)t=n[a],u+=o[t>>4&15]+o[15&t]+o[t>>12&15]+o[t>>8&15]+o[t>>20&15]+o[t>>16&15]+o[t>>28&15]+o[t>>24&15];s%e==0&&(k(n),a=0)}return i&&(t=n[a],0<i&&(u+=o[t>>4&15]+o[15&t]),1<i&&(u+=o[t>>12&15]+o[t>>8&15]),2<i&&(u+=o[t>>20&15]+o[t>>16&15])),u},_.prototype.buffer=_.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,o=0,a=0,s=this.outputBits>>3;t=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(s);for(var u=new Uint32Array(t);a<r;){for(o=0;o<e&&a<r;++o,++a)u[a]=n[o];a%e==0&&k(n)}return i&&(u[o]=n[o],t=t.slice(0,s)),t},_.prototype.digest=_.prototype.array=function(){this.finalize();for(var t,e,n=this.blockCount,r=this.s,i=this.outputBlocks,o=this.extraBytes,a=0,s=0,u=[];s<i;){for(a=0;a<n&&s<i;++a,++s)t=s<<2,e=r[a],u[t]=255&e,u[t+1]=e>>8&255,u[t+2]=e>>16&255,u[t+3]=e>>24&255;s%n==0&&k(r)}return o&&(t=s<<2,e=r[a],0<o&&(u[t]=255&e),1<o&&(u[t+1]=e>>8&255),2<o&&(u[t+2]=e>>16&255)),u};var k=function(t){var e,n,r,i,o,a,u,c,l,h,d,f,p,m,g,v,y,b,w,_,k,E,x,S,T,C,I,A,P,M,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,J,tt,et,nt,rt,it,ot,at,st,ut,ct,lt;for(r=0;r<48;r+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],a=t[2]^t[12]^t[22]^t[32]^t[42],u=t[3]^t[13]^t[23]^t[33]^t[43],c=t[4]^t[14]^t[24]^t[34]^t[44],l=t[5]^t[15]^t[25]^t[35]^t[45],h=t[6]^t[16]^t[26]^t[36]^t[46],d=t[7]^t[17]^t[27]^t[37]^t[47],e=(f=t[8]^t[18]^t[28]^t[38]^t[48])^(a<<1|u>>>31),n=(p=t[9]^t[19]^t[29]^t[39]^t[49])^(u<<1|a>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=i^(c<<1|l>>>31),n=o^(l<<1|c>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=a^(h<<1|d>>>31),n=u^(d<<1|h>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=c^(f<<1|p>>>31),n=l^(p<<1|f>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=h^(i<<1|o>>>31),n=d^(o<<1|i>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,m=t[0],g=t[1],W=t[11]<<4|t[10]>>>28,K=t[10]<<4|t[11]>>>28,A=t[20]<<3|t[21]>>>29,P=t[21]<<3|t[20]>>>29,st=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,V=t[40]<<18|t[41]>>>14,z=t[41]<<18|t[40]>>>14,R=t[2]<<1|t[3]>>>31,O=t[3]<<1|t[2]>>>31,v=t[13]<<12|t[12]>>>20,y=t[12]<<12|t[13]>>>20,Z=t[22]<<10|t[23]>>>22,Q=t[23]<<10|t[22]>>>22,M=t[33]<<13|t[32]>>>19,N=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,lt=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,B=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,w=t[24]<<11|t[25]>>>21,Y=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,L=t[45]<<29|t[44]>>>3,D=t[44]<<29|t[45]>>>3,S=t[6]<<28|t[7]>>>4,T=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,F=t[26]<<25|t[27]>>>7,j=t[27]<<25|t[26]>>>7,_=t[36]<<21|t[37]>>>11,k=t[37]<<21|t[36]>>>11,J=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,H=t[8]<<27|t[9]>>>5,G=t[9]<<27|t[8]>>>5,C=t[18]<<20|t[19]>>>12,I=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,at=t[28]<<7|t[29]>>>25,q=t[38]<<8|t[39]>>>24,$=t[39]<<8|t[38]>>>24,E=t[48]<<14|t[49]>>>18,x=t[49]<<14|t[48]>>>18,t[0]=m^~v&b,t[1]=g^~y&w,t[10]=S^~C&A,t[11]=T^~I&P,t[20]=R^~B&F,t[21]=O^~U&j,t[30]=H^~W&Z,t[31]=G^~K&Q,t[40]=et^~rt&ot,t[41]=nt^~it&at,t[2]=v^~b&_,t[3]=y^~w&k,t[12]=C^~A&M,t[13]=I^~P&N,t[22]=B^~F&q,t[23]=U^~j&$,t[32]=W^~Z&Y,t[33]=K^~Q&X,t[42]=rt^~ot&st,t[43]=it^~at&ut,t[4]=b^~_&E,t[5]=w^~k&x,t[14]=A^~M&L,t[15]=P^~N&D,t[24]=F^~q&V,t[25]=j^~$&z,t[34]=Z^~Y&J,t[35]=Q^~X&tt,t[44]=ot^~st&ct,t[45]=at^~ut&lt,t[6]=_^~E&m,t[7]=k^~x&g,t[16]=M^~L&S,t[17]=N^~D&T,t[26]=q^~V&R,t[27]=$^~z&O,t[36]=Y^~J&H,t[37]=X^~tt&G,t[46]=st^~ct&et,t[47]=ut^~lt&nt,t[8]=E^~m&v,t[9]=x^~g&y,t[18]=L^~S&C,t[19]=D^~T&I,t[28]=V^~R&B,t[29]=z^~O&U,t[38]=J^~H&W,t[39]=tt^~G&K,t[48]=ct^~et&rt,t[49]=lt^~nt&it,t[0]^=s[r],t[1]^=s[r+1]};if(i)e.exports=p;else for(g=0;g<m.length;++g)r[m[g]]=p[m[g]]}()}).call(this,t("_process"),void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:43}],41:[function(t,e,n){(e.exports=function(t,e){if(!t)throw new Error(e||"Assertion failed")}).equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},{}],42:[function(t,e,n){var r=n;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",n=0;n<t.length;n++)e+=i(t[n].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,a=255&i;o?n.push(o,a):n.push(a)}return n},r.zero2=i,r.toHex=o,r.encode=function(t,e){return"hex"===e?o(t):t}},{}],43:[function(t,e,n){e.exports={browser:!0}},{}],44:[function(t,e,n){(function(t){function r(t){var e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=1779033703,r=3144134277,i=1013904242,o=2773480762,a=1359893119,s=2600822924,u=528734635,c=1541459225,l=new Array(64);function h(t){for(var h=0,d=t.length;64<=d;){var f,p,m,g,v,y=n,b=r,w=i,_=o,k=a,E=s,x=u,S=c;for(p=0;p<16;p++)m=h+4*p,l[p]=(255&t[m])<<24|(255&t[m+1])<<16|(255&t[m+2])<<8|255&t[m+3];for(p=16;p<64;p++)g=((f=l[p-2])>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,v=((f=l[p-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,l[p]=(g+l[p-7]|0)+(v+l[p-16]|0)|0;for(p=0;p<64;p++)g=(((k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7))+(k&E^~k&x)|0)+(S+(e[p]+l[p]|0)|0)|0,v=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&b^y&w^b&w)|0,S=x,x=E,E=k,k=_+g|0,_=w,w=b,b=y,y=g+v|0;n=n+y|0,r=r+b|0,i=i+w|0,o=o+_|0,a=a+k|0,s=s+E|0,u=u+x|0,c=c+S|0,h+=64,d-=64}}h(t);var d,f=t.length%64,p=t.length/536870912|0,m=t.length<<3,g=f<56?56:120,v=t.slice(t.length-f,t.length);for(v.push(128),d=1+f;d<g;d++)v.push(0);return v.push(p>>>24&255),v.push(p>>>16&255),v.push(p>>>8&255),v.push(p>>>0&255),v.push(m>>>24&255),v.push(m>>>16&255),v.push(m>>>8&255),v.push(m>>>0&255),h(v),[n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function i(t,e,n){var i;t=t.length<=64?t:r(t);var o=64+e.length+4,a=new Array(o),s=new Array(64),u=[];for(i=0;i<64;i++)a[i]=54;for(i=0;i<t.length;i++)a[i]^=t[i];for(i=0;i<e.length;i++)a[64+i]=e[i];for(i=o-4;i<o;i++)a[i]=0;for(i=0;i<64;i++)s[i]=92;for(i=0;i<t.length;i++)s[i]^=t[i];function c(){for(var t=o-1;o-4<=t;t--){if(a[t]++,a[t]<=255)return;a[t]=0}}for(;32<=n;)c(),u=u.concat(r(s.concat(r(a)))),n-=32;return 0<n&&(c(),u=u.concat(r(s.concat(r(a))).slice(0,n))),u}function o(t,e,n,r,i){var o;for(c(t,16*(2*n-1),i,0,16),o=0;o<2*n;o++)u(t,16*o,i,16),s(i,r),c(i,0,t,e+16*o,16);for(o=0;o<n;o++)c(t,e+2*o*16,t,16*o,16);for(o=0;o<n;o++)c(t,e+16*(2*o+1),t,16*(o+n),16)}function a(t,e){return t<<e|t>>>32-e}function s(t,e){c(t,0,e,0,16);for(var n=8;0<n;n-=2)e[4]^=a(e[0]+e[12],7),e[8]^=a(e[4]+e[0],9),e[12]^=a(e[8]+e[4],13),e[0]^=a(e[12]+e[8],18),e[9]^=a(e[5]+e[1],7),e[13]^=a(e[9]+e[5],9),e[1]^=a(e[13]+e[9],13),e[5]^=a(e[1]+e[13],18),e[14]^=a(e[10]+e[6],7),e[2]^=a(e[14]+e[10],9),e[6]^=a(e[2]+e[14],13),e[10]^=a(e[6]+e[2],18),e[3]^=a(e[15]+e[11],7),e[7]^=a(e[3]+e[15],9),e[11]^=a(e[7]+e[3],13),e[15]^=a(e[11]+e[7],18),e[1]^=a(e[0]+e[3],7),e[2]^=a(e[1]+e[0],9),e[3]^=a(e[2]+e[1],13),e[0]^=a(e[3]+e[2],18),e[6]^=a(e[5]+e[4],7),e[7]^=a(e[6]+e[5],9),e[4]^=a(e[7]+e[6],13),e[5]^=a(e[4]+e[7],18),e[11]^=a(e[10]+e[9],7),e[8]^=a(e[11]+e[10],9),e[9]^=a(e[8]+e[11],13),e[10]^=a(e[9]+e[8],18),e[12]^=a(e[15]+e[14],7),e[13]^=a(e[12]+e[15],9),e[14]^=a(e[13]+e[12],13),e[15]^=a(e[14]+e[13],18);for(n=0;n<16;++n)t[n]+=e[n]}function u(t,e,n,r){for(var i=0;i<r;i++)n[i]^=t[e+i]}function c(t,e,n,r,i){for(;i--;)n[r++]=t[e++]}function l(t){if(!t||"number"!=typeof t.length)return!1;for(var e=0;e<t.length;e++){if("number"!=typeof t[e])return!1;var n=parseInt(t[e]);if(n!=t[e]||n<0||256<=n)return!1}return!0}function h(t,e){var n=parseInt(t);if(t!=n)throw new Error("invalid "+e);return n}function d(e,n,r,a,s,d,f){if(!f)throw new Error("missing callback");if(r=h(r,"N"),a=h(a,"r"),s=h(s,"p"),d=h(d,"dkLen"),0===r||0!=(r&r-1))throw new Error("N must be power of 2");if(p/128/a<r)throw new Error("N too large");if(p/128/s<a)throw new Error("r too large");if(!l(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!l(n))throw new Error("salt must be an array or buffer");n=Array.prototype.slice.call(n);for(var m=i(e,n,128*s*a),g=new Uint32Array(32*s*a),v=0;v<g.length;v++){var y=4*v;g[v]=(255&m[3+y])<<24|(255&m[2+y])<<16|(255&m[1+y])<<8|(255&m[0+y])<<0}var b,w,_=new Uint32Array(64*a),k=new Uint32Array(32*a*r),E=32*a,x=new Uint32Array(16),S=new Uint32Array(16),T=s*r*2,C=0,I=null,A=!1,P=0,M=0,N=parseInt(1e3/a),L=void 0!==t?t:setTimeout,D=function(){if(A)return f(new Error("cancelled"),C/T);switch(P){case 0:c(g,w=32*M*a,_,0,E),P=1,b=0;case 1:N<(n=r-b)&&(n=N);for(var t=0;t<n;t++)c(_,0,k,(b+t)*E,E),o(_,E,a,x,S);if(b+=n,C+=n,(l=parseInt(1e3*C/T))!==I){if(A=f(null,C/T))break;I=l}if(b<r)break;b=0,P=2;case 2:var n,l;for(N<(n=r-b)&&(n=N),t=0;t<n;t++){var h=_[16*(2*a-1)]&r-1;u(k,h*E,_,E),o(_,E,a,x,S)}if(b+=n,C+=n,(l=parseInt(1e3*C/T))!==I){if(A=f(null,C/T))break;I=l}if(b<r)break;if(c(_,0,g,w,E),++M<s){P=0;break}for(m=[],t=0;t<g.length;t++)m.push(g[t]>>0&255),m.push(g[t]>>8&255),m.push(g[t]>>16&255),m.push(g[t]>>24&255);var p=i(e,m,d);return f(null,1,p)}L(D)};D()}var f,p;f=this,p=2147483647,void 0!==n?e.exports=d:f&&(f.scrypt&&(f._scrypt=f.scrypt),f.scrypt=d)}).call(this,t("timers").setImmediate)},{timers:46}],45:[function(t,e,n){(function(t,e,n){!function(e,n){if(!e.setImmediate){var r,i,o,a,s=1,u={},c=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,r="[object process]"==={}.toString.call(e.process)?function(){var e=d(arguments);return t.nextTick(f(p,e)),e}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",g,!1):e.attachEvent("onmessage",g),function(){var t=d(arguments);return e.postMessage(a+t,"*"),t}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(){var t=d(arguments);return o.port2.postMessage(t),t}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,function(){var t=d(arguments),e=l.createElement("script");return e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e),t}):function(){var t=d(arguments);return setTimeout(f(p,t),0),t},h.setImmediate=r,h.clearImmediate=m}function d(t){return u[s]=f.apply(n,t),s++}function f(t){var e=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(n,e):new Function(""+t)()}}function p(t){if(c)setTimeout(f(p,t),0);else{var e=u[t];if(e){c=!0;try{e()}finally{m(t),c=!1}}}}function m(t){delete u[t]}function g(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,t("_process"),void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").clearImmediate)},{_process:43,timers:46}],46:[function(t,e,n){(function(t){e.exports={setImmediate:t.setImmediate}}).call(this,void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e,n){(function(t){var n;if(t.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);n=function(){return crypto.getRandomValues(r),r}}if(!n){var i=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}e.exports=n}).call(this,void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(t,e,n){for(var r=t("./rng"),i=[],o={},a=0;a<256;a++)i[a]=(a+256).toString(16).substr(1),o[i[a]]=a;function s(t,e){var n=e||0,r=i;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}var u=r(),c=[1|u[0],u[1],u[2],u[3],u[4],u[5]],l=16383&(u[6]<<8|u[7]),h=0,d=0;function f(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;a++)e[i+a]=o[a];return e||s(o)}var p=f;p.v1=function(t,e,n){var r=e&&n||0,i=e||[],o=void 0!==(t=t||{}).clockseq?t.clockseq:l,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:d+1,f=a-h+(u-d)/1e4;if(f<0&&void 0===t.clockseq&&(o=o+1&16383),(f<0||h<a)&&void 0===t.nsecs&&(u=0),1e4<=u)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=a,l=o;var p=(1e4*(268435455&(a+=122192928e5))+(d=u))%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var m=a/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var g=t.node||c,v=0;v<6;v++)i[r+v]=g[v];return e||s(i)},p.v4=f,p.parse=function(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,(function(t){i<16&&(e[r+i++]=o[t])}));i<16;)e[r+i++]=0;return e},p.unparse=s,e.exports=p},{"./rng":47}],49:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});try{e.exports.XMLHttpRequest=XMLHttpRequest}catch(t){console.log("Warning: XMLHttpRequest is not defined"),e.exports.XMLHttpRequest=null}},{}],50:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/properties"),i=(o.isProvider=function(t){return r.isType(t,"Provider")},o);function o(){r.setType(this,"Provider")}n.Provider=i},{"../utils/properties":74}],51:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../utils/address"),s=t("../utils/bignumber"),u=t("../utils/bytes"),c=t("../constants"),l=t("../utils/hash"),h=t("../utils/networks"),d=t("../utils/properties"),f=t("../utils/rlp"),p=t("../utils/transaction"),m=t("../utils/utf8"),g=t("../utils/web"),v=o(t("../errors")),y=t("./abstract-provider");function b(t,e){var n={};for(var r in t)try{var i=t[r](e[r]);void 0!==i&&(n[r]=i)}catch(t){throw t.checkKey=r,t.checkValue=e[r],t}return n}function w(t,e){return function(n){return null==n?e:t(n)}}function _(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");var n=[];return e.forEach((function(e){n.push(t(e))})),n}}function k(t,e){return"string"==typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),32===u.hexDataLength(t))?t.toLowerCase():(v.throwError("invalid hash",v.INVALID_ARGUMENT,{arg:"hash",value:t}),null)}function E(t){return s.bigNumberify(t).toNumber()}function x(t){if(!u.isHexString(t))throw new Error("invalid uint256");for(;t.length<66;)t="0x0"+t.substring(2);return t}function S(t){if(null==t)return"latest";if("earliest"===t)return"0x0";if("latest"===t||"pending"===t)return t;if("number"==typeof t)return u.hexStripZeros(u.hexlify(t));if(u.isHexString(t))return u.hexStripZeros(t);throw new Error("invalid blockTag")}var T={hash:k,blockHash:w(k,null),blockNumber:w(E,null),transactionIndex:w(E,null),confirmations:w(E,null),from:a.getAddress,gasPrice:s.bigNumberify,gasLimit:s.bigNumberify,to:w(a.getAddress,null),value:s.bigNumberify,nonce:E,data:u.hexlify,r:w(x),s:w(x),v:w(E),creates:w(a.getAddress,null),raw:w(u.hexlify)};function C(t){if(null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&s.bigNumberify(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=a.getContractAddress(t)),!t.raw&&t.v&&t.r&&t.s){var e=[u.stripZeros(u.hexlify(t.nonce)),u.stripZeros(u.hexlify(t.gasPrice)),u.stripZeros(u.hexlify(t.gasLimit)),t.to||"0x",u.stripZeros(u.hexlify(t.value||"0x")),u.hexlify(t.data||"0x"),u.stripZeros(u.hexlify(t.v||"0x")),u.stripZeros(u.hexlify(t.r)),u.stripZeros(u.hexlify(t.s))];t.raw=f.encode(e)}var n=b(T,t),r=t.networkId;return null!=t.chainId&&null==r&&null==n.v&&(r=t.chainId),u.isHexString(r)&&(r=s.bigNumberify(r).toNumber()),"number"!=typeof r&&null!=n.v&&((r=(n.v-35)/2)<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),n.networkId=r,null==n.chainId&&null!=r&&(n.chainId=r),n.blockHash&&"x"===n.blockHash.replace(/0/g,"")&&(n.blockHash=null),n}var I={hash:k,parentHash:k,number:E,timestamp:E,nonce:w(u.hexlify),difficulty:function(t){var e=s.bigNumberify(t);try{return e.toNumber()}catch(t){}return null},gasLimit:s.bigNumberify,gasUsed:s.bigNumberify,miner:a.getAddress,extraData:u.hexlify,transactions:w(_(k))},A=d.shallowCopy(I);function P(t,e){return null!=t.author&&null==t.miner&&(t.miner=t.author),b(e?A:I,t)}A.transactions=w(_(C));var M={from:w(a.getAddress),nonce:w(E),gasLimit:w(s.bigNumberify),gasPrice:w(s.bigNumberify),to:w(a.getAddress),value:w(s.bigNumberify),data:w(u.hexlify)};function N(t){return b(M,t)}var L={transactionLogIndex:w(E),transactionIndex:E,blockNumber:E,transactionHash:k,address:a.getAddress,topics:_(k),data:u.hexlify,logIndex:E,blockHash:k},D={to:w(a.getAddress,null),from:w(a.getAddress,null),contractAddress:w(a.getAddress,null),transactionIndex:E,root:w(k),gasUsed:s.bigNumberify,logsBloom:w(u.hexlify),blockHash:k,transactionHash:k,logs:_((function(t){return b(L,t)})),blockNumber:E,confirmations:w(E,null),cumulativeGasUsed:s.bigNumberify,status:w(E)};function R(t){return Array.isArray(t)?t.forEach((function(t){R(t)})):null!=t&&k(t),t}var O,B={fromBlock:w(S,void 0),toBlock:w(S,void 0),address:w(a.getAddress,void 0),topics:w(R,void 0)},U={blockHash:w(k,void 0),address:w(a.getAddress,void 0),topics:w(R,void 0)},F={blockNumber:w(E),blockHash:w(k),transactionIndex:E,removed:w((function(t){if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===t)return!0;if("false"===t)return!1}throw new Error("invaid boolean - "+t)})),address:a.getAddress,data:(O=u.hexlify,function(t){return t?O(t):"0x"}),topics:_(k),transactionHash:k,logIndex:E};function j(t){return b(F,t)}function q(t){return t.map((function(t){return"string"==typeof t?t:Array.isArray(t)?(t.forEach((function(t){null!==t&&32!==u.hexDataLength(t)&&v.throwError("invalid topic",v.INVALID_ARGUMENT,{argument:"topic",value:t})})),t.join(",")):null===t?"":v.throwError("invalid topic value",v.INVALID_ARGUMENT,{argument:"topic",value:t})})).join("&")}function $(t){if("string"==typeof t){if(20===u.hexDataLength(t))return"address:"+a.getAddress(t);if(t=t.toLowerCase(),32===u.hexDataLength(t))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter::"+q(t);if(t&&"object"==typeof t)return"filter:"+(t.address||"")+":"+q(t.topics||[])}throw new Error("invalid event - "+t)}function V(){return(new Date).getTime()}var z,H=(i(G,z=y.Provider),G.prototype._doPoll=function(){var t=this;this.getBlockNumber().then((function(e){if(t.polling&&(t._setFastBlockNumber(e),e!==t._lastBlockNumber)){-2===t._emitted.block&&(t._emitted.block=e-1);for(var n=t._emitted.block+1;n<=e;n++)t.emit("block",n);t._emitted.block!==e&&(t._emitted.block=e,Object.keys(t._emitted).forEach((function(n){if("block"!==n){var r=t._emitted[n];"pending"!==r&&12<e-r&&delete t._emitted[n]}}))),-2===t._lastBlockNumber&&(t._lastBlockNumber=e-1);var r={},i={};return t._events.forEach((function(t){i[t.tag]=!0})),Object.keys(i).forEach((function(n){var i=n.split(":");switch(i[0]){case"tx":var o=i[1];t.getTransactionReceipt(o).then((function(e){return e&&null!=e.blockNumber&&(t._emitted["t:"+o]=e.blockNumber,t.emit(o,e)),null})).catch((function(e){t.emit("error",e)}));break;case"address":var a=i[1];t._balances[a]&&(r[a]=t._balances[a]),t.getBalance(a,"latest").then((function(e){var n=t._balances[a];if(!n||!e.eq(n))return t._balances[a]=e,t.emit(a,e),null})).catch((function(e){t.emit("error",e)}));break;case"filter":var s=function(t){return t.split(/&/g).map((function(t){var e=t.split(",");return 1===e.length?""===e[0]?null:t:e.map((function(t){return""===t?null:t}))}))}(i[2]),u={address:i[1],fromBlock:t._lastBlockNumber+1,toBlock:e,topics:s};u.address||delete u.address,t.getLogs(u).then((function(e){if(0!==e.length)return e.forEach((function(e){t._emitted["b:"+e.blockHash]=e.blockNumber,t._emitted["t:"+e.transactionHash]=e.blockNumber,t.emit(u,e)})),null})).catch((function(e){t.emit("error",e)}))}})),t._lastBlockNumber=e,t._balances=r,null}})).catch((function(t){})),this.doPoll()},G.prototype.resetEventsBlock=function(t){this._lastBlockNumber=t-1,this.polling&&this._doPoll()},Object.defineProperty(G.prototype,"network",{get:function(){return this._network},enumerable:!0,configurable:!0}),G.prototype.getNetwork=function(){return this.ready},Object.defineProperty(G.prototype,"blockNumber",{get:function(){return this._fastBlockNumber},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"polling",{get:function(){return null!=this._poller},set:function(t){var e=this;setTimeout((function(){t&&!e._poller?(e._poller=setInterval(e._doPoll.bind(e),e.pollingInterval),e._doPoll()):!t&&e._poller&&(clearInterval(e._poller),e._poller=null)}),0)},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"pollingInterval",{get:function(){return this._pollingInterval},set:function(t){var e=this;if("number"!=typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){e._doPoll()}),this._pollingInterval))},enumerable:!0,configurable:!0}),G.prototype._getFastBlockNumber=function(){var t=this,e=V();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((function(e){return(null==t._fastBlockNumber||e>t._fastBlockNumber)&&(t._fastBlockNumber=e),t._fastBlockNumber}))),this._fastBlockNumberPromise},G.prototype._setFastBlockNumber=function(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=V(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))},G.prototype.waitForTransaction=function(t,e){var n=this;return null==e&&(e=1),this.getTransactionReceipt(t).then((function(r){return 0===e||r&&r.confirmations>=e?r:new Promise((function(r){var i=function(o){o.confirmations<e||(n.removeListener(t,i),r(o))};n.on(t,i)}))}))},G.prototype.getBlockNumber=function(){var t=this;return this.ready.then((function(){return t.perform("getBlockNumber",{}).then((function(e){var n=parseInt(e);if(n!=e)throw new Error("invalid response - getBlockNumber");return t._setFastBlockNumber(n),n}))}))},G.prototype.getGasPrice=function(){var t=this;return this.ready.then((function(){return t.perform("getGasPrice",{}).then((function(t){return s.bigNumberify(t)}))}))},G.prototype.getBalance=function(t,e){var n=this;return this.ready.then((function(){return d.resolveProperties({addressOrName:t,blockTag:e}).then((function(t){var e=t.addressOrName,r=t.blockTag;return n._getAddress(e).then((function(t){var e={address:t,blockTag:S(r)};return n.perform("getBalance",e).then((function(t){return s.bigNumberify(t)}))}))}))}))},G.prototype.getTransactionCount=function(t,e){var n=this;return this.ready.then((function(){return d.resolveProperties({addressOrName:t,blockTag:e}).then((function(t){var e=t.addressOrName,r=t.blockTag;return n._getAddress(e).then((function(t){var e={address:t,blockTag:S(r)};return n.perform("getTransactionCount",e).then((function(t){return s.bigNumberify(t).toNumber()}))}))}))}))},G.prototype.getCode=function(t,e){var n=this;return this.ready.then((function(){return d.resolveProperties({addressOrName:t,blockTag:e}).then((function(t){var e=t.addressOrName,r=t.blockTag;return n._getAddress(e).then((function(t){var e={address:t,blockTag:S(r)};return n.perform("getCode",e).then((function(t){return u.hexlify(t)}))}))}))}))},G.prototype.getStorageAt=function(t,e,n){var r=this;return this.ready.then((function(){return d.resolveProperties({addressOrName:t,position:e,blockTag:n}).then((function(t){var e=t.addressOrName,n=t.position,i=t.blockTag;return r._getAddress(e).then((function(t){var e={address:t,blockTag:S(i),position:u.hexStripZeros(u.hexlify(n))};return r.perform("getStorageAt",e).then((function(t){return u.hexlify(t)}))}))}))}))},G.prototype.sendTransaction=function(t){var e=this;return this.ready.then((function(){return d.resolveProperties({signedTransaction:t}).then((function(t){var n=t.signedTransaction,r={signedTransaction:u.hexlify(n)};return e.perform("sendTransaction",r).then((function(t){return e._wrapTransaction(p.parse(n),t)}),(function(t){throw t.transaction=p.parse(n),t.transaction.hash&&(t.transactionHash=t.transaction.hash),t}))}))}))},G.prototype._wrapTransaction=function(t,e){var n=this;if(null!=e&&32!==u.hexDataLength(e))throw new Error("invalid response - sendTransaction");var r=t;return null!=e&&t.hash!==e&&v.throwError("Transaction hash mismatch from Provider.sendTransaction.",v.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),r.wait=function(e){return 0!==e&&(n._emitted["t:"+t.hash]="pending"),n.waitForTransaction(t.hash,e).then((function(r){return null==r&&0===e?null:(n._emitted["t:"+t.hash]=r.blockNumber,0===r.status&&v.throwError("transaction failed",v.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t}),r)}))},r},G.prototype.call=function(t,e){var n=this,r=d.shallowCopy(t);return this.ready.then((function(){return d.resolveProperties({blockTag:e,tx:r}).then((function(t){var e=t.blockTag,r=t.tx;return n._resolveNames(r,["to","from"]).then((function(t){var r={blockTag:S(e),transaction:N(t)};return n.perform("call",r).then((function(t){return u.hexlify(t)}))}))}))}))},G.prototype.estimateGas=function(t){var e=this,n={to:t.to,from:t.from,data:t.data,gasPrice:t.gasPrice,value:t.value};return this.ready.then((function(){return d.resolveProperties(n).then((function(t){return e._resolveNames(t,["to","from"]).then((function(t){var n={transaction:N(t)};return e.perform("estimateGas",n).then((function(t){return s.bigNumberify(t)}))}))}))}))},G.prototype.getBlock=function(t,e){var n=this;return this.ready.then((function(){return d.resolveProperties({blockHashOrBlockTag:t}).then((function(t){var r=t.blockHashOrBlockTag;try{var i=u.hexlify(r);if(32===u.hexDataLength(i))return g.poll((function(){return n.perform("getBlock",{blockHash:i,includeTransactions:!!e}).then((function(t){return null==t?null==n._emitted["b:"+i]?null:void 0:P(t,e)}))}),{onceBlock:n})}catch(t){}try{var o=-128,a=S(r);return u.isHexString(a)&&(o=parseInt(a.substring(2),16)),g.poll((function(){return n.perform("getBlock",{blockTag:a,includeTransactions:!!e}).then((function(t){return null!=t?P(t,e):o<=n._emitted.block?void 0:null}))}),{onceBlock:n})}catch(t){}throw new Error("invalid block hash or block tag")}))}))},G.prototype.getTransaction=function(t){var e=this;return this.ready.then((function(){return d.resolveProperties({transactionHash:t}).then((function(t){var n=t.transactionHash,r={transactionHash:k(n,!0)};return g.poll((function(){return e.perform("getTransaction",r).then((function(t){if(null==t)return null==e._emitted["t:"+n]?null:void 0;var r=G.checkTransactionResponse(t);if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations)return e._getFastBlockNumber().then((function(t){var n=t-r.blockNumber+1;return n<=0&&(n=1),r.confirmations=n,e._wrapTransaction(r)}));return e._wrapTransaction(r)}))}),{onceBlock:e})}))}))},G.prototype.getTransactionReceipt=function(t){var e=this;return this.ready.then((function(){return d.resolveProperties({transactionHash:t}).then((function(t){var n=t.transactionHash,r={transactionHash:k(n,!0)};return g.poll((function(){return e.perform("getTransactionReceipt",r).then((function(t){if(null==t)return null==e._emitted["t:"+n]?null:void 0;if(null!=t.blockHash){var r=function(t){var e=b(D,t);return e.logs.forEach((function(t,e){null==t.transactionLogIndex&&(t.transactionLogIndex=e)})),null!=t.status&&(e.byzantium=!0),e}(t);if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations)return e._getFastBlockNumber().then((function(t){var e=t-r.blockNumber+1;return e<=0&&(e=1),r.confirmations=e,r}));return r}}))}),{onceBlock:e})}))}))},G.prototype.getLogs=function(t){var e=this;return this.ready.then((function(){return d.resolveProperties(t).then((function(t){return e._resolveNames(t,["address"]).then((function(t){var n={filter:function(t){return t&&t.blockHash?b(U,t):b(B,t)}(t)};return e.perform("getLogs",n).then((function(t){return _(j)(t)}))}))}))}))},G.prototype.getEtherPrice=function(){var t=this;return this.ready.then((function(){return t.perform("getEtherPrice",{}).then((function(t){return t}))}))},G.prototype._getAddress=function(t){return this.resolveName(t).then((function(e){return null==e&&v.throwError("ENS name not configured",v.UNSUPPORTED_OPERATION,{operation:"resolveName("+JSON.stringify(t)+")"}),e}))},G.prototype._resolveNames=function(t,e){var n=[],r=d.shallowCopy(t);return e.forEach((function(t){null!=r[t]&&n.push(this._getAddress(r[t]).then((function(e){r[t]=e})))}),this),Promise.all(n).then((function(){return r}))},G.prototype._getResolver=function(t){var e=this;return this.getNetwork().then((function(n){n.ensAddress||v.throwError("network does not support ENS",v.UNSUPPORTED_OPERATION,{operation:"ENS",network:n.name});var r="0x0178b8bf"+l.namehash(t).substring(2),i={to:n.ensAddress,data:r};return e.call(i).then((function(t){if(32!==u.hexDataLength(t))return null;var e=a.getAddress(u.hexDataSlice(t,12));return e===c.AddressZero?null:e}))}))},G.prototype.resolveName=function(t){var e=this;if(t instanceof Promise)return t.then((function(t){return e.resolveName(t)}));try{return Promise.resolve(a.getAddress(t))}catch(e){if(u.isHexString(t))throw e}var n=this,r=l.namehash(t);return this._getResolver(t).then((function(t){if(null==t)return null;var e={to:t,data:"0x3b3b57de"+r.substring(2)};return n.call(e)})).then((function(t){if(32!==u.hexDataLength(t))return null;var e=a.getAddress(u.hexDataSlice(t,12));return e===c.AddressZero?null:e}))},G.prototype.lookupAddress=function(t){var e=this;if(t instanceof Promise)return t.then((function(t){return e.lookupAddress(t)}));var n=(t=a.getAddress(t)).substring(2)+".addr.reverse",r=l.namehash(n),i=this;return this._getResolver(n).then((function(t){if(!t)return null;var e={to:t,data:"0x691f3431"+r.substring(2)};return i.call(e)})).then((function(e){if(null==e)return null;if((e=e.substring(2)).length<64)return null;if((e=e.substring(64)).length<64)return null;var n=s.bigNumberify("0x"+e.substring(0,64)).toNumber();if(2*n>(e=e.substring(64)).length)return null;var r=m.toUtf8String("0x"+e.substring(0,2*n));return i.resolveName(r).then((function(e){return e!=t?null:r}))}))},G.checkTransactionResponse=function(t){return C(t)},G.prototype.doPoll=function(){},G.prototype.perform=function(t,e){return v.throwError(t+" not implemented",v.NOT_IMPLEMENTED,{operation:t}),null},G.prototype._startPending=function(){v.warn("WARNING: this provider does not support pending events")},G.prototype._stopPending=function(){},G.prototype._addEventListener=function(t,e,n){this._events.push({tag:$(t),listener:e,once:n}),"pending"===t&&this._startPending(),this.polling=!0},G.prototype.on=function(t,e){return this._addEventListener(t,e,!1),this},G.prototype.once=function(t,e){return this._addEventListener(t,e,!0),this},G.prototype.addEventListener=function(t,e){return this.on(t,e)},G.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=!1,o=$(t);return this._events=this._events.filter((function(t){return t.tag!==o||(setTimeout((function(){t.listener.apply(e,n)}),0),i=!0,!t.once)})),0===this.listenerCount()&&(this.polling=!1),i},G.prototype.listenerCount=function(t){if(!t)return this._events.length;var e=$(t);return this._events.filter((function(t){return t.tag===e})).length},G.prototype.listeners=function(t){var e=$(t);return this._events.filter((function(t){return t.tag===e})).map((function(t){return t.listener}))},G.prototype.removeAllListeners=function(t){if(null==t)this._events=[],this._stopPending();else{var e=$(t);this._events=this._events.filter((function(t){return t.tag!==e})),"pending"===t&&this._stopPending()}return 0===this._events.length&&(this.polling=!1),this},G.prototype.removeListener=function(t,e){var n=!1,r=$(t);return this._events=this._events.filter((function(t){return t.tag!==r||t.listener!=e||!!n||!(n=!0)})),"pending"===t&&0===this.listenerCount("pending")&&this._stopPending(),0===this.listenerCount()&&(this.polling=!1),this},G);function G(t){var e=z.call(this)||this;if(v.checkNew(e,y.Provider),t instanceof Promise)d.defineReadOnly(e,"ready",t.then((function(t){return d.defineReadOnly(e,"_network",t),t}))),e.ready.catch((function(t){}));else{var n=h.getNetwork(null==t?"homestead":t);n?(d.defineReadOnly(e,"_network",n),d.defineReadOnly(e,"ready",Promise.resolve(e._network))):v.throwError("invalid network",v.INVALID_ARGUMENT,{arg:"network",value:t})}return e._lastBlockNumber=-2,e._balances={},e._events=[],e._pollingInterval=4e3,e._emitted={block:-2},e._fastQueryDate=0,e}n.BaseProvider=H,d.defineReadOnly(y.Provider,"inherits",d.inheritable(y.Provider))},{"../constants":3,"../errors":5,"../utils/address":60,"../utils/bignumber":63,"../utils/bytes":64,"../utils/hash":65,"../utils/networks":72,"../utils/properties":74,"../utils/rlp":76,"../utils/transaction":83,"../utils/utf8":85,"../utils/web":86,"./abstract-provider":50}],52:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./base-provider"),s=t("../utils/bytes"),u=t("../utils/properties"),c=t("../utils/web"),l=o(t("../errors"));function h(t){var e=[];for(var n in t)if(null!=t[n]){var r=s.hexlify(t[n]);!{gasLimit:!0,gasPrice:!0,nonce:!0,value:!0}[n]||(r=s.hexStripZeros(r)),e.push(n+"="+r)}return e.join("&")}function d(t){if(0==t.status&&("No records found"===t.message||"No transactions found"===t.message))return t.result;if(1==t.status&&"OK"==t.message)return t.result;var e=new Error("invalid response");throw e.result=JSON.stringify(t),e}function f(t){if("2.0"!=t.jsonrpc)throw(e=new Error("invalid response")).result=JSON.stringify(t),e;if(t.error){var e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function p(t){if("pending"===t)throw new Error("pending not supported");return"latest"===t?t:parseInt(t.substring(2),16)}var m,g=(i(v,m=a.BaseProvider),v.prototype.perform=function(t,e){var n=this,r=this.baseUrl,i="";function o(t,e){return c.fetchJson(t,null,e||f).then((function(e){return n.emit("debug",{action:"perform",request:t,response:e,provider:n}),e}))}switch(this.apiKey&&(i+="&apikey="+this.apiKey),t){case"getBlockNumber":return o(r+="/api?module=proxy&action=eth_blockNumber"+i);case"getGasPrice":return o(r+="/api?module=proxy&action=eth_gasPrice"+i);case"getBalance":return r+="/api?module=account&action=balance&address="+e.address,o(r+="&tag="+e.blockTag+i,d);case"getTransactionCount":return r+="/api?module=proxy&action=eth_getTransactionCount&address="+e.address,o(r+="&tag="+e.blockTag+i);case"getCode":return r+="/api?module=proxy&action=eth_getCode&address="+e.address,o(r+="&tag="+e.blockTag+i,f);case"getStorageAt":return r+="/api?module=proxy&action=eth_getStorageAt&address="+e.address,r+="&position="+e.position,o(r+="&tag="+e.blockTag+i,f);case"sendTransaction":return r+="/api?module=proxy&action=eth_sendRawTransaction&hex="+e.signedTransaction,o(r+=i).catch((function(t){throw t.responseText&&(0<=t.responseText.toLowerCase().indexOf("insufficient funds")&&l.throwError("insufficient funds",l.INSUFFICIENT_FUNDS,{}),0<=t.responseText.indexOf("same hash was already imported")&&l.throwError("nonce has already been used",l.NONCE_EXPIRED,{}),0<=t.responseText.indexOf("another transaction with same nonce")&&l.throwError("replacement fee too low",l.REPLACEMENT_UNDERPRICED,{})),t}));case"getBlock":return e.blockTag?(r+="/api?module=proxy&action=eth_getBlockByNumber&tag="+e.blockTag,e.includeTransactions?r+="&boolean=true":r+="&boolean=false",o(r+=i)):Promise.reject(new Error("getBlock by blockHash not implemeneted"));case"getTransaction":return r+="/api?module=proxy&action=eth_getTransactionByHash&txhash="+e.transactionHash,o(r+=i);case"getTransactionReceipt":return r+="/api?module=proxy&action=eth_getTransactionReceipt&txhash="+e.transactionHash,o(r+=i);case"call":return r+="/api?module=proxy&action=eth_call"+(a=(a=h(e.transaction))&&"&"+a),"latest"!==e.blockTag?Promise.reject(new Error("EtherscanProvider does not support blockTag for call")):o(r+=i);case"estimateGas":var a;return r+="/api?module=proxy&action=eth_estimateGas&"+(a=(a=h(e.transaction))&&"&"+a),o(r+=i);case"getLogs":r+="/api?module=logs&action=getLogs";try{if(e.filter.fromBlock&&(r+="&fromBlock="+p(e.filter.fromBlock)),e.filter.toBlock&&(r+="&toBlock="+p(e.filter.toBlock)),e.filter.blockHash)try{l.throwError("Etherscan does not support blockHash filters",l.UNSUPPORTED_OPERATION,{operation:"getLogs(blockHash)"})}catch(t){return Promise.reject(t)}if(e.filter.address&&(r+="&address="+e.filter.address),e.filter.topics&&0<e.filter.topics.length){if(1<e.filter.topics.length)throw new Error("unsupported topic format");var s=e.filter.topics[0];if("string"!=typeof s||66!==s.length)throw new Error("unsupported topic0 format");r+="&topic0="+s}}catch(t){return Promise.reject(t)}var u=this;return o(r+=i,d).then((function(t){var e={},n=Promise.resolve();return t.forEach((function(t){n=n.then((function(){return null!=t.blockHash?null:(t.blockHash=e[t.transactionHash],null==t.blockHash?u.getTransaction(t.transactionHash).then((function(n){return e[t.transactionHash]=n.blockHash,t.blockHash=n.blockHash,null})):null)}))})),n.then((function(){return t}))}));case"getEtherPrice":return"homestead"!==this.network.name?Promise.resolve(0):(r+="/api?module=stats&action=ethprice",o(r+=i,d).then((function(t){return parseFloat(t.ethusd)})))}return m.prototype.perform.call(this,t,e)},v.prototype.getHistory=function(t,e,n){var r=this,i=this.baseUrl,o="";return this.apiKey&&(o+="&apikey="+this.apiKey),null==e&&(e=0),null==n&&(n=99999999),this.resolveName(t).then((function(t){return i+="/api?module=account&action=txlist&address="+t,i+="&startblock="+e,i+="&endblock="+n,i+="&sort=asc"+o,c.fetchJson(i,null,d).then((function(t){r.emit("debug",{action:"getHistory",request:i,response:t,provider:r});var e=[];return t.forEach((function(t){["contractAddress","to"].forEach((function(e){""==t[e]&&delete t[e]})),null==t.creates&&null!=t.contractAddress&&(t.creates=t.contractAddress);var n=a.BaseProvider.checkTransactionResponse(t);t.timeStamp&&(n.timestamp=parseInt(t.timeStamp)),e.push(n)})),e}))}))},v);function v(t,e){var n=m.call(this,t)||this;l.checkNew(n,v);var r="invalid";n.network&&(r=n.network.name);var i=null;switch(r){case"homestead":i="https://api.etherscan.io";break;case"ropsten":i="https://api-ropsten.etherscan.io";break;case"rinkeby":i="https://api-rinkeby.etherscan.io";break;case"kovan":i="https://api-kovan.etherscan.io";break;case"goerli":i="https://api-goerli.etherscan.io";break;default:throw new Error("unsupported network")}return u.defineReadOnly(n,"baseUrl",i),u.defineReadOnly(n,"apiKey",e||"8FG3JMZ9USS4NTA6YKEKHINU56SEPPVBJR"),n}n.EtherscanProvider=g},{"../errors":5,"../utils/bytes":64,"../utils/properties":74,"../utils/web":86,"./base-provider":51}],53:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./base-provider"),s=o(t("../errors"));function u(t){var e=!0,n=null;return t.forEach((function(r){null!=r?null!=n?n.name===r.name&&n.chainId===r.chainId&&(n.ensAddress===r.ensAddress||null==n.ensAddress&&null==r.ensAddress)||s.throwError("provider mismatch",s.INVALID_ARGUMENT,{arg:"networks",value:t}):n=r:e=!1})),e}var c,l=(i(h,c=a.BaseProvider),Object.defineProperty(h.prototype,"providers",{get:function(){return this._providers.slice(0)},enumerable:!0,configurable:!0}),h.prototype.perform=function(t,e){var n=this.providers;return new Promise((function(r,i){var o=null;!function a(){n.length?n.shift().perform(t,e).then((function(t){return r(t)})).catch((function(t){o=o||t,setTimeout(a,0)})):i(o)}()}))},h);function h(t){var e=this;if(0===t.length)throw new Error("no providers");if(u(t.map((function(t){return t.network}))))e=c.call(this,t[0].network)||this;else{var n=Promise.all(t.map((function(t){return t.getNetwork()}))).then((function(t){return u(t)||s.throwError("getNetwork returned null",s.UNKNOWN_ERROR,{}),t[0]}));e=c.call(this,n)||this}return s.checkNew(e,h),e._providers=t.slice(0),e}n.FallbackProvider=l},{"../errors":5,"./base-provider":51}],54:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./abstract-provider");n.Provider=r.Provider;var i=t("./base-provider");n.BaseProvider=i.BaseProvider;var o=t("./etherscan-provider");n.EtherscanProvider=o.EtherscanProvider;var a=t("./fallback-provider");n.FallbackProvider=a.FallbackProvider;var s=t("./ipc-provider");n.IpcProvider=s.IpcProvider;var u=t("./infura-provider");n.InfuraProvider=u.InfuraProvider;var c=t("./json-rpc-provider");n.JsonRpcProvider=c.JsonRpcProvider,n.JsonRpcSigner=c.JsonRpcSigner;var l=t("./web3-provider");n.Web3Provider=l.Web3Provider},{"./abstract-provider":50,"./base-provider":51,"./etherscan-provider":52,"./fallback-provider":53,"./infura-provider":55,"./ipc-provider":56,"./json-rpc-provider":57,"./web3-provider":58}],55:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("./json-rpc-provider"),u=t("../utils/bytes"),c=t("../utils/networks"),l=t("../utils/properties"),h=o(t("../errors")),d=(i(f,a=s.JsonRpcProvider),f.prototype._startPending=function(){h.warn("WARNING: INFURA does not support pending filters")},f.prototype.getSigner=function(t){return h.throwError("INFURA does not support signing",h.UNSUPPORTED_OPERATION,{operation:"getSigner"})},f.prototype.listAccounts=function(){return Promise.resolve([])},f);function f(t,e){var n=this,r=c.getNetwork(null==t?"homestead":t);null==e&&(e="7d0d81d0919f4f05b9ab6634be01ee73");var i=null;switch(r.name){case"homestead":i="mainnet.infura.io";break;case"ropsten":i="ropsten.infura.io";break;case"rinkeby":i="rinkeby.infura.io";break;case"goerli":i="goerli.infura.io";break;case"kovan":i="kovan.infura.io";break;default:h.throwError("unsupported network",h.INVALID_ARGUMENT,{argument:"network",value:t})}return u.isHexString("0x"+e,16)?(n=a.call(this,"https://"+i+"/v3/"+e,r)||this,l.defineReadOnly(n,"apiAccessToken",null),l.defineReadOnly(n,"projectId",e)):(h.warn("The legacy INFURA apiAccesToken API is deprecated; please upgrade to a Project ID instead (see INFURA dshboard; https://infura.io)"),n=a.call(this,"https://"+i+"/"+e,r)||this,l.defineReadOnly(n,"apiAccessToken",e),l.defineReadOnly(n,"projectId",null)),h.checkNew(n,f),n}n.InfuraProvider=d},{"../errors":5,"../utils/bytes":64,"../utils/networks":72,"../utils/properties":74,"./json-rpc-provider":57}],56:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0})},{}],57:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./base-provider"),s=t("../abstract-signer"),u=o(t("../errors")),c=t("../utils/address"),l=t("../utils/bytes"),h=t("../utils/networks"),d=t("../utils/properties"),f=t("../utils/utf8"),p=t("../utils/web");function m(t){if(t.error){var e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function g(t){return t?t.toLowerCase():t}var v,y={},b=42,w=(i(_,v=s.Signer),_.prototype.getAddress=function(){var t=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((function(e){return e.length<=t._index&&u.throwError("unknown account #"+t._index,u.UNSUPPORTED_OPERATION,{operation:"getAddress"}),t._address=c.getAddress(e[t._index]),t._address}))},_.prototype.getBalance=function(t){return this.provider.getBalance(this.getAddress(),t)},_.prototype.getTransactionCount=function(t){return this.provider.getTransactionCount(this.getAddress(),t)},_.prototype.sendUncheckedTransaction=function(t){var e=this;t=d.shallowCopy(t);var n=this.getAddress().then((function(t){return t&&t.toLowerCase()}));if(null==t.gasLimit){var r=d.shallowCopy(t);r.from=n,t.gasLimit=this.provider.estimateGas(r)}return Promise.all([d.resolveProperties(t),n]).then((function(t){var n=t[0],r=x.hexlifyTransaction(n);return r.from=t[1],e.provider.send("eth_sendTransaction",[r]).then((function(t){return t}),(function(t){throw t.responseText&&(0<=t.responseText.indexOf("insufficient funds")&&u.throwError("insufficient funds",u.INSUFFICIENT_FUNDS,{transaction:n}),0<=t.responseText.indexOf("nonce too low")&&u.throwError("nonce has already been used",u.NONCE_EXPIRED,{transaction:n}),0<=t.responseText.indexOf("replacement transaction underpriced")&&u.throwError("replacement fee too low",u.REPLACEMENT_UNDERPRICED,{transaction:n})),t}))}))},_.prototype.sendTransaction=function(t){var e=this;return this.sendUncheckedTransaction(t).then((function(t){return p.poll((function(){return e.provider.getTransaction(t).then((function(n){if(null!==n)return e.provider._wrapTransaction(n,t)}))}),{fastRetry:250,onceBlock:e.provider}).catch((function(e){throw e.transactionHash=t,e}))}))},_.prototype.signMessage=function(t){var e=this,n="string"==typeof t?f.toUtf8Bytes(t):t;return this.getAddress().then((function(t){return e.provider.send("eth_sign",[t.toLowerCase(),l.hexlify(n)])}))},_.prototype.unlock=function(t){var e=this.provider;return this.getAddress().then((function(n){return e.send("personal_unlockAccount",[n.toLowerCase(),t,null])}))},_);function _(t,e,n){var r=v.call(this)||this;if(u.checkNew(r,_),t!==y)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return d.defineReadOnly(r,"provider",e),n?"string"==typeof n?d.defineReadOnly(r,"_address",c.getAddress(n)):"number"==typeof n?d.defineReadOnly(r,"_index",n):u.throwError("invalid address or index",u.INVALID_ARGUMENT,{argument:"addressOrIndex",value:n}):d.defineReadOnly(r,"_index",0),r}n.JsonRpcSigner=w;var k,E={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0},x=(i(S,k=a.BaseProvider),S.prototype.getSigner=function(t){return new w(y,this,t)},S.prototype.listAccounts=function(){return this.send("eth_accounts",[]).then((function(t){return t.map((function(t){return c.getAddress(t)}))}))},S.prototype.send=function(t,e){var n=this,r={method:t,params:e,id:b++,jsonrpc:"2.0"};return p.fetchJson(this.connection,JSON.stringify(r),m).then((function(t){return n.emit("debug",{action:"send",request:r,response:t,provider:n}),t}))},S.prototype.perform=function(t,e){switch(t){case"getBlockNumber":return this.send("eth_blockNumber",[]);case"getGasPrice":return this.send("eth_gasPrice",[]);case"getBalance":return this.send("eth_getBalance",[g(e.address),e.blockTag]);case"getTransactionCount":return this.send("eth_getTransactionCount",[g(e.address),e.blockTag]);case"getCode":return this.send("eth_getCode",[g(e.address),e.blockTag]);case"getStorageAt":return this.send("eth_getStorageAt",[g(e.address),e.position,e.blockTag]);case"sendTransaction":return this.send("eth_sendRawTransaction",[e.signedTransaction]).catch((function(t){throw t.responseText&&(0<t.responseText.indexOf("insufficient funds")&&u.throwError("insufficient funds",u.INSUFFICIENT_FUNDS,{}),0<t.responseText.indexOf("nonce too low")&&u.throwError("nonce has already been used",u.NONCE_EXPIRED,{}),0<t.responseText.indexOf("replacement transaction underpriced")&&u.throwError("replacement fee too low",u.REPLACEMENT_UNDERPRICED,{})),t}));case"getBlock":return e.blockTag?this.send("eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]):e.blockHash?this.send("eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]):Promise.reject(new Error("invalid block tag or block hash"));case"getTransaction":return this.send("eth_getTransactionByHash",[e.transactionHash]);case"getTransactionReceipt":return this.send("eth_getTransactionReceipt",[e.transactionHash]);case"call":return this.send("eth_call",[S.hexlifyTransaction(e.transaction,{from:!0}),e.blockTag]);case"estimateGas":return this.send("eth_estimateGas",[S.hexlifyTransaction(e.transaction,{from:!0})]);case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=g(e.filter.address)),this.send("eth_getLogs",[e.filter])}return u.throwError(t+" not implemented",u.NOT_IMPLEMENTED,{operation:t}),null},S.prototype._startPending=function(){if(null==this._pendingFilter){var t=this,e=this.send("eth_newPendingTransactionFilter",[]);(this._pendingFilter=e).then((function(n){return function r(){t.send("eth_getFilterChanges",[n]).then((function(n){if(t._pendingFilter!=e)return null;var r=Promise.resolve();return n.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",r=r.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),r.then((function(){return new Promise((function(t){setTimeout((function(){t()}),1e3)}))}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){r()}),0),null;t.send("eth_uninstallFilter",[n])})).catch((function(t){}))}(),n})).catch((function(t){}))}},S.prototype._stopPending=function(){this._pendingFilter=null},S.hexlifyTransaction=function(t,e){var n=d.shallowCopy(E);if(e)for(var r in e)e[r]&&(n[r]=!0);d.checkProperties(t,n);var i={};return["gasLimit","gasPrice","nonce","value"].forEach((function(e){if(null!=t[e]){var n=l.hexStripZeros(l.hexlify(t[e]));"gasLimit"===e&&(e="gas"),i[e]=n}})),["from","to","data"].forEach((function(e){null!=t[e]&&(i[e]=l.hexlify(t[e]))})),i},S);function S(t,e){var n=this;if("string"==typeof t&&null===e&&h.getNetwork(t)&&(e=t,t=null),e)n=k.call(this,e)||this;else{var r=new Promise((function(t,e){setTimeout((function(){n.send("net_version",[]).then((function(e){return t(h.getNetwork(parseInt(e)))})).catch((function(t){e(t)}))}))}));n=k.call(this,r)||this}return u.checkNew(n,S),t=t||"http://localhost:8545",n.connection="string"==typeof t?{url:t}:t,n}n.JsonRpcProvider=x},{"../abstract-signer":2,"../errors":5,"../utils/address":60,"../utils/bytes":64,"../utils/networks":72,"../utils/properties":74,"../utils/utf8":85,"../utils/web":86,"./base-provider":51}],58:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("./json-rpc-provider"),u=t("../utils/properties"),c=o(t("../errors")),l=42,h=(i(d,a=s.JsonRpcProvider),d.prototype.send=function(t,e){var n=this;return"eth_sign"==t&&this._web3Provider.isMetaMask&&(t="personal_sign",e=[e[1],e[0]]),new Promise((function(r,i){var o={method:t,params:e,id:l++,jsonrpc:"2.0"};n._sendAsync(o,(function(t,e){if(t)i(t);else{if(e.error){var n=new Error(e.error.message);return n.code=e.error.code,n.data=e.error.data,void i(n)}r(e.result)}}))}))},d);function d(t,e){var n=a.call(this,t.host||t.path||"",e)||this;return c.checkNew(n,d),t&&(t.sendAsync?n._sendAsync=t.sendAsync.bind(t):t.send&&(n._sendAsync=t.send.bind(t))),t&&n._sendAsync||c.throwError("invalid web3Provider",c.INVALID_ARGUMENT,{arg:"web3Provider",value:t}),u.defineReadOnly(n,"_web3Provider",t),u.defineReadOnly(n,"provider",t),n}n.Web3Provider=h},{"../errors":5,"../utils/properties":74,"./json-rpc-provider":57}],59:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../constants"),s=o(t("../errors")),u=t("./address"),c=t("./bignumber"),l=t("./bytes"),h=t("./utf8"),d=t("./properties"),f=new RegExp(/^bytes([0-9]*)$/),p=new RegExp(/^(u?int)([0-9]*)$/),m=new RegExp(/^(.*)\[([0-9]*)\]$/);n.defaultCoerceFunc=function(t,e){var n=t.match(p);return n&&parseInt(n[2])<=48?e.toNumber():e};var g=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),v=new RegExp("^[A-Za-z_][A-Za-z0-9_]*$");function y(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}function b(t,e){var n=t;function r(t){throw new Error('unexpected character "'+n[t]+'" at position '+t+' in "'+n+'"')}t=t.replace(/\s/g," ");for(var i={type:"",name:"",state:{allowType:!0}},o=i,a=0;a<t.length;a++){var s=t[a];switch(s){case"(":o.state.allowParams||r(a),o.state.allowType=!1,o.type=y(o.type),o.components=[{type:"",name:"",parent:o,state:{allowType:!0}}],o=o.components[0];break;case")":delete o.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),o.type=y(o.type);var u=o;(o=o.parent)||r(a),delete u.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),o.type=y(o.type);var c={type:"",name:"",parent:o.parent,state:{allowType:!0}};o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&""!==o.type&&(o.type=y(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&(e&&"indexed"===o.name?(o.indexed=!0,o.name=""):o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:r(a)}}if(o.parent)throw new Error("unexpected eof");return delete i.state,e&&"indexed"===o.name&&(o.indexed=!0,o.name=""),i.type=y(i.type),i}function w(t){return at(n.defaultCoerceFunc,t).type}function _(t,e,n,r,i){this.coerceFunc=t,this.name=e,this.type=n,this.localName=r,this.dynamic=i}n.parseParamType=function(t){return b(t,!0)},n.formatParamType=w,n.formatSignature=function(t){return t.name+"("+t.inputs.map((function(t){return w(t)})).join(",")+")"},n.parseSignature=function(t){if("string"==typeof t)return"event "===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).substring(0,6)?function(t){var e={anonymous:!1,inputs:[],name:"",type:"event"},n=t.match(g);if(!n)throw new Error("invalid event: "+t);if(e.name=n[1].trim(),it(n[2]).forEach((function(t){(t=b(t,!0)).indexed=!!t.indexed,e.inputs.push(t)})),n[3].split(" ").forEach((function(t){switch(t){case"anonymous":e.anonymous=!0;break;case"":break;default:s.info("unknown modifier: "+t)}})),e.name&&!e.name.match(v))throw new Error('invalid identifier: "'+e.name+'"');return e}(t.substring(6).trim()):("function "===t.substring(0,9)&&(t=t.substring(9)),function(t){var e={constant:!1,gas:null,inputs:[],name:"",outputs:[],payable:!1,stateMutability:null,type:"function"},n=t.split("@");if(1!==n.length){if(2<n.length)throw new Error("invalid signature");if(!n[1].match(/^[0-9]+$/))throw new Error("invalid signature gas");e.gas=c.bigNumberify(n[1]),t=n[0]}var r=(n=t.split(" returns "))[0].match(g);if(!r)throw new Error("invalid signature");if(e.name=r[1].trim(),!e.name.match(v))throw new Error('invalid identifier: "'+r[1]+'"');if(it(r[2]).forEach((function(t){e.inputs.push(b(t))})),r[3].split(" ").forEach((function(t){switch(t){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:s.info("unknown modifier: "+t)}})),1<n.length){var i=n[1].match(g);if(""!=i[1].trim()||""!=i[3].trim())throw new Error("unexpected tokens");it(i[2]).forEach((function(t){e.outputs.push(b(t))}))}if("constructor"===e.name){if(e.type="constructor",e.outputs.length)throw new Error("constructor may not have outputs");delete e.name,delete e.outputs}return e}(t.trim()));throw new Error("unknown signature")};var k,E=(i(x,k=_),x.prototype.encode=function(t){return this.coder.encode(t)},x.prototype.decode=function(t,e){return this.coder.decode(t,e)},x);function x(t){var e=k.call(this,t.coerceFunc,t.name,t.type,void 0,t.dynamic)||this;return d.defineReadOnly(e,"coder",t),e}var S,T=(i(C,S=_),C.prototype.encode=function(t){return l.arrayify([])},C.prototype.decode=function(t,e){if(e>t.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}},C);function C(t,e){return S.call(this,t,"null","",e,!1)||this}var I,A=(i(P,I=_),P.prototype.encode=function(t){try{var e=c.bigNumberify(t);if(this.signed){var n=a.MaxUint256.maskn(8*this.size-1);if(e.gt(n))throw new Error("out-of-bounds");if(n=n.add(a.One).mul(a.NegativeOne),e.lt(n))throw new Error("out-of-bounds")}else if(e.lt(a.Zero)||e.gt(a.MaxUint256.maskn(8*this.size)))throw new Error("out-of-bounds");return e=e.toTwos(8*this.size).maskn(8*this.size),this.signed&&(e=e.fromTwos(8*this.size).toTwos(256)),l.padZeros(l.arrayify(e),32)}catch(e){s.throwError("invalid number value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:t})}return null},P.prototype.decode=function(t,e){t.length<e+32&&s.throwError("insufficient data for "+this.name+" type",s.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:l.hexlify(t.slice(e,e+32))});var n=32-this.size,r=c.bigNumberify(t.slice(e+n,e+32));return r=this.signed?r.fromTwos(8*this.size):r.maskn(8*this.size),{consumed:32,value:this.coerceFunc(this.name,r)}},P);function P(t,e,n,r){var i=this,o=(n?"int":"uint")+8*e;return(i=I.call(this,t,o,o,r,!1)||this).size=e,i.signed=n,i}var M,N=new A((function(t,e){return e}),32,!1,"none"),L=(i(D,M=_),D.prototype.encode=function(t){return N.encode(t?1:0)},D.prototype.decode=function(t,e){try{var n=N.decode(t,e)}catch(t){throw"insufficient data for uint256 type"===t.reason&&s.throwError("insufficient data for boolean type",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"boolean",value:t.value}),t}return{consumed:n.consumed,value:this.coerceFunc("bool",!n.value.isZero())}},D);function D(t,e){return M.call(this,t,"bool","bool",e,!1)||this}var R,O=(i(B,R=_),B.prototype.encode=function(t){var e=new Uint8Array(32);try{var n=l.arrayify(t);if(n.length!==this.length)throw new Error("incorrect data length");e.set(n)}catch(e){s.throwError("invalid "+this.name+" value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:e.value||t})}return e},B.prototype.decode=function(t,e){return t.length<e+32&&s.throwError("insufficient data for "+this.name+" type",s.INVALID_ARGUMENT,{arg:this.localName,coderType:this.name,value:l.hexlify(t.slice(e,e+32))}),{consumed:32,value:this.coerceFunc(this.name,l.hexlify(t.slice(e,e+this.length)))}},B);function B(t,e,n){var r=this,i="bytes"+e;return(r=R.call(this,t,i,i,n,!1)||this).length=e,r}var U,F=(i(j,U=_),j.prototype.encode=function(t){var e=new Uint8Array(32);try{e.set(l.arrayify(u.getAddress(t)),12)}catch(e){s.throwError("invalid address",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:t})}return e},j.prototype.decode=function(t,e){return t.length<e+32&&s.throwError("insufficuent data for address type",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"address",value:l.hexlify(t.slice(e,e+32))}),{consumed:32,value:this.coerceFunc("address",u.getAddress(l.hexlify(t.slice(e+12,e+32))))}},j);function j(t,e){return U.call(this,t,"address","address",e,!1)||this}function q(t){var e=32*Math.ceil(t.length/32),n=new Uint8Array(e-t.length);return l.concat([N.encode(t.length),t,n])}function $(t,e,n){t.length<e+32&&s.throwError("insufficient data for dynamicBytes length",s.INVALID_ARGUMENT,{arg:n,coderType:"dynamicBytes",value:l.hexlify(t.slice(e,e+32))});var r=N.decode(t,e).value;try{r=r.toNumber()}catch(t){s.throwError("dynamic bytes count too large",s.INVALID_ARGUMENT,{arg:n,coderType:"dynamicBytes",value:r.toString()})}return t.length<e+32+r&&s.throwError("insufficient data for dynamicBytes type",s.INVALID_ARGUMENT,{arg:n,coderType:"dynamicBytes",value:l.hexlify(t.slice(e,e+32+r))}),{consumed:32+32*Math.ceil(r/32),value:t.slice(e+32,e+32+r)}}var V,z=(i(H,V=_),H.prototype.encode=function(t){try{return q(l.arrayify(t))}catch(t){s.throwError("invalid bytes value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"bytes",value:t.value})}return null},H.prototype.decode=function(t,e){var n=$(t,e,this.localName);return n.value=this.coerceFunc("bytes",l.hexlify(n.value)),n},H);function H(t,e){return V.call(this,t,"bytes","bytes",e,!0)||this}var G,W=(i(K,G=_),K.prototype.encode=function(t){return"string"!=typeof t&&s.throwError("invalid string value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"string",value:t}),q(h.toUtf8Bytes(t))},K.prototype.decode=function(t,e){var n=$(t,e,this.localName);return n.value=this.coerceFunc("string",h.toUtf8String(n.value)),n},K);function K(t,e){return G.call(this,t,"string","string",e,!0)||this}function Z(t){return 32*Math.ceil(t/32)}function Q(t,e){if(Array.isArray(e));else if(e&&"object"==typeof e){var n=[];t.forEach((function(t){n.push(e[t.localName])})),e=n}else s.throwError("invalid tuple value",s.INVALID_ARGUMENT,{coderType:"tuple",value:e});t.length!==e.length&&s.throwError("types/value length mismatch",s.INVALID_ARGUMENT,{coderType:"tuple",value:e});var r=[];t.forEach((function(t,n){r.push({dynamic:t.dynamic,value:t.encode(e[n])})}));var i=0,o=0;r.forEach((function(t){t.dynamic?(i+=32,o+=Z(t.value.length)):i+=Z(t.value.length)}));var a=0,u=i,c=new Uint8Array(i+o);return r.forEach((function(t){t.dynamic?(c.set(N.encode(u),a),a+=32,c.set(t.value,u),u+=Z(t.value.length)):(c.set(t.value,a),a+=Z(t.value.length))})),c}function Y(t,e,n){var r=n,i=0,o=[];return t.forEach((function(t){if(t.dynamic){var a=N.decode(e,n);(s=t.decode(e,r+a.value.toNumber())).consumed=a.consumed}else var s=t.decode(e,n);null!=s.value&&o.push(s.value),n+=s.consumed,i+=s.consumed})),t.forEach((function(t,e){var n=t.localName;n&&("length"===n&&(n="_length"),null==o[n]&&(o[n]=o[e]))})),{value:o,consumed:i}}var X,J=(i(tt,X=_),tt.prototype.encode=function(t){Array.isArray(t)||s.throwError("expected array value",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:t});var e=this.length,n=new Uint8Array(0);-1===e&&(e=t.length,n=N.encode(e)),s.checkArgumentCount(e,t.length," in coder array"+(this.localName?" "+this.localName:""));for(var r=[],i=0;i<t.length;i++)r.push(this.coder);return l.concat([n,Q(r,t)])},tt.prototype.decode=function(t,e){var n=0,r=this.length;if(-1===r){try{var i=N.decode(t,e)}catch(t){s.throwError("insufficient data for dynamic array length",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:t.value})}try{r=i.value.toNumber()}catch(t){s.throwError("array count too large",s.INVALID_ARGUMENT,{arg:this.localName,coderType:"array",value:i.value.toString()})}n+=i.consumed,e+=i.consumed}for(var o=[],a=0;a<r;a++)o.push(new E(this.coder));var u=Y(o,t,e);return u.consumed+=n,u.value=this.coerceFunc(this.type,u.value),u},tt);function tt(t,e,n,r){var i=this,o=e.type+"["+(0<=n?n:"")+"]",a=-1===n||e.dynamic;return(i=X.call(this,t,"array",o,r,a)||this).coder=e,i.length=n,i}var et,nt=(i(rt,et=_),rt.prototype.encode=function(t){return Q(this.coders,t)},rt.prototype.decode=function(t,e){var n=Y(this.coders,t,e);return n.value=this.coerceFunc(this.type,n.value),n},rt);function rt(t,e,n){var r=this,i=!1,o=[];e.forEach((function(t){t.dynamic&&(i=!0),o.push(t.type)}));var a="tuple("+o.join(",")+")";return(r=et.call(this,t,"tuple",a,n,i)||this).coders=e,r}function it(t){t=t.trim();for(var e=[],n="",r=0,i=0;i<t.length;i++){var o=t[i];if(","===o&&0===r)e.push(n),n="";else if(n+=o,"("===o)r++;else if(")"===o&&-1==--r)throw new Error("unbalanced parenthsis")}return n&&e.push(n),e}var ot={address:F,bool:L,string:W,bytes:z};function at(t,e){var n,r=ot[e.type];if(r)return new r(t,e.name);if(n=e.type.match(p))return(0===(i=parseInt(n[2]||"256"))||256<i||i%8!=0)&&s.throwError("invalid "+n[1]+" bit length",s.INVALID_ARGUMENT,{arg:"param",value:e}),new A(t,i/8,"int"===n[1],e.name);if(n=e.type.match(f))return(0===(i=parseInt(n[1]))||32<i)&&s.throwError("invalid bytes length",s.INVALID_ARGUMENT,{arg:"param",value:e}),new O(t,i,e.name);if(n=e.type.match(m)){var i=parseInt(n[2]||"-1");return(e=d.shallowCopy(e)).type=n[1],e=d.deepCopy(e),new J(t,at(t,e),i,e.name)}return"tuple"===e.type.substring(0,5)?function(t,e,n){var r=[];return(e=e||[]).forEach((function(e){r.push(at(t,e))})),new nt(t,r,n)}(t,e.components,e.name):""===e.type?new T(t,e.name):(s.throwError("invalid type",s.INVALID_ARGUMENT,{arg:"type",value:e.type}),null)}var st=(ut.prototype.encode=function(t,e){t.length!==e.length&&s.throwError("types/values length mismatch",s.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});var n=[];return t.forEach((function(t){var e;e="string"==typeof t?b(t):t,n.push(at(this.coerceFunc,e))}),this),l.hexlify(new nt(this.coerceFunc,n,"_").encode(e))},ut.prototype.decode=function(t,e){var n=[];return t.forEach((function(t){var e;e="string"==typeof t?b(t):d.deepCopy(t),n.push(at(this.coerceFunc,e))}),this),new nt(this.coerceFunc,n,"_").decode(l.arrayify(e),0).value},ut);function ut(t){s.checkNew(this,ut),t=t||n.defaultCoerceFunc,d.defineReadOnly(this,"coerceFunc",t)}n.AbiCoder=st,n.defaultAbiCoder=new st},{"../constants":3,"../errors":5,"./address":60,"./bignumber":63,"./bytes":64,"./properties":74,"./utf8":85}],60:[function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("bn.js")),o=t("./bytes"),a=t("./keccak256"),s=t("./rlp"),u=t("../errors");function c(t){"string"==typeof t&&t.match(/^0x[0-9A-Fa-f]{40}$/)||u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:t});for(var e=(t=t.toLowerCase()).substring(2).split(""),n=new Uint8Array(40),r=0;r<40;r++)n[r]=e[r].charCodeAt(0);n=o.arrayify(a.keccak256(n));for(var i=0;i<40;i+=2)8<=n[i>>1]>>4&&(e[i]=e[i].toUpperCase()),8<=(15&n[i>>1])&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}for(var l={},h=0;h<10;h++)l[String(h)]=String(h);for(h=0;h<26;h++)l[String.fromCharCode(65+h)]=String(10+h);var d,f=Math.floor((d=9007199254740991,Math.log10?Math.log10(d):Math.log(d)/Math.LN10));function p(t){t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00";var e="";for(t.split("").forEach((function(t){e+=l[t]}));e.length>=f;){var n=e.substring(0,f);e=parseInt(n,10)%97+e.substring(n.length)}for(var r=String(98-parseInt(e,10)%97);r.length<2;)r="0"+r;return r}function m(t){var e=null;if("string"!=typeof t&&u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:t}),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=c(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&u.throwError("bad address checksum",u.INVALID_ARGUMENT,{arg:"address",value:t});else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==p(t)&&u.throwError("bad icap checksum",u.INVALID_ARGUMENT,{arg:"address",value:t}),e=new i.default.BN(t.substring(4),36).toString(16);e.length<40;)e="0"+e;e=c("0x"+e)}else u.throwError("invalid address",u.INVALID_ARGUMENT,{arg:"address",value:t});return e}n.getAddress=m,n.getIcapAddress=function(t){for(var e=new i.default.BN(m(t).substring(2),16).toString(36).toUpperCase();e.length<30;)e="0"+e;return"XE"+p("XE00"+e)+e},n.getContractAddress=function(t){if(!t.from)throw new Error("missing from address");var e=t.nonce;return m("0x"+a.keccak256(s.encode([m(t.from),o.stripZeros(o.hexlify(e))])).substring(26))},n.getCreate2Address=function(t){var e=t.initCodeHash;t.initCode&&(e?a.keccak256(t.initCode)!==e&&u.throwError("initCode/initCodeHash mismatch",u.INVALID_ARGUMENT,{arg:"options",value:t}):e=a.keccak256(t.initCode)),e||u.throwError("missing initCode or initCodeHash",u.INVALID_ARGUMENT,{arg:"options",value:t});var n=m(t.from),r=o.arrayify(t.salt);return 32!==r.length&&u.throwError("invalid salt",u.INVALID_ARGUMENT,{arg:"options",value:t}),m("0x"+a.keccak256(o.concat(["0xff",n,r,e])).substring(26))}},{"../errors":5,"./bytes":64,"./keccak256":71,"./rlp":76,"bn.js":9}],61:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/bytes");e.exports={decode:function(t){t=atob(t);for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n));return r.arrayify(e)},encode:function(t){t=r.arrayify(t);for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}}},{"../utils/bytes":64}],62:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./bytes"),i=t("./properties"),o=(a.prototype.encode=function(t){var e=r.arrayify(t);if(0===e.length)return"";for(var n=[0],i=0;i<e.length;++i){for(var o=e[i],a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;0<o;)n.push(o%this.base),o=o/this.base|0}for(var s="",u=0;0===e[u]&&u<e.length-1;++u)s+=this._leader;for(var c=n.length-1;0<=c;--c)s+=this.alphabet[n[c]];return s},a.prototype.decode=function(t){if("string"!=typeof t)throw new TypeError("Expected String");var e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(var n=0;n<t.length;n++){var i=this._alphabetMap[t[n]];if(void 0===i)throw new Error("Non-base"+this.base+" character");for(var o=i,a=0;a<e.length;++a)o+=e[a]*this.base,e[a]=255&o,o>>=8;for(;0<o;)e.push(255&o),o>>=8}for(var s=0;t[s]===this._leader&&s<t.length-1;++s)e.push(0);return r.arrayify(new Uint8Array(e.reverse()))},a);function a(t){i.defineReadOnly(this,"alphabet",t),i.defineReadOnly(this,"base",t.length),i.defineReadOnly(this,"_alphabetMap",{}),i.defineReadOnly(this,"_leader",t.charAt(0));for(var e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}var s=new(n.BaseX=o)("abcdefghijklmnopqrstuvwxyz234567");n.Base32=s;var u=new o("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");n.Base58=u},{"./bytes":64,"./properties":74}],63:[function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t("bn.js")),a=t("./bytes"),s=t("./properties"),u=i(t("../errors")),c=new o.default.BN(-1);function l(t){var e=t.toString(16);return"-"===e[0]?e.length%2==0?"-0x0"+e.substring(1):"-0x"+e.substring(1):e.length%2==1?"0x0"+e:"0x"+e}function h(t){return f(g(t))}function d(t){return new p(l(t))}function f(t){var e=t._hex;return"-"===e[0]?new o.default.BN(e.substring(3),16).mul(c):new o.default.BN(e.substring(2),16)}var p=(m.prototype.fromTwos=function(t){return d(f(this).fromTwos(t))},m.prototype.toTwos=function(t){return d(f(this).toTwos(t))},m.prototype.abs=function(){return"-"===this._hex[0]?d(f(this).mul(c)):this},m.prototype.add=function(t){return d(f(this).add(h(t)))},m.prototype.sub=function(t){return d(f(this).sub(h(t)))},m.prototype.div=function(t){return g(t).isZero()&&u.throwError("division by zero",u.NUMERIC_FAULT,{operation:"divide",fault:"division by zero"}),d(f(this).div(h(t)))},m.prototype.mul=function(t){return d(f(this).mul(h(t)))},m.prototype.mod=function(t){return d(f(this).mod(h(t)))},m.prototype.pow=function(t){return d(f(this).pow(h(t)))},m.prototype.maskn=function(t){return d(f(this).maskn(t))},m.prototype.eq=function(t){return f(this).eq(h(t))},m.prototype.lt=function(t){return f(this).lt(h(t))},m.prototype.lte=function(t){return f(this).lte(h(t))},m.prototype.gt=function(t){return f(this).gt(h(t))},m.prototype.gte=function(t){return f(this).gte(h(t))},m.prototype.isZero=function(){return f(this).isZero()},m.prototype.toNumber=function(){try{return f(this).toNumber()}catch(t){u.throwError("overflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:t.message})}return null},m.prototype.toString=function(){return f(this).toString(10)},m.prototype.toHexString=function(){return this._hex},m.isBigNumber=function(t){return s.isType(t,"BigNumber")},m);function m(t){if(u.checkNew(this,m),s.setType(this,"BigNumber"),"string"==typeof t)a.isHexString(t)?("0x"==t&&(t="0x0"),s.defineReadOnly(this,"_hex",t)):"-"===t[0]&&a.isHexString(t.substring(1))?s.defineReadOnly(this,"_hex",t):t.match(/^-?[0-9]*$/)?(""==t&&(t="0"),s.defineReadOnly(this,"_hex",l(new o.default.BN(t)))):u.throwError("invalid BigNumber string value",u.INVALID_ARGUMENT,{arg:"value",value:t});else if("number"==typeof t){parseInt(String(t))!==t&&u.throwError("underflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"underflow",value:t,outputValue:parseInt(String(t))});try{s.defineReadOnly(this,"_hex",l(new o.default.BN(t)))}catch(t){u.throwError("overflow",u.NUMERIC_FAULT,{operation:"setValue",fault:"overflow",details:t.message})}}else t instanceof m?s.defineReadOnly(this,"_hex",t._hex):t.toHexString?s.defineReadOnly(this,"_hex",l(h(t.toHexString()))):t._hex&&a.isHexString(t._hex)?s.defineReadOnly(this,"_hex",t._hex):a.isArrayish(t)?s.defineReadOnly(this,"_hex",l(new o.default.BN(a.hexlify(t).substring(2),16))):u.throwError("invalid BigNumber value",u.INVALID_ARGUMENT,{arg:"value",value:t})}function g(t){return p.isBigNumber(t)?t:new p(t)}n.BigNumber=p,n.bigNumberify=g},{"../errors":5,"./bytes":64,"./properties":74,"bn.js":9}],64:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors"));function o(t){return!!t.toHexString}function a(t){return t.slice||(t.slice=function(){var e=Array.prototype.slice.call(arguments);return a(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function s(t){if(!t||parseInt(String(t.length))!=t.length||"string"==typeof t)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(n<0||256<=n||parseInt(String(n))!=n)return!1}return!0}function u(t){if(null==t&&i.throwError("cannot convert null value to array",i.INVALID_ARGUMENT,{arg:"value",value:t}),o(t)&&(t=t.toHexString()),"string"!=typeof t)return s(t)?a(new Uint8Array(t)):(i.throwError("invalid arrayify value",null,{arg:"value",value:t,type:typeof t}),null);var e=t.match(/^(0x)?[0-9a-fA-F]*$/);e||i.throwError("invalid hexidecimal string",i.INVALID_ARGUMENT,{arg:"value",value:t}),"0x"!==e[1]&&i.throwError("hex string must have 0x prefix",i.INVALID_ARGUMENT,{arg:"value",value:t}),(t=t.substring(2)).length%2&&(t="0"+t);for(var n=[],r=0;r<t.length;r+=2)n.push(parseInt(t.substr(r,2),16));return a(new Uint8Array(n))}function c(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=u(t[r]);e.push(i),n+=i.length}var o=new Uint8Array(n),s=0;for(r=0;r<e.length;r++)o.set(e[r],s),s+=e[r].length;return a(o)}function l(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}n.isHexable=o,n.isArrayish=s,n.arrayify=u,n.concat=c,n.stripZeros=function(t){var e=u(t);if(0===e.length)return e;for(var n=0;0===e[n];)n++;return n&&(e=e.slice(n)),e},n.padZeros=function(t,e){if(e<(t=u(t)).length)throw new Error("cannot pad");var n=new Uint8Array(e);return n.set(t,e-t.length),a(n)},n.isHexString=l;var h="0123456789abcdef";function d(t){if(o(t))return t.toHexString();if("number"==typeof t){t<0&&i.throwError("cannot hexlify negative value",i.INVALID_ARGUMENT,{arg:"value",value:t}),9007199254740991<=t&&i.throwError("out-of-range",i.NUMERIC_FAULT,{operartion:"hexlify",fault:"out-of-safe-range"});for(var e="";t;)e=h[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("string"==typeof t){var n=t.match(/^(0x)?[0-9a-fA-F]*$/);return n||i.throwError("invalid hexidecimal string",i.INVALID_ARGUMENT,{arg:"value",value:t}),"0x"!==n[1]&&i.throwError("hex string must have 0x prefix",i.INVALID_ARGUMENT,{arg:"value",value:t}),t.length%2&&(t="0x0"+t.substring(2)),t}if(s(t)){for(var r=[],a=0;a<t.length;a++){var u=t[a];r.push(h[(240&u)>>4]+h[15&u])}return"0x"+r.join("")}return i.throwError("invalid hexlify value",null,{arg:"value",value:t}),"never"}function f(t,e){for(l(t)||i.throwError("invalid hex string",i.INVALID_ARGUMENT,{arg:"value",value:t});t.length<2*e+2;)t="0x0"+t.substring(2);return t}function p(t){var e=0,n="0x",r="0x";if(function(t){return t&&null!=t.r&&null!=t.s}(t)){null==t.v&&null==t.recoveryParam&&i.throwError("at least on of recoveryParam or v must be specified",i.INVALID_ARGUMENT,{argument:"signature",value:t}),n=f(t.r,32),r=f(t.s,32),"string"==typeof(e=t.v)&&(e=parseInt(e,16));var o=t.recoveryParam;null==o&&null!=t.v&&(o=1-e%2),e=27+o}else{var a=u(t);if(65!==a.length)throw new Error("invalid signature");n=d(a.slice(0,32)),r=d(a.slice(32,64)),27!==(e=a[64])&&28!==e&&(e=27+e%2)}return{r:n,s:r,recoveryParam:e-27,v:e}}n.hexlify=d,n.hexDataLength=function(t){return l(t)&&t.length%2==0?(t.length-2)/2:null},n.hexDataSlice=function(t,e,n){return l(t)||i.throwError("invalid hex data",i.INVALID_ARGUMENT,{arg:"value",value:t}),t.length%2!=0&&i.throwError("hex data length must be even",i.INVALID_ARGUMENT,{arg:"value",value:t}),e=2+2*e,null!=n?"0x"+t.substring(e,2+2*n):"0x"+t.substring(e)},n.hexStripZeros=function(t){for(l(t)||i.throwError("invalid hex string",i.INVALID_ARGUMENT,{arg:"value",value:t});3<t.length&&"0x0"===t.substring(0,3);)t="0x"+t.substring(3);return t},n.hexZeroPad=f,n.splitSignature=p,n.joinSignature=function(t){return d(c([(t=p(t)).r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}},{"../errors":5}],65:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors")),o=t("./bytes"),a=t("./utf8"),s=t("./keccak256"),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),c=new RegExp("^((.*)\\.)?([^.]+)$"),l=new RegExp("^[a-z0-9.-]*$");n.namehash=function(t){"string"!=typeof t&&i.throwError("invalid address - "+String(t),i.INVALID_ARGUMENT,{argument:"name",value:t}),(t=t.toLowerCase()).match(l)||i.throwError("contains invalid UseSTD3ASCIIRules characters",i.INVALID_ARGUMENT,{argument:"name",value:t});for(var e=u;t.length;){var n=t.match(c),r=a.toUtf8Bytes(n[3]);e=s.keccak256(o.concat([e,s.keccak256(r)])),t=n[2]||""}return o.hexlify(e)},n.id=function(t){return s.keccak256(a.toUtf8Bytes(t))},n.hashMessage=function(t){return s.keccak256(o.concat([a.toUtf8Bytes("Ethereum Signed Message:\n"),a.toUtf8Bytes(String(t.length)),"string"==typeof t?a.toUtf8Bytes(t):t]))}},{"../errors":5,"./bytes":64,"./keccak256":71,"./utf8":85}],66:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors")),o=t("../wordlists/lang-en"),a=t("./basex"),s=t("./bytes"),u=t("./bignumber"),c=t("./utf8"),l=t("./pbkdf2"),h=t("./hmac"),d=t("./properties"),f=t("./secp256k1"),p=t("./sha2"),m=u.bigNumberify("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),g=c.toUtf8Bytes("Bitcoin seed"),v=2147483648;function y(t){return(1<<t)-1<<8-t}function b(t){return s.hexZeroPad(s.hexlify(t),32)}function w(t){var e=s.hexDataSlice(p.sha256(p.sha256(t)),0,4);return a.Base58.encode(s.concat([t,e]))}var _={};n.defaultPath="m/44'/60'/0'/0/0";var k=(Object.defineProperty(E.prototype,"extendedKey",{get:function(){if(256<=this.depth)throw new Error("Depth too large!");return w(s.concat([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",s.hexlify(this.depth),this.parentFingerprint,s.hexZeroPad(s.hexlify(this.index),4),this.chainCode,null!=this.privateKey?s.concat(["0x00",this.privateKey]):this.publicKey]))},enumerable:!0,configurable:!0}),E.prototype.neuter=function(){return new E(_,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,null,this.path)},E.prototype._derive=function(t){if(4294967295<t)throw new Error("invalid index - "+String(t));var e=this.path;e&&(e+="/"+(t&~v));var n=new Uint8Array(37);if(t&v){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(s.arrayify(this.privateKey),1),e&&(e+="'")}else n.set(s.arrayify(this.publicKey));for(var r=24;0<=r;r-=8)n[33+(r>>3)]=t>>24-r&255;var i=h.computeHmac(h.SupportedAlgorithms.sha512,this.chainCode,n),o=i.slice(0,32),a=i.slice(32),c=null,l=null;return this.privateKey?c=b(u.bigNumberify(o).add(this.privateKey).mod(m)):l=new f.KeyPair(s.hexlify(o))._addPoint(this.publicKey),new E(_,c,l,this.fingerprint,b(a),t,this.depth+1,this.mnemonic,e)},E.prototype.derivePath=function(t){var e=t.split("/");if(0===e.length||"m"===e[0]&&0!==this.depth)throw new Error("invalid path - "+t);"m"===e[0]&&e.shift();for(var n=this,r=0;r<e.length;r++){var i=e[r];if(i.match(/^[0-9]+'$/)){var o=parseInt(i.substring(0,i.length-1));if(v<=o)throw new Error("invalid path index - "+i);n=n._derive(v+o)}else{if(!i.match(/^[0-9]+$/))throw new Error("invalid path component - "+i);if(o=parseInt(i),v<=o)throw new Error("invalid path index - "+i);n=n._derive(o)}}return n},E.isHDNode=function(t){return d.isType(t,"HDNode")},E);function E(t,e,n,r,o,a,u,c,l){if(i.checkNew(this,E),t!==_)throw new Error("HDNode constructor cannot be called directly");if(e){var h=new f.KeyPair(e);d.defineReadOnly(this,"privateKey",h.privateKey),d.defineReadOnly(this,"publicKey",h.compressedPublicKey)}else d.defineReadOnly(this,"privateKey",null),d.defineReadOnly(this,"publicKey",s.hexlify(n));d.defineReadOnly(this,"parentFingerprint",r),d.defineReadOnly(this,"fingerprint",s.hexDataSlice(p.ripemd160(p.sha256(this.publicKey)),0,4)),d.defineReadOnly(this,"address",f.computeAddress(this.publicKey)),d.defineReadOnly(this,"chainCode",o),d.defineReadOnly(this,"index",a),d.defineReadOnly(this,"depth",u),d.defineReadOnly(this,"mnemonic",c),d.defineReadOnly(this,"path",l),d.setType(this,"HDNode")}function x(t,e){var n=s.arrayify(t);if(n.length<16||64<n.length)throw new Error("invalid seed");var r=s.arrayify(h.computeHmac(h.SupportedAlgorithms.sha512,g,n));return new k(_,b(r.slice(0,32)),null,"0x00000000",b(r.slice(32)),0,0,e,"m")}function S(t,e){e=e||"";var n=c.toUtf8Bytes("mnemonic"+e,c.UnicodeNormalizationForm.NFKD);return s.hexlify(l.pbkdf2(c.toUtf8Bytes(t,c.UnicodeNormalizationForm.NFKD),n,2048,64,"sha512"))}function T(t,e){e=e||o.langEn,i.checkNormalize();var n=e.split(t);if(n.length%3!=0)throw new Error("invalid mnemonic");for(var r=s.arrayify(new Uint8Array(Math.ceil(11*n.length/8))),a=0,u=0;u<n.length;u++){var c=e.getWordIndex(n[u].normalize("NFKD"));if(-1===c)throw new Error("invalid mnemonic");for(var l=0;l<11;l++)c&1<<10-l&&(r[a>>3]|=1<<7-a%8),a++}var h=32*n.length/3,d=y(n.length/3),f=s.arrayify(p.sha256(r.slice(0,h/8)))[0];if((f&=d)!=(r[r.length-1]&d))throw new Error("invalid checksum");return s.hexlify(r.slice(0,h/8))}function C(t,e){if((t=s.arrayify(t)).length%4!=0||t.length<16||32<t.length)throw new Error("invalid entropy");for(var n=[0],r=11,i=0;i<t.length;i++)8<r?(n[n.length-1]<<=8,n[n.length-1]|=t[i],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[i]>>8-r,n.push(t[i]&(1<<8-r)-1),r+=3);var a=s.arrayify(p.sha256(t))[0],u=t.length/4;return a&=y(u),n[n.length-1]<<=u,n[n.length-1]|=a>>8-u,(e=e||o.langEn).join(n.map((function(t){return e.getWord(t)})))}n.HDNode=k,n.fromExtendedKey=function(t){var e=a.Base58.decode(t);82===e.length&&w(e.slice(0,78))===t||i.throwError("invalid extended key",i.INVALID_ARGUMENT,{argument:"extendedKey",value:"[REDACTED]"});var n=e[4],r=s.hexlify(e.slice(5,9)),o=parseInt(s.hexlify(e.slice(9,13)).substring(2),16),u=s.hexlify(e.slice(13,45)),c=e.slice(45,78);switch(s.hexlify(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new k(_,null,s.hexlify(c),r,u,o,n,null,null);case"0x0488ade4":case"0x04358394":if(0!==c[0])break;return new k(_,s.hexlify(c.slice(1)),null,r,u,o,n,null,null)}return i.throwError("invalid extended key",i.INVALID_ARGUMENT,{argument:"extendedKey",value:"[REDACTED]"})},n.fromMnemonic=function(t,e,n){return x(S(t=C(T(t,e),e),n),t)},n.fromSeed=function(t){return x(t,null)},n.mnemonicToSeed=S,n.mnemonicToEntropy=T,n.entropyToMnemonic=C,n.isValidMnemonic=function(t,e){try{return T(t,e),!0}catch(t){}return!1}},{"../errors":5,"../wordlists/lang-en":90,"./basex":62,"./bignumber":63,"./bytes":64,"./hmac":67,"./pbkdf2":73,"./properties":74,"./secp256k1":77,"./sha2":79,"./utf8":85}],67:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i,o,a=r(t("hash.js")),s=t("../utils/bytes"),u=r(t("../errors"));(o=i=n.SupportedAlgorithms||(n.SupportedAlgorithms={})).sha256="sha256",o.sha512="sha512",n.computeHmac=function(t,e,n){return i[t]||u.throwError("unsupported algorithm "+t,u.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),s.arrayify(a.hmac(a[t],s.arrayify(e)).update(s.arrayify(n)).digest())}},{"../errors":5,"../utils/bytes":64,"hash.js":26}],68:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./abi-coder");n.AbiCoder=i.AbiCoder,n.defaultAbiCoder=i.defaultAbiCoder,n.formatSignature=i.formatSignature,n.formatParamType=i.formatParamType,n.parseSignature=i.parseSignature,n.parseParamType=i.parseParamType;var o=t("./address");n.getAddress=o.getAddress,n.getContractAddress=o.getContractAddress,n.getCreate2Address=o.getCreate2Address,n.getIcapAddress=o.getIcapAddress;var a=r(t("./base64"));n.base64=a;var s=t("./bignumber");n.BigNumber=s.BigNumber,n.bigNumberify=s.bigNumberify;var u=t("./bytes");n.arrayify=u.arrayify,n.concat=u.concat,n.hexDataSlice=u.hexDataSlice,n.hexDataLength=u.hexDataLength,n.hexlify=u.hexlify,n.hexStripZeros=u.hexStripZeros,n.hexZeroPad=u.hexZeroPad,n.isHexString=u.isHexString,n.joinSignature=u.joinSignature,n.padZeros=u.padZeros,n.splitSignature=u.splitSignature,n.stripZeros=u.stripZeros;var c=t("./hash");n.hashMessage=c.hashMessage,n.id=c.id,n.namehash=c.namehash;var l=r(t("./hdnode"));n.HDNode=l;var h=t("./interface");n.Interface=h.Interface;var d=t("./json-wallet");n.getJsonWalletAddress=d.getJsonWalletAddress;var f=t("./keccak256");n.keccak256=f.keccak256;var p=t("./sha2");n.sha256=p.sha256;var m=t("./solidity");n.solidityKeccak256=m.keccak256,n.solidityPack=m.pack,n.soliditySha256=m.sha256;var g=t("./random-bytes");n.randomBytes=g.randomBytes;var v=t("./networks");n.getNetwork=v.getNetwork;var y=t("./properties");n.checkProperties=y.checkProperties,n.deepCopy=y.deepCopy,n.defineReadOnly=y.defineReadOnly,n.resolveProperties=y.resolveProperties,n.shallowCopy=y.shallowCopy;var b=r(t("./rlp"));n.RLP=b;var w=t("./secp256k1");n.computeAddress=w.computeAddress,n.computePublicKey=w.computePublicKey,n.recoverAddress=w.recoverAddress,n.recoverPublicKey=w.recoverPublicKey,n.verifyMessage=w.verifyMessage;var _=t("./signing-key");n.SigningKey=_.SigningKey;var k=t("./transaction");n.populateTransaction=k.populateTransaction;var E=t("./transaction");n.parseTransaction=E.parse,n.serializeTransaction=E.serialize;var x=t("./utf8");n.formatBytes32String=x.formatBytes32String,n.parseBytes32String=x.parseBytes32String,n.toUtf8Bytes=x.toUtf8Bytes,n.toUtf8String=x.toUtf8String;var S=t("./units");n.commify=S.commify,n.formatEther=S.formatEther,n.parseEther=S.parseEther,n.formatUnits=S.formatUnits,n.parseUnits=S.parseUnits;var T=t("./web");n.fetchJson=T.fetchJson,n.poll=T.poll;var C=t("./hmac");n.SupportedAlgorithms=C.SupportedAlgorithms;var I=t("./utf8");n.UnicodeNormalizationForm=I.UnicodeNormalizationForm;var A=t("./wordlist");n.Wordlist=A.Wordlist},{"./abi-coder":59,"./address":60,"./base64":61,"./bignumber":63,"./bytes":64,"./hash":65,"./hdnode":66,"./hmac":67,"./interface":69,"./json-wallet":70,"./keccak256":71,"./networks":72,"./properties":74,"./random-bytes":75,"./rlp":76,"./secp256k1":77,"./sha2":79,"./signing-key":81,"./solidity":82,"./transaction":83,"./units":84,"./utf8":85,"./web":86,"./wordlist":87}],69:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};function a(t){for(var e in p.setType(this,"Description"),t)p.defineReadOnly(this,e,p.deepCopy(t[e],!0));Object.freeze(this)}Object.defineProperty(n,"__esModule",{value:!0});var s,u=t("./address"),c=t("./abi-coder"),l=t("./bignumber"),h=t("./bytes"),d=t("./hash"),f=t("./keccak256"),p=t("./properties"),m=o(t("../errors")),g=function(t){p.setType(this,"Indexed"),p.defineReadOnly(this,"hash",t)},v=(i(y,s=a),y.prototype.encode=function(t,e){h.isHexString(t)||m.throwError("invalid contract bytecode",m.INVALID_ARGUMENT,{arg:"bytecode",value:t}),m.checkArgumentCount(e.length,this.inputs.length," in Interface constructor");try{return t+c.defaultAbiCoder.encode(this.inputs,e).substring(2)}catch(t){m.throwError("invalid constructor argument",m.INVALID_ARGUMENT,{arg:t.arg,reason:t.reason,value:t.value})}return null},y);function y(){return null!==s&&s.apply(this,arguments)||this}var b,w=(i(_,b=a),_.prototype.encode=function(t){m.checkArgumentCount(t.length,this.inputs.length," in interface function "+this.name);try{return this.sighash+c.defaultAbiCoder.encode(this.inputs,t).substring(2)}catch(t){m.throwError("invalid input argument",m.INVALID_ARGUMENT,{arg:t.arg,reason:t.reason,value:t.value})}return null},_.prototype.decode=function(t){try{return c.defaultAbiCoder.decode(this.outputs,h.arrayify(t))}catch(e){m.throwError("invalid data for function output",m.INVALID_ARGUMENT,{arg:"data",errorArg:e.arg,errorValue:e.value,value:t,reason:e.reason})}},_);function _(){return null!==b&&b.apply(this,arguments)||this}var k,E=(i(x,k=a),x);function x(){return null!==k&&k.apply(this,arguments)||this}var S,T=(i(C,S=a),C.prototype.encodeTopics=function(t){var e=this;t.length>this.inputs.length&&m.throwError("too many arguments for "+this.name,m.UNEXPECTED_ARGUMENT,{maxCount:t.length,expectedCount:this.inputs.length});var n=[];for(this.anonymous||n.push(this.topic),t.forEach((function(t,r){var i=e.inputs[r];i.indexed?null==t?n.push(null):"string"===i.type?n.push(d.id(t)):"bytes"===i.type?n.push(f.keccak256(t)):-1!==i.type.indexOf("[")||"tuple"===i.type.substring(0,5)?m.throwError("filtering with tuples or arrays not implemented yet; bug us on GitHub",m.NOT_IMPLEMENTED,{operation:"filter(array|tuple)"}):("address"===i.type&&u.getAddress(t),n.push(h.hexZeroPad(h.hexlify(t),32).toLowerCase())):null!=t&&m.throwError("cannot filter non-indexed parameters; must be null",m.INVALID_ARGUMENT,{argument:i.name||r,value:t})}));n.length&&null===n[n.length-1];)n.pop();return n},C.prototype.decode=function(t,e){null==e||this.anonymous||(e=e.slice(1));var n=[],r=[],i=[];if(this.inputs.forEach((function(t,e){t.indexed?"string"===t.type||"bytes"===t.type||0<=t.type.indexOf("[")||"tuple"===t.type.substring(0,5)?(n.push({type:"bytes32",name:t.name||""}),i.push(!0)):(n.push(t),i.push(!1)):(r.push(t),i.push(!1))})),null!=e)var o=c.defaultAbiCoder.decode(n,h.concat(e));var a=c.defaultAbiCoder.decode(r,h.arrayify(t)),s={},u=0,l=0;return this.inputs.forEach((function(t,n){t.indexed?null==e?s[n]=new g(null):i[n]?s[n]=new g(o[l++]):s[n]=o[l++]:s[n]=a[u++],t.name&&(s[t.name]=s[n])})),s.length=this.inputs.length,new E(s)},C);function C(){return null!==S&&S.apply(this,arguments)||this}var I,A=(i(P,I=a),P);function P(){return null!==I&&I.apply(this,arguments)||this}var M,N=(i(L,M=a),L);function L(){return null!==M&&M.apply(this,arguments)||this}function D(t){switch(t.type){case"constructor":var e=new v({inputs:t.inputs,payable:null==t.payable||!!t.payable});this.deployFunction||(this.deployFunction=e);break;case"function":var n=c.formatSignature(t).replace(/tuple/g,""),r=d.id(n).substring(0,10),i=!1;null!=t.constant?i=t.constant:null!=t.stateMutability&&(i="view"==t.stateMutability||"pure"==t.stateMutability),e=new w({inputs:t.inputs,outputs:t.outputs,gas:t.gas,payable:null==t.payable||!!t.payable,type:i?"call":"transaction",name:t.name,signature:n,sighash:r}),t.name&&(null==this.functions[t.name]?p.defineReadOnly(this.functions,t.name,e):m.warn("WARNING: Multiple definitions for "+t.name)),null==this.functions[e.signature]&&p.defineReadOnly(this.functions,e.signature,e);break;case"event":n=c.formatSignature(t).replace(/tuple/g,""),e=new T({name:t.name,signature:n,inputs:t.inputs,topic:d.id(n),anonymous:!!t.anonymous}),t.name&&null==this.events[t.name]&&p.defineReadOnly(this.events,t.name,e),null==this.events[e.signature]&&p.defineReadOnly(this.events,e.signature,e);break;case"fallback":break;default:m.warn("WARNING: unsupported ABI type - "+t.type)}}var R=(O.prototype.parseTransaction=function(t){var e=t.data.substring(0,10).toLowerCase();for(var n in this.functions)if(-1!==n.indexOf("(")){var r=this.functions[n];if(r.sighash===e){var i=c.defaultAbiCoder.decode(r.inputs,"0x"+t.data.substring(10));return new A({args:i,decode:r.decode,name:r.name,signature:r.signature,sighash:r.sighash,value:l.bigNumberify(t.value||"0")})}}return null},O.prototype.parseLog=function(t){for(var e in this.events)if(-1!==e.indexOf("(")){var n=this.events[e];if(!n.anonymous&&n.topic===t.topics[0])return new N({decode:n.decode,name:n.name,signature:n.signature,topic:n.topic,values:n.decode(t.data,t.topics)})}return null},O.isInterface=function(t){return p.isType(t,"Interface")},O.isIndexed=function(t){return p.isType(t,"Indexed")},O);function O(t){if(m.checkNew(this,O),"string"==typeof t){try{t=JSON.parse(t)}catch(e){m.throwError("could not parse ABI JSON",m.INVALID_ARGUMENT,{arg:"abi",errorMessage:e.message,value:t})}if(!Array.isArray(t))return m.throwError("invalid abi",m.INVALID_ARGUMENT,{arg:"abi",value:t}),null}p.defineReadOnly(this,"functions",{}),p.defineReadOnly(this,"events",{});var e=[];t.forEach((function(t){"string"==typeof t&&(t=c.parseSignature(t)),e.push(t)})),p.defineReadOnly(this,"abi",p.deepCopy(e,!0)),e.forEach(D,this),this.deployFunction||D.call(this,{type:"constructor",inputs:[]}),p.setType(this,"Interface")}n.Interface=R},{"../errors":5,"./abi-coder":59,"./address":60,"./bignumber":63,"./bytes":64,"./hash":65,"./keccak256":71,"./properties":74}],70:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./address");function i(t){try{var e=JSON.parse(t)}catch(t){return!1}return e.encseed&&e.ethaddr}function o(t){try{var e=JSON.parse(t)}catch(t){return!1}return!(!e.version||parseInt(e.version)!==e.version||3!==parseInt(e.version))}n.isCrowdsaleWallet=i,n.isSecretStorageWallet=o,n.getJsonWalletAddress=function(t){if(i(t))try{return r.getAddress(JSON.parse(t).ethaddr)}catch(t){return null}if(o(t))try{return r.getAddress(JSON.parse(t).address)}catch(t){return null}return null}},{"./address":60}],71:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("js-sha3"),i=t("./bytes");n.keccak256=function(t){return"0x"+r.keccak_256(i.arrayify(t))}},{"./bytes":64,"js-sha3":40}],72:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors"));function o(t){return function(e){var n=[];return e.InfuraProvider&&n.push(new e.InfuraProvider(t)),e.EtherscanProvider&&n.push(new e.EtherscanProvider(t)),0===n.length?null:e.FallbackProvider?new e.FallbackProvider(n):n[0]}}function a(t,e){return function(n){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null}}var s={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:o("homestead")},u={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:o("ropsten")},c={unspecified:{chainId:0,name:"unspecified"},homestead:s,mainnet:s,morden:{chainId:2,name:"morden"},ropsten:u,testnet:u,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:o("rinkeby")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:o("goerli")},kovan:{chainId:42,name:"kovan",_defaultProvider:o("kovan")},classic:{chainId:61,name:"classic",_defaultProvider:a("https://web3.gastracker.io","classic")},classicTestnet:{chainId:62,name:"classicTestnet",_defaultProvider:a("https://web3.gastracker.io/morden","classicTestnet")}};n.getNetwork=function(t){if(null==t)return null;if("number"==typeof t){for(var e in c){var n=c[e];if(n.chainId===t)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"==typeof t){var r=c[t];return null==r?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}var o=c[t.name];return o?(0!==t.chainId&&t.chainId!==o.chainId&&i.throwError("network chainId mismatch",i.INVALID_ARGUMENT,{arg:"network",value:t}),{name:t.name,chainId:o.chainId,ensAddress:t.ensAddress||o.ensAddress||null,_defaultProvider:t._defaultProvider||o._defaultProvider||null}):("number"!=typeof t.chainId&&i.throwError("invalid network chainId",i.INVALID_ARGUMENT,{arg:"network",value:t}),t)}},{"../errors":5}],73:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/bytes"),i=t("./hmac");n.pbkdf2=function(t,e,n,o,a){var s;t=r.arrayify(t),e=r.arrayify(e);var u,c,l=1,h=new Uint8Array(o),d=new Uint8Array(e.length+4);d.set(e);for(var f=1;f<=l;f++){d[e.length]=f>>24&255,d[e.length+1]=f>>16&255,d[e.length+2]=f>>8&255,d[e.length+3]=255&f;var p=i.computeHmac(a,t,d);s||(s=p.length,c=new Uint8Array(s),u=o-((l=Math.ceil(o/s))-1)*s),c.set(p);for(var m=1;m<n;m++){p=i.computeHmac(a,t,p);for(var g=0;g<s;g++)c[g]^=p[g]}var v=(f-1)*s,y=f===l?u:s;h.set(r.arrayify(c).slice(0,y),v)}return r.arrayify(h)}},{"../utils/bytes":64,"./hmac":67}],74:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("../errors"));function o(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}function a(t,e){return t&&t._ethersType===e}n.defineReadOnly=o,n.setType=function(t,e){Object.defineProperty(t,"_ethersType",{configurable:!1,value:e,writable:!1})},n.isType=a,n.resolveProperties=function(t){var e={},n=[];return Object.keys(t).forEach((function(r){var i=t[r];i instanceof Promise?n.push(i.then((function(t){return e[r]=t,null}))):e[r]=i})),Promise.all(n).then((function(){return e}))},n.checkProperties=function(t,e){t&&"object"==typeof t||i.throwError("invalid object",i.INVALID_ARGUMENT,{argument:"object",value:t}),Object.keys(t).forEach((function(n){e[n]||i.throwError("invalid object key - "+n,i.INVALID_ARGUMENT,{argument:"transaction",value:t,key:n})}))},n.shallowCopy=function(t){var e={};for(var n in t)e[n]=t[n];return e};var s={boolean:!0,number:!0,string:!0};n.deepCopy=function t(e,n){if(null==e||s[typeof e])return e;if(Array.isArray(e)){var r=e.map((function(e){return t(e,n)}));return n&&Object.freeze(r),r}if("object"==typeof e){if(a(e,"BigNumber"))return e;if(a(e,"Description"))return e;if(a(e,"Indexed"))return e;for(var i in r={},e){var u=e[i];void 0!==u&&o(r,i,t(u,n))}return n&&Object.freeze(r),r}if("function"==typeof e)return e;throw new Error("Cannot deepCopy "+typeof e)},n.inheritable=function t(e){return function(n){!function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}(n,e),o(n,"inherits",t(n))}}},{"../errors":5}],75:[function(t,e,n){(function(e){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/bytes"),i=t("../utils/properties"),o=e.crypto||e.msCrypto;function a(t){if(t<=0||1024<t||parseInt(String(t))!=t)throw new Error("invalid length");var e=new Uint8Array(t);return o.getRandomValues(e),r.arrayify(e)}o&&o.getRandomValues||(console.log("WARNING: Missing strong random number source; using weak randomBytes"),o={getRandomValues:function(t){for(var e=0;e<20;e++)for(var n=0;n<t.length;n++)e?t[n]^=Math.trunc(256*Math.random()):t[n]=Math.trunc(256*Math.random());return t},_weakCrypto:!0}),n.randomBytes=a,!0===o._weakCrypto&&i.defineReadOnly(a,"_weakCrypto",!0)}).call(this,void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/bytes":64,"../utils/properties":74}],76:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./bytes");function i(t){for(var e=[];t;)e.unshift(255&t),t>>=8;return e}function o(t,e,n){for(var r=0,i=0;i<n;i++)r=256*r+t[e+i];return r}function a(t,e,n,r){for(var i=[];n<e+1+r;){var o=s(t,n);if(i.push(o.result),e+1+r<(n+=o.consumed))throw new Error("invalid rlp")}return{consumed:1+r,result:i}}function s(t,e){if(0===t.length)throw new Error("invalid rlp data");if(248<=t[e]){if(e+1+(n=t[e]-247)>t.length)throw new Error("too short");if(e+1+n+(i=o(t,e+1,n))>t.length)throw new Error("to short");return a(t,e,e+1+n,n+i)}if(192<=t[e]){if(e+1+(i=t[e]-192)>t.length)throw new Error("invalid rlp data");return a(t,e,e+1,i)}if(184<=t[e]){var n;if(e+1+(n=t[e]-183)>t.length)throw new Error("invalid rlp data");if(e+1+n+(i=o(t,e+1,n))>t.length)throw new Error("invalid rlp data");return{consumed:1+n+i,result:r.hexlify(t.slice(e+1+n,e+1+n+i))}}if(128<=t[e]){var i;if(e+1+(i=t[e]-128)>t.length)throw new Error("invalid rlp data");return{consumed:1+i,result:r.hexlify(t.slice(e+1,e+1+i))}}return{consumed:1,result:r.hexlify(t[e])}}n.encode=function(t){return r.hexlify(function t(e){if(Array.isArray(e)){var n=[];return e.forEach((function(e){n=n.concat(t(e))})),n.length<=55?(n.unshift(192+n.length),n):((o=i(n.length)).unshift(247+o.length),o.concat(n))}var o,a=Array.prototype.slice.call(r.arrayify(e));return 1===a.length&&a[0]<=127?a:a.length<=55?(a.unshift(128+a.length),a):((o=i(a.length)).unshift(183+o.length),o.concat(a))}(t))},n.decode=function(t){var e=r.arrayify(t),n=s(e,0);if(n.consumed!==e.length)throw new Error("invalid rlp data");return n.result}},{"./bytes":64}],77:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("elliptic"),o=t("./address"),a=t("./bytes"),s=t("./hash"),u=t("./keccak256"),c=t("./properties"),l=r(t("../errors")),h=null;function d(){return h=h||new i.ec("secp256k1")}var f=(p.prototype.sign=function(t){var e=d().keyFromPrivate(a.arrayify(this.privateKey)).sign(a.arrayify(t),{canonical:!0});return{recoveryParam:e.recoveryParam,r:a.hexZeroPad("0x"+e.r.toString(16),32),s:a.hexZeroPad("0x"+e.s.toString(16),32),v:27+e.recoveryParam}},p.prototype.computeSharedSecret=function(t){var e=d().keyFromPrivate(a.arrayify(this.privateKey)),n=d().keyFromPublic(a.arrayify(m(t)));return a.hexZeroPad("0x"+e.derive(n.getPublic()).toString(16),32)},p.prototype._addPoint=function(t){var e=d().keyFromPublic(a.arrayify(this.publicKey)),n=d().keyFromPublic(a.arrayify(t));return"0x"+e.pub.add(n.pub).encodeCompressed("hex")},p);function p(t){var e=d().keyFromPrivate(a.arrayify(t));c.defineReadOnly(this,"privateKey",a.hexlify(e.priv.toArray("be",32))),c.defineReadOnly(this,"publicKey","0x"+e.getPublic(!1,"hex")),c.defineReadOnly(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),c.defineReadOnly(this,"publicKeyBytes",e.getPublic().encode(null,!0))}function m(t,e){var n=a.arrayify(t);if(32!==n.length)return 33===n.length?e?a.hexlify(n):"0x"+d().keyFromPublic(n).getPublic(!1,"hex"):65===n.length?e?"0x"+d().keyFromPublic(n).getPublic(!0,"hex"):a.hexlify(n):(l.throwError("invalid public or private key",l.INVALID_ARGUMENT,{arg:"key",value:"[REDACTED]"}),null);var r=new f(n);return e?r.compressedPublicKey:r.publicKey}function g(t){var e="0x"+m(t).slice(4);return o.getAddress("0x"+u.keccak256(e).substring(26))}function v(t,e){var n=a.splitSignature(e),r={r:a.arrayify(n.r),s:a.arrayify(n.s)};return"0x"+d().recoverPubKey(a.arrayify(t),r,n.recoveryParam).encode("hex",!1)}function y(t,e){return g(v(a.arrayify(t),e))}n.KeyPair=f,n.computePublicKey=m,n.computeAddress=g,n.recoverPublicKey=v,n.recoverAddress=y,n.verifyMessage=function(t,e){return y(s.hashMessage(t),e)}},{"../errors":5,"./address":60,"./bytes":64,"./hash":65,"./keccak256":71,"./properties":74,elliptic:12}],78:[function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t("aes-js")),a=r(t("scrypt-js")),s=r(t("uuid")),u=t("./signing-key"),c=i(t("./hdnode")),l=t("./address"),h=t("./bytes"),d=t("./pbkdf2"),f=t("./keccak256"),p=t("./utf8"),m=t("./random-bytes");function g(t){return"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),h.arrayify(t)}function v(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function y(t){return"string"==typeof t?p.toUtf8Bytes(t,p.UnicodeNormalizationForm.NFKC):h.arrayify(t)}function b(t,e){for(var n=t,r=e.toLowerCase().split("/"),i=0;i<r.length;i++){var o=null;for(var a in n)if(a.toLowerCase()===r[i]){o=n[a];break}if(null===o)return null;n=o}return n}n.decryptCrowdsale=function(t,e){var n=JSON.parse(t);e=y(e);var r=l.getAddress(b(n,"ethaddr")),i=g(b(n,"encseed"));if(!i||i.length%16!=0)throw new Error("invalid encseed");var a=d.pbkdf2(e,e,2e3,32,"sha256").slice(0,16),s=i.slice(0,16),c=i.slice(16),m=new o.default.ModeOfOperation.cbc(a,s),v=h.arrayify(m.decrypt(c));v=o.default.padding.pkcs7.strip(v);for(var w="",_=0;_<v.length;_++)w+=String.fromCharCode(v[_]);var k=p.toUtf8Bytes(w),E=new u.SigningKey(f.keccak256(k));if(E.address!==r)throw new Error("corrupt crowdsale wallet");return E},n.decrypt=function(t,e,n){function r(t,e){var n=g(b(i,"crypto/ciphertext"));if(h.hexlify(function(t,e){return f.keccak256(h.concat([t,e]))}(t.slice(16,32),n)).substring(2)!==b(i,"crypto/mac").toLowerCase())return e(new Error("invalid password")),null;var r=function(t,e){if("aes-128-ctr"!==b(i,"crypto/cipher"))return null;var n=g(b(i,"crypto/cipherparams/iv")),r=new o.default.Counter(n),a=new o.default.ModeOfOperation.ctr(t,r);return h.arrayify(a.decrypt(e))}(t.slice(0,16),n),a=t.slice(32,64);if(!r)return e(new Error("unsupported cipher")),null;var s=new u.SigningKey(r);if(i.address&&s.address!==l.getAddress(i.address))return e(new Error("address mismatch")),null;var d=b(i,"x-ethers/locale");if("0.1"===b(i,"x-ethers/version")&&(null==d||"en"===d)){var p=g(b(i,"x-ethers/mnemonicCiphertext")),m=g(b(i,"x-ethers/mnemonicCounter")),v=new o.default.Counter(m),y=new o.default.ModeOfOperation.ctr(a,v),w=b(i,"x-ethers/path")||c.defaultPath,_=h.arrayify(y.decrypt(p)),k=c.entropyToMnemonic(_),E=c.fromMnemonic(k).derivePath(w);if(E.privateKey!=h.hexlify(r))return e(new Error("mnemonic mismatch")),null;s=new u.SigningKey(E)}return s}var i=JSON.parse(t),s=y(e);return new Promise((function(t,e){var o=b(i,"crypto/kdf");if(o&&"string"==typeof o)if("scrypt"===o.toLowerCase()){var u=g(b(i,"crypto/kdfparams/salt")),c=parseInt(b(i,"crypto/kdfparams/n")),l=parseInt(b(i,"crypto/kdfparams/r")),f=parseInt(b(i,"crypto/kdfparams/p"));if(!c||!l||!f)return void e(new Error("unsupported key-derivation function parameters"));if(0!=(c&c-1))return void e(new Error("unsupported key-derivation function parameter value for N"));if(32!==(v=parseInt(b(i,"crypto/kdfparams/dklen"))))return void e(new Error("unsupported key-derivation derived-key length"));n&&n(0),a.default(s,u,c,l,f,64,(function(i,o,a){if(i)i.progress=o,e(i);else if(a){var s=r(a=h.arrayify(a),e);if(!s)return;n&&n(1),t(s)}else if(n)return n(o)}))}else if("pbkdf2"===o.toLowerCase()){u=g(b(i,"crypto/kdfparams/salt"));var p=null,m=b(i,"crypto/kdfparams/prf");if("hmac-sha256"===m)p="sha256";else{if("hmac-sha512"!==m)return void e(new Error("unsupported prf"));p="sha512"}var v,y=parseInt(b(i,"crypto/kdfparams/c"));if(32!==(v=parseInt(b(i,"crypto/kdfparams/dklen"))))return void e(new Error("unsupported key-derivation derived-key length"));var w=r(d.pbkdf2(s,u,y,v,p),e);if(!w)return;t(w)}else e(new Error("unsupported key-derivation function"));else e(new Error("unsupported key-derivation function"))}))},n.encrypt=function(t,e,n,r){var i;if("function"!=typeof n||r||(r=n,n={}),n=n||{},32!==(i=u.SigningKey.isSigningKey(t)?h.arrayify(t.privateKey):h.arrayify(t)).length)throw new Error("invalid private key");var l=y(e),d=null;if(n.entropy&&(d=h.arrayify(n.entropy)),n.mnemonic)if(d){if(c.entropyToMnemonic(d)!==n.mnemonic)throw new Error("entropy and mnemonic mismatch")}else d=h.arrayify(c.mnemonicToEntropy(n.mnemonic,n.wordlist));var p=n.path;d&&!p&&(p=c.defaultPath);var g,b=n.client;b=b||"ethers.js",g=n.salt?h.arrayify(n.salt):m.randomBytes(32);var w=null;if(n.iv){if(16!==(w=h.arrayify(n.iv)).length)throw new Error("invalid iv")}else w=m.randomBytes(16);var _=null;if(n.uuid){if(16!==(_=h.arrayify(n.uuid)).length)throw new Error("invalid uuid")}else _=m.randomBytes(16);var k=1<<17,E=8,x=1;return n.scrypt&&(n.scrypt.N&&(k=n.scrypt.N),n.scrypt.r&&(E=n.scrypt.r),n.scrypt.p&&(x=n.scrypt.p)),new Promise((function(t,e){r&&r(0),a.default(l,g,k,E,x,64,(function(a,c,l){if(a)a.progress=c,e(a);else if(l){var y=(l=h.arrayify(l)).slice(0,16),S=l.slice(16,32),T=l.slice(32,64),C=new u.SigningKey(i).address,I=new o.default.Counter(w),A=new o.default.ModeOfOperation.ctr(y,I),P=h.arrayify(A.encrypt(i)),M=f.keccak256(h.concat([S,P])),N={address:C.substring(2).toLowerCase(),id:s.default.v4({random:_}),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:h.hexlify(w).substring(2)},ciphertext:h.hexlify(P).substring(2),kdf:"scrypt",kdfparams:{salt:h.hexlify(g).substring(2),n:k,dklen:32,p:x,r:E},mac:M.substring(2)}};if(d){var L=m.randomBytes(16),D=new o.default.Counter(L),R=new o.default.ModeOfOperation.ctr(T,D),O=h.arrayify(R.encrypt(d)),B=new Date,U=B.getUTCFullYear()+"-"+v(B.getUTCMonth()+1,2)+"-"+v(B.getUTCDate(),2)+"T"+v(B.getUTCHours(),2)+"-"+v(B.getUTCMinutes(),2)+"-"+v(B.getUTCSeconds(),2)+".0Z";N["x-ethers"]={client:b,gethFilename:"UTC--"+U+"--"+N.address,mnemonicCounter:h.hexlify(L).substring(2),mnemonicCiphertext:h.hexlify(O).substring(2),path:p,version:"0.1"},n.wordlist&&"string"==typeof n.wordlist.locale&&(N["x-ethers"].locale=n.wordlist.locale)}r&&r(1),t(JSON.stringify(N))}else if(r)return r(c)}))}))}},{"./address":60,"./bytes":64,"./hdnode":66,"./keccak256":71,"./pbkdf2":73,"./random-bytes":75,"./signing-key":81,"./utf8":85,"aes-js":8,"scrypt-js":44,uuid:48}],79:[function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("hash.js")),o=t("./bytes");n.ripemd160=function(t){return"0x"+i.default.ripemd160().update(o.arrayify(t)).digest("hex")},n.sha256=function(t){return"0x"+i.default.sha256().update(o.arrayify(t)).digest("hex")},n.sha512=function(t){return"0x"+i.default.sha512().update(o.arrayify(t)).digest("hex")}},{"./bytes":64,"hash.js":26}],80:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),t("setimmediate"),n.platform="browser"},{setimmediate:45}],81:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./hdnode"),o=t("./bytes"),a=t("./properties"),s=t("./secp256k1"),u=r(t("../errors")),c=(l.prototype.signDigest=function(t){return this.keyPair.sign(t)},l.prototype.computeSharedSecret=function(t){return this.keyPair.computeSharedSecret(o.arrayify(t))},l.isSigningKey=function(t){return a.isType(t,"SigningKey")},l);function l(t){var e;u.checkNew(this,l),e=i.HDNode.isHDNode(t)?(a.defineReadOnly(this,"mnemonic",t.mnemonic),a.defineReadOnly(this,"path",t.path),o.arrayify(t.privateKey)):("string"==typeof t&&t.match(/^[0-9a-f]*$/i)&&64===t.length&&(t="0x"+t),o.arrayify(t));try{32!==e.length&&u.throwError("exactly 32 bytes required",u.INVALID_ARGUMENT,{arg:"privateKey",value:"[REDACTED]"})}catch(t){var n={arg:"privateKey",reason:t.reason,value:"[REDACTED]"};t.value&&("number"==typeof t.value.length&&(n.length=t.value.length),n.type=typeof t.value),u.throwError("invalid private key",t.code,n)}a.defineReadOnly(this,"privateKey",o.hexlify(e)),a.defineReadOnly(this,"keyPair",new s.KeyPair(e)),a.defineReadOnly(this,"publicKey",this.keyPair.publicKey),a.defineReadOnly(this,"address",s.computeAddress(this.keyPair.publicKey)),a.setType(this,"SigningKey")}n.SigningKey=c},{"../errors":5,"./bytes":64,"./hdnode":66,"./properties":74,"./secp256k1":77}],82:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./bignumber"),i=t("./bytes"),o=t("./utf8"),a=t("./keccak256"),s=t("./sha2"),u=new RegExp("^bytes([0-9]+)$"),c=new RegExp("^(u?int)([0-9]*)$"),l=new RegExp("^(.*)\\[([0-9]*)\\]$");function h(t,e){if(t.length!=e.length)throw new Error("type/value count mismatch");var n=[];return t.forEach((function(t,a){n.push(function t(e,n,a){switch(e){case"address":return a?i.padZeros(n,32):i.arrayify(n);case"string":return o.toUtf8Bytes(n);case"bytes":return i.arrayify(n);case"bool":return n=n?"0x01":"0x00",a?i.padZeros(n,32):i.arrayify(n)}var s=e.match(c);if(s){if((h=parseInt(s[2]||"256"))%8!=0||0===h||256<h)throw new Error("invalid number type - "+e);return a&&(h=256),n=r.bigNumberify(n).toTwos(h),i.padZeros(n,h/8)}if(s=e.match(u)){var h=parseInt(s[1]);if(String(h)!=s[1]||0===h||32<h)throw new Error("invalid number type - "+e);if(i.arrayify(n).byteLength!==h)throw new Error("invalid value for "+e);return a?i.arrayify((n+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):n}if((s=e.match(l))&&Array.isArray(n)){var d=s[1];if(parseInt(s[2]||String(n.length))!=n.length)throw new Error("invalid value for "+e);var f=[];return n.forEach((function(e){f.push(t(d,e,!0))})),i.concat(f)}throw new Error("unknown type - "+e)}(t,e[a]))})),i.hexlify(i.concat(n))}n.pack=h,n.keccak256=function(t,e){return a.keccak256(h(t,e))},n.sha256=function(t,e){return s.sha256(h(t,e))}},{"./bignumber":63,"./bytes":64,"./keccak256":71,"./sha2":79,"./utf8":85}],83:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../constants"),o=r(t("../errors")),a=t("./secp256k1"),s=t("./address"),u=t("./bignumber"),c=t("./bytes"),l=t("./keccak256"),h=t("./properties"),d=r(t("./rlp")),f=t("../providers/abstract-provider");function p(t){return"0x"===t?i.Zero:u.bigNumberify(t)}var m=[{name:"nonce",maxLength:32},{name:"gasPrice",maxLength:32},{name:"gasLimit",maxLength:32},{name:"to",length:20},{name:"value",maxLength:32},{name:"data"}],g={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};n.serialize=function(t,e){h.checkProperties(t,g);var n=[];m.forEach((function(e){var r=t[e.name]||[];r=c.arrayify(c.hexlify(r)),e.length&&r.length!==e.length&&0<r.length&&o.throwError("invalid length for "+e.name,o.INVALID_ARGUMENT,{arg:"transaction"+e.name,value:r}),e.maxLength&&(r=c.stripZeros(r)).length>e.maxLength&&o.throwError("invalid length for "+e.name,o.INVALID_ARGUMENT,{arg:"transaction"+e.name,value:r}),n.push(c.hexlify(r))})),null!=t.chainId&&0!==t.chainId&&(n.push(c.hexlify(t.chainId)),n.push("0x"),n.push("0x"));var r=d.encode(n);if(!e)return r;var i=c.splitSignature(e),a=27+i.recoveryParam;return 9===n.length&&(n.pop(),n.pop(),n.pop(),a+=2*t.chainId+8),n.push(c.hexlify(a)),n.push(c.stripZeros(c.arrayify(i.r))),n.push(c.stripZeros(c.arrayify(i.s))),d.encode(n)},n.parse=function(t){var e=d.decode(t);9!==e.length&&6!==e.length&&o.throwError("invalid raw transaction",o.INVALID_ARGUMENT,{arg:"rawTransactin",value:t});var n={nonce:p(e[0]).toNumber(),gasPrice:p(e[1]),gasLimit:p(e[2]),to:function(t){return"0x"===t?null:s.getAddress(t)}(e[3]),value:p(e[4]),data:e[5],chainId:0};if(6===e.length)return n;try{n.v=u.bigNumberify(e[6]).toNumber()}catch(t){return o.info(t),n}if(n.r=c.hexZeroPad(e[7],32),n.s=c.hexZeroPad(e[8],32),u.bigNumberify(n.r).isZero()&&u.bigNumberify(n.s).isZero())n.chainId=n.v,n.v=0;else{n.chainId=Math.floor((n.v-35)/2),n.chainId<0&&(n.chainId=0);var r=n.v-27,i=e.slice(0,6);0!==n.chainId&&(i.push(c.hexlify(n.chainId)),i.push("0x"),i.push("0x"),r-=2*n.chainId+8);var h=l.keccak256(d.encode(i));try{n.from=a.recoverAddress(h,{r:c.hexlify(n.r),s:c.hexlify(n.s),recoveryParam:r})}catch(t){o.info(t)}n.hash=l.keccak256(t)}return n},n.populateTransaction=function(t,e,n){f.Provider.isProvider(e)||o.throwError("missing provider",o.INVALID_ARGUMENT,{argument:"provider",value:e}),h.checkProperties(t,g);var r=h.shallowCopy(t);if(null!=r.to&&(r.to=e.resolveName(r.to)),null==r.gasPrice&&(r.gasPrice=e.getGasPrice()),null==r.nonce&&(r.nonce=e.getTransactionCount(n)),null==r.gasLimit){var i=h.shallowCopy(r);i.from=n,r.gasLimit=e.estimateGas(i)}return null==r.chainId&&(r.chainId=e.getNetwork().then((function(t){return t.chainId}))),h.resolveProperties(r)}},{"../constants":3,"../errors":5,"../providers/abstract-provider":50,"./address":60,"./bignumber":63,"./bytes":64,"./keccak256":71,"./properties":74,"./rlp":76,"./secp256k1":77}],84:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=t("../constants"),a=r(t("../errors")),s=t("./bignumber"),u={};function c(t){return{decimals:t.length-1,tenPower:s.bigNumberify(t)}}function l(t){var e=u[String(t).toLowerCase()];if(!e&&"number"==typeof t&&parseInt(String(t))==t&&0<=t&&t<=256){for(var n="1",r=0;r<t;r++)n+="0";e=c(n)}return e||a.throwError("invalid unitType",a.INVALID_ARGUMENT,{argument:"name",value:t}),e}function h(t,e){var n=l(e),r=(t=s.bigNumberify(t)).lt(o.Zero);r&&(t=t.mul(o.NegativeOne));for(var i=t.mod(n.tenPower).toString();i.length<n.decimals;)i="0"+i;return i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1],t=t.div(n.tenPower).toString()+"."+i,r&&(t="-"+t),t}function d(t,e){null==e&&(e=18);var n=l(e);if("string"==typeof t&&t.match(/^-?[0-9.,]+$/)||a.throwError("invalid decimal value",a.INVALID_ARGUMENT,{arg:"value",value:t}),0===n.decimals)return s.bigNumberify(t);var r="-"===t.substring(0,1);r&&(t=t.substring(1)),"."===t&&a.throwError("missing value",a.INVALID_ARGUMENT,{arg:"value",value:t});var i=t.split(".");2<i.length&&a.throwError("too many decimal points",a.INVALID_ARGUMENT,{arg:"value",value:t});var u=i[0],c=i[1];for(u=u||"0",(c=c||"0").length>n.decimals&&a.throwError("underflow occurred",a.NUMERIC_FAULT,{operation:"division",fault:"underflow"});c.length<n.decimals;)c+="0";var h=s.bigNumberify(u),d=s.bigNumberify(c),f=h.mul(n.tenPower).add(d);return r&&(f=f.mul(o.NegativeOne)),f}i="1",["wei","kwei","Mwei","Gwei","szabo","finney","ether"].forEach((function(t){var e=c(i);u[t.toLowerCase()]=e,u[String(e.decimals)]=e,i+="000"})),n.commify=function(t){var e=String(t).split(".");(2<e.length||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||"."===t||"-."===t)&&a.throwError("invalid value",a.INVALID_ARGUMENT,{argument:"value",value:t});var n=e[0],r="";for("-"===n.substring(0,1)&&(r="-",n=n.substring(1));"0"===n.substring(0,1);)n=n.substring(1);""===n&&(n="0");var i="";2===e.length&&(i="."+(e[1]||"0"));for(var o=[];n.length;){if(n.length<=3){o.unshift(n);break}var s=n.length-3;o.unshift(n.substring(s)),n=n.substring(0,s)}return r+o.join(",")+i},n.formatUnits=h,n.parseUnits=d,n.formatEther=function(t){return h(t,18)},n.parseEther=function(t){return d(t,18)}},{"../constants":3,"../errors":5,"./bignumber":63}],85:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i,o=t("../constants"),a=t("../errors"),s=t("./bytes");function u(t,e){void 0===e&&(e=r.current),e!=r.current&&(a.checkNormalize(),t=t.normalize(e));for(var n=[],i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o<128)n.push(o);else if(o<2048)n.push(o>>6|192),n.push(63&o|128);else if(55296==(64512&o)){i++;var u=t.charCodeAt(i);if(i>=t.length||56320!=(64512&u))throw new Error("invalid utf-8 string");o=65536+((1023&o)<<10)+(1023&u),n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(63&o|128)}else n.push(o>>12|224),n.push(o>>6&63|128),n.push(63&o|128)}return s.arrayify(n)}function c(t,e){t=s.arrayify(t);for(var n="",r=0;r<t.length;){var i=t[r++];if(i>>7!=0){var o=null,a=null;if(192==(224&i))o=1,a=127;else if(224==(240&i))o=2,a=2047;else{if(240!=(248&i)){if(e)continue;if(128==(192&i))throw new Error("invalid utf8 byte sequence; unexpected continuation byte");throw new Error("invalid utf8 byte sequence; invalid prefix")}o=3,a=65535}if(r+o>t.length){if(!e)throw new Error("invalid utf8 byte sequence; too short");for(;r<t.length&&t[r]>>6==2;r++);}else{for(var u=i&(1<<8-o-1)-1,c=0;c<o;c++){var l=t[r];if(128!=(192&l)){u=null;break}u=u<<6|63&l,r++}if(null!==u)if(u<=a){if(!e)throw new Error("invalid utf8 byte sequence; overlong")}else if(1114111<u){if(!e)throw new Error("invalid utf8 byte sequence; out-of-range")}else if(55296<=u&&u<=57343){if(!e)throw new Error("invalid utf8 byte sequence; utf-16 surrogate")}else u<=65535?n+=String.fromCharCode(u):(u-=65536,n+=String.fromCharCode(55296+(u>>10&1023),56320+(1023&u)));else if(!e)throw new Error("invalid utf8 byte sequence; invalid continuation byte")}}else n+=String.fromCharCode(i)}return n}(i=r=n.UnicodeNormalizationForm||(n.UnicodeNormalizationForm={})).current="",i.NFC="NFC",i.NFD="NFD",i.NFKC="NFKC",i.NFKD="NFKD",n.toUtf8Bytes=u,n.toUtf8String=c,n.formatBytes32String=function(t){var e=u(t);if(31<e.length)throw new Error("bytes32 string must be less than 32 bytes");return s.hexlify(s.concat([e,o.HashZero]).slice(0,32))},n.parseBytes32String=function(t){var e=s.arrayify(t);if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");for(var n=31;0===e[n-1];)n--;return c(e.slice(0,n))}},{"../constants":3,"../errors":5,"./bytes":64}],86:[function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var i=t("xmlhttprequest"),o=t("./base64"),a=t("./properties"),s=t("./utf8"),u=r(t("../errors"));n.fetchJson=function(t,e,n){var r={},a=null,c=12e4;if("string"==typeof t)a=t;else if("object"==typeof t){if(null==t.url&&u.throwError("missing URL",u.MISSING_ARGUMENT,{arg:"url"}),a=t.url,"number"==typeof t.timeout&&0<t.timeout&&(c=t.timeout),t.headers)for(var l in t.headers)r[l.toLowerCase()]={key:l,value:String(t.headers[l])};if(null!=t.user&&null!=t.password){"https:"!==a.substring(0,6)&&!0!==t.allowInsecure&&u.throwError("basic authentication requires a secure https url",u.INVALID_ARGUMENT,{arg:"url",url:a,user:t.user,password:"[REDACTED]"});var h=t.user+":"+t.password;r.authorization={key:"Authorization",value:"Basic "+o.encode(s.toUtf8Bytes(h))}}}return new Promise((function(t,o){var s=new i.XMLHttpRequest,u=null;function l(){null!=u&&(clearTimeout(u),u=null)}u=setTimeout((function(){null!=u&&(u=null,o(new Error("timeout")),setTimeout((function(){s.abort()}),0))}),c),e?(s.open("POST",a,!0),r["content-type"]={key:"Content-Type",value:"application/json"}):s.open("GET",a,!0),Object.keys(r).forEach((function(t){var e=r[t];s.setRequestHeader(e.key,e.value)})),s.onreadystatechange=function(){if(4===s.readyState){if(200!=s.status){l();var r=new Error("invalid response - "+s.status);return r.statusCode=s.status,s.responseText&&(r.responseText=s.responseText),void o(r)}var i=null;try{i=JSON.parse(s.responseText)}catch(r){l();var u=new Error("invalid json response");return u.orginialError=r,u.responseText=s.responseText,null!=e&&(u.requestBody=e),u.url=a,void o(u)}if(n)try{i=n(i)}catch(r){return l(),r.url=a,r.body=e,r.responseText=s.responseText,void o(r)}l(),t(i)}},s.onerror=function(t){l(),o(t)};try{null!=e?s.send(e):s.send()}catch(u){l();var h=new Error("connection error");h.error=u,o(h)}}))},n.poll=function(t,e){return e=e||{},null==(e=a.shallowCopy(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(n,r){var i=null,o=!1,a=function(){return!o&&(o=!0,i&&clearTimeout(i),!0)};e.timeout&&(i=setTimeout((function(){a()&&r(new Error("timeout"))}),e.timeout));var s=e.fastRetry||null,u=0;!function i(){return t().then((function(t){if(void 0!==t)a()&&n(t);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!o){u++;var r=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));r<e.floor&&(r=e.floor),r>e.ceiling&&(r=e.ceiling),s&&(u--,r=s,s=null),setTimeout(i,r)}return null}),(function(t){a()&&r(t)}))}()}))}},{"../errors":5,"./base64":61,"./properties":74,"./utf8":85,xmlhttprequest:49}],87:[function(t,e,n){(function(e){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/hash"),i=t("../utils/properties");n.check=function(t){for(var e=[],n=0;n<2048;n++){var i=t.getWord(n);if(n!==t.getWordIndex(i))return"0x";e.push(i)}return r.id(e.join("\n")+"\n")};var o=(a.prototype.split=function(t){return t.toLowerCase().split(/ +/g)},a.prototype.join=function(t){return t.join(" ")},a);function a(t){i.defineReadOnly(this,"locale",t)}n.Wordlist=o,n.register=function(t,e){e=e||t.locale}}).call(this,void 0!==kt?kt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/hash":65,"../utils/properties":74}],88:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("./utils/bytes"),u=t("./utils/hash"),c=t("./utils/hdnode"),l=t("./utils/json-wallet"),h=t("./utils/keccak256"),d=t("./utils/properties"),f=t("./utils/random-bytes"),p=o(t("./utils/secret-storage")),m=t("./utils/signing-key"),g=t("./utils/transaction"),v=t("./abstract-signer"),y=t("./providers/abstract-provider"),b=o(t("./errors")),w=(i(_,a=v.Signer),Object.defineProperty(_.prototype,"address",{get:function(){return this.signingKey.address},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"mnemonic",{get:function(){return this.signingKey.mnemonic},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"path",{get:function(){return this.signingKey.path},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"privateKey",{get:function(){return this.signingKey.privateKey},enumerable:!0,configurable:!0}),_.prototype.connect=function(t){return y.Provider.isProvider(t)||b.throwError("invalid provider",b.INVALID_ARGUMENT,{argument:"provider",value:t}),new _(this.signingKey,t)},_.prototype.getAddress=function(){return Promise.resolve(this.address)},_.prototype.sign=function(t){var e=this;return d.resolveProperties(t).then((function(t){var n=g.serialize(t),r=e.signingKey.signDigest(h.keccak256(n));return g.serialize(t,r)}))},_.prototype.signMessage=function(t){return Promise.resolve(s.joinSignature(this.signingKey.signDigest(u.hashMessage(t))))},_.prototype.getBalance=function(t){if(!this.provider)throw new Error("missing provider");return this.provider.getBalance(this.address,t)},_.prototype.getTransactionCount=function(t){if(!this.provider)throw new Error("missing provider");return this.provider.getTransactionCount(this.address,t)},_.prototype.sendTransaction=function(t){var e=this;if(!this.provider)throw new Error("missing provider");return null==t.nonce&&((t=d.shallowCopy(t)).nonce=this.getTransactionCount("pending")),g.populateTransaction(t,this.provider,this.address).then((function(t){return e.sign(t).then((function(t){return e.provider.sendTransaction(t)}))}))},_.prototype.encrypt=function(t,e,n){if("function"!=typeof e||n||(n=e,e={}),n&&"function"!=typeof n)throw new Error("invalid callback");return e=e||{},this.mnemonic&&((e=d.shallowCopy(e)).mnemonic=this.mnemonic,e.path=this.path),p.encrypt(this.privateKey,t,e,n)},_.createRandom=function(t){var e=f.randomBytes(16);(t=t||{}).extraEntropy&&(e=s.arrayify(h.keccak256(s.concat([e,t.extraEntropy])).substring(0,34)));var n=c.entropyToMnemonic(e,t.locale);return _.fromMnemonic(n,t.path,t.locale)},_.fromEncryptedJson=function(t,e,n){if(l.isCrowdsaleWallet(t))try{n&&n(0);var r=p.decryptCrowdsale(t,e);return n&&n(1),Promise.resolve(new _(r))}catch(t){return Promise.reject(t)}else if(l.isSecretStorageWallet(t))return p.decrypt(t,e,n).then((function(t){return new _(t)}));return Promise.reject("invalid wallet JSON")},_.fromMnemonic=function(t,e,n){return e=e||c.defaultPath,new _(c.fromMnemonic(t,n).derivePath(e))},_);function _(t,e){var n=a.call(this)||this;return b.checkNew(n,_),m.SigningKey.isSigningKey(t)?d.defineReadOnly(n,"signingKey",t):d.defineReadOnly(n,"signingKey",new m.SigningKey(t)),d.defineReadOnly(n,"provider",e),n}n.Wallet=w},{"./abstract-signer":2,"./errors":5,"./providers/abstract-provider":50,"./utils/bytes":64,"./utils/hash":65,"./utils/hdnode":66,"./utils/json-wallet":70,"./utils/keccak256":71,"./utils/properties":74,"./utils/random-bytes":75,"./utils/secret-storage":78,"./utils/signing-key":81,"./utils/transaction":83}],89:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("../wordlists/lang-en").langEn;n.en=r},{"../wordlists/lang-en":90}],90:[function(t,e,n){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o,a=t("../utils/wordlist"),s=null;function u(t){if(null==s&&(s="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==a.check(t)))throw s=null,new Error("BIP39 Wordlist for en (English) FAILED")}function c(){return o.call(this,"en")||this}var l=new(i(c,o=a.Wordlist),c.prototype.getWord=function(t){return u(this),s[t]},c.prototype.getWordIndex=function(t){return u(this),s.indexOf(t)},c);n.langEn=l,a.register(l)},{"../utils/wordlist":87}]},{},[7])(7)}))),Gs=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Ws=St((function(t,e){!function(){function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){o(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof kt&&kt.global===kt?kt:void 0,o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,o,a){var s=i.URL||i.webkitURL,u=document.createElement("a");o=o||t.name||"download",u.download=o,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):n(u.href)?e(t,o,a):r(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){r(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,o){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),i);else if(n(t))e(t,i,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,s=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},c.readAsDataURL(t)}else{var l=i.URL||i.webkitURL,h=l.createObjectURL(t);o?o.location=h:location.href=h,o=null,setTimeout((function(){l.revokeObjectURL(h)}),4e4)}});i.saveAs=o.saveAs=o,t.exports=o}()}));function Ks(e){let n,r,i,o,a,s,u,c;return{c(){n=E("div"),r=E("div"),r.innerHTML="<p>\n            Это QR-Code (кью ар код) адрес вашего кошелька.\n        </p> \n        <p>\n            Покажите отправителю для сканирования кода.\n        </p>",i=S(),o=E("div"),a=S(),s=E("div"),u=E("button"),u.textContent="Закрыть",I(r,"class","mt-4 text-center text-sm"),I(o,"id","qrcode"),I(o,"class","px-10 mx-auto mt-6 text-center"),I(u,"class","btn-gray"),I(s,"class","mt-8 text-center"),I(n,"class","pt-16 px-2 min-h-screen w-full bg-white")},m(t,l){w(t,n,l),b(n,r),b(n,i),b(n,o),b(n,a),b(n,s),b(s,u),c=C(u,"click",e[4])},p:t,i:t,o:t,d(t){t&&_(n),c()}}}function Zs(t,e,n){let{codeValue:r}=e,{squareSize:i}=e;const o=G();let a;z(()=>{let t=document.createElement("script");t.src="/js/qrcode.js",document.head.append(t),t.onload=function(){a=new QRCode("qrcode",{text:r,width:i,height:i,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}});return t.$set=t=>{"codeValue"in t&&n(1,r=t.codeValue),"squareSize"in t&&n(2,i=t.squareSize)},[o,r,i,a,()=>o("close")]}class Qs extends wt{constructor(t){super(),bt(this,t,Zs,Ks,s,{codeValue:1,squareSize:2})}}var Ys=xt(St((function(t,e){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.width=e,this.height=t.length/e,this.data=t}return t.createEmpty=function(e,n){return new t(new Uint8ClampedArray(e*n),e)},t.prototype.get=function(t,e){return!(t<0||t>=this.width||e<0||e>=this.height)&&!!this.data[e*this.width+t]},t.prototype.set=function(t,e,n){this.data[e*this.width+t]=n?1:0},t.prototype.setRegion=function(t,e,n,r,i){for(var o=e;o<e+r;o++)for(var a=t;a<t+n;a++)this.set(a,o,!!i)},t}();e.BitMatrix=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);e.addOrSubtractGF=function(t,e){return t^e};var i=function(){function t(t,e,n){this.primitive=t,this.size=e,this.generatorBase=n,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var i=1,o=0;o<this.size;o++)this.expTable[o]=i,(i*=2)>=this.size&&(i=(i^this.primitive)&this.size-1);for(o=0;o<this.size-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new r.default(this,Uint8ClampedArray.from([0])),this.one=new r.default(this,Uint8ClampedArray.from([1]))}return t.prototype.multiply=function(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]},t.prototype.inverse=function(t){if(0===t)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[t]-1]},t.prototype.buildMonomial=function(t,e){if(t<0)throw new Error("Invalid monomial degree less than 0");if(0===e)return this.zero;var n=new Uint8ClampedArray(t+1);return n[0]=e,new r.default(this,n)},t.prototype.log=function(t){if(0===t)throw new Error("Can't take log(0)");return this.logTable[t]},t.prototype.exp=function(t){return this.expTable[t]},t}();e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t,e){if(0===e.length)throw new Error("No coefficients.");this.field=t;var n=e.length;if(n>1&&0===e[0]){for(var r=1;r<n&&0===e[r];)r++;if(r===n)this.coefficients=t.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(n-r);for(var i=0;i<this.coefficients.length;i++)this.coefficients[i]=e[r+i]}}else this.coefficients=e}return t.prototype.degree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return 0===this.coefficients[0]},t.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},t.prototype.addOrSubtract=function(e){var n;if(this.isZero())return e;if(e.isZero())return this;var i=this.coefficients,o=e.coefficients;i.length>o.length&&(i=(n=[o,i])[0],o=n[1]);for(var a=new Uint8ClampedArray(o.length),s=o.length-i.length,u=0;u<s;u++)a[u]=o[u];for(u=s;u<o.length;u++)a[u]=r.addOrSubtractGF(i[u-s],o[u]);return new t(this.field,a)},t.prototype.multiply=function(e){if(0===e)return this.field.zero;if(1===e)return this;for(var n=this.coefficients.length,r=new Uint8ClampedArray(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyPoly=function(e){if(this.isZero()||e.isZero())return this.field.zero;for(var n=this.coefficients,i=n.length,o=e.coefficients,a=o.length,s=new Uint8ClampedArray(i+a-1),u=0;u<i;u++)for(var c=n[u],l=0;l<a;l++)s[u+l]=r.addOrSubtractGF(s[u+l],this.field.multiply(c,o[l]));return new t(this.field,s)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new Error("Invalid degree less than 0");if(0===n)return this.field.zero;for(var r=this.coefficients.length,i=new Uint8ClampedArray(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new t(this.field,i)},t.prototype.evaluateAt=function(t){var e=0;if(0===t)return this.getCoefficient(0);var n=this.coefficients.length;if(1===t)return this.coefficients.forEach((function(t){e=r.addOrSubtractGF(e,t)})),e;e=this.coefficients[0];for(var i=1;i<n;i++)e=r.addOrSubtractGF(this.field.multiply(t,e),this.coefficients[i]);return e},t}();e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(11),a=n(12);function s(t){var e=a.locate(t);if(!e)return null;for(var n=0,r=e;n<r.length;n++){var s=r[n],u=o.extract(t,s),c=i.decode(u.matrix);if(c)return{binaryData:c.bytes,data:c.text,chunks:c.chunks,location:{topRightCorner:u.mappingFunction(s.dimension,0),topLeftCorner:u.mappingFunction(0,0),bottomRightCorner:u.mappingFunction(s.dimension,s.dimension),bottomLeftCorner:u.mappingFunction(0,s.dimension),topRightFinderPattern:s.topRight,topLeftFinderPattern:s.topLeft,bottomLeftFinderPattern:s.bottomLeft,bottomRightAlignmentPattern:s.alignmentPattern}}}return null}var u={inversionAttempts:"attemptBoth"};function c(t,e,n,i){void 0===i&&(i={});var o=u;Object.keys(o||{}).forEach((function(t){o[t]=i[t]||o[t]}));var a="attemptBoth"===o.inversionAttempts||"invertFirst"===o.inversionAttempts,c="onlyInvert"===o.inversionAttempts||"invertFirst"===o.inversionAttempts,l=r.binarize(t,e,n,a),h=l.binarized,d=l.inverted,f=s(c?d:h);return f||"attemptBoth"!==o.inversionAttempts&&"invertFirst"!==o.inversionAttempts||(f=s(c?h:d)),f}c.default=c,e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);function i(t,e,n){return t<e?e:t>n?n:t}var o=function(){function t(t,e){this.width=t,this.data=new Uint8ClampedArray(t*e)}return t.prototype.get=function(t,e){return this.data[e*this.width+t]},t.prototype.set=function(t,e,n){this.data[e*this.width+t]=n},t}();e.binarize=function(t,e,n,a){if(t.length!==e*n*4)throw new Error("Malformed data passed to binarizer.");for(var s=new o(e,n),u=0;u<e;u++)for(var c=0;c<n;c++){var l=t[4*(c*e+u)+0],h=t[4*(c*e+u)+1],d=t[4*(c*e+u)+2];s.set(u,c,.2126*l+.7152*h+.0722*d)}for(var f=Math.ceil(e/8),p=Math.ceil(n/8),m=new o(f,p),g=0;g<p;g++)for(var v=0;v<f;v++){var y=0,b=1/0,w=0;for(c=0;c<8;c++)for(u=0;u<8;u++){var _=s.get(8*v+u,8*g+c);y+=_,b=Math.min(b,_),w=Math.max(w,_)}var k=y/Math.pow(8,2);if(w-b<=24&&(k=b/2,g>0&&v>0)){var E=(m.get(v,g-1)+2*m.get(v-1,g)+m.get(v-1,g-1))/4;b<E&&(k=E)}m.set(v,g,k)}var x=r.BitMatrix.createEmpty(e,n),S=null;for(a&&(S=r.BitMatrix.createEmpty(e,n)),g=0;g<p;g++)for(v=0;v<f;v++){for(var T=i(v,2,f-3),C=i(g,2,p-3),I=(y=0,-2);I<=2;I++)for(var A=-2;A<=2;A++)y+=m.get(T+I,C+A);var P=y/25;for(I=0;I<8;I++)for(A=0;A<8;A++){u=8*v+I,c=8*g+A;var M=s.get(u,c);x.set(u,c,M<=P),a&&S.set(u,c,!(M<=P))}}return a?{binarized:x,inverted:S}:{binarized:x}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(9),a=n(10);function s(t,e){for(var n=t^e,r=0;n;)r++,n&=n-1;return r}function u(t,e){return e<<1|t}var c=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],l=[function(t){return(t.y+t.x)%2==0},function(t){return t.y%2==0},function(t){return t.x%3==0},function(t){return(t.y+t.x)%3==0},function(t){return(Math.floor(t.y/2)+Math.floor(t.x/3))%2==0},function(t){return t.x*t.y%2+t.x*t.y%3==0},function(t){return(t.y*t.x%2+t.y*t.x%3)%2==0},function(t){return((t.y+t.x)%2+t.y*t.x%3)%2==0}];function h(t,e,n){for(var i=l[n.dataMask],o=t.height,a=function(t){var e=17+4*t.versionNumber,n=r.BitMatrix.createEmpty(e,e);n.setRegion(0,0,9,9,!0),n.setRegion(e-8,0,8,9,!0),n.setRegion(0,e-8,9,8,!0);for(var i=0,o=t.alignmentPatternCenters;i<o.length;i++)for(var a=o[i],s=0,u=t.alignmentPatternCenters;s<u.length;s++){var c=u[s];6===a&&6===c||6===a&&c===e-7||a===e-7&&6===c||n.setRegion(a-2,c-2,5,5,!0)}return n.setRegion(6,9,1,e-17,!0),n.setRegion(9,6,e-17,1,!0),t.versionNumber>6&&(n.setRegion(e-11,0,3,6,!0),n.setRegion(0,e-11,6,3,!0)),n}(e),s=[],c=0,h=0,d=!0,f=o-1;f>0;f-=2){6===f&&f--;for(var p=0;p<o;p++)for(var m=d?o-1-p:p,g=0;g<2;g++){var v=f-g;if(!a.get(v,m)){h++;var y=t.get(v,m);i({y:m,x:v})&&(y=!y),c=u(y,c),8===h&&(s.push(c),h=0,c=0)}}d=!d}return s}function d(t){var e=function(t){var e=t.height,n=Math.floor((e-17)/4);if(n<=6)return a.VERSIONS[n-1];for(var r=0,i=5;i>=0;i--)for(var o=e-9;o>=e-11;o--)r=u(t.get(o,i),r);var c=0;for(o=5;o>=0;o--)for(i=e-9;i>=e-11;i--)c=u(t.get(o,i),c);for(var l,h=1/0,d=0,f=a.VERSIONS;d<f.length;d++){var p=f[d];if(p.infoBits===r||p.infoBits===c)return p;var m=s(r,p.infoBits);m<h&&(l=p,h=m),(m=s(c,p.infoBits))<h&&(l=p,h=m)}return h<=3?l:void 0}(t);if(!e)return null;var n=function(t){for(var e=0,n=0;n<=8;n++)6!==n&&(e=u(t.get(n,8),e));for(var r=7;r>=0;r--)6!==r&&(e=u(t.get(8,r),e));var i=t.height,o=0;for(r=i-1;r>=i-7;r--)o=u(t.get(8,r),o);for(n=i-8;n<i;n++)o=u(t.get(n,8),o);for(var a=1/0,l=null,h=0,d=c;h<d.length;h++){var f=d[h],p=f.bits,m=f.formatInfo;if(p===e||p===o)return m;var g=s(e,p);g<a&&(l=m,a=g),e!==o&&(g=s(o,p))<a&&(l=m,a=g)}return a<=3?l:null}(t);if(!n)return null;var r=function(t,e,n){var r=e.errorCorrectionLevels[n],i=[],o=0;if(r.ecBlocks.forEach((function(t){for(var e=0;e<t.numBlocks;e++)i.push({numDataCodewords:t.dataCodewordsPerBlock,codewords:[]}),o+=t.dataCodewordsPerBlock+r.ecCodewordsPerBlock})),t.length<o)return null;t=t.slice(0,o);for(var a=r.ecBlocks[0].dataCodewordsPerBlock,s=0;s<a;s++)for(var u=0,c=i;u<c.length;u++){c[u].codewords.push(t.shift())}if(r.ecBlocks.length>1){var l=r.ecBlocks[0].numBlocks,h=r.ecBlocks[1].numBlocks;for(s=0;s<h;s++)i[l+s].codewords.push(t.shift())}for(;t.length>0;)for(var d=0,f=i;d<f.length;d++){f[d].codewords.push(t.shift())}return i}(h(t,e,n),e,n.errorCorrectionLevel);if(!r)return null;for(var l=r.reduce((function(t,e){return t+e.numDataCodewords}),0),d=new Uint8ClampedArray(l),f=0,p=0,m=r;p<m.length;p++){var g=m[p],v=o.decode(g.codewords,g.codewords.length-g.numDataCodewords);if(!v)return null;for(var y=0;y<g.numDataCodewords;y++)d[f++]=v[y]}try{return i.decode(d,e.versionNumber)}catch(t){return null}}e.decode=function(t){if(null==t)return null;var e=d(t);if(e)return e;for(var n=0;n<t.width;n++)for(var r=n+1;r<t.height;r++)t.get(n,r)!==t.get(r,n)&&(t.set(n,r,!t.get(n,r)),t.set(r,n,!t.get(r,n)));return d(t)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(7),a=n(8);function s(t,e){for(var n=[],r="",i=[10,12,14][e],o=t.readBits(i);o>=3;){if((c=t.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var a=Math.floor(c/100),s=Math.floor(c/10)%10,u=c%10;n.push(48+a,48+s,48+u),r+=a.toString()+s.toString()+u.toString(),o-=3}if(2===o){if((c=t.readBits(7))>=100)throw new Error("Invalid numeric value above 99");a=Math.floor(c/10),s=c%10;n.push(48+a,48+s),r+=a.toString()+s.toString()}else if(1===o){var c;if((c=t.readBits(4))>=10)throw new Error("Invalid numeric value above 9");n.push(48+c),r+=c.toString()}return{bytes:n,text:r}}!function(t){t.Numeric="numeric",t.Alphanumeric="alphanumeric",t.Byte="byte",t.Kanji="kanji",t.ECI="eci"}(r=e.Mode||(e.Mode={})),function(t){t[t.Terminator=0]="Terminator",t[t.Numeric=1]="Numeric",t[t.Alphanumeric=2]="Alphanumeric",t[t.Byte=4]="Byte",t[t.Kanji=8]="Kanji",t[t.ECI=7]="ECI"}(i||(i={}));var u=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function c(t,e){for(var n=[],r="",i=[9,11,13][e],o=t.readBits(i);o>=2;){var a=t.readBits(11),s=Math.floor(a/45),c=a%45;n.push(u[s].charCodeAt(0),u[c].charCodeAt(0)),r+=u[s]+u[c],o-=2}if(1===o){s=t.readBits(6);n.push(u[s].charCodeAt(0)),r+=u[s]}return{bytes:n,text:r}}function l(t,e){for(var n=[],r="",i=[8,16,16][e],o=t.readBits(i),a=0;a<o;a++){var s=t.readBits(8);n.push(s)}try{r+=decodeURIComponent(n.map((function(t){return"%"+("0"+t.toString(16)).substr(-2)})).join(""))}catch(t){}return{bytes:n,text:r}}function h(t,e){for(var n=[],r="",i=[8,10,12][e],o=t.readBits(i),s=0;s<o;s++){var u=t.readBits(13),c=Math.floor(u/192)<<8|u%192;c+=c<7936?33088:49472,n.push(c>>8,255&c),r+=String.fromCharCode(a.shiftJISTable[c])}return{bytes:n,text:r}}e.decode=function(t,e){for(var n,a,u,d,f=new o.BitStream(t),p=e<=9?0:e<=26?1:2,m={text:"",bytes:[],chunks:[]};f.available()>=4;){var g=f.readBits(4);if(g===i.Terminator)return m;if(g===i.ECI)0===f.readBits(1)?m.chunks.push({type:r.ECI,assignmentNumber:f.readBits(7)}):0===f.readBits(1)?m.chunks.push({type:r.ECI,assignmentNumber:f.readBits(14)}):0===f.readBits(1)?m.chunks.push({type:r.ECI,assignmentNumber:f.readBits(21)}):m.chunks.push({type:r.ECI,assignmentNumber:-1});else if(g===i.Numeric){var v=s(f,p);m.text+=v.text,(n=m.bytes).push.apply(n,v.bytes),m.chunks.push({type:r.Numeric,text:v.text})}else if(g===i.Alphanumeric){var y=c(f,p);m.text+=y.text,(a=m.bytes).push.apply(a,y.bytes),m.chunks.push({type:r.Alphanumeric,text:y.text})}else if(g===i.Byte){var b=l(f,p);m.text+=b.text,(u=m.bytes).push.apply(u,b.bytes),m.chunks.push({type:r.Byte,bytes:b.bytes,text:b.text})}else if(g===i.Kanji){var w=h(f,p);m.text+=w.text,(d=m.bytes).push.apply(d,w.bytes),m.chunks.push({type:r.Kanji,bytes:w.bytes,text:w.text})}}if(0===f.available()||0===f.readBits(f.available()))return m}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.byteOffset=0,this.bitOffset=0,this.bytes=t}return t.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new Error("Cannot read "+t.toString()+" bits");var e=0;if(this.bitOffset>0){var n=8-this.bitOffset,r=t<n?t:n,i=255>>8-r<<(o=n-r);e=(this.bytes[this.byteOffset]&i)>>o,t-=r,this.bitOffset+=r,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(t>0){for(;t>=8;)e=e<<8|255&this.bytes[this.byteOffset],this.byteOffset++,t-=8;if(t>0){var o;i=255>>(o=8-t)<<o;e=e<<t|(this.bytes[this.byteOffset]&i)>>o,this.bitOffset+=t}}return e},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}();e.BitStream=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(2);e.decode=function(t,e){var n=new Uint8ClampedArray(t.length);n.set(t);for(var o=new r.default(285,256,0),a=new i.default(o,n),s=new Uint8ClampedArray(e),u=!1,c=0;c<e;c++){var l=a.evaluateAt(o.exp(c+o.generatorBase));s[s.length-1-c]=l,0!==l&&(u=!0)}if(!u)return n;var h=new i.default(o,s),d=function(t,e,n,r){var i;e.degree()<n.degree()&&(e=(i=[n,e])[0],n=i[1]);for(var o=e,a=n,s=t.zero,u=t.one;a.degree()>=r/2;){var c=o,l=s;if(s=u,(o=a).isZero())return null;a=c;for(var h=t.zero,d=o.getCoefficient(o.degree()),f=t.inverse(d);a.degree()>=o.degree()&&!a.isZero();){var p=a.degree()-o.degree(),m=t.multiply(a.getCoefficient(a.degree()),f);h=h.addOrSubtract(t.buildMonomial(p,m)),a=a.addOrSubtract(o.multiplyByMonomial(p,m))}if(u=h.multiplyPoly(s).addOrSubtract(l),a.degree()>=o.degree())return null}var g=u.getCoefficient(0);if(0===g)return null;var v=t.inverse(g);return[u.multiply(v),a.multiply(v)]}(o,o.buildMonomial(e,1),h,e);if(null===d)return null;var f=function(t,e){var n=e.degree();if(1===n)return[e.getCoefficient(1)];for(var r=new Array(n),i=0,o=1;o<t.size&&i<n;o++)0===e.evaluateAt(o)&&(r[i]=t.inverse(o),i++);return i!==n?null:r}(o,d[0]);if(null==f)return null;for(var p=function(t,e,n){for(var i=n.length,o=new Array(i),a=0;a<i;a++){for(var s=t.inverse(n[a]),u=1,c=0;c<i;c++)a!==c&&(u=t.multiply(u,r.addOrSubtractGF(1,t.multiply(n[c],s))));o[a]=t.multiply(e.evaluateAt(s),t.inverse(u)),0!==t.generatorBase&&(o[a]=t.multiply(o[a],s))}return o}(o,d[1],f),m=0;m<f.length;m++){var g=n.length-1-o.log(f[m]);if(g<0)return null;n[g]=r.addOrSubtractGF(n[g],p[m])}return n}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);function i(t,e,n,r){var i=t.x-e.x+n.x-r.x,o=t.y-e.y+n.y-r.y;if(0===i&&0===o)return{a11:e.x-t.x,a12:e.y-t.y,a13:0,a21:n.x-e.x,a22:n.y-e.y,a23:0,a31:t.x,a32:t.y,a33:1};var a=e.x-n.x,s=r.x-n.x,u=e.y-n.y,c=r.y-n.y,l=a*c-s*u,h=(i*c-s*o)/l,d=(a*o-i*u)/l;return{a11:e.x-t.x+h*e.x,a12:e.y-t.y+h*e.y,a13:h,a21:r.x-t.x+d*r.x,a22:r.y-t.y+d*r.y,a23:d,a31:t.x,a32:t.y,a33:1}}e.extract=function(t,e){for(var n,o,a=function(t,e,n,r){var o=i(t,e,n,r);return{a11:o.a22*o.a33-o.a23*o.a32,a12:o.a13*o.a32-o.a12*o.a33,a13:o.a12*o.a23-o.a13*o.a22,a21:o.a23*o.a31-o.a21*o.a33,a22:o.a11*o.a33-o.a13*o.a31,a23:o.a13*o.a21-o.a11*o.a23,a31:o.a21*o.a32-o.a22*o.a31,a32:o.a12*o.a31-o.a11*o.a32,a33:o.a11*o.a22-o.a12*o.a21}}({x:3.5,y:3.5},{x:e.dimension-3.5,y:3.5},{x:e.dimension-6.5,y:e.dimension-6.5},{x:3.5,y:e.dimension-3.5}),s=i(e.topLeft,e.topRight,e.alignmentPattern,e.bottomLeft),u=(o=a,{a11:(n=s).a11*o.a11+n.a21*o.a12+n.a31*o.a13,a12:n.a12*o.a11+n.a22*o.a12+n.a32*o.a13,a13:n.a13*o.a11+n.a23*o.a12+n.a33*o.a13,a21:n.a11*o.a21+n.a21*o.a22+n.a31*o.a23,a22:n.a12*o.a21+n.a22*o.a22+n.a32*o.a23,a23:n.a13*o.a21+n.a23*o.a22+n.a33*o.a23,a31:n.a11*o.a31+n.a21*o.a32+n.a31*o.a33,a32:n.a12*o.a31+n.a22*o.a32+n.a32*o.a33,a33:n.a13*o.a31+n.a23*o.a32+n.a33*o.a33}),c=r.BitMatrix.createEmpty(e.dimension,e.dimension),l=function(t,e){var n=u.a13*t+u.a23*e+u.a33;return{x:(u.a11*t+u.a21*e+u.a31)/n,y:(u.a12*t+u.a22*e+u.a32)/n}},h=0;h<e.dimension;h++)for(var d=0;d<e.dimension;d++){var f=l(d+.5,h+.5);c.set(d,h,t.get(Math.floor(f.x),Math.floor(f.y)))}return{matrix:c,mappingFunction:l}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};function i(t){return t.reduce((function(t,e){return t+e}))}function o(t,e,n,i){var o,a,s,u,c=[{x:Math.floor(t.x),y:Math.floor(t.y)}],l=Math.abs(e.y-t.y)>Math.abs(e.x-t.x);l?(o=Math.floor(t.y),a=Math.floor(t.x),s=Math.floor(e.y),u=Math.floor(e.x)):(o=Math.floor(t.x),a=Math.floor(t.y),s=Math.floor(e.x),u=Math.floor(e.y));for(var h=Math.abs(s-o),d=Math.abs(u-a),f=Math.floor(-h/2),p=o<s?1:-1,m=a<u?1:-1,g=!0,v=o,y=a;v!==s+p;v+=p){var b=l?y:v,w=l?v:y;if(n.get(b,w)!==g&&(g=!g,c.push({x:b,y:w}),c.length===i+1))break;if((f+=d)>0){if(y===u)break;y+=m,f-=h}}for(var _=[],k=0;k<i;k++)c[k]&&c[k+1]?_.push(r(c[k],c[k+1])):_.push(0);return _}function a(t,e,n,r){var i,a=e.y-t.y,s=e.x-t.x,u=o(t,e,n,Math.ceil(r/2)),c=o(t,{x:t.x-s,y:t.y-a},n,Math.ceil(r/2)),l=u.shift()+c.shift()-1;return(i=c.concat(l)).concat.apply(i,u)}function s(t,e){var n=i(t)/i(e),r=0;return e.forEach((function(e,i){r+=Math.pow(t[i]-e*n,2)})),{averageSize:n,error:r}}function u(t,e,n){try{var r=a(t,{x:-1,y:t.y},n,e.length),i=a(t,{x:t.x,y:-1},n,e.length),o=a(t,{x:Math.max(0,t.x-t.y)-1,y:Math.max(0,t.y-t.x)-1},n,e.length),u=a(t,{x:Math.min(n.width,t.x+t.y)+1,y:Math.min(n.height,t.y+t.x)+1},n,e.length),c=s(r,e),l=s(i,e),h=s(o,e),d=s(u,e),f=Math.sqrt(c.error*c.error+l.error*l.error+h.error*h.error+d.error*d.error),p=(c.averageSize+l.averageSize+h.averageSize+d.averageSize)/4;return f+(Math.pow(c.averageSize-p,2)+Math.pow(l.averageSize-p,2)+Math.pow(h.averageSize-p,2)+Math.pow(d.averageSize-p,2))/p}catch(t){return 1/0}}function c(t,e){for(var n=Math.round(e.x);t.get(n,Math.round(e.y));)n--;for(var r=Math.round(e.x);t.get(r,Math.round(e.y));)r++;for(var i=(n+r)/2,o=Math.round(e.y);t.get(Math.round(i),o);)o--;for(var a=Math.round(e.y);t.get(Math.round(i),a);)a++;return{x:i,y:(o+a)/2}}function l(t,e,n,o,s){var c,l,h;try{c=function(t,e,n,o){var s=(i(a(t,n,o,5))/7+i(a(t,e,o,5))/7+i(a(n,t,o,5))/7+i(a(e,t,o,5))/7)/4;if(s<1)throw new Error("Invalid module size");var u=Math.round(r(t,e)/s),c=Math.round(r(t,n)/s),l=Math.floor((u+c)/2)+7;switch(l%4){case 0:l++;break;case 2:l--}return{dimension:l,moduleSize:s}}(o,n,s,t),l=c.dimension,h=c.moduleSize}catch(t){return null}var d=n.x-o.x+s.x,f=n.y-o.y+s.y,p=(r(o,s)+r(o,n))/2/h,m=1-3/p,g={x:o.x+m*(d-o.x),y:o.y+m*(f-o.y)},v=e.map((function(e){var n=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,o=(e.top.y+e.bottom.y+1)/2;if(t.get(Math.floor(n),Math.floor(o))){var a=[e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1];i(a);return{x:n,y:o,score:u({x:Math.floor(n),y:Math.floor(o)},[1,1,1],t)+r({x:n,y:o},g)}}})).filter((function(t){return!!t})).sort((function(t,e){return t.score-e.score}));return{alignmentPattern:p>=15&&v.length?v[0]:g,dimension:l}}e.locate=function(t){for(var e=[],n=[],o=[],a=[],s=function(r){for(var s=0,u=!1,c=[0,0,0,0,0],l=function(e){var o=t.get(e,r);if(o===u)s++;else{c=[c[1],c[2],c[3],c[4],s],s=1,u=o;var l=i(c)/7,h=Math.abs(c[0]-l)<l&&Math.abs(c[1]-l)<l&&Math.abs(c[2]-3*l)<3*l&&Math.abs(c[3]-l)<l&&Math.abs(c[4]-l)<l&&!o,d=i(c.slice(-3))/3,f=Math.abs(c[2]-d)<d&&Math.abs(c[3]-d)<d&&Math.abs(c[4]-d)<d&&o;if(h){var p=e-c[3]-c[4],m=p-c[2],g={startX:m,endX:p,y:r};(v=n.filter((function(t){return m>=t.bottom.startX&&m<=t.bottom.endX||p>=t.bottom.startX&&m<=t.bottom.endX||m<=t.bottom.startX&&p>=t.bottom.endX&&c[2]/(t.bottom.endX-t.bottom.startX)<1.5&&c[2]/(t.bottom.endX-t.bottom.startX)>.5}))).length>0?v[0].bottom=g:n.push({top:g,bottom:g})}if(f){var v,y=e-c[4],b=y-c[3];g={startX:b,y:r,endX:y};(v=a.filter((function(t){return b>=t.bottom.startX&&b<=t.bottom.endX||y>=t.bottom.startX&&b<=t.bottom.endX||b<=t.bottom.startX&&y>=t.bottom.endX&&c[2]/(t.bottom.endX-t.bottom.startX)<1.5&&c[2]/(t.bottom.endX-t.bottom.startX)>.5}))).length>0?v[0].bottom=g:a.push({top:g,bottom:g})}}},h=-1;h<=t.width;h++)l(h);e.push.apply(e,n.filter((function(t){return t.bottom.y!==r&&t.bottom.y-t.top.y>=2}))),n=n.filter((function(t){return t.bottom.y===r})),o.push.apply(o,a.filter((function(t){return t.bottom.y!==r}))),a=a.filter((function(t){return t.bottom.y===r}))},h=0;h<=t.height;h++)s(h);e.push.apply(e,n.filter((function(t){return t.bottom.y-t.top.y>=2}))),o.push.apply(o,a);var d=e.filter((function(t){return t.bottom.y-t.top.y>=2})).map((function(e){var n=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,r=(e.top.y+e.bottom.y+1)/2;if(t.get(Math.round(n),Math.round(r))){var o=[e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1],a=i(o)/o.length;return{score:u({x:Math.round(n),y:Math.round(r)},[1,1,3,1,1],t),x:n,y:r,size:a}}})).filter((function(t){return!!t})).sort((function(t,e){return t.score-e.score})).map((function(t,e,n){if(e>4)return null;var r=n.filter((function(t,n){return e!==n})).map((function(e){return{x:e.x,y:e.y,score:e.score+Math.pow(e.size-t.size,2)/t.size,size:e.size}})).sort((function(t,e){return t.score-e.score}));if(r.length<2)return null;var i=t.score+r[0].score+r[1].score;return{points:[t].concat(r.slice(0,2)),score:i}})).filter((function(t){return!!t})).sort((function(t,e){return t.score-e.score}));if(0===d.length)return null;var f=function(t,e,n){var i,o,a,s,u,c,l,h=r(t,e),d=r(e,n),f=r(t,n);return d>=h&&d>=f?(u=(i=[e,t,n])[0],c=i[1],l=i[2]):f>=d&&f>=h?(u=(o=[t,e,n])[0],c=o[1],l=o[2]):(u=(a=[t,n,e])[0],c=a[1],l=a[2]),(l.x-c.x)*(u.y-c.y)-(l.y-c.y)*(u.x-c.x)<0&&(u=(s=[l,u])[0],l=s[1]),{bottomLeft:u,topLeft:c,topRight:l}}(d[0].points[0],d[0].points[1],d[0].points[2]),p=f.topRight,m=f.topLeft,g=f.bottomLeft,v=l(t,o,p,m,g),y=[];v&&y.push({alignmentPattern:{x:v.alignmentPattern.x,y:v.alignmentPattern.y},bottomLeft:{x:g.x,y:g.y},dimension:v.dimension,topLeft:{x:m.x,y:m.y},topRight:{x:p.x,y:p.y}});var b=c(t,p),w=c(t,m),_=c(t,g),k=l(t,o,b,w,_);return k&&y.push({alignmentPattern:{x:k.alignmentPattern.x,y:k.alignmentPattern.y},bottomLeft:{x:_.x,y:_.y},topLeft:{x:w.x,y:w.y},topRight:{x:b.x,y:b.y},dimension:k.dimension}),0===y.length?null:y}}]).default}))})));function Xs(t){let e,n,r;return{c(){e=E("div"),n=E("p"),r=x(t[1]),I(e,"class","mt-2 text-sm text-white text-center")},m(t,i){w(t,e,i),b(e,n),b(n,r)},p(t,e){2&e&&P(r,t[1])},d(t){t&&_(e)}}}function Js(e){let n,r,i,a,s,u,c,l,h,d,f,p,m=e[1]&&Xs(e);return{c(){n=E("div"),r=E("div"),i=E("canvas"),u=S(),m&&m.c(),c=S(),l=E("div"),h=E("button"),h.textContent="Отмена",d=S(),f=E("button"),f.textContent="Сканировать",I(i,"width",a=320),I(i,"height",s=320),I(r,"id","canvas-container"),I(r,"class","mx-auto"),I(h,"class","btn-gray"),I(f,"class","btn-green"),I(l,"class","mt-10 text-center"),I(n,"class","pt-16 px-2 min-h-screen w-full bg-black opacity-75")},m(t,o){w(t,n,o),b(n,r),b(r,i),e[9](i),b(n,u),m&&m.m(n,null),b(n,c),b(n,l),b(l,h),b(l,d),b(l,f),p=[C(h,"click",e[10]),C(f,"click",e[3])]},p(t,[e]){t[1]?m?m.p(t,e):(m=Xs(t),m.c(),m.m(n,c)):m&&(m.d(1),m=null)},i:t,o:t,d(t){t&&_(n),e[9](null),m&&m.d(),o(p)}}}function tu(t,e,n){const r=G();let i,o,a,s,u;function c(){a.drawImage(i,0,0,o.width,o.height),requestAnimationFrame(c)}function l(){s=a.getImageData(0,0,o.width,o.height);let t=Ys(s.data,s.width,s.height,{inversionAttempts:"dontInvert"});t?(new Audio("./sounds/notification.mp3").play(),n(1,u=t.data),r("result",{result:u}),r("close")):setTimeout(l,300)}z(()=>{a=o.getContext("2d"),i=document.createElement("video")});return[o,u,r,function(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((function(t){i.setAttribute("playsinline",!0),i.srcObject=t,i.play(),c(),l()}))},i,a,s,c,l,function(t){K[t?"unshift":"push"](()=>{n(0,o=t)})},()=>r("close")]}class eu extends wt{constructor(t){super(),bt(this,t,tu,Js,s,{})}}function nu(t,e,n){const r=t.slice();return r[117]=e[n],r}function ru(t,e,n){const r=t.slice();return r[114]=e[n],r}function iu(t){let e;return{c(){e=E("div"),e.textContent="Загрузка...",I(e,"slot","loading"),I(e,"class","mt-16 text-white text-center")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function ou(t){let e;return{c(){e=E("progress"),I(e,"class","mt-2 w-full rounded-full overflow-hidden"),I(e,"max","100"),e.value=t[3]},m(t,n){w(t,e,n)},p(t,n){8&n[0]&&(e.value=t[3])},d(t){t&&_(e)}}}function au(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m=null!=t[3]?ou(t):null;function g(...e){return t[77](t[31],...e)}return{c(){e=E("div"),n=E("div"),r=E("div"),i=E("div"),i.innerHTML='<p class=" font-semibold text-center text-base">\n                                    Добро пожаловать!\n                                    </p> \n                                    <p class=" mt-2">\n                                        На данный момент у вас нет крипто-кошелька привязанного к аккаунту.\n                                        Создайте его прямо сейчас! Придумайте пароль для кошелька и нажмите кнопку &quot;Создать&quot;.\n                                    </p> \n                                    <p class="mt-1 text-red-600"><b>Внимание!</b> Кошелёк будет зашифрован с помощью этого пароля, если вы его забудете, то все средства\n                                        останутся там навсегда, так как нет другого способа его расшифровать. Рекомендуем записать пароль на бумаге\n                                        и хранить в надёжном месте.\n                                    </p> \n                                    <p class="mt-1 text-teal-600">\n                                        После создания кошельки сохраняются в зашифрованном виде, и каждый раз при открытии необходимо вводить пароль.\n                                        Даже если злоумышленники получат доступ к вашему аккаунту, средства на кошельках останутся в сохранности.\n                                        Рекомендуем скачать копию кошелька в зашифрованном виде (файл JSON) или приватный ключ кошелька, для доступа к кошельку\n                                        из других источников. Кнопки появятся под адресом после создания: &quot;Показать приватный ключ&quot;, &quot;Скачать JSON-кошелёк&quot;.\n                                    </p>',a=S(),s=E("div"),m&&m.c(),u=S(),c=E("div"),l=E("input"),h=S(),d=E("div"),f=E("button"),f.textContent="Создать",I(i,"class","text-justify leading-tight text-sm"),I(l,"class","input-password svelte-1niwa8a"),I(l,"type","password"),I(l,"placeholder","Пароль"),I(c,"class","mt-3 text-center"),I(f,"class","btn-orange svelte-1niwa8a"),I(d,"class","mt-3 text-center"),I(r,"class","welcome-block p-2 bg-gray-100 rounded-lg"),I(n,"class","welcome-container p-2 bg-gray-900 h-auto"),I(e,"slot","fallback")},m(o,v){w(o,e,v),b(e,n),b(n,r),b(r,i),b(r,a),b(r,s),m&&m.m(s,null),b(r,u),b(r,c),b(c,l),M(l,t[9]),b(r,h),b(r,d),b(d,f),p=[C(l,"input",t[76]),C(f,"click",g,{once:!0})]},p(e,n){null!=(t=e)[3]?m?m.p(t,n):(m=ou(t),m.c(),m.m(s,null)):m&&(m.d(1),m=null),512&n[0]&&l.value!==t[9]&&M(l,t[9])},d(t){t&&_(e),m&&m.d(),o(p)}}}function su(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,A,M,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,J,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,dt,ft,pt,mt,gt,vt,yt,bt,wt,_t,kt,Et,xt,St,Tt,Ct,It,At,Pt,Mt,Nt,Lt,Dt,Rt,Ot,Bt,Ut,Ft,jt,qt,$t,Vt,zt=Math.trunc(+t[24]/1e9)+"",Ht=t[20]&&cu(t),Gt=t[22]&&hu(t);function Wt(t,e){return t[30]?du:fu}let Kt=Wt(t),Zt=Kt(t),Qt=t[30]&&pu(t),Yt=t[14]&&mu(t),Xt=t[15]&&vu(t),Jt=t[28]&&yu(t);return{c(){e=E("div"),n=E("div"),r=S(),i=E("div"),a=E("div"),s=E("div"),s.innerHTML='<span class="text-sm text-gray-700 font-semibold">\n                                            Текущая сеть: \n                                        </span> \n                                        <span class="help svelte-1niwa8a"><img src="./icons/help.svg" alt="help" class="w-4 h-4"> \n                                            <span class="svelte-1niwa8a">\n                                                &quot;Homestead&quot; - главная сеть эфириума (Ethereum mainnet).\n                                                &quot;Ropsten&quot; - тестовая сеть эфириума (Ropsten testnet).\n                                                &quot;Rinkeby&quot; - тестовая сеть эфириума (Rinkeby mainnet).\n                                            </span></span>',u=S(),c=E("div"),l=E("span"),h=E("select"),d=E("option"),d.textContent="homestead",f=E("option"),f.textContent="rinkeby",p=E("option"),p.textContent="ropsten",m=S(),Ht&&Ht.c(),g=S(),v=E("div"),y=E("div"),k=E("div"),k.innerHTML='<span class="text-sm text-gray-700 font-semibold">\n                                            Текущий кошелёк: \n                                        </span>',T=S(),A=E("div"),M=E("div"),N=E("div"),L=x(t[8]),D=S(),R=E("div"),O=E("img"),U=S(),F=E("div"),j=E("img"),$=S(),V=E("div"),z=E("button"),z.textContent="добавить +",H=S(),G=E("div"),W=E("div"),K=E("input"),Z=S(),Q=E("div"),Y=E("img"),J=S(),tt=E("div"),et=E("span"),et.textContent="Показать приватный ключ",nt=S(),rt=E("span"),rt.textContent="JSON-кошелёк",it=S(),Gt&&Gt.c(),ot=S(),at=E("div"),st=E("div"),ut=E("div"),ut.innerHTML='<p class=" text-center font-semibold text-green-500">\n                                            Баланс\n                                        </p>',ct=S(),lt=E("div"),ht=E("div"),dt=E("div"),ft=E("div"),ft.textContent="Eth:",pt=S(),mt=E("div"),gt=x(t[23]),vt=S(),yt=E("div"),Zt.c(),bt=S(),Qt&&Qt.c(),wt=S(),_t=E("div"),kt=E("p"),Et=E("span"),Et.textContent="TAK:",xt=S(),St=E("span"),Tt=x(t[0]),Ct=S(),It=E("div"),At=E("p"),Pt=E("span"),Pt.textContent="Цена газа:",Mt=S(),Nt=E("span"),Lt=x(zt),Dt=x(" gwei"),Rt=S(),Ot=E("div"),Bt=E("button"),Bt.textContent="Показать токены",Ut=S(),Ft=E("button"),Ft.textContent="Добавить токен",jt=S(),Yt&&Yt.c(),qt=S(),Xt&&Xt.c(),$t=S(),Jt&&Jt.c(),I(n,"class","wallet-header"),d.__value="homestead",d.value=d.__value,f.__value="rinkeby",f.value=f.__value,p.__value="ropsten",p.value=p.__value,I(h,"id","select-network"),I(h,"class","svelte-1niwa8a"),I(a,"class"," flex flex-row justify-between items-center"),I(i,"class","wallet-block svelte-1niwa8a"),I(N,"class","p-1 w-full border border-gray-400 bg-white rounded-lg"),O.src!==(B="./icons/unfold_more.svg")&&I(O,"src","./icons/unfold_more.svg"),I(O,"alt","copy"),I(O,"class","w-6 h-6 cursor-pointer"),I(R,"class","ml-1 p-1 rounded-full bg-teal-500 shadow-md"),j.src!==(q="./icons/qr_code.svg")&&I(j,"src","./icons/qr_code.svg"),I(j,"alt","QR"),I(j,"class","ml-3 w-8 h-8 cursor-pointer"),I(M,"class"," flex flex-row"),I(z,"class","btn-opt mb-2 svelte-1niwa8a"),I(A,"class","flex flex-row justify-between items-center"),I(K,"id","wallet-address"),I(K,"type","text"),K.value=t[10],I(K,"class","svelte-1niwa8a"),I(W,"class"," w-11/12"),Y.src!==(X="./icons/file-copy.svg")&&I(Y,"src","./icons/file-copy.svg"),I(Y,"alt","copy"),I(Y,"class"," w-6 h-6 cursor-pointer"),I(Q,"class","px-1"),I(G,"class","mt-1 flex flex-row justify-between items-center"),I(et,"class","link-wallet-secret svelte-1niwa8a"),I(rt,"class","link-wallet-secret svelte-1niwa8a"),I(v,"class","wallet-block svelte-1niwa8a"),I(ft,"class","ml-1 font-semibold text-blue-500"),I(mt,"class"," text-orange-500"),I(dt,"class"," flex flex-row justify-between items-center"),I(ht,"class","token svelte-1niwa8a"),I(Et,"class"," text-blue-500"),I(St,"class"," text-orange-500"),I(_t,"class","token svelte-1niwa8a"),I(Pt,"class"," text-blue-500"),I(Nt,"class"," text-orange-500"),I(It,"class","token svelte-1niwa8a"),I(lt,"class","mt-2 flex flex-col"),I(Bt,"class","btn-opt svelte-1niwa8a"),I(Ft,"class","btn-opt svelte-1niwa8a"),I(Ot,"class","mt-2 text-center"),I(st,"class"," flex flex-col"),I(at,"class","wallet-block svelte-1niwa8a"),I(e,"class","wallet flex flex-col px-2 rounded-lg bg-gray-200")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(a,s),b(a,u),b(a,c),b(c,l),b(l,h),b(h,d),b(h,f),b(h,p),b(e,m),Ht&&Ht.m(e,null),b(e,g),b(e,v),b(v,y),b(y,k),b(y,T),b(y,A),b(A,M),b(M,N),b(N,L),b(M,D),b(M,R),b(R,O),b(M,U),b(M,F),b(F,j),b(A,$),b(A,V),b(V,z),b(y,H),b(y,G),b(G,W),b(W,K),b(G,Z),b(G,Q),b(Q,Y),b(y,J),b(y,tt),b(tt,et),b(tt,nt),b(tt,rt),b(v,it),Gt&&Gt.m(v,null),b(e,ot),b(e,at),b(at,st),b(st,ut),b(st,ct),b(st,lt),b(lt,ht),b(ht,dt),b(dt,ft),b(dt,pt),b(dt,mt),b(mt,gt),b(dt,vt),b(dt,yt),Zt.m(yt,null),b(ht,bt),Qt&&Qt.m(ht,null),b(lt,wt),b(lt,_t),b(_t,kt),b(kt,Et),b(kt,xt),b(kt,St),b(St,Tt),b(lt,Ct),b(lt,It),b(It,At),b(At,Pt),b(At,Mt),b(At,Nt),b(Nt,Lt),b(Nt,Dt),b(st,Rt),b(st,Ot),b(Ot,Bt),b(Ot,Ut),b(Ot,Ft),b(at,jt),Yt&&Yt.m(at,null),b(e,qt),Xt&&Xt.m(e,null),b(e,$t),Jt&&Jt.m(e,null),Vt=[C(h,"input",t[33]),C(O,"click",t[90]),C(j,"click",t[91]),C(z,"click",t[92]),C(Y,"click",t[93]),C(et,"click",t[94]),C(rt,"click",t[95]),C(Bt,"click",t[42]),C(Ft,"click",t[102])]},p(t,n){t[20]?Ht?Ht.p(t,n):(Ht=cu(t),Ht.c(),Ht.m(e,g)):Ht&&(Ht.d(1),Ht=null),256&n[0]&&P(L,t[8]),1024&n[0]&&K.value!==t[10]&&(K.value=t[10]),t[22]?Gt?Gt.p(t,n):(Gt=hu(t),Gt.c(),Gt.m(v,null)):Gt&&(Gt.d(1),Gt=null),8388608&n[0]&&P(gt,t[23]),Kt===(Kt=Wt(t))&&Zt?Zt.p(t,n):(Zt.d(1),Zt=Kt(t),Zt&&(Zt.c(),Zt.m(yt,null))),t[30]?Qt?Qt.p(t,n):(Qt=pu(t),Qt.c(),Qt.m(ht,null)):Qt&&(Qt.d(1),Qt=null),1&n[0]&&P(Tt,t[0]),16777216&n[0]&&zt!==(zt=Math.trunc(+t[24]/1e9)+"")&&P(Lt,zt),t[14]?Yt?Yt.p(t,n):(Yt=mu(t),Yt.c(),Yt.m(at,null)):Yt&&(Yt.d(1),Yt=null),t[15]?Xt?Xt.p(t,n):(Xt=vu(t),Xt.c(),Xt.m(e,$t)):Xt&&(Xt.d(1),Xt=null),t[28]?Jt?Jt.p(t,n):(Jt=yu(t),Jt.c(),Jt.m(e,null)):Jt&&(Jt.d(1),Jt=null)},d(t){t&&_(e),Ht&&Ht.d(),Gt&&Gt.d(),Zt.d(),Qt&&Qt.d(),Yt&&Yt.d(),Xt&&Xt.d(),Jt&&Jt.d(),o(Vt)}}}function uu(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m;let g=function(t,e){return t[32].length>1?_u:wu}(t)(t),v=null!=t[4]?Eu(t):null;return{c(){e=E("div"),n=E("p"),n.textContent="Выберите кошелёк:",r=S(),g.c(),i=S(),a=E("div"),a.innerHTML='<p class=" text-center font-semibold text-gray-700">\n                                    Введите пароль кошелька:\n                                </p>',s=S(),u=E("div"),v&&v.c(),c=S(),l=E("div"),h=E("input"),d=S(),f=E("div"),p=E("button"),p.textContent="Открыть",I(n,"class","mb-2 font-semibold text-center text-gray-800"),I(a,"class","mt-3"),I(h,"class","input-password svelte-1niwa8a"),I(h,"type","password"),I(l,"class","mt-2 text-center"),I(p,"class","btn-orange svelte-1niwa8a"),I(f,"class","mt-4 text-center"),I(e,"class","auth-block p-4 bg-gray-100 rounded-lg")},m(o,y){w(o,e,y),b(e,n),b(e,r),g.m(e,null),b(e,i),b(e,a),b(e,s),b(e,u),v&&v.m(u,null),b(e,c),b(e,l),b(l,h),M(h,t[9]),b(e,d),b(e,f),b(f,p),m=[C(h,"input",t[81]),C(p,"click",t[82])]},p(t,e){g.p(t,e),null!=t[4]?v?v.p(t,e):(v=Eu(t),v.c(),v.m(u,null)):v&&(v.d(1),v=null),512&e[0]&&h.value!==t[9]&&M(h,t[9])},d(t){t&&_(e),g.d(),v&&v.d(),o(m)}}}function cu(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,x,T,A,P,N,L,D,R,O,B,U,F,j,q,$=null!=t[3]?lu(t):null;function V(...e){return t[86](t[31],...e)}function z(...e){return t[88](t[31],...e)}return{c(){e=E("div"),n=E("div"),r=E("div"),i=E("p"),i.textContent="Создать новый кошелёк:",a=S(),$&&$.c(),s=S(),u=E("p"),c=E("input"),l=S(),h=E("button"),h.textContent="Отмена",d=S(),f=E("p"),p=E("input"),m=S(),g=E("button"),g.textContent="Создать",v=S(),y=E("div"),k=E("p"),k.textContent="Импортировать существующий кошелёк и сохранить:",x=S(),T=E("p"),A=E("input"),P=S(),N=E("button"),N.textContent="Импорт",L=S(),D=E("div"),R=E("p"),R.textContent="Временный импорт:",O=S(),B=E("p"),U=E("input"),F=S(),j=E("button"),j.textContent="Импорт",I(i,"class"," text-sm text-center text-orange-600 font-semibold"),I(c,"class","input-field svelte-1niwa8a"),I(c,"type","text"),I(c,"placeholder","Название кошелька"),I(h,"class","btn-gray ml-1 svelte-1niwa8a"),I(u,"class","mt-2"),I(p,"class","input-field svelte-1niwa8a"),I(p,"type","text"),I(p,"placeholder","Пароль кошелька"),I(g,"class","btn-orange svelte-1niwa8a"),I(f,"class","mt-1"),I(k,"class"," text-sm text-center text-orange-600 font-semibold"),I(A,"class","input-field svelte-1niwa8a"),I(A,"type","text"),I(A,"placeholder","Приватный ключ"),I(N,"class","btn-green svelte-1niwa8a"),I(y,"class","mt-2"),I(R,"class"," text-sm text-center text-orange-600 font-semibold"),I(U,"class","input-field svelte-1niwa8a"),I(U,"type","text"),I(U,"placeholder","Приватный ключ"),I(j,"class","btn-orange svelte-1niwa8a"),I(D,"class","mt-2"),I(n,"class"," flex flex-col"),I(e,"class","wallet-block svelte-1niwa8a")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(r,i),b(r,a),$&&$.m(r,null),b(r,s),b(r,u),b(u,c),M(c,t[18]),b(u,l),b(u,h),b(r,d),b(r,f),b(f,p),M(p,t[19]),b(f,m),b(f,g),b(n,v),b(n,y),b(y,k),b(y,x),b(y,T),b(T,A),M(A,t[25]),b(T,P),b(T,N),b(n,L),b(n,D),b(D,R),b(D,O),b(D,B),b(B,U),M(U,t[25]),b(B,F),b(B,j),q=[C(c,"input",t[83]),C(h,"click",t[84]),C(p,"input",t[85]),C(g,"click",V),C(A,"input",t[87]),C(N,"click",z),C(U,"input",t[89]),C(j,"click",t[37])]},p(e,n){null!=(t=e)[3]?$?$.p(t,n):($=lu(t),$.c(),$.m(r,s)):$&&($.d(1),$=null),262144&n[0]&&c.value!==t[18]&&M(c,t[18]),524288&n[0]&&p.value!==t[19]&&M(p,t[19]),33554432&n[0]&&A.value!==t[25]&&M(A,t[25]),33554432&n[0]&&U.value!==t[25]&&M(U,t[25])},d(t){t&&_(e),$&&$.d(),o(q)}}}function lu(t){let e;return{c(){e=E("progress"),I(e,"max","100"),I(e,"class"," mt-2 w-full rounded-full overflow-hidden"),e.value=t[3]},m(t,n){w(t,e,n)},p(t,n){8&n[0]&&(e.value=t[3])},d(t){t&&_(e)}}}function hu(t){let e,n,r,i,a,s,u;return{c(){e=E("div"),n=E("div"),r=E("input"),i=S(),a=E("div"),s=E("button"),s.textContent="Закрыть",I(r,"id","private-key"),I(r,"class","view-private-key svelte-1niwa8a"),I(r,"type","text"),r.value=t[11],I(n,"class","mt-2"),I(s,"class","btn-gray svelte-1niwa8a"),I(a,"class","mt-2"),I(e,"class","wallet-secret svelte-1niwa8a")},m(o,c){w(o,e,c),b(e,n),b(n,r),b(e,i),b(e,a),b(a,s),u=[C(r,"click",t[34]),C(s,"click",t[96])]},p(t,e){2048&e[0]&&r.value!==t[11]&&(r.value=t[11])},d(t){t&&_(e),o(u)}}}function du(e){let n,r,i;return{c(){n=E("img"),I(n,"class","w-8 h-8 cursor-pointer"),n.src!==(r="./icons/expand_less.svg")&&I(n,"src","./icons/expand_less.svg"),I(n,"alt","less")},m(t,r){w(t,n,r),i=C(n,"click",e[98])},p:t,d(t){t&&_(n),i()}}}function fu(e){let n,r,i;return{c(){n=E("img"),I(n,"class","w-8 h-8 cursor-pointer"),n.src!==(r="./icons/expand_more.svg")&&I(n,"src","./icons/expand_more.svg"),I(n,"alt","more")},m(t,r){w(t,n,r),i=C(n,"click",e[97])},p:t,d(t){t&&_(n),i()}}}function pu(t){let e,n,r,i,a,s,u,c,l,h;return{c(){e=E("div"),n=E("input"),r=S(),i=E("img"),s=S(),u=E("input"),c=S(),l=E("button"),l.textContent="Отправить",I(n,"class","input-field svelte-1niwa8a"),I(n,"type","text"),I(n,"placeholder","Адрес получателя"),i.src!==(a="./icons/scan.svg")&&I(i,"src","./icons/scan.svg"),I(i,"alt","QR"),I(i,"class"," inline-block w-6 h-6 cursor-pointer"),I(u,"class","input-field svelte-1niwa8a"),I(u,"type","text"),I(u,"placeholder","Количество"),I(l,"class","btn-green svelte-1niwa8a"),I(e,"class","text-center")},m(o,a){w(o,e,a),b(e,n),M(n,t[27]),b(e,r),b(e,i),b(e,s),b(e,u),M(u,t[26]),b(e,c),b(e,l),h=[C(n,"input",t[99]),C(i,"click",t[100]),C(u,"input",t[101]),C(l,"click",t[45])]},p(t,e){134217728&e[0]&&n.value!==t[27]&&M(n,t[27]),67108864&e[0]&&u.value!==t[26]&&M(u,t[26])},d(t){t&&_(e),o(h)}}}function mu(t){let e,n=t[16],r=[];for(let e=0;e<n.length;e+=1)r[e]=gu(nu(t,n,e));return{c(){e=E("div");for(let t=0;t<r.length;t+=1)r[t].c();I(e,"class","mt-3 flex flex-col")},m(t,n){w(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(268500992&i[0]){let o;for(n=t[16],o=0;o<n.length;o+=1){const a=nu(t,n,o);r[o]?r[o].p(a,i):(r[o]=gu(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&_(e),k(r,t)}}}function gu(t){let e,n,r,i,o,a,s,u,c,l,h,d,f,p=t[117].name+"",m=+t[117].balance/1e18+"";return{c(){e=E("div"),n=E("label"),r=E("span"),i=x(p),o=x(":"),a=S(),s=E("span"),u=x(m),c=S(),l=E("input"),d=S(),I(r,"class"," text-blue-500"),I(s,"class"," text-orange-500"),I(l,"type","radio"),l.__value=h=t[117].address,l.value=l.__value,t[79][1].push(l),I(e,"class","token svelte-1niwa8a")},m(h,p){w(h,e,p),b(e,n),b(n,r),b(r,i),b(r,o),b(n,a),b(n,s),b(s,u),b(n,c),b(n,l),l.checked=l.__value===t[28],b(e,d),f=C(l,"change",t[103])},p(t,e){65536&e[0]&&p!==(p=t[117].name+"")&&P(i,p),65536&e[0]&&m!==(m=+t[117].balance/1e18+"")&&P(u,m),65536&e[0]&&h!==(h=t[117].address)&&(l.__value=h),l.value=l.__value,268435456&e[0]&&(l.checked=l.__value===t[28])},d(n){n&&_(e),t[79][1].splice(t[79][1].indexOf(l),1),f()}}}function vu(t){let e,n,r,i,a,s,u,c,l,h,d,f,p;return{c(){e=E("div"),n=E("div"),n.innerHTML='<p class=" text-center font-semibold text-teal-500">\n                                        Добавить токен:\n                                    </p>',r=S(),i=E("div"),a=E("input"),s=S(),u=E("input"),c=S(),l=E("div"),h=E("button"),h.textContent="Добавить",d=S(),f=E("button"),f.textContent="Отмена",I(a,"class","input-field svelte-1niwa8a"),I(a,"type","text"),I(a,"placeholder","Название токена"),I(u,"class","input-field svelte-1niwa8a"),I(u,"type","text"),I(u,"placeholder","Адрес смарт-контракта токена"),I(i,"class"," text-center"),I(h,"class","btn-orange svelte-1niwa8a"),I(f,"class","btn-gray svelte-1niwa8a"),I(l,"class"," text-center"),I(e,"class","wallet-block svelte-1niwa8a")},m(o,m){w(o,e,m),b(e,n),b(e,r),b(e,i),b(i,a),M(a,t[12]),b(i,s),b(i,u),M(u,t[13]),b(e,c),b(e,l),b(l,h),b(l,d),b(l,f),p=[C(a,"input",t[104]),C(u,"input",t[105]),C(h,"click",t[41]),C(f,"click",t[106])]},p(t,e){4096&e[0]&&a.value!==t[12]&&M(a,t[12]),8192&e[0]&&u.value!==t[13]&&M(u,t[13])},d(t){t&&_(e),o(p)}}}function yu(t){let e,n,r,i,a,s,u,c,l,h,d,f,p=t[29]&&bu(t);return{c(){e=E("div"),n=E("div"),r=E("p"),r.textContent="Отправить токены",i=S(),a=E("div"),s=E("input"),u=S(),c=E("input"),l=S(),h=E("button"),h.textContent="Отправить",d=S(),p&&p.c(),I(r,"class"," text-center font-semibold text-teal-500"),I(s,"class","input-field svelte-1niwa8a"),I(s,"type","text"),I(s,"placeholder","Адрес получателя"),I(c,"class","input-field svelte-1niwa8a"),I(c,"type","text"),I(c,"placeholder","Количество"),I(h,"class","btn-green svelte-1niwa8a"),I(a,"class"," text-center"),I(e,"class","wallet-block svelte-1niwa8a")},m(o,m){w(o,e,m),b(e,n),b(n,r),b(n,i),b(n,a),b(a,s),M(s,t[27]),b(a,u),b(a,c),M(c,t[26]),b(a,l),b(a,h),b(n,d),p&&p.m(n,null),f=[C(s,"input",t[107]),C(c,"input",t[108]),C(h,"click",t[44])]},p(t,e){134217728&e[0]&&s.value!==t[27]&&M(s,t[27]),67108864&e[0]&&c.value!==t[26]&&M(c,t[26]),t[29]?p?p.p(t,e):(p=bu(t),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},d(t){t&&_(e),p&&p.d(),o(f)}}}function bu(t){let e,n,r,i;return{c(){e=E("div"),n=E("a"),r=x(t[29]),I(n,"class","link-hash svelte-1niwa8a"),I(n,"href",i=`https://${t[21].network.name}.etherscan.io/tx/${t[29]}`),I(e,"class","mt-1 p-1 w-full bg-white rounded-lg truncate")},m(t,i){w(t,e,i),b(e,n),b(n,r)},p(t,e){536870912&e[0]&&P(r,t[29]),538968064&e[0]&&i!==(i=`https://${t[21].network.name}.etherscan.io/tx/${t[29]}`)&&I(n,"href",i)},d(t){t&&_(e)}}}function wu(t){let e,n,r,i,o,a,s,u,c;return{c(){e=E("div"),n=E("label"),r=E("span"),r.textContent=`${t[32][0].name}`,i=S(),o=E("input"),s=S(),u=E("span"),u.textContent=`${t[32][0].address}`,I(o,"type","radio"),o.__value=a=0,o.value=o.__value,o.checked=!0,t[79][0].push(o),I(n,"for",""),I(u,"class"," text-teal-600 text-xs tracking-tight"),I(e,"class","mt-1 p-1 text-orange-600 bg-white border rounded-lg")},m(a,l){w(a,e,l),b(e,n),b(n,r),b(n,i),b(n,o),o.checked=o.__value===t[17],b(e,s),b(e,u),c=C(o,"change",t[80])},p(t,e){131072&e[0]&&(o.checked=o.__value===t[17])},d(n){n&&_(e),t[79][0].splice(t[79][0].indexOf(o),1),c()}}}function _u(t){let e,n=t[32],r=[];for(let e=0;e<n.length;e+=1)r[e]=ku(ru(t,n,e));return{c(){e=E("div");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){w(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(131072&i[0]|2&i[1]){let o;for(n=t[32],o=0;o<n.length;o+=1){const a=ru(t,n,o);r[o]?r[o].p(a,i):(r[o]=ku(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&_(e),k(r,t)}}}function ku(t){let e,n,r,i,o,a,s,u,c,l,h,d,f=t[114].name+"",p=t[114].address+"";return{c(){e=E("div"),n=E("label"),r=E("span"),i=x(f),o=S(),a=E("input"),u=S(),c=E("span"),l=x(p),h=S(),I(a,"type","radio"),a.__value=s=t[114].id,a.value=a.__value,t[79][0].push(a),I(n,"for",""),I(c,"class"," text-teal-600 text-xs tracking-tight"),I(e,"class","mt-1 p-1 text-orange-600 bg-white border rounded-lg")},m(s,f){w(s,e,f),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),a.checked=a.__value===t[17],b(e,u),b(e,c),b(c,l),b(e,h),d=C(a,"change",t[78])},p(t,e){131072&e[0]&&(a.checked=a.__value===t[17])},d(n){n&&_(e),t[79][0].splice(t[79][0].indexOf(a),1),d()}}}function Eu(t){let e;return{c(){e=E("progress"),I(e,"class","mt-4 w-full rounded-full overflow-hidden"),I(e,"max","100"),e.value=t[4]},m(t,n){w(t,e,n)},p(t,n){16&n[0]&&(e.value=t[4])},d(t){t&&_(e)}}}function xu(t){let e,n,r;function i(t,e){return t[5]?su:uu}let o=i(t),a=o(t);return{c(){e=S(),n=S(),r=E("div"),a.c(),I(r,"class","wallet-container p-2 bg-gray-900 h-auto")},m(t,i){w(t,e,i),w(t,n,i),w(t,r,i),a.m(r,null)},p(t,e){o===(o=i(t))&&a?a.p(t,e):(a.d(1),a=o(t),a&&(a.c(),a.m(r,null)))},d(t){t&&_(e),t&&_(n),t&&_(r),a.d()}}}function Su(t){let e;const n=new Re({props:{path:`users/${t[31].uid}/wallets/default`,$$slots:{default:[xu,({data:t,ref:e})=>({50:t,113:e}),({data:t,ref:e})=>[0,t?524288:0,0,e?1048576:0]],fallback:[au,({data:t,ref:e})=>({50:t,113:e}),({data:t,ref:e})=>[0,t?524288:0,0,e?1048576:0]],loading:[iu,({data:t,ref:e})=>({50:t,113:e}),({data:t,ref:e})=>[0,t?524288:0,0,e?1048576:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1&e[1]&&(r.path=`users/${t[31].uid}/wallets/default`),2147483641&e[0]|134217728&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Tu(t){let e;const n=new me({props:{$$slots:{default:[Su,({user:t})=>({31:t}),({user:t})=>[0,t?1:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};2147483641&e[0]|1&e[1]|134217728&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Cu(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=E("div"),n=E("div"),r=E("p"),i=x(t[2]),o=S(),a=E("p"),s=E("button"),s.textContent="Ок",I(r,"class","text-center"),I(s,"class","btn-orange svelte-1niwa8a"),I(a,"class","mt-2 text-center"),I(n,"class","p-3 border bg-white rounded-lg shadow-lg"),I(e,"id","alertBox"),I(e,"class"," fixed top-0 svelte-1niwa8a")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=C(s,"click",t[109])},p(t,e){(!c||4&e[0])&&P(i,t[2])},i(t){c||(J(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function Iu(t){let e,n;const r=new Qs({props:{codeValue:t[10],squareSize:"250"}});return r.$on("close",t[110]),{c(){e=E("div"),mt(r.$$.fragment),I(e,"class"," fixed top-0")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};1024&e[0]&&(n.codeValue=t[10]),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function Au(e){let n,r;const i=new eu({});return i.$on("result",e[111]),i.$on("close",e[112]),{c(){n=E("div"),mt(i.$$.fragment),I(n,"class"," fixed top-0")},m(t,e){w(t,n,e),gt(i,n,null),r=!0},p:t,i(t){r||(lt(i.$$.fragment,t),r=!0)},o(t){ht(i.$$.fragment,t),r=!1},d(t){t&&_(n),vt(i)}}}function Pu(t){let e,n,r,i,o,a;const s=new Qt({props:{firebase:Lt,$$slots:{default:[Tu]},$$scope:{ctx:t}}});let u=t[1]&&Cu(t),c=t[6]&&Iu(t),l=t[7]&&Au(t);return{c(){e=E("div"),mt(s.$$.fragment),n=S(),u&&u.c(),r=S(),c&&c.c(),i=S(),l&&l.c(),o=T(),I(e,"class","main-container svelte-1niwa8a")},m(t,h){w(t,e,h),gt(s,e,null),w(t,n,h),u&&u.m(t,h),w(t,r,h),c&&c.m(t,h),w(t,i,h),l&&l.m(t,h),w(t,o,h),a=!0},p(t,e){const n={};2147483641&e[0]|1&e[1]|134217728&e[3]&&(n.$$scope={dirty:e,ctx:t}),s.$set(n),t[1]?u?(u.p(t,e),lt(u,1)):(u=Cu(t),u.c(),lt(u,1),u.m(r.parentNode,r)):u&&(ut(),ht(u,1,1,()=>{u=null}),ct()),t[6]?c?(c.p(t,e),lt(c,1)):(c=Iu(t),c.c(),lt(c,1),c.m(i.parentNode,i)):c&&(ut(),ht(c,1,1,()=>{c=null}),ct()),t[7]?l?(l.p(t,e),lt(l,1)):(l=Au(t),l.c(),lt(l,1),l.m(o.parentNode,o)):l&&(ut(),ht(l,1,1,()=>{l=null}),ct())},i(t){a||(lt(s.$$.fragment,t),lt(u),lt(c),lt(l),a=!0)},o(t){ht(s.$$.fragment,t),ht(u),ht(c),ht(l),a=!1},d(t){t&&_(e),vt(s),t&&_(n),u&&u.d(t),t&&_(r),c&&c.d(t),t&&_(i),l&&l.d(t),t&&_(o)}}}function Mu(t,e,n){let r,i,o,a,s,u,c,l,h,d,f,p,m,g,v,y,b,w,_,k,E,x,S,T,C,I,A,P,M,N,L,D=0,R=!1,O=!1,B=!1,U=[],F=[],j=Hs.getDefaultProvider(),q=j.network.name,$=new Hs.providers.EtherscanProvider;function V(){Lt.auth().onAuthStateChanged((function(t){t?(n(31,r=t),J()):console.log("no user")}))}function H(t){n(10,f=t.address),n(11,p=t.privateKey),m=t.mnemonic,n(21,j=Hs.getDefaultProvider()),c=new Hs.Wallet(p,j),G(),W(),it(),K(c.address)}function G(){c.getBalance().then(t=>{let e=Hs.utils.formatEther(t);n(23,S=e)})}function W(){j.getGasPrice().then(t=>{n(24,T=t.toString())})}function K(t){let e=t;$.getHistory(e,0,"latest").then((function(t){return console.log(t),t}))}function Z(t,e){i||(n(2,o=t),n(1,i=!0)),setTimeout(()=>{n(1,i=!1)},e)}function Q(t){let e=document.getElementById(t);e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),Z("Скопировано.",2e3)}function Y(){let t=F.filter(t=>t.address===c.address),e=t[0].wjson,n=`${t[0].name}.json`,r=new Blob([e],{type:"application/json",name:n});Ws(r,n)}function X(t){if(null==_)Z("Введите название кошелька!",5e3);else if(null==k)Z("Введите пароль для кошелька!",5e3);else if(null==C)Z("Введите приватный ключ кошелька!",5e3);else{H(new Hs.Wallet(C)),n(8,h=_);const e=d;c.encrypt(e,(function(t){n(3,s=parseInt(100*t))})).then((function(e){l=e,Ht.collection(`users/${t}/wallets`).doc(_).set({name:_,address:f,owner:t,wjson:l}).then((function(t){n(20,E=!1),Z("Кошелёк создан.",2e3)})).catch((function(t){console.error("Error adding document: ",t),Z(`Ошибка: ${t.message}`,2e3)})),n(3,s=null)}))}}function J(){Ht.collection(`users/${r.uid}/wallets`).get().then((function(t){t.forEach((function(t){const e=t.data();F.push({id:F.length,name:e.name,address:e.address,wjson:e.wjson})}))}))}function tt(){const t=F[w];n(8,h=t.name),new Hs.Wallet.fromEncryptedJson(t.wjson,d,(function(t){n(4,u=parseInt(100*t))})).then(t=>{H(t),n(5,R=!0)}).catch(t=>{console.log("error",t.message)})}function et(){new Hs.Wallet.fromEncryptedJson(l,d,(function(t){n(4,u=parseInt(100*t))})).then(t=>{H(t),n(5,R=!0)}).catch(t=>{console.log("error",t.message)})}function nt(t){null==d&&alert("Введите пароль!"),H(Hs.Wallet.createRandom());const e=d;c.encrypt(e,(function(t){n(3,s=parseInt(100*t))})).then((function(e){l=e,Ht.collection(`users/${t}/wallets`).doc("default").set({name:"default",address:f,owner:t,wjson:l}).then((function(t){Z("Кошелёк создан.",2e3),document.location.reload(!0)})).catch((function(t){console.error("Error adding document: ",t)})),n(3,s=null)}))}function rt(){U.forEach(async t=>{const e=new Hs.Contract(t.address,Gs,j),r=await e.balanceOf(c.address);t.balance=await r.toString(),n(14,y=!0)}),console.log("tokenList",U)}async function it(){const t=new Hs.Contract("0x943b8cc219a5fb3ba70adb173774987c63c3080b",Gs,j);n(0,D=await t.balanceOf(c.address)),console.log("balanceOfTAK",D.toString())}function ot(t){if(null==_)Z("Введите название кошелька!",2e3);else if(null==k)Z("Введите пароль для кошелька!",2e3);else{H(Hs.Wallet.createRandom());const e=d;c.encrypt(e,(function(t){n(3,s=parseInt(100*t))})).then((function(e){l=e,Ht.collection(`users/${t}/wallets`).doc(_).set({name:_,address:f,owner:t,wjson:l}).then((function(t){Z("Кошелёк создан.",2e3)})).catch((function(t){Z(`Ошибка: ${t.message}`,5e3)})),n(3,s=null)})).catch((function(t){Z(`Ошибка: ${t.message}`,5e3)}))}}z(V);return[D,i,o,s,u,R,O,B,h,d,f,p,g,v,y,b,U,w,_,k,E,j,x,S,T,C,A,P,M,N,L,r,F,function(t){n(21,j=Hs.getDefaultProvider(t.target.value)),c=new Hs.Wallet(p,j),G(),W(),K(c.address)},function(){let t=document.getElementById("private-key");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),Z("Скопировано.",2e3)},Q,Y,function(){H(new Hs.Wallet(C)),Z("Готово",2e3)},X,tt,nt,function(){v&&null==g?Z("Заполните все необходимые поля.",3e3):Ht.collection(`users/${r.uid}/wallets/${h}/tokens`).add({network:j.network.name,name:g,address:v}).then((function(t){Z("Токен добавлен.",3e3),n(15,b=!1)})).catch((function(t){console.error("Error adding document: ",t)}))},function(){n(14,y=!1),n(16,U.length=0,U),Ht.collection(`users/${r.uid}/wallets/${h}/tokens`).where("network","==",j.network.name).get().then((function(t){t.forEach((function(t){const e=t.data();U.push({name:e.name,address:e.address,balance:0,id:t.id})})),rt()}))},ot,function(){const t=new Hs.Contract(M,Gs,c),e=Hs.utils.parseUnits(A,18);t.transfer(P,e).then((function(t){console.log(t),n(29,N=t.hash),Z("Отправлено",3e3)})).catch(t=>{Z(`Ошибка: ${t.message}`,3e3)})},function(){let t=Hs.utils.parseEther(A),e={to:P,value:t};c.sendTransaction(e).then(t=>{console.log(t),Z("Отправлено",3e3)}).catch(t=>{Z(`Ошибка: ${t.message}`,3e3)})},a,l,m,I,c,void 0,void 0,void 0,void 0,void 0,void 0,q,$,V,H,void 0,G,function(){c.getTransactionCount().then(t=>{console.log(t)})},W,K,Z,function(t){j.getBalance(t).then(t=>{let e=Hs.utils.formatEther(t);console.log("Balance: "+e)})},function(){null==d&&alert("Введите пароль!");let t=d;c.encrypt(t,(function(t){a=parseInt(100*t),console.log("Encrypting: "+parseInt(100*t)+"% complete")})).then((function(t){l=t,console.log(l),a=null}))},function(){I=new Hs.Wallet.fromEncryptedJson(l,d,(function(t){a=parseInt(100*t)})),H(I)},J,et,function(t){Ht.collection(`users/${t}/wallets`).doc("default").get().then((function(t){if(t.exists){const e=t.data();l=e.wjson,n(8,h=t.id),et()}else alert("Ошибка! Кошелек не найден.")})).catch((function(t){console.log("Error getting document:",t)}))},rt,async function(t){const e=new Hs.Contract(t,Gs,j),n=await e.balanceOf(c.address);console.log("balance string",n.toString())},it,function(){d=this.value,n(9,d)},t=>nt(t.uid),function(){w=this.__value,n(17,w)},[[],[]],function(){w=this.__value,n(17,w)},function(){d=this.value,n(9,d)},()=>tt(),function(){_=this.value,n(18,_)},()=>n(20,E=!1),function(){k=this.value,n(19,k)},t=>ot(t.uid),function(){C=this.value,n(25,C)},t=>X(t.uid),function(){C=this.value,n(25,C)},()=>n(5,R=!1),()=>n(6,O=!0),()=>n(20,E=!0),()=>Q("wallet-address"),()=>n(22,x=!0),()=>Y(),()=>n(22,x=!1),()=>n(30,L=!0),()=>n(30,L=!1),function(){P=this.value,n(27,P)},()=>n(7,B=!0),function(){A=this.value,n(26,A)},()=>n(15,b=!0),function(){M=this.__value,n(28,M)},function(){g=this.value,n(12,g)},function(){v=this.value,n(13,v)},()=>n(15,b=!1),function(){P=this.value,n(27,P)},function(){A=this.value,n(26,A)},()=>n(1,i=!1),()=>n(6,O=!1),t=>n(27,P=t.detail.result),()=>n(7,B=!1)]}function Nu(e){let n,r;return{c(){n=E("img"),n.src!==(r="./icons/check.svg")&&I(n,"src","./icons/check.svg"),I(n,"alt","confirmed"),I(n,"class"," inline-block")},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function Lu(t){let e,n;function r(...e){return t[9](t[12],...e)}return{c(){e=E("button"),e.textContent="Подтвердить",I(e,"class","btn-orange")},m(t,i){w(t,e,i),n=C(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function Du(t){let e,n,r,i,o,a,s,u,c=t[13].balance+"",l=t[13].username+"";return{c(){e=E("div"),n=x("Баланс:\r\n                    "),r=x(c),i=x(" руб."),o=S(),a=E("div"),s=x("Промокод:\r\n                    "),u=x(l),I(e,"class","mt-4"),I(a,"class","mt-2")},m(t,c){w(t,e,c),b(e,n),b(e,r),b(e,i),w(t,o,c),w(t,a,c),b(a,s),b(a,u)},p(t,e){8192&e&&c!==(c=t[13].balance+"")&&P(r,c),8192&e&&l!==(l=t[13].username+"")&&P(u,l)},d(t){t&&_(e),t&&_(o),t&&_(a)}}}function Ru(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,A,P,N,L;function D(...e){return t[7](t[12],...e)}function R(t,e){return t[12].emailVerified?Nu:Lu}let O=R(t),B=O(t);const U=new Re({props:{path:`users/${t[12].uid}`,$$slots:{default:[Du,({data:t})=>({13:t}),({data:t})=>t?8192:0]},$$scope:{ctx:t}}});return{c(){e=E("div"),n=x("Отображаемое имя: \r\n                "),r=E("input"),a=S(),s=E("div"),u=x("Эл. почта: \r\n                "),c=E("input"),h=S(),d=E("button"),d.textContent="Изменить",f=S(),B.c(),p=S(),m=E("div"),g=x("Новый пароль:\r\n                "),v=E("input"),y=S(),k=E("button"),k.textContent="Изменить",T=S(),A=E("hr"),P=S(),mt(U.$$.fragment),I(r,"type","text"),r.value=i=t[12].displayName,I(e,"class","mt-2"),I(c,"type","text"),c.value=l=t[12].email,I(d,"class","btn-orange"),I(s,"class","mt-2"),I(v,"type","text"),I(v,"placeholder","Новый пароль"),I(k,"class","btn-orange"),I(m,"class","mt-2")},m(i,o){w(i,e,o),b(e,n),b(e,r),w(i,a,o),w(i,s,o),b(s,u),b(s,c),b(s,h),b(s,d),b(s,f),B.m(s,null),w(i,p,o),w(i,m,o),b(m,g),b(m,v),M(v,t[0]),b(m,y),b(m,k),w(i,T,o),w(i,A,o),w(i,P,o),gt(U,i,o),N=!0,L=[C(r,"input",D),C(c,"change",t[8]),C(v,"input",t[10]),C(k,"click",t[4])]},p(e,n){t=e,(!N||4096&n&&i!==(i=t[12].displayName)&&r.value!==i)&&(r.value=i),(!N||4096&n&&l!==(l=t[12].email)&&c.value!==l)&&(c.value=l),O===(O=R(t))&&B?B.p(t,n):(B.d(1),B=O(t),B&&(B.c(),B.m(s,null))),1&n&&v.value!==t[0]&&M(v,t[0]);const o={};4096&n&&(o.path=`users/${t[12].uid}`),24576&n&&(o.$$scope={dirty:n,ctx:t}),U.$set(o)},i(t){N||(lt(U.$$.fragment,t),N=!0)},o(t){ht(U.$$.fragment,t),N=!1},d(t){t&&_(e),t&&_(a),t&&_(s),B.d(),t&&_(p),t&&_(m),t&&_(T),t&&_(A),t&&_(P),vt(U,t),o(L)}}}function Ou(t){let e;const n=new me({props:{$$slots:{default:[Ru,({user:t})=>({12:t}),({user:t})=>t?4096:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};20481&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Bu(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=E("div"),n=E("div"),r=E("p"),i=x(t[2]),o=S(),a=E("p"),s=E("button"),s.textContent="Ок",I(r,"class","text-center"),I(s,"class","btn-orange"),I(a,"class","mt-2 text-center"),I(n,"class","p-3 border bg-white rounded-lg shadow-lg"),I(e,"id","alertBox"),I(e,"class"," fixed top-0")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=C(s,"click",t[11])},p(t,e){(!c||4&e)&&P(i,t[2])},i(t){c||(J(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function Uu(t){let e,n,r,i;const o=new Qt({props:{firebase:Lt,$$slots:{default:[Ou]},$$scope:{ctx:t}}});let a=t[1]&&Bu(t);return{c(){e=E("div"),mt(o.$$.fragment),n=S(),a&&a.c(),r=T(),I(e,"class","p-2")},m(t,s){w(t,e,s),gt(o,e,null),w(t,n,s),a&&a.m(t,s),w(t,r,s),i=!0},p(t,[e]){const n={};16385&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),t[1]?a?(a.p(t,e),lt(a,1)):(a=Bu(t),a.c(),lt(a,1),a.m(r.parentNode,r)):a&&(ut(),ht(a,1,1,()=>{a=null}),ct())},i(t){i||(lt(o.$$.fragment,t),lt(a),i=!0)},o(t){ht(o.$$.fragment,t),ht(a),i=!1},d(t){t&&_(e),vt(o),t&&_(n),a&&a.d(t),t&&_(r)}}}function Fu(t,e,n){let r,i,o,a;function s(t){Lt.auth().currentUser.updateEmail(t).then((function(){u("Эл. почта обновлена, нажмите кнопку подтвердить.")})).catch((function(t){u("Сессия устарела, перезайдите в аккаунт и повторите попытку.")}))}function u(t){o||(n(2,a=t),n(1,o=!0)),setTimeout(()=>{n(1,o=!1)},5e3)}Lt.auth().onAuthStateChanged((function(t){t&&(r=t)}));return[i,o,a,s,function(){Lt.auth().currentUser.updatePassword(i).then((function(){u("Пароль обновлен.")})).catch((function(t){u("Сессия устарела, перезайдите в аккаунт и повторите попытку.")}))},u,r,(t,e)=>t.updateProfile({displayName:e.target.value}).then(console.log("updated")),t=>s(t.target.value),t=>t.sendEmailVerification().then(u("Письмо отправлено, проверьте почту.")),function(){i=this.value,n(0,i)},()=>n(1,o=!1)]}class ju extends wt{constructor(t){super(),bt(this,t,Fu,Uu,s,{})}}function qu(t){let e,n,r,i,s,u,c,l,h,d,f,p,m,g,v,y,k,x,T,A;return{c(){e=E("div"),n=E("h1"),n.textContent="Регистрация водителя такси",r=S(),i=E("p"),i.textContent="Заполните анкету",s=S(),u=E("div"),c=E("input"),l=S(),h=E("input"),d=S(),f=E("input"),p=S(),m=E("input"),g=S(),v=E("input"),y=S(),k=E("input"),x=S(),T=E("button"),T.textContent="Начать регистрацию",I(n,"class","svelte-1fqymuk"),I(i,"class","svelte-1fqymuk"),I(c,"type","text"),I(c,"placeholder","Имя"),I(c,"class","svelte-1fqymuk"),I(h,"type","text"),I(h,"placeholder","Фамилия"),I(h,"class","svelte-1fqymuk"),I(f,"type","text"),I(f,"placeholder","Отчество"),I(f,"class","svelte-1fqymuk"),I(m,"type","text"),I(m,"placeholder","Номер телефона"),I(m,"class","svelte-1fqymuk"),I(v,"type","text"),I(v,"placeholder","Марка автомобиля"),I(v,"class","svelte-1fqymuk"),I(k,"type","text"),I(k,"placeholder","Гос. номер"),I(k,"class","svelte-1fqymuk"),I(T,"class","btn bg-orange-500 block mt-2 svelte-1fqymuk"),I(u,"class","taxi-driver-registration svelte-1fqymuk"),I(e,"slot","fallback"),I(e,"class","profile-card svelte-1fqymuk")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(e,s),b(e,u),b(u,c),M(c,t[0].name),b(u,l),b(u,h),M(h,t[0].secondName),b(u,d),b(u,f),M(f,t[0].lastName),b(u,p),b(u,m),M(m,t[0].phone),b(u,g),b(u,v),M(v,t[0].carBrand),b(u,y),b(u,k),M(k,t[0].carNumber),b(u,x),b(u,T),A=[C(c,"input",t[5]),C(h,"input",t[6]),C(f,"input",t[7]),C(m,"input",t[8]),C(v,"input",t[9]),C(k,"input",t[10]),C(T,"click",(function(){a(t[1](t[15].uid))&&t[1](t[15].uid).apply(this,arguments)}))]},p(e,n){t=e,1&n&&c.value!==t[0].name&&M(c,t[0].name),1&n&&h.value!==t[0].secondName&&M(h,t[0].secondName),1&n&&f.value!==t[0].lastName&&M(f,t[0].lastName),1&n&&m.value!==t[0].phone&&M(m,t[0].phone),1&n&&v.value!==t[0].carBrand&&M(v,t[0].carBrand),1&n&&k.value!==t[0].carNumber&&M(k,t[0].carNumber)},d(t){t&&_(e),o(A)}}}function $u(t){let e,n,r,i;function o(...e){return t[11](t[15],...e)}return{c(){e=E("label"),e.innerHTML='<p class="mt-3 text-sm">Лицевая сторона</p> \n                            <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1fqymuk">',n=S(),r=E("input"),I(e,"for","driver-license-frontside"),I(r,"type","file"),I(r,"id","driver-license-frontside"),I(r,"name","file"),I(r,"class","svelte-1fqymuk")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Vu(t){let e,n;return{c(){e=E("img"),I(e,"class","img-up svelte-1fqymuk"),e.src!==(n=t[16].driverLicense.frontside)&&I(e,"src",n),I(e,"alt","driverLicense")},m(t,n){w(t,e,n)},p(t,r){65536&r&&e.src!==(n=t[16].driverLicense.frontside)&&I(e,"src",n)},d(t){t&&_(e)}}}function zu(t){let e,n,r,i;function o(...e){return t[12](t[15],...e)}return{c(){e=E("label"),e.innerHTML='<p class="mt-3 text-sm">Обратная сторона</p> \n                            <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1fqymuk">',n=S(),r=E("input"),I(e,"for","driver-license-reverseside"),I(r,"type","file"),I(r,"id","driver-license-reverseside"),I(r,"name","file"),I(r,"class","svelte-1fqymuk")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Hu(t){let e,n;return{c(){e=E("img"),I(e,"class","img-up svelte-1fqymuk"),e.src!==(n=t[16].driverLicense.reverseside)&&I(e,"src",n),I(e,"alt","driverLicense")},m(t,n){w(t,e,n)},p(t,r){65536&r&&e.src!==(n=t[16].driverLicense.reverseside)&&I(e,"src",n)},d(t){t&&_(e)}}}function Gu(t){let e,n,r,i;function o(...e){return t[13](t[15],...e)}return{c(){e=E("label"),e.innerHTML='<p class="mt-3 text-sm">Фронтальная сторона с гос. номером</p> \n                            <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1fqymuk">',n=S(),r=E("input"),I(e,"for","driver-auto-frontside"),I(r,"type","file"),I(r,"id","driver-auto-frontside"),I(r,"name","file"),I(r,"class","svelte-1fqymuk")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Wu(t){let e,n;return{c(){e=E("img"),I(e,"class","img-up svelte-1fqymuk"),e.src!==(n=t[16].driverAuto.frontside)&&I(e,"src",n),I(e,"alt","driverAuto")},m(t,n){w(t,e,n)},p(t,r){65536&r&&e.src!==(n=t[16].driverAuto.frontside)&&I(e,"src",n)},d(t){t&&_(e)}}}function Ku(t){let e,n,r,i;function o(...e){return t[14](t[15],...e)}return{c(){e=E("label"),e.innerHTML='<p class="mt-3 text-sm">Фото с боковой стороны (любой)</p> \n                            <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-1fqymuk">',n=S(),r=E("input"),I(e,"for","driver-auto-reverseside"),I(r,"type","file"),I(r,"id","driver-auto-reverseside"),I(r,"name","file"),I(r,"class","svelte-1fqymuk")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function Zu(t){let e,n;return{c(){e=E("img"),I(e,"class","img-up svelte-1fqymuk"),e.src!==(n=t[16].driverAuto.reverseside)&&I(e,"src",n),I(e,"alt","driverAuto")},m(t,n){w(t,e,n)},p(t,r){65536&r&&e.src!==(n=t[16].driverAuto.reverseside)&&I(e,"src",n)},d(t){t&&_(e)}}}function Qu(t){let e,n,r,i,o,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,C,A,M,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K=t[16].secondName+"",Z=t[16].name+"",Q=t[16].lastName+"",Y=t[16].phone+"",X=t[16].carBrand+"",J=t[16].carNumber+"",tt=t[16].rating+"";function et(t,e){return null!=t[16].driverLicense&&null!=t[16].driverLicense.frontside?Vu:$u}let nt=et(t),rt=nt(t);function it(t,e){return null!=t[16].driverLicense&&null!=t[16].driverLicense.reverseside?Hu:zu}let ot=it(t),at=ot(t);function st(t,e){return null!=t[16].driverAuto&&null!=t[16].driverAuto.frontside?Wu:Gu}let ut=st(t),ct=ut(t);function lt(t,e){return null!=t[16].driverAuto&&null!=t[16].driverAuto.reverseside?Zu:Ku}let ht=lt(t),dt=ht(t);return{c(){e=S(),n=E("div"),r=E("p"),r.textContent="Данные водителя такси",i=S(),o=E("p"),a=x("Ф.И.О.: "),s=x(K),u=S(),c=x(Z),l=S(),h=x(Q),d=S(),f=E("p"),p=x("Номер телефона: "),m=x(Y),g=S(),v=E("p"),y=x("Марка и номер автомобиля: "),k=x(X),T=S(),C=x(J),A=S(),M=E("p"),N=x("Рейтинг: "),L=x(tt),D=S(),R=E("br"),O=S(),B=E("p"),B.textContent="Фото водительского удостоверения:",U=S(),F=E("div"),rt.c(),j=S(),q=E("div"),at.c(),$=S(),V=E("p"),V.textContent="Фото автомобиля:",z=S(),H=E("div"),ct.c(),G=S(),W=E("div"),dt.c(),I(r,"class","mt-2 font-semibold text-center svelte-1fqymuk"),I(o,"class","mt-3 svelte-1fqymuk"),I(f,"class","svelte-1fqymuk"),I(v,"class","svelte-1fqymuk"),I(M,"class","svelte-1fqymuk"),I(B,"class","font-semibold text-center svelte-1fqymuk"),I(F,"class","image-upload svelte-1fqymuk"),I(q,"class","image-upload svelte-1fqymuk"),I(V,"class","mt-2 font-semibold text-center svelte-1fqymuk"),I(H,"class","image-upload svelte-1fqymuk"),I(W,"class","image-upload svelte-1fqymuk"),I(n,"class","profile-card svelte-1fqymuk")},m(t,_){w(t,e,_),w(t,n,_),b(n,r),b(n,i),b(n,o),b(o,a),b(o,s),b(o,u),b(o,c),b(o,l),b(o,h),b(n,d),b(n,f),b(f,p),b(f,m),b(n,g),b(n,v),b(v,y),b(v,k),b(v,T),b(v,C),b(n,A),b(n,M),b(M,N),b(M,L),b(n,D),b(n,R),b(n,O),b(n,B),b(n,U),b(n,F),rt.m(F,null),b(n,j),b(n,q),at.m(q,null),b(n,$),b(n,V),b(n,z),b(n,H),ct.m(H,null),b(n,G),b(n,W),dt.m(W,null)},p(t,e){65536&e&&K!==(K=t[16].secondName+"")&&P(s,K),65536&e&&Z!==(Z=t[16].name+"")&&P(c,Z),65536&e&&Q!==(Q=t[16].lastName+"")&&P(h,Q),65536&e&&Y!==(Y=t[16].phone+"")&&P(m,Y),65536&e&&X!==(X=t[16].carBrand+"")&&P(k,X),65536&e&&J!==(J=t[16].carNumber+"")&&P(C,J),65536&e&&tt!==(tt=t[16].rating+"")&&P(L,tt),nt===(nt=et(t))&&rt?rt.p(t,e):(rt.d(1),rt=nt(t),rt&&(rt.c(),rt.m(F,null))),ot===(ot=it(t))&&at?at.p(t,e):(at.d(1),at=ot(t),at&&(at.c(),at.m(q,null))),ut===(ut=st(t))&&ct?ct.p(t,e):(ct.d(1),ct=ut(t),ct&&(ct.c(),ct.m(H,null))),ht===(ht=lt(t))&&dt?dt.p(t,e):(dt.d(1),dt=ht(t),dt&&(dt.c(),dt.m(W,null)))},d(t){t&&_(e),t&&_(n),rt.d(),at.d(),ct.d(),dt.d()}}}function Yu(t){let e;return{c(){e=E("div"),e.innerHTML="<p>Для просмотра страницы необходима авторизация</p>",I(e,"slot","signed-out")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Xu(t){let e,n;const r=new Re({props:{path:`taxiDrivers/${t[15].uid}`,$$slots:{default:[Qu,({data:t,ref:e})=>({16:t,17:e}),({data:t,ref:e})=>(t?65536:0)|(e?131072:0)],fallback:[qu,({data:t,ref:e})=>({16:t,17:e}),({data:t,ref:e})=>(t?65536:0)|(e?131072:0)]},$$scope:{ctx:t}}});return{c(){mt(r.$$.fragment),e=S()},m(t,i){gt(r,t,i),w(t,e,i),n=!0},p(t,e){const n={};32768&e&&(n.path=`taxiDrivers/${t[15].uid}`),360449&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){vt(r,t),t&&_(e)}}}function Ju(t){let e;const n=new me({props:{$$slots:{default:[Xu,({user:t})=>({15:t}),({user:t})=>t?32768:0],"signed-out":[Yu,({user:t})=>({15:t}),({user:t})=>t?32768:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};294913&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function tc(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[Ju]},$$scope:{ctx:t}}});return{c(){e=E("div"),mt(r.$$.fragment),I(e,"class","p-2 bg-gray-100")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,[e]){const n={};262145&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function ec(t,e,n){let r=Gt.ref(),i={registered:Lt.firestore.FieldValue.serverTimestamp(),rating:5};function o(t,e){let n;t.stopPropagation(),t.preventDefault(),"driver-license-frontside"==t.target.id&&(n="driverLicense.frontside"),"driver-license-reverseside"==t.target.id&&(n="driverLicense.reverseside");let i=t.target.files[0],o={contentType:i.type};r.child(`users/${e}/taxiDriver/driverLicense/${i.name}`).put(i,o).then((function(t){console.log("Uploaded",t.totalBytes,"bytes."),console.log("File metadata:",t.metadata),t.ref.getDownloadURL().then((function(t){console.log("File available at",t),Ht.collection("taxiDrivers").doc(e).update({[n]:t}).then((function(){console.log("Document successfully updated!")})).catch((function(t){console.error("Error updating document: ",t)}))}))})).catch((function(t){console.error("Upload failed:",t)}))}function a(t,e){let n;t.stopPropagation(),t.preventDefault(),"driver-auto-frontside"==t.target.id&&(n="driverAuto.frontside"),"driver-auto-reverseside"==t.target.id&&(n="driverAuto.reverseside");let i=t.target.files[0],o={contentType:i.type};r.child(`users/${e}/taxiDriver/driverAuto/${i.name}`).put(i,o).then((function(t){console.log("Uploaded",t.totalBytes,"bytes."),console.log("File metadata:",t.metadata),t.ref.getDownloadURL().then((function(t){console.log("File available at",t),Ht.collection("taxiDrivers").doc(e).update({[n]:t}).then((function(){console.log("Document successfully updated!")})).catch((function(t){console.error("Error updating document: ",t)}))}))})).catch((function(t){console.error("Upload failed:",t)}))}return[i,function(t){Ht.collection("taxiDrivers").doc(t).set(i).then((function(){console.log("Document successfully written!")})).catch((function(t){console.error("Error writing document: ",t)}))},o,a,r,function(){i.name=this.value,n(0,i)},function(){i.secondName=this.value,n(0,i)},function(){i.lastName=this.value,n(0,i)},function(){i.phone=this.value,n(0,i)},function(){i.carBrand=this.value,n(0,i)},function(){i.carNumber=this.value,n(0,i)},(t,e)=>o(e,t.uid),(t,e)=>o(e,t.uid),(t,e)=>a(e,t.uid),(t,e)=>a(e,t.uid)]}class nc extends wt{constructor(t){super(),bt(this,t,ec,tc,s,{})}}function rc(t,e,n){const r=t.slice();return r[29]=e[n],r}function ic(e){let n,r,i;return{c(){n=E("p"),r=E("button"),r.textContent="Добавить",I(r,"class","btn-green")},m(t,o){w(t,n,o),b(n,r),i=C(r,"click",e[18])},p:t,d(t){t&&_(n),i()}}}function oc(t){let e,n,r,i,o=t[28],a=[];for(let e=0;e<o.length;e+=1)a[e]=ac(rc(t,o,e));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=S(),n=E("p"),r=E("button"),r.textContent="Добавить",I(r,"class","btn-green"),I(n,"class","mt-3 text-center")},m(o,s){for(let t=0;t<a.length;t+=1)a[t].m(o,s);w(o,e,s),w(o,n,s),b(n,r),i=C(r,"click",t[17])},p(t,n){if(268435456&n[0]){let r;for(o=t[28],r=0;r<o.length;r+=1){const i=rc(t,o,r);a[r]?a[r].p(i,n):(a[r]=ac(i),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}},d(t){k(a,t),t&&_(e),t&&_(n),i()}}}function ac(t){let e,n,r,i,o,a,s,u,c,l,h,d,f=t[29].model+"";function p(...e){return t[16](t[29],...e)}return{c(){e=E("div"),n=E("div"),r=E("img"),o=S(),a=E("div"),s=E("span"),u=x(f),c=S(),l=E("div"),h=E("button"),h.textContent="Удалить",r.src!==(i=t[29].imgURL)&&I(r,"src",i),I(r,"alt","foto"),I(r,"class","w-20 h-20"),I(n,"class",""),I(s,"class"," text-teal-500"),I(h,"class","btn-orange"),I(e,"class","flex flex-row bg-white rounded-lg justify-between items-center overflow-hidden")},m(t,i){w(t,e,i),b(e,n),b(n,r),b(e,o),b(e,a),b(a,s),b(s,u),b(e,c),b(e,l),b(l,h),d=C(h,"click",p)},p(e,n){t=e,268435456&n[0]&&r.src!==(i=t[29].imgURL)&&I(r,"src",i),268435456&n[0]&&f!==(f=t[29].model+"")&&P(u,f)},d(t){t&&_(e),d()}}}function sc(t){let e;return{c(){e=E("span"),e.textContent="Не удалось загрузить...",I(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function uc(t){let e;function n(t,e){return t[28].length>0?oc:ic}let r=n(t),i=r(t);return{c(){i.c(),e=S()},m(t,n){i.m(t,n),w(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&_(e)}}}function cc(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,A,P,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,dt=!1,ft="Другое"===t[1]&&lc(t);function pt(){dt=!0,t[23].call(nt)}function mt(t,e){return null!=t[3]?dc:hc}let gt=mt(t),vt=gt(t);return{c(){e=E("div"),n=E("div"),n.innerHTML='<p class=" text-teal-500 text-center font-semibold">\n                        Регистрация спецтехники\n                    </p>',r=S(),i=E("div"),a=x("Вид спецтехники:\r\n                    "),s=E("select"),u=E("option"),c=E("option"),c.textContent="Строительная",l=E("option"),l.textContent="Дорожная",h=E("option"),h.textContent="Транспортная",d=E("option"),d.textContent="Коммунальная",f=E("option"),f.textContent="Грузовая",p=E("option"),p.textContent="Сельхозтехника",m=E("option"),m.textContent="Автоспецтехника",g=E("option"),g.textContent="Лесная",v=E("option"),v.textContent="Карьерная",y=E("option"),y.textContent="Производственная",k=S(),T=E("div"),A=x("Тип спецтехники:\r\n                    "),P=E("select"),L=E("option"),D=E("option"),D.textContent="Экскаватор",R=E("option"),R.textContent="Бульдозер",O=E("option"),O.textContent="Трактор",B=E("option"),B.textContent="Грейдер",U=E("option"),U.textContent="Самосвал",F=E("option"),F.textContent="Бетономешалка",j=E("option"),j.textContent="Бурильная техника",q=E("option"),q.textContent="Каток",$=E("option"),$.textContent="Ассенизатор",V=E("option"),V.textContent="Автокран",z=E("option"),z.textContent="Маннипулятор",H=E("option"),H.textContent="Автоподъемник",G=E("option"),G.textContent="Погрузчик",W=E("option"),W.textContent="Эвакуатор",K=E("option"),K.textContent="Другое",Z=S(),ft&&ft.c(),Q=S(),Y=E("div"),X=E("input"),tt=S(),et=E("div"),nt=E("input"),rt=S(),it=E("div"),ot=E("input"),at=S(),st=E("div"),vt.c(),ut=S(),ct=E("div"),lt=E("button"),lt.textContent="Зарегистрировать",u.__value="",u.value=u.__value,c.__value="Строительная",c.value=c.__value,l.__value="Дорожная",l.value=l.__value,h.__value="Транспортная",h.value=h.__value,d.__value="Коммунальная",d.value=d.__value,f.__value="Грузовая",f.value=f.__value,p.__value="Сельхозтехника",p.value=p.__value,m.__value="Автоспецтехника",m.value=m.__value,g.__value="Лесная",g.value=g.__value,v.__value="Карьерная",v.value=v.__value,y.__value="Производственная",y.value=y.__value,void 0===t[2]&&J(()=>t[19].call(s)),I(i,"class","mt-2"),L.__value="",L.value=L.__value,D.__value="Экскаватор",D.value=D.__value,R.__value="Бульдозер",R.value=R.__value,O.__value="Трактор",O.value=O.__value,B.__value="Грейдер",B.value=B.__value,U.__value="Самосвал",U.value=U.__value,F.__value="Бетономешалка",F.value=F.__value,j.__value="Бурильная",j.value=j.__value,q.__value="Каток",q.value=q.__value,$.__value="Ассенизатор",$.value=$.__value,V.__value="Автокран",V.value=V.__value,z.__value="Маннипулятор",z.value=z.__value,H.__value="Автоподъемник",H.value=H.__value,G.__value="Погрузчик",G.value=G.__value,W.__value="Эвакуатор",W.value=W.__value,K.__value="Другое",K.value=K.__value,void 0===t[1]&&J(()=>t[20].call(P)),I(X,"type","text"),I(X,"placeholder","Модель"),I(X,"class","inputs svelte-z2itl3"),I(nt,"type","number"),I(nt,"placeholder","Стоимость аренды в час"),I(nt,"class","inputs svelte-z2itl3"),I(ot,"type","text"),I(ot,"placeholder","Номер телефона +7"),I(ot,"class","inputs svelte-z2itl3"),I(st,"class","image-upload svelte-z2itl3"),I(lt,"class","btn-orange"),I(ct,"class","mt-2 text-center"),I(e,"class","mt-2 p-1 bg-white rounded-lg")},m(o,_){w(o,e,_),b(e,n),b(e,r),b(e,i),b(i,a),b(i,s),b(s,u),b(s,c),b(s,l),b(s,h),b(s,d),b(s,f),b(s,p),b(s,m),b(s,g),b(s,v),b(s,y),N(s,t[2]),b(e,k),b(e,T),b(T,A),b(T,P),b(P,L),b(P,D),b(P,R),b(P,O),b(P,B),b(P,U),b(P,F),b(P,j),b(P,q),b(P,$),b(P,V),b(P,z),b(P,H),b(P,G),b(P,W),b(P,K),N(P,t[1]),b(e,Z),ft&&ft.m(e,null),b(e,Q),b(e,Y),b(Y,X),M(X,t[0]),b(e,tt),b(e,et),b(et,nt),M(nt,t[5]),b(e,rt),b(e,it),b(it,ot),M(ot,t[6]),b(e,at),b(e,st),vt.m(st,null),b(e,ut),b(e,ct),b(ct,lt),ht=[C(s,"change",t[19]),C(P,"change",t[20]),C(X,"input",t[22]),C(nt,"input",pt),C(ot,"input",t[24]),C(lt,"click",t[11])]},p(t,n){4&n[0]&&N(s,t[2]),2&n[0]&&N(P,t[1]),"Другое"===t[1]?ft?ft.p(t,n):(ft=lc(t),ft.c(),ft.m(e,Q)):ft&&(ft.d(1),ft=null),1&n[0]&&X.value!==t[0]&&M(X,t[0]),!dt&&32&n[0]&&M(nt,t[5]),dt=!1,64&n[0]&&ot.value!==t[6]&&M(ot,t[6]),gt===(gt=mt(t))&&vt?vt.p(t,n):(vt.d(1),vt=gt(t),vt&&(vt.c(),vt.m(st,null)))},d(t){t&&_(e),ft&&ft.d(),vt.d(),o(ht)}}}function lc(t){let e,n,r;return{c(){e=E("div"),n=E("input"),I(n,"type","text"),I(n,"placeholder","Тип спецтехники")},m(i,o){w(i,e,o),b(e,n),M(n,t[4]),r=C(n,"input",t[21])},p(t,e){16&e[0]&&n.value!==t[4]&&M(n,t[4])},d(t){t&&_(e),r()}}}function hc(t){let e,n,r,i;function o(...e){return t[25](t[27],...e)}return{c(){e=E("label"),e.innerHTML='<p class="mt-3 text-sm text-teal-500">\n                            Сфотографируйте, а затем загрузите фото спецтехники\n                        </p> \n\n                        <img src="./icons/add_photo_teal.svg" alt="add_photo" class="img-icon svelte-z2itl3">',n=S(),r=E("input"),I(e,"for","carImage"),I(r,"type","file"),I(r,"id","carImage"),I(r,"name","file"),I(r,"class","svelte-z2itl3")},m(t,a){w(t,e,a),w(t,n,a),w(t,r,a),i=C(r,"change",o)},p(e,n){t=e},d(t){t&&_(e),t&&_(n),t&&_(r),i()}}}function dc(t){let e,n;return{c(){e=E("img"),I(e,"class","img-up svelte-z2itl3"),e.src!==(n=t[3])&&I(e,"src",n),I(e,"alt","carImage")},m(t,n){w(t,e,n)},p(t,r){8&r[0]&&e.src!==(n=t[3])&&I(e,"src",n)},d(t){t&&_(e)}}}function fc(t){let e,n,r,i,o,a;const s=new Ye({props:{path:"rentalCars",query:function(...e){return t[15](t[27],...e)},$$slots:{default:[uc,({data:t})=>({28:t}),({data:t})=>[t?268435456:0]],fallback:[sc,({data:t})=>({28:t}),({data:t})=>[t?268435456:0]]},$$scope:{ctx:t}}});let u=t[9]&&cc(t);return{c(){e=E("div"),e.innerHTML='<p class=" text-teal-500 text-center font-semibold">\n                    Аренда и услуги спецтехники\n                </p>',n=S(),r=E("div"),mt(s.$$.fragment),i=S(),u&&u.c(),o=T(),I(r,"class","mt-3")},m(t,c){w(t,e,c),w(t,n,c),w(t,r,c),gt(s,r,null),w(t,i,c),u&&u.m(t,c),w(t,o,c),a=!0},p(e,n){t=e;const r={};268435968&n[0]|2&n[1]&&(r.$$scope={dirty:n,ctx:t}),s.$set(r),t[9]?u?u.p(t,n):(u=cc(t),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i(t){a||(lt(s.$$.fragment,t),a=!0)},o(t){ht(s.$$.fragment,t),a=!1},d(t){t&&_(e),t&&_(n),t&&_(r),vt(s),t&&_(i),u&&u.d(t),t&&_(o)}}}function pc(t){let e;const n=new me({props:{$$slots:{default:[fc,({user:t})=>({27:t}),({user:t})=>[t?134217728:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};639&e[0]|2&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function mc(t){let e,n,r,i,o,a,s,u,c,l;return{c(){e=E("div"),n=E("div"),r=E("p"),i=x(t[8]),o=S(),a=E("p"),s=E("button"),s.textContent="Ок",I(r,"class","text-center"),I(s,"class","btn-orange"),I(a,"class","mt-2 text-center"),I(n,"class","p-3 border bg-white rounded-lg shadow-lg"),I(e,"id","alertBox"),I(e,"class"," fixed top-0")},m(u,h){w(u,e,h),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),c=!0,l=C(s,"click",t[26])},p(t,e){(!c||256&e[0])&&P(i,t[8])},i(t){c||(J(()=>{u||(u=pt(n,sn,{duration:500},!0)),u.run(1)}),c=!0)},o(t){u||(u=pt(n,sn,{duration:500},!1)),u.run(0),c=!1},d(t){t&&_(e),t&&u&&u.end(),l()}}}function gc(t){let e,n,r,i;const o=new Qt({props:{firebase:Lt,$$slots:{default:[pc]},$$scope:{ctx:t}}});let a=t[7]&&mc(t);return{c(){e=E("div"),mt(o.$$.fragment),n=S(),a&&a.c(),r=T(),I(e,"class","p-2 bg-gray-100")},m(t,s){w(t,e,s),gt(o,e,null),w(t,n,s),a&&a.m(t,s),w(t,r,s),i=!0},p(t,e){const n={};639&e[0]|2&e[1]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),t[7]?a?(a.p(t,e),lt(a,1)):(a=mc(t),a.c(),lt(a,1),a.m(r.parentNode,r)):a&&(ut(),ht(a,1,1,()=>{a=null}),ct())},i(t){i||(lt(o.$$.fragment,t),lt(a),i=!0)},o(t){ht(o.$$.fragment,t),ht(a),i=!1},d(t){t&&_(e),vt(o),t&&_(n),a&&a.d(t),t&&_(r)}}}function vc(t,e,n){let r,i,o,a,s,u,c,l,h,d=Gt.ref(),f="",p=!1;function m(t,e){t.stopPropagation(),t.preventDefault();let r=t.target.files[0],i={contentType:r.type};d.child(`users/${e}/rentalCar/${r.name}`).put(r,i).then((function(t){console.log("Uploaded",t.totalBytes,"bytes."),console.log("File metadata:",t.metadata),t.ref.getDownloadURL().then((function(t){console.log("File available at",t),n(3,s=t)}))})).catch((function(t){console.error("Upload failed:",t)}))}function g(t){l||(n(8,h=t),n(7,l=!0)),setTimeout(()=>{n(7,l=!1)},5e3)}Lt.auth().onAuthStateChanged((function(t){t&&(r=t)}));return[i,o,a,s,f,u,c,l,h,p,m,function(){if(a&&o&&i&&u&&c&&null!=s){let t={owner:r.uid,username:r.displayName,category:a,type:o,atype:f,model:i,price:u,phone:c,imgURL:s};Ht.collection("rentalCars").add(t).then((function(t){g("Спецтехника зарегистрирована.")})).catch((function(t){g(`Ошибка: ${t}`)}))}else g("Заполните все поля и загрузите фото спецтехники.")},r,d,g,(t,e)=>e.where("owner","==",t.uid),t=>t.ref.delete(),()=>n(9,p=!0),()=>n(9,p=!0),function(){a=D(this),n(2,a)},function(){o=D(this),n(1,o)},function(){f=this.value,n(4,f)},function(){i=this.value,n(0,i)},function(){u=A(this.value),n(5,u)},function(){c=this.value,n(6,c)},(t,e)=>m(e,t.uid),()=>n(7,l=!1)]}class yc extends wt{constructor(t){super(),bt(this,t,vc,gc,s,{},[-1,-1])}}function bc(t){let e;const n=new yc({});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function wc(t){let e;const n=new nc({});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function _c(t){let e;const n=new ju({});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function kc(t){let e,n,r,i,a,s,u,c,l,h,d,f,p;const m=[_c,wc,bc],g=[];function v(t,e){return"ProfileMain"===t[0]?0:"TaxiDriverReg"===t[0]?1:"RentalCar"===t[0]?2:-1}return~(h=v(t))&&(d=g[h]=m[h](t)),{c(){e=E("div"),n=E("div"),r=E("div"),r.textContent="Настройки профиля",i=S(),a=E("div"),a.textContent="Такси",s=S(),u=E("div"),u.textContent="Спецтехника",c=S(),l=E("div"),d&&d.c(),I(r,"class","tab svelte-qsfr0b"),I(a,"class","tab ml-1 svelte-qsfr0b"),I(u,"class","tab ml-1 svelte-qsfr0b"),I(n,"class"," flex flex-row"),I(l,"class","bg-white"),I(e,"class","mt-16 bg-gray-800")},m(o,d){w(o,e,d),b(e,n),b(n,r),b(n,i),b(n,a),b(n,s),b(n,u),b(e,c),b(e,l),~h&&g[h].m(l,null),f=!0,p=[C(r,"click",t[1]),C(a,"click",t[2]),C(u,"click",t[3])]},p(t,[e]){let n=h;h=v(t),h!==n&&(d&&(ut(),ht(g[n],1,1,()=>{g[n]=null}),ct()),~h?(d=g[h],d||(d=g[h]=m[h](t),d.c()),lt(d,1),d.m(l,null)):d=null)},i(t){f||(lt(d),f=!0)},o(t){ht(d),f=!1},d(t){t&&_(e),~h&&g[h].d(),o(p)}}}function Ec(t,e,n){let r="ProfileMain";return[r,()=>n(0,r="ProfileMain"),()=>n(0,r="TaxiDriverReg"),()=>n(0,r="RentalCar")]}function xc(t,e,n){const r=t.slice();return r[16]=e[n],r}function Sc(t){let e,n,r=t[13].rating+"";return{c(){e=E("span"),n=x(r),I(e,"class","text-orange-500 font-semibold")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[13].rating+"")&&P(n,r)},d(t){t&&_(e)}}}function Tc(t){let e,n,r=t[13].rating+"";return{c(){e=E("span"),n=x(r),I(e,"class","text-green-500 font-semibold")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[13].rating+"")&&P(n,r)},d(t){t&&_(e)}}}function Cc(t){let e,n,r=t[13].rating+"";return{c(){e=E("span"),n=x(r),I(e,"class","text-red-500 font-semibold")},m(t,r){w(t,e,r),b(e,n)},p(t,e){8192&e&&r!==(r=t[13].rating+"")&&P(n,r)},d(t){t&&_(e)}}}function Ic(e){let n;return{c(){n=E("i"),n.textContent="нет отзывов"},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function Ac(t){let e,n=t[15],r=[];for(let e=0;e<n.length;e+=1)r[e]=Nc(xc(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=T()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);w(t,e,n)},p(t,i){if(32768&i){let o;for(n=t[15],o=0;o<n.length;o+=1){const a=xc(t,n,o);r[o]?r[o].p(a,i):(r[o]=Nc(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){k(r,t),t&&_(e)}}}function Pc(e){let n;return{c(){n=E("i"),n.textContent="нет отзыва"},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function Mc(t){let e,n=t[16].review+"";return{c(){e=x(n)},m(t,n){w(t,e,n)},p(t,r){32768&r&&n!==(n=t[16].review+"")&&P(e,n)},d(t){t&&_(e)}}}function Nc(t){let e,n;function r(t,e){return null!=t[16].review?Mc:Pc}let i=r(t),o=i(t);return{c(){e=E("div"),o.c(),n=S(),I(e,"class","m-1 p-1 text-sm bg-gray-100 rounded-lg")},m(t,r){w(t,e,r),o.m(e,null),b(e,n)},p(t,a){i===(i=r(t))&&o?o.p(t,a):(o.d(1),o=i(t),o&&(o.c(),o.m(e,n)))},d(t){t&&_(e),o.d()}}}function Lc(t){let e;return{c(){e=E("div"),e.textContent="Не удалось загрузить",I(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Dc(t){let e,n,r;function i(t,e){return t[15].length>=1?Ac:Ic}let o=i(t),a=o(t);return{c(){e=E("p"),e.textContent="Отзывы",n=S(),a.c(),r=S(),I(e,"class","text-lg text-center font-semibold")},m(t,i){w(t,e,i),w(t,n,i),a.m(t,i),w(t,r,i)},p(t,e){o===(o=i(t))&&a?a.p(t,e):(a.d(1),a=o(t),a&&(a.c(),a.m(r.parentNode,r)))},d(t){t&&_(e),t&&_(n),a.d(t),t&&_(r)}}}function Rc(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,A,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,tt,et,nt,rt,it,ot,at,st,ut,ct,dt,ft,pt,yt,bt,wt,_t,kt,Et,xt,St,Tt,Ct,It,At,Pt,Mt,Nt,Lt,Dt,Rt,Ot=t[13].name+"",Bt=t[13].lastName+"",Ut=!1;function Ft(t,e){return t[13].rating<3?Cc:t[13].rating>4?Tc:Sc}let jt=Ft(t),qt=jt(t);function $t(){Ut=!0,t[5].call(G)}function Vt(...e){return t[11](t[12],...e)}const zt=new Ye({props:{path:t[14].collection("ratings"),$$slots:{default:[Dc,({data:t})=>({15:t}),({data:t})=>t?32768:0],fallback:[Lc,({data:t})=>({15:t}),({data:t})=>t?32768:0]},$$scope:{ctx:t}}});return{c(){e=E("div"),n=E("div"),r=E("img"),a=S(),s=E("div"),u=E("div"),c=E("span"),l=x(Ot),h=S(),d=x(Bt),f=S(),p=E("div"),m=E("img"),v=S(),qt.c(),y=S(),k=E("div"),T=E("p"),T.textContent="Предложить поездку",A=S(),L=E("div"),D=E("label"),D.textContent="Откуда:",R=S(),O=E("input"),B=S(),U=E("div"),F=E("label"),F.textContent="Куда:",j=S(),q=E("input"),$=S(),V=E("div"),z=E("label"),z.textContent="Цена в рублях:",H=S(),G=E("input"),W=S(),K=E("div"),Z=E("label"),Z.textContent="Способ оплаты:",Q=S(),Y=E("select"),X=E("option"),tt=E("option"),tt.textContent="Наличные",et=E("option"),et.textContent="Автокарта",nt=E("option"),nt.textContent="Сбербанк-онлайн",rt=E("option"),rt.textContent="Киви-кошелёк",it=S(),ot=E("div"),at=E("label"),at.textContent="Детское кресло:",st=S(),ut=E("input"),ct=S(),dt=E("div"),ft=E("label"),ft.textContent="Животное:",pt=S(),yt=E("input"),bt=S(),wt=E("div"),_t=E("label"),_t.textContent="Номер мобильного:",kt=S(),Et=E("input"),xt=S(),St=E("div"),Tt=E("label"),Tt.textContent="Примечание:",Ct=S(),It=E("input"),At=S(),Pt=E("div"),Mt=E("button"),Mt.textContent="Предложить",Nt=S(),Lt=E("div"),mt(zt.$$.fragment),r.src!==(i=t[13].driverAuto.frontside)&&I(r,"src",i),I(r,"alt","auto"),I(c,"class"," font-semibold"),m.src!==(g="./icons/star.svg")&&I(m,"src","./icons/star.svg"),I(m,"alt","rating"),I(m,"class"," inline-block w-6 h-6"),I(s,"class","mt-1 px-1 flex flex-row justify-between items-center content-center"),I(e,"class","p-2 rounded-lg shadow-md"),I(T,"class","my-1 text-lg text-center font-semibold text-gray-900"),I(O,"type","text"),I(L,"class","mt-3"),I(q,"type","text"),I(U,"class","mt-2"),I(G,"type","number"),I(V,"class","mt-2"),X.__value="false",X.value=X.__value,tt.__value="Наличные",tt.value=tt.__value,et.__value="Автокарта",et.value=et.__value,nt.__value="Сбербанк-онлайн",nt.value=nt.__value,rt.__value="Киви-кошелёк",rt.value=rt.__value,void 0===t[1].paymentMethod&&J(()=>t[6].call(Y)),I(K,"class","mt-2"),I(ut,"type","checkbox"),I(ot,"class","mt-3"),I(yt,"type","checkbox"),I(dt,"class","mt-3"),I(Et,"type","text"),I(Et,"placeholder","+71234567890"),I(wt,"class","mt-2"),I(It,"type","text"),I(St,"class","mt-2"),I(Mt,"class","btn-orange"),I(Pt,"class","mt-4 text-center"),I(k,"class","m-1 mt-1 p-2 rounded-lg border shadow-lg"),I(Lt,"class","m-1 mt-2 p-2 rounded-lg border shadow-lg")},m(i,o){w(i,e,o),b(e,n),b(n,r),b(e,a),b(e,s),b(s,u),b(u,c),b(c,l),b(c,h),b(c,d),b(s,f),b(s,p),b(p,m),b(p,v),qt.m(p,null),w(i,y,o),w(i,k,o),b(k,T),b(k,A),b(k,L),b(L,D),b(L,R),b(L,O),M(O,t[1].addressFrom),b(k,B),b(k,U),b(U,F),b(U,j),b(U,q),M(q,t[1].addressTo),b(k,$),b(k,V),b(V,z),b(V,H),b(V,G),M(G,t[1].price),b(k,W),b(k,K),b(K,Z),b(K,Q),b(K,Y),b(Y,X),b(Y,tt),b(Y,et),b(Y,nt),b(Y,rt),N(Y,t[1].paymentMethod),b(k,it),b(k,ot),b(ot,at),b(ot,st),b(ot,ut),ut.checked=t[1].childSeat,b(k,ct),b(k,dt),b(dt,ft),b(dt,pt),b(dt,yt),yt.checked=t[1].animal,b(k,bt),b(k,wt),b(wt,_t),b(wt,kt),b(wt,Et),M(Et,t[1].phone),b(k,xt),b(k,St),b(St,Tt),b(St,Ct),b(St,It),M(It,t[1].desc),b(k,At),b(k,Pt),b(Pt,Mt),w(i,Nt,o),w(i,Lt,o),gt(zt,Lt,null),Dt=!0,Rt=[C(O,"input",t[3]),C(q,"input",t[4]),C(G,"input",$t),C(Y,"change",t[6]),C(ut,"change",t[7]),C(yt,"change",t[8]),C(Et,"input",t[9]),C(It,"input",t[10]),C(Mt,"click",Vt)]},p(e,n){t=e,(!Dt||8192&n&&r.src!==(i=t[13].driverAuto.frontside))&&I(r,"src",i),(!Dt||8192&n)&&Ot!==(Ot=t[13].name+"")&&P(l,Ot),(!Dt||8192&n)&&Bt!==(Bt=t[13].lastName+"")&&P(d,Bt),jt===(jt=Ft(t))&&qt?qt.p(t,n):(qt.d(1),qt=jt(t),qt&&(qt.c(),qt.m(p,null))),2&n&&O.value!==t[1].addressFrom&&M(O,t[1].addressFrom),2&n&&q.value!==t[1].addressTo&&M(q,t[1].addressTo),!Ut&&2&n&&M(G,t[1].price),Ut=!1,2&n&&N(Y,t[1].paymentMethod),2&n&&(ut.checked=t[1].childSeat),2&n&&(yt.checked=t[1].animal),2&n&&Et.value!==t[1].phone&&M(Et,t[1].phone),2&n&&It.value!==t[1].desc&&M(It,t[1].desc);const o={};16384&n&&(o.path=t[14].collection("ratings")),557056&n&&(o.$$scope={dirty:n,ctx:t}),zt.$set(o)},i(t){Dt||(lt(zt.$$.fragment,t),Dt=!0)},o(t){ht(zt.$$.fragment,t),Dt=!1},d(t){t&&_(e),qt.d(),t&&_(y),t&&_(k),t&&_(Nt),t&&_(Lt),vt(zt),o(Rt)}}}function Oc(t){let e;const n=new Re({props:{path:`taxiDrivers/${t[0].id}`,$$slots:{default:[Rc,({data:t,ref:e})=>({13:t,14:e}),({data:t,ref:e})=>(t?8192:0)|(e?16384:0)]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.path=`taxiDrivers/${t[0].id}`),548866&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Bc(t){let e;const n=new me({props:{$$slots:{default:[Oc,({user:t})=>({12:t}),({user:t})=>t?4096:0]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};524291&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Uc(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[Bc]},$$scope:{ctx:t}}});return{c(){e=E("div"),mt(r.$$.fragment),I(e,"class","mt-16")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,[e]){const n={};524291&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function Fc(t,e,n){let{params:r={}}=e,i={date:Lt.firestore.FieldValue.serverTimestamp(),addressFrom:"",addressTo:"",childSeat:!1,animal:!1,phone:"+7",desc:"",price:0,paymentMethod:!1,active:!0};function o(t,e){Ht.collection(`taxiOrders/region/${region}/city/${city}`).add(i).then((function(t){console.log("Document written with ID: ",t.id),alert("Ваша заказ оформлен!")})).catch((function(t){console.error("Error adding document: ",t)}))}return t.$set=t=>{"params"in t&&n(0,r=t.params)},[r,i,o,function(){i.addressFrom=this.value,n(1,i)},function(){i.addressTo=this.value,n(1,i)},function(){i.price=A(this.value),n(1,i)},function(){i.paymentMethod=D(this),n(1,i)},function(){i.childSeat=this.checked,n(1,i)},function(){i.animal=this.checked,n(1,i)},function(){i.phone=this.value,n(1,i)},function(){i.desc=this.value,n(1,i)},t=>o(t.uid,t.displayName)]}function jc(t,e,n){const r=t.slice();return r[31]=e[n],r}function qc(t){let e,n;return{c(){e=E("span"),e.textContent="удалить тему",I(e,"class"," float-right font-normal text-xs cursor-pointer text-teal-600")},m(r,i){w(r,e,i),n=C(e,"click",(function(){a(t[28].delete().then(t[17]))&&t[28].delete().then(t[17]).apply(this,arguments)}))},p(e,n){t=e},d(t){t&&_(e),n()}}}function $c(t){let e,n;return{c(){e=E("span"),n=x(t[1]),I(e,"class","mx-2")},m(t,r){w(t,e,r),b(e,n)},p(t,e){2&e[0]&&P(n,t[1])},d(t){t&&_(e)}}}function Vc(t){let e,n;return{c(){e=E("span"),n=x(t[1]),I(e,"class","mx-2 text-red-500")},m(t,r){w(t,e,r),b(e,n)},p(t,e){2&e[0]&&P(n,t[1])},d(t){t&&_(e)}}}function zc(t){let e,n;return{c(){e=E("span"),n=x(t[1]),I(e,"class","mx-2 text-green-500")},m(t,r){w(t,e,r),b(e,n)},p(t,e){2&e[0]&&P(n,t[1])},d(t){t&&_(e)}}}function Hc(t){let e,n,r,i=t[31].date.toDate().toLocaleDateString("ru-RU",{day:"numeric",month:"long"})+"",o=t[31].date.toDate().toLocaleTimeString("ru-RU",{hour12:!1})+"";return{c(){e=x(i),n=S(),r=x(o)},m(t,i){w(t,e,i),w(t,n,i),w(t,r,i)},p(t,n){536870912&n[0]&&i!==(i=t[31].date.toDate().toLocaleDateString("ru-RU",{day:"numeric",month:"long"})+"")&&P(e,i),536870912&n[0]&&o!==(o=t[31].date.toDate().toLocaleTimeString("ru-RU",{hour12:!1})+"")&&P(r,o)},d(t){t&&_(e),t&&_(n),t&&_(r)}}}function Gc(t){let e,n,r,i,o,a,s,u,c,l,h,d,f=t[31].text+"",p=t[31].username+"",m=null!=t[31].date&&Hc(t);return{c(){e=E("div"),n=E("div"),r=x(f),i=S(),o=E("div"),a=E("div"),s=E("span"),u=x(p),c=S(),l=E("div"),h=E("span"),m&&m.c(),d=S(),I(s,"class","text-xs text-gray-700 font-semibold"),I(h,"class"," text-gray-700 text-xs"),I(o,"class","flex flex-row justify-between"),I(e,"class","my-2 p-1 bg-white rounded-lg shadow-md")},m(t,f){w(t,e,f),b(e,n),b(n,r),b(e,i),b(e,o),b(o,a),b(a,s),b(s,u),b(o,c),b(o,l),b(l,h),m&&m.m(h,null),b(e,d)},p(t,e){536870912&e[0]&&f!==(f=t[31].text+"")&&P(r,f),536870912&e[0]&&p!==(p=t[31].username+"")&&P(u,p),null!=t[31].date?m?m.p(t,e):(m=Hc(t),m.c(),m.m(h,null)):m&&(m.d(1),m=null)},d(t){t&&_(e),m&&m.d()}}}function Wc(t){let e,n,r=t[29].length<10&&Kc(t),i=10===t[29].length&&Zc(t);return{c(){e=E("div"),r&&r.c(),n=S(),i&&i.c(),I(e,"class","w-full text-center")},m(t,o){w(t,e,o),r&&r.m(e,null),b(e,n),i&&i.m(e,null)},p(t,o){t[29].length<10?r?r.p(t,o):(r=Kc(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),10===t[29].length?i?i.p(t,o):(i=Zc(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(t){t&&_(e),r&&r.d(),i&&i.d()}}}function Kc(t){let e,n;function r(...e){return t[21](t[30],...e)}return{c(){e=E("button"),e.innerHTML='<img src="./icons/expand_less.svg" alt="prev">',I(e,"class","mr-4 p-2 border rounded-full bg-white")},m(t,i){w(t,e,i),n=C(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function Zc(t){let e,n;function r(...e){return t[22](t[30],...e)}return{c(){e=E("button"),e.innerHTML='<img src="./icons/expand_more.svg" alt="next">',I(e,"class","mr-4 p-2 border rounded-full bg-white")},m(t,i){w(t,e,i),n=C(e,"click",r)},p(e,n){t=e},d(t){t&&_(e),n()}}}function Qc(e){let n,r,i;return{c(){n=E("div"),r=E("button"),r.innerHTML='<img src="./icons/expand_less.svg" alt="prev">',I(r,"class","mr-4 p-2 border rounded-full bg-white"),I(n,"class","w-full text-center")},m(t,o){w(t,n,o),b(n,r),i=C(r,"click",e[23])},p:t,d(t){t&&_(n),i()}}}function Yc(t){let e;return{c(){e=E("span"),e.textContent="Не удалось загрузить",I(e,"slot","fallback")},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function Xc(t){let e,n,r,i,o=t[29],a=[];for(let e=0;e<o.length;e+=1)a[e]=Gc(jc(t,o,e));let s=0!=t[29].length&&Wc(t),u=0==t[29].length&&Qc(t);return{c(){e=E("div");for(let t=0;t<a.length;t+=1)a[t].c();n=S(),s&&s.c(),r=S(),u&&u.c(),i=S()},m(t,o){w(t,e,o);for(let t=0;t<a.length;t+=1)a[t].m(e,null);w(t,n,o),s&&s.m(t,o),w(t,r,o),u&&u.m(t,o),w(t,i,o)},p(t,n){if(536870912&n[0]){let r;for(o=t[29],r=0;r<o.length;r+=1){const i=jc(t,o,r);a[r]?a[r].p(i,n):(a[r]=Gc(i),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}0!=t[29].length?s?s.p(t,n):(s=Wc(t),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null),0==t[29].length?u?u.p(t,n):(u=Qc(t),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(t){t&&_(e),k(a,t),t&&_(n),s&&s.d(t),t&&_(r),u&&u.d(t),t&&_(i)}}}function Jc(t){let e,n,r,i,a,s,u,c,l;return{c(){e=E("div"),n=E("div"),r=E("textarea"),i=S(),a=E("div"),s=E("button"),s.textContent="Закрыть",u=S(),c=E("button"),c.textContent="Отправить",I(r,"class","mx-auto p-1 w-full border rounded-lg shadow"),I(r,"placeholder","Сообщение"),I(s,"class","btn-gray"),I(c,"class","btn-orange"),I(a,"class"," text-center"),I(e,"class","fixed bottom-0 border bg-gray-100 rounded-lg w-full p-2")},m(o,h){w(o,e,h),b(e,n),b(n,r),M(r,t[2]),b(e,i),b(e,a),b(a,s),b(a,u),b(a,c),l=[C(r,"input",t[24]),C(s,"click",t[25]),C(c,"click",t[9])]},p(t,e){4&e[0]&&M(r,t[2])},d(t){t&&_(e),o(l)}}}function tl(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,A,M,N,L,D,R,O,B,U,F,j,q,$,V,z,H,G,W,K,Z,Q,Y,X,J=t[27].header+"",tt=t[27].text+"",et=t[27].username+"",nt=t[27].date.toDate().toLocaleDateString("ru-RU",{day:"numeric",month:"long"})+"",rt=t[27].date.toDate().toLocaleTimeString("ru-RU",{hour12:!1})+"",it=t[27].owner===t[26].uid&&qc(t);function ot(t,e){return t[1]>0?zc:t[1]<0?Vc:$c}let at=ot(t),st=at(t);const ut=new Ye({props:{path:t[28].collection("replies"),query:t[4],$$slots:{default:[Xc,({data:t,last:e})=>({29:t,30:e}),({data:t,last:e})=>[(t?536870912:0)|(e?1073741824:0)]],fallback:[Yc,({data:t,last:e})=>({29:t,30:e}),({data:t,last:e})=>[(t?536870912:0)|(e?1073741824:0)]]},$$scope:{ctx:t}}});let ct=t[3]&&Jc(t);return{c(){e=E("div"),n=E("div"),r=E("p"),i=x(J),a=S(),it&&it.c(),s=S(),u=E("div"),c=E("p"),l=x(tt),h=S(),d=E("div"),f=E("div"),p=E("span"),m=x(et),g=S(),v=E("div"),y=E("div"),k=E("div"),A=E("img"),N=S(),L=E("div"),st.c(),D=S(),R=E("div"),O=E("img"),U=S(),F=E("div"),j=E("span"),q=x(nt),$=S(),V=x(rt),z=S(),H=E("div"),G=E("button"),G.textContent="Ответить",W=S(),K=E("div"),mt(ut.$$.fragment),Z=S(),ct&&ct.c(),Q=T(),I(r,"class"," text-lg font-semibold"),I(c,"class","text-justify leading-tight"),I(p,"class","text-xs text-gray-700 font-semibold"),I(A,"class"," cursor-pointer"),A.src!==(M="./icons/thumb_down_red.svg")&&I(A,"src","./icons/thumb_down_red.svg"),I(A,"alt","down"),I(O,"class"," cursor-pointer"),O.src!==(B="./icons/thumb_up_green.svg")&&I(O,"src","./icons/thumb_up_green.svg"),I(O,"alt","up"),I(y,"class","p-1 flex flex-row"),I(j,"class"," text-gray-700 text-xs"),I(d,"class","mt-2 flex flex-row justify-between"),I(G,"class","p-1 text-sm border bg-white text-green-600 rounded-md shadow-lg"),I(H,"class"," float-right"),I(e,"class","sticky top-0 mt-16 w-full p-2 bg-white rounded-lg shadow-md"),I(K,"class","mt-1 p-2")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(r,i),b(r,a),it&&it.m(r,null),b(e,s),b(e,u),b(u,c),b(c,l),b(e,h),b(e,d),b(d,f),b(f,p),b(p,m),b(d,g),b(d,v),b(v,y),b(y,k),b(k,A),b(y,N),b(y,L),st.m(L,null),b(y,D),b(y,R),b(R,O),b(d,U),b(d,F),b(F,j),b(j,q),b(j,$),b(j,V),b(e,z),b(e,H),b(H,G),w(o,W,_),w(o,K,_),gt(ut,K,null),w(o,Z,_),ct&&ct.m(o,_),w(o,Q,_),Y=!0,X=[C(A,"click",t[18]),C(O,"click",t[19]),C(G,"click",t[20])]},p(t,e){(!Y||134217728&e[0])&&J!==(J=t[27].header+"")&&P(i,J),t[27].owner===t[26].uid?it?it.p(t,e):(it=qc(t),it.c(),it.m(r,null)):it&&(it.d(1),it=null),(!Y||134217728&e[0])&&tt!==(tt=t[27].text+"")&&P(l,tt),(!Y||134217728&e[0])&&et!==(et=t[27].username+"")&&P(m,et),at===(at=ot(t))&&st?st.p(t,e):(st.d(1),st=at(t),st&&(st.c(),st.m(L,null))),(!Y||134217728&e[0])&&nt!==(nt=t[27].date.toDate().toLocaleDateString("ru-RU",{day:"numeric",month:"long"})+"")&&P(q,nt),(!Y||134217728&e[0])&&rt!==(rt=t[27].date.toDate().toLocaleTimeString("ru-RU",{hour12:!1})+"")&&P(V,rt);const n={};268435456&e[0]&&(n.path=t[28].collection("replies")),16&e[0]&&(n.query=t[4]),536870912&e[0]|8&e[1]&&(n.$$scope={dirty:e,ctx:t}),ut.$set(n),t[3]?ct?ct.p(t,e):(ct=Jc(t),ct.c(),ct.m(Q.parentNode,Q)):ct&&(ct.d(1),ct=null)},i(t){Y||(lt(ut.$$.fragment,t),Y=!0)},o(t){ht(ut.$$.fragment,t),Y=!1},d(t){t&&_(e),it&&it.d(),st.d(),t&&_(W),t&&_(K),vt(ut),t&&_(Z),ct&&ct.d(t),t&&_(Q),o(X)}}}function el(t){let e;const n=new Re({props:{path:`topics/${t[0].id}`,$$slots:{default:[tl,({data:t,ref:e})=>({27:t,28:e}),({data:t,ref:e})=>[(t?134217728:0)|(e?268435456:0)]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};1&e[0]&&(r.path=`topics/${t[0].id}`),469762078&e[0]|8&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function nl(t){let e;const n=new me({props:{$$slots:{default:[el,({user:t})=>({26:t}),({user:t})=>[t?67108864:0]]},$$scope:{ctx:t}}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,e){const r={};67108895&e[0]|8&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(lt(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function rl(t){let e,n;const r=new Qt({props:{firebase:Lt,$$slots:{default:[nl]},$$scope:{ctx:t}}});return{c(){e=E("div"),mt(r.$$.fragment),I(e,"class","mt-16 h-full min-h-screen bg-gray-200")},m(t,i){w(t,e,i),gt(r,e,null),n=!0},p(t,e){const n={};31&e[0]|8&e[1]&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){n||(lt(r.$$.fragment,t),n=!0)},o(t){ht(r.$$.fragment,t),n=!1},d(t){t&&_(e),vt(r)}}}function il(t,e,n){let r,{params:i={}}=e,o=Gt.ref();Lt.auth().onAuthStateChanged((function(t){t?r=t:console.log("no user login")}));let a=0,s=0,u="",c=!1,l=t=>t.orderBy("date","desc").limit(10);function h(t){n(4,l=e=>e.orderBy("date","desc").startAfter(t.date).limit(10))}function d(t){n(4,l=e=>e.orderBy("date","desc").endAt(t.date).limit(10))}function f(){n(4,l=t=>t.orderBy("date","desc").limit(10))}function p(){a=0,n(1,s=0),Ht.collection(`topics/${i.id}/votes`).get().then((function(t){t.forEach((function(t){const e=t.data();"up"===e.vote?(a++,n(1,s++,s)):"down"===e.vote&&(a++,n(1,s--,s))})),t.size%10==0&&(s>0?v():g())}))}function m(t){Ht.collection(`topics/${i.id}/votes`).where("owner","==",r.uid).get().then((function(e){if(e.empty)!function(t){Ht.collection(`topics/${i.id}/votes`).add({owner:r.uid,vote:t}).then(()=>{p(),console.log("voted")})}(t);else{let n=e.docs[0].ref.id;!function(e,n){console.log("update start"),Ht.collection(e).doc(n).update({vote:t}).then(()=>{p(),console.log("updated")})}(e.docs[0].ref.parent.path,n)}}))}function g(){Ht.collection("topics").doc(i.id).get().then((function(t){!function(t){Lt.functions().httpsCallable("ratingDecrement")({author:t}).then((function(t){console.log("done")})).catch((function(t){console.log(t.code,t.message,t.details)}))}(t.data().owner)})).catch((function(t){console.log(t.code,t.message,t.details)}))}function v(){Ht.collection("topics").doc(i.id).get().then((function(t){!function(t){Lt.functions().httpsCallable("ratingIncrement")({author:t}).then((function(t){console.log("done")})).catch((function(t){console.log(t.code,t.message,t.details)}))}(t.data().owner)})).catch((function(t){console.log(t.code,t.message,t.details)}))}p();return t.$set=t=>{"params"in t&&n(0,i=t.params)},[i,s,u,c,l,h,d,f,m,function(){Ht.collection(`topics/${i.id}/replies`).add({date:Lt.firestore.FieldValue.serverTimestamp(),owner:r.uid,username:r.displayName,text:u}).then((function(t){n(2,u=""),console.log("Document written with ID: ",t.id)})).catch((function(t){console.error("Error adding document: ",t)}))},r,a,o,void 0,p,g,v,()=>en("/"),()=>m("down"),()=>m("up"),()=>n(3,c=!0),t=>d(t),t=>h(t),()=>f(),function(){u=this.value,n(2,u)},()=>n(3,c=!1)]}function ol(e){let n,r;return{c(){n=E("div"),n.innerHTML='<p class="svelte-1sewpn4">\n                Бизнес-ангелы - это независимые инвесторы, которые способны вложить в проект деньги на самых ранних стадиях.\n            </p> \n            <p class="svelte-1sewpn4">\n                Avtokarta.club предлагает ангелам приобрести собственные токены \n                <a href="https://etherscan.io/token/0x943b8cc219a5fb3ba70adb173774987c63c3080b" class="svelte-1sewpn4">TAK</a> \n                стандарта  <a href="https://eips.ethereum.org/EIPS/eip-777" class="svelte-1sewpn4">ERC777</a> (новый стандарт токенов на блокчейне Ethereum).\n            </p> \n            <p class="svelte-1sewpn4">\n                1 токен ТАК = 1 российский рубль.\n            </p> \n            <p class="svelte-1sewpn4">\n                ICO (Initial Coin Offering) – первичное предложение токенов, которые дают право участвовать в выбранном проекте.\n            </p> \n            <p class="svelte-1sewpn4">\n                Pre-Sale - ранняя стадия ICO, на которой токены предлагаются со значительной скидкой. \n                Всего будет продано 5 млн. токенов со скидкой 50%.\n            </p> \n            <p class="svelte-1sewpn4">\n                Возврат инвестиций. После открытии биржи токенов, ангелы первыми получают доступ к продажам токенов. \n                Спрос токенов обеспечат инвесторы в регионах, которые хотят стать партнерами и пробрести франшизу платформы, \n                так как франшиза приобретается за токены. Следующими доступ к продажам токенов получают франчайзи, которые \n                обеспечат быстрый и выгодный обмен токенов в регонах для клиентов платформы. После окончания ICO доступ к бирже \n                будет открыт для всех.\n            </p> \n            <p class="svelte-1sewpn4">\n                Приобрести токены можно будет с 1 июня 2020 года на странице <a href="#/ico" class="svelte-1sewpn4">ICO</a>.\n            </p>'},m(t,e){w(t,n,e)},i(t){r||J(()=>{r=ft(n,cn,{duration:1e3}),r.start()})},o:t,d(t){t&&_(n)}}}function al(e){let n,r;return{c(){n=E("div"),n.innerHTML='<p class="svelte-1sewpn4">\n                Для партнеров, которые хотят иметь долю в перспективной платформе, Avtokarta.club предлагает \n                взаимовыгодную, понятную и простую схему сотрудничества - франшиза.\n            </p> \n            <p class="svelte-1sewpn4">\n                Партнер приобретающий франшизу\n                (далее франчайзи), единожды оплачивает паушальный взнос и выбирает город, который будет закрепллён за франчайзи.\n            </p> \n            <p class="svelte-1sewpn4">\n                Далее вся прибыль полученная от комисси такси, комиссии аренды спецтехники, премиум аккаунтов пользователей, \n                платных услуг для сервисов, рекламных блоков на карте данного города, включая его административные границы,\n                делится 50/50, пока будет существовать платформа. Больше никаких платежей, взносов и прочего.\n            </p>'},m(t,e){w(t,n,e)},i(t){r||J(()=>{r=ft(n,cn,{duration:1e3}),r.start()})},o:t,d(t){t&&_(n)}}}function sl(t){let e,n,r;return{c(){e=E("div"),e.innerHTML='<p class="svelte-1sewpn4">\n                На SMM (social media marketing) в Avtokarta.club выделено 100 млн. токенов ТАК. За каждого нового пользователя,\n                зарегистрированного по вашему промокоду, Avtokarta.club переводит вам 100 токенов ТАК.\n            </p>'},m(t,n){w(t,e,n),r=!0},i(t){r||(J(()=>{n||(n=pt(e,cn,{duration:1e3},!0)),n.run(1)}),r=!0)},o(t){n||(n=pt(e,cn,{duration:1e3},!1)),n.run(0),r=!1},d(t){t&&_(e),t&&n&&n.end()}}}function ul(t){let e;return{c(){e=E("div"),e.innerHTML='<p class="svelte-1sewpn4">\n            К концу 2020 года Avtokarta.club полностью перейдёт на децентрализованную систему взаимодействия между \n            пользователями, разработчиками и инвесторами. Таким образом, единственный способ воспользоваться всеми\n            преимуществами платформы, станет токен ТАК.\n            </p> \n            <p class="svelte-1sewpn4">\n            Все, пользователи платформы и держатели токена ТАК заинтересованы в его стабильности и ликвидности.\n            Для этого перед открытием биржи, все токены, за вычетом выделенных на маркетинг,\n            разработку и поддержку платформы, переводятся на специальный смарт-контракт, который не имеет владельца, \n            тем самым исключается возможность обмана со стороны разработчиков платформы.\n            </p> \n            <p class="svelte-1sewpn4">\n            Смарт-контракт позволит пользователям &quot;майнить&quot; токены ТАК. Например, держатель токена переводит токены\n            на смарт-контракт, если на счету контракта достаточно токенов, чтобы вернуть владельцу депозит плюс проценты,\n            тогда токены замораживаются контрактом на инвестиционный период, после истечения срока токены размораживаются\n            и становятся доступны для их владельца. Вот так просто и прозрачно &quot;майнятся&quot; токены ТАК.\n            Общее колличество токенов ТАК 21 трлн. \n            </p>'},m(t,n){w(t,e,n)},d(t){t&&_(e)}}}function cl(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,x=t[0]&&ol(),T=t[1]&&al(),A=t[2]&&sl(),P=t[3]&&ul();return{c(){e=E("div"),n=E("div"),r=E("div"),r.innerHTML='<span class="headers svelte-1sewpn4">\n                АНГЕЛЫ ПРОЕКТА\n            </span> \n            <img src="./img/angel.jpg" alt="angel" class="svelte-1sewpn4">',i=S(),x&&x.c(),a=S(),s=E("div"),u=E("div"),u.innerHTML='<span class="headers svelte-1sewpn4">\n                ФРАНШИЗА\n            </span> \n            <img src="./img/map-pin.jpg" alt="map" class="svelte-1sewpn4">',c=S(),T&&T.c(),l=S(),h=E("div"),d=E("div"),d.innerHTML='<span class="headers svelte-1sewpn4">\n                SOCIAL MEDIA\n            </span> \n            <img src="./img/social-media.jpg" alt="sm" class="svelte-1sewpn4">',f=S(),A&&A.c(),p=S(),m=E("div"),g=E("div"),g.innerHTML='<span class="headers svelte-1sewpn4">\n                МАЙНИНГ\n            </span> \n            <img src="./img/blockchain-world.jpg" alt="angel" class="svelte-1sewpn4">',v=S(),P&&P.c(),I(r,"class","title svelte-1sewpn4"),I(u,"class","title svelte-1sewpn4"),I(d,"class","title svelte-1sewpn4"),I(g,"class","title svelte-1sewpn4"),I(m,"id","blockchain"),I(e,"class","mt-16")},m(o,_){w(o,e,_),b(e,n),b(n,r),b(n,i),x&&x.m(n,null),b(e,a),b(e,s),b(s,u),b(s,c),T&&T.m(s,null),b(e,l),b(e,h),b(h,d),b(h,f),A&&A.m(h,null),b(e,p),b(e,m),b(m,g),b(m,v),P&&P.m(m,null),y=!0,k=[C(r,"click",t[5]),C(u,"click",t[6]),C(d,"click",t[7]),C(g,"click",t[8])]},p(t,[e]){t[0]?x?lt(x,1):(x=ol(),x.c(),lt(x,1),x.m(n,null)):x&&(x.d(1),x=null),t[1]?T?lt(T,1):(T=al(),T.c(),lt(T,1),T.m(s,null)):T&&(T.d(1),T=null),t[2]?A?lt(A,1):(A=sl(),A.c(),lt(A,1),A.m(h,null)):A&&(ut(),ht(A,1,1,()=>{A=null}),ct()),t[3]?P||(P=ul(),P.c(),P.m(m,null)):P&&(P.d(1),P=null)},i(t){y||(lt(x),lt(T),lt(A),y=!0)},o(t){ht(A),y=!1},d(t){t&&_(e),x&&x.d(),T&&T.d(),A&&A.d(),P&&P.d(),o(k)}}}function ll(t,e,n){let r=!1,i=!1,o=!1,a=!1;return[r,i,o,a,void 0,()=>n(0,r=!0),()=>n(1,i=!0),()=>n(2,o=!0),()=>n(3,a=!0)]}var hl=[{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"_rate",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"userData",type:"bytes"},{indexed:!1,internalType:"bytes",name:"operatorData",type:"bytes"}],name:"TokReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"bytes",name:"userData",type:"bytes"},{indexed:!1,internalType:"bytes",name:"operatorData",type:"bytes"}],name:"TokSent",type:"event"},{inputs:[],name:"TOKENS_SENDER_INTERFACE_HASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"interfaceHash",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"canImplementInterfaceForAddress",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rate",type:"uint256"}],name:"changeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getRate",outputs:[{internalType:"uint256",name:"crate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"rate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"senderFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"userData",type:"bytes"},{internalType:"bytes",name:"operatorData",type:"bytes"}],name:"tokensReceived",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"userData",type:"bytes"},{internalType:"bytes",name:"operatorData",type:"bytes"}],name:"tokensToSend",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function dl(t){let e,n,r,i,o,a,s,u,c=Math.trunc(5e6-t[3])+"",l=Math.trunc(t[3])+"";return{c(){e=E("div"),n=E("span"),r=x("Продано: "),i=x(c),o=x("\r\n            /\r\n            "),a=E("span"),s=x("Доступно: "),u=x(l),I(e,"class"," text-xs italic text-center text-purple-900")},m(t,c){w(t,e,c),b(e,n),b(n,r),b(n,i),b(e,o),b(e,a),b(a,s),b(a,u)},p(t,e){8&e[0]&&c!==(c=Math.trunc(5e6-t[3])+"")&&P(i,c),8&e[0]&&l!==(l=Math.trunc(t[3])+"")&&P(u,l)},d(t){t&&_(e)}}}function fl(e){let n;return{c(){n=E("div"),n.innerHTML='<p>\n            Для покупки токенов установите расширение для браузера \n            <a class=" underline text-teal-500 font-semibold" href="https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn">\n            MetaMask\n            </a></p>',I(n,"class","mt-6 p-2")},m(t,e){w(t,n,e)},p:t,d(t){t&&_(n)}}}function pl(t){let e,n,r,i,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,A,N,L,D=!1,R=null!=t[8]&&ml(t);function O(){D=!0,t[32].call(f)}return{c(){e=E("div"),R&&R.c(),n=S(),r=E("div"),i=E("button"),i.textContent="Подключить MetaMask",a=S(),s=E("button"),s.textContent="Добавить токены в кошелёк",u=S(),c=E("div"),l=E("div"),l.textContent="Купить токены",h=S(),d=E("div"),f=E("input"),p=S(),m=E("div"),g=E("span"),v=x("= "),y=x(t[2]),k=x(" Eth."),T=S(),A=E("div"),N=E("button"),N.textContent="Купить",I(i,"class","btn-red-pink"),I(s,"class","btn-purple-pink"),I(r,"class","mt-2 text-center"),I(l,"class"," text-lg font-semibold text-center text-white"),I(f,"class"," border bg-gray-200"),I(f,"type","number"),I(f,"step","1000"),I(f,"min","1000"),I(f,"max",t[3]),I(d,"class","mt-2 text-center"),I(g,"class"," text-sm text-white"),I(m,"class"," text-center"),I(N,"class","btn-blue-green"),I(A,"class","mt-2 text-center"),I(c,"class","mt-4"),I(e,"class","mt-3 p-2")},m(o,_){w(o,e,_),R&&R.m(e,null),b(e,n),b(e,r),b(r,i),b(r,a),b(r,s),b(e,u),b(e,c),b(c,l),b(c,h),b(c,d),b(d,f),M(f,t[1]),b(c,p),b(c,m),b(m,g),b(g,v),b(g,y),b(g,k),b(c,T),b(c,A),b(A,N),L=[C(i,"click",t[10]),C(s,"click",bl),C(f,"input",O),C(N,"click",t[11])]},p(t,r){null!=t[8]?R?R.p(t,r):(R=ml(t),R.c(),R.m(e,n)):R&&(R.d(1),R=null),8&r[0]&&I(f,"max",t[3]),!D&&2&r[0]&&M(f,t[1]),D=!1,4&r[0]&&P(y,t[2])},d(t){t&&_(e),R&&R.d(),o(L)}}}function ml(t){let e,n,r,i,o,a,s,u,c,l,h=Math.trunc(t[9])+"";return{c(){e=E("div"),n=E("div"),n.textContent="Ваш кошелёк:",r=S(),i=E("div"),o=x(t[8]),a=S(),s=E("div"),u=E("span"),u.textContent="Кол-во ТАК:",c=S(),l=x(h),I(n,"class"," font-medium"),I(u,"class"," font-medium"),I(e,"class"," text-sm")},m(t,h){w(t,e,h),b(e,n),b(e,r),b(e,i),b(i,o),b(e,a),b(e,s),b(s,u),b(s,c),b(s,l)},p(t,e){256&e[0]&&P(o,t[8]),512&e[0]&&h!==(h=Math.trunc(t[9])+"")&&P(l,h)},d(t){t&&_(e)}}}function gl(e){let n,r,i,o,a,s,u,c,l,h,d,f,p,m,g,v,y,k,T,C,A,M,N,L,D,R,O,B,U,F,j=Math.trunc(100*e[5])/100+"",q=Math.trunc(e[6]*e[5]*100)/100+"",$=null!=e[3]&&dl(e);function V(t,e){return t[7]?pl:fl}let z=V(e),H=z(e);return{c(){n=E("div"),r=E("div"),i=E("div"),o=x("USD: \r\n            "),a=x(j),s=x(" руб.\r\n\r\n            \r\n            "),u=E("span"),u.innerHTML='<img src="./icons/help.svg" alt="help" class="w-4 h-4"> \n                <span class="svelte-1uggeca">\n                    Курс долара США от ЦБ РФ.\n                </span>',c=S(),l=E("div"),h=x("ETH: \r\n            "),d=x(e[6]),f=x(" USD\r\n            \r\n            "),p=E("span"),p.innerHTML='<img src="./icons/help.svg" alt="help" class="w-4 h-4"> \n                <span class="svelte-1uggeca">\n                    Курс эфириума от \n                    <a href="https://etherscan.io" class=" underline text-orange-500"> \n                    Etherscan \n                    </a></span>',m=S(),g=E("div"),v=x("ETH/RUB: \r\n            "),y=x(q),k=x(" руб."),T=S(),C=E("div"),A=x("ETH/ТАК: "),M=x(e[4]),N=x(" TAK\r\n            \r\n            "),L=E("span"),L.innerHTML='<img src="./icons/help.svg" alt="help" class="w-4 h-4"> \n                <span class="svelte-1uggeca">\n                    Токен Avtokarta.club, цена указана со скидкой 50%\n                </span>',D=S(),R=E("div"),O=E("div"),B=E("progress"),U=S(),$&&$.c(),F=S(),H.c(),I(u,"class","help svelte-1uggeca"),I(p,"class","help svelte-1uggeca"),I(L,"class","help svelte-1uggeca"),I(r,"class","p-1 text-sm font-medium"),B.value=e[0],I(B,"max","5000000"),I(B,"class","mt-2 w-full h-8"),I(n,"class","pt-16 min-h-screen bg-gradient-purple-pink-light")},m(t,e){w(t,n,e),b(n,r),b(r,i),b(i,o),b(i,a),b(i,s),b(i,u),b(r,c),b(r,l),b(l,h),b(l,d),b(l,f),b(l,p),b(r,m),b(r,g),b(g,v),b(g,y),b(g,k),b(r,T),b(r,C),b(C,A),b(C,M),b(C,N),b(C,L),b(n,D),b(n,R),b(R,O),b(O,B),b(R,U),$&&$.m(R,null),b(n,F),H.m(n,null)},p(t,e){32&e[0]&&j!==(j=Math.trunc(100*t[5])/100+"")&&P(a,j),64&e[0]&&P(d,t[6]),96&e[0]&&q!==(q=Math.trunc(t[6]*t[5]*100)/100+"")&&P(y,q),16&e[0]&&P(M,t[4]),1&e[0]&&(B.value=t[0]),null!=t[3]?$?$.p(t,e):($=dl(t),$.c(),$.m(R,null)):$&&($.d(1),$=null),z===(z=V(t))&&H?H.p(t,e):(H.d(1),H=z(t),H&&(H.c(),H.m(n,null)))},i:t,o:t,d(t){t&&_(n),$&&$.d(),H.d()}}}const vl="0x943B8cC219a5Fb3BA70AdB173774987c63c3080b",yl="0xa3979422e803432b0670ceec8c53c25ed2576a4e";function bl(){ethereum.sendAsync({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:vl,symbol:"T777",decimals:18}},id:Math.round(1e5*Math.random())},(t,e)=>{e?console.log("Thanks for your interest!"):console.log("Your loss!")})}function wl(t,e,n){let r,i,o,a,s,u,c,l,h,d,f,p,m=0,g=0,v=0,y=0,b=!1,w=Hs.constants.WeiPerEther;window.web3?(r=new Hs.providers.Web3Provider(web3.currentProvider),i=r.getSigner()):r=Hs.getDefaultProvider();let _=new Hs.Contract(yl,hl,r),k=new Hs.Contract(vl,Gs,r);async function E(){let t=await _.getRate();n(18,d=t),n(4,h=t.toString()),console.log("token rate",h)}async function x(){let t=await k.balanceOf(f);n(9,p=Hs.utils.formatEther(t))}async function S(){let t=await k.balanceOf(yl);n(3,c=Hs.utils.formatEther(t)),console.log("balance",c),n(0,m=5e6-c)}function T(){void 0!==window.ethereum?ethereum.isMetaMask&&n(7,b=!0):n(7,b=!1)}function C(){fetch("https://www.cbr-xml-daily.ru/daily_json.js").then(t=>t.json()).then(t=>{l=t,console.log(l),n(5,v=l.Valute.USD.Value)})}function I(){(new Hs.providers.EtherscanProvider).getEtherPrice().then((function(t){n(6,y=t),console.log("Ether price in USD: "+t)}))}return E(),S(),T(),C(),I(),t.$$.update=()=>{344066&t.$$.dirty[0]&&o>0&&(n(14,a=Hs.utils.bigNumberify(o)),n(16,u=w.mul(a).div(d).add(8)),s=u.toHexString(),n(2,g=Hs.utils.formatEther(u)))},[m,o,g,c,h,v,y,b,f,p,function(){window.ethereum.enable(),n(8,f=ethereum.selectedAddress),x()},function(){if(c>o){let t=s;console.log(t);const e={to:yl,from:ethereum.selectedAddress,value:t};ethereum.sendAsync({method:"eth_sendTransaction",params:[e],from:ethereum.selectedAddress},(t,e)=>{t?console.error(t):console.log(e)})}else alert(`Доступное кол-во токенов для покупки: ${c}`)},r,i,a,s,u,l,d,void 0,void 0,w,_,k,E,x,S,T,C,I,async function(){let t=_.connect(i),e=await t.changeRate(void 0);console.log(e.hash),await e.wait(),console.log("done")},async function(){let t=_.connect(i),e=await t.withdraw();console.log(e.hash),await e.wait(),console.log("done")},function(){o=A(this.value),n(1,o)}]}function _l(e){let n;return{c(){n=E("p"),n.textContent="Not found"},m(t,e){w(t,n,e)},p:t,i:t,o:t,d(t){t&&_(n)}}}var kl={routes:{"/":class extends wt{constructor(t){super(),bt(this,t,Sa,ka,s,{},[-1,-1,-1,-1,-1])}},"/about":class extends wt{constructor(t){super(),bt(this,t,null,Ta,s,{})}},"/help":class extends wt{constructor(t){super(),bt(this,t,null,null,s,{})}},"/ico":class extends wt{constructor(t){super(),bt(this,t,wl,gl,s,{},[-1,-1])}},"/partners":class extends wt{constructor(t){super(),bt(this,t,ll,cl,s,{})}},"/addservice":class extends wt{constructor(t){super(),bt(this,t,Ma,Aa,s,{},[-1,-1])}},"/service/:id/:records?/:date?":class extends wt{constructor(t){super(),bt(this,t,zs,$s,s,{params:0},[-1,-1,-1,-1])}},"/cryptowallet":class extends wt{constructor(t){super(),bt(this,t,Mu,Pu,s,{},[-1,-1,-1,-1])}},"/profile":class extends wt{constructor(t){super(),bt(this,t,Ec,kc,s,{})}},"/taxidriverpage/:id":class extends wt{constructor(t){super(),bt(this,t,Fc,Uc,s,{params:0})}},"/topic/:id":class extends wt{constructor(t){super(),bt(this,t,il,rl,s,{params:0},[-1,-1])}},"*":class extends wt{constructor(t){super(),bt(this,t,null,_l,s,{})}}}};function El(t){let e,r,i,o;const a=new _t({}),s=new xn({}),u=[kl];let c={};for(let t=0;t<u.length;t+=1)c=n(c,u[t]);const l=new rn({props:c});return{c(){mt(a.$$.fragment),e=S(),r=E("main"),mt(s.$$.fragment),i=S(),mt(l.$$.fragment)},m(t,n){gt(a,t,n),w(t,e,n),w(t,r,n),gt(s,r,null),b(r,i),gt(l,r,null),o=!0},p(t,[e]){const n=0&e?function(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[o]=s}else for(const t in a)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(u,[(r=kl,"object"==typeof r&&null!==r?r:{})]):{};var r;l.$set(n)},i(t){o||(lt(a.$$.fragment,t),lt(s.$$.fragment,t),lt(l.$$.fragment,t),o=!0)},o(t){ht(a.$$.fragment,t),ht(s.$$.fragment,t),ht(l.$$.fragment,t),o=!1},d(t){vt(a,t),t&&_(e),t&&_(r),vt(s),vt(l)}}}return new class extends wt{constructor(t){super(),bt(this,t,null,El,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
